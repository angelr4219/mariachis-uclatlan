(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Qb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Zm={exports:{}},ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ME;function zR(){if(ME)return ac;ME=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:n,type:s,key:d,ref:o!==void 0?o:null,props:l}}return ac.Fragment=e,ac.jsx=t,ac.jsxs=t,ac}var VE;function qR(){return VE||(VE=1,Zm.exports=zR()),Zm.exports}var u=qR(),Jm={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LE;function FR(){if(LE)return Pe;LE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,z={};function j(k,ae,de){this.props=k,this.context=ae,this.refs=z,this.updater=de||C}j.prototype.isReactComponent={},j.prototype.setState=function(k,ae){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,ae,"setState")},j.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function Y(){}Y.prototype=j.prototype;function K(k,ae,de){this.props=k,this.context=ae,this.refs=z,this.updater=de||C}var X=K.prototype=new Y;X.constructor=K,L(X,j.prototype),X.isPureReactComponent=!0;var se=Array.isArray,ie={H:null,A:null,T:null,S:null,V:null},B=Object.prototype.hasOwnProperty;function I(k,ae,de,ce,ue,ge){return de=ge.ref,{$$typeof:n,type:k,key:ae,ref:de!==void 0?de:null,props:ge}}function R(k,ae){return I(k.type,ae,void 0,void 0,void 0,k.props)}function x(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function P(k){var ae={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(de){return ae[de]})}var D=/\/+/g;function M(k,ae){return typeof k=="object"&&k!==null&&k.key!=null?P(""+k.key):ae.toString(36)}function N(){}function Ee(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(N,N):(k.status="pending",k.then(function(ae){k.status==="pending"&&(k.status="fulfilled",k.value=ae)},function(ae){k.status==="pending"&&(k.status="rejected",k.reason=ae)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function xe(k,ae,de,ce,ue){var ge=typeof k;(ge==="undefined"||ge==="boolean")&&(k=null);var he=!1;if(k===null)he=!0;else switch(ge){case"bigint":case"string":case"number":he=!0;break;case"object":switch(k.$$typeof){case n:case e:he=!0;break;case v:return he=k._init,xe(he(k._payload),ae,de,ce,ue)}}if(he)return ue=ue(k),he=ce===""?"."+M(k,0):ce,se(ue)?(de="",he!=null&&(de=he.replace(D,"$&/")+"/"),xe(ue,ae,de,"",function(ot){return ot})):ue!=null&&(x(ue)&&(ue=R(ue,de+(ue.key==null||k&&k.key===ue.key?"":(""+ue.key).replace(D,"$&/")+"/")+he)),ae.push(ue)),1;he=0;var We=ce===""?".":ce+":";if(se(k))for(var ke=0;ke<k.length;ke++)ce=k[ke],ge=We+M(ce,ke),he+=xe(ce,ae,de,ge,ue);else if(ke=w(k),typeof ke=="function")for(k=ke.call(k),ke=0;!(ce=k.next()).done;)ce=ce.value,ge=We+M(ce,ke++),he+=xe(ce,ae,de,ge,ue);else if(ge==="object"){if(typeof k.then=="function")return xe(Ee(k),ae,de,ce,ue);throw ae=String(k),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return he}function V(k,ae,de){if(k==null)return k;var ce=[],ue=0;return xe(k,ce,"","",function(ge){return ae.call(de,ge,ue++)}),ce}function re(k){if(k._status===-1){var ae=k._result;ae=ae(),ae.then(function(de){(k._status===0||k._status===-1)&&(k._status=1,k._result=de)},function(de){(k._status===0||k._status===-1)&&(k._status=2,k._result=de)}),k._status===-1&&(k._status=0,k._result=ae)}if(k._status===1)return k._result.default;throw k._result}var me=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function De(){}return Pe.Children={map:V,forEach:function(k,ae,de){V(k,function(){ae.apply(this,arguments)},de)},count:function(k){var ae=0;return V(k,function(){ae++}),ae},toArray:function(k){return V(k,function(ae){return ae})||[]},only:function(k){if(!x(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Pe.Component=j,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=K,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ie,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return ie.H.useMemoCache(k)}},Pe.cache=function(k){return function(){return k.apply(null,arguments)}},Pe.cloneElement=function(k,ae,de){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ce=L({},k.props),ue=k.key,ge=void 0;if(ae!=null)for(he in ae.ref!==void 0&&(ge=void 0),ae.key!==void 0&&(ue=""+ae.key),ae)!B.call(ae,he)||he==="key"||he==="__self"||he==="__source"||he==="ref"&&ae.ref===void 0||(ce[he]=ae[he]);var he=arguments.length-2;if(he===1)ce.children=de;else if(1<he){for(var We=Array(he),ke=0;ke<he;ke++)We[ke]=arguments[ke+2];ce.children=We}return I(k.type,ue,void 0,void 0,ge,ce)},Pe.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Pe.createElement=function(k,ae,de){var ce,ue={},ge=null;if(ae!=null)for(ce in ae.key!==void 0&&(ge=""+ae.key),ae)B.call(ae,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ue[ce]=ae[ce]);var he=arguments.length-2;if(he===1)ue.children=de;else if(1<he){for(var We=Array(he),ke=0;ke<he;ke++)We[ke]=arguments[ke+2];ue.children=We}if(k&&k.defaultProps)for(ce in he=k.defaultProps,he)ue[ce]===void 0&&(ue[ce]=he[ce]);return I(k,ge,void 0,void 0,null,ue)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(k){return{$$typeof:m,render:k}},Pe.isValidElement=x,Pe.lazy=function(k){return{$$typeof:v,_payload:{_status:-1,_result:k},_init:re}},Pe.memo=function(k,ae){return{$$typeof:y,type:k,compare:ae===void 0?null:ae}},Pe.startTransition=function(k){var ae=ie.T,de={};ie.T=de;try{var ce=k(),ue=ie.S;ue!==null&&ue(de,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(De,me)}catch(ge){me(ge)}finally{ie.T=ae}},Pe.unstable_useCacheRefresh=function(){return ie.H.useCacheRefresh()},Pe.use=function(k){return ie.H.use(k)},Pe.useActionState=function(k,ae,de){return ie.H.useActionState(k,ae,de)},Pe.useCallback=function(k,ae){return ie.H.useCallback(k,ae)},Pe.useContext=function(k){return ie.H.useContext(k)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(k,ae){return ie.H.useDeferredValue(k,ae)},Pe.useEffect=function(k,ae,de){var ce=ie.H;if(typeof de=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(k,ae)},Pe.useId=function(){return ie.H.useId()},Pe.useImperativeHandle=function(k,ae,de){return ie.H.useImperativeHandle(k,ae,de)},Pe.useInsertionEffect=function(k,ae){return ie.H.useInsertionEffect(k,ae)},Pe.useLayoutEffect=function(k,ae){return ie.H.useLayoutEffect(k,ae)},Pe.useMemo=function(k,ae){return ie.H.useMemo(k,ae)},Pe.useOptimistic=function(k,ae){return ie.H.useOptimistic(k,ae)},Pe.useReducer=function(k,ae,de){return ie.H.useReducer(k,ae,de)},Pe.useRef=function(k){return ie.H.useRef(k)},Pe.useState=function(k){return ie.H.useState(k)},Pe.useSyncExternalStore=function(k,ae,de){return ie.H.useSyncExternalStore(k,ae,de)},Pe.useTransition=function(){return ie.H.useTransition()},Pe.version="19.1.1",Pe}var UE;function ug(){return UE||(UE=1,Jm.exports=FR()),Jm.exports}var F=ug();const ee=Qb(F);var ep={exports:{}},oc={},tp={exports:{}},np={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BE;function HR(){return BE||(BE=1,(function(n){function e(V,re){var me=V.length;V.push(re);e:for(;0<me;){var De=me-1>>>1,k=V[De];if(0<o(k,re))V[De]=re,V[me]=k,me=De;else break e}}function t(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var re=V[0],me=V.pop();if(me!==re){V[0]=me;e:for(var De=0,k=V.length,ae=k>>>1;De<ae;){var de=2*(De+1)-1,ce=V[de],ue=de+1,ge=V[ue];if(0>o(ce,me))ue<k&&0>o(ge,ce)?(V[De]=ge,V[ue]=me,De=ue):(V[De]=ce,V[de]=me,De=de);else if(ue<k&&0>o(ge,me))V[De]=ge,V[ue]=me,De=ue;else break e}}return re}function o(V,re){var me=V.sortIndex-re.sortIndex;return me!==0?me:V.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var g=[],y=[],v=1,b=null,w=3,C=!1,L=!1,z=!1,j=!1,Y=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function se(V){for(var re=t(y);re!==null;){if(re.callback===null)s(y);else if(re.startTime<=V)s(y),re.sortIndex=re.expirationTime,e(g,re);else break;re=t(y)}}function ie(V){if(z=!1,se(V),!L)if(t(g)!==null)L=!0,B||(B=!0,M());else{var re=t(y);re!==null&&xe(ie,re.startTime-V)}}var B=!1,I=-1,R=5,x=-1;function P(){return j?!0:!(n.unstable_now()-x<R)}function D(){if(j=!1,B){var V=n.unstable_now();x=V;var re=!0;try{e:{L=!1,z&&(z=!1,K(I),I=-1),C=!0;var me=w;try{t:{for(se(V),b=t(g);b!==null&&!(b.expirationTime>V&&P());){var De=b.callback;if(typeof De=="function"){b.callback=null,w=b.priorityLevel;var k=De(b.expirationTime<=V);if(V=n.unstable_now(),typeof k=="function"){b.callback=k,se(V),re=!0;break t}b===t(g)&&s(g),se(V)}else s(g);b=t(g)}if(b!==null)re=!0;else{var ae=t(y);ae!==null&&xe(ie,ae.startTime-V),re=!1}}break e}finally{b=null,w=me,C=!1}re=void 0}}finally{re?M():B=!1}}}var M;if(typeof X=="function")M=function(){X(D)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ee=N.port2;N.port1.onmessage=D,M=function(){Ee.postMessage(null)}}else M=function(){Y(D,0)};function xe(V,re){I=Y(function(){V(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(V){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var me=w;w=re;try{return V()}finally{w=me}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(V,re){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var me=w;w=V;try{return re()}finally{w=me}},n.unstable_scheduleCallback=function(V,re,me){var De=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?De+me:De):me=De,V){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=me+k,V={id:v++,callback:re,priorityLevel:V,startTime:me,expirationTime:k,sortIndex:-1},me>De?(V.sortIndex=me,e(y,V),t(g)===null&&V===t(y)&&(z?(K(I),I=-1):z=!0,xe(ie,me-De))):(V.sortIndex=k,e(g,V),L||C||(L=!0,B||(B=!0,M()))),V},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(V){var re=w;return function(){var me=w;w=re;try{return V.apply(this,arguments)}finally{w=me}}}})(np)),np}var zE;function GR(){return zE||(zE=1,tp.exports=HR()),tp.exports}var ip={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qE;function $R(){if(qE)return dn;qE=1;var n=ug();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:y,implementation:v}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(g,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return l(g,y,null,v)},dn.flushSync=function(g){var y=d.T,v=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=y,s.p=v,s.d.f()}},dn.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},dn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},dn.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,C=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:C}):v==="script"&&s.d.X(g,{crossOrigin:b,integrity:w,fetchPriority:C,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},dn.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},dn.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);s.d.L(g,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},dn.preloadModule=function(g,y){if(typeof g=="string")if(y){var v=m(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},dn.requestFormReset=function(g){s.d.r(g)},dn.unstable_batchedUpdates=function(g,y){return g(y)},dn.useFormState=function(g,y,v){return d.H.useFormState(g,y,v)},dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},dn.version="19.1.1",dn}var FE;function YR(){if(FE)return ip.exports;FE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ip.exports=$R(),ip.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var HE;function KR(){if(HE)return oc;HE=1;var n=GR(),e=ug(),t=YR();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var r=i,a=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(a=r.return),i=r.return;while(i)}return r.tag===3?a:null}function d(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=l(i),r===null)throw Error(s(188));return r!==i?null:i}for(var a=i,c=r;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return m(f),i;if(p===c)return m(f),r;p=p.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=p;else{for(var T=!1,S=f.child;S;){if(S===a){T=!0,a=f,c=p;break}if(S===c){T=!0,c=f,a=p;break}S=S.sibling}if(!T){for(S=p.child;S;){if(S===a){T=!0,a=p,c=f;break}if(S===c){T=!0,c=p,a=f;break}S=S.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:r}function y(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=y(i),r!==null)return r;i=i.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),X=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function M(i){return i===null||typeof i!="object"?null:(i=D&&i[D]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function Ee(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case ie:return"Suspense";case B:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case X:return(i.displayName||"Context")+".Provider";case K:return(i._context.displayName||"Context")+".Consumer";case se:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case I:return r=i.displayName||null,r!==null?r:Ee(i.type)||"Memo";case R:r=i._payload,i=i._init;try{return Ee(i(r))}catch{}}return null}var xe=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},De=[],k=-1;function ae(i){return{current:i}}function de(i){0>k||(i.current=De[k],De[k]=null,k--)}function ce(i,r){k++,De[k]=i.current,i.current=r}var ue=ae(null),ge=ae(null),he=ae(null),We=ae(null);function ke(i,r){switch(ce(he,r),ce(ge,i),ce(ue,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?uE(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=uE(r),i=hE(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}de(ue),ce(ue,i)}function ot(){de(ue),de(ge),de(he)}function bt(i){i.memoizedState!==null&&ce(We,i);var r=ue.current,a=hE(r,i.type);r!==a&&(ce(ge,i),ce(ue,a))}function Vn(i){ge.current===i&&(de(ue),de(ge)),We.current===i&&(de(We),tc._currentValue=me)}var Qn=Object.prototype.hasOwnProperty,mt=n.unstable_scheduleCallback,Ie=n.unstable_cancelCallback,Ms=n.unstable_shouldYield,Vs=n.unstable_requestPaint,An=n.unstable_now,Wd=n.unstable_getCurrentPriorityLevel,Jo=n.unstable_ImmediatePriority,ja=n.unstable_UserBlockingPriority,Pr=n.unstable_NormalPriority,Zd=n.unstable_LowPriority,Oa=n.unstable_IdlePriority,el=n.log,lu=n.unstable_setDisableYieldValue,wt=null,et=null;function Ln(i){if(typeof el=="function"&&lu(i),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(wt,i)}catch{}}var un=Math.clz32?Math.clz32:kr,cu=Math.log,Jd=Math.LN2;function kr(i){return i>>>=0,i===0?32:31-(cu(i)/Jd|0)|0}var Mr=256,Vr=4194304;function hi(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Pa(i,r,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,p=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=c&134217727;return S!==0?(c=S&~p,c!==0?f=hi(c):(T&=S,T!==0?f=hi(T):a||(a=S&~i,a!==0&&(f=hi(a))))):(S=c&~p,S!==0?f=hi(S):T!==0?f=hi(T):a||(a=c&~i,a!==0&&(f=hi(a)))),f===0?0:r!==0&&r!==f&&(r&p)===0&&(p=f&-f,a=r&-r,p>=a||p===32&&(a&4194048)!==0)?r:f}function Lr(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function tl(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var i=Mr;return Mr<<=1,(Mr&4194048)===0&&(Mr=256),i}function il(){var i=Vr;return Vr<<=1,(Vr&62914560)===0&&(Vr=4194304),i}function Xi(i){for(var r=[],a=0;31>a;a++)r.push(i);return r}function Wi(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function sl(i,r,a,c,f,p){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var S=i.entanglements,O=i.expirationTimes,$=i.hiddenUpdates;for(a=T&~a;0<a;){var J=31-un(a),oe=1<<J;S[J]=0,O[J]=-1;var Q=$[J];if(Q!==null)for($[J]=null,J=0;J<Q.length;J++){var W=Q[J];W!==null&&(W.lane&=-536870913)}a&=~oe}c!==0&&Si(i,c,0),p!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=p&~(T&~r))}function Si(i,r,a){i.pendingLanes|=r,i.suspendedLanes&=~r;var c=31-un(r);i.entangledLanes|=r,i.entanglements[c]=i.entanglements[c]|1073741824|a&4194090}function rl(i,r){var a=i.entangledLanes|=r;for(i=i.entanglements;a;){var c=31-un(a),f=1<<c;f&r|i[c]&r&&(i[c]|=r),a&=~f}}function Ls(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function ka(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Us(){var i=re.p;return i!==0?i:(i=window.event,i===void 0?32:IE(i.type))}function uu(i,r){var a=re.p;try{return re.p=i,r()}finally{re.p=a}}var pt=Math.random().toString(36).slice(2),qt="__reactFiber$"+pt,Ot="__reactProps$"+pt,Xn="__reactContainer$"+pt,al="__reactEvents$"+pt,ef="__reactListeners$"+pt,Bs="__reactHandles$"+pt,hu="__reactResources$"+pt,Ur="__reactMarker$"+pt;function zs(i){delete i[qt],delete i[Ot],delete i[al],delete i[ef],delete i[Bs]}function Zi(i){var r=i[qt];if(r)return r;for(var a=i.parentNode;a;){if(r=a[Xn]||a[qt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(i=pE(i);i!==null;){if(a=i[qt])return a;i=pE(i)}return r}i=a,a=i.parentNode}return null}function Ai(i){if(i=i[qt]||i[Xn]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function Ri(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function En(i){var r=i[hu];return r||(r=i[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Ct(i){i[Ur]=!0}var ol=new Set,Ma={};function di(i,r){Ji(i,r),Ji(i+"Capture",r)}function Ji(i,r){for(Ma[i]=r,i=0;i<r.length;i++)ol.add(r[i])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},Br={};function mu(i){return Qn.call(Br,i)?!0:Qn.call(fu,i)?!1:du.test(i)?Br[i]=!0:(fu[i]=!0,!1)}function qs(i,r,a){if(mu(r))if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var c=r.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+a)}}function xi(i,r,a){if(a===null)i.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+a)}}function tn(i,r,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(r,a,""+c)}}var zr,pu;function es(i){if(zr===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);zr=r&&r[1]||"",pu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zr+i+pu}var Va=!1;function La(i,r){if(!i||Va)return"";Va=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(r){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(W){var Q=W}Reflect.construct(i,[],oe)}else{try{oe.call()}catch(W){Q=W}i.call(oe.prototype)}}else{try{throw Error()}catch(W){Q=W}(oe=i())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),T=p[0],S=p[1];if(T&&S){var O=T.split(`
`),$=S.split(`
`);for(f=c=0;c<O.length&&!O[c].includes("DetermineComponentFrameRoot");)c++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(c===O.length||f===$.length)for(c=O.length-1,f=$.length-1;1<=c&&0<=f&&O[c]!==$[f];)f--;for(;1<=c&&0<=f;c--,f--)if(O[c]!==$[f]){if(c!==1||f!==1)do if(c--,f--,0>f||O[c]!==$[f]){var J=`
`+O[c].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=c&&0<=f);break}}}finally{Va=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?es(a):""}function ll(i){switch(i.tag){case 26:case 27:case 5:return es(i.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 15:return La(i.type,!1);case 11:return La(i.type.render,!1);case 1:return La(i.type,!0);case 31:return es("Activity");default:return""}}function Ua(i){try{var r="";do r+=ll(i),i=i.return;while(i);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cl(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function tf(i){var r=cl(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),c=""+i[r];if(!i.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,p.call(this,T)}}),Object.defineProperty(i,r,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function Ba(i){i._valueTracker||(i._valueTracker=tf(i))}function ul(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var a=r.getValue(),c="";return i&&(c=cl(i)?i.checked?"true":"false":i.value),i=c,i!==a?(r.setValue(i),!0):!1}function qr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var nf=/[\n"\\]/g;function Pt(i){return i.replace(nf,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Un(i,r,a,c,f,p,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Tn(r)):i.value!==""+Tn(r)&&(i.value=""+Tn(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?Fs(i,T,Tn(r)):a!=null?Fs(i,T,Tn(a)):c!=null&&i.removeAttribute("value"),f==null&&p!=null&&(i.defaultChecked=!!p),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Tn(S):i.removeAttribute("name")}function Fr(i,r,a,c,f,p,T,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(i.type=p),r!=null||a!=null){if(!(p!=="submit"&&p!=="reset"||r!=null))return;a=a!=null?""+Tn(a):"",r=r!=null?""+Tn(r):a,S||r===i.value||(i.value=r),i.defaultValue=r}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Fs(i,r,a){r==="number"&&qr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ts(i,r,a,c){if(i=i.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=r.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Tn(a),r=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function it(i,r,a){if(r!=null&&(r=""+Tn(r),r!==i.value&&(i.value=r),a==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=a!=null?""+Tn(a):""}function Hr(i,r,a,c){if(r==null){if(c!=null){if(a!=null)throw Error(s(92));if(xe(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),r=a}a=Tn(r),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c)}function Wn(i,r){if(r){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=r;return}}i.textContent=r}var Gr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(i,r,a){var c=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":c?i.setProperty(r,a):typeof a!="number"||a===0||Gr.has(r)?r==="float"?i.cssFloat=a:i[r]=(""+a).trim():i[r]=a+"px"}function hl(i,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||r!=null&&r.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var f in r)c=r[f],r.hasOwnProperty(f)&&a[f]!==c&&gu(i,f,c)}else for(var p in r)r.hasOwnProperty(p)&&gu(i,p,r[p])}function dl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function za(i){return rf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var ns=null;function Zn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var is=null,ss=null;function fl(i){var r=Ai(i);if(r&&(i=r.stateNode)){var a=i[Ot]||null;e:switch(i=r.stateNode,r.type){case"input":if(Un(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var c=a[r];if(c!==i&&c.form===i.form){var f=c[Ot]||null;if(!f)throw Error(s(90));Un(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)c=a[r],c.form===i.form&&ul(c)}break e;case"textarea":it(i,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&ts(i,!!a.multiple,r,!1)}}}var Ni=!1;function yu(i,r,a){if(Ni)return i(r,a);Ni=!0;try{var c=i(r);return c}finally{if(Ni=!1,(is!==null||ss!==null)&&(uh(),is&&(r=is,i=ss,ss=is=null,fl(r),i)))for(r=0;r<i.length;r++)fl(i[r])}}function $r(i,r){var a=i.stateNode;if(a===null)return null;var c=a[Ot]||null;if(c===null)return null;a=c[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jn=!1;if(fi)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){Jn=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{Jn=!1}var Ci=null,Hs=null,rs=null;function ml(){if(rs)return rs;var i,r=Hs,a=r.length,c,f="value"in Ci?Ci.value:Ci.textContent,p=f.length;for(i=0;i<a&&r[i]===f[i];i++);var T=a-i;for(c=1;c<=T&&r[a-c]===f[p-c];c++);return rs=f.slice(i,1<c?1-c:void 0)}function Ii(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function pl(){return!1}function Qt(i){function r(a,c,f,p,T){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Di:pl,this.isPropagationStopped=pl,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),r}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=Qt(Ze),Kr=v({},Ze,{view:0,detail:0}),vu=Qt(Kr),Fa,Ha,ji,Qr=v({},Kr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zr,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ji&&(ji&&i.type==="mousemove"?(Fa=i.screenX-ji.screenX,Ha=i.screenY-ji.screenY):Ha=Fa=0,ji=i),Fa)},movementY:function(i){return"movementY"in i?i.movementY:Ha}}),ei=Qt(Qr),_u=v({},Qr,{dataTransfer:0}),af=Qt(_u),Xr=v({},Kr,{relatedTarget:0}),Ga=Qt(Xr),gl=v({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),$a=Qt(gl),Eu=v({},Ze,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ya=Qt(Eu),of=v({},Ze,{data:0}),yl=Qt(of),Wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vl(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=bu[i])?!!r[i]:!1}function Zr(){return vl}var wu=v({},Kr,{key:function(i){if(i.key){var r=Wr[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Ii(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Tu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zr,charCode:function(i){return i.type==="keypress"?Ii(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ii(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Ka=Qt(wu),Su=v({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=Qt(Su),as=v({},Kr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zr}),Au=Qt(as),Ru=v({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Qt(Ru),Nu=v({},Qr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Qa=Qt(Nu),bn=v({},Ze,{newState:0,oldState:0}),Cu=Qt(bn),Iu=[9,13,27,32],Oi=fi&&"CompositionEvent"in window,h=null;fi&&"documentMode"in document&&(h=document.documentMode);var _=fi&&"TextEvent"in window&&!h,E=fi&&(!Oi||h&&8<h&&11>=h),A=" ",H=!1;function Z(i,r){switch(i){case"keyup":return Iu.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Ft(i,r){switch(i){case"compositionend":return fe(r);case"keypress":return r.which!==32?null:(H=!0,A);case"textInput":return i=r.data,i===A&&H?null:i;default:return null}}function He(i,r){if(Fe)return i==="compositionend"||!Oi&&Z(i,r)?(i=ml(),rs=Hs=Ci=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Xt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Xt[i.type]:r==="textarea"}function os(i,r,a,c){is?ss?ss.push(c):ss=[c]:is=c,r=gh(r,"onChange"),0<r.length&&(a=new qa("onChange","change",null,a,c),i.push({event:a,listeners:r}))}var nn=null,Pi=null;function El(i){rE(i,0)}function Du(i){var r=Ri(i);if(ul(r))return i}function Ry(i,r){if(i==="change")return r}var xy=!1;if(fi){var lf;if(fi){var cf="oninput"in document;if(!cf){var Ny=document.createElement("div");Ny.setAttribute("oninput","return;"),cf=typeof Ny.oninput=="function"}lf=cf}else lf=!1;xy=lf&&(!document.documentMode||9<document.documentMode)}function Cy(){nn&&(nn.detachEvent("onpropertychange",Iy),Pi=nn=null)}function Iy(i){if(i.propertyName==="value"&&Du(Pi)){var r=[];os(r,Pi,i,Zn(i)),yu(El,r)}}function yA(i,r,a){i==="focusin"?(Cy(),nn=r,Pi=a,nn.attachEvent("onpropertychange",Iy)):i==="focusout"&&Cy()}function vA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Du(Pi)}function _A(i,r){if(i==="click")return Du(r)}function EA(i,r){if(i==="input"||i==="change")return Du(r)}function TA(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var Bn=typeof Object.is=="function"?Object.is:TA;function Tl(i,r){if(Bn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var a=Object.keys(i),c=Object.keys(r);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Qn.call(r,f)||!Bn(i[f],r[f]))return!1}return!0}function Dy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jy(i,r){var a=Dy(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=r&&c>=r)return{node:a,offset:r-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dy(a)}}function Oy(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Oy(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Py(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=qr(i.document);r instanceof i.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)i=r.contentWindow;else break;r=qr(i.document)}return r}function uf(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var bA=fi&&"documentMode"in document&&11>=document.documentMode,Xa=null,hf=null,bl=null,df=!1;function ky(i,r,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;df||Xa==null||Xa!==qr(c)||(c=Xa,"selectionStart"in c&&uf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&Tl(bl,c)||(bl=c,c=gh(hf,"onSelect"),0<c.length&&(r=new qa("onSelect","select",null,r,a),i.push({event:r,listeners:c}),r.target=Xa)))}function Jr(i,r){var a={};return a[i.toLowerCase()]=r.toLowerCase(),a["Webkit"+i]="webkit"+r,a["Moz"+i]="moz"+r,a}var Wa={animationend:Jr("Animation","AnimationEnd"),animationiteration:Jr("Animation","AnimationIteration"),animationstart:Jr("Animation","AnimationStart"),transitionrun:Jr("Transition","TransitionRun"),transitionstart:Jr("Transition","TransitionStart"),transitioncancel:Jr("Transition","TransitionCancel"),transitionend:Jr("Transition","TransitionEnd")},ff={},My={};fi&&(My=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ea(i){if(ff[i])return ff[i];if(!Wa[i])return i;var r=Wa[i],a;for(a in r)if(r.hasOwnProperty(a)&&a in My)return ff[i]=r[a];return i}var Vy=ea("animationend"),Ly=ea("animationiteration"),Uy=ea("animationstart"),wA=ea("transitionrun"),SA=ea("transitionstart"),AA=ea("transitioncancel"),By=ea("transitionend"),zy=new Map,mf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");mf.push("scrollEnd");function mi(i,r){zy.set(i,r),di(r,[i])}var qy=new WeakMap;function ti(i,r){if(typeof i=="object"&&i!==null){var a=qy.get(i);return a!==void 0?a:(r={value:i,source:r,stack:Ua(r)},qy.set(i,r),r)}return{value:i,source:r,stack:Ua(r)}}var ni=[],Za=0,pf=0;function ju(){for(var i=Za,r=pf=Za=0;r<i;){var a=ni[r];ni[r++]=null;var c=ni[r];ni[r++]=null;var f=ni[r];ni[r++]=null;var p=ni[r];if(ni[r++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}p!==0&&Fy(a,f,p)}}function Ou(i,r,a,c){ni[Za++]=i,ni[Za++]=r,ni[Za++]=a,ni[Za++]=c,pf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function gf(i,r,a,c){return Ou(i,r,a,c),Pu(i)}function Ja(i,r){return Ou(i,null,null,r),Pu(i)}function Fy(i,r,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var f=!1,p=i.return;p!==null;)p.childLanes|=a,c=p.alternate,c!==null&&(c.childLanes|=a),p.tag===22&&(i=p.stateNode,i===null||i._visibility&1||(f=!0)),i=p,p=p.return;return i.tag===3?(p=i.stateNode,f&&r!==null&&(f=31-un(a),i=p.hiddenUpdates,c=i[f],c===null?i[f]=[r]:c.push(r),r.lane=a|536870912),p):null}function Pu(i){if(50<Yl)throw Yl=0,bm=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var eo={};function RA(i,r,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(i,r,a,c){return new RA(i,r,a,c)}function yf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function ls(i,r){var a=i.alternate;return a===null?(a=zn(i.tag,r,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=r,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,r=i.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Hy(i,r){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,r=a.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function ku(i,r,a,c,f,p){var T=0;if(c=i,typeof i=="function")yf(i)&&(T=1);else if(typeof i=="string")T=NR(i,a,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=zn(31,a,r,f),i.elementType=x,i.lanes=p,i;case L:return ta(a.children,f,p,r);case z:T=8,f|=24;break;case j:return i=zn(12,a,r,f|2),i.elementType=j,i.lanes=p,i;case ie:return i=zn(13,a,r,f),i.elementType=ie,i.lanes=p,i;case B:return i=zn(19,a,r,f),i.elementType=B,i.lanes=p,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:case X:T=10;break e;case K:T=9;break e;case se:T=11;break e;case I:T=14;break e;case R:T=16,c=null;break e}T=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return r=zn(T,a,r,f),r.elementType=i,r.type=c,r.lanes=p,r}function ta(i,r,a,c){return i=zn(7,i,c,r),i.lanes=a,i}function vf(i,r,a){return i=zn(6,i,null,r),i.lanes=a,i}function _f(i,r,a){return r=zn(4,i.children!==null?i.children:[],i.key,r),r.lanes=a,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var to=[],no=0,Mu=null,Vu=0,ii=[],si=0,na=null,cs=1,us="";function ia(i,r){to[no++]=Vu,to[no++]=Mu,Mu=i,Vu=r}function Gy(i,r,a){ii[si++]=cs,ii[si++]=us,ii[si++]=na,na=i;var c=cs;i=us;var f=32-un(c)-1;c&=~(1<<f),a+=1;var p=32-un(r)+f;if(30<p){var T=f-f%5;p=(c&(1<<T)-1).toString(32),c>>=T,f-=T,cs=1<<32-un(r)+f|a<<f|c,us=p+i}else cs=1<<p|a<<f|c,us=i}function Ef(i){i.return!==null&&(ia(i,1),Gy(i,1,0))}function Tf(i){for(;i===Mu;)Mu=to[--no],to[no]=null,Vu=to[--no],to[no]=null;for(;i===na;)na=ii[--si],ii[si]=null,us=ii[--si],ii[si]=null,cs=ii[--si],ii[si]=null}var wn=null,St=null,Qe=!1,sa=null,ki=!1,bf=Error(s(519));function ra(i){var r=Error(s(418,""));throw Al(ti(r,i)),bf}function $y(i){var r=i.stateNode,a=i.type,c=i.memoizedProps;switch(r[qt]=i,r[Ot]=c,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<Ql.length;a++)Ue(Ql[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),Fr(r,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Ba(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),Hr(r,c.value,c.defaultValue,c.children),Ba(r)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||c.suppressHydrationWarning===!0||cE(r.textContent,a)?(c.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),c.onScroll!=null&&Ue("scroll",r),c.onScrollEnd!=null&&Ue("scrollend",r),c.onClick!=null&&(r.onclick=yh),r=!0):r=!1,r||ra(i)}function Yy(i){for(wn=i.return;wn;)switch(wn.tag){case 5:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:wn=wn.return}}function wl(i){if(i!==wn)return!1;if(!Qe)return Yy(i),Qe=!0,!1;var r=i.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Lm(i.type,i.memoizedProps)),a=!a),a&&St&&ra(i),Yy(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));e:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(r===0){St=gi(i.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;i=i.nextSibling}St=null}}else r===27?(r=St,ar(i.type)?(i=qm,qm=null,St=i):St=r):St=wn?gi(i.stateNode.nextSibling):null;return!0}function Sl(){St=wn=null,Qe=!1}function Ky(){var i=sa;return i!==null&&(Nn===null?Nn=i:Nn.push.apply(Nn,i),sa=null),i}function Al(i){sa===null?sa=[i]:sa.push(i)}var wf=ae(null),aa=null,hs=null;function Gs(i,r,a){ce(wf,r._currentValue),r._currentValue=a}function ds(i){i._currentValue=wf.current,de(wf)}function Sf(i,r,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,c!==null&&(c.childLanes|=r)):c!==null&&(c.childLanes&r)!==r&&(c.childLanes|=r),i===a)break;i=i.return}}function Af(i,r,a,c){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var p=f.dependencies;if(p!==null){var T=f.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=f;for(var O=0;O<r.length;O++)if(S.context===r[O]){p.lanes|=a,S=p.alternate,S!==null&&(S.lanes|=a),Sf(p.return,a,i),c||(T=null);break e}p=S.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=a,p=T.alternate,p!==null&&(p.lanes|=a),Sf(T,a,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Rl(i,r,a,c){i=null;for(var f=r,p=!1;f!==null;){if(!p){if((f.flags&524288)!==0)p=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var S=f.type;Bn(f.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(f===We.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(tc):i=[tc])}f=f.return}i!==null&&Af(r,i,a,c),r.flags|=262144}function Lu(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function oa(i){aa=i,hs=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function hn(i){return Qy(aa,i)}function Uu(i,r){return aa===null&&oa(i),Qy(i,r)}function Qy(i,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},hs===null){if(i===null)throw Error(s(308));hs=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else hs=hs.next=r;return a}var xA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){r.aborted=!0,i.forEach(function(a){return a()})}},NA=n.unstable_scheduleCallback,CA=n.unstable_NormalPriority,Gt={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rf(){return{controller:new xA,data:new Map,refCount:0}}function xl(i){i.refCount--,i.refCount===0&&NA(CA,function(){i.controller.abort()})}var Nl=null,xf=0,io=0,so=null;function IA(i,r){if(Nl===null){var a=Nl=[];xf=0,io=Cm(),so={status:"pending",value:void 0,then:function(c){a.push(c)}}}return xf++,r.then(Xy,Xy),r}function Xy(){if(--xf===0&&Nl!==null){so!==null&&(so.status="fulfilled");var i=Nl;Nl=null,io=0,so=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function DA(i,r){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){c.status="fulfilled",c.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Wy=V.S;V.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&IA(i,r),Wy!==null&&Wy(i,r)};var la=ae(null);function Nf(){var i=la.current;return i!==null?i:ut.pooledCache}function Bu(i,r){r===null?ce(la,la.current):ce(la,r.pool)}function Zy(){var i=Nf();return i===null?null:{parent:Gt._currentValue,pool:i}}var Cl=Error(s(460)),Jy=Error(s(474)),zu=Error(s(542)),Cf={then:function(){}};function ev(i){return i=i.status,i==="fulfilled"||i==="rejected"}function qu(){}function tv(i,r,a){switch(a=i[a],a===void 0?i.push(r):a!==r&&(r.then(qu,qu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,iv(i),i;default:if(typeof r.status=="string")r.then(qu,qu);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(c){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=c}},function(c){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=c}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,iv(i),i}throw Il=r,Cl}}var Il=null;function nv(){if(Il===null)throw Error(s(459));var i=Il;return Il=null,i}function iv(i){if(i===Cl||i===zu)throw Error(s(483))}var $s=!1;function If(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Df(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ys(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ks(i,r,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var f=c.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),c.pending=r,r=Pu(i),Fy(i,null,a),r}return Ou(i,c,r,a),Pu(i)}function Dl(i,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,rl(i,a)}}function jf(i,r){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};p===null?f=p=T:p=p.next=T,a=a.next}while(a!==null);p===null?f=p=r:p=p.next=r}else f=p=r;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=r:i.next=r,a.lastBaseUpdate=r}var Of=!1;function jl(){if(Of){var i=so;if(i!==null)throw i}}function Ol(i,r,a,c){Of=!1;var f=i.updateQueue;$s=!1;var p=f.firstBaseUpdate,T=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var O=S,$=O.next;O.next=null,T===null?p=$:T.next=$,T=O;var J=i.alternate;J!==null&&(J=J.updateQueue,S=J.lastBaseUpdate,S!==T&&(S===null?J.firstBaseUpdate=$:S.next=$,J.lastBaseUpdate=O))}if(p!==null){var oe=f.baseState;T=0,J=$=O=null,S=p;do{var Q=S.lane&-536870913,W=Q!==S.lane;if(W?(Ge&Q)===Q:(c&Q)===Q){Q!==0&&Q===io&&(Of=!0),J!==null&&(J=J.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ce=i,we=S;Q=r;var at=a;switch(we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){oe=Ce.call(at,oe,Q);break e}oe=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,Q=typeof Ce=="function"?Ce.call(at,oe,Q):Ce,Q==null)break e;oe=v({},oe,Q);break e;case 2:$s=!0}}Q=S.callback,Q!==null&&(i.flags|=64,W&&(i.flags|=8192),W=f.callbacks,W===null?f.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:S.tag,payload:S.payload,callback:S.callback,next:null},J===null?($=J=W,O=oe):J=J.next=W,T|=Q;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;W=S,S=W.next,W.next=null,f.lastBaseUpdate=W,f.shared.pending=null}}while(!0);J===null&&(O=oe),f.baseState=O,f.firstBaseUpdate=$,f.lastBaseUpdate=J,p===null&&(f.shared.lanes=0),nr|=T,i.lanes=T,i.memoizedState=oe}}function sv(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function rv(i,r){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)sv(a[i],r)}var ro=ae(null),Fu=ae(0);function av(i,r){i=_s,ce(Fu,i),ce(ro,r),_s=i|r.baseLanes}function Pf(){ce(Fu,_s),ce(ro,ro.current)}function kf(){_s=Fu.current,de(ro),de(Fu)}var Qs=0,Me=null,st=null,kt=null,Hu=!1,ao=!1,ca=!1,Gu=0,Pl=0,oo=null,jA=0;function It(){throw Error(s(321))}function Mf(i,r){if(r===null)return!1;for(var a=0;a<r.length&&a<i.length;a++)if(!Bn(i[a],r[a]))return!1;return!0}function Vf(i,r,a,c,f,p){return Qs=p,Me=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,V.H=i===null||i.memoizedState===null?Fv:Hv,ca=!1,p=a(c,f),ca=!1,ao&&(p=lv(r,a,c,f)),ov(i),p}function ov(i){V.H=Wu;var r=st!==null&&st.next!==null;if(Qs=0,kt=st=Me=null,Hu=!1,Pl=0,oo=null,r)throw Error(s(300));i===null||Wt||(i=i.dependencies,i!==null&&Lu(i)&&(Wt=!0))}function lv(i,r,a,c){Me=i;var f=0;do{if(ao&&(oo=null),Pl=0,ao=!1,25<=f)throw Error(s(301));if(f+=1,kt=st=null,i.updateQueue!=null){var p=i.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}V.H=UA,p=r(a,c)}while(ao);return p}function OA(){var i=V.H,r=i.useState()[0];return r=typeof r.then=="function"?kl(r):r,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(Me.flags|=1024),r}function Lf(){var i=Gu!==0;return Gu=0,i}function Uf(i,r,a){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~a}function Bf(i){if(Hu){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Hu=!1}Qs=0,kt=st=Me=null,ao=!1,Pl=Gu=0,oo=null}function Rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Me.memoizedState=kt=i:kt=kt.next=i,kt}function Mt(){if(st===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var r=kt===null?Me.memoizedState:kt.next;if(r!==null)kt=r,st=i;else{if(i===null)throw Me.alternate===null?Error(s(467)):Error(s(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},kt===null?Me.memoizedState=kt=i:kt=kt.next=i}return kt}function zf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(i){var r=Pl;return Pl+=1,oo===null&&(oo=[]),i=tv(oo,i,r),r=Me,(kt===null?r.memoizedState:kt.next)===null&&(r=r.alternate,V.H=r===null||r.memoizedState===null?Fv:Hv),i}function $u(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return kl(i);if(i.$$typeof===X)return hn(i)}throw Error(s(438,String(i)))}function qf(i){var r=null,a=Me.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var c=Me.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(r={data:c.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=zf(),Me.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(i),c=0;c<i;c++)a[c]=P;return r.index++,a}function fs(i,r){return typeof r=="function"?r(i):r}function Yu(i){var r=Mt();return Ff(r,st,i)}function Ff(i,r,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=i.baseQueue,p=c.pending;if(p!==null){if(f!==null){var T=f.next;f.next=p.next,p.next=T}r.baseQueue=f=p,c.pending=null}if(p=i.baseState,f===null)i.memoizedState=p;else{r=f.next;var S=T=null,O=null,$=r,J=!1;do{var oe=$.lane&-536870913;if(oe!==$.lane?(Ge&oe)===oe:(Qs&oe)===oe){var Q=$.revertLane;if(Q===0)O!==null&&(O=O.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),oe===io&&(J=!0);else if((Qs&Q)===Q){$=$.next,Q===io&&(J=!0);continue}else oe={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(S=O=oe,T=p):O=O.next=oe,Me.lanes|=Q,nr|=Q;oe=$.action,ca&&a(p,oe),p=$.hasEagerState?$.eagerState:a(p,oe)}else Q={lane:oe,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},O===null?(S=O=Q,T=p):O=O.next=Q,Me.lanes|=oe,nr|=oe;$=$.next}while($!==null&&$!==r);if(O===null?T=p:O.next=S,!Bn(p,i.memoizedState)&&(Wt=!0,J&&(a=so,a!==null)))throw a;i.memoizedState=p,i.baseState=T,i.baseQueue=O,c.lastRenderedState=p}return f===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Hf(i){var r=Mt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,f=a.pending,p=r.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do p=i(p,T.action),T=T.next;while(T!==f);Bn(p,r.memoizedState)||(Wt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),a.lastRenderedState=p}return[p,c]}function cv(i,r,a){var c=Me,f=Mt(),p=Qe;if(p){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!Bn((st||f).memoizedState,a);T&&(f.memoizedState=a,Wt=!0),f=f.queue;var S=dv.bind(null,c,f,i);if(Ml(2048,8,S,[i]),f.getSnapshot!==r||T||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,lo(9,Ku(),hv.bind(null,c,f,a,r),null),ut===null)throw Error(s(349));p||(Qs&124)!==0||uv(c,r,a)}return a}function uv(i,r,a){i.flags|=16384,i={getSnapshot:r,value:a},r=Me.updateQueue,r===null?(r=zf(),Me.updateQueue=r,r.stores=[i]):(a=r.stores,a===null?r.stores=[i]:a.push(i))}function hv(i,r,a,c){r.value=a,r.getSnapshot=c,fv(r)&&mv(i)}function dv(i,r,a){return a(function(){fv(r)&&mv(i)})}function fv(i){var r=i.getSnapshot;i=i.value;try{var a=r();return!Bn(i,a)}catch{return!0}}function mv(i){var r=Ja(i,2);r!==null&&$n(r,i,2)}function Gf(i){var r=Rn();if(typeof i=="function"){var a=i;if(i=a(),ca){Ln(!0);try{a()}finally{Ln(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:i},r}function pv(i,r,a,c){return i.baseState=a,Ff(i,st,typeof c=="function"?c:fs)}function PA(i,r,a,c,f){if(Xu(i))throw Error(s(485));if(i=r.action,i!==null){var p={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};V.T!==null?a(!0):p.isTransition=!1,c(p),a=r.pending,a===null?(p.next=r.pending=p,gv(r,p)):(p.next=a.next,r.pending=a.next=p)}}function gv(i,r){var a=r.action,c=r.payload,f=i.state;if(r.isTransition){var p=V.T,T={};V.T=T;try{var S=a(f,c),O=V.S;O!==null&&O(T,S),yv(i,r,S)}catch($){$f(i,r,$)}finally{V.T=p}}else try{p=a(f,c),yv(i,r,p)}catch($){$f(i,r,$)}}function yv(i,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){vv(i,r,c)},function(c){return $f(i,r,c)}):vv(i,r,a)}function vv(i,r,a){r.status="fulfilled",r.value=a,_v(r),i.state=a,r=i.pending,r!==null&&(a=r.next,a===r?i.pending=null:(a=a.next,r.next=a,gv(i,a)))}function $f(i,r,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do r.status="rejected",r.reason=a,_v(r),r=r.next;while(r!==c)}i.action=null}function _v(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function Ev(i,r){return r}function Tv(i,r){if(Qe){var a=ut.formState;if(a!==null){e:{var c=Me;if(Qe){if(St){t:{for(var f=St,p=ki;f.nodeType!==8;){if(!p){f=null;break t}if(f=gi(f.nextSibling),f===null){f=null;break t}}p=f.data,f=p==="F!"||p==="F"?f:null}if(f){St=gi(f.nextSibling),c=f.data==="F!";break e}}ra(c)}c=!1}c&&(r=a[0])}}return a=Rn(),a.memoizedState=a.baseState=r,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ev,lastRenderedState:r},a.queue=c,a=Bv.bind(null,Me,c),c.dispatch=a,c=Gf(!1),p=Wf.bind(null,Me,!1,c.queue),c=Rn(),f={state:r,dispatch:null,action:i,pending:null},c.queue=f,a=PA.bind(null,Me,f,p,a),f.dispatch=a,c.memoizedState=i,[r,a,!1]}function bv(i){var r=Mt();return wv(r,st,i)}function wv(i,r,a){if(r=Ff(i,r,Ev)[0],i=Yu(fs)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var c=kl(r)}catch(T){throw T===Cl?zu:T}else c=r;r=Mt();var f=r.queue,p=f.dispatch;return a!==r.memoizedState&&(Me.flags|=2048,lo(9,Ku(),kA.bind(null,f,a),null)),[c,p,i]}function kA(i,r){i.action=r}function Sv(i){var r=Mt(),a=st;if(a!==null)return wv(r,a,i);Mt(),r=r.memoizedState,a=Mt();var c=a.queue.dispatch;return a.memoizedState=i,[r,c,!1]}function lo(i,r,a,c){return i={tag:i,create:a,deps:c,inst:r,next:null},r=Me.updateQueue,r===null&&(r=zf(),Me.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,r.lastEffect=i),i}function Ku(){return{destroy:void 0,resource:void 0}}function Av(){return Mt().memoizedState}function Qu(i,r,a,c){var f=Rn();c=c===void 0?null:c,Me.flags|=i,f.memoizedState=lo(1|r,Ku(),a,c)}function Ml(i,r,a,c){var f=Mt();c=c===void 0?null:c;var p=f.memoizedState.inst;st!==null&&c!==null&&Mf(c,st.memoizedState.deps)?f.memoizedState=lo(r,p,a,c):(Me.flags|=i,f.memoizedState=lo(1|r,p,a,c))}function Rv(i,r){Qu(8390656,8,i,r)}function xv(i,r){Ml(2048,8,i,r)}function Nv(i,r){return Ml(4,2,i,r)}function Cv(i,r){return Ml(4,4,i,r)}function Iv(i,r){if(typeof r=="function"){i=i();var a=r(i);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function Dv(i,r,a){a=a!=null?a.concat([i]):null,Ml(4,4,Iv.bind(null,r,i),a)}function Yf(){}function jv(i,r){var a=Mt();r=r===void 0?null:r;var c=a.memoizedState;return r!==null&&Mf(r,c[1])?c[0]:(a.memoizedState=[i,r],i)}function Ov(i,r){var a=Mt();r=r===void 0?null:r;var c=a.memoizedState;if(r!==null&&Mf(r,c[1]))return c[0];if(c=i(),ca){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,r],c}function Kf(i,r,a){return a===void 0||(Qs&1073741824)!==0?i.memoizedState=r:(i.memoizedState=a,i=M_(),Me.lanes|=i,nr|=i,a)}function Pv(i,r,a,c){return Bn(a,r)?a:ro.current!==null?(i=Kf(i,a,c),Bn(i,r)||(Wt=!0),i):(Qs&42)===0?(Wt=!0,i.memoizedState=a):(i=M_(),Me.lanes|=i,nr|=i,r)}function kv(i,r,a,c,f){var p=re.p;re.p=p!==0&&8>p?p:8;var T=V.T,S={};V.T=S,Wf(i,!1,r,a);try{var O=f(),$=V.S;if($!==null&&$(S,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var J=DA(O,c);Vl(i,r,J,Gn(i))}else Vl(i,r,c,Gn(i))}catch(oe){Vl(i,r,{then:function(){},status:"rejected",reason:oe},Gn())}finally{re.p=p,V.T=T}}function MA(){}function Qf(i,r,a,c){if(i.tag!==5)throw Error(s(476));var f=Mv(i).queue;kv(i,f,r,me,a===null?MA:function(){return Vv(i),a(c)})}function Mv(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:me},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:a},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function Vv(i){var r=Mv(i).next.queue;Vl(i,r,{},Gn())}function Xf(){return hn(tc)}function Lv(){return Mt().memoizedState}function Uv(){return Mt().memoizedState}function VA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var a=Gn();i=Ys(a);var c=Ks(r,i,a);c!==null&&($n(c,r,a),Dl(c,r,a)),r={cache:Rf()},i.payload=r;return}r=r.return}}function LA(i,r,a){var c=Gn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xu(i)?zv(r,a):(a=gf(i,r,a,c),a!==null&&($n(a,i,c),qv(a,r,c)))}function Bv(i,r,a){var c=Gn();Vl(i,r,a,c)}function Vl(i,r,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xu(i))zv(r,f);else{var p=i.alternate;if(i.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var T=r.lastRenderedState,S=p(T,a);if(f.hasEagerState=!0,f.eagerState=S,Bn(S,T))return Ou(i,r,f,0),ut===null&&ju(),!1}catch{}finally{}if(a=gf(i,r,f,c),a!==null)return $n(a,i,c),qv(a,r,c),!0}return!1}function Wf(i,r,a,c){if(c={lane:2,revertLane:Cm(),action:c,hasEagerState:!1,eagerState:null,next:null},Xu(i)){if(r)throw Error(s(479))}else r=gf(i,a,c,2),r!==null&&$n(r,i,2)}function Xu(i){var r=i.alternate;return i===Me||r!==null&&r===Me}function zv(i,r){ao=Hu=!0;var a=i.pending;a===null?r.next=r:(r.next=a.next,a.next=r),i.pending=r}function qv(i,r,a){if((a&4194048)!==0){var c=r.lanes;c&=i.pendingLanes,a|=c,r.lanes=a,rl(i,a)}}var Wu={readContext:hn,use:$u,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},Fv={readContext:hn,use:$u,useCallback:function(i,r){return Rn().memoizedState=[i,r===void 0?null:r],i},useContext:hn,useEffect:Rv,useImperativeHandle:function(i,r,a){a=a!=null?a.concat([i]):null,Qu(4194308,4,Iv.bind(null,r,i),a)},useLayoutEffect:function(i,r){return Qu(4194308,4,i,r)},useInsertionEffect:function(i,r){Qu(4,2,i,r)},useMemo:function(i,r){var a=Rn();r=r===void 0?null:r;var c=i();if(ca){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,r],c},useReducer:function(i,r,a){var c=Rn();if(a!==void 0){var f=a(r);if(ca){Ln(!0);try{a(r)}finally{Ln(!1)}}}else f=r;return c.memoizedState=c.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},c.queue=i,i=i.dispatch=LA.bind(null,Me,i),[c.memoizedState,i]},useRef:function(i){var r=Rn();return i={current:i},r.memoizedState=i},useState:function(i){i=Gf(i);var r=i.queue,a=Bv.bind(null,Me,r);return r.dispatch=a,[i.memoizedState,a]},useDebugValue:Yf,useDeferredValue:function(i,r){var a=Rn();return Kf(a,i,r)},useTransition:function(){var i=Gf(!1);return i=kv.bind(null,Me,i.queue,!0,!1),Rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,a){var c=Me,f=Rn();if(Qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ut===null)throw Error(s(349));(Ge&124)!==0||uv(c,r,a)}f.memoizedState=a;var p={value:a,getSnapshot:r};return f.queue=p,Rv(dv.bind(null,c,p,i),[i]),c.flags|=2048,lo(9,Ku(),hv.bind(null,c,p,a,r),null),a},useId:function(){var i=Rn(),r=ut.identifierPrefix;if(Qe){var a=us,c=cs;a=(c&~(1<<32-un(c)-1)).toString(32)+a,r="«"+r+"R"+a,a=Gu++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=jA++,r="«"+r+"r"+a.toString(32)+"»";return i.memoizedState=r},useHostTransitionStatus:Xf,useFormState:Tv,useActionState:Tv,useOptimistic:function(i){var r=Rn();r.memoizedState=r.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Wf.bind(null,Me,!0,a),a.dispatch=r,[i,r]},useMemoCache:qf,useCacheRefresh:function(){return Rn().memoizedState=VA.bind(null,Me)}},Hv={readContext:hn,use:$u,useCallback:jv,useContext:hn,useEffect:xv,useImperativeHandle:Dv,useInsertionEffect:Nv,useLayoutEffect:Cv,useMemo:Ov,useReducer:Yu,useRef:Av,useState:function(){return Yu(fs)},useDebugValue:Yf,useDeferredValue:function(i,r){var a=Mt();return Pv(a,st.memoizedState,i,r)},useTransition:function(){var i=Yu(fs)[0],r=Mt().memoizedState;return[typeof i=="boolean"?i:kl(i),r]},useSyncExternalStore:cv,useId:Lv,useHostTransitionStatus:Xf,useFormState:bv,useActionState:bv,useOptimistic:function(i,r){var a=Mt();return pv(a,st,i,r)},useMemoCache:qf,useCacheRefresh:Uv},UA={readContext:hn,use:$u,useCallback:jv,useContext:hn,useEffect:xv,useImperativeHandle:Dv,useInsertionEffect:Nv,useLayoutEffect:Cv,useMemo:Ov,useReducer:Hf,useRef:Av,useState:function(){return Hf(fs)},useDebugValue:Yf,useDeferredValue:function(i,r){var a=Mt();return st===null?Kf(a,i,r):Pv(a,st.memoizedState,i,r)},useTransition:function(){var i=Hf(fs)[0],r=Mt().memoizedState;return[typeof i=="boolean"?i:kl(i),r]},useSyncExternalStore:cv,useId:Lv,useHostTransitionStatus:Xf,useFormState:Sv,useActionState:Sv,useOptimistic:function(i,r){var a=Mt();return st!==null?pv(a,st,i,r):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:qf,useCacheRefresh:Uv},co=null,Ll=0;function Zu(i){var r=Ll;return Ll+=1,co===null&&(co=[]),tv(co,i,r)}function Ul(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Ju(i,r){throw r.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function Gv(i){var r=i._init;return r(i._payload)}function $v(i){function r(q,U){if(i){var G=q.deletions;G===null?(q.deletions=[U],q.flags|=16):G.push(U)}}function a(q,U){if(!i)return null;for(;U!==null;)r(q,U),U=U.sibling;return null}function c(q){for(var U=new Map;q!==null;)q.key!==null?U.set(q.key,q):U.set(q.index,q),q=q.sibling;return U}function f(q,U){return q=ls(q,U),q.index=0,q.sibling=null,q}function p(q,U,G){return q.index=G,i?(G=q.alternate,G!==null?(G=G.index,G<U?(q.flags|=67108866,U):G):(q.flags|=67108866,U)):(q.flags|=1048576,U)}function T(q){return i&&q.alternate===null&&(q.flags|=67108866),q}function S(q,U,G,ne){return U===null||U.tag!==6?(U=vf(G,q.mode,ne),U.return=q,U):(U=f(U,G),U.return=q,U)}function O(q,U,G,ne){var _e=G.type;return _e===L?J(q,U,G.props.children,ne,G.key):U!==null&&(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Gv(_e)===U.type)?(U=f(U,G.props),Ul(U,G),U.return=q,U):(U=ku(G.type,G.key,G.props,null,q.mode,ne),Ul(U,G),U.return=q,U)}function $(q,U,G,ne){return U===null||U.tag!==4||U.stateNode.containerInfo!==G.containerInfo||U.stateNode.implementation!==G.implementation?(U=_f(G,q.mode,ne),U.return=q,U):(U=f(U,G.children||[]),U.return=q,U)}function J(q,U,G,ne,_e){return U===null||U.tag!==7?(U=ta(G,q.mode,ne,_e),U.return=q,U):(U=f(U,G),U.return=q,U)}function oe(q,U,G){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=vf(""+U,q.mode,G),U.return=q,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case w:return G=ku(U.type,U.key,U.props,null,q.mode,G),Ul(G,U),G.return=q,G;case C:return U=_f(U,q.mode,G),U.return=q,U;case R:var ne=U._init;return U=ne(U._payload),oe(q,U,G)}if(xe(U)||M(U))return U=ta(U,q.mode,G,null),U.return=q,U;if(typeof U.then=="function")return oe(q,Zu(U),G);if(U.$$typeof===X)return oe(q,Uu(q,U),G);Ju(q,U)}return null}function Q(q,U,G,ne){var _e=U!==null?U.key:null;if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return _e!==null?null:S(q,U,""+G,ne);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return G.key===_e?O(q,U,G,ne):null;case C:return G.key===_e?$(q,U,G,ne):null;case R:return _e=G._init,G=_e(G._payload),Q(q,U,G,ne)}if(xe(G)||M(G))return _e!==null?null:J(q,U,G,ne,null);if(typeof G.then=="function")return Q(q,U,Zu(G),ne);if(G.$$typeof===X)return Q(q,U,Uu(q,G),ne);Ju(q,G)}return null}function W(q,U,G,ne,_e){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get(G)||null,S(U,q,""+ne,_e);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return q=q.get(ne.key===null?G:ne.key)||null,O(U,q,ne,_e);case C:return q=q.get(ne.key===null?G:ne.key)||null,$(U,q,ne,_e);case R:var Ve=ne._init;return ne=Ve(ne._payload),W(q,U,G,ne,_e)}if(xe(ne)||M(ne))return q=q.get(G)||null,J(U,q,ne,_e,null);if(typeof ne.then=="function")return W(q,U,G,Zu(ne),_e);if(ne.$$typeof===X)return W(q,U,G,Uu(U,ne),_e);Ju(U,ne)}return null}function Ce(q,U,G,ne){for(var _e=null,Ve=null,Te=U,Ae=U=0,Jt=null;Te!==null&&Ae<G.length;Ae++){Te.index>Ae?(Jt=Te,Te=null):Jt=Te.sibling;var Ye=Q(q,Te,G[Ae],ne);if(Ye===null){Te===null&&(Te=Jt);break}i&&Te&&Ye.alternate===null&&r(q,Te),U=p(Ye,U,Ae),Ve===null?_e=Ye:Ve.sibling=Ye,Ve=Ye,Te=Jt}if(Ae===G.length)return a(q,Te),Qe&&ia(q,Ae),_e;if(Te===null){for(;Ae<G.length;Ae++)Te=oe(q,G[Ae],ne),Te!==null&&(U=p(Te,U,Ae),Ve===null?_e=Te:Ve.sibling=Te,Ve=Te);return Qe&&ia(q,Ae),_e}for(Te=c(Te);Ae<G.length;Ae++)Jt=W(Te,q,Ae,G[Ae],ne),Jt!==null&&(i&&Jt.alternate!==null&&Te.delete(Jt.key===null?Ae:Jt.key),U=p(Jt,U,Ae),Ve===null?_e=Jt:Ve.sibling=Jt,Ve=Jt);return i&&Te.forEach(function(hr){return r(q,hr)}),Qe&&ia(q,Ae),_e}function we(q,U,G,ne){if(G==null)throw Error(s(151));for(var _e=null,Ve=null,Te=U,Ae=U=0,Jt=null,Ye=G.next();Te!==null&&!Ye.done;Ae++,Ye=G.next()){Te.index>Ae?(Jt=Te,Te=null):Jt=Te.sibling;var hr=Q(q,Te,Ye.value,ne);if(hr===null){Te===null&&(Te=Jt);break}i&&Te&&hr.alternate===null&&r(q,Te),U=p(hr,U,Ae),Ve===null?_e=hr:Ve.sibling=hr,Ve=hr,Te=Jt}if(Ye.done)return a(q,Te),Qe&&ia(q,Ae),_e;if(Te===null){for(;!Ye.done;Ae++,Ye=G.next())Ye=oe(q,Ye.value,ne),Ye!==null&&(U=p(Ye,U,Ae),Ve===null?_e=Ye:Ve.sibling=Ye,Ve=Ye);return Qe&&ia(q,Ae),_e}for(Te=c(Te);!Ye.done;Ae++,Ye=G.next())Ye=W(Te,q,Ae,Ye.value,ne),Ye!==null&&(i&&Ye.alternate!==null&&Te.delete(Ye.key===null?Ae:Ye.key),U=p(Ye,U,Ae),Ve===null?_e=Ye:Ve.sibling=Ye,Ve=Ye);return i&&Te.forEach(function(BR){return r(q,BR)}),Qe&&ia(q,Ae),_e}function at(q,U,G,ne){if(typeof G=="object"&&G!==null&&G.type===L&&G.key===null&&(G=G.props.children),typeof G=="object"&&G!==null){switch(G.$$typeof){case w:e:{for(var _e=G.key;U!==null;){if(U.key===_e){if(_e=G.type,_e===L){if(U.tag===7){a(q,U.sibling),ne=f(U,G.props.children),ne.return=q,q=ne;break e}}else if(U.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Gv(_e)===U.type){a(q,U.sibling),ne=f(U,G.props),Ul(ne,G),ne.return=q,q=ne;break e}a(q,U);break}else r(q,U);U=U.sibling}G.type===L?(ne=ta(G.props.children,q.mode,ne,G.key),ne.return=q,q=ne):(ne=ku(G.type,G.key,G.props,null,q.mode,ne),Ul(ne,G),ne.return=q,q=ne)}return T(q);case C:e:{for(_e=G.key;U!==null;){if(U.key===_e)if(U.tag===4&&U.stateNode.containerInfo===G.containerInfo&&U.stateNode.implementation===G.implementation){a(q,U.sibling),ne=f(U,G.children||[]),ne.return=q,q=ne;break e}else{a(q,U);break}else r(q,U);U=U.sibling}ne=_f(G,q.mode,ne),ne.return=q,q=ne}return T(q);case R:return _e=G._init,G=_e(G._payload),at(q,U,G,ne)}if(xe(G))return Ce(q,U,G,ne);if(M(G)){if(_e=M(G),typeof _e!="function")throw Error(s(150));return G=_e.call(G),we(q,U,G,ne)}if(typeof G.then=="function")return at(q,U,Zu(G),ne);if(G.$$typeof===X)return at(q,U,Uu(q,G),ne);Ju(q,G)}return typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint"?(G=""+G,U!==null&&U.tag===6?(a(q,U.sibling),ne=f(U,G),ne.return=q,q=ne):(a(q,U),ne=vf(G,q.mode,ne),ne.return=q,q=ne),T(q)):a(q,U)}return function(q,U,G,ne){try{Ll=0;var _e=at(q,U,G,ne);return co=null,_e}catch(Te){if(Te===Cl||Te===zu)throw Te;var Ve=zn(29,Te,null,q.mode);return Ve.lanes=ne,Ve.return=q,Ve}finally{}}}var uo=$v(!0),Yv=$v(!1),ri=ae(null),Mi=null;function Xs(i){var r=i.alternate;ce($t,$t.current&1),ce(ri,i),Mi===null&&(r===null||ro.current!==null||r.memoizedState!==null)&&(Mi=i)}function Kv(i){if(i.tag===22){if(ce($t,$t.current),ce(ri,i),Mi===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(Mi=i)}}else Ws()}function Ws(){ce($t,$t.current),ce(ri,ri.current)}function ms(i){de(ri),Mi===i&&(Mi=null),de($t)}var $t=ae(0);function eh(i){for(var r=i;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||zm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Zf(i,r,a,c){r=i.memoizedState,a=a(c,r),a=a==null?r:v({},r,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Jf={enqueueSetState:function(i,r,a){i=i._reactInternals;var c=Gn(),f=Ys(c);f.payload=r,a!=null&&(f.callback=a),r=Ks(i,f,c),r!==null&&($n(r,i,c),Dl(r,i,c))},enqueueReplaceState:function(i,r,a){i=i._reactInternals;var c=Gn(),f=Ys(c);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Ks(i,f,c),r!==null&&($n(r,i,c),Dl(r,i,c))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var a=Gn(),c=Ys(a);c.tag=2,r!=null&&(c.callback=r),r=Ks(i,c,a),r!==null&&($n(r,i,a),Dl(r,i,a))}};function Qv(i,r,a,c,f,p,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,p,T):r.prototype&&r.prototype.isPureReactComponent?!Tl(a,c)||!Tl(f,p):!0}function Xv(i,r,a,c){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,c),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,c),r.state!==i&&Jf.enqueueReplaceState(r,r.state,null)}function ua(i,r){var a=r;if("ref"in r){a={};for(var c in r)c!=="ref"&&(a[c]=r[c])}if(i=i.defaultProps){a===r&&(a=v({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var th=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Wv(i){th(i)}function Zv(i){console.error(i)}function Jv(i){th(i)}function nh(i,r){try{var a=i.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(c){setTimeout(function(){throw c})}}function e_(i,r,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function em(i,r,a){return a=Ys(a),a.tag=3,a.payload={element:null},a.callback=function(){nh(i,r)},a}function t_(i){return i=Ys(i),i.tag=3,i}function n_(i,r,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var p=c.value;i.payload=function(){return f(p)},i.callback=function(){e_(r,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){e_(r,a,c),typeof f!="function"&&(ir===null?ir=new Set([this]):ir.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function BA(i,r,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(r=a.alternate,r!==null&&Rl(r,a,f,!0),a=ri.current,a!==null){switch(a.tag){case 13:return Mi===null?Sm():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===Cf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([c]):r.add(c),Rm(i,c,f)),!1;case 22:return a.flags|=65536,c===Cf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([c]):a.add(c)),Rm(i,c,f)),!1}throw Error(s(435,a.tag))}return Rm(i,c,f),Sm(),!1}if(Qe)return r=ri.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,c!==bf&&(i=Error(s(422),{cause:c}),Al(ti(i,a)))):(c!==bf&&(r=Error(s(423),{cause:c}),Al(ti(r,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,c=ti(c,a),f=em(i.stateNode,c,f),jf(i,f),At!==4&&(At=2)),!1;var p=Error(s(520),{cause:c});if(p=ti(p,a),$l===null?$l=[p]:$l.push(p),At!==4&&(At=2),r===null)return!0;c=ti(c,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=em(a.stateNode,c,i),jf(a,i),!1;case 1:if(r=a.type,p=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(ir===null||!ir.has(p))))return a.flags|=65536,f&=-f,a.lanes|=f,f=t_(f),n_(f,i,a,c),jf(a,f),!1}a=a.return}while(a!==null);return!1}var i_=Error(s(461)),Wt=!1;function sn(i,r,a,c){r.child=i===null?Yv(r,null,a,c):uo(r,i.child,a,c)}function s_(i,r,a,c,f){a=a.render;var p=r.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return oa(r),c=Vf(i,r,a,T,p,f),S=Lf(),i!==null&&!Wt?(Uf(i,r,f),ps(i,r,f)):(Qe&&S&&Ef(r),r.flags|=1,sn(i,r,c,f),r.child)}function r_(i,r,a,c,f){if(i===null){var p=a.type;return typeof p=="function"&&!yf(p)&&p.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=p,a_(i,r,p,c,f)):(i=ku(a.type,null,c,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(p=i.child,!lm(i,f)){var T=p.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(T,c)&&i.ref===r.ref)return ps(i,r,f)}return r.flags|=1,i=ls(p,c),i.ref=r.ref,i.return=r,r.child=i}function a_(i,r,a,c,f){if(i!==null){var p=i.memoizedProps;if(Tl(p,c)&&i.ref===r.ref)if(Wt=!1,r.pendingProps=c=p,lm(i,f))(i.flags&131072)!==0&&(Wt=!0);else return r.lanes=i.lanes,ps(i,r,f)}return tm(i,r,a,c,f)}function o_(i,r,a){var c=r.pendingProps,f=c.children,p=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((r.flags&128)!==0){if(c=p!==null?p.baseLanes|a:a,i!==null){for(f=r.child=i.child,p=0;f!==null;)p=p|f.lanes|f.childLanes,f=f.sibling;r.childLanes=p&~c}else r.childLanes=0,r.child=null;return l_(i,r,c,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(r,p!==null?p.cachePool:null),p!==null?av(r,p):Pf(),Kv(r);else return r.lanes=r.childLanes=536870912,l_(i,r,p!==null?p.baseLanes|a:a,a)}else p!==null?(Bu(r,p.cachePool),av(r,p),Ws(),r.memoizedState=null):(i!==null&&Bu(r,null),Pf(),Ws());return sn(i,r,f,a),r.child}function l_(i,r,a,c){var f=Nf();return f=f===null?null:{parent:Gt._currentValue,pool:f},r.memoizedState={baseLanes:a,cachePool:f},i!==null&&Bu(r,null),Pf(),Kv(r),i!==null&&Rl(i,r,c,!0),null}function ih(i,r){var a=r.ref;if(a===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(r.flags|=4194816)}}function tm(i,r,a,c,f){return oa(r),a=Vf(i,r,a,c,void 0,f),c=Lf(),i!==null&&!Wt?(Uf(i,r,f),ps(i,r,f)):(Qe&&c&&Ef(r),r.flags|=1,sn(i,r,a,f),r.child)}function c_(i,r,a,c,f,p){return oa(r),r.updateQueue=null,a=lv(r,c,a,f),ov(i),c=Lf(),i!==null&&!Wt?(Uf(i,r,p),ps(i,r,p)):(Qe&&c&&Ef(r),r.flags|=1,sn(i,r,a,p),r.child)}function u_(i,r,a,c,f){if(oa(r),r.stateNode===null){var p=eo,T=a.contextType;typeof T=="object"&&T!==null&&(p=hn(T)),p=new a(c,p),r.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Jf,r.stateNode=p,p._reactInternals=r,p=r.stateNode,p.props=c,p.state=r.memoizedState,p.refs={},If(r),T=a.contextType,p.context=typeof T=="object"&&T!==null?hn(T):eo,p.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Zf(r,a,T,c),p.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Jf.enqueueReplaceState(p,p.state,null),Ol(r,c,p,f),jl(),p.state=r.memoizedState),typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!0}else if(i===null){p=r.stateNode;var S=r.memoizedProps,O=ua(a,S);p.props=O;var $=p.context,J=a.contextType;T=eo,typeof J=="object"&&J!==null&&(T=hn(J));var oe=a.getDerivedStateFromProps;J=typeof oe=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||$!==T)&&Xv(r,p,c,T),$s=!1;var Q=r.memoizedState;p.state=Q,Ol(r,c,p,f),jl(),$=r.memoizedState,S||Q!==$||$s?(typeof oe=="function"&&(Zf(r,a,oe,c),$=r.memoizedState),(O=$s||Qv(r,a,O,c,Q,$,T))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(r.flags|=4194308)):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=c,r.memoizedState=$),p.props=c,p.state=$,p.context=T,c=O):(typeof p.componentDidMount=="function"&&(r.flags|=4194308),c=!1)}else{p=r.stateNode,Df(i,r),T=r.memoizedProps,J=ua(a,T),p.props=J,oe=r.pendingProps,Q=p.context,$=a.contextType,O=eo,typeof $=="object"&&$!==null&&(O=hn($)),S=a.getDerivedStateFromProps,($=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==oe||Q!==O)&&Xv(r,p,c,O),$s=!1,Q=r.memoizedState,p.state=Q,Ol(r,c,p,f),jl();var W=r.memoizedState;T!==oe||Q!==W||$s||i!==null&&i.dependencies!==null&&Lu(i.dependencies)?(typeof S=="function"&&(Zf(r,a,S,c),W=r.memoizedState),(J=$s||Qv(r,a,J,c,Q,W,O)||i!==null&&i.dependencies!==null&&Lu(i.dependencies))?($||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,W,O),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,W,O)),typeof p.componentDidUpdate=="function"&&(r.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),r.memoizedProps=c,r.memoizedState=W),p.props=c,p.state=W,p.context=O,c=J):(typeof p.componentDidUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Q===i.memoizedState||(r.flags|=1024),c=!1)}return p=c,ih(i,r),c=(r.flags&128)!==0,p||c?(p=r.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:p.render(),r.flags|=1,i!==null&&c?(r.child=uo(r,i.child,null,f),r.child=uo(r,null,a,f)):sn(i,r,a,f),r.memoizedState=p.state,i=r.child):i=ps(i,r,f),i}function h_(i,r,a,c){return Sl(),r.flags|=256,sn(i,r,a,c),r.child}var nm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function im(i){return{baseLanes:i,cachePool:Zy()}}function sm(i,r,a){return i=i!==null?i.childLanes&~a:0,r&&(i|=ai),i}function d_(i,r,a){var c=r.pendingProps,f=!1,p=(r.flags&128)!==0,T;if((T=p)||(T=i!==null&&i.memoizedState===null?!1:($t.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(Qe){if(f?Xs(r):Ws(),Qe){var S=St,O;if(O=S){e:{for(O=S,S=ki;O.nodeType!==8;){if(!S){S=null;break e}if(O=gi(O.nextSibling),O===null){S=null;break e}}S=O}S!==null?(r.memoizedState={dehydrated:S,treeContext:na!==null?{id:cs,overflow:us}:null,retryLane:536870912,hydrationErrors:null},O=zn(18,null,null,0),O.stateNode=S,O.return=r,r.child=O,wn=r,St=null,O=!0):O=!1}O||ra(r)}if(S=r.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return zm(S)?r.lanes=32:r.lanes=536870912,null;ms(r)}return S=c.children,c=c.fallback,f?(Ws(),f=r.mode,S=sh({mode:"hidden",children:S},f),c=ta(c,f,a,null),S.return=r,c.return=r,S.sibling=c,r.child=S,f=r.child,f.memoizedState=im(a),f.childLanes=sm(i,T,a),r.memoizedState=nm,c):(Xs(r),rm(r,S))}if(O=i.memoizedState,O!==null&&(S=O.dehydrated,S!==null)){if(p)r.flags&256?(Xs(r),r.flags&=-257,r=am(i,r,a)):r.memoizedState!==null?(Ws(),r.child=i.child,r.flags|=128,r=null):(Ws(),f=c.fallback,S=r.mode,c=sh({mode:"visible",children:c.children},S),f=ta(f,S,a,null),f.flags|=2,c.return=r,f.return=r,c.sibling=f,r.child=c,uo(r,i.child,null,a),c=r.child,c.memoizedState=im(a),c.childLanes=sm(i,T,a),r.memoizedState=nm,r=f);else if(Xs(r),zm(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var $=T.dgst;T=$,c=Error(s(419)),c.stack="",c.digest=T,Al({value:c,source:null,stack:null}),r=am(i,r,a)}else if(Wt||Rl(i,r,a,!1),T=(a&i.childLanes)!==0,Wt||T){if(T=ut,T!==null&&(c=a&-a,c=(c&42)!==0?1:Ls(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==O.retryLane))throw O.retryLane=c,Ja(i,c),$n(T,i,c),i_;S.data==="$?"||Sm(),r=am(i,r,a)}else S.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=O.treeContext,St=gi(S.nextSibling),wn=r,Qe=!0,sa=null,ki=!1,i!==null&&(ii[si++]=cs,ii[si++]=us,ii[si++]=na,cs=i.id,us=i.overflow,na=r),r=rm(r,c.children),r.flags|=4096);return r}return f?(Ws(),f=c.fallback,S=r.mode,O=i.child,$=O.sibling,c=ls(O,{mode:"hidden",children:c.children}),c.subtreeFlags=O.subtreeFlags&65011712,$!==null?f=ls($,f):(f=ta(f,S,a,null),f.flags|=2),f.return=r,c.return=r,c.sibling=f,r.child=c,c=f,f=r.child,S=i.child.memoizedState,S===null?S=im(a):(O=S.cachePool,O!==null?($=Gt._currentValue,O=O.parent!==$?{parent:$,pool:$}:O):O=Zy(),S={baseLanes:S.baseLanes|a,cachePool:O}),f.memoizedState=S,f.childLanes=sm(i,T,a),r.memoizedState=nm,c):(Xs(r),a=i.child,i=a.sibling,a=ls(a,{mode:"visible",children:c.children}),a.return=r,a.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=a,r.memoizedState=null,a)}function rm(i,r){return r=sh({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function sh(i,r){return i=zn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function am(i,r,a){return uo(r,i.child,null,a),i=rm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function f_(i,r,a){i.lanes|=r;var c=i.alternate;c!==null&&(c.lanes|=r),Sf(i.return,r,a)}function om(i,r,a,c,f){var p=i.memoizedState;p===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=f)}function m_(i,r,a){var c=r.pendingProps,f=c.revealOrder,p=c.tail;if(sn(i,r,c.children,a),c=$t.current,(c&2)!==0)c=c&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&f_(i,a,r);else if(i.tag===19)f_(i,a,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break e;for(;i.sibling===null;){if(i.return===null||i.return===r)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(ce($t,c),f){case"forwards":for(a=r.child,f=null;a!==null;)i=a.alternate,i!==null&&eh(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),om(r,!1,f,a,p);break;case"backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&eh(i)===null){r.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}om(r,!0,a,null,p);break;case"together":om(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ps(i,r,a){if(i!==null&&(r.dependencies=i.dependencies),nr|=r.lanes,(a&r.childLanes)===0)if(i!==null){if(Rl(i,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,a=ls(i,i.pendingProps),r.child=a,a.return=r;i.sibling!==null;)i=i.sibling,a=a.sibling=ls(i,i.pendingProps),a.return=r;a.sibling=null}return r.child}function lm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Lu(i)))}function zA(i,r,a){switch(r.tag){case 3:ke(r,r.stateNode.containerInfo),Gs(r,Gt,i.memoizedState.cache),Sl();break;case 27:case 5:bt(r);break;case 4:ke(r,r.stateNode.containerInfo);break;case 10:Gs(r,r.type,r.memoizedProps.value);break;case 13:var c=r.memoizedState;if(c!==null)return c.dehydrated!==null?(Xs(r),r.flags|=128,null):(a&r.child.childLanes)!==0?d_(i,r,a):(Xs(r),i=ps(i,r,a),i!==null?i.sibling:null);Xs(r);break;case 19:var f=(i.flags&128)!==0;if(c=(a&r.childLanes)!==0,c||(Rl(i,r,a,!1),c=(a&r.childLanes)!==0),f){if(c)return m_(i,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce($t,$t.current),c)break;return null;case 22:case 23:return r.lanes=0,o_(i,r,a);case 24:Gs(r,Gt,i.memoizedState.cache)}return ps(i,r,a)}function p_(i,r,a){if(i!==null)if(i.memoizedProps!==r.pendingProps)Wt=!0;else{if(!lm(i,a)&&(r.flags&128)===0)return Wt=!1,zA(i,r,a);Wt=(i.flags&131072)!==0}else Wt=!1,Qe&&(r.flags&1048576)!==0&&Gy(r,Vu,r.index);switch(r.lanes=0,r.tag){case 16:e:{i=r.pendingProps;var c=r.elementType,f=c._init;if(c=f(c._payload),r.type=c,typeof c=="function")yf(c)?(i=ua(c,i),r.tag=1,r=u_(null,r,c,i,a)):(r.tag=0,r=tm(null,r,c,i,a));else{if(c!=null){if(f=c.$$typeof,f===se){r.tag=11,r=s_(null,r,c,i,a);break e}else if(f===I){r.tag=14,r=r_(null,r,c,i,a);break e}}throw r=Ee(c)||c,Error(s(306,r,""))}}return r;case 0:return tm(i,r,r.type,r.pendingProps,a);case 1:return c=r.type,f=ua(c,r.pendingProps),u_(i,r,c,f,a);case 3:e:{if(ke(r,r.stateNode.containerInfo),i===null)throw Error(s(387));c=r.pendingProps;var p=r.memoizedState;f=p.element,Df(i,r),Ol(r,c,null,a);var T=r.memoizedState;if(c=T.cache,Gs(r,Gt,c),c!==p.cache&&Af(r,[Gt],a,!0),jl(),c=T.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){r=h_(i,r,c,a);break e}else if(c!==f){f=ti(Error(s(424)),r),Al(f),r=h_(i,r,c,a);break e}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=gi(i.firstChild),wn=r,Qe=!0,sa=null,ki=!0,a=Yv(r,null,c,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Sl(),c===f){r=ps(i,r,a);break e}sn(i,r,c,a)}r=r.child}return r;case 26:return ih(i,r),i===null?(a=_E(r.type,null,r.pendingProps,null))?r.memoizedState=a:Qe||(a=r.type,i=r.pendingProps,c=vh(he.current).createElement(a),c[qt]=r,c[Ot]=i,an(c,a,i),Ct(c),r.stateNode=c):r.memoizedState=_E(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return bt(r),i===null&&Qe&&(c=r.stateNode=gE(r.type,r.pendingProps,he.current),wn=r,ki=!0,f=St,ar(r.type)?(qm=f,St=gi(c.firstChild)):St=f),sn(i,r,r.pendingProps.children,a),ih(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Qe&&((f=c=St)&&(c=pR(c,r.type,r.pendingProps,ki),c!==null?(r.stateNode=c,wn=r,St=gi(c.firstChild),ki=!1,f=!0):f=!1),f||ra(r)),bt(r),f=r.type,p=r.pendingProps,T=i!==null?i.memoizedProps:null,c=p.children,Lm(f,p)?c=null:T!==null&&Lm(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=Vf(i,r,OA,null,null,a),tc._currentValue=f),ih(i,r),sn(i,r,c,a),r.child;case 6:return i===null&&Qe&&((i=a=St)&&(a=gR(a,r.pendingProps,ki),a!==null?(r.stateNode=a,wn=r,St=null,i=!0):i=!1),i||ra(r)),null;case 13:return d_(i,r,a);case 4:return ke(r,r.stateNode.containerInfo),c=r.pendingProps,i===null?r.child=uo(r,null,c,a):sn(i,r,c,a),r.child;case 11:return s_(i,r,r.type,r.pendingProps,a);case 7:return sn(i,r,r.pendingProps,a),r.child;case 8:return sn(i,r,r.pendingProps.children,a),r.child;case 12:return sn(i,r,r.pendingProps.children,a),r.child;case 10:return c=r.pendingProps,Gs(r,r.type,c.value),sn(i,r,c.children,a),r.child;case 9:return f=r.type._context,c=r.pendingProps.children,oa(r),f=hn(f),c=c(f),r.flags|=1,sn(i,r,c,a),r.child;case 14:return r_(i,r,r.type,r.pendingProps,a);case 15:return a_(i,r,r.type,r.pendingProps,a);case 19:return m_(i,r,a);case 31:return c=r.pendingProps,a=r.mode,c={mode:c.mode,children:c.children},i===null?(a=sh(c,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ls(i.child,c),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return o_(i,r,a);case 24:return oa(r),c=hn(Gt),i===null?(f=Nf(),f===null&&(f=ut,p=Rf(),f.pooledCache=p,p.refCount++,p!==null&&(f.pooledCacheLanes|=a),f=p),r.memoizedState={parent:c,cache:f},If(r),Gs(r,Gt,f)):((i.lanes&a)!==0&&(Df(i,r),Ol(r,null,null,a),jl()),f=i.memoizedState,p=r.memoizedState,f.parent!==c?(f={parent:c,cache:c},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Gs(r,Gt,c)):(c=p.cache,Gs(r,Gt,c),c!==f.cache&&Af(r,[Gt],a,!0))),sn(i,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function gs(i){i.flags|=4}function g_(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!SE(r)){if(r=ri.current,r!==null&&((Ge&4194048)===Ge?Mi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||r!==Mi))throw Il=Cf,Jy;i.flags|=8192}}function rh(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?il():536870912,i.lanes|=r,po|=r)}function Bl(i,r){if(!Qe)switch(i.tailMode){case"hidden":r=i.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Et(i){var r=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(r)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=a,r}function qA(i,r,a){var c=r.pendingProps;switch(Tf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(r),null;case 1:return Et(r),null;case 3:return a=r.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),r.memoizedState.cache!==c&&(r.flags|=2048),ds(Gt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(wl(r)?gs(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ky())),Et(r),null;case 26:return a=r.memoizedState,i===null?(gs(r),a!==null?(Et(r),g_(r,a)):(Et(r),r.flags&=-16777217)):a?a!==i.memoizedState?(gs(r),Et(r),g_(r,a)):(Et(r),r.flags&=-16777217):(i.memoizedProps!==c&&gs(r),Et(r),r.flags&=-16777217),null;case 27:Vn(r),a=he.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==c&&gs(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Et(r),null}i=ue.current,wl(r)?$y(r):(i=gE(f,c,a),r.stateNode=i,gs(r))}return Et(r),null;case 5:if(Vn(r),a=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==c&&gs(r);else{if(!c){if(r.stateNode===null)throw Error(s(166));return Et(r),null}if(i=ue.current,wl(r))$y(r);else{switch(f=vh(he.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}i[qt]=r,i[Ot]=c;e:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break e;for(;f.sibling===null;){if(f.return===null||f.return===r)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;e:switch(an(i,a,c),a){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&gs(r)}}return Et(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==c&&gs(r);else{if(typeof c!="string"&&r.stateNode===null)throw Error(s(166));if(i=he.current,wl(r)){if(i=r.stateNode,a=r.memoizedProps,c=null,f=wn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}i[qt]=r,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||cE(i.nodeValue,a)),i||ra(r)}else i=vh(i).createTextNode(c),i[qt]=r,r.stateNode=i}return Et(r),null;case 13:if(c=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=wl(r),c!==null&&c.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[qt]=r}else Sl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Et(r),f=!1}else f=Ky(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(ms(r),r):(ms(r),null)}if(ms(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=c!==null,i=i!==null&&i.memoizedState!==null,a){c=r.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var p=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==f&&(c.flags|=2048)}return a!==i&&a&&(r.child.flags|=8192),rh(r,r.updateQueue),Et(r),null;case 4:return ot(),i===null&&Om(r.stateNode.containerInfo),Et(r),null;case 10:return ds(r.type),Et(r),null;case 19:if(de($t),f=r.memoizedState,f===null)return Et(r),null;if(c=(r.flags&128)!==0,p=f.rendering,p===null)if(c)Bl(f,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(p=eh(i),p!==null){for(r.flags|=128,Bl(f,!1),i=p.updateQueue,r.updateQueue=i,rh(r,i),r.subtreeFlags=0,i=a,a=r.child;a!==null;)Hy(a,i),a=a.sibling;return ce($t,$t.current&1|2),r.child}i=i.sibling}f.tail!==null&&An()>lh&&(r.flags|=128,c=!0,Bl(f,!1),r.lanes=4194304)}else{if(!c)if(i=eh(p),i!==null){if(r.flags|=128,c=!0,i=i.updateQueue,r.updateQueue=i,rh(r,i),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!p.alternate&&!Qe)return Et(r),null}else 2*An()-f.renderingStartTime>lh&&a!==536870912&&(r.flags|=128,c=!0,Bl(f,!1),r.lanes=4194304);f.isBackwards?(p.sibling=r.child,r.child=p):(i=f.last,i!==null?i.sibling=p:r.child=p,f.last=p)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=An(),r.sibling=null,i=$t.current,ce($t,c?i&1|2:i&1),r):(Et(r),null);case 22:case 23:return ms(r),kf(),c=r.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(r.flags|=8192):c&&(r.flags|=8192),c?(a&536870912)!==0&&(r.flags&128)===0&&(Et(r),r.subtreeFlags&6&&(r.flags|=8192)):Et(r),a=r.updateQueue,a!==null&&rh(r,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(c=r.memoizedState.cachePool.pool),c!==a&&(r.flags|=2048),i!==null&&de(la),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ds(Gt),Et(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function FA(i,r){switch(Tf(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return ds(Gt),ot(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Vn(r),null;case 13:if(ms(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Sl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return de($t),null;case 4:return ot(),null;case 10:return ds(r.type),null;case 22:case 23:return ms(r),kf(),i!==null&&de(la),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return ds(Gt),null;case 25:return null;default:return null}}function y_(i,r){switch(Tf(r),r.tag){case 3:ds(Gt),ot();break;case 26:case 27:case 5:Vn(r);break;case 4:ot();break;case 13:ms(r);break;case 19:de($t);break;case 10:ds(r.type);break;case 22:case 23:ms(r),kf(),i!==null&&de(la);break;case 24:ds(Gt)}}function zl(i,r){try{var a=r.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&i)===i){c=void 0;var p=a.create,T=a.inst;c=p(),T.destroy=c}a=a.next}while(a!==f)}}catch(S){lt(r,r.return,S)}}function Zs(i,r,a){try{var c=r.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var p=f.next;c=p;do{if((c.tag&i)===i){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,f=r;var O=a,$=S;try{$()}catch(J){lt(f,O,J)}}}c=c.next}while(c!==p)}}catch(J){lt(r,r.return,J)}}function v_(i){var r=i.updateQueue;if(r!==null){var a=i.stateNode;try{rv(r,a)}catch(c){lt(i,i.return,c)}}}function __(i,r,a){a.props=ua(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){lt(i,r,c)}}function ql(i,r){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(f){lt(i,r,f)}}function Vi(i,r){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){lt(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){lt(i,r,f)}else a.current=null}function E_(i){var r=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){lt(i,i.return,f)}}function cm(i,r,a){try{var c=i.stateNode;uR(c,i.type,a,r),c[Ot]=r}catch(f){lt(i,i.return,f)}}function T_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ar(i.type)||i.tag===4}function um(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||T_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ar(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function hm(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(i),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=yh));else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode,r=null),i=i.child,i!==null))for(hm(i,r,a),i=i.sibling;i!==null;)hm(i,r,a),i=i.sibling}function ah(i,r,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,r?a.insertBefore(i,r):a.appendChild(i);else if(c!==4&&(c===27&&ar(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ah(i,r,a),i=i.sibling;i!==null;)ah(i,r,a),i=i.sibling}function b_(i){var r=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);an(r,c,a),r[qt]=i,r[Ot]=a}catch(p){lt(i,i.return,p)}}var ys=!1,Dt=!1,dm=!1,w_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function HA(i,r){if(i=i.containerInfo,Mm=Sh,i=Py(i),uf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var T=0,S=-1,O=-1,$=0,J=0,oe=i,Q=null;t:for(;;){for(var W;oe!==a||f!==0&&oe.nodeType!==3||(S=T+f),oe!==p||c!==0&&oe.nodeType!==3||(O=T+c),oe.nodeType===3&&(T+=oe.nodeValue.length),(W=oe.firstChild)!==null;)Q=oe,oe=W;for(;;){if(oe===i)break t;if(Q===a&&++$===f&&(S=T),Q===p&&++J===c&&(O=T),(W=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=W}a=S===-1||O===-1?null:{start:S,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(Vm={focusedElem:i,selectionRange:a},Sh=!1,Zt=r;Zt!==null;)if(r=Zt,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Zt=i;else for(;Zt!==null;){switch(r=Zt,p=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&p!==null){i=void 0,a=r,f=p.memoizedProps,p=p.memoizedState,c=a.stateNode;try{var Ce=ua(a.type,f,a.elementType===a.type);i=c.getSnapshotBeforeUpdate(Ce,p),c.__reactInternalSnapshotBeforeUpdate=i}catch(we){lt(a,a.return,we)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,a=i.nodeType,a===9)Bm(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Bm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Zt=i;break}Zt=r.return}}function S_(i,r,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:Js(i,a),c&4&&zl(5,a);break;case 1:if(Js(i,a),c&4)if(i=a.stateNode,r===null)try{i.componentDidMount()}catch(T){lt(a,a.return,T)}else{var f=ua(a.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){lt(a,a.return,T)}}c&64&&v_(a),c&512&&ql(a,a.return);break;case 3:if(Js(i,a),c&64&&(i=a.updateQueue,i!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{rv(i,r)}catch(T){lt(a,a.return,T)}}break;case 27:r===null&&c&4&&b_(a);case 26:case 5:Js(i,a),r===null&&c&4&&E_(a),c&512&&ql(a,a.return);break;case 12:Js(i,a);break;case 13:Js(i,a),c&4&&x_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=JA.bind(null,a),yR(i,a))));break;case 22:if(c=a.memoizedState!==null||ys,!c){r=r!==null&&r.memoizedState!==null||Dt,f=ys;var p=Dt;ys=c,(Dt=r)&&!p?er(i,a,(a.subtreeFlags&8772)!==0):Js(i,a),ys=f,Dt=p}break;case 30:break;default:Js(i,a)}}function A_(i){var r=i.alternate;r!==null&&(i.alternate=null,A_(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&zs(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var gt=null,xn=!1;function vs(i,r,a){for(a=a.child;a!==null;)R_(i,r,a),a=a.sibling}function R_(i,r,a){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:Dt||Vi(a,r),vs(i,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Vi(a,r);var c=gt,f=xn;ar(a.type)&&(gt=a.stateNode,xn=!1),vs(i,r,a),Wl(a.stateNode),gt=c,xn=f;break;case 5:Dt||Vi(a,r);case 6:if(c=gt,f=xn,gt=null,vs(i,r,a),gt=c,xn=f,gt!==null)if(xn)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(a.stateNode)}catch(p){lt(a,r,p)}else try{gt.removeChild(a.stateNode)}catch(p){lt(a,r,p)}break;case 18:gt!==null&&(xn?(i=gt,mE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),rc(i)):mE(gt,a.stateNode));break;case 4:c=gt,f=xn,gt=a.stateNode.containerInfo,xn=!0,vs(i,r,a),gt=c,xn=f;break;case 0:case 11:case 14:case 15:Dt||Zs(2,a,r),Dt||Zs(4,a,r),vs(i,r,a);break;case 1:Dt||(Vi(a,r),c=a.stateNode,typeof c.componentWillUnmount=="function"&&__(a,r,c)),vs(i,r,a);break;case 21:vs(i,r,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,vs(i,r,a),Dt=c;break;default:vs(i,r,a)}}function x_(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{rc(i)}catch(a){lt(r,r.return,a)}}function GA(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new w_),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new w_),r;default:throw Error(s(435,i.tag))}}function fm(i,r){var a=GA(i);r.forEach(function(c){var f=eR.bind(null,i,c);a.has(c)||(a.add(c),c.then(f,f))})}function qn(i,r){var a=r.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],p=i,T=r,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(ar(S.type)){gt=S.stateNode,xn=!1;break e}break;case 5:gt=S.stateNode,xn=!1;break e;case 3:case 4:gt=S.stateNode.containerInfo,xn=!0;break e}S=S.return}if(gt===null)throw Error(s(160));R_(p,T,f),gt=null,xn=!1,p=f.alternate,p!==null&&(p.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)N_(r,i),r=r.sibling}var pi=null;function N_(i,r){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(r,i),Fn(i),c&4&&(Zs(3,i,i.return),zl(3,i),Zs(5,i,i.return));break;case 1:qn(r,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),c&64&&ys&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=pi;if(qn(r,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),c&4){var p=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":p=f.getElementsByTagName("title")[0],(!p||p[Ur]||p[qt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=f.createElement(c),f.head.insertBefore(p,f.querySelector("head > title"))),an(p,c,a),p[qt]=i,Ct(p),c=p;break e;case"link":var T=bE("link","href",f).get(c+(a.href||""));if(T){for(var S=0;S<T.length;S++)if(p=T[S],p.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&p.getAttribute("rel")===(a.rel==null?null:a.rel)&&p.getAttribute("title")===(a.title==null?null:a.title)&&p.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(S,1);break t}}p=f.createElement(c),an(p,c,a),f.head.appendChild(p);break;case"meta":if(T=bE("meta","content",f).get(c+(a.content||""))){for(S=0;S<T.length;S++)if(p=T[S],p.getAttribute("content")===(a.content==null?null:""+a.content)&&p.getAttribute("name")===(a.name==null?null:a.name)&&p.getAttribute("property")===(a.property==null?null:a.property)&&p.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&p.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(S,1);break t}}p=f.createElement(c),an(p,c,a),f.head.appendChild(p);break;default:throw Error(s(468,c))}p[qt]=i,Ct(p),c=p}i.stateNode=c}else wE(f,i.type,i.stateNode);else i.stateNode=TE(f,c,i.memoizedProps);else p!==c?(p===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):p.count--,c===null?wE(f,i.type,i.stateNode):TE(f,c,i.memoizedProps)):c===null&&i.stateNode!==null&&cm(i,i.memoizedProps,a.memoizedProps)}break;case 27:qn(r,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),a!==null&&c&4&&cm(i,i.memoizedProps,a.memoizedProps);break;case 5:if(qn(r,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),i.flags&32){f=i.stateNode;try{Wn(f,"")}catch(W){lt(i,i.return,W)}}c&4&&i.stateNode!=null&&(f=i.memoizedProps,cm(i,f,a!==null?a.memoizedProps:f)),c&1024&&(dm=!0);break;case 6:if(qn(r,i),Fn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(W){lt(i,i.return,W)}}break;case 3:if(Th=null,f=pi,pi=_h(r.containerInfo),qn(r,i),pi=f,Fn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{rc(r.containerInfo)}catch(W){lt(i,i.return,W)}dm&&(dm=!1,C_(i));break;case 4:c=pi,pi=_h(i.stateNode.containerInfo),qn(r,i),Fn(i),pi=c;break;case 12:qn(r,i),Fn(i);break;case 13:qn(r,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(_m=An()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fm(i,c)));break;case 22:f=i.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,$=ys,J=Dt;if(ys=$||f,Dt=J||O,qn(r,i),Dt=J,ys=$,Fn(i),c&8192)e:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||O||ys||Dt||ha(i)),a=null,r=i;;){if(r.tag===5||r.tag===26){if(a===null){O=a=r;try{if(p=O.stateNode,f)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=O.stateNode;var oe=O.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;S.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(W){lt(O,O.return,W)}}}else if(r.tag===6){if(a===null){O=r;try{O.stateNode.nodeValue=f?"":O.memoizedProps}catch(W){lt(O,O.return,W)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,fm(i,a))));break;case 19:qn(r,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,fm(i,c)));break;case 30:break;case 21:break;default:qn(r,i),Fn(i)}}function Fn(i){var r=i.flags;if(r&2){try{for(var a,c=i.return;c!==null;){if(T_(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,p=um(i);ah(i,p,f);break;case 5:var T=a.stateNode;a.flags&32&&(Wn(T,""),a.flags&=-33);var S=um(i);ah(i,S,T);break;case 3:case 4:var O=a.stateNode.containerInfo,$=um(i);hm(i,$,O);break;default:throw Error(s(161))}}catch(J){lt(i,i.return,J)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function C_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;C_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function Js(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)S_(i,r.alternate,r),r=r.sibling}function ha(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:Zs(4,r,r.return),ha(r);break;case 1:Vi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&__(r,r.return,a),ha(r);break;case 27:Wl(r.stateNode);case 26:case 5:Vi(r,r.return),ha(r);break;case 22:r.memoizedState===null&&ha(r);break;case 30:ha(r);break;default:ha(r)}i=i.sibling}}function er(i,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var c=r.alternate,f=i,p=r,T=p.flags;switch(p.tag){case 0:case 11:case 15:er(f,p,a),zl(4,p);break;case 1:if(er(f,p,a),c=p,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){lt(c,c.return,$)}if(c=p,f=c.updateQueue,f!==null){var S=c.stateNode;try{var O=f.shared.hiddenCallbacks;if(O!==null)for(f.shared.hiddenCallbacks=null,f=0;f<O.length;f++)sv(O[f],S)}catch($){lt(c,c.return,$)}}a&&T&64&&v_(p),ql(p,p.return);break;case 27:b_(p);case 26:case 5:er(f,p,a),a&&c===null&&T&4&&E_(p),ql(p,p.return);break;case 12:er(f,p,a);break;case 13:er(f,p,a),a&&T&4&&x_(f,p);break;case 22:p.memoizedState===null&&er(f,p,a),ql(p,p.return);break;case 30:break;default:er(f,p,a)}r=r.sibling}}function mm(i,r){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&xl(a))}function pm(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&xl(i))}function Li(i,r,a,c){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)I_(i,r,a,c),r=r.sibling}function I_(i,r,a,c){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Li(i,r,a,c),f&2048&&zl(9,r);break;case 1:Li(i,r,a,c);break;case 3:Li(i,r,a,c),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&xl(i)));break;case 12:if(f&2048){Li(i,r,a,c),i=r.stateNode;try{var p=r.memoizedProps,T=p.id,S=p.onPostCommit;typeof S=="function"&&S(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(O){lt(r,r.return,O)}}else Li(i,r,a,c);break;case 13:Li(i,r,a,c);break;case 23:break;case 22:p=r.stateNode,T=r.alternate,r.memoizedState!==null?p._visibility&2?Li(i,r,a,c):Fl(i,r):p._visibility&2?Li(i,r,a,c):(p._visibility|=2,ho(i,r,a,c,(r.subtreeFlags&10256)!==0)),f&2048&&mm(T,r);break;case 24:Li(i,r,a,c),f&2048&&pm(r.alternate,r);break;default:Li(i,r,a,c)}}function ho(i,r,a,c,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var p=i,T=r,S=a,O=c,$=T.flags;switch(T.tag){case 0:case 11:case 15:ho(p,T,S,O,f),zl(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?ho(p,T,S,O,f):Fl(p,T):(J._visibility|=2,ho(p,T,S,O,f)),f&&$&2048&&mm(T.alternate,T);break;case 24:ho(p,T,S,O,f),f&&$&2048&&pm(T.alternate,T);break;default:ho(p,T,S,O,f)}r=r.sibling}}function Fl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=i,c=r,f=c.flags;switch(c.tag){case 22:Fl(a,c),f&2048&&mm(c.alternate,c);break;case 24:Fl(a,c),f&2048&&pm(c.alternate,c);break;default:Fl(a,c)}r=r.sibling}}var Hl=8192;function fo(i){if(i.subtreeFlags&Hl)for(i=i.child;i!==null;)D_(i),i=i.sibling}function D_(i){switch(i.tag){case 26:fo(i),i.flags&Hl&&i.memoizedState!==null&&IR(pi,i.memoizedState,i.memoizedProps);break;case 5:fo(i);break;case 3:case 4:var r=pi;pi=_h(i.stateNode.containerInfo),fo(i),pi=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Hl,Hl=16777216,fo(i),Hl=r):fo(i));break;default:fo(i)}}function j_(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Gl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Zt=c,P_(c,i)}j_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)O_(i),i=i.sibling}function O_(i){switch(i.tag){case 0:case 11:case 15:Gl(i),i.flags&2048&&Zs(9,i,i.return);break;case 3:Gl(i);break;case 12:Gl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,oh(i)):Gl(i);break;default:Gl(i)}}function oh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var c=r[a];Zt=c,P_(c,i)}j_(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:Zs(8,r,r.return),oh(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,oh(r));break;default:oh(r)}i=i.sibling}}function P_(i,r){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:Zs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Zt=c;else e:for(a=i;Zt!==null;){c=Zt;var f=c.sibling,p=c.return;if(A_(c),c===a){Zt=null;break e}if(f!==null){f.return=p,Zt=f;break e}Zt=p}}}var $A={getCacheForType:function(i){var r=hn(Gt),a=r.data.get(i);return a===void 0&&(a=i(),r.data.set(i,a)),a}},YA=typeof WeakMap=="function"?WeakMap:Map,tt=0,ut=null,Le=null,Ge=0,nt=0,Hn=null,tr=!1,mo=!1,gm=!1,_s=0,At=0,nr=0,da=0,ym=0,ai=0,po=0,$l=null,Nn=null,vm=!1,_m=0,lh=1/0,ch=null,ir=null,rn=0,sr=null,go=null,yo=0,Em=0,Tm=null,k_=null,Yl=0,bm=null;function Gn(){if((tt&2)!==0&&Ge!==0)return Ge&-Ge;if(V.T!==null){var i=io;return i!==0?i:Cm()}return Us()}function M_(){ai===0&&(ai=(Ge&536870912)===0||Qe?nl():536870912);var i=ri.current;return i!==null&&(i.flags|=32),ai}function $n(i,r,a){(i===ut&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(vo(i,0),rr(i,Ge,ai,!1)),Wi(i,a),((tt&2)===0||i!==ut)&&(i===ut&&((tt&2)===0&&(da|=a),At===4&&rr(i,Ge,ai,!1)),Ui(i))}function V_(i,r,a){if((tt&6)!==0)throw Error(s(327));var c=!a&&(r&124)===0&&(r&i.expiredLanes)===0||Lr(i,r),f=c?XA(i,r):Am(i,r,!0),p=c;do{if(f===0){mo&&!c&&rr(i,r,0,!1);break}else{if(a=i.current.alternate,p&&!KA(a)){f=Am(i,r,!1),p=!1;continue}if(f===2){if(p=r,i.errorRecoveryDisabledLanes&p)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var S=i;f=$l;var O=S.current.memoizedState.isDehydrated;if(O&&(vo(S,T).flags|=256),T=Am(S,T,!1),T!==2){if(gm&&!O){S.errorRecoveryDisabledLanes|=p,da|=p,f=4;break e}p=Nn,Nn=f,p!==null&&(Nn===null?Nn=p:Nn.push.apply(Nn,p))}f=T}if(p=!1,f!==2)continue}}if(f===1){vo(i,0),rr(i,r,0,!0);break}e:{switch(c=i,p=f,p){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:rr(c,r,ai,!tr);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=_m+300-An(),10<f)){if(rr(c,r,ai,!tr),Pa(c,0,!0)!==0)break e;c.timeoutHandle=dE(L_.bind(null,c,a,Nn,ch,vm,r,ai,da,po,tr,p,2,-0,0),f);break e}L_(c,a,Nn,ch,vm,r,ai,da,po,tr,p,0,-0,0)}}break}while(!0);Ui(i)}function L_(i,r,a,c,f,p,T,S,O,$,J,oe,Q,W){if(i.timeoutHandle=-1,oe=r.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(ec={stylesheets:null,count:0,unsuspend:CR},D_(r),oe=DR(),oe!==null)){i.cancelPendingCommit=oe(G_.bind(null,i,r,p,a,c,f,T,S,O,J,1,Q,W)),rr(i,p,T,!$);return}G_(i,r,p,a,c,f,T,S,O)}function KA(i){for(var r=i;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!Bn(p(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function rr(i,r,a,c){r&=~ym,r&=~da,i.suspendedLanes|=r,i.pingedLanes&=~r,c&&(i.warmLanes|=r),c=i.expirationTimes;for(var f=r;0<f;){var p=31-un(f),T=1<<p;c[p]=-1,f&=~T}a!==0&&Si(i,a,r)}function uh(){return(tt&6)===0?(Kl(0),!1):!0}function wm(){if(Le!==null){if(nt===0)var i=Le.return;else i=Le,hs=aa=null,Bf(i),co=null,Ll=0,i=Le;for(;i!==null;)y_(i.alternate,i),i=i.return;Le=null}}function vo(i,r){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,dR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),wm(),ut=i,Le=a=ls(i.current,null),Ge=r,nt=0,Hn=null,tr=!1,mo=Lr(i,r),gm=!1,po=ai=ym=da=nr=At=0,Nn=$l=null,vm=!1,(r&8)!==0&&(r|=r&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=r;0<c;){var f=31-un(c),p=1<<f;r|=i[f],c&=~p}return _s=r,ju(),a}function U_(i,r){Me=null,V.H=Wu,r===Cl||r===zu?(r=nv(),nt=3):r===Jy?(r=nv(),nt=4):nt=r===i_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Hn=r,Le===null&&(At=1,nh(i,ti(r,i.current)))}function B_(){var i=V.H;return V.H=Wu,i===null?Wu:i}function z_(){var i=V.A;return V.A=$A,i}function Sm(){At=4,tr||(Ge&4194048)!==Ge&&ri.current!==null||(mo=!0),(nr&134217727)===0&&(da&134217727)===0||ut===null||rr(ut,Ge,ai,!1)}function Am(i,r,a){var c=tt;tt|=2;var f=B_(),p=z_();(ut!==i||Ge!==r)&&(ch=null,vo(i,r)),r=!1;var T=At;e:do try{if(nt!==0&&Le!==null){var S=Le,O=Hn;switch(nt){case 8:wm(),T=6;break e;case 3:case 2:case 9:case 6:ri.current===null&&(r=!0);var $=nt;if(nt=0,Hn=null,_o(i,S,O,$),a&&mo){T=0;break e}break;default:$=nt,nt=0,Hn=null,_o(i,S,O,$)}}QA(),T=At;break}catch(J){U_(i,J)}while(!0);return r&&i.shellSuspendCounter++,hs=aa=null,tt=c,V.H=f,V.A=p,Le===null&&(ut=null,Ge=0,ju()),T}function QA(){for(;Le!==null;)q_(Le)}function XA(i,r){var a=tt;tt|=2;var c=B_(),f=z_();ut!==i||Ge!==r?(ch=null,lh=An()+500,vo(i,r)):mo=Lr(i,r);e:do try{if(nt!==0&&Le!==null){r=Le;var p=Hn;t:switch(nt){case 1:nt=0,Hn=null,_o(i,r,p,1);break;case 2:case 9:if(ev(p)){nt=0,Hn=null,F_(r);break}r=function(){nt!==2&&nt!==9||ut!==i||(nt=7),Ui(i)},p.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:ev(p)?(nt=0,Hn=null,F_(r)):(nt=0,Hn=null,_o(i,r,p,7));break;case 5:var T=null;switch(Le.tag){case 26:T=Le.memoizedState;case 5:case 27:var S=Le;if(!T||SE(T)){nt=0,Hn=null;var O=S.sibling;if(O!==null)Le=O;else{var $=S.return;$!==null?(Le=$,hh($)):Le=null}break t}}nt=0,Hn=null,_o(i,r,p,5);break;case 6:nt=0,Hn=null,_o(i,r,p,6);break;case 8:wm(),At=6;break e;default:throw Error(s(462))}}WA();break}catch(J){U_(i,J)}while(!0);return hs=aa=null,V.H=c,V.A=f,tt=a,Le!==null?0:(ut=null,Ge=0,ju(),At)}function WA(){for(;Le!==null&&!Ms();)q_(Le)}function q_(i){var r=p_(i.alternate,i,_s);i.memoizedProps=i.pendingProps,r===null?hh(i):Le=r}function F_(i){var r=i,a=r.alternate;switch(r.tag){case 15:case 0:r=c_(a,r,r.pendingProps,r.type,void 0,Ge);break;case 11:r=c_(a,r,r.pendingProps,r.type.render,r.ref,Ge);break;case 5:Bf(r);default:y_(a,r),r=Le=Hy(r,_s),r=p_(a,r,_s)}i.memoizedProps=i.pendingProps,r===null?hh(i):Le=r}function _o(i,r,a,c){hs=aa=null,Bf(r),co=null,Ll=0;var f=r.return;try{if(BA(i,f,r,a,Ge)){At=1,nh(i,ti(a,i.current)),Le=null;return}}catch(p){if(f!==null)throw Le=f,p;At=1,nh(i,ti(a,i.current)),Le=null;return}r.flags&32768?(Qe||c===1?i=!0:mo||(Ge&536870912)!==0?i=!1:(tr=i=!0,(c===2||c===9||c===3||c===6)&&(c=ri.current,c!==null&&c.tag===13&&(c.flags|=16384))),H_(r,i)):hh(r)}function hh(i){var r=i;do{if((r.flags&32768)!==0){H_(r,tr);return}i=r.return;var a=qA(r.alternate,r,_s);if(a!==null){Le=a;return}if(r=r.sibling,r!==null){Le=r;return}Le=r=i}while(r!==null);At===0&&(At=5)}function H_(i,r){do{var a=FA(i.alternate,i);if(a!==null){a.flags&=32767,Le=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(i=i.sibling,i!==null)){Le=i;return}Le=i=a}while(i!==null);At=6,Le=null}function G_(i,r,a,c,f,p,T,S,O){i.cancelPendingCommit=null;do dh();while(rn!==0);if((tt&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(p=r.lanes|r.childLanes,p|=pf,sl(i,a,p,T,S,O),i===ut&&(Le=ut=null,Ge=0),go=r,sr=i,yo=a,Em=p,Tm=f,k_=c,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,tR(Pr,function(){return X_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||c){c=V.T,V.T=null,f=re.p,re.p=2,T=tt,tt|=4;try{HA(i,r,a)}finally{tt=T,re.p=f,V.T=c}}rn=1,$_(),Y_(),K_()}}function $_(){if(rn===1){rn=0;var i=sr,r=go,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=V.T,V.T=null;var c=re.p;re.p=2;var f=tt;tt|=4;try{N_(r,i);var p=Vm,T=Py(i.containerInfo),S=p.focusedElem,O=p.selectionRange;if(T!==S&&S&&S.ownerDocument&&Oy(S.ownerDocument.documentElement,S)){if(O!==null&&uf(S)){var $=O.start,J=O.end;if(J===void 0&&(J=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(J,S.value.length);else{var oe=S.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),Ce=S.textContent.length,we=Math.min(O.start,Ce),at=O.end===void 0?we:Math.min(O.end,Ce);!W.extend&&we>at&&(T=at,at=we,we=T);var q=jy(S,we),U=jy(S,at);if(q&&U&&(W.rangeCount!==1||W.anchorNode!==q.node||W.anchorOffset!==q.offset||W.focusNode!==U.node||W.focusOffset!==U.offset)){var G=oe.createRange();G.setStart(q.node,q.offset),W.removeAllRanges(),we>at?(W.addRange(G),W.extend(U.node,U.offset)):(G.setEnd(U.node,U.offset),W.addRange(G))}}}}for(oe=[],W=S;W=W.parentNode;)W.nodeType===1&&oe.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<oe.length;S++){var ne=oe[S];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Sh=!!Mm,Vm=Mm=null}finally{tt=f,re.p=c,V.T=a}}i.current=r,rn=2}}function Y_(){if(rn===2){rn=0;var i=sr,r=go,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=V.T,V.T=null;var c=re.p;re.p=2;var f=tt;tt|=4;try{S_(i,r.alternate,r)}finally{tt=f,re.p=c,V.T=a}}rn=3}}function K_(){if(rn===4||rn===3){rn=0,Vs();var i=sr,r=go,a=yo,c=k_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rn=5:(rn=0,go=sr=null,Q_(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ir=null),ka(a),r=r.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(wt,r,void 0,(r.current.flags&128)===128)}catch{}if(c!==null){r=V.T,f=re.p,re.p=2,V.T=null;try{for(var p=i.onRecoverableError,T=0;T<c.length;T++){var S=c[T];p(S.value,{componentStack:S.stack})}}finally{V.T=r,re.p=f}}(yo&3)!==0&&dh(),Ui(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===bm?Yl++:(Yl=0,bm=i):Yl=0,Kl(0)}}function Q_(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,xl(r)))}function dh(i){return $_(),Y_(),K_(),X_()}function X_(){if(rn!==5)return!1;var i=sr,r=Em;Em=0;var a=ka(yo),c=V.T,f=re.p;try{re.p=32>a?32:a,V.T=null,a=Tm,Tm=null;var p=sr,T=yo;if(rn=0,go=sr=null,yo=0,(tt&6)!==0)throw Error(s(331));var S=tt;if(tt|=4,O_(p.current),I_(p,p.current,T,a),tt=S,Kl(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(wt,p)}catch{}return!0}finally{re.p=f,V.T=c,Q_(i,r)}}function W_(i,r,a){r=ti(a,r),r=em(i.stateNode,r,2),i=Ks(i,r,2),i!==null&&(Wi(i,2),Ui(i))}function lt(i,r,a){if(i.tag===3)W_(i,i,a);else for(;r!==null;){if(r.tag===3){W_(r,i,a);break}else if(r.tag===1){var c=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ir===null||!ir.has(c))){i=ti(a,i),a=t_(2),c=Ks(r,a,2),c!==null&&(n_(a,c,r,i),Wi(c,2),Ui(c));break}}r=r.return}}function Rm(i,r,a){var c=i.pingCache;if(c===null){c=i.pingCache=new YA;var f=new Set;c.set(r,f)}else f=c.get(r),f===void 0&&(f=new Set,c.set(r,f));f.has(a)||(gm=!0,f.add(a),i=ZA.bind(null,i,r,a),r.then(i,i))}function ZA(i,r,a){var c=i.pingCache;c!==null&&c.delete(r),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ut===i&&(Ge&a)===a&&(At===4||At===3&&(Ge&62914560)===Ge&&300>An()-_m?(tt&2)===0&&vo(i,0):ym|=a,po===Ge&&(po=0)),Ui(i)}function Z_(i,r){r===0&&(r=il()),i=Ja(i,r),i!==null&&(Wi(i,r),Ui(i))}function JA(i){var r=i.memoizedState,a=0;r!==null&&(a=r.retryLane),Z_(i,a)}function eR(i,r){var a=0;switch(i.tag){case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(r),Z_(i,a)}function tR(i,r){return mt(i,r)}var fh=null,Eo=null,xm=!1,mh=!1,Nm=!1,fa=0;function Ui(i){i!==Eo&&i.next===null&&(Eo===null?fh=Eo=i:Eo=Eo.next=i),mh=!0,xm||(xm=!0,iR())}function Kl(i,r){if(!Nm&&mh){Nm=!0;do for(var a=!1,c=fh;c!==null;){if(i!==0){var f=c.pendingLanes;if(f===0)var p=0;else{var T=c.suspendedLanes,S=c.pingedLanes;p=(1<<31-un(42|i)+1)-1,p&=f&~(T&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(a=!0,nE(c,p))}else p=Ge,p=Pa(c,c===ut?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Lr(c,p)||(a=!0,nE(c,p));c=c.next}while(a);Nm=!1}}function nR(){J_()}function J_(){mh=xm=!1;var i=0;fa!==0&&(hR()&&(i=fa),fa=0);for(var r=An(),a=null,c=fh;c!==null;){var f=c.next,p=eE(c,r);p===0?(c.next=null,a===null?fh=f:a.next=f,f===null&&(Eo=a)):(a=c,(i!==0||(p&3)!==0)&&(mh=!0)),c=f}Kl(i)}function eE(i,r){for(var a=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,p=i.pendingLanes&-62914561;0<p;){var T=31-un(p),S=1<<T,O=f[T];O===-1?((S&a)===0||(S&c)!==0)&&(f[T]=tl(S,r)):O<=r&&(i.expiredLanes|=S),p&=~S}if(r=ut,a=Ge,a=Pa(i,i===r?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===r&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Ie(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Lr(i,a)){if(r=a&-a,r===i.callbackPriority)return r;switch(c!==null&&Ie(c),ka(a)){case 2:case 8:a=ja;break;case 32:a=Pr;break;case 268435456:a=Oa;break;default:a=Pr}return c=tE.bind(null,i),a=mt(a,c),i.callbackPriority=r,i.callbackNode=a,r}return c!==null&&c!==null&&Ie(c),i.callbackPriority=2,i.callbackNode=null,2}function tE(i,r){if(rn!==0&&rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(dh()&&i.callbackNode!==a)return null;var c=Ge;return c=Pa(i,i===ut?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(V_(i,c,r),eE(i,An()),i.callbackNode!=null&&i.callbackNode===a?tE.bind(null,i):null)}function nE(i,r){if(dh())return null;V_(i,r,!0)}function iR(){fR(function(){(tt&6)!==0?mt(Jo,nR):J_()})}function Cm(){return fa===0&&(fa=nl()),fa}function iE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:za(""+i)}function sE(i,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,i.id&&a.setAttribute("form",i.id),r.parentNode.insertBefore(a,r),i=new FormData(i),a.parentNode.removeChild(a),i}function sR(i,r,a,c,f){if(r==="submit"&&a&&a.stateNode===f){var p=iE((f[Ot]||null).action),T=c.submitter;T&&(r=(r=T[Ot]||null)?iE(r.formAction):T.getAttribute("formAction"),r!==null&&(p=r,T=null));var S=new qa("action","action",null,c,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(fa!==0){var O=T?sE(f,T):new FormData(f);Qf(a,{pending:!0,data:O,method:f.method,action:p},null,O)}}else typeof p=="function"&&(S.preventDefault(),O=T?sE(f,T):new FormData(f),Qf(a,{pending:!0,data:O,method:f.method,action:p},p,O))},currentTarget:f}]})}}for(var Im=0;Im<mf.length;Im++){var Dm=mf[Im],rR=Dm.toLowerCase(),aR=Dm[0].toUpperCase()+Dm.slice(1);mi(rR,"on"+aR)}mi(Vy,"onAnimationEnd"),mi(Ly,"onAnimationIteration"),mi(Uy,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(wA,"onTransitionRun"),mi(SA,"onTransitionStart"),mi(AA,"onTransitionCancel"),mi(By,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function rE(i,r){r=(r&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],f=c.event;c=c.listeners;e:{var p=void 0;if(r)for(var T=c.length-1;0<=T;T--){var S=c[T],O=S.instance,$=S.currentTarget;if(S=S.listener,O!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=$;try{p(f)}catch(J){th(J)}f.currentTarget=null,p=O}else for(T=0;T<c.length;T++){if(S=c[T],O=S.instance,$=S.currentTarget,S=S.listener,O!==p&&f.isPropagationStopped())break e;p=S,f.currentTarget=$;try{p(f)}catch(J){th(J)}f.currentTarget=null,p=O}}}}function Ue(i,r){var a=r[al];a===void 0&&(a=r[al]=new Set);var c=i+"__bubble";a.has(c)||(aE(r,i,2,!1),a.add(c))}function jm(i,r,a){var c=0;r&&(c|=4),aE(a,i,c,r)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Om(i){if(!i[ph]){i[ph]=!0,ol.forEach(function(a){a!=="selectionchange"&&(oR.has(a)||jm(a,!1,i),jm(a,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[ph]||(r[ph]=!0,jm("selectionchange",!1,r))}}function aE(i,r,a,c){switch(IE(r)){case 2:var f=PR;break;case 8:f=kR;break;default:f=Ym}a=f.bind(null,r,a,i),f=void 0,!Jn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(r,a,{capture:!0,passive:f}):i.addEventListener(r,a,!0):f!==void 0?i.addEventListener(r,a,{passive:f}):i.addEventListener(r,a,!1)}function Pm(i,r,a,c,f){var p=c;if((r&1)===0&&(r&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===f)break;if(T===4)for(T=c.return;T!==null;){var O=T.tag;if((O===3||O===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;S!==null;){if(T=Zi(S),T===null)return;if(O=T.tag,O===5||O===6||O===26||O===27){c=p=T;continue e}S=S.parentNode}}c=c.return}yu(function(){var $=p,J=Zn(a),oe=[];e:{var Q=zy.get(i);if(Q!==void 0){var W=qa,Ce=i;switch(i){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":W=Ka;break;case"focusin":Ce="focus",W=Ga;break;case"focusout":Ce="blur",W=Ga;break;case"beforeblur":case"afterblur":W=Ga;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=ei;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=af;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Au;break;case Vy:case Ly:case Uy:W=$a;break;case By:W=xu;break;case"scroll":case"scrollend":W=vu;break;case"wheel":W=Qa;break;case"copy":case"cut":case"paste":W=Ya;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=_l;break;case"toggle":case"beforetoggle":W=Cu}var we=(r&4)!==0,at=!we&&(i==="scroll"||i==="scrollend"),q=we?Q!==null?Q+"Capture":null:Q;we=[];for(var U=$,G;U!==null;){var ne=U;if(G=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||G===null||q===null||(ne=$r(U,q),ne!=null&&we.push(Xl(U,ne,G))),at)break;U=U.return}0<we.length&&(Q=new W(Q,Ce,null,a,J),oe.push({event:Q,listeners:we}))}}if((r&7)===0){e:{if(Q=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",Q&&a!==ns&&(Ce=a.relatedTarget||a.fromElement)&&(Zi(Ce)||Ce[Xn]))break e;if((W||Q)&&(Q=J.window===J?J:(Q=J.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(Ce=a.relatedTarget||a.toElement,W=$,Ce=Ce?Zi(Ce):null,Ce!==null&&(at=l(Ce),we=Ce.tag,Ce!==at||we!==5&&we!==27&&we!==6)&&(Ce=null)):(W=null,Ce=$),W!==Ce)){if(we=ei,ne="onMouseLeave",q="onMouseEnter",U="mouse",(i==="pointerout"||i==="pointerover")&&(we=_l,ne="onPointerLeave",q="onPointerEnter",U="pointer"),at=W==null?Q:Ri(W),G=Ce==null?Q:Ri(Ce),Q=new we(ne,U+"leave",W,a,J),Q.target=at,Q.relatedTarget=G,ne=null,Zi(J)===$&&(we=new we(q,U+"enter",Ce,a,J),we.target=G,we.relatedTarget=at,ne=we),at=ne,W&&Ce)t:{for(we=W,q=Ce,U=0,G=we;G;G=To(G))U++;for(G=0,ne=q;ne;ne=To(ne))G++;for(;0<U-G;)we=To(we),U--;for(;0<G-U;)q=To(q),G--;for(;U--;){if(we===q||q!==null&&we===q.alternate)break t;we=To(we),q=To(q)}we=null}else we=null;W!==null&&oE(oe,Q,W,we,!1),Ce!==null&&at!==null&&oE(oe,at,Ce,we,!0)}}e:{if(Q=$?Ri($):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var _e=Ry;else if(Ht(Q))if(xy)_e=EA;else{_e=vA;var Ve=yA}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?$&&dl($.elementType)&&(_e=Ry):_e=_A;if(_e&&(_e=_e(i,$))){os(oe,_e,a,J);break e}Ve&&Ve(i,Q,$),i==="focusout"&&$&&Q.type==="number"&&$.memoizedProps.value!=null&&Fs(Q,"number",Q.value)}switch(Ve=$?Ri($):window,i){case"focusin":(Ht(Ve)||Ve.contentEditable==="true")&&(Xa=Ve,hf=$,bl=null);break;case"focusout":bl=hf=Xa=null;break;case"mousedown":df=!0;break;case"contextmenu":case"mouseup":case"dragend":df=!1,ky(oe,a,J);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":ky(oe,a,J)}var Te;if(Oi)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Fe?Z(i,a)&&(Ae="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(E&&a.locale!=="ko"&&(Fe||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Fe&&(Te=ml()):(Ci=J,Hs="value"in Ci?Ci.value:Ci.textContent,Fe=!0)),Ve=gh($,Ae),0<Ve.length&&(Ae=new yl(Ae,i,null,a,J),oe.push({event:Ae,listeners:Ve}),Te?Ae.data=Te:(Te=fe(a),Te!==null&&(Ae.data=Te)))),(Te=_?Ft(i,a):He(i,a))&&(Ae=gh($,"onBeforeInput"),0<Ae.length&&(Ve=new yl("onBeforeInput","beforeinput",null,a,J),oe.push({event:Ve,listeners:Ae}),Ve.data=Te)),sR(oe,i,$,a,J)}rE(oe,r)})}function Xl(i,r,a){return{instance:i,listener:r,currentTarget:a}}function gh(i,r){for(var a=r+"Capture",c=[];i!==null;){var f=i,p=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||p===null||(f=$r(i,a),f!=null&&c.unshift(Xl(i,f,p)),f=$r(i,r),f!=null&&c.push(Xl(i,f,p))),i.tag===3)return c;i=i.return}return[]}function To(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function oE(i,r,a,c,f){for(var p=r._reactName,T=[];a!==null&&a!==c;){var S=a,O=S.alternate,$=S.stateNode;if(S=S.tag,O!==null&&O===c)break;S!==5&&S!==26&&S!==27||$===null||(O=$,f?($=$r(a,p),$!=null&&T.unshift(Xl(a,$,O))):f||($=$r(a,p),$!=null&&T.push(Xl(a,$,O)))),a=a.return}T.length!==0&&i.push({event:r,listeners:T})}var lR=/\r\n?/g,cR=/\u0000|\uFFFD/g;function lE(i){return(typeof i=="string"?i:""+i).replace(lR,`
`).replace(cR,"")}function cE(i,r){return r=lE(r),lE(i)===r}function yh(){}function rt(i,r,a,c,f,p){switch(a){case"children":typeof c=="string"?r==="body"||r==="textarea"&&c===""||Wn(i,c):(typeof c=="number"||typeof c=="bigint")&&r!=="body"&&Wn(i,""+c);break;case"className":xi(i,"class",c);break;case"tabIndex":xi(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(i,a,c);break;case"style":hl(i,c,p);break;case"data":if(r!=="object"){xi(i,"data",c);break}case"src":case"href":if(c===""&&(r!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=za(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(a==="formAction"?(r!=="input"&&rt(i,r,"name",f.name,f,null),rt(i,r,"formEncType",f.formEncType,f,null),rt(i,r,"formMethod",f.formMethod,f,null),rt(i,r,"formTarget",f.formTarget,f,null)):(rt(i,r,"encType",f.encType,f,null),rt(i,r,"method",f.method,f,null),rt(i,r,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=za(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=yh);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=za(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Ue("beforetoggle",i),Ue("toggle",i),qs(i,"popover",c);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":qs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=sf.get(a)||a,qs(i,a,c))}}function km(i,r,a,c,f,p){switch(a){case"style":hl(i,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Wn(i,c):(typeof c=="number"||typeof c=="bigint")&&Wn(i,""+c);break;case"onScroll":c!=null&&Ue("scroll",i);break;case"onScrollEnd":c!=null&&Ue("scrollend",i);break;case"onClick":c!=null&&(i.onclick=yh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ma.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),p=i[Ot]||null,p=p!=null?p[a]:null,typeof p=="function"&&i.removeEventListener(r,p,f),typeof c=="function")){typeof p!="function"&&p!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(r,c,f);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):qs(i,a,c)}}}function an(i,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",i),Ue("load",i);var c=!1,f=!1,p;for(p in a)if(a.hasOwnProperty(p)){var T=a[p];if(T!=null)switch(p){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(i,r,p,T,a,null)}}f&&rt(i,r,"srcSet",a.srcSet,a,null),c&&rt(i,r,"src",a.src,a,null);return;case"input":Ue("invalid",i);var S=p=T=f=null,O=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var J=a[c];if(J!=null)switch(c){case"name":f=J;break;case"type":T=J;break;case"checked":O=J;break;case"defaultChecked":$=J;break;case"value":p=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:rt(i,r,c,J,a,null)}}Fr(i,p,S,O,$,T,f,!1),Ba(i);return;case"select":Ue("invalid",i),c=T=p=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":p=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:rt(i,r,f,S,a,null)}r=p,a=T,i.multiple=!!c,r!=null?ts(i,!!c,r,!1):a!=null&&ts(i,!!c,a,!0);return;case"textarea":Ue("invalid",i),p=f=c=null;for(T in a)if(a.hasOwnProperty(T)&&(S=a[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":f=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:rt(i,r,T,S,a,null)}Hr(i,c,f,p),Ba(i);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(c=a[O],c!=null))switch(O){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:rt(i,r,O,c,a,null)}return;case"dialog":Ue("beforetoggle",i),Ue("toggle",i),Ue("cancel",i),Ue("close",i);break;case"iframe":case"object":Ue("load",i);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Ue(Ql[c],i);break;case"image":Ue("error",i),Ue("load",i);break;case"details":Ue("toggle",i);break;case"embed":case"source":case"link":Ue("error",i),Ue("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:rt(i,r,$,c,a,null)}return;default:if(dl(r)){for(J in a)a.hasOwnProperty(J)&&(c=a[J],c!==void 0&&km(i,r,J,c,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(c=a[S],c!=null&&rt(i,r,S,c,a,null))}function uR(i,r,a,c){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,p=null,T=null,S=null,O=null,$=null,J=null;for(W in a){var oe=a[W];if(a.hasOwnProperty(W)&&oe!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":O=oe;default:c.hasOwnProperty(W)||rt(i,r,W,null,c,oe)}}for(var Q in c){var W=c[Q];if(oe=a[Q],c.hasOwnProperty(Q)&&(W!=null||oe!=null))switch(Q){case"type":p=W;break;case"name":f=W;break;case"checked":$=W;break;case"defaultChecked":J=W;break;case"value":T=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:W!==oe&&rt(i,r,Q,W,c,oe)}}Un(i,T,S,O,$,J,p,f);return;case"select":W=T=S=Q=null;for(p in a)if(O=a[p],a.hasOwnProperty(p)&&O!=null)switch(p){case"value":break;case"multiple":W=O;default:c.hasOwnProperty(p)||rt(i,r,p,null,c,O)}for(f in c)if(p=c[f],O=a[f],c.hasOwnProperty(f)&&(p!=null||O!=null))switch(f){case"value":Q=p;break;case"defaultValue":S=p;break;case"multiple":T=p;default:p!==O&&rt(i,r,f,p,c,O)}r=S,a=T,c=W,Q!=null?ts(i,!!a,Q,!1):!!c!=!!a&&(r!=null?ts(i,!!a,r,!0):ts(i,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:rt(i,r,S,null,c,f)}for(T in c)if(f=c[T],p=a[T],c.hasOwnProperty(T)&&(f!=null||p!=null))switch(T){case"value":Q=f;break;case"defaultValue":W=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==p&&rt(i,r,T,f,c,p)}it(i,Q,W);return;case"option":for(var Ce in a)if(Q=a[Ce],a.hasOwnProperty(Ce)&&Q!=null&&!c.hasOwnProperty(Ce))switch(Ce){case"selected":i.selected=!1;break;default:rt(i,r,Ce,null,c,Q)}for(O in c)if(Q=c[O],W=a[O],c.hasOwnProperty(O)&&Q!==W&&(Q!=null||W!=null))switch(O){case"selected":i.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:rt(i,r,O,Q,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)Q=a[we],a.hasOwnProperty(we)&&Q!=null&&!c.hasOwnProperty(we)&&rt(i,r,we,null,c,Q);for($ in c)if(Q=c[$],W=a[$],c.hasOwnProperty($)&&Q!==W&&(Q!=null||W!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,r));break;default:rt(i,r,$,Q,c,W)}return;default:if(dl(r)){for(var at in a)Q=a[at],a.hasOwnProperty(at)&&Q!==void 0&&!c.hasOwnProperty(at)&&km(i,r,at,void 0,c,Q);for(J in c)Q=c[J],W=a[J],!c.hasOwnProperty(J)||Q===W||Q===void 0&&W===void 0||km(i,r,J,Q,c,W);return}}for(var q in a)Q=a[q],a.hasOwnProperty(q)&&Q!=null&&!c.hasOwnProperty(q)&&rt(i,r,q,null,c,Q);for(oe in c)Q=c[oe],W=a[oe],!c.hasOwnProperty(oe)||Q===W||Q==null&&W==null||rt(i,r,oe,Q,c,W)}var Mm=null,Vm=null;function vh(i){return i.nodeType===9?i:i.ownerDocument}function uE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function hE(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function Lm(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Um=null;function hR(){var i=window.event;return i&&i.type==="popstate"?i===Um?!1:(Um=i,!0):(Um=null,!1)}var dE=typeof setTimeout=="function"?setTimeout:void 0,dR=typeof clearTimeout=="function"?clearTimeout:void 0,fE=typeof Promise=="function"?Promise:void 0,fR=typeof queueMicrotask=="function"?queueMicrotask:typeof fE<"u"?function(i){return fE.resolve(null).then(i).catch(mR)}:dE;function mR(i){setTimeout(function(){throw i})}function ar(i){return i==="head"}function mE(i,r){var a=r,c=0,f=0;do{var p=a.nextSibling;if(i.removeChild(a),p&&p.nodeType===8)if(a=p.data,a==="/$"){if(0<c&&8>c){a=c;var T=i.ownerDocument;if(a&1&&Wl(T.documentElement),a&2&&Wl(T.body),a&4)for(a=T.head,Wl(a),T=a.firstChild;T;){var S=T.nextSibling,O=T.nodeName;T[Ur]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=S}}if(f===0){i.removeChild(p),rc(r);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=p}while(a);rc(r)}function Bm(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Bm(a),zs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function pR(i,r,a,c){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Ur])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(p=i.getAttribute("rel"),p==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(p!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(p=i.getAttribute("src"),(p!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&p&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var p=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===p)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function gR(i,r,a){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gi(i.nextSibling),i===null))return null;return i}function zm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function yR(i,r){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")r();else{var c=function(){r(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var qm=null;function pE(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return i;r--}else a==="/$"&&r++}i=i.previousSibling}return null}function gE(i,r,a){switch(r=vh(a),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function Wl(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);zs(i)}var oi=new Map,yE=new Set;function _h(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Es=re.d;re.d={f:vR,r:_R,D:ER,C:TR,L:bR,m:wR,X:AR,S:SR,M:RR};function vR(){var i=Es.f(),r=uh();return i||r}function _R(i){var r=Ai(i);r!==null&&r.tag===5&&r.type==="form"?Vv(r):Es.r(i)}var bo=typeof document>"u"?null:document;function vE(i,r,a){var c=bo;if(c&&typeof r=="string"&&r){var f=Pt(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),yE.has(f)||(yE.add(f),i={rel:i,crossOrigin:a,href:r},c.querySelector(f)===null&&(r=c.createElement("link"),an(r,"link",i),Ct(r),c.head.appendChild(r)))}}function ER(i){Es.D(i),vE("dns-prefetch",i,null)}function TR(i,r){Es.C(i,r),vE("preconnect",i,r)}function bR(i,r,a){Es.L(i,r,a);var c=bo;if(c&&i&&r){var f='link[rel="preload"][as="'+Pt(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Pt(a.imageSizes)+'"]')):f+='[href="'+Pt(i)+'"]';var p=f;switch(r){case"style":p=wo(i);break;case"script":p=So(i)}oi.has(p)||(i=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:i,as:r},a),oi.set(p,i),c.querySelector(f)!==null||r==="style"&&c.querySelector(Zl(p))||r==="script"&&c.querySelector(Jl(p))||(r=c.createElement("link"),an(r,"link",i),Ct(r),c.head.appendChild(r)))}}function wR(i,r){Es.m(i,r);var a=bo;if(a&&i){var c=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Pt(c)+'"][href="'+Pt(i)+'"]',p=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=So(i)}if(!oi.has(p)&&(i=v({rel:"modulepreload",href:i},r),oi.set(p,i),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(p)))return}c=a.createElement("link"),an(c,"link",i),Ct(c),a.head.appendChild(c)}}}function SR(i,r,a){Es.S(i,r,a);var c=bo;if(c&&i){var f=En(c).hoistableStyles,p=wo(i);r=r||"default";var T=f.get(p);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(Zl(p)))S.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":r},a),(a=oi.get(p))&&Fm(i,a);var O=T=c.createElement("link");Ct(O),an(O,"link",i),O._p=new Promise(function($,J){O.onload=$,O.onerror=J}),O.addEventListener("load",function(){S.loading|=1}),O.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Eh(T,r,c)}T={type:"stylesheet",instance:T,count:1,state:S},f.set(p,T)}}}function AR(i,r){Es.X(i,r);var a=bo;if(a&&i){var c=En(a).hoistableScripts,f=So(i),p=c.get(f);p||(p=a.querySelector(Jl(f)),p||(i=v({src:i,async:!0},r),(r=oi.get(f))&&Hm(i,r),p=a.createElement("script"),Ct(p),an(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function RR(i,r){Es.M(i,r);var a=bo;if(a&&i){var c=En(a).hoistableScripts,f=So(i),p=c.get(f);p||(p=a.querySelector(Jl(f)),p||(i=v({src:i,async:!0,type:"module"},r),(r=oi.get(f))&&Hm(i,r),p=a.createElement("script"),Ct(p),an(p,"link",i),a.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(f,p))}}function _E(i,r,a,c){var f=(f=he.current)?_h(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=wo(a.href),a=En(f).hoistableStyles,c=a.get(r),c||(c={type:"style",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=wo(a.href);var p=En(f).hoistableStyles,T=p.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(i,T),(p=f.querySelector(Zl(i)))&&!p._p&&(T.instance=p,T.state.loading=5),oi.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},oi.set(i,a),p||xR(f,i,a,T.state))),r&&c===null)throw Error(s(528,""));return T}if(r&&c!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=So(a),a=En(f).hoistableScripts,c=a.get(r),c||(c={type:"script",instance:null,count:0,state:null},a.set(r,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function wo(i){return'href="'+Pt(i)+'"'}function Zl(i){return'link[rel="stylesheet"]['+i+"]"}function EE(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function xR(i,r,a,c){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?c.loading=1:(r=i.createElement("link"),c.preload=r,r.addEventListener("load",function(){return c.loading|=1}),r.addEventListener("error",function(){return c.loading|=2}),an(r,"link",a),Ct(r),i.head.appendChild(r))}function So(i){return'[src="'+Pt(i)+'"]'}function Jl(i){return"script[async]"+i}function TE(i,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var c=i.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(c)return r.instance=c,Ct(c),c;var f=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ct(c),an(c,"style",f),Eh(c,a.precedence,i),r.instance=c;case"stylesheet":f=wo(a.href);var p=i.querySelector(Zl(f));if(p)return r.state.loading|=4,r.instance=p,Ct(p),p;c=EE(a),(f=oi.get(f))&&Fm(c,f),p=(i.ownerDocument||i).createElement("link"),Ct(p);var T=p;return T._p=new Promise(function(S,O){T.onload=S,T.onerror=O}),an(p,"link",c),r.state.loading|=4,Eh(p,a.precedence,i),r.instance=p;case"script":return p=So(a.src),(f=i.querySelector(Jl(p)))?(r.instance=f,Ct(f),f):(c=a,(f=oi.get(p))&&(c=v({},a),Hm(c,f)),i=i.ownerDocument||i,f=i.createElement("script"),Ct(f),an(f,"link",c),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(c=r.instance,r.state.loading|=4,Eh(c,a.precedence,i));return r.instance}function Eh(i,r,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,p=f,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===r)p=S;else if(p!==f)break}p?p.parentNode.insertBefore(i,p.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(i,r.firstChild))}function Fm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Hm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var Th=null;function bE(i,r,a){if(Th===null){var c=new Map,f=Th=new Map;f.set(a,c)}else f=Th,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var p=a[f];if(!(p[Ur]||p[qt]||i==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(r)||"";T=i+T;var S=c.get(T);S?S.push(p):c.set(T,[p])}}return c}function wE(i,r,a){i=i.ownerDocument||i,i.head.insertBefore(a,r==="title"?i.querySelector("head > title"):null)}function NR(i,r,a){if(a===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function SE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ec=null;function CR(){}function IR(i,r,a){if(ec===null)throw Error(s(475));var c=ec;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=wo(a.href),p=i.querySelector(Zl(f));if(p){i=p._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=bh.bind(c),i.then(c,c)),r.state.loading|=4,r.instance=p,Ct(p);return}p=i.ownerDocument||i,a=EE(a),(f=oi.get(f))&&Fm(a,f),p=p.createElement("link"),Ct(p);var T=p;T._p=new Promise(function(S,O){T.onload=S,T.onerror=O}),an(p,"link",a),r.instance=p}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(c.count++,r=bh.bind(c),i.addEventListener("load",r),i.addEventListener("error",r))}}function DR(){if(ec===null)throw Error(s(475));var i=ec;return i.stylesheets&&i.count===0&&Gm(i,i.stylesheets),0<i.count?function(r){var a=setTimeout(function(){if(i.stylesheets&&Gm(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(a)}}:null}function bh(){if(this.count--,this.count===0){if(this.stylesheets)Gm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function Gm(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,r.forEach(jR,i),wh=null,bh.call(i))}function jR(i,r){if(!(r.state.loading&4)){var a=wh.get(i);if(a)var c=a.get(null);else{a=new Map,wh.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<f.length;p++){var T=f[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}f=r.instance,T=f.getAttribute("data-precedence"),p=a.get(T)||c,p===c&&a.set(null,f),a.set(T,f),this.count++,c=bh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),p?p.parentNode.insertBefore(f,p.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var tc={$$typeof:X,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function OR(i,r,a,c,f,p,T,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xi(0),this.hiddenUpdates=Xi(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function AE(i,r,a,c,f,p,T,S,O,$,J,oe){return i=new OR(i,r,a,T,S,O,$,oe),r=1,p===!0&&(r|=24),p=zn(3,null,null,r),i.current=p,p.stateNode=i,r=Rf(),r.refCount++,i.pooledCache=r,r.refCount++,p.memoizedState={element:c,isDehydrated:a,cache:r},If(p),i}function RE(i){return i?(i=eo,i):eo}function xE(i,r,a,c,f,p){f=RE(f),c.context===null?c.context=f:c.pendingContext=f,c=Ys(r),c.payload={element:a},p=p===void 0?null:p,p!==null&&(c.callback=p),a=Ks(i,c,r),a!==null&&($n(a,i,r),Dl(a,i,r))}function NE(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<r?a:r}}function $m(i,r){NE(i,r),(i=i.alternate)&&NE(i,r)}function CE(i){if(i.tag===13){var r=Ja(i,67108864);r!==null&&$n(r,i,67108864),$m(i,67108864)}}var Sh=!0;function PR(i,r,a,c){var f=V.T;V.T=null;var p=re.p;try{re.p=2,Ym(i,r,a,c)}finally{re.p=p,V.T=f}}function kR(i,r,a,c){var f=V.T;V.T=null;var p=re.p;try{re.p=8,Ym(i,r,a,c)}finally{re.p=p,V.T=f}}function Ym(i,r,a,c){if(Sh){var f=Km(c);if(f===null)Pm(i,r,c,Ah,a),DE(i,c);else if(VR(f,i,r,a,c))c.stopPropagation();else if(DE(i,c),r&4&&-1<MR.indexOf(i)){for(;f!==null;){var p=Ai(f);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=hi(p.pendingLanes);if(T!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var O=1<<31-un(T);S.entanglements[1]|=O,T&=~O}Ui(p),(tt&6)===0&&(lh=An()+500,Kl(0))}}break;case 13:S=Ja(p,2),S!==null&&$n(S,p,2),uh(),$m(p,2)}if(p=Km(c),p===null&&Pm(i,r,c,Ah,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else Pm(i,r,c,null,a)}}function Km(i){return i=Zn(i),Qm(i)}var Ah=null;function Qm(i){if(Ah=null,i=Zi(i),i!==null){var r=l(i);if(r===null)i=null;else{var a=r.tag;if(a===13){if(i=d(r),i!==null)return i;i=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return Ah=i,null}function IE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Wd()){case Jo:return 2;case ja:return 8;case Pr:case Zd:return 32;case Oa:return 268435456;default:return 32}default:return 32}}var Xm=!1,or=null,lr=null,cr=null,nc=new Map,ic=new Map,ur=[],MR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function DE(i,r){switch(i){case"focusin":case"focusout":or=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":nc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(r.pointerId)}}function sc(i,r,a,c,f,p){return i===null||i.nativeEvent!==p?(i={blockedOn:r,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},r!==null&&(r=Ai(r),r!==null&&CE(r)),i):(i.eventSystemFlags|=c,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function VR(i,r,a,c,f){switch(r){case"focusin":return or=sc(or,i,r,a,c,f),!0;case"dragenter":return lr=sc(lr,i,r,a,c,f),!0;case"mouseover":return cr=sc(cr,i,r,a,c,f),!0;case"pointerover":var p=f.pointerId;return nc.set(p,sc(nc.get(p)||null,i,r,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,ic.set(p,sc(ic.get(p)||null,i,r,a,c,f)),!0}return!1}function jE(i){var r=Zi(i.target);if(r!==null){var a=l(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){i.blockedOn=r,uu(i.priority,function(){if(a.tag===13){var c=Gn();c=Ls(c);var f=Ja(a,c);f!==null&&$n(f,a,c),$m(a,c)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var a=Km(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);ns=c,a.target.dispatchEvent(c),ns=null}else return r=Ai(a),r!==null&&CE(r),i.blockedOn=a,!1;r.shift()}return!0}function OE(i,r,a){Rh(i)&&a.delete(r)}function LR(){Xm=!1,or!==null&&Rh(or)&&(or=null),lr!==null&&Rh(lr)&&(lr=null),cr!==null&&Rh(cr)&&(cr=null),nc.forEach(OE),ic.forEach(OE)}function xh(i,r){i.blockedOn===r&&(i.blockedOn=null,Xm||(Xm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LR)))}var Nh=null;function PE(i){Nh!==i&&(Nh=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nh===i&&(Nh=null);for(var r=0;r<i.length;r+=3){var a=i[r],c=i[r+1],f=i[r+2];if(typeof c!="function"){if(Qm(c||a)===null)continue;break}var p=Ai(a);p!==null&&(i.splice(r,3),r-=3,Qf(p,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function rc(i){function r(O){return xh(O,i)}or!==null&&xh(or,i),lr!==null&&xh(lr,i),cr!==null&&xh(cr,i),nc.forEach(r),ic.forEach(r);for(var a=0;a<ur.length;a++){var c=ur[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<ur.length&&(a=ur[0],a.blockedOn===null);)jE(a),a.blockedOn===null&&ur.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],p=a[c+1],T=f[Ot]||null;if(typeof p=="function")T||PE(a);else if(T){var S=null;if(p&&p.hasAttribute("formAction")){if(f=p,T=p[Ot]||null)S=T.formAction;else if(Qm(f)!==null)continue}else S=T.action;typeof S=="function"?a[c+1]=S:(a.splice(c,3),c-=3),PE(a)}}}function Wm(i){this._internalRoot=i}Ch.prototype.render=Wm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,c=Gn();xE(a,c,i,r,null,null)},Ch.prototype.unmount=Wm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;xE(i.current,2,null,i,null,null),uh(),r[Xn]=null}};function Ch(i){this._internalRoot=i}Ch.prototype.unstable_scheduleHydration=function(i){if(i){var r=Us();i={blockedOn:null,target:i,priority:r};for(var a=0;a<ur.length&&r!==0&&r<ur[a].priority;a++);ur.splice(a,0,i),a===0&&jE(i)}};var kE=e.version;if(kE!=="19.1.1")throw Error(s(527,kE,"19.1.1"));re.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var UR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{wt=Ih.inject(UR),et=Ih}catch{}}return oc.createRoot=function(i,r){if(!o(i))throw Error(s(299));var a=!1,c="",f=Wv,p=Zv,T=Jv,S=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(p=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(S=r.unstable_transitionCallbacks)),r=AE(i,1,!1,null,null,a,c,f,p,T,S,null),i[Xn]=r.current,Om(i),new Wm(r)},oc.hydrateRoot=function(i,r,a){if(!o(i))throw Error(s(299));var c=!1,f="",p=Wv,T=Zv,S=Jv,O=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(p=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(O=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),r=AE(i,1,!0,r,a??null,c,f,p,T,S,O,$),r.context=RE(null),a=r.current,c=Gn(),c=Ls(c),f=Ys(c),f.callback=null,Ks(a,f,c),a=c,r.current.lanes=a,Wi(r,a),Ui(r),i[Xn]=r.current,Om(i),new Ch(r)},oc.version="19.1.1",oc}var GE;function QR(){if(GE)return ep.exports;GE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ep.exports=KR(),ep.exports}var XR=QR();const WR=Qb(XR);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $E="popstate";function ZR(n={}){function e(s,o){let{pathname:l,search:d,hash:m}=s.location;return Ip("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Ic(o)}return ex(e,t,null,n)}function _t(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JR(){return Math.random().toString(36).substring(2,10)}function YE(n,e){return{usr:n.state,key:n.key,idx:e}}function Ip(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?qo(e):e,state:t,key:e&&e.key||s||JR()}}function Ic({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function qo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function ex(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,d=o.history,m="POP",g=null,y=v();y==null&&(y=0,d.replaceState({...d.state,idx:y},""));function v(){return(d.state||{idx:null}).idx}function b(){m="POP";let j=v(),Y=j==null?null:j-y;y=j,g&&g({action:m,location:z.location,delta:Y})}function w(j,Y){m="PUSH";let K=Ip(z.location,j,Y);y=v()+1;let X=YE(K,y),se=z.createHref(K);try{d.pushState(X,"",se)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(se)}l&&g&&g({action:m,location:z.location,delta:1})}function C(j,Y){m="REPLACE";let K=Ip(z.location,j,Y);y=v();let X=YE(K,y),se=z.createHref(K);d.replaceState(X,"",se),l&&g&&g({action:m,location:z.location,delta:0})}function L(j){return tx(j)}let z={get action(){return m},get location(){return n(o,d)},listen(j){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener($E,b),g=j,()=>{o.removeEventListener($E,b),g=null}},createHref(j){return e(o,j)},createURL:L,encodeLocation(j){let Y=L(j);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:w,replace:C,go(j){return d.go(j)}};return z}function tx(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),_t(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:Ic(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Xb(n,e,t="/"){return nx(n,e,t,!1)}function nx(n,e,t,s){let o=typeof e=="string"?qo(e):e,l=xs(o.pathname||"/",t);if(l==null)return null;let d=Wb(n);ix(d);let m=null;for(let g=0;m==null&&g<d.length;++g){let y=mx(l);m=dx(d[g],y,s)}return m}function Wb(n,e=[],t=[],s="",o=!1){let l=(d,m,g=o,y)=>{let v={relativePath:y===void 0?d.path||"":y,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;_t(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let b=Ss([s,v.relativePath]),w=t.concat(v);d.children&&d.children.length>0&&(_t(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Wb(d.children,e,w,b,g)),!(d.path==null&&!d.index)&&e.push({path:b,score:ux(b,d.index),routesMeta:w})};return n.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let g of Zb(d.path))l(d,m,!0,g)}),e}function Zb(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let d=Zb(s.join("/")),m=[];return m.push(...d.map(g=>g===""?l:[l,g].join("/"))),o&&m.push(...d),m.map(g=>n.startsWith("/")&&g===""?"/":g)}function ix(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:hx(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var sx=/^:[\w-]+$/,rx=3,ax=2,ox=1,lx=10,cx=-2,KE=n=>n==="*";function ux(n,e){let t=n.split("/"),s=t.length;return t.some(KE)&&(s+=cx),e&&(s+=ax),t.filter(o=>!KE(o)).reduce((o,l)=>o+(sx.test(l)?rx:l===""?ox:lx),s)}function hx(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function dx(n,e,t=!1){let{routesMeta:s}=n,o={},l="/",d=[];for(let m=0;m<s.length;++m){let g=s[m],y=m===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",b=Jh({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),w=g.route;if(!b&&y&&t&&!s[s.length-1].route.index&&(b=Jh({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:Ss([l,b.pathname]),pathnameBase:vx(Ss([l,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(l=Ss([l,b.pathnameBase]))}return d}function Jh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=fx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:v,isOptional:b},w)=>{if(v==="*"){let L=m[w]||"";d=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const C=m[w];return b&&!C?y[v]=void 0:y[v]=(C||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:d,pattern:n}}function fx(n,e=!1,t=!0){vi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,g)=>(s.push({paramName:m,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function mx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function xs(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}function px(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?qo(n):n;return{pathname:t?t.startsWith("/")?t:gx(t,e):e,search:_x(s),hash:Ex(o)}}function gx(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function sp(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hg(n){let e=yx(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function dg(n,e,t,s=!1){let o;typeof n=="string"?o=qo(n):(o={...n},_t(!o.pathname||!o.pathname.includes("?"),sp("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),sp("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),sp("#","search","hash",o)));let l=n===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!s&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}m=b>=0?e[b]:"/"}let g=px(o,m),y=d&&d!=="/"&&d.endsWith("/"),v=(l||d===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var Ss=n=>n.join("/").replace(/\/\/+/g,"/"),vx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_x=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Ex=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Tx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Jb=["POST","PUT","PATCH","DELETE"];new Set(Jb);var bx=["GET",...Jb];new Set(bx);var Fo=F.createContext(null);Fo.displayName="DataRouter";var bd=F.createContext(null);bd.displayName="DataRouterState";F.createContext(!1);var ew=F.createContext({isTransitioning:!1});ew.displayName="ViewTransition";var wx=F.createContext(new Map);wx.displayName="Fetchers";var Sx=F.createContext(null);Sx.displayName="Await";var Ei=F.createContext(null);Ei.displayName="Navigation";var Fc=F.createContext(null);Fc.displayName="Location";var Ti=F.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var fg=F.createContext(null);fg.displayName="RouteError";function Ax(n,{relative:e}={}){_t(Ho(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=F.useContext(Ei),{hash:o,pathname:l,search:d}=Hc(n,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:Ss([t,l])),s.createHref({pathname:m,search:d,hash:o})}function Ho(){return F.useContext(Fc)!=null}function bi(){return _t(Ho(),"useLocation() may be used only in the context of a <Router> component."),F.useContext(Fc).location}var tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nw(n){F.useContext(Ei).static||F.useLayoutEffect(n)}function Go(){let{isDataRoute:n}=F.useContext(Ti);return n?Bx():Rx()}function Rx(){_t(Ho(),"useNavigate() may be used only in the context of a <Router> component.");let n=F.useContext(Fo),{basename:e,navigator:t}=F.useContext(Ei),{matches:s}=F.useContext(Ti),{pathname:o}=bi(),l=JSON.stringify(hg(s)),d=F.useRef(!1);return nw(()=>{d.current=!0}),F.useCallback((g,y={})=>{if(vi(d.current,tw),!d.current)return;if(typeof g=="number"){t.go(g);return}let v=dg(g,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Ss([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,o,n])}var xx=F.createContext(null);function Nx(n){let e=F.useContext(Ti).outlet;return e&&F.createElement(xx.Provider,{value:n},e)}function Hc(n,{relative:e}={}){let{matches:t}=F.useContext(Ti),{pathname:s}=bi(),o=JSON.stringify(hg(t));return F.useMemo(()=>dg(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function Cx(n,e){return iw(n,e)}function iw(n,e,t,s,o){_t(Ho(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=F.useContext(Ei),{matches:d}=F.useContext(Ti),m=d[d.length-1],g=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let K=b&&b.path||"";sw(y,!b||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let w=bi(),C;if(e){let K=typeof e=="string"?qo(e):e;_t(v==="/"||K.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${K.pathname}" was given in the \`location\` prop.`),C=K}else C=w;let L=C.pathname||"/",z=L;if(v!=="/"){let K=v.replace(/^\//,"").split("/");z="/"+L.replace(/^\//,"").split("/").slice(K.length).join("/")}let j=Xb(n,{pathname:z});vi(b||j!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),vi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Y=Px(j&&j.map(K=>Object.assign({},K,{params:Object.assign({},g,K.params),pathname:Ss([v,l.encodeLocation?l.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?v:Ss([v,l.encodeLocation?l.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),d,t,s,o);return e&&Y?F.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},Y):Y}function Ix(){let n=Ux(),e=Tx(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=F.createElement(F.Fragment,null,F.createElement("p",null,"💿 Hey developer 👋"),F.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",F.createElement("code",{style:l},"ErrorBoundary")," or"," ",F.createElement("code",{style:l},"errorElement")," prop on your route.")),F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),t?F.createElement("pre",{style:o},t):null,d)}var Dx=F.createElement(Ix,null),jx=class extends F.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?F.createElement(Ti.Provider,{value:this.props.routeContext},F.createElement(fg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ox({routeContext:n,match:e,children:t}){let s=F.useContext(Fo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),F.createElement(Ti.Provider,{value:n},t)}function Px(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,d=t?.errors;if(d!=null){let y=l.findIndex(v=>v.route.id&&d?.[v.route.id]!==void 0);_t(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let m=!1,g=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:b,errors:w}=t,C=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!w||w[v.route.id]===void 0);if(v.route.lazy||C){m=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,v,b)=>{let w,C=!1,L=null,z=null;t&&(w=d&&v.route.id?d[v.route.id]:void 0,L=v.route.errorElement||Dx,m&&(g<0&&b===0?(sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,z=null):g===b&&(C=!0,z=v.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,b+1)),Y=()=>{let K;return w?K=L:C?K=z:v.route.Component?K=F.createElement(v.route.Component,null):v.route.element?K=v.route.element:K=y,F.createElement(Ox,{match:v,routeContext:{outlet:y,matches:j,isDataRoute:t!=null},children:K})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?F.createElement(jx,{location:t.location,revalidation:t.revalidation,component:L,error:w,children:Y(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:s}):Y()},null)}function mg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function kx(n){let e=F.useContext(Fo);return _t(e,mg(n)),e}function Mx(n){let e=F.useContext(bd);return _t(e,mg(n)),e}function Vx(n){let e=F.useContext(Ti);return _t(e,mg(n)),e}function pg(n){let e=Vx(n),t=e.matches[e.matches.length-1];return _t(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Lx(){return pg("useRouteId")}function Ux(){let n=F.useContext(fg),e=Mx("useRouteError"),t=pg("useRouteError");return n!==void 0?n:e.errors?.[t]}function Bx(){let{router:n}=kx("useNavigate"),e=pg("useNavigate"),t=F.useRef(!1);return nw(()=>{t.current=!0}),F.useCallback(async(o,l={})=>{vi(t.current,tw),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var QE={};function sw(n,e,t){!e&&!QE[n]&&(QE[n]=!0,vi(!1,t))}F.memo(zx);function zx({routes:n,future:e,state:t,unstable_onError:s}){return iw(n,void 0,t,s,e)}function Dp({to:n,replace:e,state:t,relative:s}){_t(Ho(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=F.useContext(Ei);vi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=F.useContext(Ti),{pathname:d}=bi(),m=Go(),g=dg(n,hg(l),d,s==="path"),y=JSON.stringify(g);return F.useEffect(()=>{m(JSON.parse(y),{replace:e,state:t,relative:s})},[m,y,s,e,t]),null}function rw(n){return Nx(n.context)}function Ke(n){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function qx({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){_t(!Ho(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=F.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof t=="string"&&(t=qo(t));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:w="default"}=t,C=F.useMemo(()=>{let L=xs(g,d);return L==null?null:{location:{pathname:L,search:y,hash:v,state:b,key:w},navigationType:s}},[d,g,y,v,b,w,s]);return vi(C!=null,`<Router basename="${d}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),C==null?null:F.createElement(Ei.Provider,{value:m},F.createElement(Fc.Provider,{children:e,value:C}))}function Fx({children:n,location:e}){return Cx(jp(n),e)}function jp(n,e=[]){let t=[];return F.Children.forEach(n,(s,o)=>{if(!F.isValidElement(s))return;let l=[...e,o];if(s.type===F.Fragment){t.push.apply(t,jp(s.props.children,l));return}_t(s.type===Ke,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!s.props.index||!s.props.children,"An index route cannot have child routes.");let d={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(d.children=jp(s.props.children,l)),t.push(d)}),t}var zh="get",qh="application/x-www-form-urlencoded";function wd(n){return n!=null&&typeof n.tagName=="string"}function Hx(n){return wd(n)&&n.tagName.toLowerCase()==="button"}function Gx(n){return wd(n)&&n.tagName.toLowerCase()==="form"}function $x(n){return wd(n)&&n.tagName.toLowerCase()==="input"}function Yx(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Kx(n,e){return n.button===0&&(!e||e==="_self")&&!Yx(n)}var Dh=null;function Qx(){if(Dh===null)try{new FormData(document.createElement("form"),0),Dh=!1}catch{Dh=!0}return Dh}var Xx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rp(n){return n!=null&&!Xx.has(n)?(vi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${qh}"`),null):n}function Wx(n,e){let t,s,o,l,d;if(Gx(n)){let m=n.getAttribute("action");s=m?xs(m,e):null,t=n.getAttribute("method")||zh,o=rp(n.getAttribute("enctype"))||qh,l=new FormData(n)}else if(Hx(n)||$x(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||m.getAttribute("action");if(s=g?xs(g,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||zh,o=rp(n.getAttribute("formenctype"))||rp(m.getAttribute("enctype"))||qh,l=new FormData(m,n),!Qx()){let{name:y,type:v,value:b}=n;if(v==="image"){let w=y?`${y}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else y&&l.append(y,b)}}else{if(wd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=zh,s=null,o=qh,d=n}return l&&o==="text/plain"&&(d=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Zx(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&xs(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function Jx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function e1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function t1(n,e,t){let s=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await Jx(l,t);return d.links?d.links():[]}return[]}));return r1(s.flat(1).filter(e1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function XE(n,e,t,s,o,l){let d=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,m=(g,y)=>t[y].pathname!==g.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==g.params["*"];return l==="assets"?e.filter((g,y)=>d(g,y)||m(g,y)):l==="data"?e.filter((g,y)=>{let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(d(g,y)||m(g,y))return!0;if(g.route.shouldRevalidate){let b=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function n1(n,e,{includeHydrateFallback:t}={}){return i1(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function i1(n){return[...new Set(n)]}function s1(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function r1(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let l=JSON.stringify(s1(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function aw(){let n=F.useContext(Fo);return gg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function a1(){let n=F.useContext(bd);return gg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var yg=F.createContext(void 0);yg.displayName="FrameworkContext";function ow(){let n=F.useContext(yg);return gg(n,"You must render this element inside a <HydratedRouter> element"),n}function o1(n,e){let t=F.useContext(yg),[s,o]=F.useState(!1),[l,d]=F.useState(!1),{onFocus:m,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,w=F.useRef(null);F.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let z=Y=>{Y.forEach(K=>{d(K.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[n]),F.useEffect(()=>{if(s){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[s]);let C=()=>{o(!0)},L=()=>{o(!1),d(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:lc(m,C),onBlur:lc(g,L),onMouseEnter:lc(y,C),onMouseLeave:lc(v,L),onTouchStart:lc(b,C)}]:[!1,w,{}]}function lc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function l1({page:n,...e}){let{router:t}=aw(),s=F.useMemo(()=>Xb(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?F.createElement(u1,{page:n,matches:s,...e}):null}function c1(n){let{manifest:e,routeModules:t}=ow(),[s,o]=F.useState([]);return F.useEffect(()=>{let l=!1;return t1(n,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[n,e,t]),s}function u1({page:n,matches:e,...t}){let s=bi(),{manifest:o,routeModules:l}=ow(),{basename:d}=aw(),{loaderData:m,matches:g}=a1(),y=F.useMemo(()=>XE(n,e,g,o,s,"data"),[n,e,g,o,s]),v=F.useMemo(()=>XE(n,e,g,o,s,"assets"),[n,e,g,o,s]),b=F.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let L=new Set,z=!1;if(e.forEach(Y=>{let K=o.routes[Y.route.id];!K||!K.hasLoader||(!y.some(X=>X.route.id===Y.route.id)&&Y.route.id in m&&l[Y.route.id]?.shouldRevalidate||K.hasClientLoader?z=!0:L.add(Y.route.id))}),L.size===0)return[];let j=Zx(n,d,"data");return z&&L.size>0&&j.searchParams.set("_routes",e.filter(Y=>L.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[j.pathname+j.search]},[d,m,s,o,y,e,n,l]),w=F.useMemo(()=>n1(v,o),[v,o]),C=c1(v);return F.createElement(F.Fragment,null,b.map(L=>F.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...t})),w.map(L=>F.createElement("link",{key:L,rel:"modulepreload",href:L,...t})),C.map(({key:L,link:z})=>F.createElement("link",{key:L,nonce:t.nonce,...z})))}function h1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lw&&(window.__reactRouterVersion="7.8.2")}catch{}function d1({basename:n,children:e,window:t}){let s=F.useRef();s.current==null&&(s.current=ZR({window:t,v5Compat:!0}));let o=s.current,[l,d]=F.useState({action:o.action,location:o.location}),m=F.useCallback(g=>{F.startTransition(()=>d(g))},[d]);return F.useLayoutEffect(()=>o.listen(m),[o,m]),F.createElement(qx,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var cw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=F.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:d,state:m,target:g,to:y,preventScrollReset:v,viewTransition:b,...w},C){let{basename:L}=F.useContext(Ei),z=typeof y=="string"&&cw.test(y),j,Y=!1;if(typeof y=="string"&&z&&(j=y,lw))try{let x=new URL(window.location.href),P=y.startsWith("//")?new URL(x.protocol+y):new URL(y),D=xs(P.pathname,L);P.origin===x.origin&&D!=null?y=D+P.search+P.hash:Y=!0}catch{vi(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=Ax(y,{relative:o}),[X,se,ie]=o1(s,w),B=p1(y,{replace:d,state:m,target:g,preventScrollReset:v,relative:o,viewTransition:b});function I(x){e&&e(x),x.defaultPrevented||B(x)}let R=F.createElement("a",{...w,...ie,href:j||K,onClick:Y||l?e:I,ref:h1(C,se),target:g,"data-discover":!z&&t==="render"?"true":void 0});return X&&!z?F.createElement(F.Fragment,null,R,F.createElement(l1,{page:K})):R});In.displayName="Link";var ht=F.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:d,viewTransition:m,children:g,...y},v){let b=Hc(d,{relative:y.relative}),w=bi(),C=F.useContext(bd),{navigator:L,basename:z}=F.useContext(Ei),j=C!=null&&E1(b)&&m===!0,Y=L.encodeLocation?L.encodeLocation(b).pathname:b.pathname,K=w.pathname,X=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;t||(K=K.toLowerCase(),X=X?X.toLowerCase():null,Y=Y.toLowerCase()),X&&z&&(X=xs(X,z)||X);const se=Y!=="/"&&Y.endsWith("/")?Y.length-1:Y.length;let ie=K===Y||!o&&K.startsWith(Y)&&K.charAt(se)==="/",B=X!=null&&(X===Y||!o&&X.startsWith(Y)&&X.charAt(Y.length)==="/"),I={isActive:ie,isPending:B,isTransitioning:j},R=ie?e:void 0,x;typeof s=="function"?x=s(I):x=[s,ie?"active":null,B?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let P=typeof l=="function"?l(I):l;return F.createElement(In,{...y,"aria-current":R,className:x,ref:v,style:P,to:d,viewTransition:m},typeof g=="function"?g(I):g)});ht.displayName="NavLink";var f1=F.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:d=zh,action:m,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:b,...w},C)=>{let L=v1(),z=_1(m,{relative:y}),j=d.toLowerCase()==="get"?"get":"post",Y=typeof m=="string"&&cw.test(m),K=X=>{if(g&&g(X),X.defaultPrevented)return;X.preventDefault();let se=X.nativeEvent.submitter,ie=se?.getAttribute("formmethod")||d;L(se||X.currentTarget,{fetcherKey:e,method:ie,navigate:t,replace:o,state:l,relative:y,preventScrollReset:v,viewTransition:b})};return F.createElement("form",{ref:C,method:j,action:z,onSubmit:s?g:K,...w,"data-discover":!Y&&n==="render"?"true":void 0})});f1.displayName="Form";function m1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uw(n){let e=F.useContext(Fo);return _t(e,m1(n)),e}function p1(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:d}={}){let m=Go(),g=bi(),y=Hc(n,{relative:l});return F.useCallback(v=>{if(Kx(v,e)){v.preventDefault();let b=t!==void 0?t:Ic(g)===Ic(y);m(n,{replace:b,state:s,preventScrollReset:o,relative:l,viewTransition:d})}},[g,m,y,t,s,e,n,o,l,d])}var g1=0,y1=()=>`__${String(++g1)}__`;function v1(){let{router:n}=uw("useSubmit"),{basename:e}=F.useContext(Ei),t=Lx();return F.useCallback(async(s,o={})=>{let{action:l,method:d,encType:m,formData:g,body:y}=Wx(s,e);if(o.navigate===!1){let v=o.fetcherKey||y1();await n.fetch(v,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function _1(n,{relative:e}={}){let{basename:t}=F.useContext(Ei),s=F.useContext(Ti);_t(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Hc(n||".",{relative:e})},d=bi();if(n==null){l.search=d.search;let m=new URLSearchParams(l.search),g=m.getAll("index");if(g.some(v=>v==="")){m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();l.search=v?`?${v}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ss([t,l.pathname])),Ic(l)}function E1(n,{relative:e}={}){let t=F.useContext(ew);_t(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=uw("useViewTransitionState"),o=Hc(n,{relative:e});if(!t.isTransitioning)return!1;let l=xs(t.currentLocation.pathname,s)||t.currentLocation.pathname,d=xs(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Jh(o.pathname,d)!=null||Jh(o.pathname,l)!=null}const T1="/mariachis-uclatlan/assets/juliofrenk-xh5a58GC.jpg",b1="/mariachis-uclatlan/assets/brandonPhoto-BqVCcDZm.jpg",w1="/mariachis-uclatlan/assets/rosebowl25-BWtiugWu.jpg",S1=[T1,b1,w1];function A1({images:n=S1,autoPlayMs:e=5e3,showIndicators:t=!0,aspectRatio:s="16/9",className:o=""}){const[l,d]=F.useState(0),m=F.useRef(null),g=F.useRef(null),y=F.useRef(!1),v=F.useRef(null),b=F.useRef(0),w=n.length,C=F.useCallback(se=>{d((se%w+w)%w)},[w]),L=F.useCallback(()=>C(l+1),[C,l]),z=F.useCallback(()=>C(l-1),[C,l]);F.useEffect(()=>{const se=ie=>{ie.key==="ArrowRight"&&L(),ie.key==="ArrowLeft"&&z()};return window.addEventListener("keydown",se),()=>window.removeEventListener("keydown",se)},[L,z]),F.useEffect(()=>{if(!e)return;const se=()=>{g.current!==null&&window.clearInterval(g.current),!y.current&&!document.hidden&&(g.current=window.setInterval(()=>{d(I=>(I+1)%w)},e))},ie=()=>{g.current!==null&&window.clearInterval(g.current),g.current=null};se();const B=()=>document.hidden?ie():se();return document.addEventListener("visibilitychange",B),()=>{document.removeEventListener("visibilitychange",B),ie()}},[e,w]);const j=se=>{v.current=se.touches[0].clientX,b.current=0},Y=se=>{if(v.current!==null&&(b.current=se.touches[0].clientX-v.current,m.current)){const ie=b.current/m.current.clientWidth*100;m.current.style.transition="none",m.current.style.transform=`translateX(calc(${-l*100}% + ${ie}%))`}},K=()=>{m.current&&(m.current.style.transition="");const se=b.current;v.current=null,b.current=0,Math.abs(se)>40?se<0?L():z():m.current&&(m.current.style.transform=`translateX(${-l*100}%)`)},X=F.useMemo(()=>n.map((se,ie)=>u.jsx("button",{"aria-label":`Go to slide ${ie+1}`,className:`carousel-indicator ${ie===l?"active":""}`,onClick:()=>C(ie)},ie)),[n,l,C]);return u.jsxs("div",{className:`carousel ${o}`,style:{"--carousel-aspect":s},onMouseEnter:()=>y.current=!0,onMouseLeave:()=>y.current=!1,"aria-roledescription":"carousel",children:[u.jsx("div",{className:"carousel-viewport",onTouchStart:j,onTouchMove:Y,onTouchEnd:K,children:u.jsx("div",{ref:m,className:"carousel-track",style:{transform:`translateX(${-l*100}%)`},children:n.map((se,ie)=>u.jsxs("div",{className:"carousel-slide",role:"group","aria-roledescription":"slide","aria-label":`${ie+1} of ${w}`,children:[u.jsx("img",{className:"carousel-image",src:se,loading:"lazy",alt:`Slide ${ie+1}`}),u.jsx("div",{className:"carousel-gradient","aria-hidden":"true"})]},ie))})}),u.jsx("button",{className:"carousel-button prev",onClick:z,"aria-label":"Previous slide",children:"‹"}),u.jsx("button",{className:"carousel-button next",onClick:L,"aria-label":"Next slide",children:"›"}),t&&u.jsx("div",{className:"carousel-indicators",role:"tablist","aria-label":"Slide indicators",children:X})]})}const WE=()=>u.jsxs("section",{className:"home stack",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{children:"Welcome to Mariachi de Uclatlán"}),u.jsx("p",{children:"Mariachi de Uclatlán is a student-led musical ensemble at UCLA dedicated to preserving, celebrating, and innovating the traditions of mariachi music. Our group provides students from diverse academic and cultural backgrounds with the opportunity to share the beauty of this art form with the UCLA community and beyond."}),u.jsx("p",{children:"As part of our mission, we honor the roots of Mexican music while bringing it into contemporary spaces. From classrooms to grand stages, Mariachi de Uclatlán fosters a spirit of community, cultural pride, and artistic excellence. Our members balance their roles as students and performers, keeping alive the traditions passed down through generations."}),u.jsx("p",{children:"Alongside our musicians, we are proud to collaborate with UCLA’s Ballet Folklórico, whose dancers bring vibrant movement and color to our performances. Together, music and dance tell stories that embody the energy and passion of Mexican culture, creating a complete and unforgettable experience for audiences."}),u.jsx("p",{children:"Founded in 1961, Mariachi de Uclatlán holds the distinction of being one of the first collegiate mariachi ensembles in the United States. Over six decades, we have built a legacy of performances, community outreach, and cultural preservation. We continue to grow as a family of students dedicated to sharing this living tradition with future generations. ¡Viva el mariachi!"})]}),u.jsx(A1,{})]});function R1(){return u.jsxs("div",{className:"about-page",children:[u.jsx("h1",{children:"About Us"}),u.jsx("p",{children:"Welcome to Mariachi de Uclatlán! We are UCLA's premier mariachi ensemble dedicated to preserving the rich traditions of Mexican music and culture. Founded in 1961, our ensemble has a long history of excellence and passion for mariachi music."}),u.jsx("h2",{children:"Watch a Recent Performance"}),u.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,marginBottom:"2rem"},children:u.jsx("iframe",{src:"https://www.youtube.com/embed/PVT9JTaZokk?start=6720",title:"Mariachi de Uclatlán Performance",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),u.jsx("h2",{children:"Our History"}),u.jsx("p",{children:"Mariachi de Uclatlán was established to provide students with an opportunity to experience and perform traditional Mexican music while also promoting cultural awareness. Over the years, we have participated in numerous events and competitions, showcasing the talent and dedication of our members."})]})}const x1=()=>u.jsxs("section",{className:"contact-page",children:[u.jsx("h1",{children:"Contact Us"}),u.jsxs("p",{className:"contact-intro",children:["Email us at"," ",u.jsx("a",{href:"mailto:uclatlan@ucla.edu",className:"contact-link",children:"uclatlan@ucla.edu"})," ","or choose an option below:"]}),u.jsxs("div",{className:"contact-actions",children:[u.jsx(In,{to:"/hire-us",className:"cta-button",children:"Hiring"}),u.jsx(In,{to:"/book-us",className:"cta-button",children:"Performance Inquiry"}),u.jsx(In,{to:"/join",className:"cta-button",children:"How to Join Our Group"}),u.jsx(In,{to:"/contact/form",className:"cta-button",children:"General Questions"})]})]}),N1=()=>{};var ZE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},C1=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],d=n[t++],m=n[t++],g=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],d=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],d=o+1<n.length,m=d?n[o+1]:0,g=o+2<n.length,y=g?n[o+2]:0,v=l>>2,b=(l&3)<<4|m>>4;let w=(m&15)<<2|y>>6,C=y&63;g||(C=64,d||(w=64)),s.push(t[v],t[b],t[w],t[C])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):C1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],m=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const b=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||m==null||y==null||b==null)throw new I1;const w=l<<2|m>>4;if(s.push(w),y!==64){const C=m<<4&240|y>>2;if(s.push(C),b!==64){const L=y<<6&192|b;s.push(L)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class I1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D1=function(n){const e=hw(n);return dw.encodeByteArray(e,!0)},ed=function(n){return D1(n).replace(/\./g,"")},fw=function(n){try{return dw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=()=>j1().__FIREBASE_DEFAULTS__,P1=()=>{if(typeof process>"u"||typeof ZE>"u")return;const n=ZE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&fw(n[1]);return e&&JSON.parse(e)},Sd=()=>{try{return N1()||O1()||P1()||k1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mw=n=>Sd()?.emulatorHosts?.[n],vg=n=>{const e=mw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},pw=()=>Sd()?.config,gw=n=>Sd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ps(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ad(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ed(JSON.stringify(t)),ed(JSON.stringify(d)),""].join(".")}const Ec={};function V1(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?n.emulator.push(e):n.prod.push(e);return n}function L1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let JE=!1;function Rd(n,e){if(typeof window>"u"||typeof document>"u"||!Ps(window.location.host)||Ec[n]===e||Ec[n]||JE)return;Ec[n]=e;function t(w){return`__firebase__banner__${w}`}const s="__firebase__banner",l=V1().prod.length>0;function d(){const w=document.getElementById(s);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,C){w.setAttribute("width","24"),w.setAttribute("id",C),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{JE=!0,d()},w}function v(w,C){w.setAttribute("id",C),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=L1(s),C=t("text"),L=document.getElementById(C)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),Y=t("preprendIcon"),K=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const X=w.element;m(X),v(j,z);const se=y();g(K,Y),X.append(K,L,j,se),document.body.appendChild(X)}l?(L.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,L.innerText="Preview backend running in this workspace."),L.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function B1(){const n=Sd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H1(){const n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function G1(){return!B1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $1(){try{return typeof indexedDB=="object"}catch{return!1}}function Y1(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="FirebaseError";class Qi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=K1,Object.setPrototypeOf(this,Qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?Q1(l,s):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Qi(o,m,s)}}function Q1(n,e){return n.replace(X1,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const X1=/\{\$([^}]+)}/g;function W1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ta(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],d=e[o];if(eT(l)&&eT(d)){if(!Ta(l,d))return!1}else if(l!==d)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function eT(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $o(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function mc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Z1(n,e){const t=new J1(n,e);return t.subscribe.bind(t)}class J1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");eN(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ap),o.error===void 0&&(o.error=ap),o.complete===void 0&&(o.complete=ap);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eN(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ap(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xe(n){return n&&n._delegate?n._delegate:n}class Ns{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tN{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new M1;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iN(e))try{this.getOrInitializeService({instanceIdentifier:pa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=pa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=pa){return this.instances.has(e)}getOptions(e=pa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);s===m&&d.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:nN(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=pa){return this.component?this.component.multipleInstances?e:pa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nN(n){return n===pa?void 0:n}function iN(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tN(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const rN={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},aN=Be.INFO,oN={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},lN=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=oN[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _g{constructor(e){this.name=e,this._logLevel=aN,this._logHandler=lN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const cN=(n,e)=>e.some(t=>n instanceof t);let tT,nT;function uN(){return tT||(tT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hN(){return nT||(nT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vw=new WeakMap,Op=new WeakMap,_w=new WeakMap,op=new WeakMap,Eg=new WeakMap;function dN(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(_r(n.result)),o()},d=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&vw.set(t,n)}).catch(()=>{}),Eg.set(e,n),e}function fN(n){if(Op.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});Op.set(n,e)}let Pp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_w.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return _r(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mN(n){Pp=n(Pp)}function pN(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(lp(this),e,...t);return _w.set(s,e.sort?e.sort():[e]),_r(s)}:hN().includes(n)?function(...e){return n.apply(lp(this),e),_r(vw.get(this))}:function(...e){return _r(n.apply(lp(this),e))}}function gN(n){return typeof n=="function"?pN(n):(n instanceof IDBTransaction&&fN(n),cN(n,uN())?new Proxy(n,Pp):n)}function _r(n){if(n instanceof IDBRequest)return dN(n);if(op.has(n))return op.get(n);const e=gN(n);return e!==n&&(op.set(n,e),Eg.set(e,n)),e}const lp=n=>Eg.get(n);function yN(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const d=indexedDB.open(n,e),m=_r(d);return s&&d.addEventListener("upgradeneeded",g=>{s(_r(d.result),g.oldVersion,g.newVersion,_r(d.transaction),g)}),t&&d.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),m.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const vN=["get","getKey","getAll","getAllKeys","count"],_N=["put","add","delete","clear"],cp=new Map;function iT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cp.get(e))return cp.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=_N.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vN.includes(t)))return;const l=async function(d,...m){const g=this.transaction(d,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&g.done]))[0]};return cp.set(e,l),l}mN(n=>({...n,get:(e,t,s)=>iT(e,t)||n.get(e,t,s),has:(e,t)=>!!iT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TN(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function TN(n){return n.getComponent()?.type==="VERSION"}const kp="@firebase/app",sT="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cs=new _g("@firebase/app"),bN="@firebase/app-compat",wN="@firebase/analytics-compat",SN="@firebase/analytics",AN="@firebase/app-check-compat",RN="@firebase/app-check",xN="@firebase/auth",NN="@firebase/auth-compat",CN="@firebase/database",IN="@firebase/data-connect",DN="@firebase/database-compat",jN="@firebase/functions",ON="@firebase/functions-compat",PN="@firebase/installations",kN="@firebase/installations-compat",MN="@firebase/messaging",VN="@firebase/messaging-compat",LN="@firebase/performance",UN="@firebase/performance-compat",BN="@firebase/remote-config",zN="@firebase/remote-config-compat",qN="@firebase/storage",FN="@firebase/storage-compat",HN="@firebase/firestore",GN="@firebase/ai",$N="@firebase/firestore-compat",YN="firebase",KN="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp="[DEFAULT]",QN={[kp]:"fire-core",[bN]:"fire-core-compat",[SN]:"fire-analytics",[wN]:"fire-analytics-compat",[RN]:"fire-app-check",[AN]:"fire-app-check-compat",[xN]:"fire-auth",[NN]:"fire-auth-compat",[CN]:"fire-rtdb",[IN]:"fire-data-connect",[DN]:"fire-rtdb-compat",[jN]:"fire-fn",[ON]:"fire-fn-compat",[PN]:"fire-iid",[kN]:"fire-iid-compat",[MN]:"fire-fcm",[VN]:"fire-fcm-compat",[LN]:"fire-perf",[UN]:"fire-perf-compat",[BN]:"fire-rc",[zN]:"fire-rc-compat",[qN]:"fire-gcs",[FN]:"fire-gcs-compat",[HN]:"fire-fst",[$N]:"fire-fst-compat",[GN]:"fire-vertex","fire-js":"fire-js",[YN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,XN=new Map,Vp=new Map;function rT(n,e){try{n.container.addComponent(e)}catch(t){Cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function wr(n){const e=n.name;if(Vp.has(e))return Cs.debug(`There were multiple attempts to register component ${e}.`),!1;Vp.set(e,n);for(const t of Dc.values())rT(t,n);for(const t of XN.values())rT(t,n);return!0}function $c(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function yn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Er=new Gc("app","Firebase",WN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=KN;function Ew(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Mp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Er.create("bad-app-name",{appName:String(o)});if(t||(t=pw()),!t)throw Er.create("no-options");const l=Dc.get(o);if(l){if(Ta(t,l.options)&&Ta(s,l.config))return l;throw Er.create("duplicate-app",{appName:o})}const d=new sN(o);for(const g of Vp.values())d.addComponent(g);const m=new ZN(t,s,d);return Dc.set(o,m),m}function xd(n=Mp){const e=Dc.get(n);if(!e&&n===Mp&&pw())return Ew();if(!e)throw Er.create("no-app",{appName:n});return e}function aT(){return Array.from(Dc.values())}function ci(n,e,t){let s=QN[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cs.warn(d.join(" "));return}wr(new Ns(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN="firebase-heartbeat-database",eC=1,jc="firebase-heartbeat-store";let up=null;function Tw(){return up||(up=yN(JN,eC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Er.create("idb-open",{originalErrorMessage:n.message})})),up}async function tC(n){try{const t=(await Tw()).transaction(jc),s=await t.objectStore(jc).get(bw(n));return await t.done,s}catch(e){if(e instanceof Qi)Cs.warn(e.message);else{const t=Er.create("idb-get",{originalErrorMessage:e?.message});Cs.warn(t.message)}}}async function oT(n,e){try{const s=(await Tw()).transaction(jc,"readwrite");await s.objectStore(jc).put(e,bw(n)),await s.done}catch(t){if(t instanceof Qi)Cs.warn(t.message);else{const s=Er.create("idb-set",{originalErrorMessage:t?.message});Cs.warn(s.message)}}}function bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1024,iC=30;class sC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=lT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>iC){const o=oC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Cs.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=lT(),{heartbeatsToSend:t,unsentEntries:s}=rC(this._heartbeatsCache.heartbeats),o=ed(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Cs.warn(e),""}}}function lT(){return new Date().toISOString().substring(0,10)}function rC(n,e=nC){const t=[];let s=n.slice();for(const o of n){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),cT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),cT(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class aC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $1()?Y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tC(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return oT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return oT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cT(n){return ed(JSON.stringify({version:2,heartbeats:n})).length}function oC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(n){wr(new Ns("platform-logger",e=>new EN(e),"PRIVATE")),wr(new Ns("heartbeat",e=>new sC(e),"PRIVATE")),ci(kp,sT,n),ci(kp,sT,"esm2020"),ci("fire-js","")}lC("");function ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cC=ww,Sw=new Gc("auth","Firebase",ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td=new _g("@firebase/auth");function uC(n,...e){td.logLevel<=Be.WARN&&td.warn(`Auth (${Na}): ${n}`,...e)}function Fh(n,...e){td.logLevel<=Be.ERROR&&td.error(`Auth (${Na}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(n,...e){throw bg(n,...e)}function jn(n,...e){return bg(n,...e)}function Tg(n,e,t){const s={...cC(),[e]:t};return new Gc("auth","Firebase",s).create(e,{appName:n.name})}function Fi(n){return Tg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hC(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ui(n,"argument-error"),Tg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function bg(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Sw.create(n,...e)}function ve(n,e,...t){if(!n)throw bg(e,...t)}function bs(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Fh(e),new Error(e)}function Is(n,e){n||bs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lp(){return typeof self<"u"&&self.location?.href||""}function Aw(){return uT()==="http:"||uT()==="https:"}function uT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Aw()||q1()||"connection"in navigator)?navigator.onLine:!0}function fC(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Is(t>e,"Short delay should be less than long delay!"),this.isMobile=U1()||F1()}get(){return dC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wg(n,e){Is(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;bs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;bs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;bs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gC=new Yc(3e4,6e4);function kn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Mn(n,e,t,s,o={}){return xw(n,o,async()=>{let l={},d={};s&&(e==="GET"?d=s:l={body:JSON.stringify(s)});const m=$o({key:n.config.apiKey,...d}).slice(1),g=await n._getAdditionalHeaders();g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:g,...l};return z1()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(y.credentials="include"),Rw.fetch()(await Nw(n,n.config.apiHost,t,m),y)})}async function xw(n,e,t){n._canInitEmulator=!1;const s={...mC,...e};try{const o=new vC(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw pc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[g,y]=m.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(n,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw pc(n,"email-already-in-use",d);if(g==="USER_DISABLED")throw pc(n,"user-disabled",d);const v=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw Tg(n,v,y);ui(n,v)}}catch(o){if(o instanceof Qi)throw o;ui(n,"network-request-failed",{message:String(o)})}}async function Dr(n,e,t,s,o={}){const l=await Mn(n,e,t,s,o);return"mfaPendingCredential"in l&&ui(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Nw(n,e,t,s){const o=`${e}${t}?${s}`,l=n,d=l.config.emulator?wg(n.config,o):`${n.config.apiScheme}://${o}`;return pC.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function yC(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(jn(this.auth,"network-request-failed")),gC.get())})}}function pc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=jn(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(n){return n!==void 0&&n.getResponse!==void 0}function dT(n){return n!==void 0&&n.enterprise!==void 0}class Cw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yC(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(n){return(await Mn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Iw(n,e){return Mn(n,"GET","/v2/recaptchaConfig",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EC(n,e){return Mn(n,"POST","/v1/accounts:delete",e)}async function nd(n,e){return Mn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dw(n,e=!1){const t=Xe(n),s=await t.getIdToken(e),o=Sg(s);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:s,authTime:Tc(hp(o.auth_time)),issuedAtTime:Tc(hp(o.iat)),expirationTime:Tc(hp(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function hp(n){return Number(n)*1e3}function Sg(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const o=fw(t);return o?JSON.parse(o):(Fh("Failed to decode base64 JWT payload"),null)}catch(o){return Fh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function fT(n){const e=Sg(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ba(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof Qi&&TC(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function TC({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function id(n){const e=n.auth,t=await n.getIdToken(),s=await ba(n,nd(e,{idToken:t}));ve(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?jw(o.providerUserInfo):[],d=SC(n.providerData,l),m=n.isAnonymous,g=!(n.email&&o.passwordHash)&&!d?.length,y=m?g:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Up(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function wC(n){const e=Xe(n);await id(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SC(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function jw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(n,e){const t=await xw(n,{},async()=>{const s=$o({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,d=await Nw(n,o,"/v1/token",`key=${l}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:m,body:s};return n.emulatorConfig&&Ps(n.emulatorConfig.host)&&(g.credentials="include"),Rw.fetch()(d,g)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RC(n,e){return Mn(n,"POST","/v2/accounts:revokeToken",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):fT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=fT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await AC(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,d=new Io;return s&&(ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(ve(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return bs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new bC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Up(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ba(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Dw(this,e)}reload(){return wC(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await id(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await ba(this,EC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,g=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:C,providerData:L,stsTokenManager:z}=t;ve(b&&z,e,"internal-error");const j=Io.fromJSON(this.name,z);ve(typeof b=="string",e,"internal-error"),dr(s,e.name),dr(o,e.name),ve(typeof w=="boolean",e,"internal-error"),ve(typeof C=="boolean",e,"internal-error"),dr(l,e.name),dr(d,e.name),dr(m,e.name),dr(g,e.name),dr(y,e.name),dr(v,e.name);const Y=new yi({uid:b,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:C,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:y,lastLoginAt:v});return L&&Array.isArray(L)&&(Y.providerData=L.map(K=>({...K}))),g&&(Y._redirectEventId=g),Y}static async _fromIdTokenResponse(e,t,s=!1){const o=new Io;o.updateFromServerResponse(t);const l=new yi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await id(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?jw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new Io;m.updateFromIdToken(s);const g=new yi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Up(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(g,y),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT=new Map;function ws(n){Is(n instanceof Function,"Expected a class definition");let e=mT.get(n);return e?(Is(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,mT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ow.type="NONE";const pT=Ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(n,e,t){return`firebase:${n}:${e}:${t}`}class Do{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Hh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Hh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await nd(this.auth,{idToken:e}).catch(()=>{});return t?yi._fromGetAccountInfoResponse(this.auth,t,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Do(ws(pT),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||ws(pT);const d=Hh(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(d);if(v){let b;if(typeof v=="string"){const w=await nd(e,{idToken:v}).catch(()=>{});if(!w)break;b=await yi._fromGetAccountInfoResponse(e,w,v)}else b=yi._fromJSON(e,v);y!==l&&(m=b),l=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!g.length?new Do(l,e,s):(l=g[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(d)}catch{}})),new Do(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uw(e))return"Blackberry";if(Bw(e))return"Webos";if(kw(e))return"Safari";if((e.includes("chrome/")||Mw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function Pw(n=_n()){return/firefox\//i.test(n)}function kw(n=_n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mw(n=_n()){return/crios\//i.test(n)}function Vw(n=_n()){return/iemobile/i.test(n)}function Lw(n=_n()){return/android/i.test(n)}function Uw(n=_n()){return/blackberry/i.test(n)}function Bw(n=_n()){return/webos/i.test(n)}function Ag(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xC(n=_n()){return Ag(n)&&!!window.navigator?.standalone}function NC(){return H1()&&document.documentMode===10}function zw(n=_n()){return Ag(n)||Lw(n)||Bw(n)||Uw(n)||/windows phone/i.test(n)||Vw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,e=[]){let t;switch(n){case"Browser":t=gT(_n());break;case"Worker":t=`${gT(_n())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Na}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((d,m)=>{try{const g=e(l);d(g)}catch(g){m(g)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(n,e={}){return Mn(n,"GET","/v2/passwordPolicy",kn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC=6;class jC{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new yT(this),this.idTokenSubscription=new yT(this),this.beforeStateQueue=new CC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ws(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Do.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await nd(this,{idToken:e}),s=await yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await id(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(Fi(this));const t=e?Xe(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ws(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IC(this),t=new jC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await RC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ws(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await Do.create(this,[ws(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const g=e.addObserver(t,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(t);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function wi(n){return Xe(n)}class yT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z1(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PC(n){Kc=n}function Rg(n){return Kc.loadJS(n)}function kC(){return Kc.recaptchaV2Script}function MC(){return Kc.recaptchaEnterpriseScript}function VC(){return Kc.gapiScript}function Fw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=500,UC=6e4,jh=1e12;class BC{constructor(e){this.auth=e,this.counter=jh,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new FC(e,this.auth.name,t||{})),this.counter++,s}reset(e){const t=e||jh;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||jh;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||jh;return this._widgets.get(t)?.execute(),""}}class zC{constructor(){this.enterprise=new qC}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qC{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class FC{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ve(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=HC(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},UC)},LC))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function HC(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<n;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const GC="recaptcha-enterprise",bc="NO_RECAPTCHA";class Hw{constructor(e){this.type=GC,this.auth=wi(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{Iw(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new Cw(g);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,d(y.siteKey)}}).catch(g=>{m(g)})})}function o(l,d,m){const g=window.grecaptcha;dT(g)?g.enterprise.ready(()=>{g.enterprise.execute(l,{action:e}).then(y=>{d(y)}).catch(()=>{d(bc)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zC().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{s(this.auth).then(m=>{if(!t&&dT(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let g=MC();g.length!==0&&(g+=m),Rg(g).then(()=>{o(m,l,d)}).catch(y=>{d(y)})}}).catch(m=>{d(m)})})}}async function cc(n,e,t,s=!1,o=!1){const l=new Hw(n);let d;if(o)d=bc;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const g=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const g=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function jo(n,e,t,s,o){if(o==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await cc(n,e,t,t==="getOobCode");return s(n,l)}else return s(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await cc(n,e,t,t==="getOobCode");return s(n,d)}else return Promise.reject(l)});else if(o==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await cc(n,e,t);return s(n,l).catch(async d=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await cc(n,e,t,!1,!0);return s(n,m)}return Promise.reject(d)})}else{const l=await cc(n,e,t,!1,!0);return s(n,l)}else return Promise.reject(o+" provider is not supported.")}async function $C(n){const e=wi(n),t=await Iw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new Cw(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new Hw(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YC(n,e){const t=$c(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Ta(l,e??{}))return o;ui(o,"already-initialized")}return t.initialize({options:e})}function KC(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(ws);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function QC(n,e,t){const s=wi(n);ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=Gw(e),{host:d,port:m}=XC(e),g=m===null?"":`:${m}`,y={url:`${l}//${d}${g}/`},v=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ve(Ta(y,s.config.emulator)&&Ta(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Ps(d)?(Ad(`${l}//${d}${g}`),Rd("Auth",!0)):WC()}function Gw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XC(n){const e=Gw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:vT(s.substr(l.length+1))}}else{const[l,d]=s.split(":");return{host:l,port:vT(d)}}}function vT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function WC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return bs("not implemented")}_getIdTokenResponse(e){return bs("not implemented")}_linkToIdToken(e,t){return bs("not implemented")}_getReauthenticationResolver(e){return bs("not implemented")}}async function ZC(n,e){return Mn(n,"POST","/v1/accounts:update",e)}async function JC(n,e){return Mn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(n,e){return Dr(n,"POST","/v1/accounts:signInWithPassword",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e){return Dr(n,"POST","/v1/accounts:signInWithEmailLink",kn(n,e))}async function nI(n,e){return Dr(n,"POST","/v1/accounts:signInWithEmailLink",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Nd{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Oc(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jo(e,t,"signInWithPassword",eI,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tI(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return jo(e,s,"signUpPassword",JC,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nI(e,{idToken:t,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return Dr(n,"POST","/v1/accounts:signInWithIdp",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="http://localhost";class wa extends Nd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new wa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ui("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const d=new wa(s,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:iI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=$o(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(n,e){return Mn(n,"POST","/v1/accounts:sendVerificationCode",kn(n,e))}async function sI(n,e){return Dr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,e))}async function rI(n,e){const t=await Dr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,e));if(t.temporaryProof)throw pc(n,"account-exists-with-different-credential",t);return t}const aI={USER_NOT_FOUND:"user-not-found"};async function oI(n,e){const t={...e,operation:"REAUTH"};return Dr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,t),aI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Nd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new wc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new wc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return sI(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return rI(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return oI(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l}=e;return!s&&!t&&!o&&!l?null:new wc({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cI(n){const e=fc(mc(n)).link,t=e?fc(mc(e)).deep_link_id:null,s=fc(mc(n)).deep_link_id;return(s?fc(mc(s)).link:null)||s||t||e||n}class xg{constructor(e){const t=fc(mc(e)),s=t.apiKey??null,o=t.oobCode??null,l=lI(t.mode??null);ve(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cI(e);try{return new xg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(){this.providerId=Ca.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=xg.parseLink(t);return ve(s,"argument-error"),Oc._fromEmailAndCode(e,s.code,s.tenantId)}}Ca.PROVIDER_ID="password";Ca.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ca.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends Ng{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends Qc{constructor(){super("facebook.com")}static credential(e){return wa._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return wa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return zi.credential(t,s)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr extends Qc{constructor(){super("github.com")}static credential(e){return wa._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return pr.credential(e.oauthAccessToken)}catch{return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com";pr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends Qc{constructor(){super("twitter.com")}static credential(e,t){return wa._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return gr.credential(t,s)}catch{return null}}}gr.TWITTER_SIGN_IN_METHOD="twitter.com";gr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n,e){return Dr(n,"POST","/v1/accounts:signUp",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await yi._fromIdTokenResponse(e,s,o),d=ET(s);return new Sa({user:l,providerId:d,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ET(s);return new Sa({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ET(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Qi{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,sd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new sd(e,t,s,o)}}function $w(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?sd._fromErrorAndOperation(n,l,e,s):l})}async function hI(n,e,t=!1){const s=await ba(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Sa._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(n,e,t=!1){const{auth:s}=n;if(yn(s.app))return Promise.reject(Fi(s));const o="reauthenticate";try{const l=await ba(n,$w(s,o,e,n),t);ve(l.idToken,s,"internal-error");const d=Sg(l.idToken);ve(d,s,"internal-error");const{sub:m}=d;return ve(n.uid===m,s,"user-mismatch"),Sa._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&ui(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(n,e,t=!1){if(yn(n.app))return Promise.reject(Fi(n));const s="signIn",o=await $w(n,s,e),l=await Sa._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function Qw(n,e){return Kw(wi(n),e)}async function dI(n,e){return Yw(Xe(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(n){const e=wi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fI(n,e,t){if(yn(n.app))return Promise.reject(Fi(n));const s=wi(n),d=await jo(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uI,"EMAIL_PASSWORD_PROVIDER").catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&Xw(n),g}),m=await Sa._fromIdTokenResponse(s,"signIn",d);return await s._updateCurrentUser(m.user),m}function mI(n,e,t){return yn(n.app)?Promise.reject(Fi(n)):Qw(Xe(n),Ca.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&Xw(n),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(n,e){return Mn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=Xe(n),l={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await ba(s,pI(s.auth,l));s.displayName=d.displayName||null,s.photoURL=d.photoUrl||null;const m=s.providerData.find(({providerId:g})=>g==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(d)}function yI(n,e){return vI(Xe(n),null,e)}async function vI(n,e,t){const{auth:s}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const d=await ba(n,ZC(s,l));await n._updateTokensIfNecessary(d,!0)}function _I(n,e,t,s){return Xe(n).onIdTokenChanged(e,t,s)}function EI(n,e,t){return Xe(n).beforeAuthStateChanged(e,t)}function Xc(n,e,t,s){return Xe(n).onAuthStateChanged(e,t,s)}function TI(n){return Xe(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n,e){return Mn(n,"POST","/v2/accounts/mfaEnrollment:start",kn(n,e))}const rd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(rd,"1"),this.storage.removeItem(rd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e3,wI=10;class Zw extends Ww{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,g)=>{this.notifyListeners(d,g)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!t&&this.localCache[s]===d||this.notifyListeners(s,d)},l=this.storage.getItem(s);NC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wI):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zw.type="LOCAL";const SI=Zw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Ww{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jw.type="SESSION";const e0=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Cd(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(d).map(async y=>y(t.origin,l)),g=await AI(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,g)=>{const y=Cg("",20);o.port1.start();const v=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(w.data.response);break;default:clearTimeout(v),clearTimeout(l),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function xI(n){Lt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function NI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CI(){return navigator?.serviceWorker?.controller||null}function II(){return Ig()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebaseLocalStorageDb",DI=1,ad="firebaseLocalStorage",n0="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Id(n,e){return n.transaction([ad],e?"readwrite":"readonly").objectStore(ad)}function jI(){const n=indexedDB.deleteDatabase(t0);return new Wc(n).toPromise()}function Bp(){const n=indexedDB.open(t0,DI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ad,{keyPath:n0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ad)?e(s):(s.close(),await jI(),e(await Bp()))})})}async function bT(n,e,t){const s=Id(n,!0).put({[n0]:e,value:t});return new Wc(s).toPromise()}async function OI(n,e){const t=Id(n,!1).get(e),s=await new Wc(t).toPromise();return s===void 0?null:s.value}function wT(n,e){const t=Id(n,!0).delete(e);return new Wc(t).toPromise()}const PI=800,kI=3;class i0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>kI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ig()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cd._getInstance(II()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await NI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bp();return await bT(e,rd,"1"),await wT(e,rd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>bT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>OI(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>wT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Id(o,!1).getAll();return new Wc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i0.type="LOCAL";const MI=i0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(n,e){return Mn(n,"POST","/v2/accounts/mfaSignIn:start",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=Fw("rcb"),VI=new Yc(3e4,6e4);class LI{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lt().grecaptcha?.render}load(e,t=""){return ve(UI(t),e,"argument-error"),this.shouldResolveImmediately(t)&&hT(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((s,o)=>{const l=Lt().setTimeout(()=>{o(jn(e,"network-request-failed"))},VI.get());Lt()[dp]=()=>{Lt().clearTimeout(l),delete Lt()[dp];const m=Lt().grecaptcha;if(!m||!hT(m)){o(jn(e,"internal-error"));return}const g=m.render;m.render=(y,v)=>{const b=g(y,v);return this.counter++,b},this.hostLanguage=t,s(m)};const d=`${kC()}?${$o({onload:dp,render:"explicit",hl:t})}`;Rg(d).catch(()=>{clearTimeout(l),o(jn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Lt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function UI(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class BI{async load(e){return new BC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="recaptcha",zI={theme:"light",type:"image"};class zp{constructor(e,t,s={...zI}){this.parameters=s,this.type=Sc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=wi(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;ve(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new BI:new LI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=Lt()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ve(Aw()&&!Ig(),this.auth,"internal-error"),await qI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await _C(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qI(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=wc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function s0(n,e,t){if(yn(n.app))return Promise.reject(Fi(n));const s=wi(n),o=await HI(s,e,Xe(t));return new FI(o,l=>Qw(s,l))}async function HI(n,e,t){if(!n._getRecaptchaConfig())try{await $C(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){ve(o.type==="enroll",n,"internal-error");const l={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await jo(n,l,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===bc){ve(t?.type===Sc,y,"argument-error");const b=await fp(y,v,t);return TT(y,b)}return TT(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{ve(o.type==="signin",n,"internal-error");const l=s.multiFactorHint?.uid||s.multiFactorUid;ve(l,n,"missing-multi-factor-info");const d={mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await jo(n,d,"mfaSmsSignIn",async(v,b)=>{if(b.phoneSignInInfo.captchaResponse===bc){ve(t?.type===Sc,v,"argument-error");const w=await fp(v,b,t);return ST(v,w)}return ST(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await jo(n,o,"sendVerificationCode",async(g,y)=>{if(y.captchaResponse===bc){ve(t?.type===Sc,g,"argument-error");const v=await fp(g,y,t);return _T(g,v)}return _T(g,y)},"PHONE_PROVIDER").catch(g=>Promise.reject(g))).sessionInfo}}finally{t?._reset()}}async function fp(n,e,t){ve(t.type===Sc,n,"argument-error");const s=await t.verify();ve(typeof s=="string",n,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,m=o.phoneEnrollmentInfo.clientType,g=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:s,captchaResponse:d,clientType:m,recaptchaVersion:g}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,m=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:l,clientType:d,recaptchaVersion:m}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e){return e?ws(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends Nd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GI(n){return Kw(n.auth,new Dg(n),n.bypassAuthState)}function $I(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),Yw(t,new Dg(n),n.bypassAuthState)}async function YI(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),hI(t,new Dg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GI;case"linkViaPopup":case"linkViaRedirect":return YI;case"reauthViaPopup":case"reauthViaRedirect":return $I;default:ui(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new Yc(2e3,1e4);async function o0(n,e,t){if(yn(n.app))return Promise.reject(jn(n,"operation-not-supported-in-this-environment"));const s=wi(n);hC(n,e,Ng);const o=r0(s,t);return new ga(s,"signInViaPopup",e,o).executeNotNull()}class ga extends a0{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,ga.currentPopupAction&&ga.currentPopupAction.cancel(),ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KI.get())};e()}}ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="pendingRedirect",Gh=new Map;class XI extends a0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const s=await WI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WI(n,e){const t=eD(e),s=JI(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function ZI(n,e){Gh.set(n._key(),e)}function JI(n){return ws(n._redirectPersistence)}function eD(n){return Hh(QI,n.config.apiKey,n.name)}async function tD(n,e,t=!1){if(yn(n.app))return Promise.reject(Fi(n));const s=wi(n),o=r0(s,e),d=await new XI(s,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=600*1e3;class iD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!l0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nD&&this.cachedEventUids.clear(),this.cachedEventUids.has(AT(e))}saveEventToCache(e){this.cachedEventUids.add(AT(e)),this.lastProcessedEventTime=Date.now()}}function AT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function l0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(n,e={}){return Mn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oD=/^https?/;async function lD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rD(n);for(const t of e)try{if(cD(t))return}catch{}ui(n,"unauthorized-domain")}function cD(n){const e=Lp(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===s}if(!oD.test(t))return!1;if(aD.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new Yc(3e4,6e4);function RT(){const n=Lt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hD(n){return new Promise((e,t)=>{function s(){RT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{RT(),t(jn(n,"network-request-failed"))},timeout:uD.get()})}if(Lt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lt().gapi?.load)s();else{const o=Fw("iframefcb");return Lt()[o]=()=>{gapi.load?s():t(jn(n,"network-request-failed"))},Rg(`${VC()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw $h=null,e})}let $h=null;function dD(n){return $h=$h||hD(n),$h}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Yc(5e3,15e3),mD="__/auth/iframe",pD="emulator/auth/iframe",gD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vD(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?wg(e,pD):`https://${n.config.authDomain}/${mD}`,s={apiKey:e.apiKey,appName:n.name,v:Na},o=yD.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${$o(s).slice(1)}`}async function _D(n){const e=await dD(n),t=Lt().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:vD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gD,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const d=jn(n,"network-request-failed"),m=Lt().setTimeout(()=>{l(d)},fD.get());function g(){Lt().clearTimeout(m),o(s)}s.ping(g).then(g,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TD=500,bD=600,wD="_blank",SD="http://localhost";class xT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AD(n,e,t,s=TD,o=bD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const g={...ED,width:s.toString(),height:o.toString(),top:l,left:d},y=_n().toLowerCase();t&&(m=Mw(y)?wD:t),Pw(y)&&(e=e||SD,g.scrollbars="yes");const v=Object.entries(g).reduce((w,[C,L])=>`${w}${C}=${L},`,"");if(xC(y)&&m!=="_self")return RD(e||"",m),new xT(null);const b=window.open(e||"",m,v);ve(b,n,"popup-blocked");try{b.focus()}catch{}return new xT(b)}function RD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="__/auth/handler",ND="emulator/auth/handler",CD=encodeURIComponent("fac");async function NT(n,e,t,s,o,l){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Na,eventId:o};if(e instanceof Ng){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",W1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))d[v]=b}if(e instanceof Qc){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(d.scopes=v.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const g=await n._getAppCheckToken(),y=g?`#${CD}=${encodeURIComponent(g)}`:"";return`${ID(n)}?${$o(m).slice(1)}${y}`}function ID({config:n}){return n.emulator?wg(n,ND):`https://${n.authDomain}/${xD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="webStorageSupport";class DD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e0,this._completeRedirectFn=tD,this._overrideRedirectResult=ZI}async _openPopup(e,t,s,o){Is(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await NT(e,t,s,Lp(),o);return AD(e,l,Cg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await NT(e,t,s,Lp(),o);return xI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Is(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await _D(e),s=new iD(e);return t.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mp,{type:mp},o=>{const l=o?.[0]?.[mp];l!==void 0&&t(!!l),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zw()||kw()||Ag()}}const jD=DD;var CT="@firebase/auth",IT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kD(n){wr(new Ns("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=s.options;ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(n)},y=new OC(s,o,l,g);return KC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),wr(new Ns("auth-internal",e=>{const t=wi(e.getProvider("auth").getImmediate());return(s=>new OD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ci(CT,IT,PD(n)),ci(CT,IT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=300,VD=gw("authIdTokenMaxAge")||MD;let DT=null;const LD=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>VD)return;const o=t?.token;DT!==o&&(DT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UD(n=xd()){const e=$c(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YC(n,{popupRedirectResolver:jD,persistence:[MI,SI,e0]}),s=gw("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const d=LD(l.toString());EI(t,d,()=>d(t.currentUser)),_I(t,m=>d(m))}}const o=mw("auth");return o&&QC(t,`http://${o}`),t}function BD(){return document.getElementsByTagName("head")?.[0]??document}PC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=jn("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",BD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kD("Browser");var zD="firebase",qD="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ci(zD,qD,"app");var jT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Tr,c0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,R){function x(){}x.prototype=R.prototype,I.D=R.prototype,I.prototype=new x,I.prototype.constructor=I,I.C=function(P,D,M){for(var N=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)N[Ee-2]=arguments[Ee];return R.prototype[D].apply(P,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,R,x){x||(x=0);var P=Array(16);if(typeof R=="string")for(var D=0;16>D;++D)P[D]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(D=0;16>D;++D)P[D]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=I.g[0],x=I.g[1],D=I.g[2];var M=I.g[3],N=R+(M^x&(D^M))+P[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=M+(D^R&(x^D))+P[1]+3905402710&4294967295,M=R+(N<<12&4294967295|N>>>20),N=D+(x^M&(R^x))+P[2]+606105819&4294967295,D=M+(N<<17&4294967295|N>>>15),N=x+(R^D&(M^R))+P[3]+3250441966&4294967295,x=D+(N<<22&4294967295|N>>>10),N=R+(M^x&(D^M))+P[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=M+(D^R&(x^D))+P[5]+1200080426&4294967295,M=R+(N<<12&4294967295|N>>>20),N=D+(x^M&(R^x))+P[6]+2821735955&4294967295,D=M+(N<<17&4294967295|N>>>15),N=x+(R^D&(M^R))+P[7]+4249261313&4294967295,x=D+(N<<22&4294967295|N>>>10),N=R+(M^x&(D^M))+P[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=M+(D^R&(x^D))+P[9]+2336552879&4294967295,M=R+(N<<12&4294967295|N>>>20),N=D+(x^M&(R^x))+P[10]+4294925233&4294967295,D=M+(N<<17&4294967295|N>>>15),N=x+(R^D&(M^R))+P[11]+2304563134&4294967295,x=D+(N<<22&4294967295|N>>>10),N=R+(M^x&(D^M))+P[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=M+(D^R&(x^D))+P[13]+4254626195&4294967295,M=R+(N<<12&4294967295|N>>>20),N=D+(x^M&(R^x))+P[14]+2792965006&4294967295,D=M+(N<<17&4294967295|N>>>15),N=x+(R^D&(M^R))+P[15]+1236535329&4294967295,x=D+(N<<22&4294967295|N>>>10),N=R+(D^M&(x^D))+P[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=M+(x^D&(R^x))+P[6]+3225465664&4294967295,M=R+(N<<9&4294967295|N>>>23),N=D+(R^x&(M^R))+P[11]+643717713&4294967295,D=M+(N<<14&4294967295|N>>>18),N=x+(M^R&(D^M))+P[0]+3921069994&4294967295,x=D+(N<<20&4294967295|N>>>12),N=R+(D^M&(x^D))+P[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=M+(x^D&(R^x))+P[10]+38016083&4294967295,M=R+(N<<9&4294967295|N>>>23),N=D+(R^x&(M^R))+P[15]+3634488961&4294967295,D=M+(N<<14&4294967295|N>>>18),N=x+(M^R&(D^M))+P[4]+3889429448&4294967295,x=D+(N<<20&4294967295|N>>>12),N=R+(D^M&(x^D))+P[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=M+(x^D&(R^x))+P[14]+3275163606&4294967295,M=R+(N<<9&4294967295|N>>>23),N=D+(R^x&(M^R))+P[3]+4107603335&4294967295,D=M+(N<<14&4294967295|N>>>18),N=x+(M^R&(D^M))+P[8]+1163531501&4294967295,x=D+(N<<20&4294967295|N>>>12),N=R+(D^M&(x^D))+P[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=M+(x^D&(R^x))+P[2]+4243563512&4294967295,M=R+(N<<9&4294967295|N>>>23),N=D+(R^x&(M^R))+P[7]+1735328473&4294967295,D=M+(N<<14&4294967295|N>>>18),N=x+(M^R&(D^M))+P[12]+2368359562&4294967295,x=D+(N<<20&4294967295|N>>>12),N=R+(x^D^M)+P[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=M+(R^x^D)+P[8]+2272392833&4294967295,M=R+(N<<11&4294967295|N>>>21),N=D+(M^R^x)+P[11]+1839030562&4294967295,D=M+(N<<16&4294967295|N>>>16),N=x+(D^M^R)+P[14]+4259657740&4294967295,x=D+(N<<23&4294967295|N>>>9),N=R+(x^D^M)+P[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=M+(R^x^D)+P[4]+1272893353&4294967295,M=R+(N<<11&4294967295|N>>>21),N=D+(M^R^x)+P[7]+4139469664&4294967295,D=M+(N<<16&4294967295|N>>>16),N=x+(D^M^R)+P[10]+3200236656&4294967295,x=D+(N<<23&4294967295|N>>>9),N=R+(x^D^M)+P[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=M+(R^x^D)+P[0]+3936430074&4294967295,M=R+(N<<11&4294967295|N>>>21),N=D+(M^R^x)+P[3]+3572445317&4294967295,D=M+(N<<16&4294967295|N>>>16),N=x+(D^M^R)+P[6]+76029189&4294967295,x=D+(N<<23&4294967295|N>>>9),N=R+(x^D^M)+P[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=M+(R^x^D)+P[12]+3873151461&4294967295,M=R+(N<<11&4294967295|N>>>21),N=D+(M^R^x)+P[15]+530742520&4294967295,D=M+(N<<16&4294967295|N>>>16),N=x+(D^M^R)+P[2]+3299628645&4294967295,x=D+(N<<23&4294967295|N>>>9),N=R+(D^(x|~M))+P[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=M+(x^(R|~D))+P[7]+1126891415&4294967295,M=R+(N<<10&4294967295|N>>>22),N=D+(R^(M|~x))+P[14]+2878612391&4294967295,D=M+(N<<15&4294967295|N>>>17),N=x+(M^(D|~R))+P[5]+4237533241&4294967295,x=D+(N<<21&4294967295|N>>>11),N=R+(D^(x|~M))+P[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=M+(x^(R|~D))+P[3]+2399980690&4294967295,M=R+(N<<10&4294967295|N>>>22),N=D+(R^(M|~x))+P[10]+4293915773&4294967295,D=M+(N<<15&4294967295|N>>>17),N=x+(M^(D|~R))+P[1]+2240044497&4294967295,x=D+(N<<21&4294967295|N>>>11),N=R+(D^(x|~M))+P[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=M+(x^(R|~D))+P[15]+4264355552&4294967295,M=R+(N<<10&4294967295|N>>>22),N=D+(R^(M|~x))+P[6]+2734768916&4294967295,D=M+(N<<15&4294967295|N>>>17),N=x+(M^(D|~R))+P[13]+1309151649&4294967295,x=D+(N<<21&4294967295|N>>>11),N=R+(D^(x|~M))+P[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=M+(x^(R|~D))+P[11]+3174756917&4294967295,M=R+(N<<10&4294967295|N>>>22),N=D+(R^(M|~x))+P[2]+718787259&4294967295,D=M+(N<<15&4294967295|N>>>17),N=x+(M^(D|~R))+P[9]+3951481745&4294967295,I.g[0]=I.g[0]+R&4294967295,I.g[1]=I.g[1]+(D+(N<<21&4294967295|N>>>11))&4294967295,I.g[2]=I.g[2]+D&4294967295,I.g[3]=I.g[3]+M&4294967295}s.prototype.u=function(I,R){R===void 0&&(R=I.length);for(var x=R-this.blockSize,P=this.B,D=this.h,M=0;M<R;){if(D==0)for(;M<=x;)o(this,I,M),M+=this.blockSize;if(typeof I=="string"){for(;M<R;)if(P[D++]=I.charCodeAt(M++),D==this.blockSize){o(this,P),D=0;break}}else for(;M<R;)if(P[D++]=I[M++],D==this.blockSize){o(this,P),D=0;break}}this.h=D,this.o+=R},s.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var R=1;R<I.length-8;++R)I[R]=0;var x=8*this.o;for(R=I.length-8;R<I.length;++R)I[R]=x&255,x/=256;for(this.u(I),I=Array(16),R=x=0;4>R;++R)for(var P=0;32>P;P+=8)I[x++]=this.g[R]>>>P&255;return I};function l(I,R){var x=m;return Object.prototype.hasOwnProperty.call(x,I)?x[I]:x[I]=R(I)}function d(I,R){this.h=R;for(var x=[],P=!0,D=I.length-1;0<=D;D--){var M=I[D]|0;P&&M==R||(x[D]=M,P=!1)}this.g=x}var m={};function g(I){return-128<=I&&128>I?l(I,function(R){return new d([R|0],0>R?-1:0)}):new d([I|0],0>I?-1:0)}function y(I){if(isNaN(I)||!isFinite(I))return b;if(0>I)return j(y(-I));for(var R=[],x=1,P=0;I>=x;P++)R[P]=I/x|0,x*=4294967296;return new d(R,0)}function v(I,R){if(I.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(I.charAt(0)=="-")return j(v(I.substring(1),R));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=y(Math.pow(R,8)),P=b,D=0;D<I.length;D+=8){var M=Math.min(8,I.length-D),N=parseInt(I.substring(D,D+M),R);8>M?(M=y(Math.pow(R,M)),P=P.j(M).add(y(N))):(P=P.j(x),P=P.add(y(N)))}return P}var b=g(0),w=g(1),C=g(16777216);n=d.prototype,n.m=function(){if(z(this))return-j(this).m();for(var I=0,R=1,x=0;x<this.g.length;x++){var P=this.i(x);I+=(0<=P?P:4294967296+P)*R,R*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(L(this))return"0";if(z(this))return"-"+j(this).toString(I);for(var R=y(Math.pow(I,6)),x=this,P="";;){var D=se(x,R).g;x=Y(x,D.j(R));var M=((0<x.g.length?x.g[0]:x.h)>>>0).toString(I);if(x=D,L(x))return M+P;for(;6>M.length;)M="0"+M;P=M+P}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function L(I){if(I.h!=0)return!1;for(var R=0;R<I.g.length;R++)if(I.g[R]!=0)return!1;return!0}function z(I){return I.h==-1}n.l=function(I){return I=Y(this,I),z(I)?-1:L(I)?0:1};function j(I){for(var R=I.g.length,x=[],P=0;P<R;P++)x[P]=~I.g[P];return new d(x,~I.h).add(w)}n.abs=function(){return z(this)?j(this):this},n.add=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],P=0,D=0;D<=R;D++){var M=P+(this.i(D)&65535)+(I.i(D)&65535),N=(M>>>16)+(this.i(D)>>>16)+(I.i(D)>>>16);P=N>>>16,M&=65535,N&=65535,x[D]=N<<16|M}return new d(x,x[x.length-1]&-2147483648?-1:0)};function Y(I,R){return I.add(j(R))}n.j=function(I){if(L(this)||L(I))return b;if(z(this))return z(I)?j(this).j(j(I)):j(j(this).j(I));if(z(I))return j(this.j(j(I)));if(0>this.l(C)&&0>I.l(C))return y(this.m()*I.m());for(var R=this.g.length+I.g.length,x=[],P=0;P<2*R;P++)x[P]=0;for(P=0;P<this.g.length;P++)for(var D=0;D<I.g.length;D++){var M=this.i(P)>>>16,N=this.i(P)&65535,Ee=I.i(D)>>>16,xe=I.i(D)&65535;x[2*P+2*D]+=N*xe,K(x,2*P+2*D),x[2*P+2*D+1]+=M*xe,K(x,2*P+2*D+1),x[2*P+2*D+1]+=N*Ee,K(x,2*P+2*D+1),x[2*P+2*D+2]+=M*Ee,K(x,2*P+2*D+2)}for(P=0;P<R;P++)x[P]=x[2*P+1]<<16|x[2*P];for(P=R;P<2*R;P++)x[P]=0;return new d(x,0)};function K(I,R){for(;(I[R]&65535)!=I[R];)I[R+1]+=I[R]>>>16,I[R]&=65535,R++}function X(I,R){this.g=I,this.h=R}function se(I,R){if(L(R))throw Error("division by zero");if(L(I))return new X(b,b);if(z(I))return R=se(j(I),R),new X(j(R.g),j(R.h));if(z(R))return R=se(I,j(R)),new X(j(R.g),R.h);if(30<I.g.length){if(z(I)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var x=w,P=R;0>=P.l(I);)x=ie(x),P=ie(P);var D=B(x,1),M=B(P,1);for(P=B(P,2),x=B(x,2);!L(P);){var N=M.add(P);0>=N.l(I)&&(D=D.add(x),M=N),P=B(P,1),x=B(x,1)}return R=Y(I,D.j(R)),new X(D,R)}for(D=b;0<=I.l(R);){for(x=Math.max(1,Math.floor(I.m()/R.m())),P=Math.ceil(Math.log(x)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),M=y(x),N=M.j(R);z(N)||0<N.l(I);)x-=P,M=y(x),N=M.j(R);L(M)&&(M=w),D=D.add(M),I=Y(I,N)}return new X(D,I)}n.A=function(I){return se(this,I).h},n.and=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],P=0;P<R;P++)x[P]=this.i(P)&I.i(P);return new d(x,this.h&I.h)},n.or=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],P=0;P<R;P++)x[P]=this.i(P)|I.i(P);return new d(x,this.h|I.h)},n.xor=function(I){for(var R=Math.max(this.g.length,I.g.length),x=[],P=0;P<R;P++)x[P]=this.i(P)^I.i(P);return new d(x,this.h^I.h)};function ie(I){for(var R=I.g.length+1,x=[],P=0;P<R;P++)x[P]=I.i(P)<<1|I.i(P-1)>>>31;return new d(x,I.h)}function B(I,R){var x=R>>5;R%=32;for(var P=I.g.length-x,D=[],M=0;M<P;M++)D[M]=0<R?I.i(M+x)>>>R|I.i(M+x+1)<<32-R:I.i(M+x);return new d(D,I.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,c0=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=y,d.fromString=v,Tr=d}).apply(typeof jT<"u"?jT:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u0,gc,h0,Yh,qp,d0,f0,m0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(h,_){if(_)e:{var E=s;h=h.split(".");for(var A=0;A<h.length-1;A++){var H=h[A];if(!(H in E))break e;E=E[H]}h=h[h.length-1],A=E[h],_=_(A),_!=A&&_!=null&&e(E,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var E=0,A=!1,H={next:function(){if(!A&&E<h.length){var Z=E++;return{value:_(Z,h[Z]),done:!1}}return A=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}o("Array.prototype.values",function(h){return h||function(){return l(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function y(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function v(h,_,E){return h.call.apply(h.bind,arguments)}function b(h,_,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,A),h.apply(_,H)}}return function(){return h.apply(_,arguments)}}function w(h,_,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,w.apply(null,arguments)}function C(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function L(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,H,Z){for(var fe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)fe[Fe-2]=arguments[Fe];return _.prototype[H].apply(A,fe)}}function z(h){const _=h.length;if(0<_){const E=Array(_);for(let A=0;A<_;A++)E[A]=h[A];return E}return[]}function j(h,_){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(g(A)){const H=h.length||0,Z=A.length||0;h.length=H+Z;for(let fe=0;fe<Z;fe++)h[H+fe]=A[fe]}else h.push(A)}}class Y{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function K(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function se(h){return se[" "](h),h}se[" "]=function(){};var ie=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function B(h,_,E){for(const A in h)_.call(E,h[A],A,h)}function I(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function R(h){const _={};for(const E in h)_[E]=h[E];return _}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(h,_){let E,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(E in A)h[E]=A[E];for(let Z=0;Z<x.length;Z++)E=x[Z],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function D(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function M(h){m.setTimeout(()=>{throw h},0)}function N(){var h=De;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Ee{constructor(){this.h=this.g=null}add(_,E){const A=xe.get();A.set(_,E),this.h?this.h.next=A:this.g=A,this.h=A}}var xe=new Y(()=>new V,h=>h.reset());class V{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let re,me=!1,De=new Ee,k=()=>{const h=m.Promise.resolve(void 0);re=()=>{h.then(ae)}};var ae=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){M(E)}var _=xe;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}me=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ue=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,_),m.removeEventListener("test",E,_)}catch{}return h})();function ge(h,_){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ie){e:{try{se(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:he[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&ge.aa.h.call(this)}}L(ge,ce);var he={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var We="closure_listenable_"+(1e6*Math.random()|0),ke=0;function ot(h,_,E,A,H){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!A,this.ha=H,this.key=++ke,this.da=this.fa=!1}function bt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Vn(h){this.src=h,this.g={},this.h=0}Vn.prototype.add=function(h,_,E,A,H){var Z=h.toString();h=this.g[Z],h||(h=this.g[Z]=[],this.h++);var fe=mt(h,_,A,H);return-1<fe?(_=h[fe],E||(_.fa=!1)):(_=new ot(_,this.src,Z,!!A,H),_.fa=E,h.push(_)),_};function Qn(h,_){var E=_.type;if(E in h.g){var A=h.g[E],H=Array.prototype.indexOf.call(A,_,void 0),Z;(Z=0<=H)&&Array.prototype.splice.call(A,H,1),Z&&(bt(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function mt(h,_,E,A){for(var H=0;H<h.length;++H){var Z=h[H];if(!Z.da&&Z.listener==_&&Z.capture==!!E&&Z.ha==A)return H}return-1}var Ie="closure_lm_"+(1e6*Math.random()|0),Ms={};function Vs(h,_,E,A,H){if(Array.isArray(_)){for(var Z=0;Z<_.length;Z++)Vs(h,_[Z],E,A,H);return null}return E=lu(E),h&&h[We]?h.K(_,E,y(A)?!!A.capture:!1,H):An(h,_,E,!1,A,H)}function An(h,_,E,A,H,Z){if(!_)throw Error("Invalid event type");var fe=y(H)?!!H.capture:!!H,Fe=Oa(h);if(Fe||(h[Ie]=Fe=new Vn(h)),E=Fe.add(_,E,A,fe,Z),E.proxy)return E;if(A=Wd(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)ue||(H=fe),H===void 0&&(H=!1),h.addEventListener(_.toString(),A,H);else if(h.attachEvent)h.attachEvent(Pr(_.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Wd(){function h(E){return _.call(h.src,h.listener,E)}const _=Zd;return h}function Jo(h,_,E,A,H){if(Array.isArray(_))for(var Z=0;Z<_.length;Z++)Jo(h,_[Z],E,A,H);else A=y(A)?!!A.capture:!!A,E=lu(E),h&&h[We]?(h=h.i,_=String(_).toString(),_ in h.g&&(Z=h.g[_],E=mt(Z,E,A,H),-1<E&&(bt(Z[E]),Array.prototype.splice.call(Z,E,1),Z.length==0&&(delete h.g[_],h.h--)))):h&&(h=Oa(h))&&(_=h.g[_.toString()],h=-1,_&&(h=mt(_,E,A,H)),(E=-1<h?_[h]:null)&&ja(E))}function ja(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[We])Qn(_.i,h);else{var E=h.type,A=h.proxy;_.removeEventListener?_.removeEventListener(E,A,h.capture):_.detachEvent?_.detachEvent(Pr(E),A):_.addListener&&_.removeListener&&_.removeListener(A),(E=Oa(_))?(Qn(E,h),E.h==0&&(E.src=null,_[Ie]=null)):bt(h)}}}function Pr(h){return h in Ms?Ms[h]:Ms[h]="on"+h}function Zd(h,_){if(h.da)h=!0;else{_=new ge(_,this);var E=h.listener,A=h.ha||h.src;h.fa&&ja(h),h=E.call(A,_)}return h}function Oa(h){return h=h[Ie],h instanceof Vn?h:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function lu(h){return typeof h=="function"?h:(h[el]||(h[el]=function(_){return h.handleEvent(_)}),h[el])}function wt(){de.call(this),this.i=new Vn(this),this.M=this,this.F=null}L(wt,de),wt.prototype[We]=!0,wt.prototype.removeEventListener=function(h,_,E,A){Jo(this,h,_,E,A)};function et(h,_){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=_.type||_,typeof _=="string")_=new ce(_,h);else if(_ instanceof ce)_.target=_.target||h;else{var H=_;_=new ce(A,h),P(_,H)}if(H=!0,E)for(var Z=E.length-1;0<=Z;Z--){var fe=_.g=E[Z];H=Ln(fe,A,!0,_)&&H}if(fe=_.g=h,H=Ln(fe,A,!0,_)&&H,H=Ln(fe,A,!1,_)&&H,E)for(Z=0;Z<E.length;Z++)fe=_.g=E[Z],H=Ln(fe,A,!1,_)&&H}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],A=0;A<E.length;A++)bt(E[A]);delete h.g[_],h.h--}}this.F=null},wt.prototype.K=function(h,_,E,A){return this.i.add(String(h),_,!1,E,A)},wt.prototype.L=function(h,_,E,A){return this.i.add(String(h),_,!0,E,A)};function Ln(h,_,E,A){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,Z=0;Z<_.length;++Z){var fe=_[Z];if(fe&&!fe.da&&fe.capture==E){var Fe=fe.listener,Ft=fe.ha||fe.src;fe.fa&&Qn(h.i,fe),H=Fe.call(Ft,A)!==!1&&H}}return H&&!A.defaultPrevented}function un(h,_,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(h,_||0)}function cu(h){h.g=un(()=>{h.g=null,h.i&&(h.i=!1,cu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Jd extends de{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:cu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kr(h){de.call(this),this.h=h,this.g={}}L(kr,de);var Mr=[];function Vr(h){B(h.g,function(_,E){this.g.hasOwnProperty(E)&&ja(_)},h),h.g={}}kr.prototype.N=function(){kr.aa.N.call(this),Vr(this)},kr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=m.JSON.stringify,Pa=m.JSON.parse,Lr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function tl(){}tl.prototype.h=null;function nl(h){return h.h||(h.h=h.i())}function il(){}var Xi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Wi(){ce.call(this,"d")}L(Wi,ce);function sl(){ce.call(this,"c")}L(sl,ce);var Si={},rl=null;function Ls(){return rl=rl||new wt}Si.La="serverreachability";function ka(h){ce.call(this,Si.La,h)}L(ka,ce);function Us(h){const _=Ls();et(_,new ka(_))}Si.STAT_EVENT="statevent";function uu(h,_){ce.call(this,Si.STAT_EVENT,h),this.stat=_}L(uu,ce);function pt(h){const _=Ls();et(_,new uu(_,h))}Si.Ma="timingevent";function qt(h,_){ce.call(this,Si.Ma,h),this.size=_}L(qt,ce);function Ot(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},_)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function al(h,_,E,A,H,Z){h.info(function(){if(h.g)if(Z)for(var fe="",Fe=Z.split("&"),Ft=0;Ft<Fe.length;Ft++){var He=Fe[Ft].split("=");if(1<He.length){var Xt=He[0];He=He[1];var Ht=Xt.split("_");fe=2<=Ht.length&&Ht[1]=="type"?fe+(Xt+"="+He+"&"):fe+(Xt+"=redacted&")}}else fe=null;else fe=Z;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+_+`
`+E+`
`+fe})}function ef(h,_,E,A,H,Z,fe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+_+`
`+E+`
`+Z+" "+fe})}function Bs(h,_,E,A){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ur(h,E)+(A?" "+A:"")})}function hu(h,_){h.info(function(){return"TIMEOUT: "+_})}Xn.prototype.info=function(){};function Ur(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var H=A[1];if(Array.isArray(H)&&!(1>H.length)){var Z=H[0];if(Z!="noop"&&Z!="stop"&&Z!="close")for(var fe=1;fe<H.length;fe++)H[fe]=""}}}}return hi(E)}catch{return _}}var zs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Zi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ai;function Ri(){}L(Ri,tl),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},Ai=new Ri;function En(h,_,E,A){this.j=h,this.i=_,this.l=E,this.R=A||1,this.U=new kr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ct}function Ct(){this.i=null,this.g="",this.h=!1}var ol={},Ma={};function di(h,_,E){h.L=1,h.v=Hr(Un(_)),h.m=E,h.P=!0,Ji(h,null)}function Ji(h,_){h.F=Date.now(),Br(h),h.A=Un(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),fl(E.i,"t",A),h.C=0,E=h.j.J,h.h=new Ct,h.g=xu(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Jd(w(h.Y,h,h.g),h.O)),_=h.U,E=h.g,A=h.ca;var H="readystatechange";Array.isArray(H)||(H&&(Mr[0]=H.toString()),H=Mr);for(var Z=0;Z<H.length;Z++){var fe=Vs(E,H[Z],A||_.handleEvent,!1,_.h||_);if(!fe)break;_.g[fe.key]=fe}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Us(),al(h.i,h.u,h.A,h.l,h.R,h.m)}En.prototype.ca=function(h){h=h.target;const _=this.M;_&&ei(h)==3?_.j():this.Y(h)},En.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=ei(this.g);var _=this.g.Ba();const os=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||Ht!=4||_==7||(_==8||0>=os?Us(3):Us(2)),qs(this);var E=this.g.Z();this.X=E;t:if(du(this)){var A=_u(this.g);h="";var H=A.length,Z=ei(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),xi(this);var fe="";break t}this.h.i=new m.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,h+=this.h.i.decode(A[_],{stream:!(Z&&_==H-1)});A.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=E==200,ef(this.i,this.u,this.A,this.l,this.R,Ht,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Ft=this.g;if((Fe=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(Fe)){var He=Fe;break t}}He=null}if(E=He)Bs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zr(this,E);else{this.o=!1,this.s=3,pt(12),tn(this),xi(this);break e}}if(this.P){E=!0;let nn;for(;!this.J&&this.C<fe.length;)if(nn=fu(this,fe),nn==Ma){Ht==4&&(this.s=4,pt(14),E=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==ol){this.s=4,pt(15),Bs(this.i,this.l,fe,"[Invalid Chunk]"),E=!1;break}else Bs(this.i,this.l,nn,null),zr(this,nn);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||fe.length!=0||this.h.h||(this.s=1,pt(16),E=!1),this.o=this.o&&E,!E)Bs(this.i,this.l,fe,"[Invalid Chunked Response]"),tn(this),xi(this);else if(0<fe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),Zr(Xt),Xt.M=!0,pt(11))}}else Bs(this.i,this.l,fe,null),zr(this,fe);Ht==4&&tn(this),this.o&&!this.J&&(Ht==4?Su(this.j,this):(this.o=!1,Br(this)))}else af(this.g),E==400&&0<fe.indexOf("Unknown SID")?(this.s=3,pt(12)):(this.s=0,pt(13)),tn(this),xi(this)}}}catch{}finally{}};function du(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fu(h,_){var E=h.C,A=_.indexOf(`
`,E);return A==-1?Ma:(E=Number(_.substring(E,A)),isNaN(E)?ol:(A+=1,A+E>_.length?Ma:(_=_.slice(A,A+E),h.C=A+E,_)))}En.prototype.cancel=function(){this.J=!0,tn(this)};function Br(h){h.S=Date.now()+h.I,mu(h,h.I)}function mu(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(w(h.ba,h),_)}function qs(h){h.B&&(m.clearTimeout(h.B),h.B=null)}En.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(hu(this.i,this.A),this.L!=2&&(Us(),pt(17)),tn(this),this.s=2,xi(this)):mu(this,this.S-h)};function xi(h){h.j.G==0||h.J||Su(h.j,h)}function tn(h){qs(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,Vr(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function zr(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||ll(E.h,h))){if(!h.K&&ll(E.h,h)&&E.G==3){try{var A=E.Da.g.parse(_)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Ka(E),$a(E);else break e;vl(E),pt(18)}}else E.za=H[1],0<E.za-E.T&&37500>H[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ot(w(E.Za,E),6e3));if(1>=La(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else as(E,11)}else if((h.K||E.g==h)&&Ka(E),!K(_))for(H=E.Da.g.parse(_),_=0;_<H.length;_++){let He=H[_];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Xt=He[3];Xt!=null&&(E.la=Xt,E.j.info("VER="+E.la));const Ht=He[4];Ht!=null&&(E.Aa=Ht,E.j.info("SVER="+E.Aa));const os=He[5];os!=null&&typeof os=="number"&&0<os&&(A=1.5*os,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const nn=h.g;if(nn){const Pi=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var Z=A.h;Z.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(Z.j=Z.l,Z.g=new Set,Z.h&&(Ua(Z,Z.h),Z.h=null))}if(A.D){const El=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(A.ya=El,it(A.I,A.D,El))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var fe=h;if(A.qa=Ru(A,A.J?A.ia:null,A.W),fe.K){Tn(A.h,fe);var Fe=fe,Ft=A.L;Ft&&(Fe.I=Ft),Fe.B&&(qs(Fe),Br(Fe)),A.g=fe}else bu(A);0<E.i.length&&Ya(E)}else He[0]!="stop"&&He[0]!="close"||as(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?as(E,7):gl(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}Us(4)}catch{}}var pu=class{constructor(h,_){this.g=h,this.map=_}};function es(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Va(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function La(h){return h.h?1:h.g?h.g.size:0}function ll(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ua(h,_){h.g?h.g.add(_):h.h=_}function Tn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}es.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function cl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return z(h.i)}function tf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],E=h.length,A=0;A<E;A++)_.push(h[A]);return _}_=[],E=0;for(A in h)_[E++]=h[A];return _}function Ba(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const A in h)_[E++]=A;return _}}}function ul(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=Ba(h),A=tf(h),H=A.length,Z=0;Z<H;Z++)_.call(void 0,A[Z],E&&E[Z],h)}var qr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nf(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),H=null;if(0<=A){var Z=h[E].substring(0,A);H=h[E].substring(A+1)}else Z=h[E];_(Z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,Fr(this,h.j),this.o=h.o,this.g=h.g,Fs(this,h.s),this.l=h.l;var _=h.i,E=new ns;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),ts(this,E),this.m=h.m}else h&&(_=String(h).match(qr))?(this.h=!1,Fr(this,_[1]||"",!0),this.o=Wn(_[2]||""),this.g=Wn(_[3]||"",!0),Fs(this,_[4]),this.l=Wn(_[5]||"",!0),ts(this,_[6]||"",!0),this.m=Wn(_[7]||"")):(this.h=!1,this.i=new ns(null,this.h))}Pt.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Gr(_,hl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Gr(_,hl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Gr(E,E.charAt(0)=="/"?sf:dl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Gr(E,za)),h.join("")};function Un(h){return new Pt(h)}function Fr(h,_,E){h.j=E?Wn(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Fs(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function ts(h,_,E){_ instanceof ns?(h.i=_,yu(h.i,h.h)):(E||(_=Gr(_,rf)),h.i=new ns(_,h.h))}function it(h,_,E){h.i.set(_,E)}function Hr(h){return it(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Wn(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Gr(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,gu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var hl=/[#\/\?@]/g,dl=/[#\?:]/g,sf=/[#\?]/g,rf=/[#\?@]/g,za=/#/g;function ns(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Zn(h){h.g||(h.g=new Map,h.h=0,h.i&&nf(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}n=ns.prototype,n.add=function(h,_){Zn(this),this.i=null,h=Ni(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function is(h,_){Zn(h),_=Ni(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function ss(h,_){return Zn(h),_=Ni(h,_),h.g.has(_)}n.forEach=function(h,_){Zn(this),this.g.forEach(function(E,A){E.forEach(function(H){h.call(_,H,A,this)},this)},this)},n.na=function(){Zn(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let A=0;A<_.length;A++){const H=h[A];for(let Z=0;Z<H.length;Z++)E.push(_[A])}return E},n.V=function(h){Zn(this);let _=[];if(typeof h=="string")ss(this,h)&&(_=_.concat(this.g.get(Ni(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},n.set=function(h,_){return Zn(this),this.i=null,h=Ni(this,h),ss(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},n.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function fl(h,_,E){is(h,_),0<E.length&&(h.i=null,h.g.set(Ni(h,_),z(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var A=_[E];const Z=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var H=Z;fe[A]!==""&&(H+="="+encodeURIComponent(String(fe[A]))),h.push(H)}}return this.i=h.join("&")};function Ni(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function yu(h,_){_&&!h.j&&(Zn(h),h.i=null,h.g.forEach(function(E,A){var H=A.toLowerCase();A!=H&&(is(this,A),fl(this,H,E))},h)),h.j=_}function $r(h,_){const E=new Xn;if(m.Image){const A=new Image;A.onload=C(Jn,E,"TestLoadImage: loaded",!0,_,A),A.onerror=C(Jn,E,"TestLoadImage: error",!1,_,A),A.onabort=C(Jn,E,"TestLoadImage: abort",!1,_,A),A.ontimeout=C(Jn,E,"TestLoadImage: timeout",!1,_,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else _(!1)}function fi(h,_){const E=new Xn,A=new AbortController,H=setTimeout(()=>{A.abort(),Jn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:A.signal}).then(Z=>{clearTimeout(H),Z.ok?Jn(E,"TestPingServer: ok",!0,_):Jn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),Jn(E,"TestPingServer: error",!1,_)})}function Jn(h,_,E,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(E)}catch{}}function Yr(){this.g=new Lr}function Ci(h,_,E){const A=E||"";try{ul(h,function(H,Z){let fe=H;y(H)&&(fe=hi(H)),_.push(A+Z+"="+encodeURIComponent(fe))})}catch(H){throw _.push(A+"type="+encodeURIComponent("_badmap")),H}}function Hs(h){this.l=h.Ub||null,this.j=h.eb||!1}L(Hs,tl),Hs.prototype.g=function(){return new rs(this.l,this.j)},Hs.prototype.i=(function(h){return function(){return h}})({});function rs(h,_){wt.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(rs,wt),n=rs.prototype,n.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,Di(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ml(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ml(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ii(this):Di(this),this.readyState==3&&ml(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ii(this))},n.Qa=function(h){this.g&&(this.response=h,Ii(this))},n.ga=function(){this.g&&Ii(this)};function Ii(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Di(h)}n.setRequestHeader=function(h,_){this.u.append(h,_)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function Di(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(rs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function pl(h){let _="";return B(h,function(E,A){_+=A,_+=":",_+=E,_+=`\r
`}),_}function Qt(h,_,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=pl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):it(h,_,E))}function Ze(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(Ze,wt);var qa=/^https?$/i,Kr=["POST","PUT"];n=Ze.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,_,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ai.g(),this.v=this.o?nl(this.o):nl(Ai),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(Z){vu(this,Z);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)E.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Z of A.keys())E.set(Z,A.get(Z));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(Z=>Z.toLowerCase()=="content-type"),H=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Kr,_,void 0))||A||H||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Z,fe]of E)this.g.setRequestHeader(Z,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qr(this),this.u=!0,this.g.send(h),this.u=!1}catch(Z){vu(this,Z)}};function vu(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Fa(h),ji(h)}function Fa(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,et(this,"complete"),et(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ha(this):this.bb())},n.bb=function(){Ha(this)};function Ha(h){if(h.h&&typeof d<"u"&&(!h.v[1]||ei(h)!=4||h.Z()!=2)){if(h.u&&ei(h)==4)un(h.Ea,0,h);else if(et(h,"readystatechange"),ei(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var A;if(A=fe===0){var H=String(h.D).match(qr)[1]||null;!H&&m.self&&m.self.location&&(H=m.self.location.protocol.slice(0,-1)),A=!qa.test(H?H.toLowerCase():"")}E=A}if(E)et(h,"complete"),et(h,"success");else{h.m=6;try{var Z=2<ei(h)?h.g.statusText:""}catch{Z=""}h.l=Z+" ["+h.Z()+"]",Fa(h)}}finally{ji(h)}}}}function ji(h,_){if(h.g){Qr(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||et(h,"ready");try{E.onreadystatechange=A}catch{}}}function Qr(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function ei(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<ei(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),Pa(_)}};function _u(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function af(h){const _={};h=(h.g&&2<=ei(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(K(h[A]))continue;var E=D(h[A]);const H=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Z=_[H]||[];_[H]=Z,Z.push(E)}I(_,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xr(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Ga(h){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xr("baseRetryDelayMs",5e3,h),this.cb=Xr("retryDelaySeedMs",1e4,h),this.Wa=Xr("forwardChannelMaxRetries",2,h),this.wa=Xr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new es(h&&h.concurrentRequestLimit),this.Da=new Yr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ga.prototype,n.la=8,n.G=1,n.connect=function(h,_,E,A){pt(0),this.W=h,this.H=_||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=Ru(this,null,this.W),Ya(this)};function gl(h){if(Eu(h),h.G==3){var _=h.U++,E=Un(h.I);if(it(E,"SID",h.K),it(E,"RID",_),it(E,"TYPE","terminate"),Wr(h,E),_=new En(h,h.j,_),_.L=2,_.v=Hr(Un(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=_.v,E=!0),E||(_.g=xu(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Br(_)}Au(h)}function $a(h){h.g&&(Zr(h),h.g.cancel(),h.g=null)}function Eu(h){$a(h),h.u&&(m.clearTimeout(h.u),h.u=null),Ka(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Ya(h){if(!Va(h.h)&&!h.s){h.s=!0;var _=h.Ga;re||k(),me||(re(),me=!0),De.add(_,h),h.B=0}}function of(h,_){return La(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(w(h.Ga,h,_),_l(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const H=new En(this,this.j,h);let Z=this.o;if(this.S&&(Z?(Z=R(Z),P(Z,this.S)):Z=this.S),this.m!==null||this.O||(H.H=Z,Z=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(_+=A,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=Tu(this,H,_),E=Un(this.I),it(E,"RID",h),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),Wr(this,E),Z&&(this.O?_="headers="+encodeURIComponent(String(pl(Z)))+"&"+_:this.m&&Qt(E,this.m,Z)),Ua(this.h,H),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",_),it(E,"SID","null"),H.T=!0,di(H,E,null)):di(H,E,_),this.G=2}}else this.G==3&&(h?yl(this,h):this.i.length==0||Va(this.h)||yl(this))};function yl(h,_){var E;_?E=_.l:E=h.U++;const A=Un(h.I);it(A,"SID",h.K),it(A,"RID",E),it(A,"AID",h.T),Wr(h,A),h.m&&h.o&&Qt(A,h.m,h.o),E=new En(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=Tu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ua(h.h,E),di(E,A,_)}function Wr(h,_){h.H&&B(h.H,function(E,A){it(_,A,E)}),h.l&&ul({},function(E,A){it(_,A,E)})}function Tu(h,_,E){E=Math.min(h.i.length,E);var A=h.l?w(h.l.Na,h.l,h):null;e:{var H=h.i;let Z=-1;for(;;){const fe=["count="+E];Z==-1?0<E?(Z=H[0].g,fe.push("ofs="+Z)):Z=0:fe.push("ofs="+Z);let Fe=!0;for(let Ft=0;Ft<E;Ft++){let He=H[Ft].g;const Xt=H[Ft].map;if(He-=Z,0>He)Z=Math.max(0,H[Ft].g-100),Fe=!1;else try{Ci(Xt,fe,"req"+He+"_")}catch{A&&A(Xt)}}if(Fe){A=fe.join("&");break e}}}return h=h.i.splice(0,E),_.D=h,A}function bu(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;re||k(),me||(re(),me=!0),De.add(_,h),h.v=0}}function vl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(w(h.Fa,h),_l(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,pt(10),$a(this),wu(this))};function Zr(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function wu(h){h.g=new En(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=Un(h.qa);it(_,"RID","rpc"),it(_,"SID",h.K),it(_,"AID",h.T),it(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&it(_,"TO",h.ja),it(_,"TYPE","xmlhttp"),Wr(h,_),h.m&&h.o&&Qt(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Hr(Un(_)),E.m=null,E.P=!0,Ji(E,h)}n.Za=function(){this.C!=null&&(this.C=null,$a(this),vl(this),pt(19))};function Ka(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Su(h,_){var E=null;if(h.g==_){Ka(h),Zr(h),h.g=null;var A=2}else if(ll(h.h,_))E=_.D,Tn(h.h,_),A=1;else return;if(h.G!=0){if(_.o)if(A==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var H=h.B;A=Ls(),et(A,new qt(A,E)),Ya(h)}else bu(h);else if(H=_.s,H==3||H==0&&0<_.X||!(A==1&&of(h,_)||A==2&&vl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),H){case 1:as(h,5);break;case 4:as(h,10);break;case 3:as(h,6);break;default:as(h,2)}}}function _l(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function as(h,_){if(h.j.info("Error code "+_),_==2){var E=w(h.fb,h),A=h.Xa;const H=!A;A=new Pt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Fr(A,"https"),Hr(A),H?$r(A.toString(),E):fi(A.toString(),E)}else pt(2);h.G=0,h.l&&h.l.sa(_),Au(h),Eu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),pt(2)):(this.j.info("Failed to ping google.com"),pt(1))};function Au(h){if(h.G=0,h.ka=[],h.l){const _=cl(h.h);(_.length!=0||h.i.length!=0)&&(j(h.ka,_),j(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Ru(h,_,E){var A=E instanceof Pt?Un(E):new Pt(E);if(A.g!="")_&&(A.g=_+"."+A.g),Fs(A,A.s);else{var H=m.location;A=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var Z=new Pt(null);A&&Fr(Z,A),_&&(Z.g=_),H&&Fs(Z,H),E&&(Z.l=E),A=Z}return E=h.D,_=h.ya,E&&_&&it(A,E,_),it(A,"VER",h.la),Wr(h,A),A}function xu(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new Ze(new Hs({eb:E})):new Ze(h.pa),_.Ha(h.J),_}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}n=Nu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Qa(){}Qa.prototype.g=function(h,_){return new bn(h,_)};function bn(h,_){wt.call(this),this.g=new Ga(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!K(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!K(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Oi(this)}L(bn,wt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){gl(this.g)},bn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=hi(h),h=E);_.i.push(new pu(_.Ya++,h)),_.G==3&&Ya(_)},bn.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,bn.aa.N.call(this)};function Cu(h){Wi.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const E in _){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}L(Cu,Wi);function Iu(){sl.call(this),this.status=1}L(Iu,sl);function Oi(h){this.g=h}L(Oi,Nu),Oi.prototype.ua=function(){et(this.g,"a")},Oi.prototype.ta=function(h){et(this.g,new Cu(h))},Oi.prototype.sa=function(h){et(this.g,new Iu)},Oi.prototype.ra=function(){et(this.g,"b")},Qa.prototype.createWebChannel=Qa.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,m0=function(){return new Qa},f0=function(){return Ls()},d0=Si,qp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,Yh=zs,Zi.COMPLETE="complete",h0=Zi,il.EventType=Xi,Xi.OPEN="a",Xi.CLOSE="b",Xi.ERROR="c",Xi.MESSAGE="d",wt.prototype.listen=wt.prototype.K,gc=il,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,u0=Ze}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const OT="@firebase/firestore",PT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pn.UNAUTHENTICATED=new pn(null),pn.GOOGLE_CREDENTIALS=new pn("google-credentials-uid"),pn.FIRST_PARTY=new pn("first-party-uid"),pn.MOCK_USER=new pn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa=new _g("@firebase/firestore");function Ao(){return Aa.logLevel}function ye(n,...e){if(Aa.logLevel<=Be.DEBUG){const t=e.map(jg);Aa.debug(`Firestore (${Yo}): ${n}`,...t)}}function Ds(n,...e){if(Aa.logLevel<=Be.ERROR){const t=e.map(jg);Aa.error(`Firestore (${Yo}): ${n}`,...t)}}function Mo(n,...e){if(Aa.logLevel<=Be.WARN){const t=e.map(jg);Aa.warn(`Firestore (${Yo}): ${n}`,...t)}}function jg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,p0(n,s,t)}function p0(n,e,t){let s=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Ds(s),new Error(s)}function Je(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||p0(e,o,s)}function Oe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Qi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(pn.UNAUTHENTICATED)))}shutdown(){}}class HD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GD{constructor(e){this.t=e,this.currentUser=pn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new As;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new As,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new As)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Je(typeof s.accessToken=="string",31837,{l:s}),new g0(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new pn(e)}}class $D{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=pn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new $D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(pn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class kT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const s=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new kT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new kT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=QD(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function ze(n,e){return n<e?-1:n>e?1:0}function Fp(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return pp(o)===pp(l)?ze(o,l):pp(o)?1:-1}return ze(n.length,e.length)}const XD=55296,WD=57343;function pp(n){const e=n.charCodeAt(0);return e>=XD&&e<=WD}function Vo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="__name__";class Bi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ne(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Bi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return ze(e.length,t.length)}static compareSegments(e,t){const s=Bi.isNumericId(e),o=Bi.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):Fp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Tr.fromString(e.substring(4,e.length-2))}}class dt extends Bi{construct(e,t,s){return new dt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const ZD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends Bi{construct(e,t,s){return new ln(e,t,s)}static isValidIdentifier(e){return ZD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===MT}static keyField(){return new ln([MT])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(s+=m,o++):(l(),o++)}if(l(),d)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(dt.fromString(e))}static fromName(e){return new be(dt.fromString(e).popFirst(5))}static empty(){return new be(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JD(n,e,t,s){if(e===!0&&s===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function VT(n){if(!be.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function LT(n){if(be.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function v0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Dd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Dd(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zc(n,e){if(!v0(n))throw new pe(te.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const d=n[s];if(o&&typeof d!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new pe(te.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UT=-62135596800,BT=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*BT);return new Re(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<UT)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/BT}_compareTo(e){return this.seconds===e.seconds?ze(this.nanoseconds,e.nanoseconds):ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-UT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:zt("string",Re._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{static fromTimestamp(e){return new je(e)}static min(){return new je(new Re(0,0))}static max(){return new je(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function ej(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=je.fromTimestamp(s===1e9?new Re(t+1,0):new Re(t,s));return new Sr(o,be.empty(),e)}function tj(n){return new Sr(n.readTime,n.key,Pc)}class Sr{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Sr(je.min(),be.empty(),Pc)}static max(){return new Sr(je.max(),be.empty(),Pc)}}function nj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==ij)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,s)=>{t(e)}))}static reject(e){return new le(((t,s)=>{s(e)}))}static waitFor(e){return new le(((t,s)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(g=>s(g)))})),d=!0,l===o&&t()}))}static or(e){let t=le.resolve(!1);for(const s of e)t=t.next((o=>o?le.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new le(((s,o)=>{const l=e.length,d=new Array(l);let m=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{d[y]=v,++m,m===l&&s(d)}),(v=>o(v)))}}))}static doWhile(e,t){return new le(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function rj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Qo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}jd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg=-1;function Od(n){return n==null}function od(n){return n===0&&1/n==-1/0}function aj(n){return typeof n=="number"&&Number.isInteger(n)&&!od(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="";function oj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=zT(e)),e=lj(n.get(t),e);return zT(e)}function lj(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case _0:t+="";break;default:t+=l}}return t}function zT(n){return n+_0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new Tt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new Tt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??on.RED,this.left=o??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new on(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Tt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new FT(this.data.getIterator())}getIteratorFrom(e){return new FT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class FT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Kt(ln.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T0("Invalid base64 string: "+l):l}})(e);return new cn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new cn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}cn.EMPTY_BYTE_STRING=new cn("");const cj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ar(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=cj.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Rr(n){return typeof n=="string"?cn.fromBase64String(n):cn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="server_timestamp",w0="__type__",S0="__previous_value__",A0="__local_write_time__";function kg(n){return(n?.mapValue?.fields||{})[w0]?.stringValue===b0}function Pd(n){const e=n.mapValue.fields[S0];return kg(e)?Pd(e):e}function kc(n){const e=Ar(n.mapValue.fields[A0].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,t,s,o,l,d,m,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const ld="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||ld}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===ld}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="__type__",hj="__max__",kh={mapValue:{}},x0="__vector__",cd="value";function xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kg(n)?4:fj(n)?9007199254740991:dj(n)?10:11:Ne(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=xr(n);if(t!==xr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kc(n).isEqual(kc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Ar(o.timestampValue),m=Ar(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Rr(o.bytesValue).isEqual(Rr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return jt(o.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(o.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return jt(o.integerValue)===jt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=jt(o.doubleValue),m=jt(l.doubleValue);return d===m?od(d)===od(m):isNaN(d)&&isNaN(m)}return!1})(n,e);case 9:return Vo(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(qT(d)!==qT(m))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(m[g]===void 0||!Ki(d[g],m[g])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function Vc(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function Lo(n,e){if(n===e)return 0;const t=xr(n),s=xr(e);if(t!==s)return ze(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return ze(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=jt(l.integerValue||l.doubleValue),g=jt(d.integerValue||d.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(n,e);case 3:return HT(n.timestampValue,e.timestampValue);case 4:return HT(kc(n),kc(e));case 5:return Fp(n.stringValue,e.stringValue);case 6:return(function(l,d){const m=Rr(l),g=Rr(d);return m.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),g=d.split("/");for(let y=0;y<m.length&&y<g.length;y++){const v=ze(m[y],g[y]);if(v!==0)return v}return ze(m.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=ze(jt(l.latitude),jt(d.latitude));return m!==0?m:ze(jt(l.longitude),jt(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return GT(n.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},g=d.fields||{},y=m[cd]?.arrayValue,v=g[cd]?.arrayValue,b=ze(y?.values?.length||0,v?.values?.length||0);return b!==0?b:GT(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===kh.mapValue&&d===kh.mapValue)return 0;if(l===kh.mapValue)return 1;if(d===kh.mapValue)return-1;const m=l.fields||{},g=Object.keys(m),y=d.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let b=0;b<g.length&&b<v.length;++b){const w=Fp(g[b],v[b]);if(w!==0)return w;const C=Lo(m[g[b]],y[v[b]]);if(C!==0)return C}return ze(g.length,v.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function HT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ze(n,e);const t=Ar(n),s=Ar(e),o=ze(t.seconds,s.seconds);return o!==0?o:ze(t.nanos,s.nanos)}function GT(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Lo(t[o],s[o]);if(l)return l}return ze(t.length,s.length)}function Uo(n){return Hp(n)}function Hp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ar(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Rr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Hp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of s)l?l=!1:o+=",",o+=`${d}:${Hp(t.fields[d])}`;return o+"}"})(n.mapValue):Ne(61005,{value:n})}function Kh(n){switch(xr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Pd(n);return e?16+Kh(e):16;case 5:return 2*n.stringValue.length;case 6:return Rr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Kh(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return jr(s.fields,((l,d)=>{o+=l.length+Kh(d)})),o})(n.mapValue);default:throw Ne(13486,{value:n})}}function $T(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gp(n){return!!n&&"integerValue"in n}function Mg(n){return!!n&&"arrayValue"in n}function YT(n){return!!n&&"nullValue"in n}function KT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qh(n){return!!n&&"mapValue"in n}function dj(n){return(n?.mapValue?.fields||{})[R0]?.stringValue===x0}function Ac(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return jr(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ac(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ac(n.arrayValue.values[t]);return e}return{...n}}function fj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(t)}setAll(e){let t=ln.emptyPath(),s={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=m.popLast()}d?s[m.lastSegment()]=Ac(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){jr(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Dn(Ac(this.value))}}function N0(n){const e=[];return jr(n.fields,((t,s)=>{const o=new ln([t]);if(Qh(s)){const l=N0(s.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,s,o,l,d,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new gn(e,0,je.min(),je.min(),je.min(),Dn.empty(),0)}static newFoundDocument(e,t,s,o){return new gn(e,1,t,je.min(),s,o,0)}static newNoDocument(e,t){return new gn(e,2,t,je.min(),je.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,je.min(),je.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(je.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=je.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.position=e,this.inclusive=t}}function QT(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(l.field.isKeyField()?s=be.comparator(be.fromName(d.referenceValue),t.key):s=Lo(d,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function XT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function mj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{}class Bt extends C0{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new gj(e,t,s):t==="array-contains"?new _j(e,s):t==="in"?new Ej(e,s):t==="not-in"?new Tj(e,s):t==="array-contains-any"?new bj(e,s):new Bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new yj(e,s):new vj(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Lo(t,this.value)):t!==null&&xr(this.value)===xr(t)&&this.matchesComparison(Lo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends C0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _i(e,t)}matches(e){return I0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function I0(n){return n.op==="and"}function D0(n){return pj(n)&&I0(n)}function pj(n){for(const e of n.filters)if(e instanceof _i)return!1;return!0}function $p(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+Uo(n.value);if(D0(n))return n.filters.map((e=>$p(e))).join(",");{const e=n.filters.map((t=>$p(t))).join(",");return`${n.op}(${e})`}}function j0(n,e){return n instanceof Bt?(function(s,o){return o instanceof Bt&&s.op===o.op&&s.field.isEqual(o.field)&&Ki(s.value,o.value)})(n,e):n instanceof _i?(function(s,o){return o instanceof _i&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,d,m)=>l&&j0(d,o.filters[m])),!0):!1})(n,e):void Ne(19439)}function O0(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Uo(t.value)}`})(n):n instanceof _i?(function(t){return t.op.toString()+" {"+t.getFilters().map(O0).join(" ,")+"}"})(n):"Filter"}class gj extends Bt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class yj extends Bt{constructor(e,t){super(e,"in",t),this.keys=P0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vj extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=P0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function P0(n,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class _j extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Mg(t)&&Vc(t.arrayValue,this.value)}}class Ej extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class Tj extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}}class bj extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Mg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Vc(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t=null,s=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function WT(n,e=null,t=[],s=[],o=null,l=null,d=null){return new wj(n,e,t,s,o,l,d)}function Vg(n){const e=Oe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>$p(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Od(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Uo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Uo(s))).join(",")),e.Te=t}return e.Te}function Lg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!j0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XT(n.startAt,e.startAt)&&XT(n.endAt,e.endAt)}function Yp(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t=null,s=[],o=[],l=null,d="F",m=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sj(n,e,t,s,o,l,d,m){return new Xo(n,e,t,s,o,l,d,m)}function kd(n){return new Xo(n)}function ZT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k0(n){return n.collectionGroup!==null}function Rc(n){const e=Oe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Kt(ln.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Lc(l,s))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Lc(ln.keyField(),s))}return e.Ie}function Hi(n){const e=Oe(n);return e.Ee||(e.Ee=Aj(e,Rc(n))),e.Ee}function Aj(n,e){if(n.limitType==="F")return WT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Lc(o.field,l)}));const t=n.endAt?new ud(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new ud(n.startAt.position,n.startAt.inclusive):null;return WT(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Kp(n,e){const t=n.filters.concat([e]);return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function hd(n,e,t){return new Xo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Md(n,e){return Lg(Hi(n),Hi(e))&&n.limitType===e.limitType}function M0(n){return`${Vg(Hi(n))}|lt:${n.limitType}`}function Ro(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>O0(o))).join(", ")}]`),Od(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Uo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Uo(o))).join(",")),`Target(${s})`})(Hi(n))}; limitType=${n.limitType})`}function Vd(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of Rc(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(d,m,g){const y=QT(d,m,g);return d.inclusive?y<=0:y<0})(s.startAt,Rc(s),o)||s.endAt&&!(function(d,m,g){const y=QT(d,m,g);return d.inclusive?y>=0:y>0})(s.endAt,Rc(s),o))})(n,e)}function Rj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V0(n){return(e,t)=>{let s=!1;for(const o of Rc(n)){const l=xj(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function xj(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,d,m){const g=d.data.field(l),y=m.data.field(l);return g!==null&&y!==null?Lo(g,y):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){jr(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return E0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj=new Tt(be.comparator);function js(){return Nj}const L0=new Tt(be.comparator);function yc(...n){let e=L0;for(const t of n)e=e.insert(t.key,t);return e}function U0(n){let e=L0;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ya(){return xc()}function B0(){return xc()}function xc(){return new Ia((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Cj=new Tt(be.comparator),Ij=new Kt(be.comparator);function qe(...n){let e=Ij;for(const t of n)e=e.add(t);return e}const Dj=new Kt(ze);function jj(){return Dj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:od(e)?"-0":e}}function z0(n){return{integerValue:""+n}}function Oj(n,e){return aj(e)?z0(e):Ug(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ld{constructor(){this._=void 0}}function Pj(n,e,t){return n instanceof Uc?(function(o,l){const d={fields:{[w0]:{stringValue:b0},[A0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&kg(l)&&(l=Pd(l)),l&&(d.fields[S0]=l),{mapValue:d}})(t,e):n instanceof Bc?F0(n,e):n instanceof zc?H0(n,e):(function(o,l){const d=q0(o,l),m=JT(d)+JT(o.Ae);return Gp(d)&&Gp(o.Ae)?z0(m):Ug(o.serializer,m)})(n,e)}function kj(n,e,t){return n instanceof Bc?F0(n,e):n instanceof zc?H0(n,e):t}function q0(n,e){return n instanceof dd?(function(s){return Gp(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Uc extends Ld{}class Bc extends Ld{constructor(e){super(),this.elements=e}}function F0(n,e){const t=G0(e);for(const s of n.elements)t.some((o=>Ki(o,s)))||t.push(s);return{arrayValue:{values:t}}}class zc extends Ld{constructor(e){super(),this.elements=e}}function H0(n,e){let t=G0(e);for(const s of n.elements)t=t.filter((o=>!Ki(o,s)));return{arrayValue:{values:t}}}class dd extends Ld{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function JT(n){return jt(n.integerValue||n.doubleValue)}function G0(n){return Mg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t){this.field=e,this.transform=t}}function Vj(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Bc&&o instanceof Bc||s instanceof zc&&o instanceof zc?Vo(s.elements,o.elements,Ki):s instanceof dd&&o instanceof dd?Ki(s.Ae,o.Ae):s instanceof Uc&&o instanceof Uc})(n.transform,e.transform)}class Lj{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Ud{}function $0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Bg(n.key,Pn.none()):new Jc(n.key,n.data,Pn.none());{const t=n.data,s=Dn.empty();let o=new Kt(ln.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?s.delete(l):s.set(l,d),o=o.add(l)}return new Or(n.key,s,new Yn(o.toArray()),Pn.none())}}function Uj(n,e,t){n instanceof Jc?(function(o,l,d){const m=o.value.clone(),g=tb(o.fieldTransforms,l,d.transformResults);m.setAll(g),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(n,e,t):n instanceof Or?(function(o,l,d){if(!Xh(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=tb(o.fieldTransforms,l,d.transformResults),g=l.data;g.setAll(Y0(o)),g.setAll(m),l.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(n,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Nc(n,e,t,s){return n instanceof Jc?(function(l,d,m,g){if(!Xh(l.precondition,d))return m;const y=l.value.clone(),v=nb(l.fieldTransforms,g,d);return y.setAll(v),d.convertToFoundDocument(d.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof Or?(function(l,d,m,g){if(!Xh(l.precondition,d))return m;const y=nb(l.fieldTransforms,g,d),v=d.data;return v.setAll(Y0(l)),v.setAll(y),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,s):(function(l,d,m){return Xh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(n,e,t)}function Bj(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=q0(s.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(s.field,l))}return t||null}function eb(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Vo(s,o,((l,d)=>Vj(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jc extends Ud{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Or extends Ud{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Y0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function tb(n,e,t){const s=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);s.set(l.field,kj(d,m,t[o]))}return s}function nb(n,e,t){const s=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);s.set(o.field,Pj(l,d,e))}return s}class Bg extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zj extends Ud{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Uj(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Nc(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Nc(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=B0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const g=$0(d,m);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(je.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),qe())}isEqual(e){return this.batchId===e.batchId&&Vo(this.mutations,e.mutations,((t,s)=>eb(t,s)))&&Vo(this.baseMutations,e.baseMutations,((t,s)=>eb(t,s)))}}class zg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Je(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Cj})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,s[d].version);return new zg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,$e;function Gj(n){switch(n){case te.OK:return Ne(64938);case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function K0(n){if(n===void 0)return Ds("GRPC error has no .code"),te.UNKNOWN;switch(n){case Vt.OK:return te.OK;case Vt.CANCELLED:return te.CANCELLED;case Vt.UNKNOWN:return te.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return te.INTERNAL;case Vt.UNAVAILABLE:return te.UNAVAILABLE;case Vt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Vt.NOT_FOUND:return te.NOT_FOUND;case Vt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Vt.ABORTED:return te.ABORTED;case Vt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Vt.DATA_LOSS:return te.DATA_LOSS;default:return Ne(39323,{code:n})}}($e=Vt||(Vt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new Tr([4294967295,4294967295],0);function ib(n){const e=$j().encode(n),t=new c0;return t.update(e),new Uint8Array(t.digest())}function sb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Tr([t,s],0),new Tr([o,l],0)]}class qg{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new vc(`Invalid padding: ${t}`);if(s<0)throw new vc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new vc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Tr.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Tr.fromNumber(s)));return o.compare(Yj)===1&&(o=new Tr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=ib(e),[s,o]=sb(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);if(!this.we(d))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new qg(l,o,t);return s.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=ib(e),[s,o]=sb(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(s,o,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Bd(je.min(),o,new Tt(ze),js(),qe())}}class eu{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new eu(s,t,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Q0{constructor(e,t){this.targetId=e,this.Ce=t}}class X0{constructor(e,t,s=cn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class rb{constructor(){this.ve=0,this.Fe=ab(),this.Me=cn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=qe(),t=qe(),s=qe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ne(38017,{changeType:l})}})),new eu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=ab()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Kj{constructor(e){this.Ge=e,this.ze=new Map,this.je=js(),this.Je=Mh(),this.He=Mh(),this.Ye=new Tt(ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Yp(l))if(s===0){const d=new be(l.path);this.et(t,d,gn.newNoDocument(d,je.min()))}else Je(s===1,20013,{expectedCount:s});else{const d=this._t(t);if(d!==s){const m=this.ut(e),g=m?this.ct(m,e,d):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=Rr(s).toUint8Array()}catch(g){if(g instanceof T0)return Mo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new qg(d,o,l)}catch(g){return Mo(g instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&Yp(m.target)){const g=new be(m.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,gn.newNoDocument(g,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let s=qe();this.He.forEach(((l,d)=>{let m=!0;d.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new Bd(e,t,this.Ye,this.je,s);return this.je=js(),this.Je=Mh(),this.He=Mh(),this.Ye=new Tt(ze),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new rb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new rb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mh(){return new Tt(be.comparator)}function ab(){return new Tt(be.comparator)}const Qj={asc:"ASCENDING",desc:"DESCENDING"},Xj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wj={and:"AND",or:"OR"};class Zj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Qp(n,e){return n.useProto3Json||Od(e)?e:{value:e}}function fd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Jj(n,e){return fd(n,e.toTimestamp())}function Gi(n){return Je(!!n,49232),je.fromTimestamp((function(t){const s=Ar(t);return new Re(s.seconds,s.nanos)})(n))}function Fg(n,e){return Xp(n,e).canonicalString()}function Xp(n,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Z0(n){const e=dt.fromString(n);return Je(iS(e),10190,{key:e.toString()}),e}function Wp(n,e){return Fg(n.databaseId,e.path)}function gp(n,e){const t=Z0(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(eS(t))}function J0(n,e){return Fg(n.databaseId,e)}function e2(n){const e=Z0(n);return e.length===4?dt.emptyPath():eS(e)}function Zp(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eS(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ob(n,e,t){return{name:Wp(n,e),fields:t.value.mapValue.fields}}function t2(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ne(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(Je(v===void 0||typeof v=="string",58123),cn.fromBase64String(v||"")):(Je(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),cn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(y){const v=y.code===void 0?te.UNKNOWN:K0(y.code);return new pe(v,y.message||"")})(d);t=new X0(s,o,l,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=gp(n,s.document.name),l=Gi(s.document.updateTime),d=s.document.createTime?Gi(s.document.createTime):je.min(),m=new Dn({mapValue:{fields:s.document.fields}}),g=gn.newFoundDocument(o,l,d,m),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Wh(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=gp(n,s.document),l=s.readTime?Gi(s.readTime):je.min(),d=gn.newNoDocument(o,l),m=s.removedTargetIds||[];t=new Wh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=gp(n,s.document),l=s.removedTargetIds||[];t=new Wh([],l,o,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,d=new Hj(o,l),m=s.targetId;t=new Q0(m,d)}}return t}function n2(n,e){let t;if(e instanceof Jc)t={update:ob(n,e.key,e.value)};else if(e instanceof Bg)t={delete:Wp(n,e.key)};else if(e instanceof Or)t={update:ob(n,e.key,e.data),updateMask:h2(e.fieldMask)};else{if(!(e instanceof zj))return Ne(16599,{Vt:e.type});t={verify:Wp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,d){const m=d.transform;if(m instanceof Uc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Bc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof zc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof dd)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw Ne(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Jj(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ne(27497)})(n,e.precondition)),t}function i2(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(o,l){let d=o.updateTime?Gi(o.updateTime):Gi(l);return d.isEqual(je.min())&&(d=Gi(l)),new Lj(d,o.transformResults||[])})(t,e)))):[]}function s2(n,e){return{documents:[J0(n,e.path)]}}function r2(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=J0(n,o);const l=(function(y){if(y.length!==0)return nS(_i.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(y){if(y.length!==0)return y.map((v=>(function(w){return{field:xo(w.field),direction:l2(w.dir)}})(v)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Qp(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function a2(n){let e=e2(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Je(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(b){const w=tS(b);return w instanceof _i&&D0(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((w=>(function(L){return new Lc(No(L.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(L.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,Od(w)?null:w})(t.limit));let g=null;t.startAt&&(g=(function(b){const w=!!b.before,C=b.values||[];return new ud(C,w)})(t.startAt));let y=null;return t.endAt&&(y=(function(b){const w=!b.before,C=b.values||[];return new ud(C,w)})(t.endAt)),Sj(e,o,d,l,m,"F",g,y)}function o2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=No(t.unaryFilter.field);return Bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _i.create(t.compositeFilter.filters.map((s=>tS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function l2(n){return Qj[n]}function c2(n){return Xj[n]}function u2(n){return Wj[n]}function xo(n){return{fieldPath:n.canonicalString()}}function No(n){return ln.fromServerFormat(n.fieldPath)}function nS(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(KT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(YT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(KT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(YT(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:c2(t.op),value:t.value}}})(n):n instanceof _i?(function(t){const s=t.getFilters().map((o=>nS(o)));return s.length===1?s[0]:{compositeFilter:{op:u2(t.op),filters:s}}})(n):Ne(54877,{filter:n})}function h2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function iS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,t,s,o,l=je.min(),d=je.min(),m=cn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.yt=e}}function f2(n){const e=a2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Cn=new p2}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Sr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Sr.min())}updateCollectionGroup(e,t,s){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class p2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Kt(dt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Kt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sS=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(sS,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Bo(0)}static cr(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="LruGarbageCollector",g2=1048576;function ub([n,e],[t,s]){const o=ze(n,t);return o===0?ze(e,s):o}class y2{constructor(e){this.Ir=e,this.buffer=new Kt(ub),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();ub(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(cb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Qo(t)?ye(cb,"Ignoring IndexedDB error during garbage collection: ",t):await Ko(t)}await this.Vr(3e5)}))}}class _2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(jd.ce);const s=new y2(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(lb)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lb):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,d,m,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,t)))).next((b=>(l=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(y=Date.now(),Ao()<=Be.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-v}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(g-m)+`ms
	Removed ${b} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function E2(n,e){return new _2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.changes=new Ia((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?le.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Nc(s.mutation,o,Yn.empty(),Re.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=qe()){const o=ya();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let d=yc();return l.forEach(((m,g)=>{d=d.insert(m,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const s=ya();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,qe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,s,o){let l=js();const d=xc(),m=(function(){return xc()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Or)?l=l.insert(y.key,y):v!==void 0?(d.set(y.key,v.mutation.getFieldMask()),Nc(v.mutation,y,v.mutation.getFieldMask(),Re.now())):d.set(y.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>d.set(y,v))),t.forEach(((y,v)=>m.set(y,new b2(v,d.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=xc();let o=new Tt(((d,m)=>d-m)),l=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||Yn.empty();v=m.applyToLocalView(y,v),s.set(g,v);const b=(o.get(m.batchId)||qe()).add(g);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,v=g.value,b=B0();v.forEach((w=>{if(!l.has(w)){const C=$0(t.get(w),s.get(w));C!==null&&b.set(w,C),l=l.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,y,b))}return le.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):le.resolve(ya());let m=Pc,g=l;return d.next((y=>le.forEach(y,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(v)?le.resolve():this.remoteDocumentCache.getEntry(e,v).next((w=>{g=g.insert(v,w)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,qe()))).next((v=>({batchId:m,changes:U0(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let o=yc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let d=yc();return this.indexManager.getCollectionParents(e,l).next((m=>le.forEach(m,(g=>{const y=(function(b,w){return new Xo(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((b,w)=>{d=d.insert(b,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((d=>{l.forEach(((g,y)=>{const v=y.getKey();d.get(v)===null&&(d=d.insert(v,gn.newInvalidDocument(v)))}));let m=yc();return d.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Nc(v.mutation,y,Yn.empty(),Re.now()),Vd(t,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Gi(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:f2(o.bundledQuery),readTime:Gi(o.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.overlays=new Tt(be.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ya();return le.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),le.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),le.resolve()}getOverlaysForCollection(e,t,s){const o=ya(),l=t.length+1,d=new be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Tt(((y,v)=>y-v));const d=this.overlays.getIterator();for(;d.hasNext();){const y=d.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=ya(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=ya(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>m.set(y,v))),!(m.size()>=o)););return le.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new Fj(t,s));let l=this.qr.get(t);l===void 0&&(l=qe(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.sessionToken=cn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(){this.Qr=new Kt(en.$r),this.Ur=new Kt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new en(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new dt([])),s=new en(t,e),o=new en(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new dt([])),s=new en(t,e),o=new en(t,e+1);let l=qe();return this.Ur.forEachInRange([s,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new en(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||ze(e.Yr,t.Yr)}static Kr(e,t){return ze(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(en.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new qj(l,t,s,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new en(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Pg:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new en(t,0),o=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(d=>{const m=this.Xr(d.Yr);l.push(m)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kt(ze);return t.forEach((o=>{const l=new en(o,0),d=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(m=>{s=s.add(m.Yr)}))})),le.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const d=new en(new be(l),0);let m=new Kt(ze);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),d),le.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return le.forEach(t.mutations,(o=>{const l=new en(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new en(t,0),o=this.Zr.firstAfterOrEqual(s);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.ri=e,this.docs=(function(){return new Tt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return le.resolve(s?s.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let s=js();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():gn.newInvalidDocument(o))})),le.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=js();const d=t.path,m=new be(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!d.isPrefixOf(y.path))break;y.path.length>d.length+1||nj(tj(v),s)<=0||(o.has(v.key)||Vd(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ne(9500)}ii(e,t){return le.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new C2(this)}getSize(e){return le.resolve(this.size)}}class C2 extends T2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.persistence=e,this.si=new Ia((t=>Vg(t)),Lg),this.lastRemoteSnapshotVersion=je.min(),this.highestTargetId=0,this.oi=0,this._i=new Hg,this.targetCount=0,this.ai=Bo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Bo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return le.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),le.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return le.resolve(s)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.ui={},this.overlays={},this.ci=new jd(0),this.li=!1,this.li=!0,this.hi=new R2,this.referenceDelegate=e(this),this.Pi=new I2(this),this.indexManager=new m2,this.remoteDocumentCache=(function(o){return new N2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new d2(t),this.Ii=new S2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new A2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new x2(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ye("MemoryPersistence","Starting transaction:",e);const o=new D2(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return le.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class D2 extends sj{constructor(e){super(),this.currentSequenceNumber=e}}class Gg{constructor(e){this.persistence=e,this.Ri=new Hg,this.Vi=null}static mi(e){return new Gg(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),le.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(s=>{const o=be.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,je.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class md{constructor(e,t){this.persistence=e,this.pi=new Ia((s=>oj(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=E2(this,t)}static mi(e,t){return new md(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?le.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(s++,l.removeEntry(d,je.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kh(e.data.value)),t}br(e,t,s){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return le.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=qe(),o=qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new $g(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return G1()?8:rj(_n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new j2;return this.Ss(e,t,d).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Ao()<=Be.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Ro(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Ao()<=Be.DEBUG&&ye("QueryEngine","Query:",Ro(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Ao()<=Be.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Ro(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):le.resolve())}ys(e,t){if(ZT(t))return le.resolve(null);let s=Hi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=hd(t,null,"F"),s=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const d=qe(...l);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,m);return this.Cs(t,y,d,g.readTime)?this.ys(e,hd(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return ZT(t)||o.isEqual(je.min())?le.resolve(null):this.ps.getDocuments(e,s).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,s,o)?le.resolve(null):(Ao()<=Be.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Ro(t)),this.vs(e,d,t,ej(o,Pc)).next((m=>m)))}))}Ds(e,t){let s=new Kt(V0(e));return t.forEach(((o,l)=>{Vd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Ao()<=Be.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Ro(t)),this.ps.getDocumentsMatchingQuery(e,t,Sr.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg="LocalStore",P2=3e8;class k2{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new Tt(ze),this.xs=new Ia((l=>Vg(l)),Lg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function M2(n,e,t,s){return new k2(n,e,t,s)}async function aS(n,e){const t=Oe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const d=[],m=[];let g=qe();for(const y of o){d.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){m.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:d,addedBatchIds:m})))}))}))}function V2(n,e){const t=Oe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,v){const b=y.batch,w=b.keys();let C=le.resolve();return w.forEach((L=>{C=C.next((()=>v.getEntry(g,L))).next((z=>{const j=y.docVersions.get(L);Je(j!==null,48541),z.version.compareTo(j)<0&&(b.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),v.addEntry(z)))}))})),C.next((()=>m.mutationQueue.removeMutationBatch(g,b)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let g=qe();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function oS(n){const e=Oe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function L2(n,e){const t=Oe(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const w=o.get(b);if(!w)return;m.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,b))));let C=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?C=C.withResumeToken(cn.EMPTY_BYTE_STRING,je.min()).withLastLimboFreeSnapshotVersion(je.min()):v.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(v.resumeToken,s)),o=o.insert(b,C),(function(z,j,Y){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=P2?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(w,C,v)&&m.push(t.Pi.updateTargetData(l,C))}));let g=js(),y=qe();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),m.push(U2(l,d,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(je.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));m.push(v)}return le.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function U2(n,e,t){let s=qe(),o=qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let d=js();return t.forEach(((m,g)=>{const y=l.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(je.min())?(e.removeEntry(m,g.readTime),d=d.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),d=d.insert(m,g)):ye(Yg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function B2(n,e){const t=Oe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function z2(n,e){const t=Oe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,le.resolve(o)):t.Pi.allocateTargetId(s).next((d=>(o=new vr(e,d,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Jp(n,e,t){const s=Oe(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Qo(d))throw d;ye(Yg,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function hb(n,e,t){const s=Oe(n);let o=je.min(),l=qe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,y,v){const b=Oe(g),w=b.xs.get(v);return w!==void 0?le.resolve(b.Ms.get(w)):b.Pi.getTargetData(y,v)})(s,d,Hi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,m.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,t?o:je.min(),t?l:qe()))).next((m=>(q2(s,Rj(e),m),{documents:m,Qs:l})))))}function q2(n,e,t){let s=n.Os.get(e)||je.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class db{constructor(){this.activeTargetIds=jj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F2{constructor(){this.Mo=new db,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new db,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="ConnectivityMonitor";class mb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(fb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(fb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function eg(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="RestConnection",G2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===ld?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const d=eg(),m=this.zo(e,t.toUriEncodedString());ye(yp,`Sending RPC '${e}' ${d}:`,m,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(m),v=Ps(y);return this.Jo(e,m,g,s,v).then((b=>(ye(yp,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Mo(yp,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",s),b}))}Ho(e,t,s,o,l,d){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=G2[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class K2 extends $2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const d=eg();return new Promise(((m,g)=>{const y=new u0;y.setWithCredentials(!0),y.listenOnce(h0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Yh.NO_ERROR:const b=y.getResponseJson();ye(fn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Yh.TIMEOUT:ye(fn,`RPC '${e}' ${d} timed out`),g(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Yh.HTTP_ERROR:const w=y.getStatus();if(ye(fn,`RPC '${e}' ${d} failed with status:`,w,"response text:",y.getResponseText()),w>0){let C=y.getResponseJson();Array.isArray(C)&&(C=C[0]);const L=C?.error;if(L&&L.status&&L.message){const z=(function(Y){const K=Y.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(K)>=0?K:te.UNKNOWN})(L.status);g(new pe(z,L.message))}else g(new pe(te.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:d,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ye(fn,`RPC '${e}' ${d} completed.`)}}));const v=JSON.stringify(o);ye(fn,`RPC '${e}' ${d} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=eg(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=m0(),m=f0(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ye(fn,`Creating RPC '${e}' stream ${o}: ${v}`,g);const b=d.createWebChannel(v,g);this.I_(b);let w=!1,C=!1;const L=new Y2({Yo:j=>{C?ye(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(w||(ye(fn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),ye(fn,`RPC '${e}' stream ${o} sending:`,j),b.send(j))},Zo:()=>b.close()}),z=(j,Y,K)=>{j.listen(Y,(X=>{try{K(X)}catch(se){setTimeout((()=>{throw se}),0)}}))};return z(b,gc.EventType.OPEN,(()=>{C||(ye(fn,`RPC '${e}' stream ${o} transport opened.`),L.o_())})),z(b,gc.EventType.CLOSE,(()=>{C||(C=!0,ye(fn,`RPC '${e}' stream ${o} transport closed`),L.a_(),this.E_(b))})),z(b,gc.EventType.ERROR,(j=>{C||(C=!0,Mo(fn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),L.a_(new pe(te.UNAVAILABLE,"The operation could not be completed")))})),z(b,gc.EventType.MESSAGE,(j=>{if(!C){const Y=j.data[0];Je(!!Y,16349);const K=Y,X=K?.error||K[0]?.error;if(X){ye(fn,`RPC '${e}' stream ${o} received error:`,X);const se=X.status;let ie=(function(R){const x=Vt[R];if(x!==void 0)return K0(x)})(se),B=X.message;ie===void 0&&(ie=te.INTERNAL,B="Unknown error status: "+se+" with message "+X.message),C=!0,L.a_(new pe(ie,B)),b.close()}else ye(fn,`RPC '${e}' stream ${o} received:`,Y),L.u_(Y)}})),z(m,d0.STAT_EVENT,(j=>{j.stat===qp.PROXY?ye(fn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===qp.NOPROXY&&ye(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{L.__()}),0),L}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n){return new Zj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pb="PersistentStream";class cS{constructor(e,t,s,o,l,d,m,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Ds(t.toString()),Ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new pe(te.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(pb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(pb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q2 extends cS{constructor(e,t,s,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t2(this.serializer,e),s=(function(l){if(!("targetChange"in l))return je.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?je.min():d.readTime?Gi(d.readTime):je.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Zp(this.serializer),t.addTarget=(function(l,d){let m;const g=d.target;if(m=Yp(g)?{documents:s2(l,g)}:{query:r2(l,g).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=W0(l,d.resumeToken);const y=Qp(l,d.expectedCount);y!==null&&(m.expectedCount=y)}else if(d.snapshotVersion.compareTo(je.min())>0){m.readTime=fd(l,d.snapshotVersion.toTimestamp());const y=Qp(l,d.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=o2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Zp(this.serializer),t.removeTarget=e,this.q_(t)}}class X2 extends cS{constructor(e,t,s,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=i2(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Zp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>n2(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{}class Z2 extends W2{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Xp(t,s),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Xp(t,s),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new pe(te.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ds(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ra="RemoteStore";class eO{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Da(this)&&(ye(Ra,"Restarting streams for network reachability change."),await(async function(g){const y=Oe(g);y.Ea.add(4),await tu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await qd(y)})(this))}))})),this.Ra=new J2(s,o)}}async function qd(n){if(Da(n))for(const e of n.da)await e(!0)}async function tu(n){for(const e of n.da)await e(!1)}function uS(n,e){const t=Oe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Wg(t)?Xg(t):Wo(t).O_()&&Qg(t,e))}function Kg(n,e){const t=Oe(n),s=Wo(t);t.Ia.delete(e),s.O_()&&hS(t,e),t.Ia.size===0&&(s.O_()?s.L_():Da(t)&&t.Ra.set("Unknown"))}function Qg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(je.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Wo(n).Y_(e)}function hS(n,e){n.Va.Ue(e),Wo(n).Z_(e)}function Xg(n){n.Va=new Kj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Wo(n).start(),n.Ra.ua()}function Wg(n){return Da(n)&&!Wo(n).x_()&&n.Ia.size>0}function Da(n){return Oe(n).Ea.size===0}function dS(n){n.Va=void 0}async function tO(n){n.Ra.set("Online")}async function nO(n){n.Ia.forEach(((e,t)=>{Qg(n,e)}))}async function iO(n,e){dS(n),Wg(n)?(n.Ra.ha(e),Xg(n)):n.Ra.set("Unknown")}async function sO(n,e,t){if(n.Ra.set("Online"),e instanceof X0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(n,e)}catch(s){ye(Ra,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await pd(n,s)}else if(e instanceof Wh?n.Va.Ze(e):e instanceof Q0?n.Va.st(e):n.Va.tt(e),!t.isEqual(je.min()))try{const s=await oS(n.localStore);t.compareTo(s)>=0&&await(function(l,d){const m=l.Va.Tt(d);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,d))}})),m.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(cn.EMPTY_BYTE_STRING,v.snapshotVersion)),hS(l,g);const b=new vr(v.target,g,y,v.sequenceNumber);Qg(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(s){ye(Ra,"Failed to raise snapshot:",s),await pd(n,s)}}async function pd(n,e,t){if(!Qo(e))throw e;n.Ea.add(1),await tu(n),n.Ra.set("Offline"),t||(t=()=>oS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ra,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await qd(n)}))}function fS(n,e){return e().catch((t=>pd(n,t,e)))}async function Fd(n){const e=Oe(n),t=Nr(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pg;for(;rO(e);)try{const o=await B2(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,aO(e,o)}catch(o){await pd(e,o)}mS(e)&&pS(e)}function rO(n){return Da(n)&&n.Ta.length<10}function aO(n,e){n.Ta.push(e);const t=Nr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mS(n){return Da(n)&&!Nr(n).x_()&&n.Ta.length>0}function pS(n){Nr(n).start()}async function oO(n){Nr(n).ra()}async function lO(n){const e=Nr(n);for(const t of n.Ta)e.ea(t.mutations)}async function cO(n,e,t){const s=n.Ta.shift(),o=zg.from(s,e,t);await fS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Fd(n)}async function uO(n,e){e&&Nr(n).X_&&await(async function(s,o){if((function(d){return Gj(d)&&d!==te.ABORTED})(o.code)){const l=s.Ta.shift();Nr(s).B_(),await fS(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Fd(s)}})(n,e),mS(n)&&pS(n)}async function gb(n,e){const t=Oe(n);t.asyncQueue.verifyOperationInProgress(),ye(Ra,"RemoteStore received new credentials");const s=Da(t);t.Ea.add(3),await tu(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await qd(t)}async function hO(n,e){const t=Oe(n);e?(t.Ea.delete(2),await qd(t)):e||(t.Ea.add(2),await tu(t),t.Ra.set("Unknown"))}function Wo(n){return n.ma||(n.ma=(function(t,s,o){const l=Oe(t);return l.sa(),new Q2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:tO.bind(null,n),t_:nO.bind(null,n),r_:iO.bind(null,n),H_:sO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Wg(n)?Xg(n):n.Ra.set("Unknown")):(await n.ma.stop(),dS(n))}))),n.ma}function Nr(n){return n.fa||(n.fa=(function(t,s,o){const l=Oe(t);return l.sa(),new X2(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:oO.bind(null,n),r_:uO.bind(null,n),ta:lO.bind(null,n),na:cO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Fd(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ra,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new As,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const d=Date.now()+s,m=new Zg(e,t,d,o,l);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jg(n,e){if(Ds("AsyncQueue",`${e}: ${n}`),Qo(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=yc(),this.sortedSet=new Tt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(){this.ga=new Tt(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class zo{constructor(e,t,s,o,l,d,m,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new zo(e,t,Po.emptySet(t),d,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fO{constructor(){this.queries=vb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Oe(t),l=o.queries;o.queries=vb(),l.forEach(((d,m)=>{for(const g of m.Sa)g.onError(s)}))})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function vb(){return new Ia((n=>M0(n)),Md)}async function ey(n,e){const t=Oe(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new dO,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Jg(d,`Initialization of query '${Ro(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ny(t)}async function ty(n,e){const t=Oe(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function mO(n,e){const t=Oe(n);let s=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.Sa)m.Fa(o)&&(s=!0);d.wa=o}}s&&ny(t)}function pO(n,e,t){const s=Oe(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function ny(n){n.Ca.forEach((e=>{e.next()}))}var tg,_b;(_b=tg||(tg={})).Ma="default",_b.Cache="cache";class iy{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new zo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=zo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==tg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class gO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=qe(),this.mutatedKeys=qe(),this.eu=V0(e),this.tu=new Po(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new yb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,b)=>{const w=o.get(v),C=Vd(this.query,b)?b:null,L=!!w&&this.mutatedKeys.has(w.key),z=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let j=!1;w&&C?w.data.isEqual(C.data)?L!==z&&(s.track({type:3,doc:C}),j=!0):this.su(w,C)||(s.track({type:2,doc:C}),j=!0,(g&&this.eu(C,g)>0||y&&this.eu(C,y)<0)&&(m=!0)):!w&&C?(s.track({type:0,doc:C}),j=!0):w&&!C&&(s.track({type:1,doc:w}),j=!0,(g||y)&&(m=!0)),j&&(C?(d=d.add(C),l=z?l.add(v):l.delete(v)):(d=d.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const v=this.query.limitType==="F"?d.last():d.first();d=d.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:d,iu:s,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((v,b)=>(function(C,L){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:j})}};return z(C)-z(L)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,d.length!==0||y?{snapshot:new zo(this.query,e.tu,l,d,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new yb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new yS(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new gS(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sy="SyncEngine";class yO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class vO{constructor(e){this.key=e,this.hu=!1}}class _O{constructor(e,t,s,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ia((m=>M0(m)),Md),this.Iu=new Map,this.Eu=new Set,this.du=new Tt(be.comparator),this.Au=new Map,this.Ru=new Hg,this.Vu={},this.mu=new Map,this.fu=Bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EO(n,e,t=!0){const s=wS(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await vS(s,e,t,!0),o}async function TO(n,e){const t=wS(n);await vS(t,e,!0,!1)}async function vS(n,e,t,s){const o=await z2(n.localStore,Hi(e)),l=o.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let m;return s&&(m=await bO(n,e,l,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&uS(n.remoteStore,o),m}async function bO(n,e,t,s,o){n.pu=(b,w,C)=>(async function(z,j,Y,K){let X=j.view.ru(Y);X.Cs&&(X=await hb(z.localStore,j.query,!1).then((({documents:I})=>j.view.ru(I,X))));const se=K&&K.targetChanges.get(j.targetId),ie=K&&K.targetMismatches.get(j.targetId)!=null,B=j.view.applyChanges(X,z.isPrimaryClient,se,ie);return Tb(z,j.targetId,B.au),B.snapshot})(n,b,w,C);const l=await hb(n.localStore,e,!0),d=new gO(e,l.Qs),m=d.ru(l.documents),g=eu.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=d.applyChanges(m,n.isPrimaryClient,g);Tb(n,t,y.au);const v=new yO(e,t,d);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function wO(n,e,t){const s=Oe(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((d=>!Md(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Jp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Kg(s.remoteStore,o.targetId),ng(s,o.targetId)})).catch(Ko)):(ng(s,o.targetId),await Jp(s.localStore,o.targetId,!0))}async function SO(n,e){const t=Oe(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Kg(t.remoteStore,s.targetId))}async function AO(n,e,t){const s=jO(n);try{const o=await(function(d,m){const g=Oe(d),y=Re.now(),v=m.reduce(((C,L)=>C.add(L.key)),qe());let b,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(C=>{let L=js(),z=qe();return g.Ns.getEntries(C,v).next((j=>{L=j,L.forEach(((Y,K)=>{K.isValidDocument()||(z=z.add(Y))}))})).next((()=>g.localDocuments.getOverlayedDocuments(C,L))).next((j=>{b=j;const Y=[];for(const K of m){const X=Bj(K,b.get(K.key).overlayedDocument);X!=null&&Y.push(new Or(K.key,X,N0(X.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(C,y,Y,m)})).next((j=>{w=j;const Y=j.applyToLocalDocumentSet(b,z);return g.documentOverlayCache.saveOverlays(C,j.batchId,Y)}))})).then((()=>({batchId:w.batchId,changes:U0(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,m,g){let y=d.Vu[d.currentUser.toKey()];y||(y=new Tt(ze)),y=y.insert(m,g),d.Vu[d.currentUser.toKey()]=y})(s,o.batchId,t),await nu(s,o.changes),await Fd(s.remoteStore)}catch(o){const l=Jg(o,"Failed to persist write");t.reject(l)}}async function _S(n,e){const t=Oe(n);try{const s=await L2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Je(d.hu,14607):o.removedDocuments.size>0&&(Je(d.hu,42227),d.hu=!1))})),await nu(t,s,e)}catch(s){await Ko(s)}}function Eb(n,e,t){const s=Oe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const g=Oe(d);g.onlineState=m;let y=!1;g.queries.forEach(((v,b)=>{for(const w of b.Sa)w.va(m)&&(y=!0)})),y&&ny(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function RO(n,e,t){const s=Oe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let d=new Tt(be.comparator);d=d.insert(l,gn.newNoDocument(l,je.min()));const m=qe().add(l),g=new Bd(je.min(),new Map,new Tt(ze),d,m);await _S(s,g),s.du=s.du.remove(l),s.Au.delete(e),ry(s)}else await Jp(s.localStore,e,!1).then((()=>ng(s,e,t))).catch(Ko)}async function xO(n,e){const t=Oe(n),s=e.batch.batchId;try{const o=await V2(t.localStore,e);TS(t,s,null),ES(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await nu(t,o)}catch(o){await Ko(o)}}async function NO(n,e,t){const s=Oe(n);try{const o=await(function(d,m){const g=Oe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,m).next((b=>(Je(b!==null,37113),v=b.keys(),g.mutationQueue.removeMutationBatch(y,b)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);TS(s,e,t),ES(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await nu(s,o)}catch(o){await Ko(o)}}function ES(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function TS(n,e,t){const s=Oe(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function ng(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||bS(n,s)}))}function bS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Kg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),ry(n))}function Tb(n,e,t){for(const s of t)s instanceof gS?(n.Ru.addReference(s.key,e),CO(n,s)):s instanceof yS?(ye(sy,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||bS(n,s.key)):Ne(19791,{wu:s})}function CO(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ye(sy,"New document in limbo: "+t),n.Eu.add(s),ry(n))}function ry(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(dt.fromString(e)),s=n.fu.next();n.Au.set(s,new vO(t)),n.du=n.du.insert(t,s),uS(n.remoteStore,new vr(Hi(kd(t.path)),s,"TargetPurposeLimboResolution",jd.ce))}}async function nu(n,e,t){const s=Oe(n),o=[],l=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,g)=>{d.push(s.pu(g,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,v?"current":"not-current")}if(y){o.push(y);const v=$g.As(g.targetId,y);l.push(v)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,y){const v=Oe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(y,(w=>le.forEach(w.Es,(C=>v.persistence.referenceDelegate.addReference(b,w.targetId,C))).next((()=>le.forEach(w.ds,(C=>v.persistence.referenceDelegate.removeReference(b,w.targetId,C)))))))))}catch(b){if(!Qo(b))throw b;ye(Yg,"Failed to update sequence numbers: "+b)}for(const b of y){const w=b.targetId;if(!b.fromCache){const C=v.Ms.get(w),L=C.snapshotVersion,z=C.withLastLimboFreeSnapshotVersion(L);v.Ms=v.Ms.insert(w,z)}}})(s.localStore,l))}async function IO(n,e){const t=Oe(n);if(!t.currentUser.isEqual(e)){ye(sy,"User change. New user:",e.toKey());const s=await aS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((g=>{g.reject(new pe(te.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await nu(t,s.Ls)}}function DO(n,e){const t=Oe(n),s=t.Au.get(e);if(s&&s.hu)return qe().add(s.key);{let o=qe();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function wS(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RO.bind(null,e),e.Pu.H_=mO.bind(null,e.eventManager),e.Pu.yu=pO.bind(null,e.eventManager),e}function jO(n){const e=Oe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=NO.bind(null,e),e}class gd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return M2(this.persistence,new O2,e.initialUser,this.serializer)}Cu(e){return new rS(Gg.mi,this.serializer)}Du(e){return new F2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}gd.provider={build:()=>new gd};class OO extends gd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof md,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new v2(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new rS((s=>md.mi(s,t)),this.serializer)}}class ig{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Eb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IO.bind(null,this.syncEngine),await hO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fO})()}createDatastore(e){const t=zd(e.databaseInfo.databaseId),s=(function(l){return new K2(l)})(e.databaseInfo);return(function(l,d,m,g){return new Z2(l,d,m,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,d,m){return new eO(s,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>Eb(this.syncEngine,t,0)),(function(){return mb.v()?new mb:new H2})())}createSyncEngine(e,t){return(function(o,l,d,m,g,y,v){const b=new _O(o,l,d,m,g,y);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Oe(t);ye(Ra,"RemoteStore shutting down."),s.Ea.add(5),await tu(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ig.provider={build:()=>new ig};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr="FirestoreClient";class PO{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=pn.UNAUTHENTICATED,this.clientId=Og.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async d=>{ye(Cr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ye(Cr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new As;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Jg(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function _p(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Cr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await aS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function bb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await kO(n);ye(Cr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>gb(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>gb(e.remoteStore,o))),n._onlineComponents=e}async function kO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Cr,"Using user provided OfflineComponentProvider");try{await _p(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===te.FAILED_PRECONDITION||o.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Mo("Error using user provided cache. Falling back to memory cache: "+t),await _p(n,new gd)}}else ye(Cr,"Using default OfflineComponentProvider"),await _p(n,new OO(void 0));return n._offlineComponents}async function SS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Cr,"Using user provided OnlineComponentProvider"),await bb(n,n._uninitializedComponentsProvider._online)):(ye(Cr,"Using default OnlineComponentProvider"),await bb(n,new ig))),n._onlineComponents}function MO(n){return SS(n).then((e=>e.syncEngine))}async function yd(n){const e=await SS(n),t=e.eventManager;return t.onListen=EO.bind(null,e.syncEngine),t.onUnlisten=wO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SO.bind(null,e.syncEngine),t}function VO(n,e,t={}){const s=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,y){const v=new ay({next:w=>{v.Nu(),d.enqueueAndForget((()=>ty(l,b)));const C=w.docs.has(m);!C&&w.fromCache?y.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):C&&w.fromCache&&g&&g.source==="server"?y.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(w)},error:w=>y.reject(w)}),b=new iy(kd(m.path),v,{includeMetadataChanges:!0,qa:!0});return ey(l,b)})(await yd(n),n.asyncQueue,e,t,s))),s.promise}function LO(n,e,t={}){const s=new As;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,g,y){const v=new ay({next:w=>{v.Nu(),d.enqueueAndForget((()=>ty(l,b))),w.fromCache&&g.source==="server"?y.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(w)},error:w=>y.reject(w)}),b=new iy(m,v,{includeMetadataChanges:!0,qa:!0});return ey(l,b)})(await yd(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firestore.googleapis.com",Sb=!0;class Ab{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RS,this.ssl=Sb}else this.host=e.host,this.ssl=e.ssl??Sb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g2)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AS(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ab({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ab(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new FD;switch(s.type){case"firstParty":return new YD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=wb.get(t);s&&(ye("ComponentProvider","Removing Datastore"),wb.delete(t),s.terminate())})(this),Promise.resolve()}}function UO(n,e,t,s={}){n=On(n,Hd);const o=Ps(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;o&&(Ad(`https://${m}`),Rd("Firestore",!0)),l.host!==RS&&l.host!==m&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:m,ssl:o,emulatorOptions:s};if(!Ta(g,d)&&(n._setSettings(g),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=pn.MOCK_USER;else{y=yw(s.mockUserToken,n._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new pn(b)}n._authCredentials=new HD(new g0(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class Rt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Zc(t,Rt._jsonSchema))return new Rt(e,s||null,new be(dt.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:zt("string",Rt._jsonSchemaVersion),referencePath:zt("string")};class br extends ks{constructor(e,t,s){super(e,t,kd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new be(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function ct(n,e,...t){if(n=Xe(n),y0("collection","path",e),n instanceof Hd){const s=dt.fromString(e,...t);return LT(s),new br(n,null,s)}{if(!(n instanceof Rt||n instanceof br))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(dt.fromString(e,...t));return LT(s),new br(n.firestore,null,s)}}function vt(n,e,...t){if(n=Xe(n),arguments.length===1&&(e=Og.newId()),y0("doc","path",e),n instanceof Hd){const s=dt.fromString(e,...t);return VT(s),new Rt(n,null,new be(s))}{if(!(n instanceof Rt||n instanceof br))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(dt.fromString(e,...t));return VT(s),new Rt(n.firestore,n instanceof br?n.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="AsyncQueue";class xb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lS(this,"async_queue_retry"),this._c=()=>{const s=vp();s&&ye(Rb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=vp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new As;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;ye(Rb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Ds("INTERNAL UNHANDLED ERROR: ",Nb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Zg.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ne(47125,{Pc:Nb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Nb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Os extends Hd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new xb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xb(e),this._firestoreClient=void 0,await e}}}function BO(n,e){const t=typeof n=="object"?n:xd(),s=typeof n=="string"?n:ld,o=$c(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=vg("firestore");l&&UO(o,...l)}return o}function iu(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zO(n),n._firestoreClient}function zO(n){const e=n._freezeSettings(),t=(function(o,l,d,m){return new uj(o,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,AS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new PO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._byteString=e}static fromBase64String(e){try{return new li(cn.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new li(cn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:li._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,li._jsonSchema))return li.fromBase64String(e.bytes)}}li._jsonSchemaVersion="firestore/bytes/1.0",li._jsonSchema={type:zt("string",li._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ze(this._lat,e._lat)||ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:zt("string",$i._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yi(e.vectorValues);throw new pe(te.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:zt("string",Yi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=/^__.*__$/;class FO{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Or(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class xS{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Or(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:n})}}class oy{constructor(e,t,s,o,l,d){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new oy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(NS(this.Ac)&&qO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HO{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||zd(e)}Cc(e,t,s,o=!1){return new oy({Ac:e,methodName:t,Dc:s,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ru(n){const e=n._freezeSettings(),t=zd(n._databaseId);return new HO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function ly(n,e,t,s,o,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);uy("Data must be an object, but it was:",d,s);const m=DS(s,d);let g,y;if(l.merge)g=new Yn(d.fieldMask),y=d.fieldTransforms;else if(l.mergeFields){const v=[];for(const b of l.mergeFields){const w=sg(e,b,t);if(!d.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OS(v,w)||v.push(w)}g=new Yn(v),y=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,y=d.fieldTransforms;return new FO(new Dn(m),g,y)}class $d extends Gd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $d}}class cy extends Gd{_toFieldTransform(e){return new Mj(e.path,new Uc)}isEqual(e){return e instanceof cy}}function CS(n,e,t,s){const o=n.Cc(1,e,t);uy("Data must be an object, but it was:",o,s);const l=[],d=Dn.empty();jr(s,((g,y)=>{const v=hy(e,g,t);y=Xe(y);const b=o.yc(v);if(y instanceof $d)l.push(v);else{const w=au(y,b);w!=null&&(l.push(v),d.set(v,w))}}));const m=new Yn(l);return new xS(d,m,o.fieldTransforms)}function IS(n,e,t,s,o,l){const d=n.Cc(1,e,t),m=[sg(e,s,t)],g=[o];if(l.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)m.push(sg(e,l[w])),g.push(l[w+1]);const y=[],v=Dn.empty();for(let w=m.length-1;w>=0;--w)if(!OS(y,m[w])){const C=m[w];let L=g[w];L=Xe(L);const z=d.yc(C);if(L instanceof $d)y.push(C);else{const j=au(L,z);j!=null&&(y.push(C),v.set(C,j))}}const b=new Yn(y);return new xS(v,b,d.fieldTransforms)}function GO(n,e,t,s=!1){return au(t,n.Cc(s?4:3,e))}function au(n,e){if(jS(n=Xe(n)))return uy("Unsupported field value:",e,n),DS(n,e);if(n instanceof Gd)return(function(s,o){if(!NS(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let d=0;for(const m of s){let g=au(m,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),d++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Xe(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Oj(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Re.fromDate(s);return{timestampValue:fd(o.serializer,l)}}if(s instanceof Re){const l=new Re(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:fd(o.serializer,l)}}if(s instanceof $i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof li)return{bytesValue:W0(o.serializer,s._byteString)};if(s instanceof Rt){const l=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(l))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Fg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(d,m){return{mapValue:{fields:{[R0]:{stringValue:x0},[cd]:{arrayValue:{values:d.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Ug(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Dd(s)}`)})(n,e)}function DS(n,e){const t={};return E0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(n,((s,o)=>{const l=au(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function jS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Re||n instanceof $i||n instanceof li||n instanceof Rt||n instanceof Gd||n instanceof Yi)}function uy(n,e,t){if(!jS(t)||!v0(t)){const s=Dd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function sg(n,e,t){if((e=Xe(e))instanceof su)return e._internalPath;if(typeof e=="string")return hy(n,e);throw vd("Field path arguments must be of type string or ",n,!1,void 0,t)}const $O=new RegExp("[~\\*/\\[\\]]");function hy(n,e,t){if(e.search($O)>=0)throw vd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw vd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vd(n,e,t,s,o){const l=s&&!s.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(l||d)&&(g+=" (found",l&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new pe(te.INVALID_ARGUMENT,m+n+g)}function OS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Yd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YO extends PS{data(){return super.data()}}function Yd(n,e){return typeof e=="string"?hy(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dy{}class fy extends dy{}function ft(n,e,...t){let s=[];e instanceof dy&&s.push(e),s=s.concat(t),(function(l){const d=l.filter((g=>g instanceof my)).length,m=l.filter((g=>g instanceof Kd)).length;if(d>1||d>0&&m>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class Kd extends fy{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Kd(e,t,s)}_apply(e){const t=this._parse(e);return MS(e._query,t),new ks(e.firestore,e.converter,Kp(e._query,t))}_parse(e){const t=ru(e.firestore);return(function(l,d,m,g,y,v,b){let w;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Db(b,v);const L=[];for(const z of b)L.push(Ib(g,l,z));w={arrayValue:{values:L}}}else w=Ib(g,l,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Db(b,v),w=GO(m,d,b,v==="in"||v==="not-in");return Bt.create(y,v,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function yt(n,e,t){const s=e,o=Yd("where",n);return Kd._create(o,s,t)}class my extends dy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new my(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:_i.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const g of m)MS(d,g),d=Kp(d,g)})(e._query,t),new ks(e.firestore,e.converter,Kp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class py extends fy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new py(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(l,d)})(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Xo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function mn(n,e="asc"){const t=e,s=Yd("orderBy",n);return py._create(s,t)}class gy extends fy{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new gy(e,t,s)}_apply(e){return new ks(e.firestore,e.converter,hd(e._query,this._limit,this._limitType))}}function KO(n){return gy._create("limit",n,"F")}function Ib(n,e,t){if(typeof(t=Xe(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k0(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(dt.fromString(t));if(!be.isDocumentKey(s))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return $T(n,new be(s))}if(t instanceof Rt)return $T(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(t)}.`)}function Db(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MS(n,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QO{convertValue(e,t="none"){switch(xr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Rr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return jr(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[cd].arrayValue?.values?.map((s=>jt(s.doubleValue)));return new Yi(t)}convertGeoPoint(e){return new $i(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Pd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const t=Ar(e);return new Re(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=dt.fromString(e);Je(iS(s),9688,{name:e});const o=new Mc(s.get(1),s.get(3)),l=new be(s.popFirst(5));return o.isEqual(t)||Ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(n,e,t){let s;return s=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,s}class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends PS{constructor(e,t,s,o,l,d){super(e,t,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=va._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:zt("string",va._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class Zh extends va{data(e={}){return super.data(e)}}class _a{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _c(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Zh(this._firestore,this._userDataWriter,s.key,s,new _c(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const g=new Zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const g=new Zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return m.type!==0&&(y=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),v=d.indexOf(m.doc.key)),{type:XO(m.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(te.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=_a._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Og.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){n=On(n,Rt);const e=On(n.firestore,Os);return VO(iu(e),n._key).then((t=>VS(e,n,t)))}_a._jsonSchemaVersion="firestore/querySnapshot/1.0",_a._jsonSchema={type:zt("string",_a._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class vy extends QO{constructor(e){super(),this.firestore=e}convertBytes(e){return new li(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function vn(n){n=On(n,ks);const e=On(n.firestore,Os),t=iu(e),s=new vy(e);return kS(n._query),LO(t,n._query).then((o=>new _a(e,s,n,o)))}function Rs(n,e,t){n=On(n,Rt);const s=On(n.firestore,Os),o=yy(n.converter,e,t);return Qd(s,[ly(ru(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function Ir(n,e,t,...s){n=On(n,Rt);const o=On(n.firestore,Os),l=ru(o);let d;return d=typeof(e=Xe(e))=="string"||e instanceof su?IS(l,"updateDoc",n._key,e,t,s):CS(l,"updateDoc",n._key,e),Qd(o,[d.toMutation(n._key,Pn.exists(!0))])}function qc(n,e){const t=On(n.firestore,Os),s=vt(n),o=yy(n.converter,e);return Qd(t,[ly(ru(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then((()=>s))}function Zo(n,...e){n=Xe(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||Cb(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cb(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let l,d,m;if(n instanceof Rt)d=On(n.firestore,Os),m=kd(n._key.path),l={next:g=>{e[s]&&e[s](VS(d,n,g))},error:e[s+1],complete:e[s+2]};else{const g=On(n,ks);d=On(g.firestore,Os),m=g._query;const y=new vy(d);l={next:v=>{e[s]&&e[s](new _a(d,y,g,v))},error:e[s+1],complete:e[s+2]},kS(n._query)}return(function(y,v,b,w){const C=new ay(w),L=new iy(v,C,b);return y.asyncQueue.enqueueAndForget((async()=>ey(await yd(y),L))),()=>{C.Nu(),y.asyncQueue.enqueueAndForget((async()=>ty(await yd(y),L)))}})(iu(d),m,o,l)}function Qd(n,e){return(function(s,o){const l=new As;return s.asyncQueue.enqueueAndForget((async()=>AO(await MO(s),o,l))),l.promise})(iu(n),e)}function VS(n,e,t){const s=t.docs.get(e._key),o=new vy(n);return new va(n,o,e._key,s,new _c(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ru(e)}set(e,t,s){this._verifyNotCommitted();const o=Ep(e,this._firestore),l=yy(o.converter,t,s),d=ly(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,Pn.none())),this}update(e,t,s,...o){this._verifyNotCommitted();const l=Ep(e,this._firestore);let d;return d=typeof(t=Xe(t))=="string"||t instanceof su?IS(this._dataReader,"WriteBatch.update",l._key,t,s,o):CS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ep(e,this._firestore);return this._mutations=this._mutations.concat(new Bg(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new pe(te.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ep(n,e){if((n=Xe(n)).firestore!==e)throw new pe(te.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Yt(){return new cy("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n){return iu(n=On(n,Os)),new WO(n,(e=>Qd(n,e)))}(function(e,t=!0){(function(o){Yo=o})(Na),wr(new Ns("firestore",((s,{instanceIdentifier:o,options:l})=>{const d=s.getProvider("app").getImmediate(),m=new Os(new GD(s.getProvider("auth-internal")),new KD(d,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(y.options.projectId,v)})(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),ci(OT,PT,e),ci(OT,PT,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,yn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||s.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rg="us-central1";class eP{constructor(e,t,s,o,l=rg,d=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new JO(e,t,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(l);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=rg}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function tP(n,e,t){const s=Ps(e);n.emulatorOrigin=`http${s?"s":""}://${e}:${t}`,s&&(Ad(n.emulatorOrigin),Rd("Functions",!0))}const jb="@firebase/functions",Ob="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="auth-internal",iP="app-check-internal",sP="messaging-internal";function rP(n){const e=(t,{instanceIdentifier:s})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(nP),d=t.getProvider(sP),m=t.getProvider(iP);return new eP(o,l,d,m,s)};wr(new Ns(LS,e,"PUBLIC").setMultipleInstances(!0)),ci(jb,Ob,n),ci(jb,Ob,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n=xd(),e=rg){const s=$c(Xe(n),LS).getImmediate({identifier:e}),o=vg("functions");return o&&oP(s,...o),s}function oP(n,e,t){tP(Xe(n),e,t)}rP();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebasestorage.googleapis.com",BS="storageBucket",lP=120*1e3,cP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt extends Qi{constructor(e,t,s=0){super(Tp(e),`Firebase Storage: ${t} (${Tp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Tp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function Tp(n){return"storage/"+n}function _y(){const n="An unknown error occurred, please check the error payload for server response.";return new Nt(xt.UNKNOWN,n)}function uP(n){return new Nt(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function hP(n){return new Nt(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Nt(xt.UNAUTHENTICATED,n)}function fP(){return new Nt(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mP(n){return new Nt(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function pP(){return new Nt(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gP(){return new Nt(xt.CANCELED,"User canceled the upload/download.")}function yP(n){return new Nt(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function vP(n){return new Nt(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _P(){return new Nt(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BS+"' property when initializing the app?")}function EP(){return new Nt(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TP(){return new Nt(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bP(n){return new Nt(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ag(n){return new Nt(xt.INVALID_ARGUMENT,n)}function zS(){return new Nt(xt.APP_DELETED,"The Firebase app was deleted.")}function wP(n){return new Nt(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cc(n,e){return new Nt(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uc(n){throw new Nt(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(s.path==="")return s;throw vP(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function l(se){se.path.charAt(se.path.length-1)==="/"&&(se.path_=se.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),g={bucket:1,path:3};function y(se){se.path_=decodeURIComponent(se.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",C=new RegExp(`^https?://${b}/${v}/b/${o}/o${w}`,"i"),L={bucket:1,path:3},z=t===US?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",Y=new RegExp(`^https?://${z}/${o}/${j}`,"i"),X=[{regex:m,indices:g,postModify:l},{regex:C,indices:L,postModify:y},{regex:Y,indices:{bucket:1,path:2},postModify:y}];for(let se=0;se<X.length;se++){const ie=X[se],B=ie.regex.exec(e);if(B){const I=B[ie.indices.bucket];let R=B[ie.indices.path];R||(R=""),s=new Kn(I,R),ie.postModify(s);break}}if(s==null)throw yP(e);return s}}class SP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n,e,t){let s=1,o=null,l=null,d=!1,m=0;function g(){return m===2}let y=!1;function v(...j){y||(y=!0,e.apply(null,j))}function b(j){o=setTimeout(()=>{o=null,n(C,g())},j)}function w(){l&&clearTimeout(l)}function C(j,...Y){if(y){w();return}if(j){w(),v.call(null,j,...Y);return}if(g()||d){w(),v.call(null,j,...Y);return}s<64&&(s*=2);let X;m===1?(m=2,X=0):X=(s+Math.random())*1e3,b(X)}let L=!1;function z(j){L||(L=!0,w(),!y&&(o!==null?(j||(m=2),clearTimeout(o),b(0)):j||(m=1)))}return b(0),l=setTimeout(()=>{d=!0,z(!0)},t),z}function RP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){return n!==void 0}function NP(n){return typeof n=="object"&&!Array.isArray(n)}function Ey(n){return typeof n=="string"||n instanceof String}function Pb(n){return Ty()&&n instanceof Blob}function Ty(){return typeof Blob<"u"}function kb(n,e,t,s){if(s<e)throw ag(`Invalid value for '${n}'. Expected ${e} or greater.`);if(s>t)throw ag(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function by(n,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${n}`}function qS(n){const e=encodeURIComponent;let t="?";for(const s in n)if(n.hasOwnProperty(s)){const o=e(s)+"="+e(n[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var Ea;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Ea||(Ea={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,s,o,l,d,m,g,y,v,b,w=!0,C=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=C,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((L,z)=>{this.resolve_=L,this.reject_=z,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Lh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const g=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===Ea.NO_ERROR,g=l.getStatus();if(!m||CP(g,this.additionalRetryCodes_)&&this.retry){const v=l.getErrorCode()===Ea.ABORT;s(!1,new Lh(!1,null,v));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new Lh(y,l))})},t=(s,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(m,m.getResponse());xP(g)?l(g):l()}catch(g){d(g)}else if(m!==null){const g=_y();g.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,g)):d(g)}else if(o.canceled){const g=this.appDelete_?zS():gP();d(g)}else{const g=pP();d(g)}};this.canceled_?t(!1,new Lh(!1,null,!0)):this.backoffId_=AP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lh{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function DP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function PP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function kP(n,e,t,s,o,l,d=!0,m=!1){const g=qS(n.urlParams),y=n.url+g,v=Object.assign({},n.headers);return OP(v,e),DP(v,t),jP(v,l),PP(v,s),new IP(y,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VP(...n){const e=MP();if(e!==void 0){const t=new e;for(let s=0;s<n.length;s++)t.append(n[s]);return t.getBlob()}else{if(Ty())return new Blob(n);throw new Nt(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n){if(typeof atob>"u")throw bP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bp{constructor(e,t){this.data=e,this.contentType=t||null}}function BP(n,e){switch(n){case qi.RAW:return new bp(FS(e));case qi.BASE64:case qi.BASE64URL:return new bp(HS(n,e));case qi.DATA_URL:return new bp(qP(e),FP(e))}throw _y()}function FS(n){const e=[];for(let t=0;t<n.length;t++){let s=n.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=s,d=n.charCodeAt(++t);s=65536|(l&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function zP(n){let e;try{e=decodeURIComponent(n)}catch{throw Cc(qi.DATA_URL,"Malformed data URL.")}return FS(e)}function HS(n,e){switch(n){case qi.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Cc(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Cc(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=UP(e)}catch(o){throw o.message.includes("polyfill")?o:Cc(n,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class GS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Cc(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=HP(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function qP(n){const e=new GS(n);return e.base64?HS(qi.BASE64,e.rest):zP(e.rest)}function FP(n){return new GS(n).contentType}function HP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){let s=0,o="";Pb(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Pb(this.data_)){const s=this.data_,o=LP(s,e,t);return o===null?null:new yr(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new yr(s,!0)}}static getBlob(...e){if(Ty()){const t=e.map(s=>s instanceof yr?s.data_:s);return new yr(VP.apply(null,t))}else{const t=e.map(d=>Ey(d)?BP(qi.RAW,d).data:d.data_);let s=0;t.forEach(d=>{s+=d.byteLength});const o=new Uint8Array(s);let l=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[l++]=d[m]}),new yr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){let e;try{e=JSON.parse(n)}catch{return null}return NP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $P(n,e){const t=e.split("/").filter(s=>s.length>0).join("/");return n.length===0?t:n+"/"+t}function YS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n,e){return e}class Sn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||YP}}let Uh=null;function KP(n){return!Ey(n)||n.length<2?n:YS(n)}function KS(){if(Uh)return Uh;const n=[];n.push(new Sn("bucket")),n.push(new Sn("generation")),n.push(new Sn("metageneration")),n.push(new Sn("name","fullPath",!0));function e(l,d){return KP(d)}const t=new Sn("name");t.xform=e,n.push(t);function s(l,d){return d!==void 0?Number(d):d}const o=new Sn("size");return o.xform=s,n.push(o),n.push(new Sn("timeCreated")),n.push(new Sn("updated")),n.push(new Sn("md5Hash",null,!0)),n.push(new Sn("cacheControl",null,!0)),n.push(new Sn("contentDisposition",null,!0)),n.push(new Sn("contentEncoding",null,!0)),n.push(new Sn("contentLanguage",null,!0)),n.push(new Sn("contentType",null,!0)),n.push(new Sn("metadata","customMetadata",!0)),Uh=n,Uh}function QP(n,e){function t(){const s=n.bucket,o=n.fullPath,l=new Kn(s,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function XP(n,e,t){const s={};s.type="file";const o=t.length;for(let l=0;l<o;l++){const d=t[l];s[d.local]=d.xform(s,e[d.server])}return QP(s,n),s}function QS(n,e,t){const s=$S(e);return s===null?null:XP(n,s,t)}function WP(n,e,t,s){const o=$S(e);if(o===null||!Ey(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(y=>{const v=n.bucket,b=n.fullPath,w="/b/"+d(v)+"/o/"+d(b),C=by(w,t,s),L=qS({alt:"media",token:y});return C+L})[0]}function ZP(n,e){const t={},s=e.length;for(let o=0;o<s;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class XS{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){if(!n)throw _y()}function JP(n,e){function t(s,o){const l=QS(n,o,e);return WS(l!==null),l}return t}function ek(n,e){function t(s,o){const l=QS(n,o,e);return WS(l!==null),WP(l,o,n.host,n._protocol)}return t}function ZS(n){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=fP():o=dP():t.getStatus()===402?o=hP(n.bucket):t.getStatus()===403?o=mP(n.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function tk(n){const e=ZS(n);function t(s,o){let l=e(s,o);return s.getStatus()===404&&(l=uP(n.path)),l.serverResponse=o.serverResponse,l}return t}function nk(n,e,t){const s=e.fullServerUrl(),o=by(s,n.host,n._protocol),l="GET",d=n.maxOperationRetryTime,m=new XS(o,l,ek(n,t),d);return m.errorHandler=tk(e),m}function ik(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sk(n,e,t){const s=Object.assign({},t);return s.fullPath=n.path,s.size=e.size(),s.contentType||(s.contentType=ik(null,e)),s}function rk(n,e,t,s,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let X="";for(let se=0;se<2;se++)X=X+Math.random().toString().slice(2);return X}const g=m();d["Content-Type"]="multipart/related; boundary="+g;const y=sk(e,s,o),v=ZP(y,t),b="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,w=`\r
--`+g+"--",C=yr.getBlob(b,s,w);if(C===null)throw EP();const L={name:y.fullPath},z=by(l,n.host,n._protocol),j="POST",Y=n.maxUploadRetryTime,K=new XS(z,j,JP(n,t),Y);return K.urlParams=L,K.headers=d,K.body=C.uploadData(),K.errorHandler=ZS(e),K}class ak{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ea.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ea.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ea.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,l){if(this.sent_)throw uc("cannot .send() more than once");if(Ps(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ok extends ak{initXhr(){this.xhr_.responseType="text"}}function JS(){return new ok}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new xa(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YS(this._location.path)}get storage(){return this._service}get parent(){const e=GP(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new xa(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wP(e)}}function lk(n,e,t){n._throwIfRoot("uploadBytes");const s=rk(n.storage,n._location,KS(),new yr(e,!0),t);return n.storage.makeRequestWithTokens(s,JS).then(o=>({metadata:o,ref:n}))}function ck(n){n._throwIfRoot("getDownloadURL");const e=nk(n.storage,n._location,KS());return n.storage.makeRequestWithTokens(e,JS).then(t=>{if(t===null)throw TP();return t})}function uk(n,e){const t=$P(n._location.path,e),s=new Kn(n._location.bucket,t);return new xa(n.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n){return/^[A-Za-z]+:\/\//.test(n)}function dk(n,e){return new xa(n,e)}function eA(n,e){if(n instanceof wy){const t=n;if(t._bucket==null)throw _P();const s=new xa(t,t._bucket);return e!=null?eA(s,e):s}else return e!==void 0?uk(n,e):n}function fk(n,e){if(e&&hk(e)){if(n instanceof wy)return dk(n,e);throw ag("To use ref(service, url), the first argument must be a Storage instance.")}else return eA(n,e)}function Mb(n,e){const t=e?.[BS];return t==null?null:Kn.makeFromBucketSpec(t,n)}function mk(n,e,t,s={}){n.host=`${e}:${t}`;const o=Ps(e);o&&(Ad(`https://${n.host}/b`),Rd("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=s;l&&(n._overrideAuthToken=typeof l=="string"?l:yw(l,n.app.options.projectId))}class wy{constructor(e,t,s,o,l,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=US,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lP,this._maxUploadRetryTime=cP,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=Mb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=Mb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xa(this,e)}_makeRequest(e,t,s,o,l=!0){if(this._deleted)return new SP(zS());{const d=kP(e,this._appId,s,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const Vb="@firebase/storage",Lb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="storage";function pk(n,e,t){return n=Xe(n),lk(n,e,t)}function gk(n){return n=Xe(n),ck(n)}function yk(n,e){return n=Xe(n),fk(n,e)}function vk(n=xd(),e){n=Xe(n);const s=$c(n,tA).getImmediate({identifier:e}),o=vg("storage");return o&&_k(s,...o),s}function _k(n,e,t,s={}){mk(n,e,t,s)}function Ek(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),s=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new wy(t,s,o,e,Na)}function Tk(){wr(new Ns(tA,Ek,"PUBLIC").setMultipleInstances(!0)),ci(Vb,Lb,""),ci(Vb,Lb,"esm2020")}Tk();var bk="AIzaSyBTl0Jl9ZMQBA84LBbECwzUz5jcL4dYV3Y",wk="mduwebsite1345.firebaseapp.com",Sk="mduwebsite1345",Ak="mduwebsite1345.firebasestorage.app",Rk="653256711691",xk="1:653256711691:web:5aca0f2e84ed19df90710e";const Nk={apiKey:bk,authDomain:wk,projectId:Sk,storageBucket:Ak,messagingSenderId:Rk,appId:xk},Xd=aT().length?aT()[0]:Ew(Nk),Ut=UD(Xd),Se=BO(Xd);aP(Xd);const Ck=vk(Xd),Ik=/^\+[1-9]\d{7,14}$/,Dk=()=>{const[n,e]=F.useState(""),[t,s]=F.useState(""),[o,l]=F.useState(""),[d,m]=F.useState(""),[g,y]=F.useState(null),[v,b]=F.useState(""),[w,C]=F.useState(!1),L=Go(),z=()=>L("/members");F.useEffect(()=>{const B=Xc(Ut,I=>{I&&z()});return()=>B()},[]);const j=async B=>{if(B.preventDefault(),!w){b(""),C(!0);try{await mI(Ut,n.trim(),t),z()}catch(I){console.error("[Email login] ",I),b(I?.message??"Login failed")}finally{C(!1)}}},Y=async()=>{if(!w){b(""),C(!0);try{const B=new zi;await o0(Ut,B),z()}catch(B){console.error("[Google login] ",B),b(B?.message??"Google sign-in failed")}finally{C(!1)}}},K=()=>{if(window.recaptchaVerifier)return window.recaptchaVerifier;try{window.recaptchaVerifier=new zp(Ut,"recaptcha-container",{size:"invisible"})}catch(B){console.warn("[reCAPTCHA modular ctor failed, trying compat]",B),window.recaptchaVerifier=new zp("recaptcha-container",{size:"invisible"},Ut)}return window.recaptchaVerifier};F.useEffect(()=>()=>{try{window.recaptchaVerifier?.clear?.()}catch{}window.recaptchaVerifier=void 0},[]);const X=F.useMemo(()=>Ik.test(o.trim()),[o]),se=async()=>{if(!(w||!X)){b(""),C(!0);try{const B=K(),I=await s0(Ut,o.trim(),B);y(I)}catch(B){console.error("[sendPhoneCode] ",B),b(B?.message??"Failed to send code");try{window.recaptchaVerifier?.reset?.()}catch{}}finally{C(!1)}}},ie=async()=>{if(!(!g||w||d.trim().length<6)){b(""),C(!0);try{await g.confirm(d.trim()),z()}catch(B){console.error("[verifyPhoneCode] ",B),b(B?.message??"Invalid verification code")}finally{C(!1)}}};return u.jsx("div",{children:u.jsxs("div",{className:"background",children:[u.jsx("div",{className:"shape"}),u.jsx("div",{className:"shape"}),u.jsxs("form",{onSubmit:j,"aria-busy":w,children:[u.jsx("h3",{children:"Login Here"}),u.jsx("label",{htmlFor:"email",children:"Email"}),u.jsx("input",{id:"email",type:"email",placeholder:"you@ucla.edu",value:n,onChange:B=>e(B.target.value),autoComplete:"email",required:!0,disabled:w}),u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsx("input",{id:"password",type:"password",placeholder:"Password",value:t,onChange:B=>s(B.target.value),autoComplete:"current-password",required:!0,disabled:w}),u.jsx("button",{type:"submit",disabled:w,children:w?"Signing in…":"Log In"}),u.jsx("div",{className:"social",style:{marginTop:20},children:u.jsx("button",{type:"button",className:"go",onClick:Y,"aria-label":"Continue with Google",disabled:w,children:"Continue with Google"})}),u.jsxs("fieldset",{style:{marginTop:24,border:"none",padding:0},children:[u.jsx("legend",{style:{fontWeight:600,marginBottom:8},children:"Or sign in with phone"}),g?u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{id:"code",type:"text",placeholder:"123456",value:d,onChange:B=>m(B.target.value),disabled:w}),u.jsx("button",{type:"button",onClick:ie,disabled:w||d.trim().length<6,children:"Verify & Sign in"}),u.jsx("button",{type:"button",onClick:()=>{y(null),m("");try{window.recaptchaVerifier?.reset?.()}catch{}},disabled:w,style:{marginLeft:8},children:"Use a different phone"})]}):u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{id:"phone",type:"tel",placeholder:"+1##########",value:o,onChange:B=>l(B.target.value),disabled:w,"aria-invalid":o.length>0&&!X}),u.jsx("button",{type:"button",onClick:se,disabled:w||!X,children:"Send verification code"})]})]}),v&&u.jsx("p",{style:{color:"salmon",marginTop:16},role:"alert",children:v}),u.jsx("div",{id:"recaptcha-container"}),u.jsxs("p",{style:{marginTop:16},children:["No account? ",u.jsx(In,{to:"/register",children:"Register"})]})]})]})})};function jk(n,e){return{uid:n,name:e.name??"",email:e.email??"",phoneNumber:e.phoneNumber??"",year:e.year??"",major:e.major??"",instrument:e.instrument??"",instruments:Array.isArray(e.instruments)?e.instruments:[],section:e.section??"",bio:e.bio??"",roles:Array.isArray(e.roles)?e.roles:["performer"],returning:e.returning??"",photoURL:e.photoURL??"",createdAt:e.createdAt,updatedAt:e.updatedAt}}async function Ok(n){const e=await ou(vt(Se,"users",n));return e.exists()?jk(n,e.data()):null}async function og(n,e){const t=vt(Se,"users",n),s={...e,uid:n,...Array.isArray(e.roles)?{roles:e.roles}:{},updatedAt:Yt(),...e&&!e.createdAt?{createdAt:Yt()}:{}};await Rs(t,s,{merge:!0})}const Ub="recaptcha-container-register",Pk=()=>{const[n,e]=F.useState({name:"",email:"",phoneNumber:"",year:"",major:"",instrument:"",instrumentsCsv:"",sectionCsv:"",returning:"",bio:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",password:""}),[t,s]=F.useState(""),[o,l]=F.useState(!1),[d,m]=F.useState(""),[g,y]=F.useState(""),[v,b]=F.useState(null),w=Go(),C=B=>{const{name:I,value:R}=B.target;e(x=>({...x,[I]:R}))},L=F.useMemo(()=>n.instrumentsCsv.split(",").map(B=>B.trim()).filter(Boolean),[n.instrumentsCsv]),z=F.useMemo(()=>{const B=n.sectionCsv.split(",").map(I=>I.trim()).filter(Boolean);return B.length?B[0]:""},[n.sectionCsv]),j=async(B,I,R)=>{await og(B,{name:n.name,email:n.email||I||void 0,phoneNumber:n.phoneNumber,year:n.year,major:n.major,instrument:n.instrument,instruments:L.length?L:void 0,section:z||void 0,returning:n.returning,bio:n.bio,emergencyName:n.emergencyName,emergencyPhone:n.emergencyPhone,emergencyRelation:n.emergencyRelation,roles:["performer"],...R||{}})},Y=async B=>{B.preventDefault(),s(""),l(!0);try{const I=await fI(Ut,n.email,n.password);await j(I.user.uid,I.user.email),w("/members")}catch(I){s(I?.message||"Failed to create account")}finally{l(!1)}},K=async()=>{s(""),l(!0);try{const B=new zi,I=await o0(Ut,B);await j(I.user.uid,I.user.email),w("/members")}catch(B){s(B?.message||"Google sign-in failed")}finally{l(!1)}},X=B=>(window._registerRecaptcha||(window._registerRecaptcha=new zp(B,Ub,{size:"normal"})),window._registerRecaptcha),se=async()=>{if(s(""),!d){s("Enter a phone number in E.164 format, e.g. +13105551234");return}l(!0);try{const B=X(Ut),I=await s0(Ut,d,B);b(I)}catch(B){s(B?.message||"Failed to send verification code")}finally{l(!1)}},ie=async()=>{if(s(""),!v||!g){s("Enter the verification code you received");return}l(!0);try{const B=await v.confirm(g);await j(B.user.uid,B.user.email,{phoneNumber:d}),w("/members")}catch(B){s(B?.message||"Verification failed")}finally{l(!1)}};return u.jsxs("section",{className:"register-container",children:[u.jsx("h1",{className:"register-title",children:"Create your account"}),u.jsx("p",{className:"register-subtitle",children:"Use email, Google, or phone. You can edit details later in your portal."}),u.jsxs("form",{onSubmit:Y,className:"register-form",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"name",children:"Full Name"}),u.jsx("input",{className:"input",id:"name",name:"name",value:n.name,onChange:C,placeholder:"Jane Doe",required:!0})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),u.jsx("input",{className:"input",id:"email",name:"email",type:"email",value:n.email,onChange:C,placeholder:"you@ucla.edu",autoComplete:"email",required:!0})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phoneNumber",children:"Phone"}),u.jsx("input",{className:"input",id:"phoneNumber",name:"phoneNumber",value:n.phoneNumber,onChange:C,placeholder:"(###) ###-####"})]})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"year",children:"Year in School"}),u.jsxs("select",{className:"input",id:"year",name:"year",value:n.year,onChange:C,required:!0,children:[u.jsx("option",{value:"",children:"Select Year"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"major",children:"Major"}),u.jsx("input",{className:"input",id:"major",name:"major",value:n.major,onChange:C,placeholder:"Physics, EE, Music, ..."})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrument",children:"Primary Instrument"}),u.jsx("input",{className:"input",id:"instrument",name:"instrument",value:n.instrument,onChange:C,placeholder:"Violin, Trumpet, Vihuela..."})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrumentsCsv",children:"Instrument(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"instrumentsCsv",name:"instrumentsCsv",value:n.instrumentsCsv,onChange:C,placeholder:"violin, guitar, trumpet, voice"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"sectionCsv",children:"Section(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"sectionCsv",name:"sectionCsv",value:n.sectionCsv,onChange:C,placeholder:"violas, violins, harp, voces"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"returning",children:"Are you a returning member?"}),u.jsxs("select",{className:"input",id:"returning",name:"returning",value:n.returning,onChange:C,required:!0,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"Yes",children:"Yes"}),u.jsx("option",{value:"No",children:"No"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"bio",children:"Short Bio"}),u.jsx("textarea",{className:"input",id:"bio",name:"bio",value:n.bio,onChange:C,placeholder:"Tell us a little about your experience",rows:3})]}),u.jsxs("div",{className:"grid-3 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyName",children:"Emergency Contact Name"}),u.jsx("input",{className:"input",id:"emergencyName",name:"emergencyName",value:n.emergencyName,onChange:C})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyPhone",children:"Emergency Contact Phone"}),u.jsx("input",{className:"input",id:"emergencyPhone",name:"emergencyPhone",value:n.emergencyPhone,onChange:C})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyRelation",children:"Relation"}),u.jsx("input",{className:"input",id:"emergencyRelation",name:"emergencyRelation",value:n.emergencyRelation,onChange:C})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),u.jsx("input",{className:"input",type:"password",id:"password",name:"password",value:n.password,onChange:C,required:!0})]}),t&&u.jsx("p",{className:"error",children:t}),u.jsx("button",{type:"submit",className:"submit",disabled:o,children:o?"Creating account…":"Register with Email"})]}),u.jsx("div",{className:"divider",children:u.jsx("span",{children:"or"})}),u.jsx("div",{className:"oauth-row",children:u.jsx("button",{type:"button",className:"btn-google",onClick:K,disabled:o,"aria-label":"Continue with Google",children:"Continue with Google"})}),u.jsxs("div",{className:"phone-card",children:[v?u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{className:"input",id:"code",value:g,onChange:B=>y(B.target.value),placeholder:"123456"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:ie,disabled:o||!g,children:"Verify & Create account"})]})]}):u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{className:"input",id:"phone",type:"tel",value:d,onChange:B=>m(B.target.value),placeholder:"+1##########"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:se,disabled:o||!d,children:"Send verification code"})]})]}),u.jsx("div",{id:Ub})]})]})},kk={};function Mk(n){const e="recaptcha-v3";if(document.getElementById(e))return;const t=document.createElement("script");t.id=e,t.async=!0,t.defer=!0,t.src=`https://www.google.com/recaptcha/api.js?render=${n}`,document.head.appendChild(t)}function nA(){const[n,e]=F.useState(!1),t=F.useRef(typeof import.meta<"u"?kk?.VITE_RECAPTCHA_SITE_KEY??null:null);F.useEffect(()=>{if(!t.current){e(!0);return}Mk(t.current);const o=()=>e(!0),l=window.setInterval(()=>{window.grecaptcha?.execute&&(window.clearInterval(l),o())},100);return()=>window.clearInterval(l)},[]);const s=F.useCallback(async o=>{if(!t.current)return`dev_${o}_${Date.now()}`;const l=window.grecaptcha;if(!l||!l.execute)throw new Error("reCAPTCHA not ready");return await l.execute(t.current,{action:o})},[]);return{ready:n,execute:s}}async function iA(n){if(!n?.name||!n?.email)throw new Error("Name and email are required");const e={type:"client_request",name:n.name,email:n.email,phone:n.phone??null,org:n.org??null,message:n.message??null,event:n.event??null,recaptchaToken:n.recaptchaToken??null,status:"new",createdAt:Yt(),updatedAt:Yt()},t=await qc(ct(Se,"clients"),e);try{n.event&&(n.event.title||n.event.date)&&await qc(ct(Se,"events"),{title:n.event.title||"Client Inquiry",date:n.event.date??null,start:n.event.start??null,end:n.event.end??null,location:n.event.location??null,status:"inquiry",visibility:"private",source:"client_form",clientRef:t.path,createdAt:Yt(),updatedAt:Yt()})}catch(o){console.warn("[submitClientRequest] event draft create failed:",o)}const s="https://https://script.google.com/u/0/home/projects/1FIwKXVOJn4P5Toveh84N7GisHXMpfKnGDv3Xrr-_j384zPbr8hW05Lvk/edit";try{await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,firestoreId:t.id})})}catch(o){console.warn("[submitClientRequest] webhook failed:",o)}return{id:t.id}}const Vk=()=>{const[n,e]=F.useState({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""}),[t,s]=F.useState("idle"),[o,l]=F.useState(""),{execute:d}=nA(),m=y=>{e(v=>({...v,[y.target.name]:y.target.value}))};async function g(y){if(y.preventDefault(),l(""),n.website&&n.website.trim().length>0){s("success");return}try{s("submitting");const v=await d("client_booking"),b=n.eventDate?new Date(`${n.eventDate}T09:00`).toISOString():void 0;await iA({recaptchaToken:v,name:n.name,email:n.email,phone:n.phone||void 0,org:void 0,message:[n.eventDetails?`Details: ${n.eventDetails}`:"",n.extraDetails?`Extra: ${n.extraDetails}`:""].filter(Boolean).join(`
`),event:{title:"Client Inquiry",date:n.eventDate||void 0,start:b,end:void 0,location:n.eventLocation||void 0}}),s("success"),e({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""})}catch(v){s("error"),l(v?.message||"Failed to submit. Please try again later.")}}return u.jsxs("section",{className:"form-page bookus",children:[u.jsx("h1",{children:"Book Us"}),u.jsx("p",{children:"Please fill out this form to request a performance booking."}),u.jsxs("form",{onSubmit:g,className:"bookus-form",children:[u.jsx("input",{name:"website",value:n.website,onChange:m,className:"hp",tabIndex:-1,"aria-hidden":!0}),u.jsx("input",{name:"name",placeholder:"Your Name",value:n.name,onChange:m,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",value:n.email,onChange:m,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",value:n.phone,onChange:m,required:!0}),u.jsx("input",{name:"eventDate",type:"date",value:n.eventDate,onChange:m,required:!0}),u.jsx("input",{name:"eventLocation",placeholder:"Event Location",value:n.eventLocation,onChange:m,required:!0}),u.jsx("textarea",{name:"eventDetails",placeholder:"Tell us about your event...",value:n.eventDetails,onChange:m,required:!0}),u.jsx("textarea",{name:"extraDetails",placeholder:"Anything else?",value:n.extraDetails,onChange:m}),u.jsx("button",{type:"submit",disabled:t==="submitting",children:t==="submitting"?"Submitting…":"Submit Request"}),t==="success"&&u.jsx("p",{className:"ok",children:"Thank you for your inquiry! We will get back to you soon."}),t==="error"&&u.jsx("p",{className:"err",children:o})]})]})},Lk=()=>{const[n,e]=F.useState({name:"",email:"",phone:"",instrument:"",experience:""}),t=o=>{e({...n,[o.target.name]:o.target.value})},s=o=>{o.preventDefault(),console.log("Join request submitted:",n),alert("Thank you for your interest! We will contact you soon.")};return u.jsxs("section",{className:"form-page",children:[u.jsx("h1",{children:"Join Mariachi de Uclatlán"}),u.jsx("p",{children:"Interested in joining our group? Fill out the form below."}),u.jsxs("form",{onSubmit:s,children:[u.jsx("input",{name:"name",placeholder:"Your Name",onChange:t,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",onChange:t,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",onChange:t,required:!0}),u.jsx("input",{name:"instrument",placeholder:"Instrument",onChange:t,required:!0}),u.jsx("textarea",{name:"experience",placeholder:"Tell us about your experience...",onChange:t,required:!0}),u.jsx("button",{type:"submit",children:"Submit Application"})]})]})};async function Uk(n){if(!n?.name||!n?.email)throw new Error("Missing name or email in inquiry");const e={...n,status:"new",source:"public_form",createdAt:Yt(),updatedAt:Yt()};return(await qc(ct(Se,"inquiries"),e)).id}function Bk(){const[n,e]=F.useState({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""}),[t,s]=F.useState(""),[o,l]=F.useState(""),{execute:d}=nA();async function m(g){g.preventDefault(),s(""),l("");try{const y=await d("client_booking"),v=n.date&&n.startTime?new Date(`${n.date}T${n.startTime}`).toISOString():void 0,b=n.date&&n.endTime?new Date(`${n.date}T${n.endTime}`).toISOString():void 0,w={name:n.name,email:n.email,phone:n.phone||void 0,org:n.org||void 0,message:n.details||void 0,event:{title:n.title||"Client Inquiry",date:n.date||void 0,start:v,end:b,location:n.location||void 0},meta:{userAgent:typeof navigator<"u"?navigator.userAgent:void 0,tz:Intl.DateTimeFormat().resolvedOptions().timeZone}};await Promise.all([iA({recaptchaToken:y,...w}),Uk(w)]),s("Thanks! Your request was received. We'll reach out soon."),e({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""})}catch(y){console.error("[HireUs submit] ",y),l(y?.message||"Failed to send")}}return u.jsxs("div",{className:"hireus",children:[u.jsx("h2",{children:"Hire Us"}),u.jsxs("form",{onSubmit:m,className:"event-form",children:[u.jsx("h3",{children:"Contact"}),u.jsx("input",{placeholder:"Your name",value:n.name,onChange:g=>e(y=>({...y,name:g.target.value})),required:!0}),u.jsx("input",{type:"email",placeholder:"Email",value:n.email,onChange:g=>e(y=>({...y,email:g.target.value})),required:!0}),u.jsx("input",{placeholder:"Phone",value:n.phone,onChange:g=>e(y=>({...y,phone:g.target.value}))}),u.jsx("input",{placeholder:"Organization (optional)",value:n.org,onChange:g=>e(y=>({...y,org:g.target.value}))}),u.jsx("h3",{children:"Event"}),u.jsx("input",{placeholder:"Event title",value:n.title,onChange:g=>e(y=>({...y,title:g.target.value})),required:!0}),u.jsx("input",{type:"date",value:n.date,onChange:g=>e(y=>({...y,date:g.target.value}))}),u.jsxs("div",{className:"time-row",children:[u.jsx("input",{type:"time",value:n.startTime,onChange:g=>e(y=>({...y,startTime:g.target.value}))}),u.jsx("input",{type:"time",value:n.endTime,onChange:g=>e(y=>({...y,endTime:g.target.value}))})]}),u.jsx("input",{placeholder:"Location",value:n.location,onChange:g=>e(y=>({...y,location:g.target.value}))}),u.jsx("textarea",{placeholder:"Details / repertoire / special notes",value:n.details,onChange:g=>e(y=>({...y,details:g.target.value}))}),u.jsx("button",{type:"submit",children:"Submit request"}),t&&u.jsx("p",{className:"ok",children:t}),o&&u.jsx("p",{className:"err",children:o})]})]})}const zk=`data:image/svg+xml;utf8,
  <svg xmlns='http://www.w3.org/2000/svg' width='600' height='360' viewBox='0 0 600 360'>
    <defs>
      <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
        <stop offset='0%' stop-color='%232774AE'/>
        <stop offset='100%' stop-color='%23FFD100'/>
      </linearGradient>
    </defs>
    <rect width='600' height='360' fill='url(%23g)'/>
    <text x='50%' y='45%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='40' fill='white'>
      Mariachi Mood 😎🎺
    </text>
    <text x='50%' y='70%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='white'>
      Add your own funny pic below!
    </text>
  </svg>`,qk=()=>{const[n,e]=ee.useState(()=>{try{return localStorage.getItem("members:funnyPicture")}catch{return null}});return{src:n??zk,update:s=>{e(s);try{s?localStorage.setItem("members:funnyPicture",s):localStorage.removeItem("members:funnyPicture")}catch{}}}},Fk=()=>{const[n,e]=ee.useState(()=>{try{return JSON.parse(localStorage.getItem("members:halloweenInterest")||"null")??{interest:null,pledge:""}}catch{return{interest:null,pledge:""}}});return ee.useEffect(()=>{try{localStorage.setItem("members:halloweenInterest",JSON.stringify(n))}catch{}},[n]),{state:n,setState:e}},Hk=()=>{const{src:n,update:e}=qk(),[t,s]=ee.useState(""),[o,l]=ee.useState(!1),{state:d,setState:m}=Fk(),g=C=>{const L=new FileReader;L.onload=()=>{e(typeof L.result=="string"?L.result:null)},L.readAsDataURL(C)},y=C=>{C.preventDefault(),C.stopPropagation();const L=C.dataTransfer.files?.[0];L&&g(L)},v=C=>{const L=C.target.files?.[0];L&&g(L)},b=()=>{t.trim()&&(e(t.trim()),s(""))},w=()=>e(null);return u.jsxs("section",{className:"members-dashboard ucla-content",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Welcome back! 🎶"}),u.jsx("p",{className:"ucla-paragraph",children:"Your space for events, resources, and all things Mariachi de Uclatlán."})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("article",{className:"card announcement",children:[u.jsx("h2",{children:"Hi — welcome back to Week 2!"}),u.jsxs("ul",{className:"nice-list",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"Rehearsal"})," is at ",u.jsx("strong",{children:"7:00 PM"}),"."]}),u.jsxs("li",{children:[u.jsx("strong",{children:"Dinner"})," is at ",u.jsx("strong",{children:"6:00 PM"})," (location TBA)."]}),u.jsxs("li",{children:["Keep an eye on ",u.jsx("strong",{children:"GroupMe"})," for last‑minute updates & location pin."]}),u.jsx("li",{children:"Angel - Should we make an Instagram groupchat over groupme gruopchat, if you think so please bug enrique abuot it."}),u.jsxs("li",{children:["Keep an eye on ",u.jsx("strong",{children:"GroupMe"})," for last‑minute updates & location pin."]})]})]}),u.jsxs("article",{className:"card funny-picture",children:[u.jsxs("figure",{className:"funny-figure",onDragOver:C=>{C.preventDefault(),l(!0)},onDragLeave:()=>l(!1),onDrop:y,children:[u.jsx("img",{src:n,alt:"Member-submitted funny image",className:`funny-image ${o?"hover":""}`}),u.jsx("figcaption",{className:"caption",children:"Drop a file here or use the controls below ⤵️"})]}),u.jsxs("div",{className:"funny-controls",children:[u.jsxs("label",{className:"btn-outline",children:[u.jsx("input",{type:"file",accept:"image/*",onChange:v,style:{display:"none"}}),"Upload Image"]}),u.jsxs("div",{className:"url-input",children:[u.jsx("input",{type:"url",placeholder:"Paste image URL",value:t,onChange:C=>s(C.target.value)}),u.jsx("button",{className:"btn",onClick:b,children:"Use URL"}),u.jsx("button",{className:"btn ghost",onClick:w,children:"Clear"})]})]})]})]}),u.jsxs("article",{className:"card news",children:[u.jsx("h2",{children:"What’s new"}),u.jsxs("ul",{className:"bullets",children:[u.jsxs("li",{children:["🎺 New: Export your event calendar from ",u.jsx(In,{to:"/members/settings",children:"Settings → Download .ics"}),"."]}),u.jsx("li",{children:"📅 Remember to update your availability for upcoming gigs."}),u.jsx("li",{children:"🧑‍🎓 Welcome new members—check Resources for onboarding!"})]})]}),u.jsxs("article",{className:"card halloween",children:[u.jsx("h2",{children:"Halloween Social 🎃 — Interested?"}),u.jsx("p",{children:"We’re thinking about a low‑key Halloween social. Would you come, and would you be willing to pitch in a few dollars for snacks/decor?"}),u.jsx("div",{className:"poll",role:"group","aria-label":"Halloween social interest",children:["yes","maybe","no"].map(C=>u.jsx("button",{className:`option-btn ${d.interest===C?"selected":""}`,onClick:()=>m({...d,interest:C}),children:C==="yes"?"Yes":C==="maybe"?"Maybe":"No"},C))}),u.jsxs("div",{className:"pledge",children:[u.jsxs("label",{htmlFor:"pledge",className:"pledge-label",children:["If yes/maybe: would you pitch in? ",u.jsx("span",{className:"muted",children:"(suggested $5–$10)"})]}),u.jsxs("div",{className:"pledge-row",children:[u.jsx("span",{className:"prefix",children:"$"}),u.jsx("input",{id:"pledge",inputMode:"decimal",pattern:"^[0-9]*[.,]?[0-9]*$",className:"pledge-input",placeholder:"0",value:d.pledge,onChange:C=>m({...d,pledge:C.target.value.replace(/[^0-9.,]/g,"")})}),u.jsx("button",{className:"btn",onClick:()=>alert("Saved locally — thanks!"),children:"Save"})]}),u.jsx("p",{className:"note muted small",children:"Your response is stored locally in your browser for now. We’ll share a formal RSVP if we proceed."})]}),d.interest&&u.jsxs("div",{className:"you-said",children:[u.jsx("strong",{children:"Your current response:"})," ",d.interest.toUpperCase()," ",d.pledge?`• Pledge: $${d.pledge}`:""]})]})]})},Gk=(n,e)=>({uid:n,name:"",email:e||"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["performer"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""}),_d=n=>{if(!n)return null;if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?null:e}catch{return null}},$k=(n,e)=>{const t=_d(n),s=_d(e);if(!t)return"TBA";const o=t.toLocaleString?.()||t.toISOString();if(!s)return o;const d=t.toDateString()===s.toDateString()?s.toLocaleTimeString?.():s.toLocaleString?.();return`${o} → ${d}`},Yk=()=>{const n=Ut.currentUser,e=n?.uid??"",t=n?.email??"",s=bi(),[o,l]=F.useState(!0),[d,m]=F.useState(!1),[g,y]=F.useState(""),[v,b]=F.useState(null),[w,C]=F.useState(!1),[L,z]=F.useState(null),[j,Y]=F.useState(null),[K,X]=F.useState([]),[se,ie]=F.useState(!0);F.useEffect(()=>{let D=!0;return(async()=>{if(!e){l(!1);return}l(!0);try{const M=await Ok(e),N=M??Gk(e,n?.email??null);D&&b(N),M||await og(e,N)}catch(M){console.error("[Profile load]",M),D&&y(M?.message??"Failed to load profile")}finally{D&&l(!1)}})(),()=>{D=!1}},[e,n?.email,s.key]),F.useEffect(()=>{if(!t){X([]),ie(!1);return}ie(!0);const D=ct(Se,"availability"),M=ft(D,yt("email","==",t),yt("status","==","yes")),N=Zo(M,Ee=>{const xe=Ee.docs.map(V=>{const re=V.data();return{id:V.id,eventId:re.eventId,eventTitle:re.eventTitle||"Untitled Event",eventStart:_d(re.eventStart),eventEnd:_d(re.eventEnd),eventLocation:re.eventLocation??null}}).sort((V,re)=>(V.eventStart?.getTime()??0)-(re.eventStart?.getTime()??0));X(xe),ie(!1)},Ee=>{console.error("[Accepted events]",Ee),X([]),ie(!1)});return()=>N()},[t]);const B=D=>{const{name:M,value:N}=D.target;b(Ee=>Ee&&{...Ee,[M]:N})},I=D=>{const M=D.target.files?.[0]||null;if(z(M),M){const N=URL.createObjectURL(M);b(Ee=>Ee&&{...Ee,photoURL:N})}},R=async()=>{if(!L||!e)return;const D=(L.name.split(".").pop()||"jpg").toLowerCase(),M=yk(Ck,`avatars/${e}/avatar.${D}`);return await pk(M,L),await gk(M)},x=async()=>{if(!(!v||!e)){m(!0),y(""),Y(null);try{const D=await R(),M=v._instrumentsCSV,N=M?M.split(",").map(V=>V.trim()).filter(Boolean):v.instruments||[],Ee={...v,instruments:N,...D?{photoURL:D}:{}};await og(e,Ee);const xe=v.name||n?.displayName||void 0;await gI(Ut.currentUser,{displayName:xe,photoURL:D??v.photoURL??void 0}),C(!1),b({...v,instruments:N,...D?{photoURL:D}:{}}),Y({type:"success",text:"Profile saved. Thank you!"})}catch(D){console.error("[Profile save]",D),y(D?.message??"Failed to save profile"),Y({type:"error",text:"Something went wrong. Try again or re‑login."})}finally{m(!1)}}};if(o)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"Loading profile…"})})});if(!v)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"No profile."})})});const P=v.roles||[];return u.jsxs("div",{className:"profile-wrap",children:[u.jsxs("div",{className:"card profile-card",children:[j&&u.jsxs("div",{className:`inline-banner ${j.type}`,role:"status","aria-live":"polite",children:[u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:j.type==="success"?"✓":"!"}),u.jsx("span",{children:j.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>Y(null),"aria-label":"Dismiss",children:"×"})]}),u.jsxs("div",{className:"profile-head",children:[u.jsxs("div",{className:"avatar",children:[v.photoURL?u.jsx("img",{src:v.photoURL,alt:`${v.name||"Member"} avatar`}):u.jsx("div",{className:"avatar-placeholder",children:(v.name||v.email||"U")[0].toUpperCase()}),w&&u.jsxs("label",{className:"btn btn-light",style:{marginTop:8},children:["Upload photo",u.jsx("input",{type:"file",accept:"image/*",onChange:I,hidden:!0})]})]}),u.jsx("div",{className:"id-block",children:w?u.jsxs(u.Fragment,{children:[u.jsx("label",{className:"lbl",children:"Full Name"}),u.jsx("input",{name:"name",value:v.name||"",onChange:B,placeholder:"First Last"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:v.name||"Add your name"}),u.jsx("p",{className:"muted",children:v.email}),!!P.length&&u.jsx("div",{className:"roles",children:P.map(D=>u.jsx("span",{className:`role-chip role-${D}`,children:D},D))})]})}),u.jsx("div",{className:"actions",children:w?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn",disabled:d,onClick:x,children:d?"Saving…":"Save"}),u.jsx("button",{className:"btn btn-light",disabled:d,onClick:()=>C(!1),children:"Cancel"})]}):u.jsx("button",{className:"btn",onClick:()=>C(!0),children:"Edit"})})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Phone"}),w?u.jsx("input",{name:"phoneNumber",value:v.phoneNumber||"",onChange:B,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:v.phoneNumber||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Year"}),w?u.jsxs("select",{name:"year",value:v.year||"",onChange:B,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]}):u.jsx("div",{className:"val",children:v.year||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Major"}),w?u.jsx("input",{name:"major",value:v.major||"",onChange:B,placeholder:"e.g., Math, EE, Music"}):u.jsx("div",{className:"val",children:v.major||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Instrument"}),w?u.jsx("input",{name:"instrument",value:v.instrument||"",onChange:B,placeholder:"e.g., Violin, Trumpet, Vihuela"}):u.jsx("div",{className:"val",children:v.instrument||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Section"}),w?u.jsx("input",{name:"section",value:v.section||"",onChange:B,placeholder:"Strings / Brass / Rhythm / Vocals"}):u.jsx("div",{className:"val",children:v.section||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"All Instruments"}),w?u.jsx("input",{name:"_instrumentsCSV",value:(v.instruments||[]).join(", "),onChange:B,placeholder:"Violin, Viola, Trumpet"}):u.jsx("div",{className:"val",children:v.instruments&&v.instruments.length?v.instruments.join(", "):"—"})]})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Contact"}),w?u.jsx("input",{name:"emergencyName",value:v.emergencyName||"",onChange:B,placeholder:"Full name"}):u.jsx("div",{className:"val",children:v.emergencyName||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Phone"}),w?u.jsx("input",{name:"emergencyPhone",value:v.emergencyPhone||"",onChange:B,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:v.emergencyPhone||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Relation"}),w?u.jsx("input",{name:"emergencyRelation",value:v.emergencyRelation||"",onChange:B,placeholder:"Parent / Sibling / Friend"}):u.jsx("div",{className:"val",children:v.emergencyRelation||"—"})]})]}),u.jsxs("div",{className:"bio",children:[u.jsx("label",{className:"lbl",children:"Bio"}),w?u.jsx("textarea",{name:"bio",value:v.bio||"",onChange:B,rows:4,placeholder:"Short bio (markdown/plaintext)"}):u.jsx("p",{className:"val multi",children:v.bio||"Add a short bio about you, your experience, and favorite pieces to perform."})]}),g&&u.jsx("p",{className:"error",children:g})]}),u.jsx("h2",{className:"section-title",children:"Events I’m Playing (Yes)"}),se&&u.jsx("p",{className:"muted",children:"Loading your events…"}),u.jsxs("div",{className:"accepted-list",children:[K.map(D=>u.jsxs("article",{className:"accepted-card",children:[u.jsx("header",{className:"accepted-head",children:u.jsx("h3",{className:"accepted-title",children:D.eventTitle})}),u.jsxs("dl",{className:"accepted-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:$k(D.eventStart,D.eventEnd)})]}),D.eventLocation&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:D.eventLocation})]})]})]},D.id)),!se&&!K.length&&u.jsx("p",{className:"muted",children:"No accepted events yet. Head to Performer Availability to RSVP."})]})]})},Kk=n=>n==="published"?u.jsx("span",{className:"status published",children:"Published"}):n==="draft"?u.jsx("span",{className:"status draft",children:"Draft"}):n==="cancelled"?u.jsx("span",{className:"status cancelled",children:"Cancelled"}):null,sA=({event:n,canManage:e=!1,canRSVP:t=!1,onEdit:s,onDelete:o})=>u.jsxs("article",{className:`event-card ${n.status??""}`,children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h3",{className:"event-title",children:n.title}),Kk(n.status)]}),n.subtitle&&u.jsx("p",{className:"event-sub",children:n.subtitle}),u.jsxs("ul",{className:"event-meta",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"When:"})," ",n.dateStr]}),n.location&&u.jsxs("li",{children:[u.jsx("strong",{children:"Where:"})," ",n.location]})]}),n.notes&&u.jsx("p",{className:"event-notes",children:n.notes}),u.jsxs("footer",{className:"event-actions",children:[t&&u.jsxs("div",{className:"left-actions",children:[u.jsx("button",{className:"btn",children:"I can play"}),u.jsx("button",{className:"btn btn-light",children:"Can’t make it"})]}),e&&u.jsxs("div",{className:"right-actions",children:[u.jsx("button",{className:"btn",onClick:()=>s?.(n.id),children:"Edit"}),u.jsx("button",{className:"btn btn-danger",onClick:()=>o?.(n.id),children:"Delete"})]})]})]}),Qk=({event:n,onClose:e})=>{const t=n.dateStr?n.dateStr.split(","):[],s=t[0]?t[0].trim():"",o=t[1]?t[1].trim():"";return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:n.title}),s&&u.jsxs("p",{children:[u.jsx("strong",{children:"Date:"})," ",s]}),o&&u.jsxs("p",{children:[u.jsx("strong",{children:"Time:"})," ",o]}),n.location&&u.jsxs("p",{children:[u.jsx("strong",{children:"Location:"})," ",n.location]}),n.notes&&u.jsx("p",{className:"modal-desc",children:n.notes}),u.jsx("div",{className:"modal-actions",children:u.jsx("button",{onClick:e,children:"Close"})})]})})};function Bb(n){if(n)return n instanceof Re?n.toDate():n instanceof Date?n:new Date(n)}function Xk(n){return{...n,start:Bb(n.start),end:Bb(n.end)}}function rA(n,e,t){const s=typeof n=="object"&&"start"in n&&!(n instanceof Date),o=Intl.DateTimeFormat().resolvedOptions().timeZone,l={dateStyle:"medium",timeZone:o},d={timeStyle:"short",timeZone:o};if(s){const m=n,g=new Intl.DateTimeFormat(void 0,l).format(m.start),y=new Intl.DateTimeFormat(void 0,d).format(m.start),v=m.end?new Intl.DateTimeFormat(void 0,d).format(m.end):"";return{date:g,time:v?`${y} – ${v}`:y}}else{const m=n,g=new Intl.DateTimeFormat(void 0,l).format(m),y=new Intl.DateTimeFormat(void 0,d).format(m),v="";return v?`${g} • ${y} – ${v}`:`${g} • ${y}`}}const aA="events";function oA(n,e){const t=ft(ct(Se,aA),mn("start","asc"));return Zo(t,s=>{const o=s.docs.map(l=>Xk({id:l.id,...l.data()}));n(o)},s=>e?.(s))}async function Wk(n){return qc(ct(Se,"events"),{...n,createdAt:Yt(),updatedAt:Yt()})}async function Zk(n,e){await Ir(vt(Se,aA,n),{...e,updatedAt:Date.now()})}function Jk(n){const{date:e,time:t}=rA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const eM=()=>{const[n,e]=ee.useState([]),[t,s]=ee.useState(null),[o,l]=ee.useState(!0);return ee.useEffect(()=>{const d=oA(m=>{e(m.map(Jk)),l(!1)},m=>{console.error("[Events subscribe]",m),l(!1)});return()=>d()},[]),u.jsxs("section",{className:"ucla-content",style:{maxWidth:980,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Upcoming Events"}),o&&u.jsx("p",{children:"Loading events…"}),!o&&n.length===0&&u.jsx("p",{children:"No events yet."}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16,marginTop:16},children:n.map(d=>u.jsx(sA,{event:d,onClick:()=>s(d)},d.id))}),t&&u.jsx(Qk,{event:t,onClose:()=>s(null)})]})},tM=()=>u.jsxs("section",{className:"ucla-content",style:{padding:"2rem"},children:[u.jsx("h1",{className:"ucla-heading-xl",style:{color:"#FFD100"},children:"🎼 Sheet Music Library"}),u.jsx("p",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Access PDF sheet music for each instrument section."}),u.jsx("a",{href:"https://ucla.box.com/s/l1aip4gbacfkgy80bf46cya0pj50tv77",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"1rem 2rem",backgroundColor:"#2774AE",color:"#fff",textDecoration:"none",fontWeight:"bold",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"Open Sheet Music Library →"})]}),zb=n=>{if(!n&&n!==0)return null;if(typeof n=="object"&&n&&typeof n.toDate=="function")return n.toDate();if(n instanceof Date)return n;if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?null:e}return null},hc=n=>n<10?`0${n}`:`${n}`,wp=n=>`${n.getUTCFullYear()}${hc(n.getUTCMonth()+1)}${hc(n.getUTCDate())}T${hc(n.getUTCHours())}${hc(n.getUTCMinutes())}${hc(n.getUTCSeconds())}Z`,Sp=n=>n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"").replace(/[,;]/g,e=>`\\${e}`),nM=n=>{const e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Uclatlán//Mariachi Events//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:Mariachi de Uclatlán — Events"];for(const t of n)e.push("BEGIN:VEVENT",`UID:${t.id}@uclatlanmariachi`,`DTSTAMP:${wp(new Date)}`,`DTSTART:${wp(t.start)}`,`DTEND:${wp(t.end)}`,`SUMMARY:${Sp(t.title)}`,t.location?`LOCATION:${Sp(t.location)}`:"",t.description?`DESCRIPTION:${Sp(t.description)}`:"","END:VEVENT");return e.push("END:VCALENDAR"),e.filter(Boolean).join(`\r
`)},iM=()=>{const n=Go(),e=async()=>{try{await TI(Ut),localStorage.removeItem("adminAccess"),n("/login")}catch(X){console.error("Error during logout:",X)}},[t,s]=ee.useState(!1),[o,l]=ee.useState(""),d=ee.useCallback(async()=>{s(!0),l("");try{const X=ft(ct(Se,"events"),yt("status","in",["published","confirmed","active"]),mn("start","asc")),se=await vn(X),ie=[];se.forEach(P=>{const D=P.data(),M=zb(D.start),N=zb(D.end);!M||!N||ie.push({id:P.id,title:D.title??"Untitled Event",start:M,end:N,location:D.location??"",description:D.description??""})});const B=nM(ie),I=new Blob([B],{type:"text/calendar;charset=utf-8"}),R=URL.createObjectURL(I),x=document.createElement("a");x.href=R,x.download="uclatlan_events.ics",document.body.appendChild(x),x.click(),x.remove(),URL.revokeObjectURL(R),l(`Exported ${ie.length} event${ie.length===1?"":"s"} to .ics`)}catch(X){console.error("[Settings] Download ICS failed",X),l("Failed to export calendar")}finally{s(!1)}},[]),[m,g]=ee.useState(""),[y,v]=ee.useState(""),[b,w]=ee.useState(""),[C,L]=ee.useState(""),[z,j]=ee.useState(!1),Y=m.length>0&&y.length>=8&&y===b,K=async X=>{X.preventDefault(),L("");const se=Ut.currentUser;if(!se){L("You must be logged in.");return}if(!Y){L("Please fill all fields. Password must be at least 8 characters and match.");return}try{j(!0);const ie=se.email;if(!ie)throw new Error("This account uses a provider login (e.g., Google). Change your password with your provider.");if(m===y)throw new Error("New password must be different from the current password.");const B=Ca.credential(ie,m);await dI(se,B),await yI(se,y),g(""),v(""),w(""),L("Password updated successfully.")}catch(ie){L(ie?.message??"Failed to change password")}finally{j(!1)}};return u.jsxs("section",{className:"settings ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Account Settings"}),u.jsx("p",{className:"ucla-paragraph",children:"Manage your session, export your calendar, and update your password."}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Calendar"}),u.jsx("p",{className:"muted",children:"Export all published/confirmed events to an .ics file for Google/Apple/Outlook."}),u.jsx("button",{className:"btn primary",onClick:d,disabled:t,children:t?"Building calendar…":"Download .ics of events"}),o&&u.jsx("p",{className:"status",children:o})]}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Change Password"}),u.jsxs("form",{className:"form",onSubmit:K,children:[u.jsxs("label",{children:[u.jsx("span",{children:"Current password"}),u.jsx("input",{type:"password",value:m,onChange:X=>g(X.target.value),autoComplete:"current-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"New password"}),u.jsx("input",{type:"password",value:y,onChange:X=>v(X.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"Confirm new password"}),u.jsx("input",{type:"password",value:b,onChange:X=>w(X.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsx("button",{className:"btn primary",type:"submit",disabled:!Y||z,children:z?"Updating…":"Update password"}),C&&u.jsx("p",{className:`status ${/failed|error|requires|different/i.test(C)?"error":""}`,children:C}),u.jsx("p",{className:"muted tiny",children:"Note: If you signed in with Google/SSO, change your password with your provider."})]})]}),u.jsxs("div",{className:"settings-card danger",children:[u.jsx("h2",{children:"Session"}),u.jsx("p",{className:"muted",children:"Sign out of your account on this device."}),u.jsx("button",{className:"btn danger",onClick:e,children:"Log out"})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function sM(n,e,t,s){function o(l){return l instanceof t?l:new t(function(d){d(l)})}return new(t||(t=Promise))(function(l,d){function m(v){try{y(s.next(v))}catch(b){d(b)}}function g(v){try{y(s.throw(v))}catch(b){d(b)}}function y(v){v.done?l(v.value):o(v.value).then(m,g)}y((s=s.apply(n,[])).next())})}function rM(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},s,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(y){return function(v){return g([y,v])}}function g(y){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(l=y[0]&2?o.return:y[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,y[1])).done)return l;switch(o=0,l&&(y=[y[0]&2,l.value]),y[0]){case 0:case 1:l=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!l||y[1]>l[0]&&y[1]<l[3])){t.label=y[1];break}if(y[0]===6&&t.label<l[1]){t.label=l[1],l=y;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(y);break}l[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(n,t)}catch(v){y=[6,v],o=0}finally{s=l=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Co=function(){return Co=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Co.apply(this,arguments)},lA=function(n){return{loading:n==null,value:n}},aM=function(){return function(n,e){switch(e.type){case"error":return Co(Co({},n),{error:e.error,loading:!1,value:void 0});case"reset":return lA(e.defaultValue);case"value":return Co(Co({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},oM=(function(n){var e=n?n():void 0,t=F.useReducer(aM(),lA(e)),s=t[0],o=t[1],l=F.useCallback(function(){var g=n?n():void 0;o({type:"reset",defaultValue:g})},[n]),d=F.useCallback(function(g){o({type:"error",error:g})},[]),m=F.useCallback(function(g){o({type:"value",value:g})},[]);return F.useMemo(function(){return{error:s.error,loading:s.loading,reset:l,setError:d,setValue:m,value:s.value}},[s.error,s.loading,l,d,m,s.value])}),lM=(function(n,e){var t=oM(function(){return n.currentUser}),s=t.error,o=t.loading,l=t.setError,d=t.setValue,m=t.value;return F.useEffect(function(){var g=Xc(n,function(y){return sM(void 0,void 0,void 0,function(){var v;return rM(this,function(b){switch(b.label){case 0:return[3,4];case 1:return b.trys.push([1,3,,4]),[4,e.onUserChanged(y)];case 2:return b.sent(),[3,4];case 3:return v=b.sent(),l(v),[3,4];case 4:return d(y),[2]}})})},l);return function(){g()}},[n]),[m,o,s]});const ko=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},qb=n=>{const e=ko(n);return e?Re.fromDate(e):null},cM=(n,e)=>{const t=ko(n),s=ko(e);if(!t)return"";const o={year:"numeric",month:"short",day:"numeric"},l={hour:"2-digit",minute:"2-digit"};if(!s)return`${t.toLocaleDateString(void 0,o)} ${t.toLocaleTimeString(void 0,l)}`;const d=t.toDateString()===s.toDateString(),m=`${t.toLocaleDateString(void 0,o)} ${t.toLocaleTimeString(void 0,l)}`,g=d?s.toLocaleTimeString(void 0,l):`${s.toLocaleDateString(void 0,o)} ${s.toLocaleTimeString(void 0,l)}`;return`${m} → ${g}`},uM=()=>{const[n]=lM(Ut),[e,t]=ee.useState(!0),[s,o]=ee.useState(null),[l,d]=ee.useState([]),[m,g]=ee.useState({}),[y,v]=ee.useState({}),[b,w]=ee.useState({}),[C,L]=ee.useState(null),z=ee.useRef(null);ee.useEffect(()=>((async()=>{o(null),t(!0);try{const I=ft(ct(Se,"events"),yt("status","==","published")),x=(await vn(I)).docs.map(Ee=>({id:Ee.id,...Ee.data()})),P=Date.now(),D=x.filter(Ee=>{const xe=ko(Ee.start)?.getTime();return typeof xe=="number"?xe>=P-1e3*60*60*24:!0}).sort((Ee,xe)=>{const V=ko(Ee.start)?.getTime()??0,re=ko(xe.start)?.getTime()??0;return V-re});d(D);const M={},N={};for(const Ee of D)M[Ee.id]="",N[Ee.id]=!1;if(g(M),w(N),n){const Ee={...M},xe={...N};for(const V of D){const re=vt(Se,"events",V.id,"availability",n.uid),me=await ou(re),De=me.exists()?me.data():void 0,k=De?.status||"",ae=!!De?.finalized;Ee[V.id]=k,xe[V.id]=ae}g(Ee),w(xe)}}catch(I){console.error(I),o(I?.message||"Failed to load events")}finally{t(!1)}})(),()=>{z.current&&window.clearTimeout(z.current)}),[n]);const j=(B,I)=>{const R=I.target.value;g(x=>({...x,[B]:R}))},Y=B=>{L({type:"success",text:B}),z.current&&window.clearTimeout(z.current),z.current=window.setTimeout(()=>L(null),3500)},K=B=>{z.current&&window.clearTimeout(z.current),L({type:"error",text:B})},X=async(B,I)=>{if(!n)throw new Error("no-auth");const R=l.find(M=>M.id===B),x=vt(Se,"events",B,"availability",n.uid),P={uid:n.uid,displayName:n.displayName||n.email||"Unknown",email:n.email||null,status:I,updatedAt:Yt(),eventId:B,eventTitle:R?.title||"Untitled Event",eventStart:qb(R?.start),eventEnd:qb(R?.end),eventLocation:R?.location||null,finalized:!1};await Rs(x,P,{merge:!0});const D=`${B}_${n.uid}`;await Rs(vt(Se,"availability_responses",D),P,{merge:!0}),await Rs(vt(Se,"availability",D),P,{merge:!0})},se=async B=>{if(!n){K("Please try again.");return}const I=`Apply "${B.toUpperCase()}" to all events? Locked (finalized) items will be skipped.`;if(window.confirm(I)){g(R=>{const x={...R};for(const P of l)b[P.id]||(x[P.id]=B);return x});try{let R=0,x=0,P=0;for(const N of l){if(b[N.id]){x++;continue}try{await X(N.id,B),R++}catch{P++}}const D=[];R&&D.push(`${R} updated`),x&&D.push(`${x} skipped`),P&&D.push(`${P} failed`);const M=D.length?D.join(" • "):"No changes";P?K(`Done with issues — ${M}`):Y(`Done — ${M}.`)}catch(R){console.error(R),K("Please try again.")}}},ie=async B=>{if(!n){K("Please try again.");return}if(b[B]){K("This RSVP was finalized by an admin.");return}const I=m[B]||"";if(!I){K("Please select an availability first.");return}v(R=>({...R,[B]:!0}));try{await X(B,I),Y("Thank you for submitting your availability.")}catch(R){console.error(R),K("Please try again.")}finally{v(R=>({...R,[B]:!1}))}};return n?u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),C&&u.jsxs("div",{className:`inline-banner ${C.type}`,role:"status","aria-live":"polite",children:[C.type==="success"?u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"✓"}):u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"!"}),u.jsx("span",{children:C.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>L(null),"aria-label":"Dismiss",children:"×"})]}),u.jsxs("div",{className:"bulk-toolbar",children:[u.jsx("span",{className:"muted",children:"Apply to all:"}),u.jsx("button",{className:"btn bulk yes",onClick:()=>se("yes"),children:"Mark all Yes"}),u.jsx("button",{className:"btn bulk maybe",onClick:()=>se("maybe"),children:"Mark all Maybe"}),u.jsx("button",{className:"btn bulk no",onClick:()=>se("no"),children:"Mark all No"})]}),e&&u.jsx("p",{className:"muted",children:"Loading events…"}),s&&u.jsx("p",{className:"error-text",children:s}),u.jsxs("div",{className:"availability-list",children:[l.map(B=>u.jsxs("article",{className:"availability-card",children:[u.jsxs("header",{className:"availability-head",children:[u.jsx("h3",{className:"availability-title",children:B.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${B.status}`,children:B.status})]}),u.jsxs("dl",{className:"availability-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:cM(B.start,B.end)||"TBA"})]}),B.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:B.location})]})]}),u.jsxs("div",{className:"availability-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${B.id}`,children:["Availability for ",B.title]}),u.jsxs("select",{id:`sel-${B.id}`,value:m[B.id]||"",onChange:I=>j(B.id,I),disabled:b[B.id]||!!y[B.id],children:[u.jsx("option",{value:"",children:"Select availability…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsx("button",{className:"btn-primary",disabled:b[B.id]||!!y[B.id],onClick:()=>ie(B.id),children:y[B.id]?"Saving…":b[B.id]?"Finalized":"Submit"})]}),b[B.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP was finalized by an admin and can’t be changed."})]},B.id)),!e&&!l.length&&u.jsx("p",{className:"muted",children:"No upcoming events yet."})]})]}):u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),u.jsx("p",{children:"Please log in to set availability."})]})},hM=["angelrocks0319@gmail.com","angelr19@g.ucla.edu","angelr19@ucla.edu","uclatlan@ucla.edu","uclatlan@g.ucla.edu","enriquerodgon09@g.ucla.edu","andelapena1374@gmail.com"],cA=n=>{if(!n)return!1;const e=n.toLowerCase();return hM.some(t=>t.toLowerCase()===e)};function Ed(n,e){if(!n)return new Date;if(n instanceof Re)return n.toDate();if(typeof n=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(n))return new Date(`${n}T12:00:00`);const t=new Date(n);return isNaN(+t)?e??new Date:t}return n instanceof Date?n:e??new Date}function dM(n){const e=n.statuses??["published"],t=[];e.length===1?t.push(yt("status","==",e[0])):e.length>1&&t.push(yt("status","in",e.slice(0,10)));const s=ft(ct(Se,"events"),...t);return Zo(s,o=>{const l=o.docs.map(d=>{const m=d.data(),g=Ed(m.start??m.date),y=m.end?Ed(m.end):null,v=m.title??"Untitled Event";return{id:d.id,type:"event",title:v,start:g,end:y,location:m.location??null,status:m.status,raw:m}});l.sort((d,m)=>+d.start-+m.start),n.onChange(l)})}function fM(n){const e=ft(ct(Se,"calendar_feed"));return Zo(e,t=>{const s=t.docs.map(o=>{const l=o.data(),d=Ed(l.start??l.date),m=l.end?Ed(l.end):null,g=l.title??"Client Inquiry";return{id:o.id,type:"inquiry",title:g,start:d,end:m,location:l.location??null,status:l.status??"new",raw:l}});s.sort((o,l)=>+o.start-+l.start),n(s)})}function mM(n,e){const t=[...n,...e];return t.sort((s,o)=>+s.start-+o.start),t}const pM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],gM=(n,e)=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate(),lg=(n,e)=>{const t=new Date(n);return t.setDate(t.getDate()+e),t};function yM(n,e){const t=new Date(n.getFullYear(),n.getMonth(),1),s=(t.getDay()-e+7)%7,o=lg(t,-s),l=[];for(let d=0;d<42;d++)l.push(lg(o,d));return l}const vM=n=>n.toLocaleString(void 0,{month:"long",year:"numeric"});function _M(n,e){return n.slice(e).concat(n.slice(0,e))}function Td(n){const e=n.getFullYear(),t=(n.getMonth()+1).toString().padStart(2,"0"),s=n.getDate().toString().padStart(2,"0");return`${e}-${t}-${s}`}function EM(n,e){const t=new Map;for(const s of n){const o=new Date(s.start.getFullYear(),s.start.getMonth(),s.start.getDate()),l=s.end&&s.end>s.start?new Date(s.end.getFullYear(),s.end.getMonth(),s.end.getDate()):o;if(!e){const g=Td(o);t.has(g)||t.set(g,[]),t.get(g).push(s);continue}let d=o,m=0;for(;d<=l&&m++<60;){const g=Td(d);t.has(g)||t.set(g,[]),t.get(g).push(s),d=lg(d,1)}}return t}function TM(n,e){const t=n.audience;return!t||t==="public"?!0:t==="members"?e==="member"||e==="admin":t==="admins"?e==="admin":!0}const Ap=n=>{const e={yes:0,maybe:0,no:0};if(!n)return e;for(const t of n)t.status==="going"?e.yes++:t.status==="maybe"?e.maybe++:t.status==="declined"&&e.no++;return e},bM=({events:n,month:e,year:t,firstDayOfWeek:s=0,onEventClick:o,onMonthChange:l,renderEvent:d,maxPillsPerDay:m=3,expandMultiDay:g=!0,view:y="month",showViewToggle:v=!0,canViewParticipants:b=!1,fetchParticipants:w,subscribeParticipants:C,viewerRole:L="guest",filterByAudience:z=!0,showAvailabilityBadges:j=!0})=>{const[Y,K]=ee.useState(()=>new Date(t??new Date().getFullYear(),e??new Date().getMonth(),1)),[X,se]=ee.useState(y),[ie,B]=ee.useState(!1),[I,R]=ee.useState(null),[x,P]=ee.useState(null),[D,M]=ee.useState(!1),[N,Ee]=ee.useState({}),xe=ee.useRef({});ee.useEffect(()=>{l?.(Y.getFullYear(),Y.getMonth())},[Y.getFullYear(),Y.getMonth()]),ee.useEffect(()=>{se(y)},[y]),ee.useEffect(()=>{if(!ie)return;const ue=ge=>{ge.key==="Escape"&&B(!1)};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[ie]);const V=ee.useMemo(()=>(z?n.filter(ue=>TM(ue,L)):n).sort((ue,ge)=>+ue.start-+ge.start),[n,L,z]),re=ee.useMemo(()=>yM(Y,s),[Y,s]),me=ee.useMemo(()=>EM(V,g),[V,g]),De=ee.useMemo(()=>_M(pM,s),[s]),k=ee.useMemo(()=>{const ue=new Map;for(const ge of V){const he=Td(ge.start);ue.has(he)||ue.set(he,[]),ue.get(he).push(ge)}return Array.from(ue.entries()).sort((ge,he)=>ge[0].localeCompare(he[0]))},[V]);ee.useEffect(()=>{if(Object.values(xe.current).forEach(he=>he()),xe.current={},!C){(async()=>{const he=new Set,We=X==="month"?Array.from(me.values()).flat():V;for(const ot of We)he.add(ot.id);const ke={};if(w){for(const ot of he)try{const bt=await w(ot);ke[ot]=Ap(bt)}catch{}Ee(ot=>({...ot,...ke}))}})();return}const ue=he=>{if(xe.current[he])return;const We=C(he,ke=>{Ee(ot=>({...ot,[he]:Ap(ke)}))});xe.current[he]=We},ge=X==="month"?Array.from(me.values()).flat():V;for(const he of ge)ue(he.id);return()=>{Object.values(xe.current).forEach(he=>he()),xe.current={}}},[X,me,V,C,w]);const ae=async ue=>{if(o?.(ue),R(ue),B(!0),b&&w){M(!0);try{const ge=await w(ue.id);P(ge),Ee(he=>({...he,[ue.id]:Ap(ge)}))}finally{M(!1)}}else P(null)},de=()=>{B(!1),R(null),P(null)},ce=({id:ue})=>{if(!j)return null;const ge=N[ue];return!ge||ge.yes+ge.maybe+ge.no===0?null:u.jsxs("div",{className:"av-badges","aria-label":`Availability: ${ge.yes} yes, ${ge.maybe} maybe, ${ge.no} no`,children:[u.jsxs("span",{className:"av-chip yes",children:["Yes ",ge.yes]}),ge.maybe?u.jsxs("span",{className:"av-chip maybe",children:["Maybe ",ge.maybe]}):null,ge.no?u.jsxs("span",{className:"av-chip no",children:["No ",ge.no]}):null]})};return u.jsxs("div",{className:"cal-wrap",role:"group","aria-label":"Calendar",children:[u.jsxs("div",{className:"cal-header",children:[u.jsxs("div",{className:"left-ctrls",children:[u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>K(new Date(Y.getFullYear(),Y.getMonth()-1,1)),"aria-label":"Previous month",children:"◀"}),u.jsx("div",{className:"cal-title","aria-live":"polite",children:vM(Y)}),u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>K(new Date(Y.getFullYear(),Y.getMonth()+1,1)),"aria-label":"Next month",children:"▶"})]}),v&&u.jsxs("div",{className:"view-toggle",role:"tablist","aria-label":"Calendar view selector",children:[u.jsx("button",{className:`view-btn ${X==="month"?"active":""}`,role:"tab","aria-selected":X==="month",onClick:()=>se("month"),children:"Month"}),u.jsx("button",{className:`view-btn ${X==="agenda"?"active":""}`,role:"tab","aria-selected":X==="agenda",onClick:()=>se("agenda"),children:"Agenda"})]})]}),X==="month"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"cal-grid cal-weekdays",role:"row",children:De.map(ue=>u.jsx("div",{className:"cal-weekday",role:"columnheader","aria-label":ue,children:ue},ue))}),u.jsx("div",{className:"cal-grid cal-cells",role:"grid","aria-readonly":!0,children:re.map((ue,ge)=>{const he=Td(ue),We=me.get(he)||[],ke=gM(ue,new Date),ot=ue.getMonth()===Y.getMonth();return u.jsxs("div",{className:`cal-cell ${ot?"":"muted"}`,role:"gridcell","aria-selected":ke,children:[u.jsx("div",{className:`cal-date ${ke?"today":""}`,"aria-label":ue.toDateString(),children:ue.getDate()}),u.jsxs("div",{className:"cal-events",children:[We.slice(0,m).map(bt=>u.jsxs("div",{className:"cal-pill-wrap",children:[u.jsx("button",{type:"button",className:`cal-pill${bt.status?` status-${bt.status}`:""}`,title:`${bt.title}${bt.location?" @ "+bt.location:""}`,onClick:()=>ae(bt),children:d?d(bt):bt.title}),u.jsx(ce,{id:bt.id})]},bt.id)),We.length>m&&u.jsxs("div",{className:"cal-more",children:["+",We.length-m," more"]})]})]},ge)})})]}):u.jsxs("div",{className:"agenda-wrap",children:[k.length===0&&u.jsx("p",{className:"muted-text",children:"No items."}),k.map(([ue,ge])=>u.jsxs("div",{className:"agenda-day",children:[u.jsx("h3",{className:"agenda-day-head",children:new Date(ue).toLocaleDateString()}),u.jsx("ul",{className:"agenda-items",children:ge.map(he=>u.jsxs("li",{className:"agenda-item",children:[u.jsxs("span",{className:"agenda-time",children:[he.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),he.end?` – ${he.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""]}),u.jsxs("div",{className:"agenda-pill-wrap",children:[u.jsxs("button",{type:"button",className:`agenda-pill${he.status?` status-${he.status}`:""}`,onClick:()=>ae(he),title:`${he.title}${he.location?" @ "+he.location:""}`,children:[u.jsx("strong",{children:he.title}),he.location?u.jsxs("span",{className:"agenda-loc",children:[" • ",he.location]}):null]}),u.jsx(ce,{id:he.id})]})]},he.id))})]},ue))]}),ie&&I&&u.jsxs("div",{className:"cal-drawer-container","aria-hidden":!ie,children:[u.jsx("div",{className:"cal-drawer-backdrop",onClick:de}),u.jsxs("div",{className:"cal-drawer-panel",role:"dialog","aria-modal":!0,"aria-label":"Event details",onClick:ue=>ue.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsx("div",{className:"drawer-title",children:I.title}),u.jsxs("div",{className:"drawer-meta",children:[I.start.toLocaleString(),I.end?` – ${I.end.toLocaleTimeString()}`:"",I.location?` • ${I.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:de,"aria-label":"Close",children:"✕"})]}),u.jsx("div",{className:"drawer-body",children:u.jsxs("div",{className:"stack",children:[u.jsx("div",{className:"muted-text",children:I.description??"No description provided."}),u.jsx("div",{children:u.jsx(ce,{id:I.id})}),b?D?u.jsx("div",{className:"loading",children:"Loading attendees…"}):x&&x.length?u.jsx(wM,{list:x}):u.jsx("div",{className:"muted-text",children:"No attendee data."}):u.jsx("div",{className:"muted-text",children:"Attendee visibility disabled."})]})})]})]})]})},wM=({list:n})=>{const[e,t]=ee.useState("going"),s=ee.useMemo(()=>{const d=n.filter(y=>y.status==="going"),m=n.filter(y=>y.status==="maybe"),g=n.filter(y=>y.status==="declined");return{g:d,m,d:g}},[n]),o=d=>u.jsxs("tr",{children:[u.jsx("td",{children:d.name??d.uid}),u.jsx("td",{className:`status ${d.status??"unknown"}`,children:d.status??"unknown"}),u.jsx("td",{children:d.section??"—"})]},d.uid),l=e==="all"?n:e==="going"?s.g:e==="maybe"?s.m:s.d;return u.jsxs("div",{className:"att-wrap",children:[u.jsxs("div",{className:"att-tabs",role:"tablist","aria-label":"Attendee filters",children:[u.jsxs("button",{className:`att-tab ${e==="going"?"active":""}`,onClick:()=>t("going"),role:"tab","aria-selected":e==="going",children:["Going (",s.g.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="maybe"?"active":""}`,onClick:()=>t("maybe"),role:"tab","aria-selected":e==="maybe",children:["Maybe (",s.m.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="declined"?"active":""}`,onClick:()=>t("declined"),role:"tab","aria-selected":e==="declined",children:["Declined (",s.d.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="all"?"active":""}`,onClick:()=>t("all"),role:"tab","aria-selected":e==="all",children:["All (",n.length,")"]})]}),u.jsxs("table",{className:"att-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Section"})]})}),u.jsx("tbody",{children:l.length?l.map(o):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"muted-text",style:{textAlign:"center"},children:"No one here."})})})]})]})},uA=["participation","availability","avaiablity","rsvps","rsvp"];function Bh(n){if(!n)return;if(n instanceof Re||typeof n=="object"&&n&&"toDate"in n)return n.toDate();const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function SM(n){if(typeof n=="string"){const e=n.toLowerCase();if(["going","yes","attending","available","confirm","confirmed"].includes(e))return"going";if(["maybe","tentative","unsure"].includes(e))return"maybe";if(["declined","no","unavailable","cant","can't","cannot"].includes(e))return"declined"}return typeof n=="boolean"?n?"going":"declined":"unknown"}function hA(n,e){const t=e.uid||n,s=e.name||e.displayName,o=e.section||e.instrument,l=e.status??e.availability??e.response??e.rsvp??e.going,d=SM(l),m=Bh(e.updatedAt)||Bh(e.updated_at)||Bh(e.lastUpdated)||Bh(e._updated)||void 0;return{uid:t,name:s,status:d,section:o,updatedAt:m}}function AM(n,e){if(!n)return e;if(!e)return n;if(n.updatedAt&&e.updatedAt)return n.updatedAt>e.updatedAt?n:e;if(n.updatedAt&&!e.updatedAt)return n;if(!n.updatedAt&&e.updatedAt)return e;const t={going:3,maybe:2,declined:1,unknown:0},s=t[n.status??"unknown"],o=t[e.status??"unknown"];return s!==o&&s>o?n:e}function dA(n){const e=new Map;for(const t of n)for(const s of t)e.set(s.uid,AM(e.get(s.uid),s));return Array.from(e.values())}async function RM(n){const e=[];for(const t of uA)try{const s=await vn(ct(Se,`events/${n}/${t}`));s.empty||e.push(s.docs.map(o=>hA(o.id,o.data())))}catch{}return dA(e)}function xM(n,e){const t=[],s=new Map,o=()=>e(dA(Array.from(s.values())));for(const l of uA)try{const d=ct(Se,`events/${n}/${l}`),m=Zo(d,g=>{const y=g.docs.map(v=>hA(v.id,v.data()));s.set(l,y),o()},()=>{s.delete(l),o()});t.push(m)}catch{}return()=>{for(const l of t)try{l()}catch{}}}const NM=n=>RM(n),CM=(n,e)=>xM(n,e),IM=()=>{const[n,e]=ee.useState(!1),[t,s]=ee.useState([]),[o,l]=ee.useState([]),[d,m]=ee.useState([]);ee.useEffect(()=>{const y=Xc(Ut,v=>{e(cA(v?.email??void 0))});return()=>y()},[]),ee.useEffect(()=>{const y=dM({statuses:["published"],onChange:s}),v=fM(l);return()=>{y(),v()}},[]),ee.useEffect(()=>{m(mM(t,o))},[t,o]);const g=ee.useMemo(()=>d,[d]);return u.jsxs("section",{className:"calendar-page",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Calendar"}),u.jsxs("p",{className:"ucla-paragraph",children:["Published events",n?" + client inquiries":"","."]}),g.length===0?u.jsx("p",{children:"No upcoming items yet."}):u.jsx(bM,{events:g,view:"agenda",showViewToggle:!0,canViewParticipants:!0,fetchParticipants:NM,subscribeParticipants:CM,viewerRole:n?"admin":"member",filterByAudience:!0,showAvailabilityBadges:!0})]})},Fb=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},Rp=({label:n,value:e,loading:t,error:s})=>u.jsxs("div",{className:"stat-card","aria-live":"polite",children:[u.jsx("div",{className:"stat-value",children:t?"…":s?"!":e}),u.jsx("div",{className:"stat-label",children:t?"Loading…":s||n})]}),Hb=()=>{const[n,e]=ee.useState(!1),[t,s]=ee.useState(!0),[o,l]=ee.useState(null),[d,m]=ee.useState("—"),[g,y]=ee.useState("—"),[v,b]=ee.useState("—"),[w,C]=ee.useState(null),[L,z]=ee.useState(null),[j,Y]=ee.useState(null);ee.useEffect(()=>{const X=Xc(Ut,se=>e(!!se));return()=>X()},[]),ee.useEffect(()=>{if(!n)return;(async()=>{s(!0),l(null),C(null),z(null),Y(null);const se=Date.now(),ie=new Date(se-1440*60*1e3),B=(async()=>{try{const x=ct(Se,"events"),P=ft(x,yt("status","==","published")),M=(await vn(P)).docs.filter(N=>{const Ee=Fb(N.data().start)?.getTime();return typeof Ee=="number"?Ee>=se-7200*1e3:!1}).length;m(M)}catch(x){m("—"),C(x?.code==="permission-denied"?"No permission":"Error")}})(),I=(async()=>{try{const x=ct(Se,"inquiries"),D=(await vn(x)).docs.filter(M=>{const N=M.data();return typeof N.pushed=="boolean"?N.pushed===!1:N.status!=="closed"}).length;y(D)}catch(x){y("—"),z(x?.code==="permission-denied"?"No permission":"Error")}})(),R=(async()=>{try{const x=ct(Se,"availability_responses"),P=ft(x,yt("status","==","yes")),M=(await vn(P)).docs.filter(N=>{const Ee=N.data(),xe=Fb(Ee.eventStart);return xe?xe>=ie:!1}).length;b(M)}catch(x){b("—"),Y(x?.code==="permission-denied"?"No permission":"Error")}})();try{await Promise.all([B,I,R])}catch(x){l(x?.message||"Failed to load stats")}finally{s(!1)}})()},[n]);const K=[{to:"events",title:"Events",desc:"Create, publish, and manage upcoming events.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M7 2v2M17 2v2M3 8h18M5 6h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm3 5h4m-4 4h8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"})})},{to:"managemembers",title:"Manage Members",desc:"Search members and assign roles.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M12 12a4 4 0 1 0-0.001-8.001A4 4 0 0 0 12 12zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z",fill:"currentColor"})})},{to:"reports",title:"Reports",desc:"Export availability & payouts (CSV/PDF).",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M7 3h10a2 2 0 0 1 2 2v10l-4 4H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm8 0v4h4",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 13h8M8 9h6M8 17h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"inquiries",title:"Requests",desc:"Accept/decline Hire Us inquiries → events.",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M21 7v10a2 2 0 0 1-2 2H9l-6 3V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 10h8M8 14h5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"participation",title:"Participation",desc:"Attendance & financial summaries.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M4 19V5m16 14V5M9 19V9m6 10V12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}];return u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{children:[u.jsx("h1",{className:"admin-title",children:"Admin Dashboard"}),u.jsx("p",{className:"admin-sub",children:"Manage members, assign roles, and oversee events."})]})}),u.jsxs("section",{className:"admin-stats","aria-label":"Quick Stats",children:[u.jsx(Rp,{label:"Upcoming Events",value:d,loading:t,error:w}),u.jsx(Rp,{label:"Pending Requests",value:g,loading:t,error:L}),u.jsx(Rp,{label:"Performers Confirmed",value:v,loading:t,error:j})]}),o&&u.jsx("p",{className:"admin-sub",style:{color:"#b91c1c"},children:o}),u.jsx("section",{className:"admin-grid","aria-label":"Admin Navigation",children:K.map(X=>u.jsxs(ht,{className:({isActive:se})=>`admin-card ${se?"active":""}`,to:X.to,children:[X.icon,u.jsxs("div",{className:"card-body",children:[u.jsx("h3",{children:X.title}),u.jsx("p",{children:X.desc})]}),u.jsx("span",{className:"chev","aria-hidden":!0,children:"›"})]},X.to))})]})},fA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:"Performer Portal"}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/dashboard",className:n,children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:n,children:"Public Site"})})]})]})},Gb=()=>u.jsxs(u.Fragment,{children:[u.jsx(fA,{}),u.jsxs("div",{style:{padding:"2rem"},children:[u.jsx("h1",{children:"Performer Dashboard"}),u.jsx("p",{children:"Welcome to the Performer Dashboard. Here you can see your events, resources, and manage your profile."})]})]}),mA=()=>u.jsxs("nav",{className:"navbar",children:[u.jsx("div",{className:"nav-brand",children:"Mariachi de Uclatlán"}),u.jsxs("ul",{className:"nav-links",children:[u.jsx("li",{children:u.jsx(In,{to:"/",children:"Home"})}),u.jsx("li",{children:u.jsx(In,{to:"/about",children:"About"})}),u.jsx("li",{children:u.jsx(In,{to:"/members",children:"Members"})}),u.jsx("li",{children:u.jsx(In,{to:"/contact",children:"Contact"})}),u.jsx("li",{children:u.jsx(In,{to:"/Login",children:"Login"})}),u.jsx("li",{children:u.jsx(In,{to:"/Register",children:"Register"})})]})]}),DM=()=>u.jsxs("footer",{className:"footer compact-footer",children:[u.jsxs("p",{children:["© ",new Date().getFullYear()," Mariachi de Uclatlán."]}),u.jsxs("p",{children:["Developed by Angel Ramirez | ",u.jsx("a",{href:"/contact",children:"Contact"})]})]}),pA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:u.jsx(ht,{to:"/members",className:n,children:"Members Portal"})}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{className:"divider"}),u.jsx("li",{children:u.jsx(ht,{to:"/admin-password",className:n,children:"Admin"})}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:n,children:"Public Site"})})]})]})},Sy=()=>u.jsxs("nav",{className:"admin-navbar",role:"navigation","aria-label":"Admin Navigation Bar",children:[u.jsx("div",{className:"admin-brand",children:"Admin Portal"}),u.jsx("button",{className:"admin-menu-toggle","aria-label":"Toggle menu",onClick:()=>{document.querySelector(".admin-links")?.classList.toggle("open")},children:"☰"}),u.jsxs("ul",{className:"admin-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/admin",end:!0,className:({isActive:n})=>n?"active":"",children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/inquiries",className:({isActive:n})=>n?"active":"",children:"Requests"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/events",className:({isActive:n})=>n?"active":"",children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/managemembers",className:({isActive:n})=>n?"active":"",children:"Manage Members"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/reports",className:({isActive:n})=>n?"active":"",children:"Reports"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:({isActive:n})=>n?"active":"",children:"Availability"})}),u.jsx("li",{className:"divider","aria-hidden":!0,children:"│"}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:({isActive:n})=>n?"active":"",children:"Public Site"})})]})]}),jM=({user:n,isAdmin:e,claims:t})=>{const[s,o]=ee.useState(!1),l=()=>{console.log("AdminDebug -> user:",n),console.log("AdminDebug -> isAdmin:",e),console.log("AdminDebug -> claims:",t),o(d=>!d)};return u.jsxs("div",{className:"admin-debug",children:[u.jsx("button",{className:"admin-debug-btn",onClick:l,children:s?"Hide Debug":"Show Debug"}),s&&u.jsxs("div",{className:"admin-debug-info",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"User email:"})," ",n?.email||"None"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"isAdmin:"})," ",e?"true":"false"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Claims:"})," ",JSON.stringify(t)||"{}"]})]})]})},xp=({user:n,children:e,isAdminUser:t,requiresAdmin:s})=>{const o=bi();return n?s&&!t?u.jsx(Dp,{to:"/",replace:!0}):u.jsx(u.Fragment,{children:e}):u.jsx(Dp,{to:"/login",replace:!0,state:{from:o}})},OM="chuy1345",PM=()=>{const[n,e]=F.useState(""),[t,s]=F.useState(""),o=Go(),l=d=>{d.preventDefault(),n===OM?(localStorage.setItem("adminAccess","true"),o("/admin")):s("Invalid password. Try again.")};return u.jsxs("section",{className:"ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Admin Access"}),u.jsxs("form",{onSubmit:l,style:{marginTop:"1rem"},children:[u.jsx("label",{htmlFor:"admin-password",style:{display:"block",marginBottom:".5rem"},children:"Enter admin password:"}),u.jsx("input",{id:"admin-password",type:"password",value:n,onChange:d=>{e(d.target.value),s("")},required:!0,style:{padding:"0.5rem",fontSize:"1rem",marginBottom:".5rem"}}),u.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem"},children:"Enter"}),t&&u.jsx("p",{style:{color:"red",marginTop:".5rem"},children:t})]})]})},kM=()=>u.jsxs("div",{className:"admin-shell",children:[u.jsx(Sy,{}),u.jsx("div",{className:"admin-content",children:u.jsx(rw,{})})]}),MM=({open:n,onClose:e,onCreate:t,defaultValues:s})=>{const[o,l]=ee.useState(()=>({title:s?.title??"",date:s?.date??new Date().toISOString().slice(0,10),startTime:s?.startTime??"",endTime:s?.endTime??"",location:s?.location??"",description:s?.description??"",status:s?.status??"draft"})),[d,m]=ee.useState(!1),[g,y]=ee.useState(null);if(ee.useEffect(()=>{n&&(l(w=>({...w,title:s?.title??"",date:s?.date??new Date().toISOString().slice(0,10),startTime:s?.startTime??"",endTime:s?.endTime??"",location:s?.location??"",description:s?.description??"",status:s?.status??"draft"})),y(null))},[n]),!n)return null;const v=w=>{const{name:C,value:L}=w.target;l(z=>({...z,[C]:L}))},b=async w=>{if(w.preventDefault(),y(null),!o.title.trim())return y("Title is required.");if(!/^\d{4}-\d{2}-\d{2}$/.test(o.date))return y("Date must be YYYY-MM-DD.");try{m(!0),await t(o),m(!1),e()}catch(C){console.error("[CreateEventModal] create error",C),m(!1),y(C?.message??"Failed to create event.")}};return u.jsx("div",{className:"cem-backdrop",role:"dialog","aria-modal":"true","aria-label":"Create event",children:u.jsxs("div",{className:"cem-modal",children:[u.jsxs("header",{className:"cem-header",children:[u.jsx("h2",{children:"Create Event"}),u.jsx("button",{className:"cem-icon",onClick:e,"aria-label":"Close",children:"×"})]}),u.jsxs("form",{className:"cem-form",onSubmit:b,children:[g&&u.jsx("div",{className:"cem-error",children:g}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Title *"}),u.jsx("input",{name:"title",value:o.title,onChange:v,placeholder:"e.g., Wedding at Royce Hall"})]}),u.jsxs("div",{className:"cem-row",children:[u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Date *"}),u.jsx("input",{type:"date",name:"date",value:o.date,onChange:v})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Start"}),u.jsx("input",{type:"time",name:"startTime",value:o.startTime,onChange:v})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"End"}),u.jsx("input",{type:"time",name:"endTime",value:o.endTime,onChange:v})]})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Location"}),u.jsx("input",{name:"location",value:o.location,onChange:v,placeholder:"Address or venue"})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Description/Notes"}),u.jsx("textarea",{name:"description",value:o.description,onChange:v,placeholder:"Any details for performers or client..."})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Status"}),u.jsxs("select",{name:"status",value:o.status,onChange:v,children:[u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),u.jsxs("footer",{className:"cem-footer",children:[u.jsx("button",{type:"button",className:"btn btn-light",onClick:e,disabled:d,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn",disabled:d,children:d?"Saving…":"Create Event"})]})]})]})})};function VM(n){const{date:e,time:t}=rA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const LM=()=>{const[n,e]=ee.useState([]),[t,s]=ee.useState(!0),[o,l]=ee.useState(!1);ee.useEffect(()=>{const y=oA(v=>{e(v.map(VM)),s(!1)},v=>{console.error("[AdminEvents subscribe]",v),s(!1)});return()=>y()},[]);const d=y=>{console.log("edit",y)},m=async y=>{if(confirm("Delete (cancel) this event?"))try{await Zk(y,{status:"cancelled"})}catch(v){console.error("[handleDelete]",v),alert("Failed to delete (cancel) event.")}},g=async y=>{const v={title:y.title.trim(),date:y.date,startTime:y.startTime||null,endTime:y.endTime||null,location:y.location?.trim()||"",description:y.description?.trim()||"",status:y.status??"draft"};await Wk(v)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1024,margin:"0 auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Events"}),u.jsx("button",{className:"btn",onClick:()=>l(!0),children:"+ Create Event"})]}),t&&u.jsx("p",{children:"Loading events…"}),!t&&u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16,marginTop:16},children:n.map(y=>u.jsx(sA,{event:y,canManage:!0,onEdit:d,onDelete:m},y.id))}),!t&&n.length===0&&u.jsx("p",{children:"No events found."}),u.jsx(MM,{open:o,onClose:()=>l(!1),onCreate:g})]})};function cg(n){const e=["admin","performer","member"];return n?(Array.isArray(n)?n:[n]).map(s=>typeof s=="string"?s.toLowerCase():s).filter(s=>e.includes(s)):[]}const gA="users";async function UM(){return(await vn(ct(Se,gA))).docs.map(e=>{const t=e.data();return{uid:e.id,email:t.email??"",...t}})}async function BM(n,e){const t=vt(Se,gA,n);await Rs(t,{roles:e,isAdmin:e.includes("admin"),updatedAt:Yt()},{merge:!0})}const $b={name:"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["member"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""};async function zM(){const n=Ut.currentUser;if(!n)return!1;try{if((await n.getIdTokenResult())?.claims?.admin)return!0}catch{}try{const e=await ou(vt(Se,"users",n.uid));return!!e.exists()&&!!e.data()?.isAdmin}catch{}return!1}function qM(){const[n,e]=ee.useState([]),[t,s]=ee.useState(!0),[o,l]=ee.useState(null);return ee.useEffect(()=>{let d=!0;return(async()=>{s(!0),l(null);const m=Ut.currentUser;if(!m){l("Not signed in"),s(!1);return}try{if(await zM()){const v=(await UM()).map(b=>({...$b,...b,uid:b.uid,email:b.email??"",roles:cg(b.roles),instruments:Array.isArray(b.instruments)?b.instruments:[]}));d&&e(v)}else{const y=await ou(vt(Se,"users",m.uid)),v=y.exists()?y.data():{},b={...$b,...v,uid:m.uid,email:v?.email??m.email??"",roles:cg(v?.roles),instruments:Array.isArray(v?.instruments)?v?.instruments:[]};d&&e([b])}}catch(g){console.error("[useUsersRoster] failed",g),d&&l(g?.message||"Failed to load users")}finally{d&&s(!1)}})(),()=>{d=!1}},[]),{profiles:n,loading:t,error:o}}const FM={member:"#e2e8f0",performer:"#cffafe",admin:"#fde68a"},HM={member:"Member",performer:"Performer",admin:"Admin"},GM=({role:n})=>u.jsx("span",{style:{background:FM[n],borderRadius:9999,padding:"2px 10px",fontSize:12,border:"1px solid rgba(0,0,0,0.06)"},children:HM[n]}),$M=({value:n,onChange:e,disabled:t})=>u.jsxs("select",{value:n,onChange:s=>e(s.target.value),disabled:t,style:{padding:"6px 8px"},children:[u.jsx("option",{value:"member",children:"Member"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]});function YM(n){return!n||n.length===0?"member":n.includes("admin")?"admin":n.includes("performer")?"performer":"member"}const KM=({checked:n,onChange:e,disabled:t,label:s})=>u.jsx("button",{type:"button",className:`toggle ${n?"on":""}`,"aria-pressed":n,disabled:t,onClick:()=>e(!n),title:s,children:u.jsx("span",{className:"knob"})}),Ts=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},QM=(n,e)=>{const t=Ts(n),s=Ts(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!s)return o;const d=t.toDateString()===s.toDateString()?s.toLocaleTimeString?.():s.toLocaleString?.();return`${o} → ${d}`},XM=({member:n,open:e,onClose:t})=>{const[s,o]=ee.useState([]),[l,d]=ee.useState({}),[m,g]=ee.useState({}),[y,v]=ee.useState({}),[b,w]=ee.useState(!1);ee.useEffect(()=>{let j=!0;return(async()=>{if(!(!e||!n)){w(!0);try{const K=ct(Se,"events"),X=ft(K,yt("status","==","published")),se=await vn(X);if(!j)return;const ie=se.docs.map(N=>({id:N.id,...N.data()})),B=Date.now(),I=ie.filter(N=>{const Ee=Ts(N.start)?.getTime();return typeof Ee=="number"?Ee>=B-1e3*60*60*24:!0}).sort((N,Ee)=>(Ts(N.start)?.getTime()??0)-(Ts(Ee.start)?.getTime()??0)),R={},x={};I.forEach(N=>{R[N.id]="",x[N.id]=!1});const P=await Promise.all(I.map(N=>ou(vt(Se,"events",N.id,"availability",n.uid))));if(!j)return;const D={...R},M={...x};P.forEach((N,Ee)=>{if(N.exists()){const xe=N.data();D[I[Ee].id]=xe.status||"",M[I[Ee].id]=!!xe.finalized}}),o(I),d(D),g(M)}finally{j&&w(!1)}}})(),()=>{j=!1}},[e,n]);const C=(j,Y)=>{d(K=>({...K,[j]:Y}))},L=(j,Y)=>{g(K=>({...K,[j]:Y}))},z=async j=>{if(!n)return;const Y=l[j.id]||"";if(Y){v(K=>({...K,[j.id]:!0}));try{const K=!!m[j.id],X={uid:n.uid,displayName:n.name||n.email||"Unknown",email:n.email||null,status:Y,updatedAt:Re.now(),eventId:j.id,eventTitle:j.title||"Untitled Event",eventStart:Ts(j.start)?Re.fromDate(Ts(j.start)):null,eventEnd:Ts(j.end)?Re.fromDate(Ts(j.end)):null,eventLocation:j.location||null,finalized:K,finalizedBy:"admin",finalizedAt:K?Re.now():null},se=vt(Se,"events",j.id,"availability",n.uid);await Rs(se,X,{merge:!0});const ie=`${j.id}_${n.uid}`,B=vt(Se,"availability",ie);await Rs(B,X,{merge:!0})}finally{v(K=>({...K,[j.id]:!1}))}}};return u.jsxs("div",{className:`drawer ${e?"open":""}`,"aria-hidden":!e,children:[u.jsx("div",{className:"drawer-backdrop",onClick:t}),u.jsxs("div",{className:"drawer-panel",role:"dialog","aria-modal":"true","aria-label":"Manage Member RSVPs",children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{className:"drawer-title",children:[u.jsx("div",{className:"avatar sm",children:n?.photoURL?u.jsx("img",{src:n.photoURL,alt:"avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(n?.name||n?.email||"U")[0].toUpperCase()})}),u.jsxs("div",{children:[u.jsx("h3",{children:n?.name||"Member"}),u.jsx("p",{className:"muted",children:n?.email})]})]}),u.jsx("button",{className:"btn btn-light",onClick:t,children:"Close"})]}),u.jsxs("div",{className:"drawer-body",children:[b&&u.jsx("p",{className:"muted",children:"Loading events…"}),!b&&!s.length&&u.jsx("p",{className:"muted",children:"No upcoming events."}),u.jsx("div",{className:"event-list",children:s.map(j=>u.jsxs("article",{className:"event-card",children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h4",{children:j.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${j.status}`,children:j.status})]}),u.jsxs("dl",{className:"event-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:QM(j.start,j.end)||"TBA"})]}),j.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:j.location})]})]}),u.jsxs("div",{className:"event-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${n?.uid}-${j.id}`,children:["RSVP for ",j.title]}),u.jsxs("select",{id:`sel-${n?.uid}-${j.id}`,value:l[j.id]||"",onChange:Y=>C(j.id,Y.target.value),children:[u.jsx("option",{value:"",children:"Select…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsxs("label",{className:"finalize-toggle",children:[u.jsx("input",{type:"checkbox",checked:!!m[j.id],onChange:Y=>L(j.id,Y.target.checked)}),u.jsx("span",{children:"Finalize"})]}),u.jsx("button",{className:"btn-primary",disabled:!!y[j.id]||!l[j.id],onClick:()=>z(j),children:y[j.id]?"Saving…":"Save"})]}),m[j.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP will be locked for the performer."})]},j.id))})]})]})]})},WM=()=>{const{profiles:n,loading:e,error:t}=qM(),[s,o]=ee.useState(""),[l,d]=ee.useState({}),[m,g]=ee.useState(null),[y,v]=ee.useState(!1),b=ee.useMemo(()=>{const z=s.trim().toLowerCase();return z?n.filter(j=>{const Y=(j.name??"").toLowerCase(),K=(j.email??"").toLowerCase(),X=(j.instruments??[]).join(", ").toLowerCase();return Y.includes(z)||K.includes(z)||X.includes(z)}):n},[n,s]),w=async(z,j)=>{const Y=j==="admin"?["admin"]:j==="performer"?["performer"]:["member"];await BM(z.uid,Y)},C=async(z,j)=>{try{d(K=>({...K,[z.uid]:!0}));const Y=vt(Se,"users",z.uid);await Rs(Y,{canSeeEvents:j},{merge:!0})}finally{d(Y=>({...Y,[z.uid]:!1}))}},L=z=>{g(z),v(!0)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1100,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Members"}),u.jsx("p",{children:"Search, assign roles, control event access, and finalize RSVPs."}),u.jsx("div",{style:{margin:"12px 0"},children:u.jsx("input",{value:s,onChange:z=>o(z.target.value),placeholder:"Search by name, email, instrument…",style:{width:"100%",maxWidth:420}})}),e&&u.jsx("p",{children:"Loading members…"}),t&&u.jsx("p",{style:{color:"salmon"},children:String(t)}),!e&&!t&&u.jsxs("table",{className:"members-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Name"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Instruments"}),u.jsx("th",{children:"Role"}),u.jsx("th",{children:"Change Role"}),u.jsx("th",{children:"See Events?"}),u.jsx("th",{children:"RSVPs"})]})}),u.jsx("tbody",{children:b.map(z=>{const j=cg(z.roles),Y=YM(j),K=!!z.canSeeEvents,X=!!l[z.uid];return u.jsxs("tr",{children:[u.jsx("td",{children:z.name??""}),u.jsx("td",{children:z.email??""}),u.jsx("td",{children:(z.instruments??[]).join(", ")}),u.jsx("td",{children:u.jsx(GM,{role:Y})}),u.jsx("td",{children:u.jsx($M,{value:Y,onChange:se=>w(z,se)})}),u.jsx("td",{children:u.jsxs("div",{className:"perm-cell",children:[u.jsx(KM,{checked:K,disabled:X,onChange:se=>C(z,se),label:"Can view members events"}),u.jsx("span",{className:"perm-label",children:K?"Allowed":"Hidden"})]})}),u.jsx("td",{children:u.jsx("button",{className:"btn",onClick:()=>L(z),children:"Open"})})]},z.uid)})})]}),u.jsx(XM,{member:m,open:y,onClose:()=>v(!1)})]})};function dc(n){if(n){if(typeof n=="string")return n;if(n instanceof Re)return n.toDate().toISOString()}}async function Yb(n,e){const t=ft(ct(Se,"calendar_feed"),yt("sourceId","==",n),KO(1)),o=(await vn(t)).docs[0];o&&await Ir(vt(Se,"calendar_feed",o.id),{status:e,updatedAt:Yt()})}const ZM=()=>{const[n,e]=ee.useState([]),[t,s]=ee.useState(""),[o,l]=ee.useState("");ee.useEffect(()=>{const g=ft(ct(Se,"inquiries"),mn("createdAt","desc")),y=Zo(g,v=>{const b=v.docs.map(w=>({id:w.id,...w.data()}));e(b)},v=>l(v?.message||"Failed to load inquiries"));return()=>y()},[]);const d=async g=>{try{s(g.id),l("");const y=g.event||{},v=dc(y.start)||(y.date?new Date(`${y.date}T12:00:00`).toISOString():void 0),b=dc(y.end),w={title:y.title||"Client Performance",date:y.date||void 0,start:v,end:b,location:y.location||"",status:"published",source:"inquiry",sourceId:g.id,createdAt:Yt(),updatedAt:Yt()},C=await qc(ct(Se,"events"),w);await Ir(vt(Se,"inquiries",g.id),{status:"in_progress",eventId:C.id,updatedAt:Yt()}),await Yb(g.id,"in_progress")}catch(y){console.error("[accept inquiry]",y),l(y?.message||"Failed to accept request")}finally{s("")}},m=async g=>{try{s(g.id),l(""),await Ir(vt(Se,"inquiries",g.id),{status:"closed",updatedAt:Yt()}),await Yb(g.id,"closed")}catch(y){console.error("[decline inquiry]",y),l(y?.message||"Failed to decline request")}finally{s("")}};return u.jsxs("section",{className:"admin-inquiries ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performance Requests"}),u.jsx("p",{children:"Review client inquiries. Accept to create an Event; Decline to close."}),o&&u.jsx("p",{className:"err",role:"alert",children:o}),u.jsx("div",{className:"inq-list",children:n.map(g=>{const y=g.event||{};return u.jsxs("article",{className:`inq-card status-${g.status||"new"}`,children:[u.jsxs("header",{className:"inq-head",children:[u.jsxs("div",{children:[u.jsx("h3",{children:y.title||"Client Inquiry"}),u.jsxs("div",{className:"muted",children:["From: ",g.name," • ",g.email,g.org?` • ${g.org}`:""]})]}),u.jsx("span",{className:`chip ${g.status||"new"}`,children:g.status||"new"})]}),u.jsxs("dl",{className:"grid",children:[u.jsxs("div",{children:[u.jsx("dt",{children:"Date"}),u.jsx("dd",{children:y.date||(typeof y.start=="string"?y.start.slice(0,10):"")||"—"})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Time"}),u.jsx("dd",{children:(dc(y.start)?.slice(11,16)||"—")+(dc(y.end)?` – ${dc(y.end).slice(11,16)}`:"")})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Location"}),u.jsx("dd",{children:y.location||"—"})]}),u.jsxs("div",{className:"span-2",children:[u.jsx("dt",{children:"Notes"}),u.jsx("dd",{children:g.message||"—"})]})]}),u.jsxs("footer",{className:"actions",children:[u.jsx("button",{className:"btn",disabled:t===g.id,onClick:()=>d(g),children:"Accept"}),u.jsx("button",{className:"btn btn-light",disabled:t===g.id,onClick:()=>m(g),children:"Decline"})]})]},g.id)})}),n.length===0&&u.jsx("p",{children:"No requests yet."})]})};async function JM(n){const e=ct(Se,"events"),t=[mn("date","desc")];n?.statusIn&&n.statusIn.length&&t.unshift(yt("status","in",n.statusIn));const s=ft(e,...t),o=await vn(s),l=[];for(const d of o.docs){const m={id:d.id,...d.data()},g=ct(Se,`events/${d.id}/participation`),v=(await vn(g)).docs.map(L=>({uid:L.id,...L.data()}));let b=0,w=0,C=0;for(const L of v){if(!(L.status==="going"))continue;b+=1;const j=typeof L.compensatedHours=="number"?L.compensatedHours:m.eventDurationHours??0,Y=typeof L.hourlyRateOverride=="number"?L.hourlyRateOverride:m.hourlyRate??0;w+=j,C+=j*Y}l.push({...m,participants:v,totals:{headcountGoing:b,totalCompHours:w,totalPayout:C}})}return l}async function eV(n){await Ir(vt(Se,"events",n),{status:"published"})}async function tV(n){await Ir(vt(Se,"events",n),{status:"hidden"})}async function nV(n){await Ir(vt(Se,"events",n),{status:"canceled"})}async function iV(n){const e=ZO(Se),t=vt(Se,"events",n),s=ct(Se,`events/${n}/participation`);(await vn(s)).forEach(l=>e.delete(l.ref)),e.delete(t),await e.commit()}const sV=n=>n?n.toDate().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",ma=n=>typeof n=="number"?`$${n.toFixed(2)}`:"—",rV=({status:n})=>u.jsx("span",{className:`status badge ${n}`,children:n}),Kb=()=>{const[n,e]=ee.useState(!0),[t,s]=ee.useState([]),[o,l]=ee.useState("all"),[d,m]=ee.useState(""),g=ee.useCallback(async()=>{e(!0);const b=await JM({statusIn:o==="all"?void 0:[o]});s(b),e(!1)},[o]);ee.useEffect(()=>{g()},[g]);const y=ee.useMemo(()=>{const v=d.trim().toLowerCase();return t.filter(b=>!v||b.title.toLowerCase().includes(v))},[t,d]);return u.jsxs("section",{className:"participation-page",children:[u.jsx("h1",{children:"Participation & Event Financials"}),u.jsxs("div",{className:"toolbar",children:[u.jsx("input",{placeholder:"Search events by title…",value:d,onChange:v=>m(v.target.value)}),u.jsxs("select",{value:o,onChange:v=>l(v.target.value),children:[u.jsx("option",{value:"all",children:"All statuses"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"hidden",children:"Hidden"}),u.jsx("option",{value:"canceled",children:"Canceled"})]}),u.jsx("button",{onClick:g,disabled:n,children:n?"Loading…":"Reload"})]}),y.map(v=>u.jsxs("details",{className:"event-card",children:[u.jsx("summary",{children:u.jsxs("div",{className:"ev-summary",children:[u.jsxs("div",{className:"ev-title",children:[u.jsx("h3",{children:v.title}),u.jsxs("div",{className:"meta",children:[u.jsx("span",{children:sV(v.date)}),u.jsxs("span",{children:["• ",v.startTime??"—","–",v.endTime??"—"]}),u.jsxs("span",{children:["• ",v.venue??"—"]})]})]}),u.jsxs("div",{className:"ev-stats",children:[u.jsx(rV,{status:v.status}),u.jsxs("div",{className:"kpis",children:[u.jsxs("div",{children:[u.jsx("small",{children:"Going"}),u.jsx("strong",{children:v.totals.headcountGoing})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Comp Hours"}),u.jsx("strong",{children:v.totals.totalCompHours.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Total Payout"}),u.jsx("strong",{children:ma(v.totals.totalPayout)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Client Charge"}),u.jsx("strong",{children:ma(v.clientCharge)})]})]})]})]})}),u.jsxs("div",{className:"ev-actions",children:[u.jsx("button",{onClick:()=>eV(v.id).then(g),children:"Publish"}),u.jsx("button",{onClick:()=>tV(v.id).then(g),children:"Hide"}),u.jsx("button",{onClick:()=>nV(v.id).then(g),children:"Cancel"}),u.jsx("button",{className:"danger",onClick:()=>{confirm("Delete event and all participation? This cannot be undone.")&&iV(v.id).then(g)},children:"Delete"})]}),u.jsxs("div",{className:"ev-financials",children:[u.jsx("h4",{children:"Financial Summary"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Hourly Rate"}),u.jsx("th",{children:"Event Duration (hrs)"}),u.jsx("th",{children:"Headcount (Going)"}),u.jsx("th",{children:"Total Comp Hours"}),u.jsx("th",{children:"Total Payout"}),u.jsx("th",{children:"Client Charge"})]})}),u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("td",{children:ma(v.hourlyRate??null)}),u.jsx("td",{children:v.eventDurationHours??"—"}),u.jsx("td",{children:v.totals.headcountGoing}),u.jsx("td",{children:v.totals.totalCompHours.toFixed(2)}),u.jsx("td",{children:ma(v.totals.totalPayout)}),u.jsx("td",{children:ma(v.clientCharge)})]})})]})]}),u.jsxs("div",{className:"ev-participants",children:[u.jsx("h4",{children:"Who’s Going"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Compensated Time (hrs)"}),u.jsx("th",{children:"Rate ($/hr)"}),u.jsx("th",{children:"Performer Payout"})]})}),u.jsxs("tbody",{children:[v.participants.filter(b=>b.status==="going").map(b=>{const w=b.compensatedHours??v.eventDurationHours??0,C=b.hourlyRateOverride??v.hourlyRate??0,L=w*C;return u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status}),u.jsx("td",{children:typeof w=="number"?w.toFixed(2):"—"}),u.jsx("td",{children:ma(C)}),u.jsx("td",{children:ma(L)})]},b.uid)}),v.participants.filter(b=>b.status==="going").length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:5,style:{textAlign:"center",opacity:.65},children:"No confirmed performers yet."})})]})]}),u.jsxs("details",{className:"others",children:[u.jsx("summary",{children:"View others (maybe/declined/unknown)"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Notes"})]})}),u.jsx("tbody",{children:v.participants.filter(b=>b.status!=="going").map(b=>u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status??"unknown"}),u.jsx("td",{children:"—"})]},b.uid))})]})]})]})]},v.id)),!n&&y.length===0&&u.jsx("p",{style:{opacity:.7},children:"No events match your filter."})]})};function aV(n=960){const e=typeof n=="number"?`(max-width: ${n}px)`:n,t=()=>typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1,[s,o]=F.useState(t);return F.useEffect(()=>{if(typeof window>"u"||!("matchMedia"in window))return;const l=window.matchMedia(e);o(l.matches);const d=m=>o(m.matches);return l.addEventListener?.("change",d),l.addListener?.(d),()=>{l.removeEventListener?.("change",d),l.removeListener?.(d)}},[e]),s}const oV=({className:n="",children:e,mobile:t=960})=>{const s=aV(t),o=`${n} ${s?"stack":""}`.trim();return u.jsx("div",{className:o,children:e})},fr=n=>{try{if(!n&&n!==0)return null;if(n&&typeof n=="object"&&"toDate"in n)return n.toDate();if(typeof n=="string")return new Date(n);if(typeof n=="number")return new Date(n)}catch{}return null},Np=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"Unknown",lV=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():void 0,Cp=(n,e)=>{const t=n?fr(n):null,s=e?fr(e):null;if(!t||!s)return 0;const o=Math.max(0,s.getTime()-t.getTime());return Math.round(o/36e5*4)/4},cV=()=>{const[n,e]=ee.useState(""),[t,s]=ee.useState(""),[o,l]=ee.useState(!1),[d,m]=ee.useState(""),[g,y]=ee.useState([]),[v,b]=ee.useState([]),[w,C]=ee.useState([]),[L,z]=ee.useState({total:0,published:0,canceled:0,completed:0}),[j,Y]=ee.useState({Submitted:0,Accepted:0,Booked:0,Completed:0}),[K,X]=ee.useState({total:0,Yes:0,Maybe:0,No:0}),[se,ie]=ee.useState(!1),[B,I]=ee.useState(null),[R,x]=ee.useState([]),[P,D]=ee.useState(!1),M=ee.useCallback(async()=>{l(!0),m("");const V=n?new Date(n+"T00:00:00"):null,re=t?new Date(t+"T23:59:59.999"):null;try{const me=ct(Se,"events");let De;V&&re?De=ft(me,yt("date",">=",Re.fromDate(V)),yt("date","<=",Re.fromDate(re)),mn("date","desc")):V?De=ft(me,yt("date",">=",Re.fromDate(V)),mn("date","desc")):re?De=ft(me,yt("date","<=",Re.fromDate(re)),mn("date","desc")):De=ft(me,mn("date","desc"));const ae=(await vn(De)).docs.map(mt=>{const Ie=mt.data();return{id:mt.id,date:fr(Ie.date??Ie.start),start:Ie.start??Ie.date,end:Ie.end??null,status:Ie.status?Np(Ie.status):void 0,title:Ie.title||Ie.name,location:Ie.location}}),de={total:ae.length,published:0,canceled:0,completed:0};for(const mt of ae){const Ie=(mt.status||"").toLowerCase();Ie==="published"||Ie==="confirmed"?de.published++:Ie==="cancelled"||Ie==="canceled"?de.canceled++:(Ie==="completed"||Ie==="done")&&de.completed++}const ce=ct(Se,"inquiries");let ue;V&&re?ue=ft(ce,yt("date",">=",Re.fromDate(V)),yt("date","<=",Re.fromDate(re)),mn("date","desc")):V?ue=ft(ce,yt("date",">=",Re.fromDate(V)),mn("date","desc")):re?ue=ft(ce,yt("date","<=",Re.fromDate(re)),mn("date","desc")):ue=ft(ce,mn("date","desc"));const he=(await vn(ue)).docs.map(mt=>{const Ie=mt.data();return{id:mt.id,date:fr(Ie.date),status:Ie.status?Np(Ie.status):void 0,title:Ie.title||Ie.clientName||Ie.subject}}),We={Submitted:0,Accepted:0,Booked:0,Completed:0};for(const mt of he){const Ie=Np(mt.status);Ie in We&&We[Ie]++}const ke=ct(Se,"availability");let ot;V&&re?ot=ft(ke,yt("eventStart",">=",Re.fromDate(V)),yt("eventStart","<=",Re.fromDate(re)),mn("eventStart","desc")):V?ot=ft(ke,yt("eventStart",">=",Re.fromDate(V)),mn("eventStart","desc")):re?ot=ft(ke,yt("eventStart","<=",Re.fromDate(re)),mn("eventStart","desc")):ot=ft(ke,mn("eventStart","desc"));const Vn=(await vn(ot)).docs.map(mt=>{const Ie=mt.data(),Ms=Ie.response??Ie.status,Vs=typeof Ms=="string"?Ms.toLowerCase():"",An=Vs==="yes"?"Yes":Vs==="no"?"No":Vs==="maybe"?"Maybe":lV(Ie.response);return{id:mt.id,uid:Ie.uid,name:Ie.displayName||Ie.name,eventId:Ie.eventId,date:fr(Ie.eventStart??Ie.date),response:An,title:Ie.eventTitle||Ie.title}}),Qn={total:Vn.length,Yes:0,Maybe:0,No:0};for(const mt of Vn)mt.response==="Yes"?Qn.Yes++:mt.response==="Maybe"?Qn.Maybe++:mt.response==="No"&&Qn.No++;y(ae),b(he),C(Vn),z(de),Y(We),X(Qn)}catch(me){console.error(me),m(me?.message??"Failed to fetch report data"),y([]),b([]),C([]),z({total:0,published:0,canceled:0,completed:0}),Y({Submitted:0,Accepted:0,Booked:0,Completed:0}),X({total:0,Yes:0,Maybe:0,No:0})}finally{l(!1)}},[n,t]);ee.useEffect(()=>{M()},[M]);const N=async V=>{I(V),ie(!0);try{const re=ft(ct(Se,"availability"),yt("eventId","==",V.id)),De=(await vn(re)).docs.map(k=>k.data()).filter(k=>["yes","going","attending"].includes(String(k.status??k.response).toLowerCase())).map(k=>({uid:k.uid,name:k.displayName||k.name||k.email||k.uid,approved:!1}));x(De)}catch(re){console.error(re),x([])}},Ee=V=>x(re=>re.map(me=>me.uid===V?{...me,approved:!me.approved}:me)),xe=async()=>{if(B){D(!0);try{const V=Cp(B.start,B.end),re=R.filter(me=>me.approved);await Promise.all(re.map(me=>{const De=vt(Se,"events",B.id,"payments",me.uid),k={uid:me.uid,name:me.name,eventId:B.id,eventTitle:B.title||"Untitled Event",eventDate:fr(B.date)??null,hours:V,approvedAt:Yt()};return Rs(De,k,{merge:!0})})),await Ir(vt(Se,"events",B.id),{status:"completed",completedAt:Yt()}),await M(),ie(!1),I(null),x([])}catch(V){console.error("Finalize failed",V),m("Finalize failed. See console.")}finally{D(!1)}}};return u.jsxs("section",{className:"reports stack",children:[u.jsxs("header",{className:"stack",children:[u.jsx("h1",{className:"title",children:"Reports"}),u.jsx("p",{className:"lede",children:"Tallies for Events, Inquiries, and Availability with simple finalization."})]}),u.jsxs("div",{className:"toolbar",children:[u.jsxs("div",{className:"left",children:[u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"From"}),u.jsx("input",{type:"date",value:n,onChange:V=>e(V.target.value)})]}),u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"To"}),u.jsx("input",{type:"date",value:t,onChange:V=>s(V.target.value)})]})]}),u.jsx("div",{className:"right",children:u.jsx("button",{className:"btn",onClick:M,disabled:o,children:o?"Loading…":"Refresh"})})]}),d&&u.jsx("div",{className:"alert",children:d}),u.jsxs(oV,{className:"grid cols-3 stack-md",children:[u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Events"}),u.jsxs("p",{className:"muted",children:["Total (range): ",L.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Published"}),u.jsx("strong",{children:L.published})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge canceled",children:"Canceled"}),u.jsx("strong",{children:L.canceled})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:L.completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Inquiries Funnel"}),u.jsxs("p",{className:"muted",children:["Total: ",Object.values(j).reduce((V,re)=>V+re,0)]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Submitted"}),u.jsx("strong",{children:j.Submitted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge accepted",children:"Accepted"}),u.jsx("strong",{children:j.Accepted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge booked",children:"Booked"}),u.jsx("strong",{children:j.Booked})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:j.Completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Availability"}),u.jsxs("p",{className:"muted",children:["Total responses: ",K.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge yes",children:"Yes"}),u.jsx("strong",{children:K.Yes})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge maybe",children:"Maybe"}),u.jsx("strong",{children:K.Maybe})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge no",children:"No"}),u.jsx("strong",{children:K.No})]})]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Events in Range"}),u.jsxs("div",{className:"table table-5",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status"}),u.jsx("div",{children:"Duration"}),u.jsx("div",{children:"Actions"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&g.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No events."})}),!o&&g.map(V=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:V.date?V.date.toLocaleDateString():"—"}),u.jsx("div",{children:V.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(V.status||"unknown").toLowerCase()}`,children:V.status||"—"})}),u.jsxs("div",{children:[Cp(V.start,V.end)," hr"]}),u.jsx("div",{children:u.jsx("button",{className:"btn sm",onClick:()=>N(V),disabled:!V.id,children:"Manage"})})]},V.id))]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Recent (Events • Inquiries • Availability)"}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Type"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status/Response"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&g.length+v.length+w.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No items for selected range."})}),!o&&u.jsxs(u.Fragment,{children:[g.map(V=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:V.date?V.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Event"}),u.jsx("div",{children:V.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(V.status||"unknown").toLowerCase()}`,children:V.status||"—"})})]},`e-${V.id}`)),v.map(V=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:V.date?V.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Inquiry"}),u.jsx("div",{children:V.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(V.status||"unknown").toLowerCase()}`,children:V.status||"—"})})]},`q-${V.id}`)),w.map(V=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:V.date?V.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Availability"}),u.jsx("div",{children:V.title||V.eventId||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(V.response||"unknown").toLowerCase()}`,children:V.response||"—"})})]},`r-${V.id}`))]})]})]}),se&&u.jsxs("div",{className:"rep-drawer-container","aria-hidden":!se,children:[u.jsx("div",{className:"rep-drawer-backdrop",onClick:()=>ie(!1)}),u.jsxs("div",{className:"rep-drawer-panel",role:"dialog","aria-modal":!0,"aria-label":"Finalize Event",onClick:V=>V.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"drawer-title",children:["Finalize: ",B?.title??"—"]}),u.jsxs("div",{className:"drawer-meta",children:[B?.start?fr(B.start)?.toLocaleString():"—",B?.end?` – ${fr(B.end)?.toLocaleTimeString()}`:"",B?.location?` • ${B.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:()=>ie(!1),"aria-label":"Close",children:"✕"})]}),u.jsxs("div",{className:"drawer-body",children:[u.jsx("p",{className:"muted",children:"YES RSVPs — check whom to approve for payment."}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Approve"}),u.jsx("div",{children:"Performer"})]}),R.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No YES RSVPs found."})}),R.map(V=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:u.jsx("input",{type:"checkbox",checked:V.approved,onChange:()=>Ee(V.uid),"aria-label":`Approve ${V.name}`})}),u.jsx("div",{children:V.name})]},V.uid))]}),u.jsxs("div",{className:"stack",children:[u.jsxs("div",{className:"muted",children:["Duration: ",B?Cp(B.start,B.end):0," hr"]}),u.jsx("button",{className:"btn-primary",onClick:xe,disabled:P||R.every(V=>!V.approved),children:P?"Finalizing…":"Finalize & Write Payments"})]})]})]})]})]})},Ay=({person:n})=>u.jsxs("article",{className:"person-card","aria-label":n.name,children:[u.jsx("div",{className:"person-card__image",children:u.jsx("img",{src:n.headshotUrl||"https://via.placeholder.com/512x640?text=Headshot",alt:`${n.name} headshot`,loading:"lazy"})}),u.jsxs("div",{className:"person-card__body",children:[u.jsx("h3",{className:"person-card__name",children:n.name}),n.role&&u.jsx("p",{className:"person-card__meta",children:n.role}),n.instrument&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Instrument:"})," ",n.instrument]}),n.section&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Section:"})," ",n.section]})]})]}),uV=[{id:"staff-1",name:"Jesús Guzmán",category:"staff",role:"Director",headshotUrl:"../../assets/headshots/Chuy.png"},{id:"staff-2",name:"Elias Rodriguez",category:"staff",role:"Program Coordinator",headshotUrl:"https://via.placeholder.com/512x640?text=Elias+Rodriguez"}],hV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Staff"}),u.jsx("p",{className:"people-subtitle",children:"Leaders and coordinators supporting Mariachi de Uclatlán."})]}),u.jsx("div",{className:"people-grid",children:uV.map(n=>u.jsx(Ay,{person:n},n.id))})]}),dV=[{id:"mus-1",name:"Enrique Rodrigruez-Gonzales",category:"musician",instrument:"Vihuela",section:"Armonia",headshotUrl:"EnriqueImg"},{id:"mus-2",name:"Angel Ramirez",category:"musician",instrument:"Guitarron",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=José+Hernández"},{id:"mus-3",name:"Brandon",category:"musician",role:"Guitarra",section:"Armonia",headshotUrl:"src/assets/headshots/brandon.jpg"},{id:"mus-3",name:"Paulina Perez",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-4",name:"Gaby (guitar)",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-5",name:"Dayanara Bravo",role:"Violin-Guitarron",category:"musician",section:"String-Armonia",headshotUrl:"src/assets/headshots/daya.jpg"},{id:"Mus-6",name:"Jake Sherry",category:"musician",role:"Trumpet",section:"Trumpet",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-7",name:"april",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-8",name:"Andrew",category:"musician",role:"Violin",section:"string",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],fV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Musicians"}),u.jsx("p",{className:"people-subtitle",children:"Meet the student performers who bring the music to life."})]}),u.jsx("div",{className:"people-grid",children:dV.map(n=>u.jsx(Ay,{person:n},n.id))})]}),mV=[{id:"dan-1",name:"Sarah Ward",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],pV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Dancers"}),u.jsx("p",{className:"people-subtitle",children:"Folklórico dancers who bring motion and storytelling to our performances."})]}),u.jsx("div",{className:"people-grid",children:mV.map(n=>u.jsx(Ay,{person:n},n.id))})]}),gV=({adminComponent:n,performerComponent:e,publicComponent:t})=>{const[s,o]=F.useState("public"),l=d=>{const m=d.target.value;o(m)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f0f0f0"},children:[u.jsx("label",{style:{marginRight:"0.5rem"},children:"Select Role View:"}),u.jsxs("select",{value:s,onChange:l,children:[u.jsx("option",{value:"public",children:"Public"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]})]}),s==="admin"&&u.jsx(Sy,{}),s==="performer"&&u.jsx(pA,{}),"  ",s==="public"&&u.jsx(mA,{}),u.jsxs("main",{children:[s==="admin"&&n,s==="performer"&&e,s==="public"&&t]})]})},yV=()=>u.jsx(rw,{}),vV=()=>{const[n,e]=ee.useState(null),[t,s]=ee.useState(null),o=bi();ee.useEffect(()=>{const b=Xc(Ut,async w=>{if(e(w),w){const C=await Dw(w);s(C.claims)}else s(null)});return()=>b()},[]),typeof window<"u"&&localStorage.getItem("adminAccess");const l=ee.useMemo(()=>typeof window<"u"&&localStorage.getItem("adminAccess")==="true"?!0:n?t?.admin||t?.role==="admin"?!0:cA(n.email??void 0):!1,[n,t,o.pathname]),d=o.pathname,m=d.startsWith("/members"),g=d.startsWith("/admin"),y=d.startsWith("/performer-dashboard"),v=d.startsWith("/dashboard")||y||g;return u.jsxs("div",{className:"app-shell",children:[!m&&!v&&u.jsx(mA,{}),m&&n&&u.jsx(pA,{}),y&&n&&u.jsx(fA,{}),u.jsx("main",{className:"container main stack",role:"main",children:u.jsxs(Fx,{children:[u.jsx(Ke,{path:"/",element:u.jsx(WE,{})}),u.jsx(Ke,{path:"/about",element:u.jsx(R1,{})}),u.jsx(Ke,{path:"/contact",element:u.jsx(x1,{})}),u.jsx(Ke,{path:"/login",element:u.jsx(Dk,{})}),u.jsx(Ke,{path:"/register",element:u.jsx(Pk,{})}),u.jsx(Ke,{path:"/book-us",element:u.jsx(Vk,{})}),u.jsx(Ke,{path:"/hire-us",element:u.jsx(Bk,{})}),u.jsx(Ke,{path:"/join",element:u.jsx(Lk,{})}),u.jsx(Ke,{path:"/staff",element:u.jsx(hV,{})}),u.jsx(Ke,{path:"/musicians",element:u.jsx(fV,{})}),u.jsx(Ke,{path:"/dancers",element:u.jsx(pV,{})}),u.jsx(Ke,{path:"/admin-password",element:u.jsx(PM,{})}),u.jsxs(Ke,{path:"/members",element:u.jsx(xp,{user:n,children:u.jsx(yV,{})}),children:[u.jsx(Ke,{index:!0,element:u.jsx(Hk,{})}),u.jsx(Ke,{path:"profile",element:u.jsx(Yk,{})}),u.jsx(Ke,{path:"events",element:u.jsx(eM,{})}),u.jsx(Ke,{path:"resources",element:u.jsx(tM,{})}),u.jsx(Ke,{path:"settings",element:u.jsx(iM,{})}),u.jsx(Ke,{path:"performer-availability",element:u.jsx(uM,{})}),u.jsx(Ke,{path:"calendar",element:u.jsx(IM,{})})]}),u.jsx(Ke,{path:"/dashboard",element:u.jsx(gV,{adminComponent:u.jsx(Hb,{}),performerComponent:u.jsx(Gb,{}),publicComponent:u.jsx(WE,{})})}),u.jsxs(Ke,{path:"/admin/*",element:u.jsx(xp,{user:n,isAdminUser:l,requiresAdmin:!0,children:u.jsxs(u.Fragment,{children:[u.jsx(Sy,{}),u.jsx(kM,{})]})}),children:[u.jsx(Ke,{index:!0,element:u.jsx(Hb,{})}),u.jsx(Ke,{path:"events",element:u.jsx(LM,{})}),u.jsx(Ke,{path:"managemembers",element:u.jsx(WM,{})}),u.jsx(Ke,{path:"reports",element:u.jsx(cV,{})}),u.jsx(Ke,{path:"inquiries",element:u.jsx(ZM,{})}),u.jsx(Ke,{path:"participation",element:u.jsx(Kb,{})})]}),u.jsx(Ke,{path:"/admin/participation",element:u.jsx(Kb,{})}),u.jsx(Ke,{path:"/performer-dashboard",element:u.jsx(xp,{user:n,children:u.jsx(Gb,{})})}),u.jsx(Ke,{path:"*",element:u.jsx(Dp,{to:"/",replace:!0})})]})}),!g&&u.jsx(DM,{}),u.jsx(jM,{user:n,isAdmin:l,claims:t})]})},_V=()=>u.jsx(d1,{children:u.jsx(vV,{})});WR.createRoot(document.getElementById("root")).render(u.jsx(ee.StrictMode,{children:u.jsx(_V,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Kb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jm={exports:{}},oc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function zR(){if(kE)return oc;kE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:n,type:r,key:d,ref:o!==void 0?o:null,props:l}}return oc.Fragment=e,oc.jsx=t,oc.jsxs=t,oc}var ME;function qR(){return ME||(ME=1,Jm.exports=zR()),Jm.exports}var u=qR(),ep={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function FR(){if(VE)return Pe;VE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function w(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,z={};function j(P,Z,he){this.props=P,this.context=Z,this.refs=z,this.updater=he||I}j.prototype.isReactComponent={},j.prototype.setState=function(P,Z){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,Z,"setState")},j.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function U(){}U.prototype=j.prototype;function G(P,Z,he){this.props=P,this.context=Z,this.refs=z,this.updater=he||I}var Q=G.prototype=new U;Q.constructor=G,M(Q,j.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function D(P,Z,he,ce,ue,pe){return he=pe.ref,{$$typeof:n,type:P,key:Z,ref:he!==void 0?he:null,props:pe}}function R(P,Z){return D(P.type,Z,void 0,void 0,void 0,P.props)}function x(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function C(P){var Z={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(he){return Z[he]})}var O=/\/+/g;function V(P,Z){return typeof P=="object"&&P!==null&&P.key!=null?C(""+P.key):Z.toString(36)}function N(){}function Oe(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(N,N):(P.status="pending",P.then(function(Z){P.status==="pending"&&(P.status="fulfilled",P.value=Z)},function(Z){P.status==="pending"&&(P.status="rejected",P.reason=Z)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function De(P,Z,he,ce,ue){var pe=typeof P;(pe==="undefined"||pe==="boolean")&&(P=null);var de=!1;if(P===null)de=!0;else switch(pe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(P.$$typeof){case n:case e:de=!0;break;case _:return de=P._init,De(de(P._payload),Z,he,ce,ue)}}if(de)return ue=ue(P),de=ce===""?"."+V(P,0):ce,ie(ue)?(he="",de!=null&&(he=de.replace(O,"$&/")+"/"),De(ue,Z,he,"",function(gt){return gt})):ue!=null&&(x(ue)&&(ue=R(ue,he+(ue.key==null||P&&P.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+de)),Z.push(ue)),1;de=0;var Ye=ce===""?".":ce+":";if(ie(P))for(var qe=0;qe<P.length;qe++)ce=P[qe],pe=Ye+V(ce,qe),de+=De(ce,Z,he,pe,ue);else if(qe=w(P),typeof qe=="function")for(P=qe.call(P),qe=0;!(ce=P.next()).done;)ce=ce.value,pe=Ye+V(ce,qe++),de+=De(ce,Z,he,pe,ue);else if(pe==="object"){if(typeof P.then=="function")return De(Oe(P),Z,he,ce,ue);throw Z=String(P),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return de}function X(P,Z,he){if(P==null)return P;var ce=[],ue=0;return De(P,ce,"","",function(pe){return Z.call(he,pe,ue++)}),ce}function me(P){if(P._status===-1){var Z=P._result;Z=Z(),Z.then(function(he){(P._status===0||P._status===-1)&&(P._status=1,P._result=he)},function(he){(P._status===0||P._status===-1)&&(P._status=2,P._result=he)}),P._status===-1&&(P._status=0,P._result=Z)}if(P._status===1)return P._result.default;throw P._result}var Ee=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function re(){}return Pe.Children={map:X,forEach:function(P,Z,he){X(P,function(){Z.apply(this,arguments)},he)},count:function(P){var Z=0;return X(P,function(){Z++}),Z},toArray:function(P){return X(P,function(Z){return Z})||[]},only:function(P){if(!x(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Pe.Component=j,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=G,Pe.StrictMode=r,Pe.Suspense=y,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return ee.H.useMemoCache(P)}},Pe.cache=function(P){return function(){return P.apply(null,arguments)}},Pe.cloneElement=function(P,Z,he){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=M({},P.props),ue=P.key,pe=void 0;if(Z!=null)for(de in Z.ref!==void 0&&(pe=void 0),Z.key!==void 0&&(ue=""+Z.key),Z)!te.call(Z,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Z.ref===void 0||(ce[de]=Z[de]);var de=arguments.length-2;if(de===1)ce.children=he;else if(1<de){for(var Ye=Array(de),qe=0;qe<de;qe++)Ye[qe]=arguments[qe+2];ce.children=Ye}return D(P.type,ue,void 0,void 0,pe,ce)},Pe.createContext=function(P){return P={$$typeof:d,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:l,_context:P},P},Pe.createElement=function(P,Z,he){var ce,ue={},pe=null;if(Z!=null)for(ce in Z.key!==void 0&&(pe=""+Z.key),Z)te.call(Z,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ue[ce]=Z[ce]);var de=arguments.length-2;if(de===1)ue.children=he;else if(1<de){for(var Ye=Array(de),qe=0;qe<de;qe++)Ye[qe]=arguments[qe+2];ue.children=Ye}if(P&&P.defaultProps)for(ce in de=P.defaultProps,de)ue[ce]===void 0&&(ue[ce]=de[ce]);return D(P,pe,void 0,void 0,null,ue)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(P){return{$$typeof:m,render:P}},Pe.isValidElement=x,Pe.lazy=function(P){return{$$typeof:_,_payload:{_status:-1,_result:P},_init:me}},Pe.memo=function(P,Z){return{$$typeof:p,type:P,compare:Z===void 0?null:Z}},Pe.startTransition=function(P){var Z=ee.T,he={};ee.T=he;try{var ce=P(),ue=ee.S;ue!==null&&ue(he,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(re,Ee)}catch(pe){Ee(pe)}finally{ee.T=Z}},Pe.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Pe.use=function(P){return ee.H.use(P)},Pe.useActionState=function(P,Z,he){return ee.H.useActionState(P,Z,he)},Pe.useCallback=function(P,Z){return ee.H.useCallback(P,Z)},Pe.useContext=function(P){return ee.H.useContext(P)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(P,Z){return ee.H.useDeferredValue(P,Z)},Pe.useEffect=function(P,Z,he){var ce=ee.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(P,Z)},Pe.useId=function(){return ee.H.useId()},Pe.useImperativeHandle=function(P,Z,he){return ee.H.useImperativeHandle(P,Z,he)},Pe.useInsertionEffect=function(P,Z){return ee.H.useInsertionEffect(P,Z)},Pe.useLayoutEffect=function(P,Z){return ee.H.useLayoutEffect(P,Z)},Pe.useMemo=function(P,Z){return ee.H.useMemo(P,Z)},Pe.useOptimistic=function(P,Z){return ee.H.useOptimistic(P,Z)},Pe.useReducer=function(P,Z,he){return ee.H.useReducer(P,Z,he)},Pe.useRef=function(P){return ee.H.useRef(P)},Pe.useState=function(P){return ee.H.useState(P)},Pe.useSyncExternalStore=function(P,Z,he){return ee.H.useSyncExternalStore(P,Z,he)},Pe.useTransition=function(){return ee.H.useTransition()},Pe.version="19.1.1",Pe}var LE;function cg(){return LE||(LE=1,ep.exports=FR()),ep.exports}var q=cg();const oe=Kb(q);var tp={exports:{}},lc={},np={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function HR(){return UE||(UE=1,(function(n){function e(X,me){var Ee=X.length;X.push(me);e:for(;0<Ee;){var re=Ee-1>>>1,P=X[re];if(0<o(P,me))X[re]=me,X[Ee]=P,Ee=re;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var me=X[0],Ee=X.pop();if(Ee!==me){X[0]=Ee;e:for(var re=0,P=X.length,Z=P>>>1;re<Z;){var he=2*(re+1)-1,ce=X[he],ue=he+1,pe=X[ue];if(0>o(ce,Ee))ue<P&&0>o(pe,ce)?(X[re]=pe,X[ue]=Ee,re=ue):(X[re]=ce,X[he]=Ee,re=he);else if(ue<P&&0>o(pe,Ee))X[re]=pe,X[ue]=Ee,re=ue;else break e}}return me}function o(X,me){var Ee=X.sortIndex-me.sortIndex;return Ee!==0?Ee:X.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var y=[],p=[],_=1,b=null,w=3,I=!1,M=!1,z=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ie(X){for(var me=t(p);me!==null;){if(me.callback===null)r(p);else if(me.startTime<=X)r(p),me.sortIndex=me.expirationTime,e(y,me);else break;me=t(p)}}function ee(X){if(z=!1,ie(X),!M)if(t(y)!==null)M=!0,te||(te=!0,V());else{var me=t(p);me!==null&&De(ee,me.startTime-X)}}var te=!1,D=-1,R=5,x=-1;function C(){return j?!0:!(n.unstable_now()-x<R)}function O(){if(j=!1,te){var X=n.unstable_now();x=X;var me=!0;try{e:{M=!1,z&&(z=!1,G(D),D=-1),I=!0;var Ee=w;try{t:{for(ie(X),b=t(y);b!==null&&!(b.expirationTime>X&&C());){var re=b.callback;if(typeof re=="function"){b.callback=null,w=b.priorityLevel;var P=re(b.expirationTime<=X);if(X=n.unstable_now(),typeof P=="function"){b.callback=P,ie(X),me=!0;break t}b===t(y)&&r(y),ie(X)}else r(y);b=t(y)}if(b!==null)me=!0;else{var Z=t(p);Z!==null&&De(ee,Z.startTime-X),me=!1}}break e}finally{b=null,w=Ee,I=!1}me=void 0}}finally{me?V():te=!1}}}var V;if(typeof Q=="function")V=function(){Q(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Oe=N.port2;N.port1.onmessage=O,V=function(){Oe.postMessage(null)}}else V=function(){U(O,0)};function De(X,me){D=U(function(){X(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(X){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var Ee=w;w=me;try{return X()}finally{w=Ee}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(X,me){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Ee=w;w=X;try{return me()}finally{w=Ee}},n.unstable_scheduleCallback=function(X,me,Ee){var re=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?re+Ee:re):Ee=re,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=Ee+P,X={id:_++,callback:me,priorityLevel:X,startTime:Ee,expirationTime:P,sortIndex:-1},Ee>re?(X.sortIndex=Ee,e(p,X),t(y)===null&&X===t(p)&&(z?(G(D),D=-1):z=!0,De(ee,Ee-re))):(X.sortIndex=P,e(y,X),M||I||(M=!0,te||(te=!0,V()))),X},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(X){var me=w;return function(){var Ee=w;w=me;try{return X.apply(this,arguments)}finally{w=Ee}}}})(ip)),ip}var BE;function GR(){return BE||(BE=1,np.exports=HR()),np.exports}var sp={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function $R(){if(zE)return gn;zE=1;var n=cg();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(y,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:p,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,gn.createPortal=function(y,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,_)},gn.flushSync=function(y){var p=d.T,_=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=p,r.p=_,r.d.f()}},gn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},gn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},gn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:I}):_==="script"&&r.d.X(y,{crossOrigin:b,integrity:w,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=m(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},gn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin);r.d.L(y,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gn.preloadModule=function(y,p){if(typeof y=="string")if(p){var _=m(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},gn.requestFormReset=function(y){r.d.r(y)},gn.unstable_batchedUpdates=function(y,p){return y(p)},gn.useFormState=function(y,p,_){return d.H.useFormState(y,p,_)},gn.useFormStatus=function(){return d.H.useHostTransitionStatus()},gn.version="19.1.1",gn}var qE;function Qb(){if(qE)return sp.exports;qE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=$R(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function YR(){if(FE)return lc;FE=1;var n=GR(),e=cg(),t=Qb();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function d(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(r(188))}function y(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return m(f),i;if(g===c)return m(f),s;g=g.sibling}throw Error(r(188))}if(a.return!==c.return)a=f,c=g;else{for(var T=!1,S=f.child;S;){if(S===a){T=!0,a=f,c=g;break}if(S===c){T=!0,c=f,a=g;break}S=S.sibling}if(!T){for(S=g.child;S;){if(S===a){T=!0,a=g,c=f;break}if(S===c){T=!0,c=g,a=f;break}S=S.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case ee:return"Suspense";case te:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case Q:return(i.displayName||"Context")+".Provider";case G:return(i._context.displayName||"Context")+".Consumer";case ie:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Oe(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return Oe(i(s))}catch{}}return null}var De=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},re=[],P=-1;function Z(i){return{current:i}}function he(i){0>P||(i.current=re[P],re[P]=null,P--)}function ce(i,s){P++,re[P]=i.current,i.current=s}var ue=Z(null),pe=Z(null),de=Z(null),Ye=Z(null);function qe(i,s){switch(ce(de,s),ce(pe,i),ce(ue,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?cE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=cE(s),i=uE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}he(ue),ce(ue,i)}function gt(){he(ue),he(pe),he(de)}function pt(i){i.memoizedState!==null&&ce(Ye,i);var s=ue.current,a=uE(s,i.type);s!==a&&(ce(pe,i),ce(ue,a))}function Xt(i){pe.current===i&&(he(ue),he(pe)),Ye.current===i&&(he(Ye),nc._currentValue=Ee)}var bi=Object.prototype.hasOwnProperty,Wi=n.unstable_scheduleCallback,Zi=n.unstable_cancelCallback,Us=n.unstable_shouldYield,Bs=n.unstable_requestPaint,rn=n.unstable_now,Ma=n.unstable_getCurrentPriorityLevel,st=n.unstable_ImmediatePriority,Ne=n.unstable_UserBlockingPriority,wi=n.unstable_NormalPriority,Lr=n.unstable_LowPriority,zs=n.unstable_IdlePriority,tl=n.log,cu=n.unstable_setDisableYieldValue,wt=null,et=null;function Ln(i){if(typeof tl=="function"&&cu(i),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(wt,i)}catch{}}var mn=Math.clz32?Math.clz32:Ur,uu=Math.log,ef=Math.LN2;function Ur(i){return i>>>=0,i===0?32:31-(uu(i)/ef|0)|0}var Br=256,zr=4194304;function ui(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Va(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=c&134217727;return S!==0?(c=S&~g,c!==0?f=ui(c):(T&=S,T!==0?f=ui(T):a||(a=S&~i,a!==0&&(f=ui(a))))):(S=c&~g,S!==0?f=ui(S):T!==0?f=ui(T):a||(a=c&~i,a!==0&&(f=ui(a)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:f}function qr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function nl(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function il(){var i=Br;return Br<<=1,(Br&4194048)===0&&(Br=256),i}function sl(){var i=zr;return zr<<=1,(zr&62914560)===0&&(zr=4194304),i}function Ji(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function es(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function rl(i,s,a,c,f,g){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var S=i.entanglements,k=i.expirationTimes,$=i.hiddenUpdates;for(a=T&~a;0<a;){var J=31-mn(a),ae=1<<J;S[J]=0,k[J]=-1;var Y=$[J];if(Y!==null)for($[J]=null,J=0;J<Y.length;J++){var K=Y[J];K!==null&&(K.lane&=-536870913)}a&=~ae}c!==0&&Si(i,c,0),g!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Si(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-mn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&4194090}function al(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-mn(a),f=1<<c;f&s|i[c]&s&&(i[c]|=s),a&=~f}}function qs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function La(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Fs(){var i=me.p;return i!==0?i:(i=window.event,i===void 0?32:NE(i.type))}function hu(i,s){var a=me.p;try{return me.p=i,s()}finally{me.p=a}}var yt=Math.random().toString(36).slice(2),qt="__reactFiber$"+yt,Ot="__reactProps$"+yt,Qn="__reactContainer$"+yt,ol="__reactEvents$"+yt,tf="__reactListeners$"+yt,Hs="__reactHandles$"+yt,du="__reactResources$"+yt,Fr="__reactMarker$"+yt;function Gs(i){delete i[qt],delete i[Ot],delete i[ol],delete i[tf],delete i[Hs]}function ts(i){var s=i[qt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Qn]||a[qt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=mE(i);i!==null;){if(a=i[qt])return a;i=mE(i)}return s}i=a,a=i.parentNode}return null}function Ai(i){if(i=i[qt]||i[Qn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function Ri(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function bn(i){var s=i[du];return s||(s=i[du]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(i){i[Fr]=!0}var ll=new Set,Ua={};function hi(i,s){ns(i,s),ns(i+"Capture",s)}function ns(i,s){for(Ua[i]=s,i=0;i<s.length;i++)ll.add(s[i])}var fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),mu={},Hr={};function pu(i){return bi.call(Hr,i)?!0:bi.call(mu,i)?!1:fu.test(i)?Hr[i]=!0:(mu[i]=!0,!1)}function $s(i,s,a){if(pu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function xi(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function an(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}var Gr,gu;function is(i){if(Gr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Gr=s&&s[1]||"",gu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gr+i+gu}var Ba=!1;function za(i,s){if(!i||Ba)return"";Ba=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(K){var Y=K}Reflect.construct(i,[],ae)}else{try{ae.call()}catch(K){Y=K}i.call(ae.prototype)}}else{try{throw Error()}catch(K){Y=K}(ae=i())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],S=g[1];if(T&&S){var k=T.split(`
`),$=S.split(`
`);for(f=c=0;c<k.length&&!k[c].includes("DetermineComponentFrameRoot");)c++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(c===k.length||f===$.length)for(c=k.length-1,f=$.length-1;1<=c&&0<=f&&k[c]!==$[f];)f--;for(;1<=c&&0<=f;c--,f--)if(k[c]!==$[f]){if(c!==1||f!==1)do if(c--,f--,0>f||k[c]!==$[f]){var J=`
`+k[c].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=c&&0<=f);break}}}finally{Ba=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?is(a):""}function cl(i){switch(i.tag){case 26:case 27:case 5:return is(i.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return za(i.type,!1);case 11:return za(i.type.render,!1);case 1:return za(i.type,!0);case 31:return is("Activity");default:return""}}function qa(i){try{var s="";do s+=cl(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function wn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ul(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nf(i){var s=ul(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function Fa(i){i._valueTracker||(i._valueTracker=nf(i))}function hl(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=ul(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function $r(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sf=/[\n"\\]/g;function Pt(i){return i.replace(sf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Un(i,s,a,c,f,g,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+wn(s)):i.value!==""+wn(s)&&(i.value=""+wn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?Ys(i,T,wn(s)):a!=null?Ys(i,T,wn(a)):c!=null&&i.removeAttribute("value"),f==null&&g!=null&&(i.defaultChecked=!!g),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+wn(S):i.removeAttribute("name")}function Yr(i,s,a,c,f,g,T,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+wn(a):"",s=s!=null?""+wn(s):a,S||s===i.value||(i.value=s),i.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Ys(i,s,a){s==="number"&&$r(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ss(i,s,a,c){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&c&&(i[a].defaultSelected=!0)}else{for(a=""+wn(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function rt(i,s,a){if(s!=null&&(s=""+wn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+wn(a):""}function Kr(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(r(92));if(De(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=wn(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c)}function Xn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Qr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yu(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||Qr.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function dl(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&a[f]!==c&&yu(i,f,c)}else for(var g in s)s.hasOwnProperty(g)&&yu(i,g,s[g])}function fl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(i){return af.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var rs=null;function Wn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var as=null,os=null;function ml(i){var s=Ai(i);if(s&&(i=s.stateNode)){var a=i[Ot]||null;e:switch(i=s.stateNode,s.type){case"input":if(Un(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var f=c[Ot]||null;if(!f)throw Error(r(90));Un(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&hl(c)}break e;case"textarea":rt(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ss(i,!!a.multiple,s,!1)}}}var Ci=!1;function vu(i,s,a){if(Ci)return i(s,a);Ci=!0;try{var c=i(s);return c}finally{if(Ci=!1,(as!==null||os!==null)&&(hh(),as&&(s=as,i=os,os=as=null,ml(s),i)))for(s=0;s<i.length;s++)ml(i[s])}}function Xr(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Ot]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(di)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Zn=!1}var Ni=null,Ks=null,ls=null;function pl(){if(ls)return ls;var i,s=Ks,a=s.length,c,f="value"in Ni?Ni.value:Ni.textContent,g=f.length;for(i=0;i<a&&s[i]===f[i];i++);var T=a-i;for(c=1;c<=T&&s[a-c]===f[g-c];c++);return ls=f.slice(i,1<c?1-c:void 0)}function Ii(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Di(){return!0}function gl(){return!1}function Wt(i){function s(a,c,f,g,T){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Di:gl,this.isPropagationStopped=gl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Di)},persist:function(){},isPersistent:Di}),s}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ga=Wt(Ze),Zr=_({},Ze,{view:0,detail:0}),_u=Wt(Zr),$a,Ya,ji,Jr=_({},Zr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:na,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==ji&&(ji&&i.type==="mousemove"?($a=i.screenX-ji.screenX,Ya=i.screenY-ji.screenY):Ya=$a=0,ji=i),$a)},movementY:function(i){return"movementY"in i?i.movementY:Ya}}),Jn=Wt(Jr),Eu=_({},Jr,{dataTransfer:0}),of=Wt(Eu),ea=_({},Zr,{relatedTarget:0}),Ka=Wt(ea),yl=_({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),Qa=Wt(yl),Tu=_({},Ze,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Xa=Wt(Tu),lf=_({},Ze,{data:0}),vl=Wt(lf),ta={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function _l(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=wu[i])?!!s[i]:!1}function na(){return _l}var Su=_({},Zr,{key:function(i){if(i.key){var s=ta[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ii(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?bu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:na,charCode:function(i){return i.type==="keypress"?Ii(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ii(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Wa=Wt(Su),Au=_({},Jr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),El=Wt(Au),cs=_({},Zr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:na}),Ru=Wt(cs),xu=_({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=Wt(xu),Nu=_({},Jr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Za=Wt(Nu),Sn=_({},Ze,{newState:0,oldState:0}),Iu=Wt(Sn),Du=[9,13,27,32],Oi=di&&"CompositionEvent"in window,h=null;di&&"documentMode"in document&&(h=document.documentMode);var v=di&&"TextEvent"in window&&!h,E=di&&(!Oi||h&&8<h&&11>=h),A=" ",F=!1;function W(i,s){switch(i){case"keyup":return Du.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function Ft(i,s){switch(i){case"compositionend":return fe(s);case"keypress":return s.which!==32?null:(F=!0,A);case"textInput":return i=s.data,i===A&&F?null:i;default:return null}}function He(i,s){if(Fe)return i==="compositionend"||!Oi&&W(i,s)?(i=pl(),ls=Ks=Ni=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Zt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ht(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Zt[i.type]:s==="textarea"}function us(i,s,a,c){as?os?os.push(c):os=[c]:as=c,s=yh(s,"onChange"),0<s.length&&(a=new Ga("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var on=null,Pi=null;function Tl(i){sE(i,0)}function ju(i){var s=Ri(i);if(hl(s))return i}function Ay(i,s){if(i==="change")return s}var Ry=!1;if(di){var cf;if(di){var uf="oninput"in document;if(!uf){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),uf=typeof xy.oninput=="function"}cf=uf}else cf=!1;Ry=cf&&(!document.documentMode||9<document.documentMode)}function Cy(){on&&(on.detachEvent("onpropertychange",Ny),Pi=on=null)}function Ny(i){if(i.propertyName==="value"&&ju(Pi)){var s=[];us(s,Pi,i,Wn(i)),vu(Tl,s)}}function yA(i,s,a){i==="focusin"?(Cy(),on=s,Pi=a,on.attachEvent("onpropertychange",Ny)):i==="focusout"&&Cy()}function vA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return ju(Pi)}function _A(i,s){if(i==="click")return ju(s)}function EA(i,s){if(i==="input"||i==="change")return ju(s)}function TA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Bn=typeof Object.is=="function"?Object.is:TA;function bl(i,s){if(Bn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!bi.call(s,f)||!Bn(i[f],s[f]))return!1}return!0}function Iy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Dy(i,s){var a=Iy(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Iy(a)}}function jy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?jy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Oy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=$r(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=$r(i.document)}return s}function hf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var bA=di&&"documentMode"in document&&11>=document.documentMode,Ja=null,df=null,wl=null,ff=!1;function Py(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||Ja==null||Ja!==$r(c)||(c=Ja,"selectionStart"in c&&hf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),wl&&bl(wl,c)||(wl=c,c=yh(df,"onSelect"),0<c.length&&(s=new Ga("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Ja)))}function ia(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var eo={animationend:ia("Animation","AnimationEnd"),animationiteration:ia("Animation","AnimationIteration"),animationstart:ia("Animation","AnimationStart"),transitionrun:ia("Transition","TransitionRun"),transitionstart:ia("Transition","TransitionStart"),transitioncancel:ia("Transition","TransitionCancel"),transitionend:ia("Transition","TransitionEnd")},mf={},ky={};di&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function sa(i){if(mf[i])return mf[i];if(!eo[i])return i;var s=eo[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in ky)return mf[i]=s[a];return i}var My=sa("animationend"),Vy=sa("animationiteration"),Ly=sa("animationstart"),wA=sa("transitionrun"),SA=sa("transitionstart"),AA=sa("transitioncancel"),Uy=sa("transitionend"),By=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function fi(i,s){By.set(i,s),hi(s,[i])}var zy=new WeakMap;function ei(i,s){if(typeof i=="object"&&i!==null){var a=zy.get(i);return a!==void 0?a:(s={value:i,source:s,stack:qa(s)},zy.set(i,s),s)}return{value:i,source:s,stack:qa(s)}}var ti=[],to=0,gf=0;function Ou(){for(var i=to,s=gf=to=0;s<i;){var a=ti[s];ti[s++]=null;var c=ti[s];ti[s++]=null;var f=ti[s];ti[s++]=null;var g=ti[s];if(ti[s++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}g!==0&&qy(a,f,g)}}function Pu(i,s,a,c){ti[to++]=i,ti[to++]=s,ti[to++]=a,ti[to++]=c,gf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function yf(i,s,a,c){return Pu(i,s,a,c),ku(i)}function no(i,s){return Pu(i,null,null,s),ku(i)}function qy(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var f=!1,g=i.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(f=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,f&&s!==null&&(f=31-mn(a),i=g.hiddenUpdates,c=i[f],c===null?i[f]=[s]:c.push(s),s.lane=a|536870912),g):null}function ku(i){if(50<Kl)throw Kl=0,wm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var io={};function RA(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(i,s,a,c){return new RA(i,s,a,c)}function vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hs(i,s){var a=i.alternate;return a===null?(a=zn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Fy(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function Mu(i,s,a,c,f,g){var T=0;if(c=i,typeof i=="function")vf(i)&&(T=1);else if(typeof i=="string")T=CR(i,a,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=zn(31,a,s,f),i.elementType=x,i.lanes=g,i;case M:return ra(a.children,f,g,s);case z:T=8,f|=24;break;case j:return i=zn(12,a,s,f|2),i.elementType=j,i.lanes=g,i;case ee:return i=zn(13,a,s,f),i.elementType=ee,i.lanes=g,i;case te:return i=zn(19,a,s,f),i.elementType=te,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:case Q:T=10;break e;case G:T=9;break e;case ie:T=11;break e;case D:T=14;break e;case R:T=16,c=null;break e}T=29,a=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=zn(T,a,s,f),s.elementType=i,s.type=c,s.lanes=g,s}function ra(i,s,a,c){return i=zn(7,i,c,s),i.lanes=a,i}function _f(i,s,a){return i=zn(6,i,null,s),i.lanes=a,i}function Ef(i,s,a){return s=zn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var so=[],ro=0,Vu=null,Lu=0,ni=[],ii=0,aa=null,ds=1,fs="";function oa(i,s){so[ro++]=Lu,so[ro++]=Vu,Vu=i,Lu=s}function Hy(i,s,a){ni[ii++]=ds,ni[ii++]=fs,ni[ii++]=aa,aa=i;var c=ds;i=fs;var f=32-mn(c)-1;c&=~(1<<f),a+=1;var g=32-mn(s)+f;if(30<g){var T=f-f%5;g=(c&(1<<T)-1).toString(32),c>>=T,f-=T,ds=1<<32-mn(s)+f|a<<f|c,fs=g+i}else ds=1<<g|a<<f|c,fs=i}function Tf(i){i.return!==null&&(oa(i,1),Hy(i,1,0))}function bf(i){for(;i===Vu;)Vu=so[--ro],so[ro]=null,Lu=so[--ro],so[ro]=null;for(;i===aa;)aa=ni[--ii],ni[ii]=null,fs=ni[--ii],ni[ii]=null,ds=ni[--ii],ni[ii]=null}var An=null,St=null,Xe=!1,la=null,ki=!1,wf=Error(r(519));function ca(i){var s=Error(r(418,""));throw Rl(ei(s,i)),wf}function Gy(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[qt]=i,s[Ot]=c,a){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(a=0;a<Xl.length;a++)Le(Xl[a],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),Yr(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),Fa(s);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Kr(s,c.value,c.defaultValue,c.children),Fa(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||lE(s.textContent,a)?(c.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),c.onScroll!=null&&Le("scroll",s),c.onScrollEnd!=null&&Le("scrollend",s),c.onClick!=null&&(s.onclick=vh),s=!0):s=!1,s||ca(i)}function $y(i){for(An=i.return;An;)switch(An.tag){case 5:case 13:ki=!1;return;case 27:case 3:ki=!0;return;default:An=An.return}}function Sl(i){if(i!==An)return!1;if(!Xe)return $y(i),Xe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Um(i.type,i.memoizedProps)),a=!a),a&&St&&ca(i),$y(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){St=pi(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}St=null}}else s===27?(s=St,ur(i.type)?(i=Fm,Fm=null,St=i):St=s):St=An?pi(i.stateNode.nextSibling):null;return!0}function Al(){St=An=null,Xe=!1}function Yy(){var i=la;return i!==null&&(Nn===null?Nn=i:Nn.push.apply(Nn,i),la=null),i}function Rl(i){la===null?la=[i]:la.push(i)}var Sf=Z(null),ua=null,ms=null;function Qs(i,s,a){ce(Sf,s._currentValue),s._currentValue=a}function ps(i){i._currentValue=Sf.current,he(Sf)}function Af(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Rf(i,s,a,c){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=f;for(var k=0;k<s.length;k++)if(S.context===s[k]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),Af(g.return,a,i),c||(T=null);break e}g=S.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),Af(T,a,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function xl(i,s,a,c){i=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var S=f.type;Bn(f.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(f===Ye.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(nc):i=[nc])}f=f.return}i!==null&&Rf(s,i,a,c),s.flags|=262144}function Uu(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ha(i){ua=i,ms=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function pn(i){return Ky(ua,i)}function Bu(i,s){return ua===null&&ha(i),Ky(i,s)}function Ky(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ms===null){if(i===null)throw Error(r(308));ms=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ms=ms.next=s;return a}var xA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},CA=n.unstable_scheduleCallback,NA=n.unstable_NormalPriority,Gt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new xA,data:new Map,refCount:0}}function Cl(i){i.refCount--,i.refCount===0&&CA(NA,function(){i.controller.abort()})}var Nl=null,Cf=0,ao=0,oo=null;function IA(i,s){if(Nl===null){var a=Nl=[];Cf=0,ao=Im(),oo={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Cf++,s.then(Qy,Qy),s}function Qy(){if(--Cf===0&&Nl!==null){oo!==null&&(oo.status="fulfilled");var i=Nl;Nl=null,ao=0,oo=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function DA(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Xy=X.S;X.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&IA(i,s),Xy!==null&&Xy(i,s)};var da=Z(null);function Nf(){var i=da.current;return i!==null?i:dt.pooledCache}function zu(i,s){s===null?ce(da,da.current):ce(da,s.pool)}function Wy(){var i=Nf();return i===null?null:{parent:Gt._currentValue,pool:i}}var Il=Error(r(460)),Zy=Error(r(474)),qu=Error(r(542)),If={then:function(){}};function Jy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fu(){}function ev(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Fu,Fu),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i;default:if(typeof s.status=="string")s.then(Fu,Fu);else{if(i=dt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i}throw Dl=s,Il}}var Dl=null;function tv(){if(Dl===null)throw Error(r(459));var i=Dl;return Dl=null,i}function nv(i){if(i===Il||i===qu)throw Error(r(483))}var Xs=!1;function Df(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Ws(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Zs(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(tt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=ku(i),qy(i,null,a),s}return Pu(i,c,s,a),ku(i)}function jl(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,al(i,a)}}function Of(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Pf=!1;function Ol(){if(Pf){var i=oo;if(i!==null)throw i}}function Pl(i,s,a,c){Pf=!1;var f=i.updateQueue;Xs=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var k=S,$=k.next;k.next=null,T===null?g=$:T.next=$,T=k;var J=i.alternate;J!==null&&(J=J.updateQueue,S=J.lastBaseUpdate,S!==T&&(S===null?J.firstBaseUpdate=$:S.next=$,J.lastBaseUpdate=k))}if(g!==null){var ae=f.baseState;T=0,J=$=k=null,S=g;do{var Y=S.lane&-536870913,K=Y!==S.lane;if(K?(Ge&Y)===Y:(c&Y)===Y){Y!==0&&Y===ao&&(Pf=!0),J!==null&&(J=J.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ce=i,Se=S;Y=s;var lt=a;switch(Se.tag){case 1:if(Ce=Se.payload,typeof Ce=="function"){ae=Ce.call(lt,ae,Y);break e}ae=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=Se.payload,Y=typeof Ce=="function"?Ce.call(lt,ae,Y):Ce,Y==null)break e;ae=_({},ae,Y);break e;case 2:Xs=!0}}Y=S.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},J===null?($=J=K,k=ae):J=J.next=K,T|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(k=ae),f.baseState=k,f.firstBaseUpdate=$,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),ar|=T,i.lanes=T,i.memoizedState=ae}}function iv(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function sv(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)iv(a[i],s)}var lo=Z(null),Hu=Z(0);function rv(i,s){i=bs,ce(Hu,i),ce(lo,s),bs=i|s.baseLanes}function kf(){ce(Hu,bs),ce(lo,lo.current)}function Mf(){bs=Hu.current,he(lo),he(Hu)}var Js=0,ke=null,at=null,kt=null,Gu=!1,co=!1,fa=!1,$u=0,kl=0,uo=null,jA=0;function It(){throw Error(r(321))}function Vf(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Bn(i[a],s[a]))return!1;return!0}function Lf(i,s,a,c,f,g){return Js=g,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=i===null||i.memoizedState===null?qv:Fv,fa=!1,g=a(c,f),fa=!1,co&&(g=ov(s,a,c,f)),av(i),g}function av(i){X.H=Zu;var s=at!==null&&at.next!==null;if(Js=0,kt=at=ke=null,Gu=!1,kl=0,uo=null,s)throw Error(r(300));i===null||Jt||(i=i.dependencies,i!==null&&Uu(i)&&(Jt=!0))}function ov(i,s,a,c){ke=i;var f=0;do{if(co&&(uo=null),kl=0,co=!1,25<=f)throw Error(r(301));if(f+=1,kt=at=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=UA,g=s(a,c)}while(co);return g}function OA(){var i=X.H,s=i.useState()[0];return s=typeof s.then=="function"?Ml(s):s,i=i.useState()[0],(at!==null?at.memoizedState:null)!==i&&(ke.flags|=1024),s}function Uf(){var i=$u!==0;return $u=0,i}function Bf(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function zf(i){if(Gu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Gu=!1}Js=0,kt=at=ke=null,co=!1,kl=$u=0,uo=null}function xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ke.memoizedState=kt=i:kt=kt.next=i,kt}function Mt(){if(at===null){var i=ke.alternate;i=i!==null?i.memoizedState:null}else i=at.next;var s=kt===null?ke.memoizedState:kt.next;if(s!==null)kt=s,at=i;else{if(i===null)throw ke.alternate===null?Error(r(467)):Error(r(310));at=i,i={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},kt===null?ke.memoizedState=kt=i:kt=kt.next=i}return kt}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ml(i){var s=kl;return kl+=1,uo===null&&(uo=[]),i=ev(uo,i,s),s=ke,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?qv:Fv),i}function Yu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ml(i);if(i.$$typeof===Q)return pn(i)}throw Error(r(438,String(i)))}function Ff(i){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=qf(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=C;return s.index++,a}function gs(i,s){return typeof s=="function"?s(i):s}function Ku(i){var s=Mt();return Hf(s,at,i)}function Hf(i,s,a){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=i.baseQueue,g=c.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}s.baseQueue=f=g,c.pending=null}if(g=i.baseState,f===null)i.memoizedState=g;else{s=f.next;var S=T=null,k=null,$=s,J=!1;do{var ae=$.lane&-536870913;if(ae!==$.lane?(Ge&ae)===ae:(Js&ae)===ae){var Y=$.revertLane;if(Y===0)k!==null&&(k=k.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),ae===ao&&(J=!0);else if((Js&Y)===Y){$=$.next,Y===ao&&(J=!0);continue}else ae={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=ae,T=g):k=k.next=ae,ke.lanes|=Y,ar|=Y;ae=$.action,fa&&a(g,ae),g=$.hasEagerState?$.eagerState:a(g,ae)}else Y={lane:ae,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},k===null?(S=k=Y,T=g):k=k.next=Y,ke.lanes|=ae,ar|=ae;$=$.next}while($!==null&&$!==s);if(k===null?T=g:k.next=S,!Bn(g,i.memoizedState)&&(Jt=!0,J&&(a=oo,a!==null)))throw a;i.memoizedState=g,i.baseState=T,i.baseQueue=k,c.lastRenderedState=g}return f===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Gf(i){var s=Mt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do g=i(g,T.action),T=T.next;while(T!==f);Bn(g,s.memoizedState)||(Jt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function lv(i,s,a){var c=ke,f=Mt(),g=Xe;if(g){if(a===void 0)throw Error(r(407));a=a()}else a=s();var T=!Bn((at||f).memoizedState,a);T&&(f.memoizedState=a,Jt=!0),f=f.queue;var S=hv.bind(null,c,f,i);if(Vl(2048,8,S,[i]),f.getSnapshot!==s||T||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,ho(9,Qu(),uv.bind(null,c,f,a,s),null),dt===null)throw Error(r(349));g||(Js&124)!==0||cv(c,s,a)}return a}function cv(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=qf(),ke.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function uv(i,s,a,c){s.value=a,s.getSnapshot=c,dv(s)&&fv(i)}function hv(i,s,a){return a(function(){dv(s)&&fv(i)})}function dv(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Bn(i,a)}catch{return!0}}function fv(i){var s=no(i,2);s!==null&&$n(s,i,2)}function $f(i){var s=xn();if(typeof i=="function"){var a=i;if(i=a(),fa){Ln(!0);try{a()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:i},s}function mv(i,s,a,c){return i.baseState=a,Hf(i,at,typeof c=="function"?c:gs)}function PA(i,s,a,c,f){if(Wu(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};X.T!==null?a(!0):g.isTransition=!1,c(g),a=s.pending,a===null?(g.next=s.pending=g,pv(s,g)):(g.next=a.next,s.pending=a.next=g)}}function pv(i,s){var a=s.action,c=s.payload,f=i.state;if(s.isTransition){var g=X.T,T={};X.T=T;try{var S=a(f,c),k=X.S;k!==null&&k(T,S),gv(i,s,S)}catch($){Yf(i,s,$)}finally{X.T=g}}else try{g=a(f,c),gv(i,s,g)}catch($){Yf(i,s,$)}}function gv(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){yv(i,s,c)},function(c){return Yf(i,s,c)}):yv(i,s,a)}function yv(i,s,a){s.status="fulfilled",s.value=a,vv(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,pv(i,a)))}function Yf(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,vv(s),s=s.next;while(s!==c)}i.action=null}function vv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function _v(i,s){return s}function Ev(i,s){if(Xe){var a=dt.formState;if(a!==null){e:{var c=ke;if(Xe){if(St){t:{for(var f=St,g=ki;f.nodeType!==8;){if(!g){f=null;break t}if(f=pi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){St=pi(f.nextSibling),c=f.data==="F!";break e}}ca(c)}c=!1}c&&(s=a[0])}}return a=xn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_v,lastRenderedState:s},a.queue=c,a=Uv.bind(null,ke,c),c.dispatch=a,c=$f(!1),g=Zf.bind(null,ke,!1,c.queue),c=xn(),f={state:s,dispatch:null,action:i,pending:null},c.queue=f,a=PA.bind(null,ke,f,g,a),f.dispatch=a,c.memoizedState=i,[s,a,!1]}function Tv(i){var s=Mt();return bv(s,at,i)}function bv(i,s,a){if(s=Hf(i,s,_v)[0],i=Ku(gs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Ml(s)}catch(T){throw T===Il?qu:T}else c=s;s=Mt();var f=s.queue,g=f.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,ho(9,Qu(),kA.bind(null,f,a),null)),[c,g,i]}function kA(i,s){i.action=s}function wv(i){var s=Mt(),a=at;if(a!==null)return bv(s,a,i);Mt(),s=s.memoizedState,a=Mt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function ho(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=ke.updateQueue,s===null&&(s=qf(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Qu(){return{destroy:void 0,resource:void 0}}function Sv(){return Mt().memoizedState}function Xu(i,s,a,c){var f=xn();c=c===void 0?null:c,ke.flags|=i,f.memoizedState=ho(1|s,Qu(),a,c)}function Vl(i,s,a,c){var f=Mt();c=c===void 0?null:c;var g=f.memoizedState.inst;at!==null&&c!==null&&Vf(c,at.memoizedState.deps)?f.memoizedState=ho(s,g,a,c):(ke.flags|=i,f.memoizedState=ho(1|s,g,a,c))}function Av(i,s){Xu(8390656,8,i,s)}function Rv(i,s){Vl(2048,8,i,s)}function xv(i,s){return Vl(4,2,i,s)}function Cv(i,s){return Vl(4,4,i,s)}function Nv(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Iv(i,s,a){a=a!=null?a.concat([i]):null,Vl(4,4,Nv.bind(null,s,i),a)}function Kf(){}function Dv(i,s){var a=Mt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Vf(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function jv(i,s){var a=Mt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Vf(s,c[1]))return c[0];if(c=i(),fa){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,s],c}function Qf(i,s,a){return a===void 0||(Js&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=k_(),ke.lanes|=i,ar|=i,a)}function Ov(i,s,a,c){return Bn(a,s)?a:lo.current!==null?(i=Qf(i,a,c),Bn(i,s)||(Jt=!0),i):(Js&42)===0?(Jt=!0,i.memoizedState=a):(i=k_(),ke.lanes|=i,ar|=i,s)}function Pv(i,s,a,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var T=X.T,S={};X.T=S,Zf(i,!1,s,a);try{var k=f(),$=X.S;if($!==null&&$(S,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var J=DA(k,c);Ll(i,s,J,Gn(i))}else Ll(i,s,c,Gn(i))}catch(ae){Ll(i,s,{then:function(){},status:"rejected",reason:ae},Gn())}finally{me.p=g,X.T=T}}function MA(){}function Xf(i,s,a,c){if(i.tag!==5)throw Error(r(476));var f=kv(i).queue;Pv(i,f,s,Ee,a===null?MA:function(){return Mv(i),a(c)})}function kv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:Ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Mv(i){var s=kv(i).next.queue;Ll(i,s,{},Gn())}function Wf(){return pn(nc)}function Vv(){return Mt().memoizedState}function Lv(){return Mt().memoizedState}function VA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Gn();i=Ws(a);var c=Zs(s,i,a);c!==null&&($n(c,s,a),jl(c,s,a)),s={cache:xf()},i.payload=s;return}s=s.return}}function LA(i,s,a){var c=Gn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Wu(i)?Bv(s,a):(a=yf(i,s,a,c),a!==null&&($n(a,i,c),zv(a,s,c)))}function Uv(i,s,a){var c=Gn();Ll(i,s,a,c)}function Ll(i,s,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wu(i))Bv(s,f);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,S=g(T,a);if(f.hasEagerState=!0,f.eagerState=S,Bn(S,T))return Pu(i,s,f,0),dt===null&&Ou(),!1}catch{}finally{}if(a=yf(i,s,f,c),a!==null)return $n(a,i,c),zv(a,s,c),!0}return!1}function Zf(i,s,a,c){if(c={lane:2,revertLane:Im(),action:c,hasEagerState:!1,eagerState:null,next:null},Wu(i)){if(s)throw Error(r(479))}else s=yf(i,a,c,2),s!==null&&$n(s,i,2)}function Wu(i){var s=i.alternate;return i===ke||s!==null&&s===ke}function Bv(i,s){co=Gu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function zv(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,al(i,a)}}var Zu={readContext:pn,use:Yu,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},qv={readContext:pn,use:Yu,useCallback:function(i,s){return xn().memoizedState=[i,s===void 0?null:s],i},useContext:pn,useEffect:Av,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Xu(4194308,4,Nv.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Xu(4194308,4,i,s)},useInsertionEffect:function(i,s){Xu(4,2,i,s)},useMemo:function(i,s){var a=xn();s=s===void 0?null:s;var c=i();if(fa){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=xn();if(a!==void 0){var f=a(s);if(fa){Ln(!0);try{a(s)}finally{Ln(!1)}}}else f=s;return c.memoizedState=c.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},c.queue=i,i=i.dispatch=LA.bind(null,ke,i),[c.memoizedState,i]},useRef:function(i){var s=xn();return i={current:i},s.memoizedState=i},useState:function(i){i=$f(i);var s=i.queue,a=Uv.bind(null,ke,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Kf,useDeferredValue:function(i,s){var a=xn();return Qf(a,i,s)},useTransition:function(){var i=$f(!1);return i=Pv.bind(null,ke,i.queue,!0,!1),xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=ke,f=xn();if(Xe){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),dt===null)throw Error(r(349));(Ge&124)!==0||cv(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Av(hv.bind(null,c,g,i),[i]),c.flags|=2048,ho(9,Qu(),uv.bind(null,c,g,a,s),null),a},useId:function(){var i=xn(),s=dt.identifierPrefix;if(Xe){var a=fs,c=ds;a=(c&~(1<<32-mn(c)-1)).toString(32)+a,s="«"+s+"R"+a,a=$u++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=jA++,s="«"+s+"r"+a.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:Wf,useFormState:Ev,useActionState:Ev,useOptimistic:function(i){var s=xn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Zf.bind(null,ke,!0,a),a.dispatch=s,[i,s]},useMemoCache:Ff,useCacheRefresh:function(){return xn().memoizedState=VA.bind(null,ke)}},Fv={readContext:pn,use:Yu,useCallback:Dv,useContext:pn,useEffect:Rv,useImperativeHandle:Iv,useInsertionEffect:xv,useLayoutEffect:Cv,useMemo:jv,useReducer:Ku,useRef:Sv,useState:function(){return Ku(gs)},useDebugValue:Kf,useDeferredValue:function(i,s){var a=Mt();return Ov(a,at.memoizedState,i,s)},useTransition:function(){var i=Ku(gs)[0],s=Mt().memoizedState;return[typeof i=="boolean"?i:Ml(i),s]},useSyncExternalStore:lv,useId:Vv,useHostTransitionStatus:Wf,useFormState:Tv,useActionState:Tv,useOptimistic:function(i,s){var a=Mt();return mv(a,at,i,s)},useMemoCache:Ff,useCacheRefresh:Lv},UA={readContext:pn,use:Yu,useCallback:Dv,useContext:pn,useEffect:Rv,useImperativeHandle:Iv,useInsertionEffect:xv,useLayoutEffect:Cv,useMemo:jv,useReducer:Gf,useRef:Sv,useState:function(){return Gf(gs)},useDebugValue:Kf,useDeferredValue:function(i,s){var a=Mt();return at===null?Qf(a,i,s):Ov(a,at.memoizedState,i,s)},useTransition:function(){var i=Gf(gs)[0],s=Mt().memoizedState;return[typeof i=="boolean"?i:Ml(i),s]},useSyncExternalStore:lv,useId:Vv,useHostTransitionStatus:Wf,useFormState:wv,useActionState:wv,useOptimistic:function(i,s){var a=Mt();return at!==null?mv(a,at,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:Lv},fo=null,Ul=0;function Ju(i){var s=Ul;return Ul+=1,fo===null&&(fo=[]),ev(fo,i,s)}function Bl(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function eh(i,s){throw s.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Hv(i){var s=i._init;return s(i._payload)}function Gv(i){function s(B,L){if(i){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function f(B,L){return B=hs(B,L),B.index=0,B.sibling=null,B}function g(B,L,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function T(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function S(B,L,H,se){return L===null||L.tag!==6?(L=_f(H,B.mode,se),L.return=B,L):(L=f(L,H),L.return=B,L)}function k(B,L,H,se){var _e=H.type;return _e===M?J(B,L,H.props.children,se,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Hv(_e)===L.type)?(L=f(L,H.props),Bl(L,H),L.return=B,L):(L=Mu(H.type,H.key,H.props,null,B.mode,se),Bl(L,H),L.return=B,L)}function $(B,L,H,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Ef(H,B.mode,se),L.return=B,L):(L=f(L,H.children||[]),L.return=B,L)}function J(B,L,H,se,_e){return L===null||L.tag!==7?(L=ra(H,B.mode,se,_e),L.return=B,L):(L=f(L,H),L.return=B,L)}function ae(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=_f(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return H=Mu(L.type,L.key,L.props,null,B.mode,H),Bl(H,L),H.return=B,H;case I:return L=Ef(L,B.mode,H),L.return=B,L;case R:var se=L._init;return L=se(L._payload),ae(B,L,H)}if(De(L)||V(L))return L=ra(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return ae(B,Ju(L),H);if(L.$$typeof===Q)return ae(B,Bu(B,L),H);eh(B,L)}return null}function Y(B,L,H,se){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:S(B,L,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===_e?k(B,L,H,se):null;case I:return H.key===_e?$(B,L,H,se):null;case R:return _e=H._init,H=_e(H._payload),Y(B,L,H,se)}if(De(H)||V(H))return _e!==null?null:J(B,L,H,se,null);if(typeof H.then=="function")return Y(B,L,Ju(H),se);if(H.$$typeof===Q)return Y(B,L,Bu(B,H),se);eh(B,H)}return null}function K(B,L,H,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(H)||null,S(L,B,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return B=B.get(se.key===null?H:se.key)||null,k(L,B,se,_e);case I:return B=B.get(se.key===null?H:se.key)||null,$(L,B,se,_e);case R:var Me=se._init;return se=Me(se._payload),K(B,L,H,se,_e)}if(De(se)||V(se))return B=B.get(H)||null,J(L,B,se,_e,null);if(typeof se.then=="function")return K(B,L,H,Ju(se),_e);if(se.$$typeof===Q)return K(B,L,H,Bu(L,se),_e);eh(L,se)}return null}function Ce(B,L,H,se){for(var _e=null,Me=null,Te=L,Re=L=0,tn=null;Te!==null&&Re<H.length;Re++){Te.index>Re?(tn=Te,Te=null):tn=Te.sibling;var Ke=Y(B,Te,H[Re],se);if(Ke===null){Te===null&&(Te=tn);break}i&&Te&&Ke.alternate===null&&s(B,Te),L=g(Ke,L,Re),Me===null?_e=Ke:Me.sibling=Ke,Me=Ke,Te=tn}if(Re===H.length)return a(B,Te),Xe&&oa(B,Re),_e;if(Te===null){for(;Re<H.length;Re++)Te=ae(B,H[Re],se),Te!==null&&(L=g(Te,L,Re),Me===null?_e=Te:Me.sibling=Te,Me=Te);return Xe&&oa(B,Re),_e}for(Te=c(Te);Re<H.length;Re++)tn=K(Te,B,Re,H[Re],se),tn!==null&&(i&&tn.alternate!==null&&Te.delete(tn.key===null?Re:tn.key),L=g(tn,L,Re),Me===null?_e=tn:Me.sibling=tn,Me=tn);return i&&Te.forEach(function(pr){return s(B,pr)}),Xe&&oa(B,Re),_e}function Se(B,L,H,se){if(H==null)throw Error(r(151));for(var _e=null,Me=null,Te=L,Re=L=0,tn=null,Ke=H.next();Te!==null&&!Ke.done;Re++,Ke=H.next()){Te.index>Re?(tn=Te,Te=null):tn=Te.sibling;var pr=Y(B,Te,Ke.value,se);if(pr===null){Te===null&&(Te=tn);break}i&&Te&&pr.alternate===null&&s(B,Te),L=g(pr,L,Re),Me===null?_e=pr:Me.sibling=pr,Me=pr,Te=tn}if(Ke.done)return a(B,Te),Xe&&oa(B,Re),_e;if(Te===null){for(;!Ke.done;Re++,Ke=H.next())Ke=ae(B,Ke.value,se),Ke!==null&&(L=g(Ke,L,Re),Me===null?_e=Ke:Me.sibling=Ke,Me=Ke);return Xe&&oa(B,Re),_e}for(Te=c(Te);!Ke.done;Re++,Ke=H.next())Ke=K(Te,B,Re,Ke.value,se),Ke!==null&&(i&&Ke.alternate!==null&&Te.delete(Ke.key===null?Re:Ke.key),L=g(Ke,L,Re),Me===null?_e=Ke:Me.sibling=Ke,Me=Ke);return i&&Te.forEach(function(BR){return s(B,BR)}),Xe&&oa(B,Re),_e}function lt(B,L,H,se){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===M){if(L.tag===7){a(B,L.sibling),se=f(L,H.props.children),se.return=B,B=se;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Hv(_e)===L.type){a(B,L.sibling),se=f(L,H.props),Bl(se,H),se.return=B,B=se;break e}a(B,L);break}else s(B,L);L=L.sibling}H.type===M?(se=ra(H.props.children,B.mode,se,H.key),se.return=B,B=se):(se=Mu(H.type,H.key,H.props,null,B.mode,se),Bl(se,H),se.return=B,B=se)}return T(B);case I:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),se=f(L,H.children||[]),se.return=B,B=se;break e}else{a(B,L);break}else s(B,L);L=L.sibling}se=Ef(H,B.mode,se),se.return=B,B=se}return T(B);case R:return _e=H._init,H=_e(H._payload),lt(B,L,H,se)}if(De(H))return Ce(B,L,H,se);if(V(H)){if(_e=V(H),typeof _e!="function")throw Error(r(150));return H=_e.call(H),Se(B,L,H,se)}if(typeof H.then=="function")return lt(B,L,Ju(H),se);if(H.$$typeof===Q)return lt(B,L,Bu(B,H),se);eh(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),se=f(L,H),se.return=B,B=se):(a(B,L),se=_f(H,B.mode,se),se.return=B,B=se),T(B)):a(B,L)}return function(B,L,H,se){try{Ul=0;var _e=lt(B,L,H,se);return fo=null,_e}catch(Te){if(Te===Il||Te===qu)throw Te;var Me=zn(29,Te,null,B.mode);return Me.lanes=se,Me.return=B,Me}finally{}}}var mo=Gv(!0),$v=Gv(!1),si=Z(null),Mi=null;function er(i){var s=i.alternate;ce($t,$t.current&1),ce(si,i),Mi===null&&(s===null||lo.current!==null||s.memoizedState!==null)&&(Mi=i)}function Yv(i){if(i.tag===22){if(ce($t,$t.current),ce(si,i),Mi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Mi=i)}}else tr()}function tr(){ce($t,$t.current),ce(si,si.current)}function ys(i){he(si),Mi===i&&(Mi=null),he($t)}var $t=Z(0);function th(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||qm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Jf(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:_({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var em={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Gn(),f=Ws(c);f.payload=s,a!=null&&(f.callback=a),s=Zs(i,f,c),s!==null&&($n(s,i,c),jl(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Gn(),f=Ws(c);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Zs(i,f,c),s!==null&&($n(s,i,c),jl(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Gn(),c=Ws(a);c.tag=2,s!=null&&(c.callback=s),s=Zs(i,c,a),s!==null&&($n(s,i,a),jl(s,i,a))}};function Kv(i,s,a,c,f,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!bl(a,c)||!bl(f,g):!0}function Qv(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&em.enqueueReplaceState(s,s.state,null)}function ma(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=_({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var nh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Xv(i){nh(i)}function Wv(i){console.error(i)}function Zv(i){nh(i)}function ih(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Jv(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tm(i,s,a){return a=Ws(a),a.tag=3,a.payload={element:null},a.callback=function(){ih(i,s)},a}function e_(i){return i=Ws(i),i.tag=3,i}function t_(i,s,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;i.payload=function(){return f(g)},i.callback=function(){Jv(s,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Jv(s,a,c),typeof f!="function"&&(or===null?or=new Set([this]):or.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function BA(i,s,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&xl(s,a,f,!0),a=si.current,a!==null){switch(a.tag){case 13:return Mi===null?Am():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===If?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),xm(i,c,f)),!1;case 22:return a.flags|=65536,c===If?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),xm(i,c,f)),!1}throw Error(r(435,a.tag))}return xm(i,c,f),Am(),!1}if(Xe)return s=si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==wf&&(i=Error(r(422),{cause:c}),Rl(ei(i,a)))):(c!==wf&&(s=Error(r(423),{cause:c}),Rl(ei(s,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,c=ei(c,a),f=tm(i.stateNode,c,f),Of(i,f),At!==4&&(At=2)),!1;var g=Error(r(520),{cause:c});if(g=ei(g,a),Yl===null?Yl=[g]:Yl.push(g),At!==4&&(At=2),s===null)return!0;c=ei(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=tm(a.stateNode,c,i),Of(a,i),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(or===null||!or.has(g))))return a.flags|=65536,f&=-f,a.lanes|=f,f=e_(f),t_(f,i,a,c),Of(a,f),!1}a=a.return}while(a!==null);return!1}var n_=Error(r(461)),Jt=!1;function ln(i,s,a,c){s.child=i===null?$v(s,null,a,c):mo(s,i.child,a,c)}function i_(i,s,a,c,f){a=a.render;var g=s.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return ha(s),c=Lf(i,s,a,T,g,f),S=Uf(),i!==null&&!Jt?(Bf(i,s,f),vs(i,s,f)):(Xe&&S&&Tf(s),s.flags|=1,ln(i,s,c,f),s.child)}function s_(i,s,a,c,f){if(i===null){var g=a.type;return typeof g=="function"&&!vf(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,r_(i,s,g,c,f)):(i=Mu(a.type,null,c,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!cm(i,f)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:bl,a(T,c)&&i.ref===s.ref)return vs(i,s,f)}return s.flags|=1,i=hs(g,c),i.ref=s.ref,i.return=s,s.child=i}function r_(i,s,a,c,f){if(i!==null){var g=i.memoizedProps;if(bl(g,c)&&i.ref===s.ref)if(Jt=!1,s.pendingProps=c=g,cm(i,f))(i.flags&131072)!==0&&(Jt=!0);else return s.lanes=i.lanes,vs(i,s,f)}return nm(i,s,a,c,f)}function a_(i,s,a){var c=s.pendingProps,f=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,i!==null){for(f=s.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return o_(i,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&zu(s,g!==null?g.cachePool:null),g!==null?rv(s,g):kf(),Yv(s);else return s.lanes=s.childLanes=536870912,o_(i,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(zu(s,g.cachePool),rv(s,g),tr(),s.memoizedState=null):(i!==null&&zu(s,null),kf(),tr());return ln(i,s,f,a),s.child}function o_(i,s,a,c){var f=Nf();return f=f===null?null:{parent:Gt._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},i!==null&&zu(s,null),kf(),Yv(s),i!==null&&xl(i,s,c,!0),null}function sh(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function nm(i,s,a,c,f){return ha(s),a=Lf(i,s,a,c,void 0,f),c=Uf(),i!==null&&!Jt?(Bf(i,s,f),vs(i,s,f)):(Xe&&c&&Tf(s),s.flags|=1,ln(i,s,a,f),s.child)}function l_(i,s,a,c,f,g){return ha(s),s.updateQueue=null,a=ov(s,c,a,f),av(i),c=Uf(),i!==null&&!Jt?(Bf(i,s,g),vs(i,s,g)):(Xe&&c&&Tf(s),s.flags|=1,ln(i,s,a,g),s.child)}function c_(i,s,a,c,f){if(ha(s),s.stateNode===null){var g=io,T=a.contextType;typeof T=="object"&&T!==null&&(g=pn(T)),g=new a(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=em,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Df(s),T=a.contextType,g.context=typeof T=="object"&&T!==null?pn(T):io,g.state=s.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Jf(s,a,T,c),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&em.enqueueReplaceState(g,g.state,null),Pl(s,c,g,f),Ol(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var S=s.memoizedProps,k=ma(a,S);g.props=k;var $=g.context,J=a.contextType;T=io,typeof J=="object"&&J!==null&&(T=pn(J));var ae=a.getDerivedStateFromProps;J=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||$!==T)&&Qv(s,g,c,T),Xs=!1;var Y=s.memoizedState;g.state=Y,Pl(s,c,g,f),Ol(),$=s.memoizedState,S||Y!==$||Xs?(typeof ae=="function"&&(Jf(s,a,ae,c),$=s.memoizedState),(k=Xs||Kv(s,a,k,c,Y,$,T))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),g.props=c,g.state=$,g.context=T,c=k):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,jf(i,s),T=s.memoizedProps,J=ma(a,T),g.props=J,ae=s.pendingProps,Y=g.context,$=a.contextType,k=io,typeof $=="object"&&$!==null&&(k=pn($)),S=a.getDerivedStateFromProps,($=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==ae||Y!==k)&&Qv(s,g,c,k),Xs=!1,Y=s.memoizedState,g.state=Y,Pl(s,c,g,f),Ol();var K=s.memoizedState;T!==ae||Y!==K||Xs||i!==null&&i.dependencies!==null&&Uu(i.dependencies)?(typeof S=="function"&&(Jf(s,a,S,c),K=s.memoizedState),(J=Xs||Kv(s,a,J,c,Y,K,k)||i!==null&&i.dependencies!==null&&Uu(i.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,k),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,k)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=k,c=J):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,sh(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=mo(s,i.child,null,f),s.child=mo(s,null,a,f)):ln(i,s,a,f),s.memoizedState=g.state,i=s.child):i=vs(i,s,f),i}function u_(i,s,a,c){return Al(),s.flags|=256,ln(i,s,a,c),s.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(i){return{baseLanes:i,cachePool:Wy()}}function rm(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=ri),i}function h_(i,s,a){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:($t.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(Xe){if(f?er(s):tr(),Xe){var S=St,k;if(k=S){e:{for(k=S,S=ki;k.nodeType!==8;){if(!S){S=null;break e}if(k=pi(k.nextSibling),k===null){S=null;break e}}S=k}S!==null?(s.memoizedState={dehydrated:S,treeContext:aa!==null?{id:ds,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},k=zn(18,null,null,0),k.stateNode=S,k.return=s,s.child=k,An=s,St=null,k=!0):k=!1}k||ca(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return qm(S)?s.lanes=32:s.lanes=536870912,null;ys(s)}return S=c.children,c=c.fallback,f?(tr(),f=s.mode,S=rh({mode:"hidden",children:S},f),c=ra(c,f,a,null),S.return=s,c.return=s,S.sibling=c,s.child=S,f=s.child,f.memoizedState=sm(a),f.childLanes=rm(i,T,a),s.memoizedState=im,c):(er(s),am(s,S))}if(k=i.memoizedState,k!==null&&(S=k.dehydrated,S!==null)){if(g)s.flags&256?(er(s),s.flags&=-257,s=om(i,s,a)):s.memoizedState!==null?(tr(),s.child=i.child,s.flags|=128,s=null):(tr(),f=c.fallback,S=s.mode,c=rh({mode:"visible",children:c.children},S),f=ra(f,S,a,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,mo(s,i.child,null,a),c=s.child,c.memoizedState=sm(a),c.childLanes=rm(i,T,a),s.memoizedState=im,s=f);else if(er(s),qm(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var $=T.dgst;T=$,c=Error(r(419)),c.stack="",c.digest=T,Rl({value:c,source:null,stack:null}),s=om(i,s,a)}else if(Jt||xl(i,s,a,!1),T=(a&i.childLanes)!==0,Jt||T){if(T=dt,T!==null&&(c=a&-a,c=(c&42)!==0?1:qs(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==k.retryLane))throw k.retryLane=c,no(i,c),$n(T,i,c),n_;S.data==="$?"||Am(),s=om(i,s,a)}else S.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=k.treeContext,St=pi(S.nextSibling),An=s,Xe=!0,la=null,ki=!1,i!==null&&(ni[ii++]=ds,ni[ii++]=fs,ni[ii++]=aa,ds=i.id,fs=i.overflow,aa=s),s=am(s,c.children),s.flags|=4096);return s}return f?(tr(),f=c.fallback,S=s.mode,k=i.child,$=k.sibling,c=hs(k,{mode:"hidden",children:c.children}),c.subtreeFlags=k.subtreeFlags&65011712,$!==null?f=hs($,f):(f=ra(f,S,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,S=i.child.memoizedState,S===null?S=sm(a):(k=S.cachePool,k!==null?($=Gt._currentValue,k=k.parent!==$?{parent:$,pool:$}:k):k=Wy(),S={baseLanes:S.baseLanes|a,cachePool:k}),f.memoizedState=S,f.childLanes=rm(i,T,a),s.memoizedState=im,c):(er(s),a=i.child,i=a.sibling,a=hs(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=a,s.memoizedState=null,a)}function am(i,s){return s=rh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function rh(i,s){return i=zn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function om(i,s,a){return mo(s,i.child,null,a),i=am(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function d_(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Af(i.return,s,a)}function lm(i,s,a,c,f){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function f_(i,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(ln(i,s,c.children,a),c=$t.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&d_(i,a,s);else if(i.tag===19)d_(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(ce($t,c),f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&th(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),lm(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&th(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}lm(s,!0,a,null,g);break;case"together":lm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vs(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),ar|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(xl(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=hs(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=hs(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function cm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Uu(i)))}function zA(i,s,a){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Qs(s,Gt,i.memoizedState.cache),Al();break;case 27:case 5:pt(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Qs(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(er(s),s.flags|=128,null):(a&s.child.childLanes)!==0?h_(i,s,a):(er(s),i=vs(i,s,a),i!==null?i.sibling:null);er(s);break;case 19:var f=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(xl(i,s,a,!1),c=(a&s.childLanes)!==0),f){if(c)return f_(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ce($t,$t.current),c)break;return null;case 22:case 23:return s.lanes=0,a_(i,s,a);case 24:Qs(s,Gt,i.memoizedState.cache)}return vs(i,s,a)}function m_(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Jt=!0;else{if(!cm(i,a)&&(s.flags&128)===0)return Jt=!1,zA(i,s,a);Jt=(i.flags&131072)!==0}else Jt=!1,Xe&&(s.flags&1048576)!==0&&Hy(s,Lu,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")vf(c)?(i=ma(c,i),s.tag=1,s=c_(null,s,c,i,a)):(s.tag=0,s=nm(null,s,c,i,a));else{if(c!=null){if(f=c.$$typeof,f===ie){s.tag=11,s=i_(null,s,c,i,a);break e}else if(f===D){s.tag=14,s=s_(null,s,c,i,a);break e}}throw s=Oe(c)||c,Error(r(306,s,""))}}return s;case 0:return nm(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,f=ma(c,s.pendingProps),c_(i,s,c,f,a);case 3:e:{if(qe(s,s.stateNode.containerInfo),i===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;f=g.element,jf(i,s),Pl(s,c,null,a);var T=s.memoizedState;if(c=T.cache,Qs(s,Gt,c),c!==g.cache&&Rf(s,[Gt],a,!0),Ol(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=u_(i,s,c,a);break e}else if(c!==f){f=ei(Error(r(424)),s),Rl(f),s=u_(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=pi(i.firstChild),An=s,Xe=!0,la=null,ki=!0,a=$v(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Al(),c===f){s=vs(i,s,a);break e}ln(i,s,c,a)}s=s.child}return s;case 26:return sh(i,s),i===null?(a=vE(s.type,null,s.pendingProps,null))?s.memoizedState=a:Xe||(a=s.type,i=s.pendingProps,c=_h(de.current).createElement(a),c[qt]=s,c[Ot]=i,un(c,a,i),Nt(c),s.stateNode=c):s.memoizedState=vE(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return pt(s),i===null&&Xe&&(c=s.stateNode=pE(s.type,s.pendingProps,de.current),An=s,ki=!0,f=St,ur(s.type)?(Fm=f,St=pi(c.firstChild)):St=f),ln(i,s,s.pendingProps.children,a),sh(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Xe&&((f=c=St)&&(c=pR(c,s.type,s.pendingProps,ki),c!==null?(s.stateNode=c,An=s,St=pi(c.firstChild),ki=!1,f=!0):f=!1),f||ca(s)),pt(s),f=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,Um(f,g)?c=null:T!==null&&Um(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=Lf(i,s,OA,null,null,a),nc._currentValue=f),sh(i,s),ln(i,s,c,a),s.child;case 6:return i===null&&Xe&&((i=a=St)&&(a=gR(a,s.pendingProps,ki),a!==null?(s.stateNode=a,An=s,St=null,i=!0):i=!1),i||ca(s)),null;case 13:return h_(i,s,a);case 4:return qe(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=mo(s,null,c,a):ln(i,s,c,a),s.child;case 11:return i_(i,s,s.type,s.pendingProps,a);case 7:return ln(i,s,s.pendingProps,a),s.child;case 8:return ln(i,s,s.pendingProps.children,a),s.child;case 12:return ln(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Qs(s,s.type,c.value),ln(i,s,c.children,a),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,ha(s),f=pn(f),c=c(f),s.flags|=1,ln(i,s,c,a),s.child;case 14:return s_(i,s,s.type,s.pendingProps,a);case 15:return r_(i,s,s.type,s.pendingProps,a);case 19:return f_(i,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},i===null?(a=rh(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=hs(i.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(i,s,a);case 24:return ha(s),c=pn(Gt),i===null?(f=Nf(),f===null&&(f=dt,g=xf(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=a),f=g),s.memoizedState={parent:c,cache:f},Df(s),Qs(s,Gt,f)):((i.lanes&a)!==0&&(jf(i,s),Pl(s,null,null,a),Ol()),f=i.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Qs(s,Gt,c)):(c=g.cache,Qs(s,Gt,c),c!==f.cache&&Rf(s,[Gt],a,!0))),ln(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _s(i){i.flags|=4}function p_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wE(s)){if(s=si.current,s!==null&&((Ge&4194048)===Ge?Mi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||s!==Mi))throw Dl=If,Zy;i.flags|=8192}}function ah(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?sl():536870912,i.lanes|=s,vo|=s)}function zl(i,s){if(!Xe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Tt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function qA(i,s,a){var c=s.pendingProps;switch(bf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ps(Gt),gt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Sl(s)?_s(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yy())),Tt(s),null;case 26:return a=s.memoizedState,i===null?(_s(s),a!==null?(Tt(s),p_(s,a)):(Tt(s),s.flags&=-16777217)):a?a!==i.memoizedState?(_s(s),Tt(s),p_(s,a)):(Tt(s),s.flags&=-16777217):(i.memoizedProps!==c&&_s(s),Tt(s),s.flags&=-16777217),null;case 27:Xt(s),a=de.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}i=ue.current,Sl(s)?Gy(s):(i=pE(f,c,a),s.stateNode=i,_s(s))}return Tt(s),null;case 5:if(Xt(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(i=ue.current,Sl(s))Gy(s);else{switch(f=_h(de.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}i[qt]=s,i[Ot]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;e:switch(un(i,a,c),a){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_s(s)}}return Tt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=de.current,Sl(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,f=An,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}i[qt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||lE(i.nodeValue,a)),i||ca(s)}else i=_h(i).createTextNode(c),i[qt]=s,s.stateNode=i}return Tt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Sl(s),c!==null&&c.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[qt]=s}else Al(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),f=!1}else f=Yy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ys(s),s):(ys(s),null)}if(ys(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,i=i!==null&&i.memoizedState!==null,a){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),ah(s,s.updateQueue),Tt(s),null;case 4:return gt(),i===null&&Pm(s.stateNode.containerInfo),Tt(s),null;case 10:return ps(s.type),Tt(s),null;case 19:if(he($t),f=s.memoizedState,f===null)return Tt(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)zl(f,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=th(i),g!==null){for(s.flags|=128,zl(f,!1),i=g.updateQueue,s.updateQueue=i,ah(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Fy(a,i),a=a.sibling;return ce($t,$t.current&1|2),s.child}i=i.sibling}f.tail!==null&&rn()>ch&&(s.flags|=128,c=!0,zl(f,!1),s.lanes=4194304)}else{if(!c)if(i=th(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,ah(s,i),zl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Xe)return Tt(s),null}else 2*rn()-f.renderingStartTime>ch&&a!==536870912&&(s.flags|=128,c=!0,zl(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(i=f.last,i!==null?i.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=rn(),s.sibling=null,i=$t.current,ce($t,c?i&1|2:i&1),s):(Tt(s),null);case 22:case 23:return ys(s),Mf(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&ah(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&he(da),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ps(Gt),Tt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function FA(i,s){switch(bf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ps(Gt),gt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Xt(s),null;case 13:if(ys(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Al()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return he($t),null;case 4:return gt(),null;case 10:return ps(s.type),null;case 22:case 23:return ys(s),Mf(),i!==null&&he(da),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ps(Gt),null;case 25:return null;default:return null}}function g_(i,s){switch(bf(s),s.tag){case 3:ps(Gt),gt();break;case 26:case 27:case 5:Xt(s);break;case 4:gt();break;case 13:ys(s);break;case 19:he($t);break;case 10:ps(s.type);break;case 22:case 23:ys(s),Mf(),i!==null&&he(da);break;case 24:ps(Gt)}}function ql(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&i)===i){c=void 0;var g=a.create,T=a.inst;c=g(),T.destroy=c}a=a.next}while(a!==f)}}catch(S){ut(s,s.return,S)}}function nr(i,s,a){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,f=s;var k=a,$=S;try{$()}catch(J){ut(f,k,J)}}}c=c.next}while(c!==g)}}catch(J){ut(s,s.return,J)}}function y_(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{sv(s,a)}catch(c){ut(i,i.return,c)}}}function v_(i,s,a){a.props=ma(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){ut(i,s,c)}}function Fl(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(f){ut(i,s,f)}}function Vi(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){ut(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ut(i,s,f)}else a.current=null}function __(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){ut(i,i.return,f)}}function um(i,s,a){try{var c=i.stateNode;uR(c,i.type,a,s),c[Ot]=s}catch(f){ut(i,i.return,f)}}function E_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ur(i.type)||i.tag===4}function hm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||E_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ur(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dm(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=vh));else if(c!==4&&(c===27&&ur(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(dm(i,s,a),i=i.sibling;i!==null;)dm(i,s,a),i=i.sibling}function oh(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&ur(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(oh(i,s,a),i=i.sibling;i!==null;)oh(i,s,a),i=i.sibling}function T_(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);un(s,c,a),s[qt]=i,s[Ot]=a}catch(g){ut(i,i.return,g)}}var Es=!1,Dt=!1,fm=!1,b_=typeof WeakSet=="function"?WeakSet:Set,en=null;function HA(i,s){if(i=i.containerInfo,Vm=Ah,i=Oy(i),hf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,S=-1,k=-1,$=0,J=0,ae=i,Y=null;t:for(;;){for(var K;ae!==a||f!==0&&ae.nodeType!==3||(S=T+f),ae!==g||c!==0&&ae.nodeType!==3||(k=T+c),ae.nodeType===3&&(T+=ae.nodeValue.length),(K=ae.firstChild)!==null;)Y=ae,ae=K;for(;;){if(ae===i)break t;if(Y===a&&++$===f&&(S=T),Y===g&&++J===c&&(k=T),(K=ae.nextSibling)!==null)break;ae=Y,Y=ae.parentNode}ae=K}a=S===-1||k===-1?null:{start:S,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lm={focusedElem:i,selectionRange:a},Ah=!1,en=s;en!==null;)if(s=en,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,en=i;else for(;en!==null;){switch(s=en,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,a=s,f=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var Ce=ma(a.type,f,a.elementType===a.type);i=c.getSnapshotBeforeUpdate(Ce,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(Se){ut(a,a.return,Se)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)zm(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,en=i;break}en=s.return}}function w_(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:ir(i,a),c&4&&ql(5,a);break;case 1:if(ir(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(T){ut(a,a.return,T)}else{var f=ma(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){ut(a,a.return,T)}}c&64&&y_(a),c&512&&Fl(a,a.return);break;case 3:if(ir(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sv(i,s)}catch(T){ut(a,a.return,T)}}break;case 27:s===null&&c&4&&T_(a);case 26:case 5:ir(i,a),s===null&&c&4&&__(a),c&512&&Fl(a,a.return);break;case 12:ir(i,a);break;case 13:ir(i,a),c&4&&R_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=JA.bind(null,a),yR(i,a))));break;case 22:if(c=a.memoizedState!==null||Es,!c){s=s!==null&&s.memoizedState!==null||Dt,f=Es;var g=Dt;Es=c,(Dt=s)&&!g?sr(i,a,(a.subtreeFlags&8772)!==0):ir(i,a),Es=f,Dt=g}break;case 30:break;default:ir(i,a)}}function S_(i){var s=i.alternate;s!==null&&(i.alternate=null,S_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Gs(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var vt=null,Cn=!1;function Ts(i,s,a){for(a=a.child;a!==null;)A_(i,s,a),a=a.sibling}function A_(i,s,a){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:Dt||Vi(a,s),Ts(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Vi(a,s);var c=vt,f=Cn;ur(a.type)&&(vt=a.stateNode,Cn=!1),Ts(i,s,a),Zl(a.stateNode),vt=c,Cn=f;break;case 5:Dt||Vi(a,s);case 6:if(c=vt,f=Cn,vt=null,Ts(i,s,a),vt=c,Cn=f,vt!==null)if(Cn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(g){ut(a,s,g)}else try{vt.removeChild(a.stateNode)}catch(g){ut(a,s,g)}break;case 18:vt!==null&&(Cn?(i=vt,fE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),ac(i)):fE(vt,a.stateNode));break;case 4:c=vt,f=Cn,vt=a.stateNode.containerInfo,Cn=!0,Ts(i,s,a),vt=c,Cn=f;break;case 0:case 11:case 14:case 15:Dt||nr(2,a,s),Dt||nr(4,a,s),Ts(i,s,a);break;case 1:Dt||(Vi(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&v_(a,s,c)),Ts(i,s,a);break;case 21:Ts(i,s,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,Ts(i,s,a),Dt=c;break;default:Ts(i,s,a)}}function R_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ac(i)}catch(a){ut(s,s.return,a)}}function GA(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new b_),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new b_),s;default:throw Error(r(435,i.tag))}}function mm(i,s){var a=GA(i);s.forEach(function(c){var f=eR.bind(null,i,c);a.has(c)||(a.add(c),c.then(f,f))})}function qn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],g=i,T=s,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(ur(S.type)){vt=S.stateNode,Cn=!1;break e}break;case 5:vt=S.stateNode,Cn=!1;break e;case 3:case 4:vt=S.stateNode.containerInfo,Cn=!0;break e}S=S.return}if(vt===null)throw Error(r(160));A_(g,T,f),vt=null,Cn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)x_(s,i),s=s.sibling}var mi=null;function x_(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(s,i),Fn(i),c&4&&(nr(3,i,i.return),ql(3,i),nr(5,i,i.return));break;case 1:qn(s,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),c&64&&Es&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=mi;if(qn(s,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Fr]||g[qt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),un(g,c,a),g[qt]=i,Nt(g),c=g;break e;case"link":var T=TE("link","href",f).get(c+(a.href||""));if(T){for(var S=0;S<T.length;S++)if(g=T[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(S,1);break t}}g=f.createElement(c),un(g,c,a),f.head.appendChild(g);break;case"meta":if(T=TE("meta","content",f).get(c+(a.content||""))){for(S=0;S<T.length;S++)if(g=T[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(S,1);break t}}g=f.createElement(c),un(g,c,a),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[qt]=i,Nt(g),c=g}i.stateNode=c}else bE(f,i.type,i.stateNode);else i.stateNode=EE(f,c,i.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?bE(f,i.type,i.stateNode):EE(f,c,i.memoizedProps)):c===null&&i.stateNode!==null&&um(i,i.memoizedProps,a.memoizedProps)}break;case 27:qn(s,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),a!==null&&c&4&&um(i,i.memoizedProps,a.memoizedProps);break;case 5:if(qn(s,i),Fn(i),c&512&&(Dt||a===null||Vi(a,a.return)),i.flags&32){f=i.stateNode;try{Xn(f,"")}catch(K){ut(i,i.return,K)}}c&4&&i.stateNode!=null&&(f=i.memoizedProps,um(i,f,a!==null?a.memoizedProps:f)),c&1024&&(fm=!0);break;case 6:if(qn(s,i),Fn(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(K){ut(i,i.return,K)}}break;case 3:if(bh=null,f=mi,mi=Eh(s.containerInfo),qn(s,i),mi=f,Fn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{ac(s.containerInfo)}catch(K){ut(i,i.return,K)}fm&&(fm=!1,C_(i));break;case 4:c=mi,mi=Eh(i.stateNode.containerInfo),qn(s,i),Fn(i),mi=c;break;case 12:qn(s,i),Fn(i);break;case 13:qn(s,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Em=rn()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,mm(i,c)));break;case 22:f=i.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,$=Es,J=Dt;if(Es=$||f,Dt=J||k,qn(s,i),Dt=J,Es=$,Fn(i),c&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||k||Es||Dt||pa(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){k=a=s;try{if(g=k.stateNode,f)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=k.stateNode;var ae=k.memoizedProps.style,Y=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){ut(k,k.return,K)}}}else if(s.tag===6){if(a===null){k=s;try{k.stateNode.nodeValue=f?"":k.memoizedProps}catch(K){ut(k,k.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,mm(i,a))));break;case 19:qn(s,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,mm(i,c)));break;case 30:break;case 21:break;default:qn(s,i),Fn(i)}}function Fn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(E_(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,g=hm(i);oh(i,g,f);break;case 5:var T=a.stateNode;a.flags&32&&(Xn(T,""),a.flags&=-33);var S=hm(i);oh(i,S,T);break;case 3:case 4:var k=a.stateNode.containerInfo,$=hm(i);dm(i,$,k);break;default:throw Error(r(161))}}catch(J){ut(i,i.return,J)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function C_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;C_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ir(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)w_(i,s.alternate,s),s=s.sibling}function pa(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:nr(4,s,s.return),pa(s);break;case 1:Vi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&v_(s,s.return,a),pa(s);break;case 27:Zl(s.stateNode);case 26:case 5:Vi(s,s.return),pa(s);break;case 22:s.memoizedState===null&&pa(s);break;case 30:pa(s);break;default:pa(s)}i=i.sibling}}function sr(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:sr(f,g,a),ql(4,g);break;case 1:if(sr(f,g,a),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){ut(c,c.return,$)}if(c=g,f=c.updateQueue,f!==null){var S=c.stateNode;try{var k=f.shared.hiddenCallbacks;if(k!==null)for(f.shared.hiddenCallbacks=null,f=0;f<k.length;f++)iv(k[f],S)}catch($){ut(c,c.return,$)}}a&&T&64&&y_(g),Fl(g,g.return);break;case 27:T_(g);case 26:case 5:sr(f,g,a),a&&c===null&&T&4&&__(g),Fl(g,g.return);break;case 12:sr(f,g,a);break;case 13:sr(f,g,a),a&&T&4&&R_(f,g);break;case 22:g.memoizedState===null&&sr(f,g,a),Fl(g,g.return);break;case 30:break;default:sr(f,g,a)}s=s.sibling}}function pm(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Cl(a))}function gm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Cl(i))}function Li(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)N_(i,s,a,c),s=s.sibling}function N_(i,s,a,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Li(i,s,a,c),f&2048&&ql(9,s);break;case 1:Li(i,s,a,c);break;case 3:Li(i,s,a,c),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Cl(i)));break;case 12:if(f&2048){Li(i,s,a,c),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,S=g.onPostCommit;typeof S=="function"&&S(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(k){ut(s,s.return,k)}}else Li(i,s,a,c);break;case 13:Li(i,s,a,c);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?Li(i,s,a,c):Hl(i,s):g._visibility&2?Li(i,s,a,c):(g._visibility|=2,po(i,s,a,c,(s.subtreeFlags&10256)!==0)),f&2048&&pm(T,s);break;case 24:Li(i,s,a,c),f&2048&&gm(s.alternate,s);break;default:Li(i,s,a,c)}}function po(i,s,a,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,T=s,S=a,k=c,$=T.flags;switch(T.tag){case 0:case 11:case 15:po(g,T,S,k,f),ql(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?po(g,T,S,k,f):Hl(g,T):(J._visibility|=2,po(g,T,S,k,f)),f&&$&2048&&pm(T.alternate,T);break;case 24:po(g,T,S,k,f),f&&$&2048&&gm(T.alternate,T);break;default:po(g,T,S,k,f)}s=s.sibling}}function Hl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,f=c.flags;switch(c.tag){case 22:Hl(a,c),f&2048&&pm(c.alternate,c);break;case 24:Hl(a,c),f&2048&&gm(c.alternate,c);break;default:Hl(a,c)}s=s.sibling}}var Gl=8192;function go(i){if(i.subtreeFlags&Gl)for(i=i.child;i!==null;)I_(i),i=i.sibling}function I_(i){switch(i.tag){case 26:go(i),i.flags&Gl&&i.memoizedState!==null&&IR(mi,i.memoizedState,i.memoizedProps);break;case 5:go(i);break;case 3:case 4:var s=mi;mi=Eh(i.stateNode.containerInfo),go(i),mi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Gl,Gl=16777216,go(i),Gl=s):go(i));break;default:go(i)}}function D_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function $l(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,O_(c,i)}D_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j_(i),i=i.sibling}function j_(i){switch(i.tag){case 0:case 11:case 15:$l(i),i.flags&2048&&nr(9,i,i.return);break;case 3:$l(i);break;case 12:$l(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,lh(i)):$l(i);break;default:$l(i)}}function lh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];en=c,O_(c,i)}D_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:nr(8,s,s.return),lh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,lh(s));break;default:lh(s)}i=i.sibling}}function O_(i,s){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:nr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Cl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,en=c;else e:for(a=i;en!==null;){c=en;var f=c.sibling,g=c.return;if(S_(c),c===a){en=null;break e}if(f!==null){f.return=g,en=f;break e}en=g}}}var $A={getCacheForType:function(i){var s=pn(Gt),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},YA=typeof WeakMap=="function"?WeakMap:Map,tt=0,dt=null,Ve=null,Ge=0,nt=0,Hn=null,rr=!1,yo=!1,ym=!1,bs=0,At=0,ar=0,ga=0,vm=0,ri=0,vo=0,Yl=null,Nn=null,_m=!1,Em=0,ch=1/0,uh=null,or=null,cn=0,lr=null,_o=null,Eo=0,Tm=0,bm=null,P_=null,Kl=0,wm=null;function Gn(){if((tt&2)!==0&&Ge!==0)return Ge&-Ge;if(X.T!==null){var i=ao;return i!==0?i:Im()}return Fs()}function k_(){ri===0&&(ri=(Ge&536870912)===0||Xe?il():536870912);var i=si.current;return i!==null&&(i.flags|=32),ri}function $n(i,s,a){(i===dt&&(nt===2||nt===9)||i.cancelPendingCommit!==null)&&(To(i,0),cr(i,Ge,ri,!1)),es(i,a),((tt&2)===0||i!==dt)&&(i===dt&&((tt&2)===0&&(ga|=a),At===4&&cr(i,Ge,ri,!1)),Ui(i))}function M_(i,s,a){if((tt&6)!==0)throw Error(r(327));var c=!a&&(s&124)===0&&(s&i.expiredLanes)===0||qr(i,s),f=c?XA(i,s):Rm(i,s,!0),g=c;do{if(f===0){yo&&!c&&cr(i,s,0,!1);break}else{if(a=i.current.alternate,g&&!KA(a)){f=Rm(i,s,!1),g=!1;continue}if(f===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var S=i;f=Yl;var k=S.current.memoizedState.isDehydrated;if(k&&(To(S,T).flags|=256),T=Rm(S,T,!1),T!==2){if(ym&&!k){S.errorRecoveryDisabledLanes|=g,ga|=g,f=4;break e}g=Nn,Nn=f,g!==null&&(Nn===null?Nn=g:Nn.push.apply(Nn,g))}f=T}if(g=!1,f!==2)continue}}if(f===1){To(i,0),cr(i,s,0,!0);break}e:{switch(c=i,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:cr(c,s,ri,!rr);break e;case 2:Nn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Em+300-rn(),10<f)){if(cr(c,s,ri,!rr),Va(c,0,!0)!==0)break e;c.timeoutHandle=hE(V_.bind(null,c,a,Nn,uh,_m,s,ri,ga,vo,rr,g,2,-0,0),f);break e}V_(c,a,Nn,uh,_m,s,ri,ga,vo,rr,g,0,-0,0)}}break}while(!0);Ui(i)}function V_(i,s,a,c,f,g,T,S,k,$,J,ae,Y,K){if(i.timeoutHandle=-1,ae=s.subtreeFlags,(ae&8192||(ae&16785408)===16785408)&&(tc={stylesheets:null,count:0,unsuspend:NR},I_(s),ae=DR(),ae!==null)){i.cancelPendingCommit=ae(H_.bind(null,i,s,g,a,c,f,T,S,k,J,1,Y,K)),cr(i,g,T,!$);return}H_(i,s,g,a,c,f,T,S,k)}function KA(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Bn(g(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function cr(i,s,a,c){s&=~vm,s&=~ga,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var f=s;0<f;){var g=31-mn(f),T=1<<g;c[g]=-1,f&=~T}a!==0&&Si(i,a,s)}function hh(){return(tt&6)===0?(Ql(0),!1):!0}function Sm(){if(Ve!==null){if(nt===0)var i=Ve.return;else i=Ve,ms=ua=null,zf(i),fo=null,Ul=0,i=Ve;for(;i!==null;)g_(i.alternate,i),i=i.return;Ve=null}}function To(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,dR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Sm(),dt=i,Ve=a=hs(i.current,null),Ge=s,nt=0,Hn=null,rr=!1,yo=qr(i,s),ym=!1,vo=ri=vm=ga=ar=At=0,Nn=Yl=null,_m=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var f=31-mn(c),g=1<<f;s|=i[f],c&=~g}return bs=s,Ou(),a}function L_(i,s){ke=null,X.H=Zu,s===Il||s===qu?(s=tv(),nt=3):s===Zy?(s=tv(),nt=4):nt=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hn=s,Ve===null&&(At=1,ih(i,ei(s,i.current)))}function U_(){var i=X.H;return X.H=Zu,i===null?Zu:i}function B_(){var i=X.A;return X.A=$A,i}function Am(){At=4,rr||(Ge&4194048)!==Ge&&si.current!==null||(yo=!0),(ar&134217727)===0&&(ga&134217727)===0||dt===null||cr(dt,Ge,ri,!1)}function Rm(i,s,a){var c=tt;tt|=2;var f=U_(),g=B_();(dt!==i||Ge!==s)&&(uh=null,To(i,s)),s=!1;var T=At;e:do try{if(nt!==0&&Ve!==null){var S=Ve,k=Hn;switch(nt){case 8:Sm(),T=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(s=!0);var $=nt;if(nt=0,Hn=null,bo(i,S,k,$),a&&yo){T=0;break e}break;default:$=nt,nt=0,Hn=null,bo(i,S,k,$)}}QA(),T=At;break}catch(J){L_(i,J)}while(!0);return s&&i.shellSuspendCounter++,ms=ua=null,tt=c,X.H=f,X.A=g,Ve===null&&(dt=null,Ge=0,Ou()),T}function QA(){for(;Ve!==null;)z_(Ve)}function XA(i,s){var a=tt;tt|=2;var c=U_(),f=B_();dt!==i||Ge!==s?(uh=null,ch=rn()+500,To(i,s)):yo=qr(i,s);e:do try{if(nt!==0&&Ve!==null){s=Ve;var g=Hn;t:switch(nt){case 1:nt=0,Hn=null,bo(i,s,g,1);break;case 2:case 9:if(Jy(g)){nt=0,Hn=null,q_(s);break}s=function(){nt!==2&&nt!==9||dt!==i||(nt=7),Ui(i)},g.then(s,s);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Jy(g)?(nt=0,Hn=null,q_(s)):(nt=0,Hn=null,bo(i,s,g,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var S=Ve;if(!T||wE(T)){nt=0,Hn=null;var k=S.sibling;if(k!==null)Ve=k;else{var $=S.return;$!==null?(Ve=$,dh($)):Ve=null}break t}}nt=0,Hn=null,bo(i,s,g,5);break;case 6:nt=0,Hn=null,bo(i,s,g,6);break;case 8:Sm(),At=6;break e;default:throw Error(r(462))}}WA();break}catch(J){L_(i,J)}while(!0);return ms=ua=null,X.H=c,X.A=f,tt=a,Ve!==null?0:(dt=null,Ge=0,Ou(),At)}function WA(){for(;Ve!==null&&!Us();)z_(Ve)}function z_(i){var s=m_(i.alternate,i,bs);i.memoizedProps=i.pendingProps,s===null?dh(i):Ve=s}function q_(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:zf(s);default:g_(a,s),s=Ve=Fy(s,bs),s=m_(a,s,bs)}i.memoizedProps=i.pendingProps,s===null?dh(i):Ve=s}function bo(i,s,a,c){ms=ua=null,zf(s),fo=null,Ul=0;var f=s.return;try{if(BA(i,f,s,a,Ge)){At=1,ih(i,ei(a,i.current)),Ve=null;return}}catch(g){if(f!==null)throw Ve=f,g;At=1,ih(i,ei(a,i.current)),Ve=null;return}s.flags&32768?(Xe||c===1?i=!0:yo||(Ge&536870912)!==0?i=!1:(rr=i=!0,(c===2||c===9||c===3||c===6)&&(c=si.current,c!==null&&c.tag===13&&(c.flags|=16384))),F_(s,i)):dh(s)}function dh(i){var s=i;do{if((s.flags&32768)!==0){F_(s,rr);return}i=s.return;var a=qA(s.alternate,s,bs);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);At===0&&(At=5)}function F_(i,s){do{var a=FA(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);At=6,Ve=null}function H_(i,s,a,c,f,g,T,S,k){i.cancelPendingCommit=null;do fh();while(cn!==0);if((tt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=gf,rl(i,a,g,T,S,k),i===dt&&(Ve=dt=null,Ge=0),_o=s,lr=i,Eo=a,Tm=g,bm=f,P_=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,tR(wi,function(){return Q_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=me.p,me.p=2,T=tt,tt|=4;try{HA(i,s,a)}finally{tt=T,me.p=f,X.T=c}}cn=1,G_(),$_(),Y_()}}function G_(){if(cn===1){cn=0;var i=lr,s=_o,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=me.p;me.p=2;var f=tt;tt|=4;try{x_(s,i);var g=Lm,T=Oy(i.containerInfo),S=g.focusedElem,k=g.selectionRange;if(T!==S&&S&&S.ownerDocument&&jy(S.ownerDocument.documentElement,S)){if(k!==null&&hf(S)){var $=k.start,J=k.end;if(J===void 0&&(J=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(J,S.value.length);else{var ae=S.ownerDocument||document,Y=ae&&ae.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ce=S.textContent.length,Se=Math.min(k.start,Ce),lt=k.end===void 0?Se:Math.min(k.end,Ce);!K.extend&&Se>lt&&(T=lt,lt=Se,Se=T);var B=Dy(S,Se),L=Dy(S,lt);if(B&&L&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=ae.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Se>lt?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(ae=[],K=S;K=K.parentNode;)K.nodeType===1&&ae.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ae.length;S++){var se=ae[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Ah=!!Vm,Lm=Vm=null}finally{tt=f,me.p=c,X.T=a}}i.current=s,cn=2}}function $_(){if(cn===2){cn=0;var i=lr,s=_o,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=me.p;me.p=2;var f=tt;tt|=4;try{w_(i,s.alternate,s)}finally{tt=f,me.p=c,X.T=a}}cn=3}}function Y_(){if(cn===4||cn===3){cn=0,Bs();var i=lr,s=_o,a=Eo,c=P_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?cn=5:(cn=0,_o=lr=null,K_(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(or=null),La(a),s=s.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=X.T,f=me.p,me.p=2,X.T=null;try{for(var g=i.onRecoverableError,T=0;T<c.length;T++){var S=c[T];g(S.value,{componentStack:S.stack})}}finally{X.T=s,me.p=f}}(Eo&3)!==0&&fh(),Ui(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===wm?Kl++:(Kl=0,wm=i):Kl=0,Ql(0)}}function K_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Cl(s)))}function fh(i){return G_(),$_(),Y_(),Q_()}function Q_(){if(cn!==5)return!1;var i=lr,s=Tm;Tm=0;var a=La(Eo),c=X.T,f=me.p;try{me.p=32>a?32:a,X.T=null,a=bm,bm=null;var g=lr,T=Eo;if(cn=0,_o=lr=null,Eo=0,(tt&6)!==0)throw Error(r(331));var S=tt;if(tt|=4,j_(g.current),N_(g,g.current,T,a),tt=S,Ql(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{me.p=f,X.T=c,K_(i,s)}}function X_(i,s,a){s=ei(a,s),s=tm(i.stateNode,s,2),i=Zs(i,s,2),i!==null&&(es(i,2),Ui(i))}function ut(i,s,a){if(i.tag===3)X_(i,i,a);else for(;s!==null;){if(s.tag===3){X_(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(or===null||!or.has(c))){i=ei(a,i),a=e_(2),c=Zs(s,a,2),c!==null&&(t_(a,c,s,i),es(c,2),Ui(c));break}}s=s.return}}function xm(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new YA;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(ym=!0,f.add(a),i=ZA.bind(null,i,s,a),s.then(i,i))}function ZA(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,dt===i&&(Ge&a)===a&&(At===4||At===3&&(Ge&62914560)===Ge&&300>rn()-Em?(tt&2)===0&&To(i,0):vm|=a,vo===Ge&&(vo=0)),Ui(i)}function W_(i,s){s===0&&(s=sl()),i=no(i,s),i!==null&&(es(i,s),Ui(i))}function JA(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(i,a)}function eR(i,s){var a=0;switch(i.tag){case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),W_(i,a)}function tR(i,s){return Wi(i,s)}var mh=null,wo=null,Cm=!1,ph=!1,Nm=!1,ya=0;function Ui(i){i!==wo&&i.next===null&&(wo===null?mh=wo=i:wo=wo.next=i),ph=!0,Cm||(Cm=!0,iR())}function Ql(i,s){if(!Nm&&ph){Nm=!0;do for(var a=!1,c=mh;c!==null;){if(i!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var T=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-mn(42|i)+1)-1,g&=f&~(T&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,tE(c,g))}else g=Ge,g=Va(c,c===dt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||qr(c,g)||(a=!0,tE(c,g));c=c.next}while(a);Nm=!1}}function nR(){Z_()}function Z_(){ph=Cm=!1;var i=0;ya!==0&&(hR()&&(i=ya),ya=0);for(var s=rn(),a=null,c=mh;c!==null;){var f=c.next,g=J_(c,s);g===0?(c.next=null,a===null?mh=f:a.next=f,f===null&&(wo=a)):(a=c,(i!==0||(g&3)!==0)&&(ph=!0)),c=f}Ql(i)}function J_(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-mn(g),S=1<<T,k=f[T];k===-1?((S&a)===0||(S&c)!==0)&&(f[T]=nl(S,s)):k<=s&&(i.expiredLanes|=S),g&=~S}if(s=dt,a=Ge,a=Va(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(nt===2||nt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Zi(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||qr(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&Zi(c),La(a)){case 2:case 8:a=Ne;break;case 32:a=wi;break;case 268435456:a=zs;break;default:a=wi}return c=eE.bind(null,i),a=Wi(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&Zi(c),i.callbackPriority=2,i.callbackNode=null,2}function eE(i,s){if(cn!==0&&cn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(fh()&&i.callbackNode!==a)return null;var c=Ge;return c=Va(i,i===dt?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(M_(i,c,s),J_(i,rn()),i.callbackNode!=null&&i.callbackNode===a?eE.bind(null,i):null)}function tE(i,s){if(fh())return null;M_(i,s,!0)}function iR(){fR(function(){(tt&6)!==0?Wi(st,nR):Z_()})}function Im(){return ya===0&&(ya=il()),ya}function nE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ha(""+i)}function iE(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function sR(i,s,a,c,f){if(s==="submit"&&a&&a.stateNode===f){var g=nE((f[Ot]||null).action),T=c.submitter;T&&(s=(s=T[Ot]||null)?nE(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var S=new Ga("action","action",null,c,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ya!==0){var k=T?iE(f,T):new FormData(f);Xf(a,{pending:!0,data:k,method:f.method,action:g},null,k)}}else typeof g=="function"&&(S.preventDefault(),k=T?iE(f,T):new FormData(f),Xf(a,{pending:!0,data:k,method:f.method,action:g},g,k))},currentTarget:f}]})}}for(var Dm=0;Dm<pf.length;Dm++){var jm=pf[Dm],rR=jm.toLowerCase(),aR=jm[0].toUpperCase()+jm.slice(1);fi(rR,"on"+aR)}fi(My,"onAnimationEnd"),fi(Vy,"onAnimationIteration"),fi(Ly,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(wA,"onTransitionRun"),fi(SA,"onTransitionStart"),fi(AA,"onTransitionCancel"),fi(Uy,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),hi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),hi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),hi("onBeforeInput",["compositionend","keypress","textInput","paste"]),hi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),hi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xl));function sE(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var S=c[T],k=S.instance,$=S.currentTarget;if(S=S.listener,k!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=$;try{g(f)}catch(J){nh(J)}f.currentTarget=null,g=k}else for(T=0;T<c.length;T++){if(S=c[T],k=S.instance,$=S.currentTarget,S=S.listener,k!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=$;try{g(f)}catch(J){nh(J)}f.currentTarget=null,g=k}}}}function Le(i,s){var a=s[ol];a===void 0&&(a=s[ol]=new Set);var c=i+"__bubble";a.has(c)||(rE(s,i,2,!1),a.add(c))}function Om(i,s,a){var c=0;s&&(c|=4),rE(a,i,c,s)}var gh="_reactListening"+Math.random().toString(36).slice(2);function Pm(i){if(!i[gh]){i[gh]=!0,ll.forEach(function(a){a!=="selectionchange"&&(oR.has(a)||Om(a,!1,i),Om(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[gh]||(s[gh]=!0,Om("selectionchange",!1,s))}}function rE(i,s,a,c){switch(NE(s)){case 2:var f=PR;break;case 8:f=kR;break;default:f=Km}a=f.bind(null,s,a,i),f=void 0,!Zn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function km(i,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===f)break;if(T===4)for(T=c.return;T!==null;){var k=T.tag;if((k===3||k===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;S!==null;){if(T=ts(S),T===null)return;if(k=T.tag,k===5||k===6||k===26||k===27){c=g=T;continue e}S=S.parentNode}}c=c.return}vu(function(){var $=g,J=Wn(a),ae=[];e:{var Y=By.get(i);if(Y!==void 0){var K=Ga,Ce=i;switch(i){case"keypress":if(Ii(a)===0)break e;case"keydown":case"keyup":K=Wa;break;case"focusin":Ce="focus",K=Ka;break;case"focusout":Ce="blur",K=Ka;break;case"beforeblur":case"afterblur":K=Ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=of;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Ru;break;case My:case Vy:case Ly:K=Qa;break;case Uy:K=Cu;break;case"scroll":case"scrollend":K=_u;break;case"wheel":K=Za;break;case"copy":case"cut":case"paste":K=Xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=El;break;case"toggle":case"beforetoggle":K=Iu}var Se=(s&4)!==0,lt=!Se&&(i==="scroll"||i==="scrollend"),B=Se?Y!==null?Y+"Capture":null:Y;Se=[];for(var L=$,H;L!==null;){var se=L;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||B===null||(se=Xr(L,B),se!=null&&Se.push(Wl(L,se,H))),lt)break;L=L.return}0<Se.length&&(Y=new K(Y,Ce,null,a,J),ae.push({event:Y,listeners:Se}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==rs&&(Ce=a.relatedTarget||a.fromElement)&&(ts(Ce)||Ce[Qn]))break e;if((K||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ce=a.relatedTarget||a.toElement,K=$,Ce=Ce?ts(Ce):null,Ce!==null&&(lt=l(Ce),Se=Ce.tag,Ce!==lt||Se!==5&&Se!==27&&Se!==6)&&(Ce=null)):(K=null,Ce=$),K!==Ce)){if(Se=Jn,se="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Se=El,se="onPointerLeave",B="onPointerEnter",L="pointer"),lt=K==null?Y:Ri(K),H=Ce==null?Y:Ri(Ce),Y=new Se(se,L+"leave",K,a,J),Y.target=lt,Y.relatedTarget=H,se=null,ts(J)===$&&(Se=new Se(B,L+"enter",Ce,a,J),Se.target=H,Se.relatedTarget=lt,se=Se),lt=se,K&&Ce)t:{for(Se=K,B=Ce,L=0,H=Se;H;H=So(H))L++;for(H=0,se=B;se;se=So(se))H++;for(;0<L-H;)Se=So(Se),L--;for(;0<H-L;)B=So(B),H--;for(;L--;){if(Se===B||B!==null&&Se===B.alternate)break t;Se=So(Se),B=So(B)}Se=null}else Se=null;K!==null&&aE(ae,Y,K,Se,!1),Ce!==null&&lt!==null&&aE(ae,lt,Ce,Se,!0)}}e:{if(Y=$?Ri($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var _e=Ay;else if(Ht(Y))if(Ry)_e=EA;else{_e=vA;var Me=yA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&fl($.elementType)&&(_e=Ay):_e=_A;if(_e&&(_e=_e(i,$))){us(ae,_e,a,J);break e}Me&&Me(i,Y,$),i==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&Ys(Y,"number",Y.value)}switch(Me=$?Ri($):window,i){case"focusin":(Ht(Me)||Me.contentEditable==="true")&&(Ja=Me,df=$,wl=null);break;case"focusout":wl=df=Ja=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,Py(ae,a,J);break;case"selectionchange":if(bA)break;case"keydown":case"keyup":Py(ae,a,J)}var Te;if(Oi)e:{switch(i){case"compositionstart":var Re="onCompositionStart";break e;case"compositionend":Re="onCompositionEnd";break e;case"compositionupdate":Re="onCompositionUpdate";break e}Re=void 0}else Fe?W(i,a)&&(Re="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Re="onCompositionStart");Re&&(E&&a.locale!=="ko"&&(Fe||Re!=="onCompositionStart"?Re==="onCompositionEnd"&&Fe&&(Te=pl()):(Ni=J,Ks="value"in Ni?Ni.value:Ni.textContent,Fe=!0)),Me=yh($,Re),0<Me.length&&(Re=new vl(Re,i,null,a,J),ae.push({event:Re,listeners:Me}),Te?Re.data=Te:(Te=fe(a),Te!==null&&(Re.data=Te)))),(Te=v?Ft(i,a):He(i,a))&&(Re=yh($,"onBeforeInput"),0<Re.length&&(Me=new vl("onBeforeInput","beforeinput",null,a,J),ae.push({event:Me,listeners:Re}),Me.data=Te)),sR(ae,i,$,a,J)}sE(ae,s)})}function Wl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function yh(i,s){for(var a=s+"Capture",c=[];i!==null;){var f=i,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Xr(i,a),f!=null&&c.unshift(Wl(i,f,g)),f=Xr(i,s),f!=null&&c.push(Wl(i,f,g))),i.tag===3)return c;i=i.return}return[]}function So(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function aE(i,s,a,c,f){for(var g=s._reactName,T=[];a!==null&&a!==c;){var S=a,k=S.alternate,$=S.stateNode;if(S=S.tag,k!==null&&k===c)break;S!==5&&S!==26&&S!==27||$===null||(k=$,f?($=Xr(a,g),$!=null&&T.unshift(Wl(a,$,k))):f||($=Xr(a,g),$!=null&&T.push(Wl(a,$,k)))),a=a.return}T.length!==0&&i.push({event:s,listeners:T})}var lR=/\r\n?/g,cR=/\u0000|\uFFFD/g;function oE(i){return(typeof i=="string"?i:""+i).replace(lR,`
`).replace(cR,"")}function lE(i,s){return s=oE(s),oE(i)===s}function vh(){}function ot(i,s,a,c,f,g){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Xn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Xn(i,""+c);break;case"className":xi(i,"class",c);break;case"tabIndex":xi(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":xi(i,a,c);break;case"style":dl(i,c,g);break;case"data":if(s!=="object"){xi(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ha(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&ot(i,s,"name",f.name,f,null),ot(i,s,"formEncType",f.formEncType,f,null),ot(i,s,"formMethod",f.formMethod,f,null),ot(i,s,"formTarget",f.formTarget,f,null)):(ot(i,s,"encType",f.encType,f,null),ot(i,s,"method",f.method,f,null),ot(i,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Ha(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=vh);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Ha(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Le("beforetoggle",i),Le("toggle",i),$s(i,"popover",c);break;case"xlinkActuate":an(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":an(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":an(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":an(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":an(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":an(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":an(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":an(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":an(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":$s(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rf.get(a)||a,$s(i,a,c))}}function Mm(i,s,a,c,f,g){switch(a){case"style":dl(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Xn(i,c):(typeof c=="number"||typeof c=="bigint")&&Xn(i,""+c);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"onClick":c!=null&&(i.onclick=vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ua.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),g=i[Ot]||null,g=g!=null?g[a]:null,typeof g=="function"&&i.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,f);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):$s(i,a,c)}}}function un(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var c=!1,f=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(i,s,g,T,a,null)}}f&&ot(i,s,"srcSet",a.srcSet,a,null),c&&ot(i,s,"src",a.src,a,null);return;case"input":Le("invalid",i);var S=g=T=f=null,k=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var J=a[c];if(J!=null)switch(c){case"name":f=J;break;case"type":T=J;break;case"checked":k=J;break;case"defaultChecked":$=J;break;case"value":g=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:ot(i,s,c,J,a,null)}}Yr(i,g,S,k,$,T,f,!1),Fa(i);return;case"select":Le("invalid",i),c=T=g=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":g=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:ot(i,s,f,S,a,null)}s=g,a=T,i.multiple=!!c,s!=null?ss(i,!!c,s,!1):a!=null&&ss(i,!!c,a,!0);return;case"textarea":Le("invalid",i),g=f=c=null;for(T in a)if(a.hasOwnProperty(T)&&(S=a[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":f=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:ot(i,s,T,S,a,null)}Kr(i,c,f,g),Fa(i);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(c=a[k],c!=null))switch(k){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(i,s,k,c,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(c=0;c<Xl.length;c++)Le(Xl[c],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(i,s,$,c,a,null)}return;default:if(fl(s)){for(J in a)a.hasOwnProperty(J)&&(c=a[J],c!==void 0&&Mm(i,s,J,c,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(c=a[S],c!=null&&ot(i,s,S,c,a,null))}function uR(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,S=null,k=null,$=null,J=null;for(K in a){var ae=a[K];if(a.hasOwnProperty(K)&&ae!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":k=ae;default:c.hasOwnProperty(K)||ot(i,s,K,null,c,ae)}}for(var Y in c){var K=c[Y];if(ae=a[Y],c.hasOwnProperty(Y)&&(K!=null||ae!=null))switch(Y){case"type":g=K;break;case"name":f=K;break;case"checked":$=K;break;case"defaultChecked":J=K;break;case"value":T=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==ae&&ot(i,s,Y,K,c,ae)}}Un(i,T,S,k,$,J,g,f);return;case"select":K=T=S=Y=null;for(g in a)if(k=a[g],a.hasOwnProperty(g)&&k!=null)switch(g){case"value":break;case"multiple":K=k;default:c.hasOwnProperty(g)||ot(i,s,g,null,c,k)}for(f in c)if(g=c[f],k=a[f],c.hasOwnProperty(f)&&(g!=null||k!=null))switch(f){case"value":Y=g;break;case"defaultValue":S=g;break;case"multiple":T=g;default:g!==k&&ot(i,s,f,g,c,k)}s=S,a=T,c=K,Y!=null?ss(i,!!a,Y,!1):!!c!=!!a&&(s!=null?ss(i,!!a,s,!0):ss(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ot(i,s,S,null,c,f)}for(T in c)if(f=c[T],g=a[T],c.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&ot(i,s,T,f,c,g)}rt(i,Y,K);return;case"option":for(var Ce in a)if(Y=a[Ce],a.hasOwnProperty(Ce)&&Y!=null&&!c.hasOwnProperty(Ce))switch(Ce){case"selected":i.selected=!1;break;default:ot(i,s,Ce,null,c,Y)}for(k in c)if(Y=c[k],K=a[k],c.hasOwnProperty(k)&&Y!==K&&(Y!=null||K!=null))switch(k){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:ot(i,s,k,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Se in a)Y=a[Se],a.hasOwnProperty(Se)&&Y!=null&&!c.hasOwnProperty(Se)&&ot(i,s,Se,null,c,Y);for($ in c)if(Y=c[$],K=a[$],c.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:ot(i,s,$,Y,c,K)}return;default:if(fl(s)){for(var lt in a)Y=a[lt],a.hasOwnProperty(lt)&&Y!==void 0&&!c.hasOwnProperty(lt)&&Mm(i,s,lt,void 0,c,Y);for(J in c)Y=c[J],K=a[J],!c.hasOwnProperty(J)||Y===K||Y===void 0&&K===void 0||Mm(i,s,J,Y,c,K);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&ot(i,s,B,null,c,Y);for(ae in c)Y=c[ae],K=a[ae],!c.hasOwnProperty(ae)||Y===K||Y==null&&K==null||ot(i,s,ae,Y,c,K)}var Vm=null,Lm=null;function _h(i){return i.nodeType===9?i:i.ownerDocument}function cE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Um(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bm=null;function hR(){var i=window.event;return i&&i.type==="popstate"?i===Bm?!1:(Bm=i,!0):(Bm=null,!1)}var hE=typeof setTimeout=="function"?setTimeout:void 0,dR=typeof clearTimeout=="function"?clearTimeout:void 0,dE=typeof Promise=="function"?Promise:void 0,fR=typeof queueMicrotask=="function"?queueMicrotask:typeof dE<"u"?function(i){return dE.resolve(null).then(i).catch(mR)}:hE;function mR(i){setTimeout(function(){throw i})}function ur(i){return i==="head"}function fE(i,s){var a=s,c=0,f=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var T=i.ownerDocument;if(a&1&&Zl(T.documentElement),a&2&&Zl(T.body),a&4)for(a=T.head,Zl(a),T=a.firstChild;T;){var S=T.nextSibling,k=T.nodeName;T[Fr]||k==="SCRIPT"||k==="STYLE"||k==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=S}}if(f===0){i.removeChild(g),ac(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);ac(s)}function zm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Gs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function pR(i,s,a,c){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Fr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=pi(i.nextSibling),i===null)break}return null}function gR(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=pi(i.nextSibling),i===null))return null;return i}function qm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function yR(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function pi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Fm=null;function mE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function pE(i,s,a){switch(s=_h(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Zl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Gs(i)}var ai=new Map,gE=new Set;function Eh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ws=me.d;me.d={f:vR,r:_R,D:ER,C:TR,L:bR,m:wR,X:AR,S:SR,M:RR};function vR(){var i=ws.f(),s=hh();return i||s}function _R(i){var s=Ai(i);s!==null&&s.tag===5&&s.type==="form"?Mv(s):ws.r(i)}var Ao=typeof document>"u"?null:document;function yE(i,s,a){var c=Ao;if(c&&typeof s=="string"&&s){var f=Pt(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),gE.has(f)||(gE.add(f),i={rel:i,crossOrigin:a,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),un(s,"link",i),Nt(s),c.head.appendChild(s)))}}function ER(i){ws.D(i),yE("dns-prefetch",i,null)}function TR(i,s){ws.C(i,s),yE("preconnect",i,s)}function bR(i,s,a){ws.L(i,s,a);var c=Ao;if(c&&i&&s){var f='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Pt(a.imageSizes)+'"]')):f+='[href="'+Pt(i)+'"]';var g=f;switch(s){case"style":g=Ro(i);break;case"script":g=xo(i)}ai.has(g)||(i=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),ai.set(g,i),c.querySelector(f)!==null||s==="style"&&c.querySelector(Jl(g))||s==="script"&&c.querySelector(ec(g))||(s=c.createElement("link"),un(s,"link",i),Nt(s),c.head.appendChild(s)))}}function wR(i,s){ws.m(i,s);var a=Ao;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pt(c)+'"][href="'+Pt(i)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=xo(i)}if(!ai.has(g)&&(i=_({rel:"modulepreload",href:i},s),ai.set(g,i),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ec(g)))return}c=a.createElement("link"),un(c,"link",i),Nt(c),a.head.appendChild(c)}}}function SR(i,s,a){ws.S(i,s,a);var c=Ao;if(c&&i){var f=bn(c).hoistableStyles,g=Ro(i);s=s||"default";var T=f.get(g);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(Jl(g)))S.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":s},a),(a=ai.get(g))&&Hm(i,a);var k=T=c.createElement("link");Nt(k),un(k,"link",i),k._p=new Promise(function($,J){k.onload=$,k.onerror=J}),k.addEventListener("load",function(){S.loading|=1}),k.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Th(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:S},f.set(g,T)}}}function AR(i,s){ws.X(i,s);var a=Ao;if(a&&i){var c=bn(a).hoistableScripts,f=xo(i),g=c.get(f);g||(g=a.querySelector(ec(f)),g||(i=_({src:i,async:!0},s),(s=ai.get(f))&&Gm(i,s),g=a.createElement("script"),Nt(g),un(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function RR(i,s){ws.M(i,s);var a=Ao;if(a&&i){var c=bn(a).hoistableScripts,f=xo(i),g=c.get(f);g||(g=a.querySelector(ec(f)),g||(i=_({src:i,async:!0,type:"module"},s),(s=ai.get(f))&&Gm(i,s),g=a.createElement("script"),Nt(g),un(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function vE(i,s,a,c){var f=(f=de.current)?Eh(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ro(a.href),a=bn(f).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ro(a.href);var g=bn(f).hoistableStyles,T=g.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=f.querySelector(Jl(i)))&&!g._p&&(T.instance=g,T.state.loading=5),ai.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ai.set(i,a),g||xR(f,i,a,T.state))),s&&c===null)throw Error(r(528,""));return T}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xo(a),a=bn(f).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ro(i){return'href="'+Pt(i)+'"'}function Jl(i){return'link[rel="stylesheet"]['+i+"]"}function _E(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function xR(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),un(s,"link",a),Nt(s),i.head.appendChild(s))}function xo(i){return'[src="'+Pt(i)+'"]'}function ec(i){return"script[async]"+i}function EE(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(c)return s.instance=c,Nt(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Nt(c),un(c,"style",f),Th(c,a.precedence,i),s.instance=c;case"stylesheet":f=Ro(a.href);var g=i.querySelector(Jl(f));if(g)return s.state.loading|=4,s.instance=g,Nt(g),g;c=_E(a),(f=ai.get(f))&&Hm(c,f),g=(i.ownerDocument||i).createElement("link"),Nt(g);var T=g;return T._p=new Promise(function(S,k){T.onload=S,T.onerror=k}),un(g,"link",c),s.state.loading|=4,Th(g,a.precedence,i),s.instance=g;case"script":return g=xo(a.src),(f=i.querySelector(ec(g)))?(s.instance=f,Nt(f),f):(c=a,(f=ai.get(g))&&(c=_({},a),Gm(c,f)),i=i.ownerDocument||i,f=i.createElement("script"),Nt(f),un(f,"link",c),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Th(c,a.precedence,i));return s.instance}function Th(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===s)g=S;else if(g!==f)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Hm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Gm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var bh=null;function TE(i,s,a){if(bh===null){var c=new Map,f=bh=new Map;f.set(a,c)}else f=bh,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var g=a[f];if(!(g[Fr]||g[qt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var S=c.get(T);S?S.push(g):c.set(T,[g])}}return c}function bE(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function CR(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function wE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var tc=null;function NR(){}function IR(i,s,a){if(tc===null)throw Error(r(475));var c=tc;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Ro(a.href),g=i.querySelector(Jl(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=wh.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,Nt(g);return}g=i.ownerDocument||i,a=_E(a),(f=ai.get(f))&&Hm(a,f),g=g.createElement("link"),Nt(g);var T=g;T._p=new Promise(function(S,k){T.onload=S,T.onerror=k}),un(g,"link",a),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=wh.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function DR(){if(tc===null)throw Error(r(475));var i=tc;return i.stylesheets&&i.count===0&&$m(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&$m(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function wh(){if(this.count--,this.count===0){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Sh=null;function $m(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Sh=new Map,s.forEach(jR,i),Sh=null,wh.call(i))}function jR(i,s){if(!(s.state.loading&4)){var a=Sh.get(i);if(a)var c=a.get(null);else{a=new Map,Sh.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}f=s.instance,T=f.getAttribute("data-precedence"),g=a.get(T)||c,g===c&&a.set(null,f),a.set(T,f),this.count++,c=wh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var nc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function OR(i,s,a,c,f,g,T,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function SE(i,s,a,c,f,g,T,S,k,$,J,ae){return i=new OR(i,s,a,T,S,k,$,ae),s=1,g===!0&&(s|=24),g=zn(3,null,null,s),i.current=g,g.stateNode=i,s=xf(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:s},Df(g),i}function AE(i){return i?(i=io,i):io}function RE(i,s,a,c,f,g){f=AE(f),c.context===null?c.context=f:c.pendingContext=f,c=Ws(s),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Zs(i,c,s),a!==null&&($n(a,i,s),jl(a,i,s))}function xE(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Ym(i,s){xE(i,s),(i=i.alternate)&&xE(i,s)}function CE(i){if(i.tag===13){var s=no(i,67108864);s!==null&&$n(s,i,67108864),Ym(i,67108864)}}var Ah=!0;function PR(i,s,a,c){var f=X.T;X.T=null;var g=me.p;try{me.p=2,Km(i,s,a,c)}finally{me.p=g,X.T=f}}function kR(i,s,a,c){var f=X.T;X.T=null;var g=me.p;try{me.p=8,Km(i,s,a,c)}finally{me.p=g,X.T=f}}function Km(i,s,a,c){if(Ah){var f=Qm(c);if(f===null)km(i,s,c,Rh,a),IE(i,c);else if(VR(f,i,s,a,c))c.stopPropagation();else if(IE(i,c),s&4&&-1<MR.indexOf(i)){for(;f!==null;){var g=Ai(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=ui(g.pendingLanes);if(T!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var k=1<<31-mn(T);S.entanglements[1]|=k,T&=~k}Ui(g),(tt&6)===0&&(ch=rn()+500,Ql(0))}}break;case 13:S=no(g,2),S!==null&&$n(S,g,2),hh(),Ym(g,2)}if(g=Qm(c),g===null&&km(i,s,c,Rh,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else km(i,s,c,null,a)}}function Qm(i){return i=Wn(i),Xm(i)}var Rh=null;function Xm(i){if(Rh=null,i=ts(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Rh=i,null}function NE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ma()){case st:return 2;case Ne:return 8;case wi:case Lr:return 32;case zs:return 268435456;default:return 32}default:return 32}}var Wm=!1,hr=null,dr=null,fr=null,ic=new Map,sc=new Map,mr=[],MR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IE(i,s){switch(i){case"focusin":case"focusout":hr=null;break;case"dragenter":case"dragleave":dr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":ic.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":sc.delete(s.pointerId)}}function rc(i,s,a,c,f,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ai(s),s!==null&&CE(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function VR(i,s,a,c,f){switch(s){case"focusin":return hr=rc(hr,i,s,a,c,f),!0;case"dragenter":return dr=rc(dr,i,s,a,c,f),!0;case"mouseover":return fr=rc(fr,i,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return ic.set(g,rc(ic.get(g)||null,i,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,sc.set(g,rc(sc.get(g)||null,i,s,a,c,f)),!0}return!1}function DE(i){var s=ts(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){i.blockedOn=s,hu(i.priority,function(){if(a.tag===13){var c=Gn();c=qs(c);var f=no(a,c);f!==null&&$n(f,a,c),Ym(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function xh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Qm(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);rs=c,a.target.dispatchEvent(c),rs=null}else return s=Ai(a),s!==null&&CE(s),i.blockedOn=a,!1;s.shift()}return!0}function jE(i,s,a){xh(i)&&a.delete(s)}function LR(){Wm=!1,hr!==null&&xh(hr)&&(hr=null),dr!==null&&xh(dr)&&(dr=null),fr!==null&&xh(fr)&&(fr=null),ic.forEach(jE),sc.forEach(jE)}function Ch(i,s){i.blockedOn===s&&(i.blockedOn=null,Wm||(Wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,LR)))}var Nh=null;function OE(i){Nh!==i&&(Nh=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nh===i&&(Nh=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],f=i[s+2];if(typeof c!="function"){if(Xm(c||a)===null)continue;break}var g=Ai(a);g!==null&&(i.splice(s,3),s-=3,Xf(g,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function ac(i){function s(k){return Ch(k,i)}hr!==null&&Ch(hr,i),dr!==null&&Ch(dr,i),fr!==null&&Ch(fr,i),ic.forEach(s),sc.forEach(s);for(var a=0;a<mr.length;a++){var c=mr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<mr.length&&(a=mr[0],a.blockedOn===null);)DE(a),a.blockedOn===null&&mr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],T=f[Ot]||null;if(typeof g=="function")T||OE(a);else if(T){var S=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[Ot]||null)S=T.formAction;else if(Xm(f)!==null)continue}else S=T.action;typeof S=="function"?a[c+1]=S:(a.splice(c,3),c-=3),OE(a)}}}function Zm(i){this._internalRoot=i}Ih.prototype.render=Zm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,c=Gn();RE(a,c,i,s,null,null)},Ih.prototype.unmount=Zm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;RE(i.current,2,null,i,null,null),hh(),s[Qn]=null}};function Ih(i){this._internalRoot=i}Ih.prototype.unstable_scheduleHydration=function(i){if(i){var s=Fs();i={blockedOn:null,target:i,priority:s};for(var a=0;a<mr.length&&s!==0&&s<mr[a].priority;a++);mr.splice(a,0,i),a===0&&DE(i)}};var PE=e.version;if(PE!=="19.1.1")throw Error(r(527,PE,"19.1.1"));me.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=y(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var UR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dh.isDisabled&&Dh.supportsFiber)try{wt=Dh.inject(UR),et=Dh}catch{}}return lc.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,c="",f=Xv,g=Wv,T=Zv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=SE(i,1,!1,null,null,a,c,f,g,T,S,null),i[Qn]=s.current,Pm(i),new Zm(s)},lc.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var c=!1,f="",g=Xv,T=Wv,S=Zv,k=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(k=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),s=SE(i,1,!0,s,a??null,c,f,g,T,S,k,$),s.context=AE(null),a=s.current,c=Gn(),c=qs(c),f=Ws(c),f.callback=null,Zs(a,f,c),a=c,s.current.lanes=a,es(s,a),Ui(s),i[Qn]=s.current,Pm(i),new Ih(s)},lc.version="19.1.1",lc}var HE;function KR(){if(HE)return tp.exports;HE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tp.exports=YR(),tp.exports}var QR=KR();const XR=Kb(QR);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GE="popstate";function WR(n={}){function e(r,o){let{pathname:l,search:d,hash:m}=r.location;return Np("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:Dc(o)}return JR(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function yi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZR(){return Math.random().toString(36).substring(2,10)}function $E(n,e){return{usr:n.state,key:n.key,idx:e}}function Np(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:t,key:e&&e.key||r||ZR()}}function Dc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Go(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function JR(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,d=o.history,m="POP",y=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function b(){m="POP";let j=_(),U=j==null?null:j-p;p=j,y&&y({action:m,location:z.location,delta:U})}function w(j,U){m="PUSH";let G=Np(z.location,j,U);p=_()+1;let Q=$E(G,p),ie=z.createHref(G);try{d.pushState(Q,"",ie)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(ie)}l&&y&&y({action:m,location:z.location,delta:1})}function I(j,U){m="REPLACE";let G=Np(z.location,j,U);p=_();let Q=$E(G,p),ie=z.createHref(G);d.replaceState(Q,"",ie),l&&y&&y({action:m,location:z.location,delta:0})}function M(j){return ex(j)}let z={get action(){return m},get location(){return n(o,d)},listen(j){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(GE,b),y=j,()=>{o.removeEventListener(GE,b),y=null}},createHref(j){return e(o,j)},createURL:M,encodeLocation(j){let U=M(j);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:I,go(j){return d.go(j)}};return z}function ex(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Dc(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Xb(n,e,t="/"){return tx(n,e,t,!1)}function tx(n,e,t,r){let o=typeof e=="string"?Go(e):e,l=Is(o.pathname||"/",t);if(l==null)return null;let d=Wb(n);nx(d);let m=null;for(let y=0;m==null&&y<d.length;++y){let p=fx(l);m=hx(d[y],p,r)}return m}function Wb(n,e=[],t=[],r="",o=!1){let l=(d,m,y=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&y)return;Et(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let b=xs([r,_.relativePath]),w=t.concat(_);d.children&&d.children.length>0&&(Et(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Wb(d.children,e,w,b,y)),!(d.path==null&&!d.index)&&e.push({path:b,score:cx(b,d.index),routesMeta:w})};return n.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let y of Zb(d.path))l(d,m,!0,y)}),e}function Zb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let d=Zb(r.join("/")),m=[];return m.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&m.push(...d),m.map(y=>n.startsWith("/")&&y===""?"/":y)}function nx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ux(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ix=/^:[\w-]+$/,sx=3,rx=2,ax=1,ox=10,lx=-2,YE=n=>n==="*";function cx(n,e){let t=n.split("/"),r=t.length;return t.some(YE)&&(r+=lx),e&&(r+=rx),t.filter(o=>!YE(o)).reduce((o,l)=>o+(ix.test(l)?sx:l===""?ax:ox),r)}function ux(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function hx(n,e,t=!1){let{routesMeta:r}=n,o={},l="/",d=[];for(let m=0;m<r.length;++m){let y=r[m],p=m===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=td({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},_),w=y.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=td({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:xs([l,b.pathname]),pathnameBase:yx(xs([l,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(l=xs([l,b.pathnameBase]))}return d}function td(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=dx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:b},w)=>{if(_==="*"){let M=m[w]||"";d=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const I=m[w];return b&&!I?p[_]=void 0:p[_]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:d,pattern:n}}function dx(n,e=!1,t=!0){yi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,y)=>(r.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function fx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mx(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Go(n):n;return{pathname:t?t.startsWith("/")?t:px(t,e):e,search:vx(r),hash:_x(o)}}function px(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function rp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ug(n){let e=gx(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hg(n,e,t,r=!1){let o;typeof n=="string"?o=Go(n):(o={...n},Et(!o.pathname||!o.pathname.includes("?"),rp("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),rp("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),rp("#","search","hash",o)));let l=n===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!r&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}m=b>=0?e[b]:"/"}let y=mx(o,m),p=d&&d!=="/"&&d.endsWith("/"),_=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(p||_)&&(y.pathname+="/"),y}var xs=n=>n.join("/").replace(/\/\/+/g,"/"),yx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_x=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ex(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Jb=["POST","PUT","PATCH","DELETE"];new Set(Jb);var Tx=["GET",...Jb];new Set(Tx);var $o=q.createContext(null);$o.displayName="DataRouter";var Sd=q.createContext(null);Sd.displayName="DataRouterState";q.createContext(!1);var ew=q.createContext({isTransitioning:!1});ew.displayName="ViewTransition";var bx=q.createContext(new Map);bx.displayName="Fetchers";var wx=q.createContext(null);wx.displayName="Await";var _i=q.createContext(null);_i.displayName="Navigation";var Hc=q.createContext(null);Hc.displayName="Location";var Ei=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ei.displayName="Route";var dg=q.createContext(null);dg.displayName="RouteError";function Sx(n,{relative:e}={}){Et(Yo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(_i),{hash:o,pathname:l,search:d}=Gc(n,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:xs([t,l])),r.createHref({pathname:m,search:d,hash:o})}function Yo(){return q.useContext(Hc)!=null}function Qi(){return Et(Yo(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Hc).location}var tw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function nw(n){q.useContext(_i).static||q.useLayoutEffect(n)}function Ko(){let{isDataRoute:n}=q.useContext(Ei);return n?Ux():Ax()}function Ax(){Et(Yo(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext($o),{basename:e,navigator:t}=q.useContext(_i),{matches:r}=q.useContext(Ei),{pathname:o}=Qi(),l=JSON.stringify(ug(r)),d=q.useRef(!1);return nw(()=>{d.current=!0}),q.useCallback((y,p={})=>{if(yi(d.current,tw),!d.current)return;if(typeof y=="number"){t.go(y);return}let _=hg(y,JSON.parse(l),o,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:xs([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,o,n])}var Rx=q.createContext(null);function xx(n){let e=q.useContext(Ei).outlet;return e&&q.createElement(Rx.Provider,{value:n},e)}function Gc(n,{relative:e}={}){let{matches:t}=q.useContext(Ei),{pathname:r}=Qi(),o=JSON.stringify(ug(t));return q.useMemo(()=>hg(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function Cx(n,e){return iw(n,e)}function iw(n,e,t,r,o){Et(Yo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=q.useContext(_i),{matches:d}=q.useContext(Ei),m=d[d.length-1],y=m?m.params:{},p=m?m.pathname:"/",_=m?m.pathnameBase:"/",b=m&&m.route;{let G=b&&b.path||"";sw(p,!b||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let w=Qi(),I;if(e){let G=typeof e=="string"?Go(e):e;Et(_==="/"||G.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${G.pathname}" was given in the \`location\` prop.`),I=G}else I=w;let M=I.pathname||"/",z=M;if(_!=="/"){let G=_.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(G.length).join("/")}let j=Xb(n,{pathname:z});yi(b||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),yi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Ox(j&&j.map(G=>Object.assign({},G,{params:Object.assign({},y,G.params),pathname:xs([_,l.encodeLocation?l.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?_:xs([_,l.encodeLocation?l.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),d,t,r,o);return e&&U?q.createElement(Hc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},U):U}function Nx(){let n=Lx(),e=Ex(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,d)}var Ix=q.createElement(Nx,null),Dx=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?q.createElement(Ei.Provider,{value:this.props.routeContext},q.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jx({routeContext:n,match:e,children:t}){let r=q.useContext($o);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Ei.Provider,{value:n},t)}function Ox(n,e=[],t=null,r=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,d=t?.errors;if(d!=null){let p=l.findIndex(_=>_.route.id&&d?.[_.route.id]!==void 0);Et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let m=!1,y=-1;if(t)for(let p=0;p<l.length;p++){let _=l[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(y=p),_.route.id){let{loaderData:b,errors:w}=t,I=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!w||w[_.route.id]===void 0);if(_.route.lazy||I){m=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((p,_,b)=>{let w,I=!1,M=null,z=null;t&&(w=d&&_.route.id?d[_.route.id]:void 0,M=_.route.errorElement||Ix,m&&(y<0&&b===0?(sw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,z=null):y===b&&(I=!0,z=_.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,b+1)),U=()=>{let G;return w?G=M:I?G=z:_.route.Component?G=q.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=p,q.createElement(jx,{match:_,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:G})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?q.createElement(Dx,{location:t.location,revalidation:t.revalidation,component:M,error:w,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:r}):U()},null)}function fg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(n){let e=q.useContext($o);return Et(e,fg(n)),e}function kx(n){let e=q.useContext(Sd);return Et(e,fg(n)),e}function Mx(n){let e=q.useContext(Ei);return Et(e,fg(n)),e}function mg(n){let e=Mx(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Vx(){return mg("useRouteId")}function Lx(){let n=q.useContext(dg),e=kx("useRouteError"),t=mg("useRouteError");return n!==void 0?n:e.errors?.[t]}function Ux(){let{router:n}=Px("useNavigate"),e=mg("useNavigate"),t=q.useRef(!1);return nw(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{yi(t.current,tw),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var KE={};function sw(n,e,t){!e&&!KE[n]&&(KE[n]=!0,yi(!1,t))}q.memo(Bx);function Bx({routes:n,future:e,state:t,unstable_onError:r}){return iw(n,void 0,t,r,e)}function Ip({to:n,replace:e,state:t,relative:r}){Et(Yo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=q.useContext(_i);yi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(Ei),{pathname:d}=Qi(),m=Ko(),y=hg(n,ug(l),d,r==="path"),p=JSON.stringify(y);return q.useEffect(()=>{m(JSON.parse(p),{replace:e,state:t,relative:r})},[m,p,r,e,t]),null}function rw(n){return xx(n.context)}function Qe(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zx({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:l=!1}){Et(!Yo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof t=="string"&&(t=Go(t));let{pathname:y="/",search:p="",hash:_="",state:b=null,key:w="default"}=t,I=q.useMemo(()=>{let M=Is(y,d);return M==null?null:{location:{pathname:M,search:p,hash:_,state:b,key:w},navigationType:r}},[d,y,p,_,b,w,r]);return yi(I!=null,`<Router basename="${d}"> is not able to match the URL "${y}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:q.createElement(_i.Provider,{value:m},q.createElement(Hc.Provider,{children:e,value:I}))}function qx({children:n,location:e}){return Cx(Dp(n),e)}function Dp(n,e=[]){let t=[];return q.Children.forEach(n,(r,o)=>{if(!q.isValidElement(r))return;let l=[...e,o];if(r.type===q.Fragment){t.push.apply(t,Dp(r.props.children,l));return}Et(r.type===Qe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Dp(r.props.children,l)),t.push(d)}),t}var Fh="get",Hh="application/x-www-form-urlencoded";function Ad(n){return n!=null&&typeof n.tagName=="string"}function Fx(n){return Ad(n)&&n.tagName.toLowerCase()==="button"}function Hx(n){return Ad(n)&&n.tagName.toLowerCase()==="form"}function Gx(n){return Ad(n)&&n.tagName.toLowerCase()==="input"}function $x(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Yx(n,e){return n.button===0&&(!e||e==="_self")&&!$x(n)}var jh=null;function Kx(){if(jh===null)try{new FormData(document.createElement("form"),0),jh=!1}catch{jh=!0}return jh}var Qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ap(n){return n!=null&&!Qx.has(n)?(yi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Hh}"`),null):n}function Xx(n,e){let t,r,o,l,d;if(Hx(n)){let m=n.getAttribute("action");r=m?Is(m,e):null,t=n.getAttribute("method")||Fh,o=ap(n.getAttribute("enctype"))||Hh,l=new FormData(n)}else if(Fx(n)||Gx(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||m.getAttribute("action");if(r=y?Is(y,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||Fh,o=ap(n.getAttribute("formenctype"))||ap(m.getAttribute("enctype"))||Hh,l=new FormData(m,n),!Kx()){let{name:p,type:_,value:b}=n;if(_==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,b)}}else{if(Ad(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Fh,r=null,o=Hh,d=n}return l&&o==="text/plain"&&(d=l,l=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wx(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Is(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Zx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function e1(n,e,t){let r=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await Zx(l,t);return d.links?d.links():[]}return[]}));return s1(r.flat(1).filter(Jx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function QE(n,e,t,r,o,l){let d=(y,p)=>t[p]?y.route.id!==t[p].route.id:!0,m=(y,p)=>t[p].pathname!==y.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==y.params["*"];return l==="assets"?e.filter((y,p)=>d(y,p)||m(y,p)):l==="data"?e.filter((y,p)=>{let _=r.routes[y.route.id];if(!_||!_.hasLoader)return!1;if(d(y,p)||m(y,p))return!0;if(y.route.shouldRevalidate){let b=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function t1(n,e,{includeHydrateFallback:t}={}){return n1(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function n1(n){return[...new Set(n)]}function i1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function s1(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let l=JSON.stringify(i1(o));return t.has(l)||(t.add(l),r.push({key:l,link:o})),r},[])}function aw(){let n=q.useContext($o);return pg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r1(){let n=q.useContext(Sd);return pg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gg=q.createContext(void 0);gg.displayName="FrameworkContext";function ow(){let n=q.useContext(gg);return pg(n,"You must render this element inside a <HydratedRouter> element"),n}function a1(n,e){let t=q.useContext(gg),[r,o]=q.useState(!1),[l,d]=q.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,w=q.useRef(null);q.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let z=U=>{U.forEach(G=>{d(G.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[n]),q.useEffect(()=>{if(r){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[r]);let I=()=>{o(!0)},M=()=>{o(!1),d(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:cc(m,I),onBlur:cc(y,M),onMouseEnter:cc(p,I),onMouseLeave:cc(_,M),onTouchStart:cc(b,I)}]:[!1,w,{}]}function cc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function o1({page:n,...e}){let{router:t}=aw(),r=q.useMemo(()=>Xb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(c1,{page:n,matches:r,...e}):null}function l1(n){let{manifest:e,routeModules:t}=ow(),[r,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return e1(n,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[n,e,t]),r}function c1({page:n,matches:e,...t}){let r=Qi(),{manifest:o,routeModules:l}=ow(),{basename:d}=aw(),{loaderData:m,matches:y}=r1(),p=q.useMemo(()=>QE(n,e,y,o,r,"data"),[n,e,y,o,r]),_=q.useMemo(()=>QE(n,e,y,o,r,"assets"),[n,e,y,o,r]),b=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,z=!1;if(e.forEach(U=>{let G=o.routes[U.route.id];!G||!G.hasLoader||(!p.some(Q=>Q.route.id===U.route.id)&&U.route.id in m&&l[U.route.id]?.shouldRevalidate||G.hasClientLoader?z=!0:M.add(U.route.id))}),M.size===0)return[];let j=Wx(n,d,"data");return z&&M.size>0&&j.searchParams.set("_routes",e.filter(U=>M.has(U.route.id)).map(U=>U.route.id).join(",")),[j.pathname+j.search]},[d,m,r,o,p,e,n,l]),w=q.useMemo(()=>t1(_,o),[_,o]),I=l1(_);return q.createElement(q.Fragment,null,b.map(M=>q.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),w.map(M=>q.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),I.map(({key:M,link:z})=>q.createElement("link",{key:M,nonce:t.nonce,...z})))}function u1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var lw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lw&&(window.__reactRouterVersion="7.8.2")}catch{}function h1({basename:n,children:e,window:t}){let r=q.useRef();r.current==null&&(r.current=WR({window:t,v5Compat:!0}));let o=r.current,[l,d]=q.useState({action:o.action,location:o.location}),m=q.useCallback(y=>{q.startTransition(()=>d(y))},[d]);return q.useLayoutEffect(()=>o.listen(m),[o,m]),q.createElement(zx,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var cw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dn=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:l,replace:d,state:m,target:y,to:p,preventScrollReset:_,viewTransition:b,...w},I){let{basename:M}=q.useContext(_i),z=typeof p=="string"&&cw.test(p),j,U=!1;if(typeof p=="string"&&z&&(j=p,lw))try{let x=new URL(window.location.href),C=p.startsWith("//")?new URL(x.protocol+p):new URL(p),O=Is(C.pathname,M);C.origin===x.origin&&O!=null?p=O+C.search+C.hash:U=!0}catch{yi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=Sx(p,{relative:o}),[Q,ie,ee]=a1(r,w),te=m1(p,{replace:d,state:m,target:y,preventScrollReset:_,relative:o,viewTransition:b});function D(x){e&&e(x),x.defaultPrevented||te(x)}let R=q.createElement("a",{...w,...ee,href:j||G,onClick:U||l?e:D,ref:u1(I,ie),target:y,"data-discover":!z&&t==="render"?"true":void 0});return Q&&!z?q.createElement(q.Fragment,null,R,q.createElement(o1,{page:G})):R});Dn.displayName="Link";var ft=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:l,to:d,viewTransition:m,children:y,...p},_){let b=Gc(d,{relative:p.relative}),w=Qi(),I=q.useContext(Sd),{navigator:M,basename:z}=q.useContext(_i),j=I!=null&&_1(b)&&m===!0,U=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,G=w.pathname,Q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,U=U.toLowerCase()),Q&&z&&(Q=Is(Q,z)||Q);const ie=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ee=G===U||!o&&G.startsWith(U)&&G.charAt(ie)==="/",te=Q!=null&&(Q===U||!o&&Q.startsWith(U)&&Q.charAt(U.length)==="/"),D={isActive:ee,isPending:te,isTransitioning:j},R=ee?e:void 0,x;typeof r=="function"?x=r(D):x=[r,ee?"active":null,te?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(D):l;return q.createElement(Dn,{...p,"aria-current":R,className:x,ref:_,style:C,to:d,viewTransition:m},typeof y=="function"?y(D):y)});ft.displayName="NavLink";var d1=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:l,method:d=Fh,action:m,onSubmit:y,relative:p,preventScrollReset:_,viewTransition:b,...w},I)=>{let M=y1(),z=v1(m,{relative:p}),j=d.toLowerCase()==="get"?"get":"post",U=typeof m=="string"&&cw.test(m),G=Q=>{if(y&&y(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ee=ie?.getAttribute("formmethod")||d;M(ie||Q.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:o,state:l,relative:p,preventScrollReset:_,viewTransition:b})};return q.createElement("form",{ref:I,method:j,action:z,onSubmit:r?y:G,...w,"data-discover":!U&&n==="render"?"true":void 0})});d1.displayName="Form";function f1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uw(n){let e=q.useContext($o);return Et(e,f1(n)),e}function m1(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:l,viewTransition:d}={}){let m=Ko(),y=Qi(),p=Gc(n,{relative:l});return q.useCallback(_=>{if(Yx(_,e)){_.preventDefault();let b=t!==void 0?t:Dc(y)===Dc(p);m(n,{replace:b,state:r,preventScrollReset:o,relative:l,viewTransition:d})}},[y,m,p,t,r,e,n,o,l,d])}var p1=0,g1=()=>`__${String(++p1)}__`;function y1(){let{router:n}=uw("useSubmit"),{basename:e}=q.useContext(_i),t=Vx();return q.useCallback(async(r,o={})=>{let{action:l,method:d,encType:m,formData:y,body:p}=Xx(r,e);if(o.navigate===!1){let _=o.fetcherKey||g1();await n.fetch(_,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function v1(n,{relative:e}={}){let{basename:t}=q.useContext(_i),r=q.useContext(Ei);Et(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...Gc(n||".",{relative:e})},d=Qi();if(n==null){l.search=d.search;let m=new URLSearchParams(l.search),y=m.getAll("index");if(y.some(_=>_==="")){m.delete("index"),y.filter(b=>b).forEach(b=>m.append("index",b));let _=m.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xs([t,l.pathname])),Dc(l)}function _1(n,{relative:e}={}){let t=q.useContext(ew);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uw("useViewTransitionState"),o=Gc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Is(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=Is(t.nextLocation.pathname,r)||t.nextLocation.pathname;return td(o.pathname,d)!=null||td(o.pathname,l)!=null}var E1=Qb();const T1="/mariachis-uclatlan/assets/juliofrenk-xh5a58GC.jpg",b1="/mariachis-uclatlan/assets/brandonPhoto-BqVCcDZm.jpg",w1="/mariachis-uclatlan/assets/rosebowl25-BWtiugWu.jpg",S1=[T1,b1,w1];function A1({images:n=S1,autoPlayMs:e=5e3,showIndicators:t=!0,aspectRatio:r="16/9",className:o=""}){const[l,d]=q.useState(0),m=q.useRef(null),y=q.useRef(null),p=q.useRef(!1),_=q.useRef(null),b=q.useRef(0),w=n.length,I=q.useCallback(ie=>{d((ie%w+w)%w)},[w]),M=q.useCallback(()=>I(l+1),[I,l]),z=q.useCallback(()=>I(l-1),[I,l]);q.useEffect(()=>{const ie=ee=>{ee.key==="ArrowRight"&&M(),ee.key==="ArrowLeft"&&z()};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[M,z]),q.useEffect(()=>{if(!e)return;const ie=()=>{y.current!==null&&window.clearInterval(y.current),!p.current&&!document.hidden&&(y.current=window.setInterval(()=>{d(D=>(D+1)%w)},e))},ee=()=>{y.current!==null&&window.clearInterval(y.current),y.current=null};ie();const te=()=>document.hidden?ee():ie();return document.addEventListener("visibilitychange",te),()=>{document.removeEventListener("visibilitychange",te),ee()}},[e,w]);const j=ie=>{_.current=ie.touches[0].clientX,b.current=0},U=ie=>{if(_.current!==null&&(b.current=ie.touches[0].clientX-_.current,m.current)){const ee=b.current/m.current.clientWidth*100;m.current.style.transition="none",m.current.style.transform=`translateX(calc(${-l*100}% + ${ee}%))`}},G=()=>{m.current&&(m.current.style.transition="");const ie=b.current;_.current=null,b.current=0,Math.abs(ie)>40?ie<0?M():z():m.current&&(m.current.style.transform=`translateX(${-l*100}%)`)},Q=q.useMemo(()=>n.map((ie,ee)=>u.jsx("button",{"aria-label":`Go to slide ${ee+1}`,className:`carousel-indicator ${ee===l?"active":""}`,onClick:()=>I(ee)},ee)),[n,l,I]);return u.jsxs("div",{className:`carousel ${o}`,style:{"--carousel-aspect":r},onMouseEnter:()=>p.current=!0,onMouseLeave:()=>p.current=!1,"aria-roledescription":"carousel",children:[u.jsx("div",{className:"carousel-viewport",onTouchStart:j,onTouchMove:U,onTouchEnd:G,children:u.jsx("div",{ref:m,className:"carousel-track",style:{transform:`translateX(${-l*100}%)`},children:n.map((ie,ee)=>u.jsxs("div",{className:"carousel-slide",role:"group","aria-roledescription":"slide","aria-label":`${ee+1} of ${w}`,children:[u.jsx("img",{className:"carousel-image",src:ie,loading:"lazy",alt:`Slide ${ee+1}`}),u.jsx("div",{className:"carousel-gradient","aria-hidden":"true"})]},ee))})}),u.jsx("button",{className:"carousel-button prev",onClick:z,"aria-label":"Previous slide",children:"‹"}),u.jsx("button",{className:"carousel-button next",onClick:M,"aria-label":"Next slide",children:"›"}),t&&u.jsx("div",{className:"carousel-indicators",role:"tablist","aria-label":"Slide indicators",children:Q})]})}const XE=()=>u.jsxs("section",{className:"home stack",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{children:"Welcome to Mariachi de Uclatlán"}),u.jsx("p",{children:"Mariachi de Uclatlán is a student-led musical ensemble at UCLA dedicated to preserving, celebrating, and innovating the traditions of mariachi music. Our group provides students from diverse academic and cultural backgrounds with the opportunity to share the beauty of this art form with the UCLA community and beyond."}),u.jsx("p",{children:"As part of our mission, we honor the roots of Mexican music while bringing it into contemporary spaces. From classrooms to grand stages, Mariachi de Uclatlán fosters a spirit of community, cultural pride, and artistic excellence. Our members balance their roles as students and performers, keeping alive the traditions passed down through generations."}),u.jsx("p",{children:"Alongside our musicians, we are proud to collaborate with UCLA’s Ballet Folklórico, whose dancers bring vibrant movement and color to our performances. Together, music and dance tell stories that embody the energy and passion of Mexican culture, creating a complete and unforgettable experience for audiences."}),u.jsx("p",{children:"Founded in 1961, Mariachi de Uclatlán holds the distinction of being one of the first collegiate mariachi ensembles in the United States. Over six decades, we have built a legacy of performances, community outreach, and cultural preservation. We continue to grow as a family of students dedicated to sharing this living tradition with future generations. ¡Viva el mariachi!"})]}),u.jsx(A1,{})]});function R1(){return u.jsxs("div",{className:"about-page",children:[u.jsx("h1",{children:"About Us"}),u.jsx("p",{children:"Welcome to Mariachi de Uclatlán! We are UCLA's premier mariachi ensemble dedicated to preserving the rich traditions of Mexican music and culture. Founded in 1961, our ensemble has a long history of excellence and passion for mariachi music."}),u.jsx("h2",{children:"Watch a Recent Performance"}),u.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,marginBottom:"2rem"},children:u.jsx("iframe",{src:"https://www.youtube.com/embed/PVT9JTaZokk?start=6720",title:"Mariachi de Uclatlán Performance",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),u.jsx("h2",{children:"Our History"}),u.jsx("p",{children:"Mariachi de Uclatlán was established to provide students with an opportunity to experience and perform traditional Mexican music while also promoting cultural awareness. Over the years, we have participated in numerous events and competitions, showcasing the talent and dedication of our members."})]})}const x1=()=>u.jsxs("section",{className:"contact-page",children:[u.jsx("h1",{children:"Contact Us"}),u.jsxs("p",{className:"contact-intro",children:["Email us at"," ",u.jsx("a",{href:"mailto:uclatlan@ucla.edu",className:"contact-link",children:"uclatlan@ucla.edu"})," ","or choose an option below:"]}),u.jsxs("div",{className:"contact-actions",children:[u.jsx(Dn,{to:"/hire-us",className:"cta-button",children:"Hiring"}),u.jsx(Dn,{to:"/book-us",className:"cta-button",children:"Performance Inquiry"}),u.jsx(Dn,{to:"/join",className:"cta-button",children:"How to Join Our Group"}),u.jsx(Dn,{to:"/contact/form",className:"cta-button",children:"General Questions"})]})]}),C1=()=>{};var WE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},N1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],d=n[t++],m=n[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],d=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},dw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const l=n[o],d=o+1<n.length,m=d?n[o+1]:0,y=o+2<n.length,p=y?n[o+2]:0,_=l>>2,b=(l&3)<<4|m>>4;let w=(m&15)<<2|p>>6,I=p&63;y||(I=64,d||(w=64)),r.push(t[_],t[b],t[w],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(hw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):N1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],m=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const b=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||m==null||p==null||b==null)throw new I1;const w=l<<2|m>>4;if(r.push(w),p!==64){const I=m<<4&240|p>>2;if(r.push(I),b!==64){const M=p<<6&192|b;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class I1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const D1=function(n){const e=hw(n);return dw.encodeByteArray(e,!0)},nd=function(n){return D1(n).replace(/\./g,"")},fw=function(n){try{return dw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1=()=>j1().__FIREBASE_DEFAULTS__,P1=()=>{if(typeof process>"u"||typeof WE>"u")return;const n=WE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},k1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&fw(n[1]);return e&&JSON.parse(e)},Rd=()=>{try{return C1()||O1()||P1()||k1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},mw=n=>Rd()?.emulatorHosts?.[n],yg=n=>{const e=mw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},pw=()=>Rd()?.config,gw=n=>Rd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function xd(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[nd(JSON.stringify(t)),nd(JSON.stringify(d)),""].join(".")}const Tc={};function V1(){const n={prod:[],emulator:[]};for(const e of Object.keys(Tc))Tc[e]?n.emulator.push(e):n.prod.push(e);return n}function L1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZE=!1;function Cd(n,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||Tc[n]===e||Tc[n]||ZE)return;Tc[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=V1().prod.length>0;function d(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function y(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{ZE=!0,d()},w}function _(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=L1(r),I=t("text"),M=document.getElementById(I)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Q=w.element;m(Q),_(j,z);const ie=p();y(G,U),Q.append(G,M,j,ie),document.body.appendChild(Q)}l?(M.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function U1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function B1(){const n=Rd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function q1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function F1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H1(){const n=Tn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function G1(){return!B1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $1(){try{return typeof indexedDB=="object"}catch{return!1}}function Y1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1="FirebaseError";class Xi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=K1,Object.setPrototypeOf(this,Xi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$c.prototype.create)}}class $c{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?Q1(l,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Xi(o,m,r)}}function Q1(n,e){return n.replace(X1,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const X1=/\{\$([^}]+)}/g;function W1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Aa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=n[o],d=e[o];if(JE(l)&&JE(d)){if(!Aa(l,d))return!1}else if(l!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function JE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function mc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function pc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Z1(n,e){const t=new J1(n,e);return t.subscribe.bind(t)}class J1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");eC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=op),o.error===void 0&&(o.error=op),o.complete===void 0&&(o.complete=op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eC(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(n){return n&&n._delegate?n._delegate:n}class Ds{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new M1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iC(e))try{this.getOrInitializeService({instanceIdentifier:_a})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=_a){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_a){return this.instances.has(e)}getOptions(e=_a){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&d.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=_a){return this.component?this.component.multipleInstances?e:_a:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nC(n){return n===_a?void 0:n}function iC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new tC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const rC={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},aC=Ue.INFO,oC={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},lC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=oC[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=aC,this._logHandler=lC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const cC=(n,e)=>e.some(t=>n instanceof t);let eT,tT;function uC(){return eT||(eT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hC(){return tT||(tT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const vw=new WeakMap,jp=new WeakMap,_w=new WeakMap,lp=new WeakMap,_g=new WeakMap;function dC(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(wr(n.result)),o()},d=()=>{r(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&vw.set(t,n)}).catch(()=>{}),_g.set(e,n),e}function fC(n){if(jp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});jp.set(n,e)}let Op={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||_w.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mC(n){Op=n(Op)}function pC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cp(this),e,...t);return _w.set(r,e.sort?e.sort():[e]),wr(r)}:hC().includes(n)?function(...e){return n.apply(cp(this),e),wr(vw.get(this))}:function(...e){return wr(n.apply(cp(this),e))}}function gC(n){return typeof n=="function"?pC(n):(n instanceof IDBTransaction&&fC(n),cC(n,uC())?new Proxy(n,Op):n)}function wr(n){if(n instanceof IDBRequest)return dC(n);if(lp.has(n))return lp.get(n);const e=gC(n);return e!==n&&(lp.set(n,e),_g.set(e,n)),e}const cp=n=>_g.get(n);function yC(n,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const d=indexedDB.open(n,e),m=wr(d);return r&&d.addEventListener("upgradeneeded",y=>{r(wr(d.result),y.oldVersion,y.newVersion,wr(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const vC=["get","getKey","getAll","getAllKeys","count"],_C=["put","add","delete","clear"],up=new Map;function nT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=_C.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||vC.includes(t)))return;const l=async function(d,...m){const y=this.transaction(d,o?"readwrite":"readonly");let p=y.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&y.done]))[0]};return up.set(e,l),l}mC(n=>({...n,get:(e,t,r)=>nT(e,t)||n.get(e,t,r),has:(e,t)=>!!nT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function TC(n){return n.getComponent()?.type==="VERSION"}const Pp="@firebase/app",iT="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new vg("@firebase/app"),bC="@firebase/app-compat",wC="@firebase/analytics-compat",SC="@firebase/analytics",AC="@firebase/app-check-compat",RC="@firebase/app-check",xC="@firebase/auth",CC="@firebase/auth-compat",NC="@firebase/database",IC="@firebase/data-connect",DC="@firebase/database-compat",jC="@firebase/functions",OC="@firebase/functions-compat",PC="@firebase/installations",kC="@firebase/installations-compat",MC="@firebase/messaging",VC="@firebase/messaging-compat",LC="@firebase/performance",UC="@firebase/performance-compat",BC="@firebase/remote-config",zC="@firebase/remote-config-compat",qC="@firebase/storage",FC="@firebase/storage-compat",HC="@firebase/firestore",GC="@firebase/ai",$C="@firebase/firestore-compat",YC="firebase",KC="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",QC={[Pp]:"fire-core",[bC]:"fire-core-compat",[SC]:"fire-analytics",[wC]:"fire-analytics-compat",[RC]:"fire-app-check",[AC]:"fire-app-check-compat",[xC]:"fire-auth",[CC]:"fire-auth-compat",[NC]:"fire-rtdb",[IC]:"fire-data-connect",[DC]:"fire-rtdb-compat",[jC]:"fire-fn",[OC]:"fire-fn-compat",[PC]:"fire-iid",[kC]:"fire-iid-compat",[MC]:"fire-fcm",[VC]:"fire-fcm-compat",[LC]:"fire-perf",[UC]:"fire-perf-compat",[BC]:"fire-rc",[zC]:"fire-rc-compat",[qC]:"fire-gcs",[FC]:"fire-gcs-compat",[HC]:"fire-fst",[$C]:"fire-fst-compat",[GC]:"fire-vertex","fire-js":"fire-js",[YC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,XC=new Map,Mp=new Map;function sT(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function xr(n){const e=n.name;if(Mp.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,n);for(const t of jc.values())sT(t,n);for(const t of XC.values())sT(t,n);return!0}function Yc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function En(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Sr=new $c("app","Firebase",WC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Sr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ja=KC;function Ew(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:kp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw Sr.create("bad-app-name",{appName:String(o)});if(t||(t=pw()),!t)throw Sr.create("no-options");const l=jc.get(o);if(l){if(Aa(t,l.options)&&Aa(r,l.config))return l;throw Sr.create("duplicate-app",{appName:o})}const d=new sC(o);for(const y of Mp.values())d.addComponent(y);const m=new ZC(t,r,d);return jc.set(o,m),m}function Nd(n=kp){const e=jc.get(n);if(!e&&n===kp&&pw())return Ew();if(!e)throw Sr.create("no-app",{appName:n});return e}function rT(){return Array.from(jc.values())}function li(n,e,t){let r=QC[n]??n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(d.join(" "));return}xr(new Ds(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC="firebase-heartbeat-database",eN=1,Oc="firebase-heartbeat-store";let hp=null;function Tw(){return hp||(hp=yC(JC,eN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Oc)}catch(t){console.warn(t)}}}}).catch(n=>{throw Sr.create("idb-open",{originalErrorMessage:n.message})})),hp}async function tN(n){try{const t=(await Tw()).transaction(Oc),r=await t.objectStore(Oc).get(bw(n));return await t.done,r}catch(e){if(e instanceof Xi)js.warn(e.message);else{const t=Sr.create("idb-get",{originalErrorMessage:e?.message});js.warn(t.message)}}}async function aT(n,e){try{const r=(await Tw()).transaction(Oc,"readwrite");await r.objectStore(Oc).put(e,bw(n)),await r.done}catch(t){if(t instanceof Xi)js.warn(t.message);else{const r=Sr.create("idb-set",{originalErrorMessage:t?.message});js.warn(r.message)}}}function bw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=1024,iN=30;class sN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new aN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>iN){const o=oN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oT(),{heartbeatsToSend:t,unsentEntries:r}=rN(this._heartbeatsCache.heartbeats),o=nd(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return js.warn(e),""}}}function oT(){return new Date().toISOString().substring(0,10)}function rN(n,e=nN){const t=[];let r=n.slice();for(const o of n){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),lT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),lT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class aN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $1()?Y1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await tN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lT(n){return nd(JSON.stringify({version:2,heartbeats:n})).length}function oN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(n){xr(new Ds("platform-logger",e=>new EC(e),"PRIVATE")),xr(new Ds("heartbeat",e=>new sN(e),"PRIVATE")),li(Pp,iT,n),li(Pp,iT,"esm2020"),li("fire-js","")}lN("");function ww(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cN=ww,Sw=new $c("auth","Firebase",ww());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=new vg("@firebase/auth");function uN(n,...e){id.logLevel<=Ue.WARN&&id.warn(`Auth (${ja}): ${n}`,...e)}function Gh(n,...e){id.logLevel<=Ue.ERROR&&id.error(`Auth (${ja}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw Tg(n,...e)}function On(n,...e){return Tg(n,...e)}function Eg(n,e,t){const r={...cN(),[e]:t};return new $c("auth","Firebase",r).create(e,{appName:n.name})}function Fi(n){return Eg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hN(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ci(n,"argument-error"),Eg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Sw.create(n,...e)}function ve(n,e,...t){if(!n)throw Tg(e,...t)}function As(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Gh(e),new Error(e)}function Os(n,e){n||As(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){return typeof self<"u"&&self.location?.href||""}function Aw(){return cT()==="http:"||cT()==="https:"}function cT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Aw()||q1()||"connection"in navigator)?navigator.onLine:!0}function fN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=U1()||F1()}get(){return dN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){Os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],gN=new Kc(3e4,6e4);function Mn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Vn(n,e,t,r,o={}){return xw(n,o,async()=>{let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});const m=Qo({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:y,...l};return z1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(p.credentials="include"),Rw.fetch()(await Cw(n,n.config.apiHost,t,m),p)})}async function xw(n,e,t){n._canInitEmulator=!1;const r={...mN,...e};try{const o=new vN(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw gc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[y,p]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw gc(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw gc(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw gc(n,"user-disabled",d);const _=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Eg(n,_,p);ci(n,_)}}catch(o){if(o instanceof Xi)throw o;ci(n,"network-request-failed",{message:String(o)})}}async function kr(n,e,t,r,o={}){const l=await Vn(n,e,t,r,o);return"mfaPendingCredential"in l&&ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function Cw(n,e,t,r){const o=`${e}${t}?${r}`,l=n,d=l.config.emulator?bg(n.config,o):`${n.config.apiScheme}://${o}`;return pN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function yN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(On(this.auth,"network-request-failed")),gN.get())})}}function gc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=On(n,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(n){return n!==void 0&&n.getResponse!==void 0}function hT(n){return n!==void 0&&n.enterprise!==void 0}class Nw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return yN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(n){return(await Vn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Iw(n,e){return Vn(n,"GET","/v2/recaptchaConfig",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(n,e){return Vn(n,"POST","/v1/accounts:delete",e)}async function sd(n,e){return Vn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dw(n,e=!1){const t=We(n),r=await t.getIdToken(e),o=wg(r);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:r,authTime:bc(dp(o.auth_time)),issuedAtTime:bc(dp(o.iat)),expirationTime:bc(dp(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function dp(n){return Number(n)*1e3}function wg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=fw(t);return o?JSON.parse(o):(Gh("Failed to decode base64 JWT payload"),null)}catch(o){return Gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function dT(n){const e=wg(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Xi&&TN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function TN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bc(this.lastLoginAt),this.creationTime=bc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(n){const e=n.auth,t=await n.getIdToken(),r=await Ra(n,sd(e,{idToken:t}));ve(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?jw(o.providerUserInfo):[],d=SN(n.providerData,l),m=n.isAnonymous,y=!(n.email&&o.passwordHash)&&!d?.length,p=m?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function wN(n){const e=We(n);await rd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function SN(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function jw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e){const t=await xw(n,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,d=await Cw(n,o,"/v1/token",`key=${l}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:r};return n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(y.credentials="include"),Rw.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function RN(n,e){return Vn(n,"POST","/v2/accounts:revokeToken",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=dT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await AN(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,d=new Oo;return r&&(ve(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(ve(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oo,this.toJSON())}_performRefresh(){return As("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class gi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new bN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Ra(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Dw(this,e)}reload(){return wN(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new gi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await rd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Fi(this.auth));const e=await this.getIdToken();return await Ra(this,EN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:I,providerData:M,stsTokenManager:z}=t;ve(b&&z,e,"internal-error");const j=Oo.fromJSON(this.name,z);ve(typeof b=="string",e,"internal-error"),gr(r,e.name),gr(o,e.name),ve(typeof w=="boolean",e,"internal-error"),ve(typeof I=="boolean",e,"internal-error"),gr(l,e.name),gr(d,e.name),gr(m,e.name),gr(y,e.name),gr(p,e.name),gr(_,e.name);const U=new gi({uid:b,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:I,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:p,lastLoginAt:_});return M&&Array.isArray(M)&&(U.providerData=M.map(G=>({...G}))),y&&(U._redirectEventId=y),U}static async _fromIdTokenResponse(e,t,r=!1){const o=new Oo;o.updateFromServerResponse(t);const l=new gi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await rd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?jw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new Oo;m.updateFromIdToken(r);const y=new gi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function Rs(n){Os(n instanceof Function,"Expected a class definition");let e=fT.get(n);return e?(Os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ow.type="NONE";const mT=Ow;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n,e,t){return`firebase:${n}:${e}:${t}`}class Po{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=$h(this.userKey,o.apiKey,l),this.fullPersistenceKey=$h("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await sd(this.auth,{idToken:e}).catch(()=>{});return t?gi._fromGetAccountInfoResponse(this.auth,t,e):null}return gi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Po(Rs(mT),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||Rs(mT);const d=$h(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const _=await p._get(d);if(_){let b;if(typeof _=="string"){const w=await sd(e,{idToken:_}).catch(()=>{});if(!w)break;b=await gi._fromGetAccountInfoResponse(e,w,_)}else b=gi._fromJSON(e,_);p!==l&&(m=b),l=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Po(l,e,r):(l=y[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(d)}catch{}})),new Po(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Vw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Uw(e))return"Blackberry";if(Bw(e))return"Webos";if(kw(e))return"Safari";if((e.includes("chrome/")||Mw(e))&&!e.includes("edge/"))return"Chrome";if(Lw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Pw(n=Tn()){return/firefox\//i.test(n)}function kw(n=Tn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Mw(n=Tn()){return/crios\//i.test(n)}function Vw(n=Tn()){return/iemobile/i.test(n)}function Lw(n=Tn()){return/android/i.test(n)}function Uw(n=Tn()){return/blackberry/i.test(n)}function Bw(n=Tn()){return/webos/i.test(n)}function Sg(n=Tn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function xN(n=Tn()){return Sg(n)&&!!window.navigator?.standalone}function CN(){return H1()&&document.documentMode===10}function zw(n=Tn()){return Sg(n)||Lw(n)||Bw(n)||Uw(n)||/windows phone/i.test(n)||Vw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(n,e=[]){let t;switch(n){case"Browser":t=pT(Tn());break;case"Worker":t=`${pT(Tn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ja}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((d,m)=>{try{const y=e(l);d(y)}catch(y){m(y)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(n,e={}){return Vn(n,"GET","/v2/passwordPolicy",Mn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=6;class jN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??DN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gT(this),this.idTokenSubscription=new gT(this),this.beforeStateQueue=new NN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await sd(this,{idToken:e}),r=await gi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(En(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await rd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Fi(this));const t=e?We(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Fi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Fi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IN(this),t=new jN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $c("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await RN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rs(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,r,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&uN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Ti(n){return We(n)}class gT{constructor(e){this.auth=e,this.observer=null,this.addObserver=Z1(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PN(n){Qc=n}function Ag(n){return Qc.loadJS(n)}function kN(){return Qc.recaptchaV2Script}function MN(){return Qc.recaptchaEnterpriseScript}function VN(){return Qc.gapiScript}function Fw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=500,UN=6e4,Oh=1e12;class BN{constructor(e){this.auth=e,this.counter=Oh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new FN(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||Oh;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||Oh;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||Oh;return this._widgets.get(t)?.execute(),""}}class zN{constructor(){this.enterprise=new qN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class FN{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ve(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=HN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},UN)},LN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function HN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const GN="recaptcha-enterprise",wc="NO_RECAPTCHA";class Hw{constructor(e){this.type=GN,this.auth=Ti(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{Iw(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new Nw(y);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,d(p.siteKey)}}).catch(y=>{m(y)})})}function o(l,d,m){const y=window.grecaptcha;hT(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(p=>{d(p)}).catch(()=>{d(wc)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new zN().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{r(this.auth).then(m=>{if(!t&&hT(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=MN();y.length!==0&&(y+=m),Ag(y).then(()=>{o(m,l,d)}).catch(p=>{d(p)})}}).catch(m=>{d(m)})})}}async function uc(n,e,t,r=!1,o=!1){const l=new Hw(n);let d;if(o)d=wc;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function ko(n,e,t,r,o){if(o==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await uc(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await uc(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(l)});else if(o==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await uc(n,e,t);return r(n,l).catch(async d=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await uc(n,e,t,!1,!0);return r(n,m)}return Promise.reject(d)})}else{const l=await uc(n,e,t,!1,!0);return r(n,l)}else return Promise.reject(o+" provider is not supported.")}async function $N(n){const e=Ti(n),t=await Iw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Nw(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Hw(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YN(n,e){const t=Yc(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Aa(l,e??{}))return o;ci(o,"already-initialized")}return t.initialize({options:e})}function KN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function QN(n,e,t){const r=Ti(n);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=Gw(e),{host:d,port:m}=XN(e),y=m===null?"":`:${m}`,p={url:`${l}//${d}${y}/`},_=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Aa(p,r.config.emulator)&&Aa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Vs(d)?(xd(`${l}//${d}${y}`),Cd("Auth",!0)):WN()}function Gw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function XN(n){const e=Gw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:yT(r.substr(l.length+1))}}else{const[l,d]=r.split(":");return{host:l,port:yT(d)}}}function yT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function WN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Id{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,t){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function ZN(n,e){return Vn(n,"POST","/v1/accounts:update",e)}async function JN(n,e){return Vn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(n,e){return kr(n,"POST","/v1/accounts:signInWithPassword",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tI(n,e){return kr(n,"POST","/v1/accounts:signInWithEmailLink",Mn(n,e))}async function nI(n,e){return kr(n,"POST","/v1/accounts:signInWithEmailLink",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Id{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ko(e,t,"signInWithPassword",eI,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tI(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ko(e,r,"signUpPassword",JN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return nI(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mo(n,e){return kr(n,"POST","/v1/accounts:signInWithIdp",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI="http://localhost";class xa extends Id{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...l}=t;if(!r||!o)return null;const d=new xa(r,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return Mo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Mo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Mo(e,t)}buildRequest(){const e={requestUri:iI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Qo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(n,e){return Vn(n,"POST","/v1/accounts:sendVerificationCode",Mn(n,e))}async function sI(n,e){return kr(n,"POST","/v1/accounts:signInWithPhoneNumber",Mn(n,e))}async function rI(n,e){const t=await kr(n,"POST","/v1/accounts:signInWithPhoneNumber",Mn(n,e));if(t.temporaryProof)throw gc(n,"account-exists-with-different-credential",t);return t}const aI={USER_NOT_FOUND:"user-not-found"};async function oI(n,e){const t={...e,operation:"REAUTH"};return kr(n,"POST","/v1/accounts:signInWithPhoneNumber",Mn(n,t),aI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends Id{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Sc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Sc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return sI(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return rI(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return oI(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:o,temporaryProof:l}=e;return!r&&!t&&!o&&!l?null:new Sc({verificationId:t,verificationCode:r,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cI(n){const e=mc(pc(n)).link,t=e?mc(pc(e)).deep_link_id:null,r=mc(pc(n)).deep_link_id;return(r?mc(pc(r)).link:null)||r||t||e||n}class Rg{constructor(e){const t=mc(pc(e)),r=t.apiKey??null,o=t.oobCode??null,l=lI(t.mode??null);ve(r&&o&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=cI(e);try{return new Rg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(){this.providerId=Oa.PROVIDER_ID}static credential(e,t){return Pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Rg.parseLink(t);return ve(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}Oa.PROVIDER_ID="password";Oa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Oa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Xc{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.FACEBOOK_SIGN_IN_METHOD="facebook.com";vr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Xc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return zi.credential(t,r)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Xc{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _r.credential(e.oauthAccessToken)}catch{return null}}}_r.GITHUB_SIGN_IN_METHOD="github.com";_r.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends Xc{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Er.credential(t,r)}catch{return null}}}Er.TWITTER_SIGN_IN_METHOD="twitter.com";Er.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(n,e){return kr(n,"POST","/v1/accounts:signUp",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await gi._fromIdTokenResponse(e,r,o),d=_T(r);return new Ca({user:l,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=_T(r);return new Ca({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function _T(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad extends Xi{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new ad(e,t,r,o)}}function $w(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ad._fromErrorAndOperation(n,l,e,r):l})}async function hI(n,e,t=!1){const r=await Ra(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ca._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(n,e,t=!1){const{auth:r}=n;if(En(r.app))return Promise.reject(Fi(r));const o="reauthenticate";try{const l=await Ra(n,$w(r,o,e,n),t);ve(l.idToken,r,"internal-error");const d=wg(l.idToken);ve(d,r,"internal-error");const{sub:m}=d;return ve(n.uid===m,r,"user-mismatch"),Ca._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&ci(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kw(n,e,t=!1){if(En(n.app))return Promise.reject(Fi(n));const r="signIn",o=await $w(n,r,e),l=await Ca._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(l.user),l}async function Qw(n,e){return Kw(Ti(n),e)}async function dI(n,e){return Yw(We(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xw(n){const e=Ti(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fI(n,e,t){if(En(n.app))return Promise.reject(Fi(n));const r=Ti(n),d=await ko(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uI,"EMAIL_PASSWORD_PROVIDER").catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Xw(n),y}),m=await Ca._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function mI(n,e,t){return En(n.app)?Promise.reject(Fi(n)):Qw(We(n),Oa.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Xw(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(n,e){return Vn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=We(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Ra(r,pI(r.auth,l));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const m=r.providerData.find(({providerId:y})=>y==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function yI(n,e){return vI(We(n),null,e)}async function vI(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const d=await Ra(n,ZN(r,l));await n._updateTokensIfNecessary(d,!0)}function _I(n,e,t,r){return We(n).onIdTokenChanged(e,t,r)}function EI(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function Dd(n,e,t,r){return We(n).onAuthStateChanged(e,t,r)}function TI(n){return We(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n,e){return Vn(n,"POST","/v2/accounts/mfaEnrollment:start",Mn(n,e))}const od="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(od,"1"),this.storage.removeItem(od),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI=1e3,wI=10;class Zw extends Ww{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=zw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,y)=>{this.notifyListeners(d,y)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},l=this.storage.getItem(r);CN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,wI):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},bI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Zw.type="LOCAL";const SI=Zw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw extends Ww{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jw.type="SESSION";const e0=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new jd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async p=>p(t.origin,l)),y=await AI(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,y)=>{const p=Cg("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(w.data.response);break;default:clearTimeout(_),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return window}function xI(n){Ut().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}async function CI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NI(){return navigator?.serviceWorker?.controller||null}function II(){return Ng()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="firebaseLocalStorageDb",DI=1,ld="firebaseLocalStorage",n0="fbase_key";class Wc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Od(n,e){return n.transaction([ld],e?"readwrite":"readonly").objectStore(ld)}function jI(){const n=indexedDB.deleteDatabase(t0);return new Wc(n).toPromise()}function Up(){const n=indexedDB.open(t0,DI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(ld,{keyPath:n0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(ld)?e(r):(r.close(),await jI(),e(await Up()))})})}async function TT(n,e,t){const r=Od(n,!0).put({[n0]:e,value:t});return new Wc(r).toPromise()}async function OI(n,e){const t=Od(n,!1).get(e),r=await new Wc(t).toPromise();return r===void 0?null:r.value}function bT(n,e){const t=Od(n,!0).delete(e);return new Wc(t).toPromise()}const PI=800,kI=3;class i0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>kI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ng()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jd._getInstance(II()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await CI(),!this.activeServiceWorker)return;this.sender=new RI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await TT(e,od,"1"),await bT(e,od),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>OI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Od(o,!1).getAll();return new Wc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}i0.type="LOCAL";const MI=i0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n,e){return Vn(n,"POST","/v2/accounts/mfaSignIn:start",Mn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=Fw("rcb"),VI=new Kc(3e4,6e4);class LI{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ut().grecaptcha?.render}load(e,t=""){return ve(UI(t),e,"argument-error"),this.shouldResolveImmediately(t)&&uT(Ut().grecaptcha)?Promise.resolve(Ut().grecaptcha):new Promise((r,o)=>{const l=Ut().setTimeout(()=>{o(On(e,"network-request-failed"))},VI.get());Ut()[fp]=()=>{Ut().clearTimeout(l),delete Ut()[fp];const m=Ut().grecaptcha;if(!m||!uT(m)){o(On(e,"internal-error"));return}const y=m.render;m.render=(p,_)=>{const b=y(p,_);return this.counter++,b},this.hostLanguage=t,r(m)};const d=`${kN()}?${Qo({onload:fp,render:"explicit",hl:t})}`;Ag(d).catch(()=>{clearTimeout(l),o(On(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Ut().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function UI(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class BI{async load(e){return new BN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="recaptcha",zI={theme:"light",type:"image"};class Bp{constructor(e,t,r={...zI}){this.parameters=r,this.type=Ac,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ti(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;ve(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new BI:new LI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Ut()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ve(Aw()&&!Ng(),this.auth,"internal-error"),await qI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await _N(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qI(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Sc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function s0(n,e,t){if(En(n.app))return Promise.reject(Fi(n));const r=Ti(n),o=await HI(r,e,We(t));return new FI(o,l=>Qw(r,l))}async function HI(n,e,t){if(!n._getRecaptchaConfig())try{await $N(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const o=r.session;if("phoneNumber"in r){ve(o.type==="enroll",n,"internal-error");const l={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ko(n,l,"mfaSmsEnrollment",async(p,_)=>{if(_.phoneEnrollmentInfo.captchaResponse===wc){ve(t?.type===Ac,p,"argument-error");const b=await mp(p,_,t);return ET(p,b)}return ET(p,_)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{ve(o.type==="signin",n,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;ve(l,n,"missing-multi-factor-info");const d={mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ko(n,d,"mfaSmsSignIn",async(_,b)=>{if(b.phoneSignInInfo.captchaResponse===wc){ve(t?.type===Ac,_,"argument-error");const w=await mp(_,b,t);return wT(_,w)}return wT(_,b)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ko(n,o,"sendVerificationCode",async(y,p)=>{if(p.captchaResponse===wc){ve(t?.type===Ac,y,"argument-error");const _=await mp(y,p,t);return vT(y,_)}return vT(y,p)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).sessionInfo}}finally{t?._reset()}}async function mp(n,e,t){ve(t.type===Ac,n,"argument-error");const r=await t.verify();ve(typeof r=="string",n,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,m=o.phoneEnrollmentInfo.clientType,y=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:d,clientType:m,recaptchaVersion:y}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,m=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:d,recaptchaVersion:m}}),o}else return Object.assign(o,{recaptchaToken:r}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e){return e?Rs(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Id{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function GI(n){return Kw(n.auth,new Ig(n),n.bypassAuthState)}function $I(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),Yw(t,new Ig(n),n.bypassAuthState)}async function YI(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),hI(t,new Ig(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return GI;case"linkViaPopup":case"linkViaRedirect":return YI;case"reauthViaPopup":case"reauthViaRedirect":return $I;default:ci(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI=new Kc(2e3,1e4);async function o0(n,e,t){if(En(n.app))return Promise.reject(On(n,"operation-not-supported-in-this-environment"));const r=Ti(n);hN(n,e,xg);const o=r0(r,t);return new Ea(r,"signInViaPopup",e,o).executeNotNull()}class Ea extends a0{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,Ea.currentPopupAction&&Ea.currentPopupAction.cancel(),Ea.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(On(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(On(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ea.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(On(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KI.get())};e()}}Ea.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QI="pendingRedirect",Yh=new Map;class XI extends a0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yh.get(this.auth._key());if(!e){try{const r=await WI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yh.set(this.auth._key(),e)}return this.bypassAuthState||Yh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WI(n,e){const t=eD(e),r=JI(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function ZI(n,e){Yh.set(n._key(),e)}function JI(n){return Rs(n._redirectPersistence)}function eD(n){return $h(QI,n.config.apiKey,n.name)}async function tD(n,e,t=!1){if(En(n.app))return Promise.reject(Fi(n));const r=Ti(n),o=r0(r,e),d=await new XI(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=600*1e3;class iD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!l0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(On(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ST(e))}saveEventToCache(e){this.cachedEventUids.add(ST(e)),this.lastProcessedEventTime=Date.now()}}function ST(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function l0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function sD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return l0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rD(n,e={}){return Vn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oD=/^https?/;async function lD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rD(n);for(const t of e)try{if(cD(t))return}catch{}ci(n,"unauthorized-domain")}function cD(n){const e=Vp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!oD.test(t))return!1;if(aD.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=new Kc(3e4,6e4);function AT(){const n=Ut().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function hD(n){return new Promise((e,t)=>{function r(){AT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AT(),t(On(n,"network-request-failed"))},timeout:uD.get()})}if(Ut().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ut().gapi?.load)r();else{const o=Fw("iframefcb");return Ut()[o]=()=>{gapi.load?r():t(On(n,"network-request-failed"))},Ag(`${VN()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function dD(n){return Kh=Kh||hD(n),Kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fD=new Kc(5e3,15e3),mD="__/auth/iframe",pD="emulator/auth/iframe",gD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vD(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bg(e,pD):`https://${n.config.authDomain}/${mD}`,r={apiKey:e.apiKey,appName:n.name,v:ja},o=yD.get(n.config.apiHost);o&&(r.eid=o);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Qo(r).slice(1)}`}async function _D(n){const e=await dD(n),t=Ut().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:vD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gD,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const d=On(n,"network-request-failed"),m=Ut().setTimeout(()=>{l(d)},fD.get());function y(){Ut().clearTimeout(m),o(r)}r.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},TD=500,bD=600,wD="_blank",SD="http://localhost";class RT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function AD(n,e,t,r=TD,o=bD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y={...ED,width:r.toString(),height:o.toString(),top:l,left:d},p=Tn().toLowerCase();t&&(m=Mw(p)?wD:t),Pw(p)&&(e=e||SD,y.scrollbars="yes");const _=Object.entries(y).reduce((w,[I,M])=>`${w}${I}=${M},`,"");if(xN(p)&&m!=="_self")return RD(e||"",m),new RT(null);const b=window.open(e||"",m,_);ve(b,n,"popup-blocked");try{b.focus()}catch{}return new RT(b)}function RD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="__/auth/handler",CD="emulator/auth/handler",ND=encodeURIComponent("fac");async function xT(n,e,t,r,o,l){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:ja,eventId:o};if(e instanceof xg){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",W1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Xc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const y=await n._getAppCheckToken(),p=y?`#${ND}=${encodeURIComponent(y)}`:"";return`${ID(n)}?${Qo(m).slice(1)}${p}`}function ID({config:n}){return n.emulator?bg(n,CD):`https://${n.authDomain}/${xD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class DD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=e0,this._completeRedirectFn=tD,this._overrideRedirectResult=ZI}async _openPopup(e,t,r,o){Os(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await xT(e,t,r,Vp(),o);return AD(e,l,Cg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await xT(e,t,r,Vp(),o);return xI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Os(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await _D(e),r=new iD(e);return t.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},o=>{const l=o?.[0]?.[pp];l!==void 0&&t(!!l),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=lD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return zw()||kw()||Sg()}}const jD=DD;var CT="@firebase/auth",NT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kD(n){xr(new Ds("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;ve(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qw(n)},p=new ON(r,o,l,y);return KN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),xr(new Ds("auth-internal",e=>{const t=Ti(e.getProvider("auth").getImmediate());return(r=>new OD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(CT,NT,PD(n)),li(CT,NT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=300,VD=gw("authIdTokenMaxAge")||MD;let IT=null;const LD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>VD)return;const o=t?.token;IT!==o&&(IT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function UD(n=Nd()){const e=Yc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=YN(n,{popupRedirectResolver:jD,persistence:[MI,SI,e0]}),r=gw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const d=LD(l.toString());EI(t,d,()=>d(t.currentUser)),_I(t,m=>d(m))}}const o=mw("auth");return o&&QN(t,`http://${o}`),t}function BD(){return document.getElementsByTagName("head")?.[0]??document}PN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const l=On("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",BD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kD("Browser");var zD="firebase",qD="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(zD,qD,"app");var DT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,c0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function x(){}x.prototype=R.prototype,D.D=R.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(C,O,V){for(var N=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)N[Oe-2]=arguments[Oe];return R.prototype[O].apply(C,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,x){x||(x=0);var C=Array(16);if(typeof R=="string")for(var O=0;16>O;++O)C[O]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(O=0;16>O;++O)C[O]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=D.g[0],x=D.g[1],O=D.g[2];var V=D.g[3],N=R+(V^x&(O^V))+C[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[1]+3905402710&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[2]+606105819&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[3]+3250441966&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[5]+1200080426&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[6]+2821735955&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[7]+4249261313&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[9]+2336552879&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[10]+4294925233&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[11]+2304563134&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[13]+4254626195&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[14]+2792965006&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[15]+1236535329&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(O^V&(x^O))+C[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[6]+3225465664&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[11]+643717713&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[0]+3921069994&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[10]+38016083&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[15]+3634488961&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[4]+3889429448&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[14]+3275163606&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[3]+4107603335&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[8]+1163531501&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[2]+4243563512&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[7]+1735328473&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[12]+2368359562&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(x^O^V)+C[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[8]+2272392833&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[11]+1839030562&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[14]+4259657740&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[4]+1272893353&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[7]+4139469664&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[10]+3200236656&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[0]+3936430074&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[3]+3572445317&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[6]+76029189&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[12]+3873151461&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[15]+530742520&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[2]+3299628645&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(O^(x|~V))+C[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[7]+1126891415&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[14]+2878612391&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[5]+4237533241&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[3]+2399980690&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[10]+4293915773&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[1]+2240044497&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[15]+4264355552&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[6]+2734768916&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[13]+1309151649&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[11]+3174756917&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[2]+718787259&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var x=R-this.blockSize,C=this.B,O=this.h,V=0;V<R;){if(O==0)for(;V<=x;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<R;)if(C[O++]=D.charCodeAt(V++),O==this.blockSize){o(this,C),O=0;break}}else for(;V<R;)if(C[O++]=D[V++],O==this.blockSize){o(this,C),O=0;break}}this.h=O,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var x=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=x&255,x/=256;for(this.u(D),D=Array(16),R=x=0;4>R;++R)for(var C=0;32>C;C+=8)D[x++]=this.g[R]>>>C&255;return D};function l(D,R){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=R(D)}function d(D,R){this.h=R;for(var x=[],C=!0,O=D.length-1;0<=O;O--){var V=D[O]|0;C&&V==R||(x[O]=V,C=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?l(D,function(R){return new d([R|0],0>R?-1:0)}):new d([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return j(p(-D));for(var R=[],x=1,C=0;D>=x;C++)R[C]=D/x|0,x*=4294967296;return new d(R,0)}function _(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return j(_(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(R,8)),C=b,O=0;O<D.length;O+=8){var V=Math.min(8,D.length-O),N=parseInt(D.substring(O,O+V),R);8>V?(V=p(Math.pow(R,V)),C=C.j(V).add(p(N))):(C=C.j(x),C=C.add(p(N)))}return C}var b=y(0),w=y(1),I=y(16777216);n=d.prototype,n.m=function(){if(z(this))return-j(this).m();for(var D=0,R=1,x=0;x<this.g.length;x++){var C=this.i(x);D+=(0<=C?C:4294967296+C)*R,R*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(z(this))return"-"+j(this).toString(D);for(var R=p(Math.pow(D,6)),x=this,C="";;){var O=ie(x,R).g;x=U(x,O.j(R));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=U(this,D),z(D)?-1:M(D)?0:1};function j(D){for(var R=D.g.length,x=[],C=0;C<R;C++)x[C]=~D.g[C];return new d(x,~D.h).add(w)}n.abs=function(){return z(this)?j(this):this},n.add=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0,O=0;O<=R;O++){var V=C+(this.i(O)&65535)+(D.i(O)&65535),N=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);C=N>>>16,V&=65535,N&=65535,x[O]=N<<16|V}return new d(x,x[x.length-1]&-2147483648?-1:0)};function U(D,R){return D.add(j(R))}n.j=function(D){if(M(this)||M(D))return b;if(z(this))return z(D)?j(this).j(j(D)):j(j(this).j(D));if(z(D))return j(this.j(j(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var R=this.g.length+D.g.length,x=[],C=0;C<2*R;C++)x[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<D.g.length;O++){var V=this.i(C)>>>16,N=this.i(C)&65535,Oe=D.i(O)>>>16,De=D.i(O)&65535;x[2*C+2*O]+=N*De,G(x,2*C+2*O),x[2*C+2*O+1]+=V*De,G(x,2*C+2*O+1),x[2*C+2*O+1]+=N*Oe,G(x,2*C+2*O+1),x[2*C+2*O+2]+=V*Oe,G(x,2*C+2*O+2)}for(C=0;C<R;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=R;C<2*R;C++)x[C]=0;return new d(x,0)};function G(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function Q(D,R){this.g=D,this.h=R}function ie(D,R){if(M(R))throw Error("division by zero");if(M(D))return new Q(b,b);if(z(D))return R=ie(j(D),R),new Q(j(R.g),j(R.h));if(z(R))return R=ie(D,j(R)),new Q(j(R.g),R.h);if(30<D.g.length){if(z(D)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var x=w,C=R;0>=C.l(D);)x=ee(x),C=ee(C);var O=te(x,1),V=te(C,1);for(C=te(C,2),x=te(x,2);!M(C);){var N=V.add(C);0>=N.l(D)&&(O=O.add(x),V=N),C=te(C,1),x=te(x,1)}return R=U(D,O.j(R)),new Q(O,R)}for(O=b;0<=D.l(R);){for(x=Math.max(1,Math.floor(D.m()/R.m())),C=Math.ceil(Math.log(x)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=p(x),N=V.j(R);z(N)||0<N.l(D);)x-=C,V=p(x),N=V.j(R);M(V)&&(V=w),O=O.add(V),D=U(D,N)}return new Q(O,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)&D.i(C);return new d(x,this.h&D.h)},n.or=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)|D.i(C);return new d(x,this.h|D.h)},n.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)^D.i(C);return new d(x,this.h^D.h)};function ee(D){for(var R=D.g.length+1,x=[],C=0;C<R;C++)x[C]=D.i(C)<<1|D.i(C-1)>>>31;return new d(x,D.h)}function te(D,R){var x=R>>5;R%=32;for(var C=D.g.length-x,O=[],V=0;V<C;V++)O[V]=0<R?D.i(V+x)>>>R|D.i(V+x+1)<<32-R:D.i(V+x);return new d(O,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,c0=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,Ar=d}).apply(typeof DT<"u"?DT:typeof self<"u"?self:typeof window<"u"?window:{});var Ph=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u0,yc,h0,Qh,zp,d0,f0,m0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ph=="object"&&Ph];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(h,v){if(v)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in E))break e;E=E[F]}h=h[h.length-1],A=E[h],v=v(A),v!=A&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var E=0,A=!1,F={next:function(){if(!A&&E<h.length){var W=E++;return{value:v(W,h[W]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(h){return h||function(){return l(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,E){return h.call.apply(h.bind,arguments)}function b(h,v,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),h.apply(v,F)}}return function(){return h.apply(v,arguments)}}function w(h,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,w.apply(null,arguments)}function I(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function M(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,F,W){for(var fe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)fe[Fe-2]=arguments[Fe];return v.prototype[F].apply(A,fe)}}function z(h){const v=h.length;if(0<v){const E=Array(v);for(let A=0;A<v;A++)E[A]=h[A];return E}return[]}function j(h,v){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(y(A)){const F=h.length||0,W=A.length||0;h.length=F+W;for(let fe=0;fe<W;fe++)h[F+fe]=A[fe]}else h.push(A)}}class U{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function G(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var ee=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function te(h,v,E){for(const A in h)v.call(E,h[A],A,h)}function D(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function R(h){const v={};for(const E in h)v[E]=h[E];return v}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,v){let E,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(E in A)h[E]=A[E];for(let W=0;W<x.length;W++)E=x[W],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function O(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function V(h){m.setTimeout(()=>{throw h},0)}function N(){var h=re;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Oe{constructor(){this.h=this.g=null}add(v,E){const A=De.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var De=new U(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let me,Ee=!1,re=new Oe,P=()=>{const h=m.Promise.resolve(void 0);me=()=>{h.then(Z)}};var Z=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){V(E)}var v=De;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}Ee=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ue=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,v),m.removeEventListener("test",E,v)}catch{}return h})();function pe(h,v){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(ee){e:{try{ie(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pe.aa.h.call(this)}}M(pe,ce);var de={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ye="closure_listenable_"+(1e6*Math.random()|0),qe=0;function gt(h,v,E,A,F){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=F,this.key=++qe,this.da=this.fa=!1}function pt(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Xt(h){this.src=h,this.g={},this.h=0}Xt.prototype.add=function(h,v,E,A,F){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var fe=Wi(h,v,A,F);return-1<fe?(v=h[fe],E||(v.fa=!1)):(v=new gt(v,this.src,W,!!A,F),v.fa=E,h.push(v)),v};function bi(h,v){var E=v.type;if(E in h.g){var A=h.g[E],F=Array.prototype.indexOf.call(A,v,void 0),W;(W=0<=F)&&Array.prototype.splice.call(A,F,1),W&&(pt(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Wi(h,v,E,A){for(var F=0;F<h.length;++F){var W=h[F];if(!W.da&&W.listener==v&&W.capture==!!E&&W.ha==A)return F}return-1}var Zi="closure_lm_"+(1e6*Math.random()|0),Us={};function Bs(h,v,E,A,F){if(Array.isArray(v)){for(var W=0;W<v.length;W++)Bs(h,v[W],E,A,F);return null}return E=cu(E),h&&h[Ye]?h.K(v,E,p(A)?!!A.capture:!1,F):rn(h,v,E,!1,A,F)}function rn(h,v,E,A,F,W){if(!v)throw Error("Invalid event type");var fe=p(F)?!!F.capture:!!F,Fe=zs(h);if(Fe||(h[Zi]=Fe=new Xt(h)),E=Fe.add(v,E,A,fe,W),E.proxy)return E;if(A=Ma(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)ue||(F=fe),F===void 0&&(F=!1),h.addEventListener(v.toString(),A,F);else if(h.attachEvent)h.attachEvent(wi(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Ma(){function h(E){return v.call(h.src,h.listener,E)}const v=Lr;return h}function st(h,v,E,A,F){if(Array.isArray(v))for(var W=0;W<v.length;W++)st(h,v[W],E,A,F);else A=p(A)?!!A.capture:!!A,E=cu(E),h&&h[Ye]?(h=h.i,v=String(v).toString(),v in h.g&&(W=h.g[v],E=Wi(W,E,A,F),-1<E&&(pt(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[v],h.h--)))):h&&(h=zs(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Wi(v,E,A,F)),(E=-1<h?v[h]:null)&&Ne(E))}function Ne(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ye])bi(v.i,h);else{var E=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(E,A,h.capture):v.detachEvent?v.detachEvent(wi(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=zs(v))?(bi(E,h),E.h==0&&(E.src=null,v[Zi]=null)):pt(h)}}}function wi(h){return h in Us?Us[h]:Us[h]="on"+h}function Lr(h,v){if(h.da)h=!0;else{v=new pe(v,this);var E=h.listener,A=h.ha||h.src;h.fa&&Ne(h),h=E.call(A,v)}return h}function zs(h){return h=h[Zi],h instanceof Xt?h:null}var tl="__closure_events_fn_"+(1e9*Math.random()>>>0);function cu(h){return typeof h=="function"?h:(h[tl]||(h[tl]=function(v){return h.handleEvent(v)}),h[tl])}function wt(){he.call(this),this.i=new Xt(this),this.M=this,this.F=null}M(wt,he),wt.prototype[Ye]=!0,wt.prototype.removeEventListener=function(h,v,E,A){st(this,h,v,E,A)};function et(h,v){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new ce(v,h);else if(v instanceof ce)v.target=v.target||h;else{var F=v;v=new ce(A,h),C(v,F)}if(F=!0,E)for(var W=E.length-1;0<=W;W--){var fe=v.g=E[W];F=Ln(fe,A,!0,v)&&F}if(fe=v.g=h,F=Ln(fe,A,!0,v)&&F,F=Ln(fe,A,!1,v)&&F,E)for(W=0;W<E.length;W++)fe=v.g=E[W],F=Ln(fe,A,!1,v)&&F}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],A=0;A<E.length;A++)pt(E[A]);delete h.g[v],h.h--}}this.F=null},wt.prototype.K=function(h,v,E,A){return this.i.add(String(h),v,!1,E,A)},wt.prototype.L=function(h,v,E,A){return this.i.add(String(h),v,!0,E,A)};function Ln(h,v,E,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,W=0;W<v.length;++W){var fe=v[W];if(fe&&!fe.da&&fe.capture==E){var Fe=fe.listener,Ft=fe.ha||fe.src;fe.fa&&bi(h.i,fe),F=Fe.call(Ft,A)!==!1&&F}}return F&&!A.defaultPrevented}function mn(h,v,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function uu(h){h.g=mn(()=>{h.g=null,h.i&&(h.i=!1,uu(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class ef extends he{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:uu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(h){he.call(this),this.h=h,this.g={}}M(Ur,he);var Br=[];function zr(h){te(h.g,function(v,E){this.g.hasOwnProperty(E)&&Ne(v)},h),h.g={}}Ur.prototype.N=function(){Ur.aa.N.call(this),zr(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ui=m.JSON.stringify,Va=m.JSON.parse,qr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function nl(){}nl.prototype.h=null;function il(h){return h.h||(h.h=h.i())}function sl(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){ce.call(this,"d")}M(es,ce);function rl(){ce.call(this,"c")}M(rl,ce);var Si={},al=null;function qs(){return al=al||new wt}Si.La="serverreachability";function La(h){ce.call(this,Si.La,h)}M(La,ce);function Fs(h){const v=qs();et(v,new La(v))}Si.STAT_EVENT="statevent";function hu(h,v){ce.call(this,Si.STAT_EVENT,h),this.stat=v}M(hu,ce);function yt(h){const v=qs();et(v,new hu(v,h))}Si.Ma="timingevent";function qt(h,v){ce.call(this,Si.Ma,h),this.size=v}M(qt,ce);function Ot(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function ol(h,v,E,A,F,W){h.info(function(){if(h.g)if(W)for(var fe="",Fe=W.split("&"),Ft=0;Ft<Fe.length;Ft++){var He=Fe[Ft].split("=");if(1<He.length){var Zt=He[0];He=He[1];var Ht=Zt.split("_");fe=2<=Ht.length&&Ht[1]=="type"?fe+(Zt+"="+He+"&"):fe+(Zt+"=redacted&")}}else fe=null;else fe=W;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+v+`
`+E+`
`+fe})}function tf(h,v,E,A,F,W,fe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+v+`
`+E+`
`+W+" "+fe})}function Hs(h,v,E,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Fr(h,E)+(A?" "+A:"")})}function du(h,v){h.info(function(){return"TIMEOUT: "+v})}Qn.prototype.info=function(){};function Fr(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var fe=1;fe<F.length;fe++)F[fe]=""}}}}return ui(E)}catch{return v}}var Gs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ai;function Ri(){}M(Ri,nl),Ri.prototype.g=function(){return new XMLHttpRequest},Ri.prototype.i=function(){return{}},Ai=new Ri;function bn(h,v,E,A){this.j=h,this.i=v,this.l=E,this.R=A||1,this.U=new Ur(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var ll={},Ua={};function hi(h,v,E){h.L=1,h.v=Kr(Un(v)),h.m=E,h.P=!0,ns(h,null)}function ns(h,v){h.F=Date.now(),Hr(h),h.A=Un(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),ml(E.i,"t",A),h.C=0,E=h.j.J,h.h=new Nt,h.g=Cu(h.j,E?v:null,!h.m),0<h.O&&(h.M=new ef(w(h.Y,h,h.g),h.O)),v=h.U,E=h.g,A=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(Br[0]=F.toString()),F=Br);for(var W=0;W<F.length;W++){var fe=Bs(E,F[W],A||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),Fs(),ol(h.i,h.u,h.A,h.l,h.R,h.m)}bn.prototype.ca=function(h){h=h.target;const v=this.M;v&&Jn(h)==3?v.j():this.Y(h)},bn.prototype.Y=function(h){try{if(h==this.g)e:{const Ht=Jn(this.g);var v=this.g.Ba();const us=this.g.Z();if(!(3>Ht)&&(Ht!=3||this.g&&(this.h.h||this.g.oa()||Eu(this.g)))){this.J||Ht!=4||v==7||(v==8||0>=us?Fs(3):Fs(2)),$s(this);var E=this.g.Z();this.X=E;t:if(fu(this)){var A=Eu(this.g);h="";var F=A.length,W=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){an(this),xi(this);var fe="";break t}this.h.i=new m.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,h+=this.h.i.decode(A[v],{stream:!(W&&v==F-1)});A.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=E==200,tf(this.i,this.u,this.A,this.l,this.R,Ht,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,Ft=this.g;if((Fe=Ft.g?Ft.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Fe)){var He=Fe;break t}}He=null}if(E=He)Hs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gr(this,E);else{this.o=!1,this.s=3,yt(12),an(this),xi(this);break e}}if(this.P){E=!0;let on;for(;!this.J&&this.C<fe.length;)if(on=mu(this,fe),on==Ua){Ht==4&&(this.s=4,yt(14),E=!1),Hs(this.i,this.l,null,"[Incomplete Response]");break}else if(on==ll){this.s=4,yt(15),Hs(this.i,this.l,fe,"[Invalid Chunk]"),E=!1;break}else Hs(this.i,this.l,on,null),Gr(this,on);if(fu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ht!=4||fe.length!=0||this.h.h||(this.s=1,yt(16),E=!1),this.o=this.o&&E,!E)Hs(this.i,this.l,fe,"[Invalid Chunked Response]"),an(this),xi(this);else if(0<fe.length&&!this.W){this.W=!0;var Zt=this.j;Zt.g==this&&Zt.ba&&!Zt.M&&(Zt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),na(Zt),Zt.M=!0,yt(11))}}else Hs(this.i,this.l,fe,null),Gr(this,fe);Ht==4&&an(this),this.o&&!this.J&&(Ht==4?Au(this.j,this):(this.o=!1,Hr(this)))}else of(this.g),E==400&&0<fe.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),an(this),xi(this)}}}catch{}finally{}};function fu(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function mu(h,v){var E=h.C,A=v.indexOf(`
`,E);return A==-1?Ua:(E=Number(v.substring(E,A)),isNaN(E)?ll:(A+=1,A+E>v.length?Ua:(v=v.slice(A,A+E),h.C=A+E,v)))}bn.prototype.cancel=function(){this.J=!0,an(this)};function Hr(h){h.S=Date.now()+h.I,pu(h,h.I)}function pu(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(w(h.ba,h),v)}function $s(h){h.B&&(m.clearTimeout(h.B),h.B=null)}bn.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(du(this.i,this.A),this.L!=2&&(Fs(),yt(17)),an(this),this.s=2,xi(this)):pu(this,this.S-h)};function xi(h){h.j.G==0||h.J||Au(h.j,h)}function an(h){$s(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,zr(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Gr(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||cl(E.h,h))){if(!h.K&&cl(E.h,h)&&E.G==3){try{var A=E.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Wa(E),Qa(E);else break e;_l(E),yt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ot(w(E.Za,E),6e3));if(1>=za(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else cs(E,11)}else if((h.K||E.g==h)&&Wa(E),!G(v))for(F=E.Da.g.parse(v),v=0;v<F.length;v++){let He=F[v];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Zt=He[3];Zt!=null&&(E.la=Zt,E.j.info("VER="+E.la));const Ht=He[4];Ht!=null&&(E.Aa=Ht,E.j.info("SVER="+E.Aa));const us=He[5];us!=null&&typeof us=="number"&&0<us&&(A=1.5*us,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const on=h.g;if(on){const Pi=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var W=A.h;W.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(qa(W,W.h),W.h=null))}if(A.D){const Tl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Tl&&(A.ya=Tl,rt(A.I,A.D,Tl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var fe=h;if(A.qa=xu(A,A.J?A.ia:null,A.W),fe.K){wn(A.h,fe);var Fe=fe,Ft=A.L;Ft&&(Fe.I=Ft),Fe.B&&($s(Fe),Hr(Fe)),A.g=fe}else wu(A);0<E.i.length&&Xa(E)}else He[0]!="stop"&&He[0]!="close"||cs(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?cs(E,7):yl(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}Fs(4)}catch{}}var gu=class{constructor(h,v){this.g=h,this.map=v}};function is(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ba(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function za(h){return h.h?1:h.g?h.g.size:0}function cl(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function qa(h,v){h.g?h.g.add(v):h.h=v}function wn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}is.prototype.cancel=function(){if(this.i=ul(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function ul(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return z(h.i)}function nf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var v=[],E=h.length,A=0;A<E;A++)v.push(h[A]);return v}v=[],E=0;for(A in h)v[E++]=h[A];return v}function Fa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const A in h)v[E++]=A;return v}}}function hl(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=Fa(h),A=nf(h),F=A.length,W=0;W<F;W++)v.call(void 0,A[W],E&&E[W],h)}var $r=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sf(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),F=null;if(0<=A){var W=h[E].substring(0,A);F=h[E].substring(A+1)}else W=h[E];v(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,Yr(this,h.j),this.o=h.o,this.g=h.g,Ys(this,h.s),this.l=h.l;var v=h.i,E=new rs;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),ss(this,E),this.m=h.m}else h&&(v=String(h).match($r))?(this.h=!1,Yr(this,v[1]||"",!0),this.o=Xn(v[2]||""),this.g=Xn(v[3]||"",!0),Ys(this,v[4]),this.l=Xn(v[5]||"",!0),ss(this,v[6]||"",!0),this.m=Xn(v[7]||"")):(this.h=!1,this.i=new rs(null,this.h))}Pt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Qr(v,dl,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Qr(v,dl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Qr(E,E.charAt(0)=="/"?rf:fl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Qr(E,Ha)),h.join("")};function Un(h){return new Pt(h)}function Yr(h,v,E){h.j=E?Xn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function Ys(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ss(h,v,E){v instanceof rs?(h.i=v,vu(h.i,h.h)):(E||(v=Qr(v,af)),h.i=new rs(v,h.h))}function rt(h,v,E){h.i.set(v,E)}function Kr(h){return rt(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Xn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Qr(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,yu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function yu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var dl=/[#\/\?@]/g,fl=/[#\?:]/g,rf=/[#\?]/g,af=/[#\?@]/g,Ha=/#/g;function rs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Wn(h){h.g||(h.g=new Map,h.h=0,h.i&&sf(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=rs.prototype,n.add=function(h,v){Wn(this),this.i=null,h=Ci(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function as(h,v){Wn(h),v=Ci(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function os(h,v){return Wn(h),v=Ci(h,v),h.g.has(v)}n.forEach=function(h,v){Wn(this),this.g.forEach(function(E,A){E.forEach(function(F){h.call(v,F,A,this)},this)},this)},n.na=function(){Wn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let A=0;A<v.length;A++){const F=h[A];for(let W=0;W<F.length;W++)E.push(v[A])}return E},n.V=function(h){Wn(this);let v=[];if(typeof h=="string")os(this,h)&&(v=v.concat(this.g.get(Ci(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return Wn(this),this.i=null,h=Ci(this,h),os(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function ml(h,v,E){as(h,v),0<E.length&&(h.i=null,h.g.set(Ci(h,v),z(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var A=v[E];const W=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var F=W;fe[A]!==""&&(F+="="+encodeURIComponent(String(fe[A]))),h.push(F)}}return this.i=h.join("&")};function Ci(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function vu(h,v){v&&!h.j&&(Wn(h),h.i=null,h.g.forEach(function(E,A){var F=A.toLowerCase();A!=F&&(as(this,A),ml(this,F,E))},h)),h.j=v}function Xr(h,v){const E=new Qn;if(m.Image){const A=new Image;A.onload=I(Zn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=I(Zn,E,"TestLoadImage: error",!1,v,A),A.onabort=I(Zn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=I(Zn,E,"TestLoadImage: timeout",!1,v,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function di(h,v){const E=new Qn,A=new AbortController,F=setTimeout(()=>{A.abort(),Zn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(F),W.ok?Zn(E,"TestPingServer: ok",!0,v):Zn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Zn(E,"TestPingServer: error",!1,v)})}function Zn(h,v,E,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(E)}catch{}}function Wr(){this.g=new qr}function Ni(h,v,E){const A=E||"";try{hl(h,function(F,W){let fe=F;p(F)&&(fe=ui(F)),v.push(A+W+"="+encodeURIComponent(fe))})}catch(F){throw v.push(A+"type="+encodeURIComponent("_badmap")),F}}function Ks(h){this.l=h.Ub||null,this.j=h.eb||!1}M(Ks,nl),Ks.prototype.g=function(){return new ls(this.l,this.j)},Ks.prototype.i=(function(h){return function(){return h}})({});function ls(h,v){wt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ls,wt),n=ls.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,Di(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ii(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Di(this)),this.g&&(this.readyState=3,Di(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;pl(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function pl(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Ii(this):Di(this),this.readyState==3&&pl(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Ii(this))},n.Qa=function(h){this.g&&(this.response=h,Ii(this))},n.ga=function(){this.g&&Ii(this)};function Ii(h){h.readyState=4,h.l=null,h.j=null,h.v=null,Di(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function Di(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function gl(h){let v="";return te(h,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Wt(h,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=gl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):rt(h,v,E))}function Ze(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Ze,wt);var Ga=/^https?$/i,Zr=["POST","PUT"];n=Ze.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ai.g(),this.v=this.o?il(this.o):il(Ai),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(W){_u(this,W);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)E.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())E.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),F=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Zr,v,void 0))||A||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of E)this.g.setRequestHeader(W,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jr(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){_u(this,W)}};function _u(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,$a(h),ji(h)}function $a(h){h.A||(h.A=!0,et(h,"complete"),et(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,et(this,"complete"),et(this,"abort"),ji(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ji(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ya(this):this.bb())},n.bb=function(){Ya(this)};function Ya(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Jn(h)!=4||h.Z()!=2)){if(h.u&&Jn(h)==4)mn(h.Ea,0,h);else if(et(h,"readystatechange"),Jn(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=fe===0){var F=String(h.D).match($r)[1]||null;!F&&m.self&&m.self.location&&(F=m.self.location.protocol.slice(0,-1)),A=!Ga.test(F?F.toLowerCase():"")}E=A}if(E)et(h,"complete"),et(h,"success");else{h.m=6;try{var W=2<Jn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",$a(h)}}finally{ji(h)}}}}function ji(h,v){if(h.g){Jr(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||et(h,"ready");try{E.onreadystatechange=A}catch{}}}function Jr(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Jn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Va(v)}};function Eu(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function of(h){const v={};h=(h.g&&2<=Jn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(G(h[A]))continue;var E=O(h[A]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=v[F]||[];v[F]=W,W.push(E)}D(v,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Ka(h){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,h),this.cb=ea("retryDelaySeedMs",1e4,h),this.Wa=ea("forwardChannelMaxRetries",2,h),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new is(h&&h.concurrentRequestLimit),this.Da=new Wr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ka.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,A){yt(0),this.W=h,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=xu(this,null,this.W),Xa(this)};function yl(h){if(Tu(h),h.G==3){var v=h.U++,E=Un(h.I);if(rt(E,"SID",h.K),rt(E,"RID",v),rt(E,"TYPE","terminate"),ta(h,E),v=new bn(h,h.j,v),v.L=2,v.v=Kr(Un(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=v.v,E=!0),E||(v.g=Cu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Hr(v)}Ru(h)}function Qa(h){h.g&&(na(h),h.g.cancel(),h.g=null)}function Tu(h){Qa(h),h.u&&(m.clearTimeout(h.u),h.u=null),Wa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Xa(h){if(!Ba(h.h)&&!h.s){h.s=!0;var v=h.Ga;me||P(),Ee||(me(),Ee=!0),re.add(v,h),h.B=0}}function lf(h,v){return za(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(w(h.Ga,h,v),El(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new bn(this,this.j,h);let W=this.o;if(this.S&&(W?(W=R(W),C(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=bu(this,F,v),E=Un(this.I),rt(E,"RID",h),rt(E,"CVER",22),this.D&&rt(E,"X-HTTP-Session-Id",this.D),ta(this,E),W&&(this.O?v="headers="+encodeURIComponent(String(gl(W)))+"&"+v:this.m&&Wt(E,this.m,W)),qa(this.h,F),this.Ua&&rt(E,"TYPE","init"),this.P?(rt(E,"$req",v),rt(E,"SID","null"),F.T=!0,hi(F,E,null)):hi(F,E,v),this.G=2}}else this.G==3&&(h?vl(this,h):this.i.length==0||Ba(this.h)||vl(this))};function vl(h,v){var E;v?E=v.l:E=h.U++;const A=Un(h.I);rt(A,"SID",h.K),rt(A,"RID",E),rt(A,"AID",h.T),ta(h,A),h.m&&h.o&&Wt(A,h.m,h.o),E=new bn(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=bu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),qa(h.h,E),hi(E,A,v)}function ta(h,v){h.H&&te(h.H,function(E,A){rt(v,A,E)}),h.l&&hl({},function(E,A){rt(v,A,E)})}function bu(h,v,E){E=Math.min(h.i.length,E);var A=h.l?w(h.l.Na,h.l,h):null;e:{var F=h.i;let W=-1;for(;;){const fe=["count="+E];W==-1?0<E?(W=F[0].g,fe.push("ofs="+W)):W=0:fe.push("ofs="+W);let Fe=!0;for(let Ft=0;Ft<E;Ft++){let He=F[Ft].g;const Zt=F[Ft].map;if(He-=W,0>He)W=Math.max(0,F[Ft].g-100),Fe=!1;else try{Ni(Zt,fe,"req"+He+"_")}catch{A&&A(Zt)}}if(Fe){A=fe.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,A}function wu(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;me||P(),Ee||(me(),Ee=!0),re.add(v,h),h.v=0}}function _l(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(w(h.Fa,h),El(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,Su(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),Qa(this),Su(this))};function na(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function Su(h){h.g=new bn(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Un(h.qa);rt(v,"RID","rpc"),rt(v,"SID",h.K),rt(v,"AID",h.T),rt(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&rt(v,"TO",h.ja),rt(v,"TYPE","xmlhttp"),ta(h,v),h.m&&h.o&&Wt(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Kr(Un(v)),E.m=null,E.P=!0,ns(E,h)}n.Za=function(){this.C!=null&&(this.C=null,Qa(this),_l(this),yt(19))};function Wa(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Au(h,v){var E=null;if(h.g==v){Wa(h),na(h),h.g=null;var A=2}else if(cl(h.h,v))E=v.D,wn(h.h,v),A=1;else return;if(h.G!=0){if(v.o)if(A==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var F=h.B;A=qs(),et(A,new qt(A,E)),Xa(h)}else wu(h);else if(F=v.s,F==3||F==0&&0<v.X||!(A==1&&lf(h,v)||A==2&&_l(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),F){case 1:cs(h,5);break;case 4:cs(h,10);break;case 3:cs(h,6);break;default:cs(h,2)}}}function El(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function cs(h,v){if(h.j.info("Error code "+v),v==2){var E=w(h.fb,h),A=h.Xa;const F=!A;A=new Pt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Yr(A,"https"),Kr(A),F?Xr(A.toString(),E):di(A.toString(),E)}else yt(2);h.G=0,h.l&&h.l.sa(v),Ru(h),Tu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Ru(h){if(h.G=0,h.ka=[],h.l){const v=ul(h.h);(v.length!=0||h.i.length!=0)&&(j(h.ka,v),j(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function xu(h,v,E){var A=E instanceof Pt?Un(E):new Pt(E);if(A.g!="")v&&(A.g=v+"."+A.g),Ys(A,A.s);else{var F=m.location;A=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var W=new Pt(null);A&&Yr(W,A),v&&(W.g=v),F&&Ys(W,F),E&&(W.l=E),A=W}return E=h.D,v=h.ya,E&&v&&rt(A,E,v),rt(A,"VER",h.la),ta(h,A),A}function Cu(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Ze(new Ks({eb:E})):new Ze(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nu(){}n=Nu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Za(){}Za.prototype.g=function(h,v){return new Sn(h,v)};function Sn(h,v){wt.call(this),this.g=new Ka(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!G(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!G(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Oi(this)}M(Sn,wt),Sn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Sn.prototype.close=function(){yl(this.g)},Sn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=ui(h),h=E);v.i.push(new gu(v.Ya++,h)),v.G==3&&Xa(v)},Sn.prototype.N=function(){this.g.l=null,delete this.j,yl(this.g),delete this.g,Sn.aa.N.call(this)};function Iu(h){es.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}M(Iu,es);function Du(){rl.call(this),this.status=1}M(Du,rl);function Oi(h){this.g=h}M(Oi,Nu),Oi.prototype.ua=function(){et(this.g,"a")},Oi.prototype.ta=function(h){et(this.g,new Iu(h))},Oi.prototype.sa=function(h){et(this.g,new Du)},Oi.prototype.ra=function(){et(this.g,"b")},Za.prototype.createWebChannel=Za.prototype.g,Sn.prototype.send=Sn.prototype.o,Sn.prototype.open=Sn.prototype.m,Sn.prototype.close=Sn.prototype.close,m0=function(){return new Za},f0=function(){return qs()},d0=Si,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gs.NO_ERROR=0,Gs.TIMEOUT=8,Gs.HTTP_ERROR=6,Qh=Gs,ts.COMPLETE="complete",h0=ts,sl.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",wt.prototype.listen=wt.prototype.K,yc=sl,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,u0=Ze}).apply(typeof Ph<"u"?Ph:typeof self<"u"?self:typeof window<"u"?window:{});const jT="@firebase/firestore",OT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vn.UNAUTHENTICATED=new vn(null),vn.GOOGLE_CREDENTIALS=new vn("google-credentials-uid"),vn.FIRST_PARTY=new vn("first-party-uid"),vn.MOCK_USER=new vn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new vg("@firebase/firestore");function Co(){return Na.logLevel}function ye(n,...e){if(Na.logLevel<=Ue.DEBUG){const t=e.map(Dg);Na.debug(`Firestore (${Xo}): ${n}`,...t)}}function Ps(n,...e){if(Na.logLevel<=Ue.ERROR){const t=e.map(Dg);Na.error(`Firestore (${Xo}): ${n}`,...t)}}function Uo(n,...e){if(Na.logLevel<=Ue.WARN){const t=e.map(Dg);Na.warn(`Firestore (${Xo}): ${n}`,...t)}}function Dg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,p0(n,r,t)}function p0(n,e,t){let r=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ps(r),new Error(r)}function Je(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||p0(e,o,r)}function je(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Xi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(vn.UNAUTHENTICATED)))}shutdown(){}}class HD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class GD{constructor(e){this.t=e,this.currentUser=vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cs,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string",31837,{l:r}),new g0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string",2055,{h:e}),new vn(e)}}class $D{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YD{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new $D(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(vn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class KD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,En(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Je(this.o===void 0,3512);const r=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Je(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new PT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=QD(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function qp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const o=n.charAt(r),l=e.charAt(r);if(o!==l)return gp(o)===gp(l)?Be(o,l):gp(o)?1:-1}return Be(n.length,e.length)}const XD=55296,WD=57343;function gp(n){const e=n.charCodeAt(0);return e>=XD&&e<=WD}function Bo(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__name__";class Bi{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Bi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=Bi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const r=Bi.isNumericId(e),o=Bi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?Bi.extractNumericId(e).compare(Bi.extractNumericId(t)):qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class mt extends Bi{construct(e,t,r){return new mt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const ZD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dn extends Bi{construct(e,t,r){return new dn(e,t,r)}static isValidIdentifier(e){return ZD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kT}static keyField(){return new dn([kT])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dn(t)}static emptyPath(){return new dn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(mt.fromString(e))}static fromName(e){return new be(mt.fromString(e).popFirst(5))}static empty(){return new be(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(n,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function JD(n,e,t,r){if(e===!0&&r===!0)throw new ge(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!be.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VT(n){if(be.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function v0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function Pn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pd(n);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Zc(n,e){if(!v0(n))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const d=n[r];if(o&&typeof d!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,UT=1e6;class we{static now(){return we.fromMillis(Date.now())}static fromDate(e){return we.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*UT);return new we(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<LT)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:we._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Zc(e,we._jsonSchema))return new we(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}we._jsonSchemaVersion="firestore/timestamp/1.0",we._jsonSchema={type:zt("string",we._jsonSchemaVersion),seconds:zt("number"),nanoseconds:zt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{static fromTimestamp(e){return new Ie(e)}static min(){return new Ie(new we(0,0))}static max(){return new Ie(new we(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=-1;function ej(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ie.fromTimestamp(r===1e9?new we(t+1,0):new we(t,r));return new Cr(o,be.empty(),e)}function tj(n){return new Cr(n.readTime,n.key,kc)}class Cr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Cr(Ie.min(),be.empty(),kc)}static max(){return new Cr(Ie.max(),be.empty(),kc)}}function nj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class sj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wo(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==ij)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new le(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof le?t:le.resolve(t)}catch(t){return le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):le.reject(t)}static resolve(e){return new le(((t,r)=>{t(e)}))}static reject(e){return new le(((t,r)=>{r(e)}))}static waitFor(e){return new le(((t,r)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(y=>r(y)))})),d=!0,l===o&&t()}))}static or(e){let t=le.resolve(!1);for(const r of e)t=t.next((o=>o?le.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new le(((r,o)=>{const l=e.length,d=new Array(l);let m=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((_=>{d[p]=_,++m,m===l&&r(d)}),(_=>o(_)))}}))}static doWhile(e,t){return new le(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}function rj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=-1;function Md(n){return n==null}function cd(n){return n===0&&1/n==-1/0}function aj(n){return typeof n=="number"&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _0="";function oj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BT(e)),e=lj(n.get(t),e);return BT(e)}function lj(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case _0:t+="";break;default:t+=l}}return t}function BT(n){return n+_0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Mr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function E0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||hn.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kh(this.root,e,this.comparator,!1)}getReverseIterator(){return new kh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kh(this.root,e,this.comparator,!0)}}class kh{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hn{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??hn.RED,this.left=o??hn.EMPTY,this.right=l??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new hn(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return hn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new hn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qT(this.data.getIterator())}getIteratorFrom(e){return new qT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Qt(this.comparator);return t.data=e,t}}class qT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(dn.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Qt(dn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new T0("Invalid base64 string: "+l):l}})(e);return new fn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new fn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}fn.EMPTY_BYTE_STRING=new fn("");const cj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(n){if(Je(!!n,39018),typeof n=="string"){let e=0;const t=cj.exec(n);if(Je(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ir(n){return typeof n=="string"?fn.fromBase64String(n):fn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="server_timestamp",w0="__type__",S0="__previous_value__",A0="__local_write_time__";function Pg(n){return(n?.mapValue?.fields||{})[w0]?.stringValue===b0}function Vd(n){const e=n.mapValue.fields[S0];return Pg(e)?Vd(e):e}function Mc(n){const e=Nr(n.mapValue.fields[A0].timestampValue);return new we(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,t,r,o,l,d,m,y,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=_}}const ud="(default)";class Vc{constructor(e,t){this.projectId=e,this.database=t||ud}static empty(){return new Vc("","")}get isDefaultDatabase(){return this.database===ud}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="__type__",hj="__max__",Mh={mapValue:{}},x0="__vector__",hd="value";function Dr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pg(n)?4:fj(n)?9007199254740991:dj(n)?10:11:xe(28295,{value:n})}function Ki(n,e){if(n===e)return!0;const t=Dr(n);if(t!==Dr(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mc(n).isEqual(Mc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Nr(o.timestampValue),m=Nr(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ir(o.bytesValue).isEqual(Ir(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return jt(o.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(o.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return jt(o.integerValue)===jt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=jt(o.doubleValue),m=jt(l.doubleValue);return d===m?cd(d)===cd(m):isNaN(d)&&isNaN(m)}return!1})(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(zT(d)!==zT(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Ki(d[y],m[y])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function Lc(n,e){return(n.values||[]).find((t=>Ki(t,e)))!==void 0}function zo(n,e){if(n===e)return 0;const t=Dr(n),r=Dr(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=jt(l.integerValue||l.doubleValue),y=jt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(n,e);case 3:return FT(n.timestampValue,e.timestampValue);case 4:return FT(Mc(n),Mc(e));case 5:return qp(n.stringValue,e.stringValue);case 6:return(function(l,d){const m=Ir(l),y=Ir(d);return m.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),y=d.split("/");for(let p=0;p<m.length&&p<y.length;p++){const _=Be(m[p],y[p]);if(_!==0)return _}return Be(m.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=Be(jt(l.latitude),jt(d.latitude));return m!==0?m:Be(jt(l.longitude),jt(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return HT(n.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},y=d.fields||{},p=m[hd]?.arrayValue,_=y[hd]?.arrayValue,b=Be(p?.values?.length||0,_?.values?.length||0);return b!==0?b:HT(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===Mh.mapValue&&d===Mh.mapValue)return 0;if(l===Mh.mapValue)return 1;if(d===Mh.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),p=d.fields||{},_=Object.keys(p);y.sort(),_.sort();for(let b=0;b<y.length&&b<_.length;++b){const w=qp(y[b],_[b]);if(w!==0)return w;const I=zo(m[y[b]],p[_[b]]);if(I!==0)return I}return Be(y.length,_.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function FT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Nr(n),r=Nr(e),o=Be(t.seconds,r.seconds);return o!==0?o:Be(t.nanos,r.nanos)}function HT(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=zo(t[o],r[o]);if(l)return l}return Be(t.length,r.length)}function qo(n){return Fp(n)}function Fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Nr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ir(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Fp(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of r)l?l=!1:o+=",",o+=`${d}:${Fp(t.fields[d])}`;return o+"}"})(n.mapValue):xe(61005,{value:n})}function Xh(n){switch(Dr(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vd(n);return e?16+Xh(e):16;case 5:return 2*n.stringValue.length;case 6:return Ir(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+Xh(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return Mr(r.fields,((l,d)=>{o+=l.length+Xh(d)})),o})(n.mapValue);default:throw xe(13486,{value:n})}}function GT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hp(n){return!!n&&"integerValue"in n}function kg(n){return!!n&&"arrayValue"in n}function $T(n){return!!n&&"nullValue"in n}function YT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wh(n){return!!n&&"mapValue"in n}function dj(n){return(n?.mapValue?.fields||{})[R0]?.stringValue===x0}function Rc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Mr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Rc(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return{...n}}function fj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===hj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this.value=e}static empty(){return new jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=dn.emptyPath(),r={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Rc(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Wh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Mr(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new jn(Rc(this.value))}}function C0(n){const e=[];return Mr(n.fields,((t,r)=>{const o=new dn([t]);if(Wh(r)){const l=C0(r.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e,t,r,o,l,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new _n(e,0,Ie.min(),Ie.min(),Ie.min(),jn.empty(),0)}static newFoundDocument(e,t,r,o){return new _n(e,1,t,Ie.min(),r,o,0)}static newNoDocument(e,t){return new _n(e,2,t,Ie.min(),Ie.min(),jn.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Ie.min(),Ie.min(),jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ie.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ie.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.position=e,this.inclusive=t}}function KT(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(l.field.isKeyField()?r=be.comparator(be.fromName(d.referenceValue),t.key):r=zo(d,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function QT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ki(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t="asc"){this.field=e,this.dir=t}}function mj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{}class Bt extends N0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new gj(e,t,r):t==="array-contains"?new _j(e,r):t==="in"?new Ej(e,r):t==="not-in"?new Tj(e,r):t==="array-contains-any"?new bj(e,r):new Bt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new yj(e,r):new vj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(zo(t,this.value)):t!==null&&Dr(this.value)===Dr(t)&&this.matchesComparison(zo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vi extends N0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new vi(e,t)}matches(e){return I0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function I0(n){return n.op==="and"}function D0(n){return pj(n)&&I0(n)}function pj(n){for(const e of n.filters)if(e instanceof vi)return!1;return!0}function Gp(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+qo(n.value);if(D0(n))return n.filters.map((e=>Gp(e))).join(",");{const e=n.filters.map((t=>Gp(t))).join(",");return`${n.op}(${e})`}}function j0(n,e){return n instanceof Bt?(function(r,o){return o instanceof Bt&&r.op===o.op&&r.field.isEqual(o.field)&&Ki(r.value,o.value)})(n,e):n instanceof vi?(function(r,o){return o instanceof vi&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,d,m)=>l&&j0(d,o.filters[m])),!0):!1})(n,e):void xe(19439)}function O0(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${qo(t.value)}`})(n):n instanceof vi?(function(t){return t.op.toString()+" {"+t.getFilters().map(O0).join(" ,")+"}"})(n):"Filter"}class gj extends Bt{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class yj extends Bt{constructor(e,t){super(e,"in",t),this.keys=P0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vj extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=P0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function P0(n,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class _j extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kg(t)&&Lc(t.arrayValue,this.value)}}class Ej extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Lc(this.value.arrayValue,t)}}class Tj extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Lc(this.value.arrayValue,t)}}class bj extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Lc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function XT(n,e=null,t=[],r=[],o=null,l=null,d=null){return new wj(n,e,t,r,o,l,d)}function Mg(n){const e=je(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>qo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>qo(r))).join(",")),e.Te=t}return e.Te}function Vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!j0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QT(n.startAt,e.startAt)&&QT(n.endAt,e.endAt)}function $p(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Sj(n,e,t,r,o,l,d,m){return new Jo(n,e,t,r,o,l,d,m)}function Ld(n){return new Jo(n)}function WT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function k0(n){return n.collectionGroup!==null}function xc(n){const e=je(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Qt(dn.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Uc(l,r))})),t.has(dn.keyField().canonicalString())||e.Ie.push(new Uc(dn.keyField(),r))}return e.Ie}function Hi(n){const e=je(n);return e.Ee||(e.Ee=Aj(e,xc(n))),e.Ee}function Aj(n,e){if(n.limitType==="F")return XT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Uc(o.field,l)}));const t=n.endAt?new dd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new dd(n.startAt.position,n.startAt.inclusive):null;return XT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yp(n,e){const t=n.filters.concat([e]);return new Jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fd(n,e,t){return new Jo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ud(n,e){return Vg(Hi(n),Hi(e))&&n.limitType===e.limitType}function M0(n){return`${Mg(Hi(n))}|lt:${n.limitType}`}function No(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>O0(o))).join(", ")}]`),Md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>qo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>qo(o))).join(",")),`Target(${r})`})(Hi(n))}; limitType=${n.limitType})`}function Bd(n,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):be.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,o){for(const l of xc(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(d,m,y){const p=KT(d,m,y);return d.inclusive?p<=0:p<0})(r.startAt,xc(r),o)||r.endAt&&!(function(d,m,y){const p=KT(d,m,y);return d.inclusive?p>=0:p>0})(r.endAt,xc(r),o))})(n,e)}function Rj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function V0(n){return(e,t)=>{let r=!1;for(const o of xc(n)){const l=xj(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function xj(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,d,m){const y=d.data.field(l),p=m.data.field(l);return y!==null&&p!==null?zo(y,p):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Mr(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return E0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cj=new bt(be.comparator);function ks(){return Cj}const L0=new bt(be.comparator);function vc(...n){let e=L0;for(const t of n)e=e.insert(t.key,t);return e}function U0(n){let e=L0;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ta(){return Cc()}function B0(){return Cc()}function Cc(){return new Pa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Nj=new bt(be.comparator),Ij=new Qt(be.comparator);function ze(...n){let e=Ij;for(const t of n)e=e.add(t);return e}const Dj=new Qt(Be);function jj(){return Dj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function z0(n){return{integerValue:""+n}}function Oj(n,e){return aj(e)?z0(e):Lg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this._=void 0}}function Pj(n,e,t){return n instanceof Bc?(function(o,l){const d={fields:{[w0]:{stringValue:b0},[A0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Pg(l)&&(l=Vd(l)),l&&(d.fields[S0]=l),{mapValue:d}})(t,e):n instanceof zc?F0(n,e):n instanceof qc?H0(n,e):(function(o,l){const d=q0(o,l),m=ZT(d)+ZT(o.Ae);return Hp(d)&&Hp(o.Ae)?z0(m):Lg(o.serializer,m)})(n,e)}function kj(n,e,t){return n instanceof zc?F0(n,e):n instanceof qc?H0(n,e):t}function q0(n,e){return n instanceof md?(function(r){return Hp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Bc extends zd{}class zc extends zd{constructor(e){super(),this.elements=e}}function F0(n,e){const t=G0(e);for(const r of n.elements)t.some((o=>Ki(o,r)))||t.push(r);return{arrayValue:{values:t}}}class qc extends zd{constructor(e){super(),this.elements=e}}function H0(n,e){let t=G0(e);for(const r of n.elements)t=t.filter((o=>!Ki(o,r)));return{arrayValue:{values:t}}}class md extends zd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ZT(n){return jt(n.integerValue||n.doubleValue)}function G0(n){return kg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,t){this.field=e,this.transform=t}}function Vj(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof zc&&o instanceof zc||r instanceof qc&&o instanceof qc?Bo(r.elements,o.elements,Ki):r instanceof md&&o instanceof md?Ki(r.Ae,o.Ae):r instanceof Bc&&o instanceof Bc})(n.transform,e.transform)}class Lj{constructor(e,t){this.version=e,this.transformResults=t}}class kn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kn}static exists(e){return new kn(void 0,e)}static updateTime(e){return new kn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qd{}function $0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ug(n.key,kn.none()):new Jc(n.key,n.data,kn.none());{const t=n.data,r=jn.empty();let o=new Qt(dn.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?r.delete(l):r.set(l,d),o=o.add(l)}return new Vr(n.key,r,new Yn(o.toArray()),kn.none())}}function Uj(n,e,t){n instanceof Jc?(function(o,l,d){const m=o.value.clone(),y=eb(o.fieldTransforms,l,d.transformResults);m.setAll(y),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(n,e,t):n instanceof Vr?(function(o,l,d){if(!Zh(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=eb(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll(Y0(o)),y.setAll(m),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(n,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Nc(n,e,t,r){return n instanceof Jc?(function(l,d,m,y){if(!Zh(l.precondition,d))return m;const p=l.value.clone(),_=tb(l.fieldTransforms,y,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Vr?(function(l,d,m,y){if(!Zh(l.precondition,d))return m;const p=tb(l.fieldTransforms,y,d),_=d.data;return _.setAll(Y0(l)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,d,m){return Zh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(n,e,t)}function Bj(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=q0(r.transform,o||null);l!=null&&(t===null&&(t=jn.empty()),t.set(r.field,l))}return t||null}function JT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Bo(r,o,((l,d)=>Vj(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Jc extends qd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vr extends qd{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Y0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function eb(n,e,t){const r=new Map;Je(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,kj(d,m,t[o]))}return r}function tb(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,Pj(l,d,e))}return r}class Ug extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zj extends qd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Uj(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Nc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Nc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=B0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const y=$0(d,m);y!==null&&r.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Ie.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,r)=>JT(t,r)))&&Bo(this.baseMutations,e.baseMutations,((t,r)=>JT(t,r)))}}class Bg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Je(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return Nj})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new Bg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,$e;function Gj(n){switch(n){case ne.OK:return xe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function K0(n){if(n===void 0)return Ps("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Vt.OK:return ne.OK;case Vt.CANCELLED:return ne.CANCELLED;case Vt.UNKNOWN:return ne.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ne.INTERNAL;case Vt.UNAVAILABLE:return ne.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ne.NOT_FOUND;case Vt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Vt.ABORTED:return ne.ABORTED;case Vt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Vt.DATA_LOSS:return ne.DATA_LOSS;default:return xe(39323,{code:n})}}($e=Vt||(Vt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yj=new Ar([4294967295,4294967295],0);function nb(n){const e=$j().encode(n),t=new c0;return t.update(e),new Uint8Array(t.digest())}function ib(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ar([t,r],0),new Ar([o,l],0)]}class zg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _c(`Invalid padding: ${t}`);if(r<0)throw new _c(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _c(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new _c(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Ar.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Ar.fromNumber(r)));return o.compare(Yj)===1&&(o=new Ar([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nb(e),[r,o]=ib(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(r,o,l);if(!this.we(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new zg(l,o,t);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=nb(e),[r,o]=ib(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(r,o,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class _c extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,eu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fd(Ie.min(),o,new bt(Be),ks(),ze())}}class eu{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new eu(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class Q0{constructor(e,t){this.targetId=e,this.Ce=t}}class X0{constructor(e,t,r=fn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class sb{constructor(){this.ve=0,this.Fe=rb(),this.Me=fn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:xe(38017,{changeType:l})}})),new eu(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Je(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Kj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=Vh(),this.He=Vh(),this.Ye=new bt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if($p(l))if(r===0){const d=new be(l.path);this.et(t,d,_n.newNoDocument(d,Ie.min()))}else Je(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const m=this.ut(e),y=m?this.ct(m,e,d):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=Ir(r).toUint8Array()}catch(y){if(y instanceof T0)return Uo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new zg(d,o,l)}catch(y){return Uo(y instanceof _c?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&$p(m.target)){const y=new be(m.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,_n.newNoDocument(y,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let r=ze();this.He.forEach(((l,d)=>{let m=!0;d.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new Fd(e,t,this.Ye,this.je,r);return this.je=ks(),this.Je=Vh(),this.He=Vh(),this.Ye=new bt(Be),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Qt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Qt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Vh(){return new bt(be.comparator)}function rb(){return new bt(be.comparator)}const Qj={asc:"ASCENDING",desc:"DESCENDING"},Xj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wj={and:"AND",or:"OR"};class Zj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kp(n,e){return n.useProto3Json||Md(e)?e:{value:e}}function pd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function W0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Jj(n,e){return pd(n,e.toTimestamp())}function Gi(n){return Je(!!n,49232),Ie.fromTimestamp((function(t){const r=Nr(t);return new we(r.seconds,r.nanos)})(n))}function qg(n,e){return Qp(n,e).canonicalString()}function Qp(n,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Z0(n){const e=mt.fromString(n);return Je(iS(e),10190,{key:e.toString()}),e}function Xp(n,e){return qg(n.databaseId,e.path)}function yp(n,e){const t=Z0(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(eS(t))}function J0(n,e){return qg(n.databaseId,e)}function e2(n){const e=Z0(n);return e.length===4?mt.emptyPath():eS(e)}function Wp(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eS(n){return Je(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ab(n,e,t){return{name:Xp(n,e),fields:t.value.mapValue.fields}}function t2(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(Je(_===void 0||typeof _=="string",58123),fn.fromBase64String(_||"")):(Je(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),fn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(p){const _=p.code===void 0?ne.UNKNOWN:K0(p.code);return new ge(_,p.message||"")})(d);t=new X0(r,o,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=yp(n,r.document.name),l=Gi(r.document.updateTime),d=r.document.createTime?Gi(r.document.createTime):Ie.min(),m=new jn({mapValue:{fields:r.document.fields}}),y=_n.newFoundDocument(o,l,d,m),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Jh(p,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=yp(n,r.document),l=r.readTime?Gi(r.readTime):Ie.min(),d=_n.newNoDocument(o,l),m=r.removedTargetIds||[];t=new Jh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=yp(n,r.document),l=r.removedTargetIds||[];t=new Jh([],l,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,d=new Hj(o,l),m=r.targetId;t=new Q0(m,d)}}return t}function n2(n,e){let t;if(e instanceof Jc)t={update:ab(n,e.key,e.value)};else if(e instanceof Ug)t={delete:Xp(n,e.key)};else if(e instanceof Vr)t={update:ab(n,e.key,e.data),updateMask:h2(e.fieldMask)};else{if(!(e instanceof zj))return xe(16599,{Vt:e.type});t={verify:Xp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,d){const m=d.transform;if(m instanceof Bc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof zc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof qc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof md)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw xe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Jj(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(n,e.precondition)),t}function i2(n,e){return n&&n.length>0?(Je(e!==void 0,14353),n.map((t=>(function(o,l){let d=o.updateTime?Gi(o.updateTime):Gi(l);return d.isEqual(Ie.min())&&(d=Gi(l)),new Lj(d,o.transformResults||[])})(t,e)))):[]}function s2(n,e){return{documents:[J0(n,e.path)]}}function r2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=J0(n,o);const l=(function(p){if(p.length!==0)return nS(vi.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(p){if(p.length!==0)return p.map((_=>(function(w){return{field:Io(w.field),direction:l2(w.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Kp(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function a2(n){let e=e2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Je(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(b){const w=tS(b);return w instanceof vi&&D0(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((w=>(function(M){return new Uc(Do(M.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,Md(w)?null:w})(t.limit));let y=null;t.startAt&&(y=(function(b){const w=!!b.before,I=b.values||[];return new dd(I,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,I=b.values||[];return new dd(I,w)})(t.endAt)),Sj(e,o,d,l,m,"F",y,p)}function o2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function tS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Do(t.unaryFilter.field);return Bt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(t.unaryFilter.field);return Bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Do(t.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Do(t.unaryFilter.field);return Bt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(Do(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return vi.create(t.compositeFilter.filters.map((r=>tS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function l2(n){return Qj[n]}function c2(n){return Xj[n]}function u2(n){return Wj[n]}function Io(n){return{fieldPath:n.canonicalString()}}function Do(n){return dn.fromServerFormat(n.fieldPath)}function nS(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(YT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NAN"}};if($T(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YT(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NAN"}};if($T(t.value))return{unaryFilter:{field:Io(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Io(t.field),op:c2(t.op),value:t.value}}})(n):n instanceof vi?(function(t){const r=t.getFilters().map((o=>nS(o)));return r.length===1?r[0]:{compositeFilter:{op:u2(t.op),filters:r}}})(n):xe(54877,{filter:n})}function h2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function iS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,t,r,o,l=Ie.min(),d=Ie.min(),m=fn.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.yt=e}}function f2(n){const e=a2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?fd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.Cn=new p2}addToCollectionParentIndex(e,t){return this.Cn.add(t),le.resolve()}getCollectionParents(e,t){return le.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return le.resolve()}deleteFieldIndex(e,t){return le.resolve()}deleteAllFieldIndexes(e){return le.resolve()}createTargetIndexes(e,t){return le.resolve()}getDocumentsMatchingTarget(e,t){return le.resolve(null)}getIndexType(e,t){return le.resolve(0)}getFieldIndexes(e,t){return le.resolve([])}getNextCollectionGroupToUpdate(e){return le.resolve(null)}getMinOffset(e,t){return le.resolve(Cr.min())}getMinOffsetFromCollectionGroup(e,t){return le.resolve(Cr.min())}updateCollectionGroup(e,t,r){return le.resolve()}updateIndexEntries(e,t){return le.resolve()}}class p2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Qt(mt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Qt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},sS=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(sS,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Fo(0)}static cr(){return new Fo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="LruGarbageCollector",g2=1048576;function cb([n,e],[t,r]){const o=Be(n,t);return o===0?Be(e,r):o}class y2{constructor(e){this.Ir=e,this.buffer=new Qt(cb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class v2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(lb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zo(t)?ye(lb,"Ignoring IndexedDB error during garbage collection: ",t):await Wo(t)}await this.Vr(3e5)}))}}class _2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return le.resolve(kd.ce);const r=new y2(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),le.resolve(ob)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ob):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,l,d,m,y,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),Co()<=Ue.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(p-y)+`ms
Total Duration: ${p-_}ms`),le.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function E2(n,e){return new _2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.changes=new Pa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?le.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Nc(r.mutation,o,Yn.empty(),we.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const o=Ta();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let d=vc();return l.forEach(((m,y)=>{d=d.insert(m,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=Ta();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,r,o){let l=ks();const d=Cc(),m=(function(){return Cc()})();return t.forEach(((y,p)=>{const _=r.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof Vr)?l=l.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),Nc(_.mutation,p,_.mutation.getFieldMask(),we.now())):d.set(p.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,_)=>d.set(p,_))),t.forEach(((p,_)=>m.set(p,new b2(_,d.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=Cc();let o=new bt(((d,m)=>d-m)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let _=r.get(y)||Yn.empty();_=m.applyToLocalView(p,_),r.set(y,_);const b=(o.get(m.batchId)||ze()).add(y);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,_=y.value,b=B0();_.forEach((w=>{if(!l.has(w)){const I=$0(t.get(w),r.get(w));I!==null&&b.set(w,I),l=l.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,b))}return le.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):le.resolve(Ta());let m=kc,y=l;return d.next((p=>le.forEach(p,((_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(_)?le.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{y=y.insert(_,w)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,ze()))).next((_=>({batchId:m,changes:U0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((r=>{let o=vc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let d=vc();return this.indexManager.getCollectionParents(e,l).next((m=>le.forEach(m,(y=>{const p=(function(b,w){return new Jo(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((_=>{_.forEach(((b,w)=>{d=d.insert(b,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((d=>{l.forEach(((y,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,_n.newInvalidDocument(_)))}));let m=vc();return d.forEach(((y,p)=>{const _=l.get(y);_!==void 0&&Nc(_.mutation,p,Yn.empty(),we.now()),Bd(t,p)&&(m=m.insert(y,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return le.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Gi(o.createTime)}})(t)),le.resolve()}getNamedQuery(e,t){return le.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:f2(o.bundledQuery),readTime:Gi(o.readTime)}})(t)),le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.overlays=new bt(be.comparator),this.qr=new Map}getOverlay(e,t){return le.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ta();return le.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.St(e,t,l)})),le.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),le.resolve()}getOverlaysForCollection(e,t,r){const o=Ta(),l=t.length+1,d=new be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>r&&o.set(y.getKey(),y)}return le.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new bt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Ta(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const m=Ta(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,_)=>m.set(p,_))),!(m.size()>=o)););return le.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new Fj(t,r));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.sessionToken=fn.EMPTY_BYTE_STRING}getSessionToken(e){return le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Qr=new Qt(nn.$r),this.Ur=new Qt(nn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new nn(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new nn(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new be(new mt([])),r=new nn(t,e),o=new nn(t,e+1),l=[];return this.Ur.forEachInRange([r,o],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new mt([])),r=new nn(t,e),o=new nn(t,e+1);let l=ze();return this.Ur.forEachInRange([r,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new nn(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class nn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Qt(nn.$r)}checkEmpty(e){return le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new qj(l,t,r,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new nn(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return le.resolve(d)}lookupMutationBatch(e,t){return le.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),l=o<0?0:o;return le.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return le.resolve(this.mutationQueue.length===0?Og:this.tr-1)}getAllMutationBatches(e){return le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new nn(t,0),o=new nn(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,o],(d=>{const m=this.Xr(d.Yr);l.push(m)})),le.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qt(Be);return t.forEach((o=>{const l=new nn(o,0),d=new nn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(m=>{r=r.add(m.Yr)}))})),le.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;be.isDocumentKey(l)||(l=l.child(""));const d=new nn(new be(l),0);let m=new Qt(Be);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(y.Yr)),!0)}),d),le.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Je(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return le.forEach(t.mutations,(o=>{const l=new nn(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new nn(t,0),o=this.Zr.firstAfterOrEqual(r);return le.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,le.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(e){this.ri=e,this.docs=(function(){return new bt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return le.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let r=ks();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():_n.newInvalidDocument(o))})),le.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=ks();const d=t.path,m=new be(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:_}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||nj(tj(_),r)<=0||(o.has(_.key)||Bd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return le.resolve(l)}getAllFromCollectionGroup(e,t,r,o){xe(9500)}ii(e,t){return le.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new N2(this)}getSize(e){return le.resolve(this.size)}}class N2 extends T2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),le.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e){this.persistence=e,this.si=new Pa((t=>Mg(t)),Vg),this.lastRemoteSnapshotVersion=Ie.min(),this.highestTargetId=0,this.oi=0,this._i=new Fg,this.targetCount=0,this.ai=Fo.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),le.resolve()}getLastRemoteSnapshotVersion(e){return le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return le.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),le.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Fo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,le.resolve()}updateTargetData(e,t){return this.Pr(t),le.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,le.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),le.waitFor(l).next((()=>o))}getTargetCount(e){return le.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return le.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),le.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),le.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),le.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return le.resolve(r)}containsKey(e,t){return le.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.ui={},this.overlays={},this.ci=new kd(0),this.li=!1,this.li=!0,this.hi=new R2,this.referenceDelegate=e(this),this.Pi=new I2(this),this.indexManager=new m2,this.remoteDocumentCache=(function(o){return new C2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new d2(t),this.Ii=new S2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new A2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new x2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const o=new D2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return le.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class D2 extends sj{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.Ri=new Fg,this.Vi=null}static mi(e){return new Hg(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),le.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),le.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),le.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return le.forEach(this.fi,(r=>{const o=be.fromPath(r);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ie.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return le.or([()=>le.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gd{constructor(e,t){this.persistence=e,this.pi=new Pa((r=>oj(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=E2(this,t)}static mi(e,t){return new gd(e,t)}Ei(){}di(e){return le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return le.forEach(this.pi,((r,o)=>this.br(e,r,o).next((l=>l?le.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(r++,l.removeEntry(d,Ie.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),le.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),le.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),le.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xh(e.data.value)),t}br(e,t,r){return le.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return le.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Gg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return G1()?8:rj(Tn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,o,r).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new j2;return this.Ss(e,t,d).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>l.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(Co()<=Ue.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",No(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),le.resolve()):(Co()<=Ue.DEBUG&&ye("QueryEngine","Query:",No(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(Co()<=Ue.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",No(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hi(t))):le.resolve())}ys(e,t){if(WT(t))return le.resolve(null);let r=Hi(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=fd(t,null,"F"),r=Hi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const d=ze(...l);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((y=>{const p=this.Ds(t,m);return this.Cs(t,p,d,y.readTime)?this.ys(e,fd(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,r,o){return WT(t)||o.isEqual(Ie.min())?le.resolve(null):this.ps.getDocuments(e,r).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,r,o)?le.resolve(null):(Co()<=Ue.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(t)),this.vs(e,d,t,ej(o,kc)).next((m=>m)))}))}Ds(e,t){let r=new Qt(V0(e));return t.forEach(((o,l)=>{Bd(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,r){return Co()<=Ue.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",No(t)),this.ps.getDocumentsMatchingQuery(e,t,Cr.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="LocalStore",P2=3e8;class k2{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new bt(Be),this.xs=new Pa((l=>Mg(l)),Vg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new w2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function M2(n,e,t,r){return new k2(n,e,t,r)}async function aS(n,e){const t=je(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const d=[],m=[];let y=ze();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}for(const p of l){m.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(r,y).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:m})))}))}))}function V2(n,e){const t=je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,p,_){const b=p.batch,w=b.keys();let I=le.resolve();return w.forEach((M=>{I=I.next((()=>_.getEntry(y,M))).next((z=>{const j=p.docVersions.get(M);Je(j!==null,48541),z.version.compareTo(j)<0&&(b.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),_.addEntry(z)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(y,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let y=ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function oS(n){const e=je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function L2(n,e){const t=je(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((_,b)=>{const w=o.get(b);if(!w)return;m.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,b))));let I=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(fn.EMPTY_BYTE_STRING,Ie.min()).withLastLimboFreeSnapshotVersion(Ie.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,r)),o=o.insert(b,I),(function(z,j,U){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=P2?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(w,I,_)&&m.push(t.Pi.updateTargetData(l,I))}));let y=ks(),p=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),m.push(U2(l,d,e.documentUpdates).next((_=>{y=_.ks,p=_.qs}))),!r.isEqual(Ie.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(_)}return le.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function U2(n,e,t){let r=ze(),o=ze();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let d=ks();return t.forEach(((m,y)=>{const p=l.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ie.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ye($g,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function B2(n,e){const t=je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Og),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function z2(n,e){const t=je(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((l=>l?(o=l,le.resolve(o)):t.Pi.allocateTargetId(r).next((d=>(o=new br(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Zp(n,e,t){const r=je(n),o=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Zo(d))throw d;ye($g,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function ub(n,e,t){const r=je(n);let o=Ie.min(),l=ze();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,p,_){const b=je(y),w=b.xs.get(_);return w!==void 0?le.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,_)})(r,d,Hi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,m.targetId).next((y=>{l=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,t?o:Ie.min(),t?l:ze()))).next((m=>(q2(r,Rj(e),m),{documents:m,Qs:l})))))}function q2(n,e,t){let r=n.Os.get(e)||Ie.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class hb{constructor(){this.activeTargetIds=jj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class F2{constructor(){this.Mo=new hb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="ConnectivityMonitor";class fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(db,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(db,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lh=null;function Jp(){return Lh===null?Lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Lh++,"0x"+Lh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="RestConnection",G2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===ud?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,l){const d=Jp(),m=this.zo(e,t.toUriEncodedString());ye(vp,`Sending RPC '${e}' ${d}:`,m,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:p}=new URL(m),_=Vs(p);return this.Jo(e,m,y,r,_).then((b=>(ye(vp,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Uo(vp,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,l,d){return this.Go(e,t,r,o,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const r=G2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class K2 extends $2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,l){const d=Jp();return new Promise(((m,y)=>{const p=new u0;p.setWithCredentials(!0),p.listenOnce(h0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Qh.NO_ERROR:const b=p.getResponseJson();ye(yn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Qh.TIMEOUT:ye(yn,`RPC '${e}' ${d} timed out`),y(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Qh.HTTP_ERROR:const w=p.getStatus();if(ye(yn,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I?.error;if(M&&M.status&&M.message){const z=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN})(M.status);y(new ge(z,M.message))}else y(new ge(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(yn,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ye(yn,`RPC '${e}' ${d} sending request:`,o),p.send(t,"POST",_,r,15)}))}T_(e,t,r){const o=Jp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=m0(),m=f0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const _=l.join("");ye(yn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const b=d.createWebChannel(_,y);this.I_(b);let w=!1,I=!1;const M=new Y2({Yo:j=>{I?ye(yn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(w||(ye(yn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),ye(yn,`RPC '${e}' stream ${o} sending:`,j),b.send(j))},Zo:()=>b.close()}),z=(j,U,G)=>{j.listen(U,(Q=>{try{G(Q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return z(b,yc.EventType.OPEN,(()=>{I||(ye(yn,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),z(b,yc.EventType.CLOSE,(()=>{I||(I=!0,ye(yn,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(b))})),z(b,yc.EventType.ERROR,(j=>{I||(I=!0,Uo(yn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),M.a_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),z(b,yc.EventType.MESSAGE,(j=>{if(!I){const U=j.data[0];Je(!!U,16349);const G=U,Q=G?.error||G[0]?.error;if(Q){ye(yn,`RPC '${e}' stream ${o} received error:`,Q);const ie=Q.status;let ee=(function(R){const x=Vt[R];if(x!==void 0)return K0(x)})(ie),te=Q.message;ee===void 0&&(ee=ne.INTERNAL,te="Unknown error status: "+ie+" with message "+Q.message),I=!0,M.a_(new ge(ee,te)),b.close()}else ye(yn,`RPC '${e}' stream ${o} received:`,U),M.u_(U)}})),z(m,d0.STAT_EVENT,(j=>{j.stat===zp.PROXY?ye(yn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===zp.NOPROXY&&ye(yn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hd(n){return new Zj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="PersistentStream";class cS{constructor(e,t,r,o,l,d,m,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new lS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ge(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(mb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(mb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Q2 extends cS{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=t2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ie.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ie.min():d.readTime?Gi(d.readTime):Ie.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wp(this.serializer),t.addTarget=(function(l,d){let m;const y=d.target;if(m=$p(y)?{documents:s2(l,y)}:{query:r2(l,y).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=W0(l,d.resumeToken);const p=Kp(l,d.expectedCount);p!==null&&(m.expectedCount=p)}else if(d.snapshotVersion.compareTo(Ie.min())>0){m.readTime=pd(l,d.snapshotVersion.toTimestamp());const p=Kp(l,d.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=o2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wp(this.serializer),t.removeTarget=e,this.q_(t)}}class X2 extends cS{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Je(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Je(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=i2(e.writeResults,e.commitTime),r=Gi(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>n2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{}class Z2 extends W2{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Qp(t,r),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ne.UNKNOWN,l.toString())}))}Ho(e,t,r,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Qp(t,r),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ne.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class J2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class eO{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{ka(this)&&(ye(Ia,"Restarting streams for network reachability change."),await(async function(y){const p=je(y);p.Ea.add(4),await tu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Gd(p)})(this))}))})),this.Ra=new J2(r,o)}}async function Gd(n){if(ka(n))for(const e of n.da)await e(!0)}async function tu(n){for(const e of n.da)await e(!1)}function uS(n,e){const t=je(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xg(t)?Qg(t):el(t).O_()&&Kg(t,e))}function Yg(n,e){const t=je(n),r=el(t);t.Ia.delete(e),r.O_()&&hS(t,e),t.Ia.size===0&&(r.O_()?r.L_():ka(t)&&t.Ra.set("Unknown"))}function Kg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ie.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}el(n).Y_(e)}function hS(n,e){n.Va.Ue(e),el(n).Z_(e)}function Qg(n){n.Va=new Kj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),el(n).start(),n.Ra.ua()}function Xg(n){return ka(n)&&!el(n).x_()&&n.Ia.size>0}function ka(n){return je(n).Ea.size===0}function dS(n){n.Va=void 0}async function tO(n){n.Ra.set("Online")}async function nO(n){n.Ia.forEach(((e,t)=>{Kg(n,e)}))}async function iO(n,e){dS(n),Xg(n)?(n.Ra.ha(e),Qg(n)):n.Ra.set("Unknown")}async function sO(n,e,t){if(n.Ra.set("Online"),e instanceof X0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(n,e)}catch(r){ye(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await yd(n,r)}else if(e instanceof Jh?n.Va.Ze(e):e instanceof Q0?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ie.min()))try{const r=await oS(n.localStore);t.compareTo(r)>=0&&await(function(l,d){const m=l.Va.Tt(d);return m.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(y.resumeToken,d))}})),m.targetMismatches.forEach(((y,p)=>{const _=l.Ia.get(y);if(!_)return;l.Ia.set(y,_.withResumeToken(fn.EMPTY_BYTE_STRING,_.snapshotVersion)),hS(l,y);const b=new br(_.target,y,p,_.sequenceNumber);Kg(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(r){ye(Ia,"Failed to raise snapshot:",r),await yd(n,r)}}async function yd(n,e,t){if(!Zo(e))throw e;n.Ea.add(1),await tu(n),n.Ra.set("Offline"),t||(t=()=>oS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Ia,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Gd(n)}))}function fS(n,e){return e().catch((t=>yd(n,t,e)))}async function $d(n){const e=je(n),t=jr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Og;for(;rO(e);)try{const o=await B2(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,aO(e,o)}catch(o){await yd(e,o)}mS(e)&&pS(e)}function rO(n){return ka(n)&&n.Ta.length<10}function aO(n,e){n.Ta.push(e);const t=jr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function mS(n){return ka(n)&&!jr(n).x_()&&n.Ta.length>0}function pS(n){jr(n).start()}async function oO(n){jr(n).ra()}async function lO(n){const e=jr(n);for(const t of n.Ta)e.ea(t.mutations)}async function cO(n,e,t){const r=n.Ta.shift(),o=Bg.from(r,e,t);await fS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await $d(n)}async function uO(n,e){e&&jr(n).X_&&await(async function(r,o){if((function(d){return Gj(d)&&d!==ne.ABORTED})(o.code)){const l=r.Ta.shift();jr(r).B_(),await fS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await $d(r)}})(n,e),mS(n)&&pS(n)}async function pb(n,e){const t=je(n);t.asyncQueue.verifyOperationInProgress(),ye(Ia,"RemoteStore received new credentials");const r=ka(t);t.Ea.add(3),await tu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Gd(t)}async function hO(n,e){const t=je(n);e?(t.Ea.delete(2),await Gd(t)):e||(t.Ea.add(2),await tu(t),t.Ra.set("Unknown"))}function el(n){return n.ma||(n.ma=(function(t,r,o){const l=je(t);return l.sa(),new Q2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:tO.bind(null,n),t_:nO.bind(null,n),r_:iO.bind(null,n),H_:sO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Xg(n)?Qg(n):n.Ra.set("Unknown")):(await n.ma.stop(),dS(n))}))),n.ma}function jr(n){return n.fa||(n.fa=(function(t,r,o){const l=je(t);return l.sa(),new X2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:oO.bind(null,n),r_:uO.bind(null,n),ta:lO.bind(null,n),na:cO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await $d(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Ia,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new Wg(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),Zo(n))return new ge(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{static emptySet(e){return new Vo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=vc(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Vo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.ga=new bt(be.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Ho{constructor(e,t,r,o,l,d,m,y,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Ho(e,t,Vo.emptySet(t),d,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class fO{constructor(){this.queries=yb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=je(t),l=o.queries;o.queries=yb(),l.forEach(((d,m)=>{for(const y of m.Sa)y.onError(r)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function yb(){return new Pa((n=>M0(n)),Ud)}async function Jg(n,e){const t=je(n);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(r=2):(l=new dO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Zg(d,`Initialization of query '${No(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ty(t)}async function ey(n,e){const t=je(n),r=e.query;let o=3;const l=t.queries.get(r);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function mO(n,e){const t=je(n);let r=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.Sa)m.Fa(o)&&(r=!0);d.wa=o}}r&&ty(t)}function pO(n,e,t){const r=je(n),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);r.queries.delete(e)}function ty(n){n.Ca.forEach((e=>{e.next()}))}var eg,vb;(vb=eg||(eg={})).Ma="default",vb.Cache="cache";class ny{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Ho(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e){this.key=e}}class yS{constructor(e){this.key=e}}class gO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=V0(e),this.tu=new Vo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new gb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,b)=>{const w=o.get(_),I=Bd(this.query,b)?b:null,M=!!w&&this.mutatedKeys.has(w.key),z=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let j=!1;w&&I?w.data.isEqual(I.data)?M!==z&&(r.track({type:3,doc:I}),j=!0):this.su(w,I)||(r.track({type:2,doc:I}),j=!0,(y&&this.eu(I,y)>0||p&&this.eu(I,p)<0)&&(m=!0)):!w&&I?(r.track({type:0,doc:I}),j=!0):w&&!I&&(r.track({type:1,doc:w}),j=!0,(y||p)&&(m=!0)),j&&(I?(d=d.add(I),l=z?l.add(_):l.delete(_)):(d=d.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:d,iu:r,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,b)=>(function(I,M){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:j})}};return z(I)-z(M)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new Ho(this.query,e.tu,l,d,e.mutatedKeys,y===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new yS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new gS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class yO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vO{constructor(e){this.key=e,this.hu=!1}}class _O{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Pa((m=>M0(m)),Ud),this.Iu=new Map,this.Eu=new Set,this.du=new bt(be.comparator),this.Au=new Map,this.Ru=new Fg,this.Vu={},this.mu=new Map,this.fu=Fo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function EO(n,e,t=!0){const r=wS(n);let o;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await vS(r,e,t,!0),o}async function TO(n,e){const t=wS(n);await vS(t,e,!0,!1)}async function vS(n,e,t,r){const o=await z2(n.localStore,Hi(e)),l=o.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await bO(n,e,l,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&uS(n.remoteStore,o),m}async function bO(n,e,t,r,o){n.pu=(b,w,I)=>(async function(z,j,U,G){let Q=j.view.ru(U);Q.Cs&&(Q=await ub(z.localStore,j.query,!1).then((({documents:D})=>j.view.ru(D,Q))));const ie=G&&G.targetChanges.get(j.targetId),ee=G&&G.targetMismatches.get(j.targetId)!=null,te=j.view.applyChanges(Q,z.isPrimaryClient,ie,ee);return Eb(z,j.targetId,te.au),te.snapshot})(n,b,w,I);const l=await ub(n.localStore,e,!0),d=new gO(e,l.Qs),m=d.ru(l.documents),y=eu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),p=d.applyChanges(m,n.isPrimaryClient,y);Eb(n,t,p.au);const _=new yO(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function wO(n,e,t){const r=je(n),o=r.Tu.get(e),l=r.Iu.get(o.targetId);if(l.length>1)return r.Iu.set(o.targetId,l.filter((d=>!Ud(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Yg(r.remoteStore,o.targetId),tg(r,o.targetId)})).catch(Wo)):(tg(r,o.targetId),await Zp(r.localStore,o.targetId,!0))}async function SO(n,e){const t=je(n),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yg(t.remoteStore,r.targetId))}async function AO(n,e,t){const r=jO(n);try{const o=await(function(d,m){const y=je(d),p=we.now(),_=m.reduce(((I,M)=>I.add(M.key)),ze());let b,w;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let M=ks(),z=ze();return y.Ns.getEntries(I,_).next((j=>{M=j,M.forEach(((U,G)=>{G.isValidDocument()||(z=z.add(U))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,M))).next((j=>{b=j;const U=[];for(const G of m){const Q=Bj(G,b.get(G.key).overlayedDocument);Q!=null&&U.push(new Vr(G.key,Q,C0(Q.value.mapValue),kn.exists(!0)))}return y.mutationQueue.addMutationBatch(I,p,U,m)})).next((j=>{w=j;const U=j.applyToLocalDocumentSet(b,z);return y.documentOverlayCache.saveOverlays(I,j.batchId,U)}))})).then((()=>({batchId:w.batchId,changes:U0(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,m,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new bt(Be)),p=p.insert(m,y),d.Vu[d.currentUser.toKey()]=p})(r,o.batchId,t),await nu(r,o.changes),await $d(r.remoteStore)}catch(o){const l=Zg(o,"Failed to persist write");t.reject(l)}}async function _S(n,e){const t=je(n);try{const r=await L2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(Je(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?Je(d.hu,14607):o.removedDocuments.size>0&&(Je(d.hu,42227),d.hu=!1))})),await nu(t,r,e)}catch(r){await Wo(r)}}function _b(n,e,t){const r=je(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const y=je(d);y.onlineState=m;let p=!1;y.queries.forEach(((_,b)=>{for(const w of b.Sa)w.va(m)&&(p=!0)})),p&&ty(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RO(n,e,t){const r=je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),l=o&&o.key;if(l){let d=new bt(be.comparator);d=d.insert(l,_n.newNoDocument(l,Ie.min()));const m=ze().add(l),y=new Fd(Ie.min(),new Map,new bt(Be),d,m);await _S(r,y),r.du=r.du.remove(l),r.Au.delete(e),sy(r)}else await Zp(r.localStore,e,!1).then((()=>tg(r,e,t))).catch(Wo)}async function xO(n,e){const t=je(n),r=e.batch.batchId;try{const o=await V2(t.localStore,e);TS(t,r,null),ES(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await nu(t,o)}catch(o){await Wo(o)}}async function CO(n,e,t){const r=je(n);try{const o=await(function(d,m){const y=je(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return y.mutationQueue.lookupMutationBatch(p,m).next((b=>(Je(b!==null,37113),_=b.keys(),y.mutationQueue.removeMutationBatch(p,b)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,_,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>y.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);TS(r,e,t),ES(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await nu(r,o)}catch(o){await Wo(o)}}function ES(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function TS(n,e,t){const r=je(n);let o=r.Vu[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||bS(n,r)}))}function bS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),sy(n))}function Eb(n,e,t){for(const r of t)r instanceof gS?(n.Ru.addReference(r.key,e),NO(n,r)):r instanceof yS?(ye(iy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||bS(n,r.key)):xe(19791,{wu:r})}function NO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ye(iy,"New document in limbo: "+t),n.Eu.add(r),sy(n))}function sy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(mt.fromString(e)),r=n.fu.next();n.Au.set(r,new vO(t)),n.du=n.du.insert(t,r),uS(n.remoteStore,new br(Hi(Ld(t.path)),r,"TargetPurposeLimboResolution",kd.ce))}}async function nu(n,e,t){const r=je(n),o=[],l=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,y)=>{d.push(r.pu(y,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Gg.As(y.targetId,p);l.push(_)}})))})),await Promise.all(d),r.Pu.H_(o),await(async function(y,p){const _=je(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>le.forEach(p,(w=>le.forEach(w.Es,(I=>_.persistence.referenceDelegate.addReference(b,w.targetId,I))).next((()=>le.forEach(w.ds,(I=>_.persistence.referenceDelegate.removeReference(b,w.targetId,I)))))))))}catch(b){if(!Zo(b))throw b;ye($g,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const I=_.Ms.get(w),M=I.snapshotVersion,z=I.withLastLimboFreeSnapshotVersion(M);_.Ms=_.Ms.insert(w,z)}}})(r.localStore,l))}async function IO(n,e){const t=je(n);if(!t.currentUser.isEqual(e)){ye(iy,"User change. New user:",e.toKey());const r=await aS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new ge(ne.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nu(t,r.Ls)}}function DO(n,e){const t=je(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function wS(n){const e=je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_S.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RO.bind(null,e),e.Pu.H_=mO.bind(null,e.eventManager),e.Pu.yu=pO.bind(null,e.eventManager),e}function jO(n){const e=je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CO.bind(null,e),e}class vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Hd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return M2(this.persistence,new O2,e.initialUser,this.serializer)}Cu(e){return new rS(Hg.mi,this.serializer)}Du(e){return new F2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vd.provider={build:()=>new vd};class OO extends vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Je(this.persistence.referenceDelegate instanceof gd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new v2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new rS((r=>gd.mi(r,t)),this.serializer)}}class ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_b(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IO.bind(null,this.syncEngine),await hO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fO})()}createDatastore(e){const t=Hd(e.databaseInfo.databaseId),r=(function(l){return new K2(l)})(e.databaseInfo);return(function(l,d,m,y){return new Z2(l,d,m,y)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,d,m){return new eO(r,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>_b(this.syncEngine,t,0)),(function(){return fb.v()?new fb:new H2})())}createSyncEngine(e,t){return(function(o,l,d,m,y,p,_){const b=new _O(o,l,d,m,y,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=je(t);ye(Ia,"RemoteStore shutting down."),r.Ea.add(5),await tu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or="FirestoreClient";class PO{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=vn.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async d=>{ye(Or,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ye(Or,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ep(n,e){n.asyncQueue.verifyOperationInProgress(),ye(Or,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await aS(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Tb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await kO(n);ye(Or,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>pb(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>pb(e.remoteStore,o))),n._onlineComponents=e}async function kO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(Or,"Using user provided OfflineComponentProvider");try{await Ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Uo("Error using user provided cache. Falling back to memory cache: "+t),await Ep(n,new vd)}}else ye(Or,"Using default OfflineComponentProvider"),await Ep(n,new OO(void 0));return n._offlineComponents}async function SS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(Or,"Using user provided OnlineComponentProvider"),await Tb(n,n._uninitializedComponentsProvider._online)):(ye(Or,"Using default OnlineComponentProvider"),await Tb(n,new ng))),n._onlineComponents}function MO(n){return SS(n).then((e=>e.syncEngine))}async function _d(n){const e=await SS(n),t=e.eventManager;return t.onListen=EO.bind(null,e.syncEngine),t.onUnlisten=wO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=TO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SO.bind(null,e.syncEngine),t}function VO(n,e,t={}){const r=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,y,p){const _=new ry({next:w=>{_.Nu(),d.enqueueAndForget((()=>ey(l,b)));const I=w.docs.has(m);!I&&w.fromCache?p.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&y&&y.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new ny(Ld(m.path),_,{includeMetadataChanges:!0,qa:!0});return Jg(l,b)})(await _d(n),n.asyncQueue,e,t,r))),r.promise}function LO(n,e,t={}){const r=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,y,p){const _=new ry({next:w=>{_.Nu(),d.enqueueAndForget((()=>ey(l,b))),w.fromCache&&y.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new ny(m,_,{includeMetadataChanges:!0,qa:!0});return Jg(l,b)})(await _d(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firestore.googleapis.com",wb=!0;class Sb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=RS,this.ssl=wb}else this.host=e.host,this.ssl=e.ssl??wb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=sS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<g2)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Yd{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FD;switch(r.type){case"firstParty":return new YD(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bb.get(t);r&&(ye("ComponentProvider","Removing Datastore"),bb.delete(t),r.terminate())})(this),Promise.resolve()}}function UO(n,e,t,r={}){n=Pn(n,Yd);const o=Vs(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;o&&(xd(`https://${m}`),Cd("Firestore",!0)),l.host!==RS&&l.host!==m&&Uo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:o,emulatorOptions:r};if(!Aa(y,d)&&(n._setSettings(y),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=vn.MOCK_USER;else{p=yw(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new vn(b)}n._authCredentials=new HD(new g0(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Zc(t,Rt._jsonSchema))return new Rt(e,r||null,new be(mt.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:zt("string",Rt._jsonSchemaVersion),referencePath:zt("string")};class Rr extends Ls{constructor(e,t,r){super(e,t,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new be(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function ht(n,e,...t){if(n=We(n),y0("collection","path",e),n instanceof Yd){const r=mt.fromString(e,...t);return VT(r),new Rr(n,null,r)}{if(!(n instanceof Rt||n instanceof Rr))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return VT(r),new Rr(n.firestore,null,r)}}function _t(n,e,...t){if(n=We(n),arguments.length===1&&(e=jg.newId()),y0("doc","path",e),n instanceof Yd){const r=mt.fromString(e,...t);return MT(r),new Rt(n,null,new be(r))}{if(!(n instanceof Rt||n instanceof Rr))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(mt.fromString(e,...t));return MT(r),new Rt(n.firestore,n instanceof Rr?n.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="AsyncQueue";class Rb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new lS(this,"async_queue_retry"),this._c=()=>{const r=_p();r&&ye(Ab,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=_p();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_p();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Zo(e))throw e;ye(Ab,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",xb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Wg.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:xb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ms extends Yd{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Rb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rb(e),this._firestoreClient=void 0,await e}}}function BO(n,e){const t=typeof n=="object"?n:Nd(),r=typeof n=="string"?n:ud,o=Yc(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=yg("firestore");l&&UO(o,...l)}return o}function iu(n){if(n._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||zO(n),n._firestoreClient}function zO(n){const e=n._freezeSettings(),t=(function(o,l,d,m){return new uj(o,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,AS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new PO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(fn.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(fn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Zc(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:zt("string",oi._jsonSchemaVersion),bytes:zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(Zc(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:zt("string",$i._jsonSchemaVersion),latitude:zt("number"),longitude:zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Zc(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Yi(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:zt("string",Yi._jsonSchemaVersion),vectorValues:zt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qO=/^__.*__$/;class FO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Jc(e,this.data,t,this.fieldTransforms)}}class xS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Vr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class ay{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ay({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ed(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(CS(this.Ac)&&qO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class HO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Hd(e)}Cc(e,t,r,o=!1){return new ay({Ac:e,methodName:t,Dc:r,path:dn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ru(n){const e=n._freezeSettings(),t=Hd(n._databaseId);return new HO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oy(n,e,t,r,o,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);cy("Data must be an object, but it was:",d,r);const m=DS(r,d);let y,p;if(l.merge)y=new Yn(d.fieldMask),p=d.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const w=ig(e,b,t);if(!d.contains(w))throw new ge(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);OS(_,w)||_.push(w)}y=new Yn(_),p=d.fieldTransforms.filter((b=>y.covers(b.field)))}else y=null,p=d.fieldTransforms;return new FO(new jn(m),y,p)}class Qd extends Kd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qd}}class ly extends Kd{_toFieldTransform(e){return new Mj(e.path,new Bc)}isEqual(e){return e instanceof ly}}function NS(n,e,t,r){const o=n.Cc(1,e,t);cy("Data must be an object, but it was:",o,r);const l=[],d=jn.empty();Mr(r,((y,p)=>{const _=uy(e,y,t);p=We(p);const b=o.yc(_);if(p instanceof Qd)l.push(_);else{const w=au(p,b);w!=null&&(l.push(_),d.set(_,w))}}));const m=new Yn(l);return new xS(d,m,o.fieldTransforms)}function IS(n,e,t,r,o,l){const d=n.Cc(1,e,t),m=[ig(e,r,t)],y=[o];if(l.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)m.push(ig(e,l[w])),y.push(l[w+1]);const p=[],_=jn.empty();for(let w=m.length-1;w>=0;--w)if(!OS(p,m[w])){const I=m[w];let M=y[w];M=We(M);const z=d.yc(I);if(M instanceof Qd)p.push(I);else{const j=au(M,z);j!=null&&(p.push(I),_.set(I,j))}}const b=new Yn(p);return new xS(_,b,d.fieldTransforms)}function GO(n,e,t,r=!1){return au(t,n.Cc(r?4:3,e))}function au(n,e){if(jS(n=We(n)))return cy("Unsupported field value:",e,n),DS(n,e);if(n instanceof Kd)return(function(r,o){if(!CS(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const l=[];let d=0;for(const m of r){let y=au(m,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(n,e)}return(function(r,o){if((r=We(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Oj(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=we.fromDate(r);return{timestampValue:pd(o.serializer,l)}}if(r instanceof we){const l=new we(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:pd(o.serializer,l)}}if(r instanceof $i)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:W0(o.serializer,r._byteString)};if(r instanceof Rt){const l=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(l))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Yi)return(function(d,m){return{mapValue:{fields:{[R0]:{stringValue:x0},[hd]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Lg(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Pd(r)}`)})(n,e)}function DS(n,e){const t={};return E0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Mr(n,((r,o)=>{const l=au(o,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function jS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof we||n instanceof $i||n instanceof oi||n instanceof Rt||n instanceof Kd||n instanceof Yi)}function cy(n,e,t){if(!jS(t)||!v0(t)){const r=Pd(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ig(n,e,t){if((e=We(e))instanceof su)return e._internalPath;if(typeof e=="string")return uy(n,e);throw Ed("Field path arguments must be of type string or ",n,!1,void 0,t)}const $O=new RegExp("[~\\*/\\[\\]]");function uy(n,e,t){if(e.search($O)>=0)throw Ed(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new su(...e.split("."))._internalPath}catch{throw Ed(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ed(n,e,t,r,o){const l=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new ge(ne.INVALID_ARGUMENT,m+n+y)}function OS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new YO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Xd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class YO extends PS{data(){return super.data()}}function Xd(n,e){return typeof e=="string"?uy(n,e):e instanceof su?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class dy extends hy{}function it(n,e,...t){let r=[];e instanceof hy&&r.push(e),r=r.concat(t),(function(l){const d=l.filter((y=>y instanceof fy)).length,m=l.filter((y=>y instanceof Wd)).length;if(d>1||d>0&&m>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class Wd extends dy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Wd(e,t,r)}_apply(e){const t=this._parse(e);return MS(e._query,t),new Ls(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=ru(e.firestore);return(function(l,d,m,y,p,_,b){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ib(b,_);const M=[];for(const z of b)M.push(Nb(y,l,z));w={arrayValue:{values:M}}}else w=Nb(y,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ib(b,_),w=GO(m,d,b,_==="in"||_==="not-in");return Bt.create(p,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ct(n,e,t){const r=e,o=Xd("where",n);return Wd._create(o,r,t)}class fy extends hy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:vi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const y of m)MS(d,y),d=Yp(d,y)})(e._query,t),new Ls(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class my extends dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new my(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uc(l,d)})(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Jo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function Lt(n,e="asc"){const t=e,r=Xd("orderBy",n);return my._create(r,t)}class py extends dy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new py(e,t,r)}_apply(e){return new Ls(e.firestore,e.converter,fd(e._query,this._limit,this._limitType))}}function KO(n){return py._create("limit",n,"F")}function Nb(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k0(e)&&t.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(mt.fromString(t));if(!be.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GT(n,new be(r))}if(t instanceof Rt)return GT(n,t._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pd(t)}.`)}function Ib(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MS(n,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class QO{convertValue(e,t="none"){switch(Dr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Mr(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[hd].arrayValue?.values?.map((r=>jt(r.doubleValue)));return new Yi(t)}convertGeoPoint(e){return new $i(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Vd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mc(e));default:return null}}convertTimestamp(e){const t=Nr(e);return new we(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=mt.fromString(e);Je(iS(r),9688,{name:e});const o=new Vc(r.get(1),r.get(3)),l=new be(r.popFirst(5));return o.isEqual(t)||Ps(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Ec{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ba extends PS{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Xd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ba._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ba._jsonSchemaVersion="firestore/documentSnapshot/1.0",ba._jsonSchema={type:zt("string",ba._jsonSchemaVersion),bundleSource:zt("string","DocumentSnapshot"),bundleName:zt("string"),bundle:zt("string")};class ed extends ba{data(e={}){return super.data(e)}}class wa{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ec(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new ed(this._firestore,this._userDataWriter,r.key,r,new Ec(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const y=new ed(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new ed(o._firestore,o._userDataWriter,m.doc.key,m.doc,new Ec(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return m.type!==0&&(p=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:XO(m.type),doc:y,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function XO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(n){n=Pn(n,Rt);const e=Pn(n.firestore,Ms);return VO(iu(e),n._key).then((t=>VS(e,n,t)))}wa._jsonSchemaVersion="firestore/querySnapshot/1.0",wa._jsonSchema={type:zt("string",wa._jsonSchemaVersion),bundleSource:zt("string","QuerySnapshot"),bundleName:zt("string"),bundle:zt("string")};class yy extends QO{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function sn(n){n=Pn(n,Ls);const e=Pn(n.firestore,Ms),t=iu(e),r=new yy(e);return kS(n._query),LO(t,n._query).then((o=>new wa(e,r,n,o)))}function Ns(n,e,t){n=Pn(n,Rt);const r=Pn(n.firestore,Ms),o=gy(n.converter,e,t);return Zd(r,[oy(ru(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,kn.none())])}function Pr(n,e,t,...r){n=Pn(n,Rt);const o=Pn(n.firestore,Ms),l=ru(o);let d;return d=typeof(e=We(e))=="string"||e instanceof su?IS(l,"updateDoc",n._key,e,t,r):NS(l,"updateDoc",n._key,e),Zd(o,[d.toMutation(n._key,kn.exists(!0))])}function Fc(n,e){const t=Pn(n.firestore,Ms),r=_t(n),o=gy(n.converter,e);return Zd(t,[oy(ru(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,kn.exists(!1))]).then((()=>r))}function lu(n,...e){n=We(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Cb(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cb(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,d,m;if(n instanceof Rt)d=Pn(n.firestore,Ms),m=Ld(n._key.path),l={next:y=>{e[r]&&e[r](VS(d,n,y))},error:e[r+1],complete:e[r+2]};else{const y=Pn(n,Ls);d=Pn(y.firestore,Ms),m=y._query;const p=new yy(d);l={next:_=>{e[r]&&e[r](new wa(d,p,y,_))},error:e[r+1],complete:e[r+2]},kS(n._query)}return(function(p,_,b,w){const I=new ry(w),M=new ny(_,I,b);return p.asyncQueue.enqueueAndForget((async()=>Jg(await _d(p),M))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>ey(await _d(p),M)))}})(iu(d),m,o,l)}function Zd(n,e){return(function(r,o){const l=new Cs;return r.asyncQueue.enqueueAndForget((async()=>AO(await MO(r),o,l))),l.promise})(iu(n),e)}function VS(n,e,t){const r=t.docs.get(e._key),o=new yy(n);return new ba(n,o,e._key,r,new Ec(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ru(e)}set(e,t,r){this._verifyNotCommitted();const o=Tp(e,this._firestore),l=gy(o.converter,t,r),d=oy(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,r);return this._mutations.push(d.toMutation(o._key,kn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Tp(e,this._firestore);let d;return d=typeof(t=We(t))=="string"||t instanceof su?IS(this._dataReader,"WriteBatch.update",l._key,t,r,o):NS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,kn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tp(e,this._firestore);return this._mutations=this._mutations.concat(new Ug(t._key,kn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tp(n,e){if((n=We(n)).firestore!==e)throw new ge(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Kt(){return new ly("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(n){return iu(n=Pn(n,Ms)),new WO(n,(e=>Zd(n,e)))}(function(e,t=!0){(function(o){Xo=o})(ja),xr(new Ds("firestore",((r,{instanceIdentifier:o,options:l})=>{const d=r.getProvider("app").getImmediate(),m=new Ms(new GD(r.getProvider("auth-internal")),new KD(d,r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(p.options.projectId,_)})(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),li(jT,OT,e),li(jT,OT,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,r,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,En(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||r.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="us-central1";class eP{constructor(e,t,r,o,l=sg,d=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new JO(e,t,r,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(l);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=sg}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function tP(n,e,t){const r=Vs(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(xd(n.emulatorOrigin),Cd("Functions",!0))}const Db="@firebase/functions",jb="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP="auth-internal",iP="app-check-internal",sP="messaging-internal";function rP(n){const e=(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(nP),d=t.getProvider(sP),m=t.getProvider(iP);return new eP(o,l,d,m,r)};xr(new Ds(LS,e,"PUBLIC").setMultipleInstances(!0)),li(Db,jb,n),li(Db,jb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(n=Nd(),e=sg){const r=Yc(We(n),LS).getImmediate({identifier:e}),o=yg("functions");return o&&oP(r,...o),r}function oP(n,e,t){tP(We(n),e,t)}rP();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="firebasestorage.googleapis.com",BS="storageBucket",lP=120*1e3,cP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends Xi{constructor(e,t,r=0){super(bp(e),`Firebase Storage: ${t} (${bp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function bp(n){return"storage/"+n}function vy(){const n="An unknown error occurred, please check the error payload for server response.";return new Ct(xt.UNKNOWN,n)}function uP(n){return new Ct(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function hP(n){return new Ct(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function dP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(xt.UNAUTHENTICATED,n)}function fP(){return new Ct(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function mP(n){return new Ct(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function pP(){return new Ct(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gP(){return new Ct(xt.CANCELED,"User canceled the upload/download.")}function yP(n){return new Ct(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function vP(n){return new Ct(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function _P(){return new Ct(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BS+"' property when initializing the app?")}function EP(){return new Ct(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function TP(){return new Ct(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function bP(n){return new Ct(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rg(n){return new Ct(xt.INVALID_ARGUMENT,n)}function zS(){return new Ct(xt.APP_DELETED,"The Firebase app was deleted.")}function wP(n){return new Ct(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ic(n,e){return new Ct(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function hc(n){throw new Ct(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(r.path==="")return r;throw vP(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function p(ie){ie.path_=decodeURIComponent(ie.path)}const _="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",I=new RegExp(`^https?://${b}/${_}/b/${o}/o${w}`,"i"),M={bucket:1,path:3},z=t===US?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",U=new RegExp(`^https?://${z}/${o}/${j}`,"i"),Q=[{regex:m,indices:y,postModify:l},{regex:I,indices:M,postModify:p},{regex:U,indices:{bucket:1,path:2},postModify:p}];for(let ie=0;ie<Q.length;ie++){const ee=Q[ie],te=ee.regex.exec(e);if(te){const D=te[ee.indices.bucket];let R=te[ee.indices.path];R||(R=""),r=new Kn(D,R),ee.postModify(r);break}}if(r==null)throw yP(e);return r}}class SP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AP(n,e,t){let r=1,o=null,l=null,d=!1,m=0;function y(){return m===2}let p=!1;function _(...j){p||(p=!0,e.apply(null,j))}function b(j){o=setTimeout(()=>{o=null,n(I,y())},j)}function w(){l&&clearTimeout(l)}function I(j,...U){if(p){w();return}if(j){w(),_.call(null,j,...U);return}if(y()||d){w(),_.call(null,j,...U);return}r<64&&(r*=2);let Q;m===1?(m=2,Q=0):Q=(r+Math.random())*1e3,b(Q)}let M=!1;function z(j){M||(M=!0,w(),!p&&(o!==null?(j||(m=2),clearTimeout(o),b(0)):j||(m=1)))}return b(0),l=setTimeout(()=>{d=!0,z(!0)},t),z}function RP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xP(n){return n!==void 0}function CP(n){return typeof n=="object"&&!Array.isArray(n)}function _y(n){return typeof n=="string"||n instanceof String}function Ob(n){return Ey()&&n instanceof Blob}function Ey(){return typeof Blob<"u"}function Pb(n,e,t,r){if(r<e)throw rg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function qS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const o=e(r)+"="+e(n[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var Sa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Sa||(Sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,r,o,l,d,m,y,p,_,b,w=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,z)=>{this.resolve_=M,this.reject_=z,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Uh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const y=m.loaded,p=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,p)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===Sa.NO_ERROR,y=l.getStatus();if(!m||NP(y,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Sa.ABORT;r(!1,new Uh(!1,null,_));return}const p=this.successCodes_.indexOf(y)!==-1;r(!0,new Uh(p,l))})},t=(r,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());xP(y)?l(y):l()}catch(y){d(y)}else if(m!==null){const y=vy();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(o.canceled){const y=this.appDelete_?zS():gP();d(y)}else{const y=pP();d(y)}};this.canceled_?t(!1,new Uh(!1,null,!0)):this.backoffId_=AP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&RP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function DP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function jP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function OP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function PP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function kP(n,e,t,r,o,l,d=!0,m=!1){const y=qS(n.urlParams),p=n.url+y,_=Object.assign({},n.headers);return OP(_,e),DP(_,t),jP(_,l),PP(_,r),new IP(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function VP(...n){const e=MP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ey())return new Blob(n);throw new Ct(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function LP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(n){if(typeof atob>"u")throw bP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wp{constructor(e,t){this.data=e,this.contentType=t||null}}function BP(n,e){switch(n){case qi.RAW:return new wp(FS(e));case qi.BASE64:case qi.BASE64URL:return new wp(HS(n,e));case qi.DATA_URL:return new wp(qP(e),FP(e))}throw vy()}function FS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,d=n.charCodeAt(++t);r=65536|(l&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function zP(n){let e;try{e=decodeURIComponent(n)}catch{throw Ic(qi.DATA_URL,"Malformed data URL.")}return FS(e)}function HS(n,e){switch(n){case qi.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Ic(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case qi.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Ic(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=UP(e)}catch(o){throw o.message.includes("polyfill")?o:Ic(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class GS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Ic(qi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=HP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function qP(n){const e=new GS(n);return e.base64?HS(qi.BASE64,e.rest):zP(e.rest)}function FP(n){return new GS(n).contentType}function HP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t){let r=0,o="";Ob(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ob(this.data_)){const r=this.data_,o=LP(r,e,t);return o===null?null:new Tr(o)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Tr(r,!0)}}static getBlob(...e){if(Ey()){const t=e.map(r=>r instanceof Tr?r.data_:r);return new Tr(VP.apply(null,t))}else{const t=e.map(d=>_y(d)?BP(qi.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let l=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[l++]=d[m]}),new Tr(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(n){let e;try{e=JSON.parse(n)}catch{return null}return CP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function $P(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function YS(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(n,e){return e}class Rn{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||YP}}let Bh=null;function KP(n){return!_y(n)||n.length<2?n:YS(n)}function KS(){if(Bh)return Bh;const n=[];n.push(new Rn("bucket")),n.push(new Rn("generation")),n.push(new Rn("metageneration")),n.push(new Rn("name","fullPath",!0));function e(l,d){return KP(d)}const t=new Rn("name");t.xform=e,n.push(t);function r(l,d){return d!==void 0?Number(d):d}const o=new Rn("size");return o.xform=r,n.push(o),n.push(new Rn("timeCreated")),n.push(new Rn("updated")),n.push(new Rn("md5Hash",null,!0)),n.push(new Rn("cacheControl",null,!0)),n.push(new Rn("contentDisposition",null,!0)),n.push(new Rn("contentEncoding",null,!0)),n.push(new Rn("contentLanguage",null,!0)),n.push(new Rn("contentType",null,!0)),n.push(new Rn("metadata","customMetadata",!0)),Bh=n,Bh}function QP(n,e){function t(){const r=n.bucket,o=n.fullPath,l=new Kn(r,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function XP(n,e,t){const r={};r.type="file";const o=t.length;for(let l=0;l<o;l++){const d=t[l];r[d.local]=d.xform(r,e[d.server])}return QP(r,n),r}function QS(n,e,t){const r=$S(e);return r===null?null:XP(n,r,t)}function WP(n,e,t,r){const o=$S(e);if(o===null||!_y(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(p=>{const _=n.bucket,b=n.fullPath,w="/b/"+d(_)+"/o/"+d(b),I=Ty(w,t,r),M=qS({alt:"media",token:p});return I+M})[0]}function ZP(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class XS{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(n){if(!n)throw vy()}function JP(n,e){function t(r,o){const l=QS(n,o,e);return WS(l!==null),l}return t}function ek(n,e){function t(r,o){const l=QS(n,o,e);return WS(l!==null),WP(l,o,n.host,n._protocol)}return t}function ZS(n){function e(t,r){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=fP():o=dP():t.getStatus()===402?o=hP(n.bucket):t.getStatus()===403?o=mP(n.path):o=r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}return e}function tk(n){const e=ZS(n);function t(r,o){let l=e(r,o);return r.getStatus()===404&&(l=uP(n.path)),l.serverResponse=o.serverResponse,l}return t}function nk(n,e,t){const r=e.fullServerUrl(),o=Ty(r,n.host,n._protocol),l="GET",d=n.maxOperationRetryTime,m=new XS(o,l,ek(n,t),d);return m.errorHandler=tk(e),m}function ik(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function sk(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=ik(null,e)),r}function rk(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let Q="";for(let ie=0;ie<2;ie++)Q=Q+Math.random().toString().slice(2);return Q}const y=m();d["Content-Type"]="multipart/related; boundary="+y;const p=sk(e,r,o),_=ZP(p,t),b="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+y+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+y+"--",I=Tr.getBlob(b,r,w);if(I===null)throw EP();const M={name:p.fullPath},z=Ty(l,n.host,n._protocol),j="POST",U=n.maxUploadRetryTime,G=new XS(z,j,JP(n,t),U);return G.urlParams=M,G.headers=d,G.body=I.uploadData(),G.errorHandler=ZS(e),G}class ak{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o,l){if(this.sent_)throw hc("cannot .send() more than once");if(Vs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw hc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw hc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw hc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw hc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ok extends ak{initXhr(){this.xhr_.responseType="text"}}function JS(){return new ok}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Da(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return YS(this._location.path)}get storage(){return this._service}get parent(){const e=GP(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new Da(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw wP(e)}}function lk(n,e,t){n._throwIfRoot("uploadBytes");const r=rk(n.storage,n._location,KS(),new Tr(e,!0),t);return n.storage.makeRequestWithTokens(r,JS).then(o=>({metadata:o,ref:n}))}function ck(n){n._throwIfRoot("getDownloadURL");const e=nk(n.storage,n._location,KS());return n.storage.makeRequestWithTokens(e,JS).then(t=>{if(t===null)throw TP();return t})}function uk(n,e){const t=$P(n._location.path,e),r=new Kn(n._location.bucket,t);return new Da(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(n){return/^[A-Za-z]+:\/\//.test(n)}function dk(n,e){return new Da(n,e)}function eA(n,e){if(n instanceof by){const t=n;if(t._bucket==null)throw _P();const r=new Da(t,t._bucket);return e!=null?eA(r,e):r}else return e!==void 0?uk(n,e):n}function fk(n,e){if(e&&hk(e)){if(n instanceof by)return dk(n,e);throw rg("To use ref(service, url), the first argument must be a Storage instance.")}else return eA(n,e)}function kb(n,e){const t=e?.[BS];return t==null?null:Kn.makeFromBucketSpec(t,n)}function mk(n,e,t,r={}){n.host=`${e}:${t}`;const o=Vs(e);o&&(xd(`https://${n.host}/b`),Cd("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:yw(l,n.app.options.projectId))}class by{constructor(e,t,r,o,l,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=US,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=lP,this._maxUploadRetryTime=cP,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=kb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=kb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Da(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new SP(zS());{const d=kP(e,this._appId,r,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const Mb="@firebase/storage",Vb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="storage";function pk(n,e,t){return n=We(n),lk(n,e,t)}function gk(n){return n=We(n),ck(n)}function yk(n,e){return n=We(n),fk(n,e)}function vk(n=Nd(),e){n=We(n);const r=Yc(n,tA).getImmediate({identifier:e}),o=yg("storage");return o&&_k(r,...o),r}function _k(n,e,t,r={}){mk(n,e,t,r)}function Ek(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new by(t,r,o,e,ja)}function Tk(){xr(new Ds(tA,Ek,"PUBLIC").setMultipleInstances(!0)),li(Mb,Vb,""),li(Mb,Vb,"esm2020")}Tk();var bk="AIzaSyBTl0Jl9ZMQBA84LBbECwzUz5jcL4dYV3Y",wk="mduwebsite1345.firebaseapp.com",Sk="mduwebsite1345",Ak="mduwebsite1345.firebasestorage.app",Rk="653256711691",xk="1:653256711691:web:5aca0f2e84ed19df90710e";const Ck={apiKey:bk,authDomain:wk,projectId:Sk,storageBucket:Ak,messagingSenderId:Rk,appId:xk},Jd=rT().length?rT()[0]:Ew(Ck),Yt=UD(Jd),Ae=BO(Jd);aP(Jd);const Nk=vk(Jd),Ik=/^\+[1-9]\d{7,14}$/,Dk=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(""),[o,l]=q.useState(""),[d,m]=q.useState(""),[y,p]=q.useState(null),[_,b]=q.useState(""),[w,I]=q.useState(!1),M=Ko(),z=()=>M("/members");q.useEffect(()=>{const te=Dd(Yt,D=>{D&&z()});return()=>te()},[]);const j=async te=>{if(te.preventDefault(),!w){b(""),I(!0);try{await mI(Yt,n.trim(),t),z()}catch(D){console.error("[Email login] ",D),b(D?.message??"Login failed")}finally{I(!1)}}},U=async()=>{if(!w){b(""),I(!0);try{const te=new zi;await o0(Yt,te),z()}catch(te){console.error("[Google login] ",te),b(te?.message??"Google sign-in failed")}finally{I(!1)}}},G=()=>{if(window.recaptchaVerifier)return window.recaptchaVerifier;try{window.recaptchaVerifier=new Bp(Yt,"recaptcha-container",{size:"invisible"})}catch(te){console.warn("[reCAPTCHA modular ctor failed, trying compat]",te),window.recaptchaVerifier=new Bp("recaptcha-container",{size:"invisible"},Yt)}return window.recaptchaVerifier};q.useEffect(()=>()=>{try{window.recaptchaVerifier?.clear?.()}catch{}window.recaptchaVerifier=void 0},[]);const Q=q.useMemo(()=>Ik.test(o.trim()),[o]),ie=async()=>{if(!(w||!Q)){b(""),I(!0);try{const te=G(),D=await s0(Yt,o.trim(),te);p(D)}catch(te){console.error("[sendPhoneCode] ",te),b(te?.message??"Failed to send code");try{window.recaptchaVerifier?.reset?.()}catch{}}finally{I(!1)}}},ee=async()=>{if(!(!y||w||d.trim().length<6)){b(""),I(!0);try{await y.confirm(d.trim()),z()}catch(te){console.error("[verifyPhoneCode] ",te),b(te?.message??"Invalid verification code")}finally{I(!1)}}};return u.jsx("div",{children:u.jsxs("div",{className:"background",children:[u.jsx("div",{className:"shape"}),u.jsx("div",{className:"shape"}),u.jsxs("form",{onSubmit:j,"aria-busy":w,children:[u.jsx("h3",{children:"Login Here"}),u.jsx("label",{htmlFor:"email",children:"Email"}),u.jsx("input",{id:"email",type:"email",placeholder:"you@ucla.edu",value:n,onChange:te=>e(te.target.value),autoComplete:"email",required:!0,disabled:w}),u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsx("input",{id:"password",type:"password",placeholder:"Password",value:t,onChange:te=>r(te.target.value),autoComplete:"current-password",required:!0,disabled:w}),u.jsx("button",{type:"submit",disabled:w,children:w?"Signing in…":"Log In"}),u.jsx("div",{className:"social",style:{marginTop:20},children:u.jsx("button",{type:"button",className:"go",onClick:U,"aria-label":"Continue with Google",disabled:w,children:"Continue with Google"})}),u.jsxs("fieldset",{style:{marginTop:24,border:"none",padding:0},children:[u.jsx("legend",{style:{fontWeight:600,marginBottom:8},children:"Or sign in with phone"}),y?u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{id:"code",type:"text",placeholder:"123456",value:d,onChange:te=>m(te.target.value),disabled:w}),u.jsx("button",{type:"button",onClick:ee,disabled:w||d.trim().length<6,children:"Verify & Sign in"}),u.jsx("button",{type:"button",onClick:()=>{p(null),m("");try{window.recaptchaVerifier?.reset?.()}catch{}},disabled:w,style:{marginLeft:8},children:"Use a different phone"})]}):u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{id:"phone",type:"tel",placeholder:"+1##########",value:o,onChange:te=>l(te.target.value),disabled:w,"aria-invalid":o.length>0&&!Q}),u.jsx("button",{type:"button",onClick:ie,disabled:w||!Q,children:"Send verification code"})]})]}),_&&u.jsx("p",{style:{color:"salmon",marginTop:16},role:"alert",children:_}),u.jsx("div",{id:"recaptcha-container"}),u.jsxs("p",{style:{marginTop:16},children:["No account? ",u.jsx(Dn,{to:"/register",children:"Register"})]})]})]})})};function jk(n,e){return{uid:n,name:e.name??"",email:e.email??"",phoneNumber:e.phoneNumber??"",year:e.year??"",major:e.major??"",instrument:e.instrument??"",instruments:Array.isArray(e.instruments)?e.instruments:[],section:e.section??"",bio:e.bio??"",roles:Array.isArray(e.roles)?e.roles:["performer"],returning:e.returning??"",photoURL:e.photoURL??"",createdAt:e.createdAt,updatedAt:e.updatedAt}}async function Ok(n){const e=await ou(_t(Ae,"users",n));return e.exists()?jk(n,e.data()):null}async function ag(n,e){const t=_t(Ae,"users",n),r={...e,uid:n,...Array.isArray(e.roles)?{roles:e.roles}:{},updatedAt:Kt(),...e&&!e.createdAt?{createdAt:Kt()}:{}};await Ns(t,r,{merge:!0})}const Lb="recaptcha-container-register",Pk=()=>{const[n,e]=q.useState({name:"",email:"",phoneNumber:"",year:"",major:"",instrument:"",instrumentsCsv:"",sectionCsv:"",returning:"",bio:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",password:""}),[t,r]=q.useState(""),[o,l]=q.useState(!1),[d,m]=q.useState(""),[y,p]=q.useState(""),[_,b]=q.useState(null),w=Ko(),I=te=>{const{name:D,value:R}=te.target;e(x=>({...x,[D]:R}))},M=q.useMemo(()=>n.instrumentsCsv.split(",").map(te=>te.trim()).filter(Boolean),[n.instrumentsCsv]),z=q.useMemo(()=>{const te=n.sectionCsv.split(",").map(D=>D.trim()).filter(Boolean);return te.length?te[0]:""},[n.sectionCsv]),j=async(te,D,R)=>{await ag(te,{name:n.name,email:n.email||D||void 0,phoneNumber:n.phoneNumber,year:n.year,major:n.major,instrument:n.instrument,instruments:M.length?M:void 0,section:z||void 0,returning:n.returning,bio:n.bio,emergencyName:n.emergencyName,emergencyPhone:n.emergencyPhone,emergencyRelation:n.emergencyRelation,roles:["performer"],...R||{}})},U=async te=>{te.preventDefault(),r(""),l(!0);try{const D=await fI(Yt,n.email,n.password);await j(D.user.uid,D.user.email),w("/members")}catch(D){r(D?.message||"Failed to create account")}finally{l(!1)}},G=async()=>{r(""),l(!0);try{const te=new zi,D=await o0(Yt,te);await j(D.user.uid,D.user.email),w("/members")}catch(te){r(te?.message||"Google sign-in failed")}finally{l(!1)}},Q=te=>(window._registerRecaptcha||(window._registerRecaptcha=new Bp(te,Lb,{size:"normal"})),window._registerRecaptcha),ie=async()=>{if(r(""),!d){r("Enter a phone number in E.164 format, e.g. +13105551234");return}l(!0);try{const te=Q(Yt),D=await s0(Yt,d,te);b(D)}catch(te){r(te?.message||"Failed to send verification code")}finally{l(!1)}},ee=async()=>{if(r(""),!_||!y){r("Enter the verification code you received");return}l(!0);try{const te=await _.confirm(y);await j(te.user.uid,te.user.email,{phoneNumber:d}),w("/members")}catch(te){r(te?.message||"Verification failed")}finally{l(!1)}};return u.jsxs("section",{className:"register-container",children:[u.jsx("h1",{className:"register-title",children:"Create your account"}),u.jsx("p",{className:"register-subtitle",children:"Use email, Google, or phone. You can edit details later in your portal."}),u.jsxs("form",{onSubmit:U,className:"register-form",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"name",children:"Full Name"}),u.jsx("input",{className:"input",id:"name",name:"name",value:n.name,onChange:I,placeholder:"Jane Doe",required:!0})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),u.jsx("input",{className:"input",id:"email",name:"email",type:"email",value:n.email,onChange:I,placeholder:"you@ucla.edu",autoComplete:"email",required:!0})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phoneNumber",children:"Phone"}),u.jsx("input",{className:"input",id:"phoneNumber",name:"phoneNumber",value:n.phoneNumber,onChange:I,placeholder:"(###) ###-####"})]})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"year",children:"Year in School"}),u.jsxs("select",{className:"input",id:"year",name:"year",value:n.year,onChange:I,required:!0,children:[u.jsx("option",{value:"",children:"Select Year"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"major",children:"Major"}),u.jsx("input",{className:"input",id:"major",name:"major",value:n.major,onChange:I,placeholder:"Physics, EE, Music, ..."})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrument",children:"Primary Instrument"}),u.jsx("input",{className:"input",id:"instrument",name:"instrument",value:n.instrument,onChange:I,placeholder:"Violin, Trumpet, Vihuela..."})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrumentsCsv",children:"Instrument(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"instrumentsCsv",name:"instrumentsCsv",value:n.instrumentsCsv,onChange:I,placeholder:"violin, guitar, trumpet, voice"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"sectionCsv",children:"Section(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"sectionCsv",name:"sectionCsv",value:n.sectionCsv,onChange:I,placeholder:"violas, violins, harp, voces"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"returning",children:"Are you a returning member?"}),u.jsxs("select",{className:"input",id:"returning",name:"returning",value:n.returning,onChange:I,required:!0,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"Yes",children:"Yes"}),u.jsx("option",{value:"No",children:"No"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"bio",children:"Short Bio"}),u.jsx("textarea",{className:"input",id:"bio",name:"bio",value:n.bio,onChange:I,placeholder:"Tell us a little about your experience",rows:3})]}),u.jsxs("div",{className:"grid-3 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyName",children:"Emergency Contact Name"}),u.jsx("input",{className:"input",id:"emergencyName",name:"emergencyName",value:n.emergencyName,onChange:I})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyPhone",children:"Emergency Contact Phone"}),u.jsx("input",{className:"input",id:"emergencyPhone",name:"emergencyPhone",value:n.emergencyPhone,onChange:I})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyRelation",children:"Relation"}),u.jsx("input",{className:"input",id:"emergencyRelation",name:"emergencyRelation",value:n.emergencyRelation,onChange:I})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),u.jsx("input",{className:"input",type:"password",id:"password",name:"password",value:n.password,onChange:I,required:!0})]}),t&&u.jsx("p",{className:"error",children:t}),u.jsx("button",{type:"submit",className:"submit",disabled:o,children:o?"Creating account…":"Register with Email"})]}),u.jsx("div",{className:"divider",children:u.jsx("span",{children:"or"})}),u.jsx("div",{className:"oauth-row",children:u.jsx("button",{type:"button",className:"btn-google",onClick:G,disabled:o,"aria-label":"Continue with Google",children:"Continue with Google"})}),u.jsxs("div",{className:"phone-card",children:[_?u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{className:"input",id:"code",value:y,onChange:te=>p(te.target.value),placeholder:"123456"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:ee,disabled:o||!y,children:"Verify & Create account"})]})]}):u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{className:"input",id:"phone",type:"tel",value:d,onChange:te=>m(te.target.value),placeholder:"+1##########"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:ie,disabled:o||!d,children:"Send verification code"})]})]}),u.jsx("div",{id:Lb})]})]})},kk={};function Mk(n){const e="recaptcha-v3";if(document.getElementById(e))return;const t=document.createElement("script");t.id=e,t.async=!0,t.defer=!0,t.src=`https://www.google.com/recaptcha/api.js?render=${n}`,document.head.appendChild(t)}function nA(){const[n,e]=q.useState(!1),t=q.useRef(typeof import.meta<"u"?kk?.VITE_RECAPTCHA_SITE_KEY??null:null);q.useEffect(()=>{if(!t.current){e(!0);return}Mk(t.current);const o=()=>e(!0),l=window.setInterval(()=>{window.grecaptcha?.execute&&(window.clearInterval(l),o())},100);return()=>window.clearInterval(l)},[]);const r=q.useCallback(async o=>{if(!t.current)return`dev_${o}_${Date.now()}`;const l=window.grecaptcha;if(!l||!l.execute)throw new Error("reCAPTCHA not ready");return await l.execute(t.current,{action:o})},[]);return{ready:n,execute:r}}async function iA(n){if(!n?.name||!n?.email)throw new Error("Name and email are required");const e={type:"client_request",name:n.name,email:n.email,phone:n.phone??null,org:n.org??null,message:n.message??null,event:n.event??null,recaptchaToken:n.recaptchaToken??null,status:"new",createdAt:Kt(),updatedAt:Kt()},t=await Fc(ht(Ae,"clients"),e);try{n.event&&(n.event.title||n.event.date)&&await Fc(ht(Ae,"events"),{title:n.event.title||"Client Inquiry",date:n.event.date??null,start:n.event.start??null,end:n.event.end??null,location:n.event.location??null,status:"inquiry",visibility:"private",source:"client_form",clientRef:t.path,createdAt:Kt(),updatedAt:Kt()})}catch(o){console.warn("[submitClientRequest] event draft create failed:",o)}const r="https://https://script.google.com/u/0/home/projects/1FIwKXVOJn4P5Toveh84N7GisHXMpfKnGDv3Xrr-_j384zPbr8hW05Lvk/edit";try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,firestoreId:t.id})})}catch(o){console.warn("[submitClientRequest] webhook failed:",o)}return{id:t.id}}const Vk=()=>{const[n,e]=q.useState({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""}),[t,r]=q.useState("idle"),[o,l]=q.useState(""),{execute:d}=nA(),m=p=>{e(_=>({..._,[p.target.name]:p.target.value}))};async function y(p){if(p.preventDefault(),l(""),n.website&&n.website.trim().length>0){r("success");return}try{r("submitting");const _=await d("client_booking"),b=n.eventDate?new Date(`${n.eventDate}T09:00`).toISOString():void 0;await iA({recaptchaToken:_,name:n.name,email:n.email,phone:n.phone||void 0,org:void 0,message:[n.eventDetails?`Details: ${n.eventDetails}`:"",n.extraDetails?`Extra: ${n.extraDetails}`:""].filter(Boolean).join(`
`),event:{title:"Client Inquiry",date:n.eventDate||void 0,start:b,end:void 0,location:n.eventLocation||void 0}}),r("success"),e({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""})}catch(_){r("error"),l(_?.message||"Failed to submit. Please try again later.")}}return u.jsxs("section",{className:"form-page bookus",children:[u.jsx("h1",{children:"Book Us"}),u.jsx("p",{children:"Please fill out this form to request a performance booking."}),u.jsxs("form",{onSubmit:y,className:"bookus-form",children:[u.jsx("input",{name:"website",value:n.website,onChange:m,className:"hp",tabIndex:-1,"aria-hidden":!0}),u.jsx("input",{name:"name",placeholder:"Your Name",value:n.name,onChange:m,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",value:n.email,onChange:m,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",value:n.phone,onChange:m,required:!0}),u.jsx("input",{name:"eventDate",type:"date",value:n.eventDate,onChange:m,required:!0}),u.jsx("input",{name:"eventLocation",placeholder:"Event Location",value:n.eventLocation,onChange:m,required:!0}),u.jsx("textarea",{name:"eventDetails",placeholder:"Tell us about your event...",value:n.eventDetails,onChange:m,required:!0}),u.jsx("textarea",{name:"extraDetails",placeholder:"Anything else?",value:n.extraDetails,onChange:m}),u.jsx("button",{type:"submit",disabled:t==="submitting",children:t==="submitting"?"Submitting…":"Submit Request"}),t==="success"&&u.jsx("p",{className:"ok",children:"Thank you for your inquiry! We will get back to you soon."}),t==="error"&&u.jsx("p",{className:"err",children:o})]})]})},Lk=()=>{const[n,e]=q.useState({name:"",email:"",phone:"",instrument:"",experience:""}),t=o=>{e({...n,[o.target.name]:o.target.value})},r=o=>{o.preventDefault(),console.log("Join request submitted:",n),alert("Thank you for your interest! We will contact you soon.")};return u.jsxs("section",{className:"form-page",children:[u.jsx("h1",{children:"Join Mariachi de Uclatlán"}),u.jsx("p",{children:"Interested in joining our group? Fill out the form below."}),u.jsxs("form",{onSubmit:r,children:[u.jsx("input",{name:"name",placeholder:"Your Name",onChange:t,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",onChange:t,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",onChange:t,required:!0}),u.jsx("input",{name:"instrument",placeholder:"Instrument",onChange:t,required:!0}),u.jsx("textarea",{name:"experience",placeholder:"Tell us about your experience...",onChange:t,required:!0}),u.jsx("button",{type:"submit",children:"Submit Application"})]})]})};async function Uk(n){if(!n?.name||!n?.email)throw new Error("Missing name or email in inquiry");const e={...n,status:"new",source:"public_form",createdAt:Kt(),updatedAt:Kt()};return(await Fc(ht(Ae,"inquiries"),e)).id}function Bk(){const[n,e]=q.useState({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""}),[t,r]=q.useState(""),[o,l]=q.useState(""),{execute:d}=nA();async function m(y){y.preventDefault(),r(""),l("");try{const p=await d("client_booking"),_=n.date&&n.startTime?new Date(`${n.date}T${n.startTime}`).toISOString():void 0,b=n.date&&n.endTime?new Date(`${n.date}T${n.endTime}`).toISOString():void 0,w={name:n.name,email:n.email,phone:n.phone||void 0,org:n.org||void 0,message:n.details||void 0,event:{title:n.title||"Client Inquiry",date:n.date||void 0,start:_,end:b,location:n.location||void 0},meta:{userAgent:typeof navigator<"u"?navigator.userAgent:void 0,tz:Intl.DateTimeFormat().resolvedOptions().timeZone}};await Promise.all([iA({recaptchaToken:p,...w}),Uk(w)]),r("Thanks! Your request was received. We'll reach out soon."),e({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""})}catch(p){console.error("[HireUs submit] ",p),l(p?.message||"Failed to send")}}return u.jsxs("div",{className:"hireus",children:[u.jsx("h2",{children:"Hire Us"}),u.jsxs("form",{onSubmit:m,className:"event-form",children:[u.jsx("h3",{children:"Contact"}),u.jsx("input",{placeholder:"Your name",value:n.name,onChange:y=>e(p=>({...p,name:y.target.value})),required:!0}),u.jsx("input",{type:"email",placeholder:"Email",value:n.email,onChange:y=>e(p=>({...p,email:y.target.value})),required:!0}),u.jsx("input",{placeholder:"Phone",value:n.phone,onChange:y=>e(p=>({...p,phone:y.target.value}))}),u.jsx("input",{placeholder:"Organization (optional)",value:n.org,onChange:y=>e(p=>({...p,org:y.target.value}))}),u.jsx("h3",{children:"Event"}),u.jsx("input",{placeholder:"Event title",value:n.title,onChange:y=>e(p=>({...p,title:y.target.value})),required:!0}),u.jsx("input",{type:"date",value:n.date,onChange:y=>e(p=>({...p,date:y.target.value}))}),u.jsxs("div",{className:"time-row",children:[u.jsx("input",{type:"time",value:n.startTime,onChange:y=>e(p=>({...p,startTime:y.target.value}))}),u.jsx("input",{type:"time",value:n.endTime,onChange:y=>e(p=>({...p,endTime:y.target.value}))})]}),u.jsx("input",{placeholder:"Location",value:n.location,onChange:y=>e(p=>({...p,location:y.target.value}))}),u.jsx("textarea",{placeholder:"Details / repertoire / special notes",value:n.details,onChange:y=>e(p=>({...p,details:y.target.value}))}),u.jsx("button",{type:"submit",children:"Submit request"}),t&&u.jsx("p",{className:"ok",children:t}),o&&u.jsx("p",{className:"err",children:o})]})]})}const zk=`data:image/svg+xml;utf8,
  <svg xmlns='http://www.w3.org/2000/svg' width='600' height='360' viewBox='0 0 600 360'>
    <defs>
      <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
        <stop offset='0%' stop-color='%232774AE'/>
        <stop offset='100%' stop-color='%23FFD100'/>
      </linearGradient>
    </defs>
    <rect width='600' height='360' fill='url(%23g)'/>
    <text x='50%' y='45%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='40' fill='white'>
      Mariachi Mood 😎🎺
    </text>
    <text x='50%' y='70%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='white'>
      Add your own funny pic below!
    </text>
  </svg>`,qk=()=>{const[n,e]=oe.useState(()=>{try{return localStorage.getItem("members:funnyPicture")}catch{return null}});return{src:n??zk,update:r=>{e(r);try{r?localStorage.setItem("members:funnyPicture",r):localStorage.removeItem("members:funnyPicture")}catch{}}}},Fk=()=>{qk();const[n,e]=oe.useState(""),[t,r]=oe.useState(!1);return u.jsxs("section",{className:"members-dashboard ucla-content",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Welcome back! 🎶"}),u.jsx("p",{className:"ucla-paragraph",children:"Your space for events, resources, and all things Mariachi de Uclatlán."})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("article",{className:"card announcement",children:[u.jsx("h2",{children:"Hi — welcome back to Week 2!"}),u.jsxs("p",{children:["This week in Uclatlán, we kick things off with ",u.jsx("strong",{children:"rehearsal on Monday, Oct 6 at 7:00 PM"}),"."]}),u.jsxs("p",{children:["We typically have a ",u.jsx("strong",{children:"mariachi dinner at 6:00 PM"})," — ",u.jsx("em",{children:"location TBA"}),". Keep an eye on the Events page for updates."]})]}),u.jsx("article",{className:"card funny-picture",children:u.jsxs("figure",{className:"funny-figure",children:[u.jsx("img",{src:"https://images.unsplash.com/photo-1543852786-1cf6624b9987?q=80&w=1600&auto=format&fit=crop",alt:"Mariachi vibes: a playful moment",className:"funny-image"}),u.jsx("figcaption",{className:"caption",children:"Mood check ✅ — add your own jokes below in the chat 😄"})]})})]}),u.jsxs("article",{className:"card news",children:[u.jsx("h2",{children:"What’s new"}),u.jsxs("ul",{className:"bullets",children:[u.jsxs("li",{children:["🎺 New: Export your event calendar from ",u.jsx(Dn,{to:"/members/settings",children:"Settings → Download .ics"}),"."]}),u.jsx("li",{children:"📅 Remember to update your availability for upcoming gigs."}),u.jsx("li",{children:"🧑‍🎓 Welcome new members—check Resources for onboarding!"})]})]})]})},Hk=(n,e)=>({uid:n,name:"",email:e||"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["performer"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""}),Td=n=>{if(!n)return null;if(n instanceof Date)return n;if(n instanceof we)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?null:e}catch{return null}},Gk=(n,e)=>{const t=Td(n),r=Td(e);if(!t)return"TBA";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},$k=()=>{const n=Yt.currentUser,e=n?.uid??"",t=n?.email??"",[r,o]=q.useState(!0),[l,d]=q.useState(!1),[m,y]=q.useState(""),[p,_]=q.useState(null),[b,w]=q.useState(!1),[I,M]=q.useState(null),[z,j]=q.useState(null),[U,G]=q.useState([]),[Q,ie]=q.useState(!0);q.useEffect(()=>{let C=!0;return(async()=>{if(!e){o(!1);return}o(!0);try{const O=await Ok(e),V=O??Hk(e,n?.email??null);C&&_(V),O||await ag(e,V)}catch(O){console.error("[Profile load]",O),C&&y(O?.message??"Failed to load profile")}finally{C&&o(!1)}})(),()=>{C=!1}},[e,n?.email]),q.useEffect(()=>{let C=!0;return(async()=>{if(!t){ie(!1);return}ie(!0);try{const O=ht(Ae,"availability"),V=it(O,ct("email","==",t),ct("status","==","yes")),N=await sn(V);if(!C)return;const Oe=N.docs.map(De=>{const X=De.data();return{id:De.id,eventId:X.eventId,eventTitle:X.eventTitle||"Untitled Event",eventStart:Td(X.eventStart),eventEnd:Td(X.eventEnd),eventLocation:X.eventLocation??null}});Oe.sort((De,X)=>(De.eventStart?.getTime()??0)-(X.eventStart?.getTime()??0)),C&&G(Oe)}catch(O){console.error("[Accepted events]",O)}finally{C&&ie(!1)}})(),()=>{C=!1}},[t]);const ee=C=>{const{name:O,value:V}=C.target;_(N=>N&&{...N,[O]:V})},te=C=>{const O=C.target.files?.[0]||null;if(M(O),O){const V=URL.createObjectURL(O);_(N=>N&&{...N,photoURL:V})}},D=async()=>{if(!I||!e)return;const C=(I.name.split(".").pop()||"jpg").toLowerCase(),O=yk(Nk,`avatars/${e}/avatar.${C}`);return await pk(O,I),await gk(O)},R=async()=>{if(!(!p||!e)){d(!0),y(""),j(null);try{const C=await D(),O=p._instrumentsCSV,V=O?O.split(",").map(De=>De.trim()).filter(Boolean):p.instruments||[],N={...p,instruments:V,...C?{photoURL:C}:{}};await ag(e,N);const Oe=p.name||n?.displayName||void 0;await gI(Yt.currentUser,{displayName:Oe,photoURL:C??p.photoURL??void 0}),w(!1),_({...p,instruments:V,...C?{photoURL:C}:{}}),j({type:"success",text:"Profile saved. Thank you!"})}catch(C){console.error("[Profile save]",C),y(C?.message??"Failed to save profile"),j({type:"error",text:"Something went wrong. Try again or re‑login."})}finally{d(!1)}}};if(r)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"Loading profile…"})})});if(!p)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"No profile."})})});const x=p.roles||[];return u.jsxs("div",{className:"profile-wrap",children:[u.jsxs("div",{className:"card profile-card",children:[z&&u.jsxs("div",{className:`inline-banner ${z.type}`,role:"status","aria-live":"polite",children:[u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:z.type==="success"?"✓":"!"}),u.jsx("span",{children:z.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>j(null),"aria-label":"Dismiss",children:"×"})]}),u.jsxs("div",{className:"profile-head",children:[u.jsxs("div",{className:"avatar",children:[p.photoURL?u.jsx("img",{src:p.photoURL,alt:`${p.name||"Member"} avatar`}):u.jsx("div",{className:"avatar-placeholder",children:(p.name||p.email||"U")[0].toUpperCase()}),b&&u.jsxs("label",{className:"btn btn-light",style:{marginTop:8},children:["Upload photo",u.jsx("input",{type:"file",accept:"image/*",onChange:te,hidden:!0})]})]}),u.jsx("div",{className:"id-block",children:b?u.jsxs(u.Fragment,{children:[u.jsx("label",{className:"lbl",children:"Full Name"}),u.jsx("input",{name:"name",value:p.name||"",onChange:ee,placeholder:"First Last"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:p.name||"Add your name"}),u.jsx("p",{className:"muted",children:p.email}),!!x.length&&u.jsx("div",{className:"roles",children:x.map(C=>u.jsx("span",{className:`role-chip role-${C}`,children:C},C))})]})}),u.jsx("div",{className:"actions",children:b?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn",disabled:l,onClick:R,children:l?"Saving…":"Save"}),u.jsx("button",{className:"btn btn-light",disabled:l,onClick:()=>w(!1),children:"Cancel"})]}):u.jsx("button",{className:"btn",onClick:()=>w(!0),children:"Edit"})})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Phone"}),b?u.jsx("input",{name:"phoneNumber",value:p.phoneNumber||"",onChange:ee,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:p.phoneNumber||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Year"}),b?u.jsxs("select",{name:"year",value:p.year||"",onChange:ee,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]}):u.jsx("div",{className:"val",children:p.year||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Major"}),b?u.jsx("input",{name:"major",value:p.major||"",onChange:ee,placeholder:"e.g., Math, EE, Music"}):u.jsx("div",{className:"val",children:p.major||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Instrument"}),b?u.jsx("input",{name:"instrument",value:p.instrument||"",onChange:ee,placeholder:"e.g., Violin, Trumpet, Vihuela"}):u.jsx("div",{className:"val",children:p.instrument||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Section"}),b?u.jsx("input",{name:"section",value:p.section||"",onChange:ee,placeholder:"Strings / Brass / Rhythm / Vocals"}):u.jsx("div",{className:"val",children:p.section||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"All Instruments"}),b?u.jsx("input",{name:"_instrumentsCSV",value:(p.instruments||[]).join(", "),onChange:ee,placeholder:"Violin, Viola, Trumpet"}):u.jsx("div",{className:"val",children:p.instruments&&p.instruments.length?p.instruments.join(", "):"—"})]})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Contact"}),b?u.jsx("input",{name:"emergencyName",value:p.emergencyName||"",onChange:ee,placeholder:"Full name"}):u.jsx("div",{className:"val",children:p.emergencyName||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Phone"}),b?u.jsx("input",{name:"emergencyPhone",value:p.emergencyPhone||"",onChange:ee,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:p.emergencyPhone||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Relation"}),b?u.jsx("input",{name:"emergencyRelation",value:p.emergencyRelation||"",onChange:ee,placeholder:"Parent / Sibling / Friend"}):u.jsx("div",{className:"val",children:p.emergencyRelation||"—"})]})]}),u.jsxs("div",{className:"bio",children:[u.jsx("label",{className:"lbl",children:"Bio"}),b?u.jsx("textarea",{name:"bio",value:p.bio||"",onChange:ee,rows:4,placeholder:"Short bio (markdown/plaintext)"}):u.jsx("p",{className:"val multi",children:p.bio||"Add a short bio about you, your experience, and favorite pieces to perform."})]}),m&&u.jsx("p",{className:"error",children:m})]}),u.jsx("h2",{className:"section-title",children:"Events I’m Playing (Yes)"}),Q&&u.jsx("p",{className:"muted",children:"Loading your events…"}),u.jsxs("div",{className:"accepted-list",children:[U.map(C=>u.jsxs("article",{className:"accepted-card",children:[u.jsx("header",{className:"accepted-head",children:u.jsx("h3",{className:"accepted-title",children:C.eventTitle})}),u.jsxs("dl",{className:"accepted-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:Gk(C.eventStart,C.eventEnd)})]}),C.eventLocation&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:C.eventLocation})]})]})]},C.id)),!Q&&!U.length&&u.jsx("p",{className:"muted",children:"No accepted events yet. Head to Performer Availability to RSVP."})]})]})},Yk=n=>n==="published"?u.jsx("span",{className:"status published",children:"Published"}):n==="draft"?u.jsx("span",{className:"status draft",children:"Draft"}):n==="cancelled"?u.jsx("span",{className:"status cancelled",children:"Cancelled"}):null,sA=({event:n,canManage:e=!1,canRSVP:t=!1,onEdit:r,onDelete:o})=>u.jsxs("article",{className:`event-card ${n.status??""}`,children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h3",{className:"event-title",children:n.title}),Yk(n.status)]}),n.subtitle&&u.jsx("p",{className:"event-sub",children:n.subtitle}),u.jsxs("ul",{className:"event-meta",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"When:"})," ",n.dateStr]}),n.location&&u.jsxs("li",{children:[u.jsx("strong",{children:"Where:"})," ",n.location]})]}),n.notes&&u.jsx("p",{className:"event-notes",children:n.notes}),u.jsxs("footer",{className:"event-actions",children:[t&&u.jsxs("div",{className:"left-actions",children:[u.jsx("button",{className:"btn",children:"I can play"}),u.jsx("button",{className:"btn btn-light",children:"Can’t make it"})]}),e&&u.jsxs("div",{className:"right-actions",children:[u.jsx("button",{className:"btn",onClick:()=>r?.(n.id),children:"Edit"}),u.jsx("button",{className:"btn btn-danger",onClick:()=>o?.(n.id),children:"Delete"})]})]})]}),Kk=({event:n,onClose:e})=>{const t=n.dateStr?n.dateStr.split(","):[],r=t[0]?t[0].trim():"",o=t[1]?t[1].trim():"";return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:n.title}),r&&u.jsxs("p",{children:[u.jsx("strong",{children:"Date:"})," ",r]}),o&&u.jsxs("p",{children:[u.jsx("strong",{children:"Time:"})," ",o]}),n.location&&u.jsxs("p",{children:[u.jsx("strong",{children:"Location:"})," ",n.location]}),n.notes&&u.jsx("p",{className:"modal-desc",children:n.notes}),u.jsx("div",{className:"modal-actions",children:u.jsx("button",{onClick:e,children:"Close"})})]})})};function Ub(n){if(n)return n instanceof we?n.toDate():n instanceof Date?n:new Date(n)}function Qk(n){return{...n,start:Ub(n.start),end:Ub(n.end)}}function rA(n,e,t){const r=typeof n=="object"&&"start"in n&&!(n instanceof Date),o=Intl.DateTimeFormat().resolvedOptions().timeZone,l={dateStyle:"medium",timeZone:o},d={timeStyle:"short",timeZone:o};if(r){const m=n,y=new Intl.DateTimeFormat(void 0,l).format(m.start),p=new Intl.DateTimeFormat(void 0,d).format(m.start),_=m.end?new Intl.DateTimeFormat(void 0,d).format(m.end):"";return{date:y,time:_?`${p} – ${_}`:p}}else{const m=n,y=new Intl.DateTimeFormat(void 0,l).format(m),p=new Intl.DateTimeFormat(void 0,d).format(m),_="";return _?`${y} • ${p} – ${_}`:`${y} • ${p}`}}const aA="events";function oA(n,e){const t=it(ht(Ae,aA),Lt("start","asc"));return lu(t,r=>{const o=r.docs.map(l=>Qk({id:l.id,...l.data()}));n(o)},r=>e?.(r))}async function Xk(n){return Fc(ht(Ae,"events"),{...n,createdAt:Kt(),updatedAt:Kt()})}async function Wk(n,e){await Pr(_t(Ae,aA,n),{...e,updatedAt:Date.now()})}function Zk(n){const{date:e,time:t}=rA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const Jk=()=>{const[n,e]=oe.useState([]),[t,r]=oe.useState(null),[o,l]=oe.useState(!0);return oe.useEffect(()=>{const d=oA(m=>{e(m.map(Zk)),l(!1)},m=>{console.error("[Events subscribe]",m),l(!1)});return()=>d()},[]),u.jsxs("section",{className:"ucla-content",style:{maxWidth:980,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Upcoming Events"}),o&&u.jsx("p",{children:"Loading events…"}),!o&&n.length===0&&u.jsx("p",{children:"No events yet."}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16,marginTop:16},children:n.map(d=>u.jsx(sA,{event:d,onClick:()=>r(d)},d.id))}),t&&u.jsx(Kk,{event:t,onClose:()=>r(null)})]})},eM=()=>u.jsxs("section",{className:"ucla-content",style:{padding:"2rem"},children:[u.jsx("h1",{className:"ucla-heading-xl",style:{color:"#FFD100"},children:"🎼 Sheet Music Library"}),u.jsx("p",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Access PDF sheet music for each instrument section."}),u.jsx("a",{href:"https://ucla.box.com/s/l1aip4gbacfkgy80bf46cya0pj50tv77",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"1rem 2rem",backgroundColor:"#2774AE",color:"#fff",textDecoration:"none",fontWeight:"bold",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"Open Sheet Music Library →"})]}),Bb=n=>{if(!n&&n!==0)return null;if(typeof n=="object"&&n&&typeof n.toDate=="function")return n.toDate();if(n instanceof Date)return n;if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?null:e}return null},dc=n=>n<10?`0${n}`:`${n}`,Sp=n=>`${n.getUTCFullYear()}${dc(n.getUTCMonth()+1)}${dc(n.getUTCDate())}T${dc(n.getUTCHours())}${dc(n.getUTCMinutes())}${dc(n.getUTCSeconds())}Z`,Ap=n=>n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"").replace(/[,;]/g,e=>`\\${e}`),tM=n=>{const e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Uclatlán//Mariachi Events//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:Mariachi de Uclatlán — Events"];for(const t of n)e.push("BEGIN:VEVENT",`UID:${t.id}@uclatlanmariachi`,`DTSTAMP:${Sp(new Date)}`,`DTSTART:${Sp(t.start)}`,`DTEND:${Sp(t.end)}`,`SUMMARY:${Ap(t.title)}`,t.location?`LOCATION:${Ap(t.location)}`:"",t.description?`DESCRIPTION:${Ap(t.description)}`:"","END:VEVENT");return e.push("END:VCALENDAR"),e.filter(Boolean).join(`\r
`)},nM=()=>{const n=Ko(),e=async()=>{try{await TI(Yt),localStorage.removeItem("adminAccess"),n("/login")}catch(Q){console.error("Error during logout:",Q)}},[t,r]=oe.useState(!1),[o,l]=oe.useState(""),d=oe.useCallback(async()=>{r(!0),l("");try{const Q=it(ht(Ae,"events"),ct("status","in",["published","confirmed","active"]),Lt("start","asc")),ie=await sn(Q),ee=[];ie.forEach(C=>{const O=C.data(),V=Bb(O.start),N=Bb(O.end);!V||!N||ee.push({id:C.id,title:O.title??"Untitled Event",start:V,end:N,location:O.location??"",description:O.description??""})});const te=tM(ee),D=new Blob([te],{type:"text/calendar;charset=utf-8"}),R=URL.createObjectURL(D),x=document.createElement("a");x.href=R,x.download="uclatlan_events.ics",document.body.appendChild(x),x.click(),x.remove(),URL.revokeObjectURL(R),l(`Exported ${ee.length} event${ee.length===1?"":"s"} to .ics`)}catch(Q){console.error("[Settings] Download ICS failed",Q),l("Failed to export calendar")}finally{r(!1)}},[]),[m,y]=oe.useState(""),[p,_]=oe.useState(""),[b,w]=oe.useState(""),[I,M]=oe.useState(""),[z,j]=oe.useState(!1),U=m.length>0&&p.length>=8&&p===b,G=async Q=>{Q.preventDefault(),M("");const ie=Yt.currentUser;if(!ie){M("You must be logged in.");return}if(!U){M("Please fill all fields. Password must be at least 8 characters and match.");return}try{j(!0);const ee=ie.email;if(!ee)throw new Error("This account uses a provider login (e.g., Google). Change your password with your provider.");if(m===p)throw new Error("New password must be different from the current password.");const te=Oa.credential(ee,m);await dI(ie,te),await yI(ie,p),y(""),_(""),w(""),M("Password updated successfully.")}catch(ee){M(ee?.message??"Failed to change password")}finally{j(!1)}};return u.jsxs("section",{className:"settings ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Account Settings"}),u.jsx("p",{className:"ucla-paragraph",children:"Manage your session, export your calendar, and update your password."}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Calendar"}),u.jsx("p",{className:"muted",children:"Export all published/confirmed events to an .ics file for Google/Apple/Outlook."}),u.jsx("button",{className:"btn primary",onClick:d,disabled:t,children:t?"Building calendar…":"Download .ics of events"}),o&&u.jsx("p",{className:"status",children:o})]}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Change Password"}),u.jsxs("form",{className:"form",onSubmit:G,children:[u.jsxs("label",{children:[u.jsx("span",{children:"Current password"}),u.jsx("input",{type:"password",value:m,onChange:Q=>y(Q.target.value),autoComplete:"current-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"New password"}),u.jsx("input",{type:"password",value:p,onChange:Q=>_(Q.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"Confirm new password"}),u.jsx("input",{type:"password",value:b,onChange:Q=>w(Q.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsx("button",{className:"btn primary",type:"submit",disabled:!U||z,children:z?"Updating…":"Update password"}),I&&u.jsx("p",{className:`status ${/failed|error|requires|different/i.test(I)?"error":""}`,children:I}),u.jsx("p",{className:"muted tiny",children:"Note: If you signed in with Google/SSO, change your password with your provider."})]})]}),u.jsxs("div",{className:"settings-card danger",children:[u.jsx("h2",{children:"Session"}),u.jsx("p",{className:"muted",children:"Sign out of your account on this device."}),u.jsx("button",{className:"btn danger",onClick:e,children:"Log out"})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function iM(n,e,t,r){function o(l){return l instanceof t?l:new t(function(d){d(l)})}return new(t||(t=Promise))(function(l,d){function m(_){try{p(r.next(_))}catch(b){d(b)}}function y(_){try{p(r.throw(_))}catch(b){d(b)}}function p(_){_.done?l(_.value):o(_.value).then(m,y)}p((r=r.apply(n,[])).next())})}function sM(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(p){return function(_){return y([p,_])}}function y(p){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var jo=function(){return jo=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},jo.apply(this,arguments)},lA=function(n){return{loading:n==null,value:n}},rM=function(){return function(n,e){switch(e.type){case"error":return jo(jo({},n),{error:e.error,loading:!1,value:void 0});case"reset":return lA(e.defaultValue);case"value":return jo(jo({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},aM=(function(n){var e=n?n():void 0,t=q.useReducer(rM(),lA(e)),r=t[0],o=t[1],l=q.useCallback(function(){var y=n?n():void 0;o({type:"reset",defaultValue:y})},[n]),d=q.useCallback(function(y){o({type:"error",error:y})},[]),m=q.useCallback(function(y){o({type:"value",value:y})},[]);return q.useMemo(function(){return{error:r.error,loading:r.loading,reset:l,setError:d,setValue:m,value:r.value}},[r.error,r.loading,l,d,m,r.value])}),oM=(function(n,e){var t=aM(function(){return n.currentUser}),r=t.error,o=t.loading,l=t.setError,d=t.setValue,m=t.value;return q.useEffect(function(){var y=Dd(n,function(p){return iM(void 0,void 0,void 0,function(){var _;return sM(this,function(b){switch(b.label){case 0:return[3,4];case 1:return b.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return b.sent(),[3,4];case 3:return _=b.sent(),l(_),[3,4];case 4:return d(p),[2]}})})},l);return function(){y()}},[n]),[m,o,r]});const Lo=n=>{if(n){if(n instanceof Date)return n;if(n instanceof we)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},zb=n=>{const e=Lo(n);return e?we.fromDate(e):null},lM=(n,e)=>{const t=Lo(n),r=Lo(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},cM=()=>{const[n]=oM(Yt),[e,t]=oe.useState(!0),[r,o]=oe.useState(null),[l,d]=oe.useState([]),[m,y]=oe.useState({}),[p,_]=oe.useState({}),[b,w]=oe.useState({}),[I,M]=oe.useState(null);oe.useEffect(()=>{(async()=>{o(null),t(!0);try{const G=ht(Ae,"events"),Q=it(G,ct("status","==","published")),ee=(await sn(Q)).docs.map(C=>({id:C.id,...C.data()})),te=Date.now(),D=ee.filter(C=>{const O=Lo(C.start)?.getTime();return typeof O=="number"?O>=te-1e3*60*60*24:!0}).sort((C,O)=>{const V=Lo(C.start)?.getTime()??0,N=Lo(O.start)?.getTime()??0;return V-N});d(D);const R={},x={};for(const C of D)R[C.id]="",x[C.id]=!1;if(y(R),w(x),n){const C={...R},O={...x};for(const V of D){const N=_t(Ae,"events",V.id,"availability",n.uid),Oe=await ou(N),De=Oe.exists()?Oe.data():void 0,X=De?.status||"",me=!!De?.finalized;C[V.id]=X,O[V.id]=me}y(C),w(O)}}catch(G){console.error(G),o(G?.message||"Failed to load events")}finally{t(!1)}})()},[n]);const z=(U,G)=>{const Q=G.target.value;y(ie=>({...ie,[U]:Q}))},j=async U=>{if(!n){M({type:"error",text:"Try again or re‑login."});return}if(b[U]){M({type:"error",text:"This RSVP was finalized by an admin."});return}const G=m[U]||"";if(!G){M({type:"error",text:"Please select an availability first."});return}const Q=l.find(ie=>ie.id===U);_(ie=>({...ie,[U]:!0})),M(null);try{const ie=_t(Ae,"events",U,"availability",n.uid),ee={uid:n.uid,displayName:n.displayName||n.email||"Unknown",email:n.email||null,status:G,updatedAt:Kt(),eventId:U,eventTitle:Q?.title||"Untitled Event",eventStart:zb(Q?.start),eventEnd:zb(Q?.end),eventLocation:Q?.location||null,finalized:!1};await Ns(ie,ee,{merge:!0});const te=`${U}_${n.uid}`;await Ns(_t(Ae,"availability_responses",te),ee,{merge:!0}),await Ns(_t(Ae,"availability",te),ee,{merge:!0}),M({type:"success",text:"Thank you — your response has been submitted."})}catch(ie){console.error(ie),M({type:"error",text:"Something went wrong. Try again or re‑login."})}finally{_(ie=>({...ie,[U]:!1}))}};return n?u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),I&&u.jsxs("div",{className:`inline-banner ${I.type}`,role:"status","aria-live":"polite",children:[I.type==="success"?u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"✓"}):u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"!"}),u.jsx("span",{children:I.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>M(null),"aria-label":"Dismiss",children:"×"})]}),e&&u.jsx("p",{className:"muted",children:"Loading events…"}),r&&u.jsx("p",{className:"error-text",children:r}),u.jsxs("div",{className:"availability-list",children:[l.map(U=>u.jsxs("article",{className:"availability-card",children:[u.jsxs("header",{className:"availability-head",children:[u.jsx("h3",{className:"availability-title",children:U.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${U.status}`,children:U.status})]}),u.jsxs("dl",{className:"availability-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:lM(U.start,U.end)||"TBA"})]}),U.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:U.location})]})]}),u.jsxs("div",{className:"availability-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${U.id}`,children:["Availability for ",U.title]}),u.jsxs("select",{id:`sel-${U.id}`,value:m[U.id]||"",onChange:G=>z(U.id,G),disabled:b[U.id]||!!p[U.id],children:[u.jsx("option",{value:"",children:"Select availability…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsx("button",{className:"btn-primary",disabled:b[U.id]||!!p[U.id],onClick:()=>j(U.id),children:p[U.id]?"Saving…":b[U.id]?"Finalized":"Submit"})]}),b[U.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP was finalized by an admin and can’t be changed."})]},U.id)),!e&&!l.length&&u.jsx("p",{className:"muted",children:"No upcoming events yet."})]})]}):u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),u.jsx("p",{children:"Please log in to set availability."})]})},uM=["angelrocks0319@gmail.com","angelr19@g.ucla.edu","angelr19@ucla.edu","uclatlan@ucla.edu","uclatlan@g.ucla.edu","enriquerodgon09@g.ucla.edu","andelapena1374@gmail.com"],cA=n=>{if(!n)return!1;const e=n.toLowerCase();return uM.some(t=>t.toLowerCase()===e)};function bd(n,e){if(!n)return new Date;if(n instanceof we)return n.toDate();if(typeof n=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(n))return new Date(`${n}T12:00:00`);const t=new Date(n);return isNaN(+t)?e??new Date:t}return n instanceof Date?n:e??new Date}function hM(n){const e=n.statuses??["published"],t=[];e.length===1?t.push(ct("status","==",e[0])):e.length>1&&t.push(ct("status","in",e.slice(0,10)));const r=it(ht(Ae,"events"),...t);return lu(r,o=>{const l=o.docs.map(d=>{const m=d.data(),y=bd(m.start??m.date),p=m.end?bd(m.end):null,_=m.title??"Untitled Event";return{id:d.id,type:"event",title:_,start:y,end:p,location:m.location??null,status:m.status,raw:m}});l.sort((d,m)=>+d.start-+m.start),n.onChange(l)})}function dM(n){const e=it(ht(Ae,"calendar_feed"));return lu(e,t=>{const r=t.docs.map(o=>{const l=o.data(),d=bd(l.start??l.date),m=l.end?bd(l.end):null,y=l.title??"Client Inquiry";return{id:o.id,type:"inquiry",title:y,start:d,end:m,location:l.location??null,status:l.status??"new",raw:l}});r.sort((o,l)=>+o.start-+l.start),n(r)})}function fM(n,e){const t=[...n,...e];return t.sort((r,o)=>+r.start-+o.start),t}const mM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],pM=(n,e)=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate(),og=(n,e)=>{const t=new Date(n);return t.setDate(t.getDate()+e),t};function gM(n,e){const t=new Date(n.getFullYear(),n.getMonth(),1),r=(t.getDay()-e+7)%7,o=og(t,-r),l=[];for(let d=0;d<42;d++)l.push(og(o,d));return l}const yM=n=>n.toLocaleString(void 0,{month:"long",year:"numeric"});function vM(n,e){return n.slice(e).concat(n.slice(0,e))}function wd(n){const e=n.getFullYear(),t=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");return`${e}-${t}-${r}`}function _M(n,e){const t=new Map;for(const r of n){const o=new Date(r.start.getFullYear(),r.start.getMonth(),r.start.getDate()),l=r.end&&r.end>r.start?new Date(r.end.getFullYear(),r.end.getMonth(),r.end.getDate()):o;if(!e){const y=wd(o);t.has(y)||t.set(y,[]),t.get(y).push(r);continue}let d=o,m=0;for(;d<=l&&m++<60;){const y=wd(d);t.has(y)||t.set(y,[]),t.get(y).push(r),d=og(d,1)}}return t}function EM(n,e){const t=n.audience;return!t||t==="public"?!0:t==="members"?e==="member"||e==="admin":t==="admins"?e==="admin":!0}const Rp=n=>{const e={yes:0,maybe:0,no:0};if(!n)return e;for(const t of n)t.status==="going"?e.yes++:t.status==="maybe"?e.maybe++:t.status==="declined"&&e.no++;return e},TM=({events:n,month:e,year:t,firstDayOfWeek:r=0,onEventClick:o,onMonthChange:l,renderEvent:d,maxPillsPerDay:m=3,expandMultiDay:y=!0,view:p="month",showViewToggle:_=!0,canViewParticipants:b=!1,fetchParticipants:w,subscribeParticipants:I,viewerRole:M="guest",filterByAudience:z=!0,showAvailabilityBadges:j=!0})=>{const[U,G]=oe.useState(()=>new Date(t??new Date().getFullYear(),e??new Date().getMonth(),1)),[Q,ie]=oe.useState(p),[ee,te]=oe.useState(!1),[D,R]=oe.useState(null),[x,C]=oe.useState(null),[O,V]=oe.useState(!1),[N,Oe]=oe.useState({}),De=oe.useRef({});oe.useEffect(()=>{l?.(U.getFullYear(),U.getMonth())},[U.getFullYear(),U.getMonth()]),oe.useEffect(()=>{ie(p)},[p]);const X=oe.useMemo(()=>(z?n.filter(ue=>EM(ue,M)):n).sort((ue,pe)=>+ue.start-+pe.start),[n,M,z]),me=oe.useMemo(()=>gM(U,r),[U,r]),Ee=oe.useMemo(()=>_M(X,y),[X,y]),re=oe.useMemo(()=>vM(mM,r),[r]),P=oe.useMemo(()=>{const ue=new Map;for(const pe of X){const de=wd(pe.start);ue.has(de)||ue.set(de,[]),ue.get(de).push(pe)}return Array.from(ue.entries()).sort((pe,de)=>pe[0].localeCompare(de[0]))},[X]);oe.useEffect(()=>{if(Object.values(De.current).forEach(de=>de()),De.current={},!I){(async()=>{const de=new Set,Ye=Q==="month"?Array.from(Ee.values()).flat():X;for(const gt of Ye)de.add(gt.id);const qe={};if(w){for(const gt of de)try{const pt=await w(gt);qe[gt]=Rp(pt)}catch{}Oe(gt=>({...gt,...qe}))}})();return}const ue=de=>{if(De.current[de])return;const Ye=I(de,qe=>{Oe(gt=>({...gt,[de]:Rp(qe)}))});De.current[de]=Ye},pe=Q==="month"?Array.from(Ee.values()).flat():X;for(const de of pe)ue(de.id);return()=>{Object.values(De.current).forEach(de=>de()),De.current={}}},[Q,Ee,X,I,w]);const Z=async ue=>{if(o?.(ue),!!b)if(R(ue),te(!0),w){V(!0);try{const pe=await w(ue.id);C(pe),Oe(de=>({...de,[ue.id]:Rp(pe)}))}finally{V(!1)}}else C(null)},he=()=>{te(!1),R(null),C(null)},ce=({id:ue})=>{if(!j)return null;const pe=N[ue];return!pe||pe.yes+pe.maybe+pe.no===0?null:u.jsxs("div",{className:"av-badges","aria-label":`Availability: ${pe.yes} yes, ${pe.maybe} maybe, ${pe.no} no`,children:[u.jsxs("span",{className:"av-chip yes",children:["Yes ",pe.yes]}),pe.maybe?u.jsxs("span",{className:"av-chip maybe",children:["Maybe ",pe.maybe]}):null,pe.no?u.jsxs("span",{className:"av-chip no",children:["No ",pe.no]}):null]})};return u.jsxs("div",{className:"cal-wrap",role:"group","aria-label":"Calendar",children:[u.jsxs("div",{className:"cal-header",children:[u.jsxs("div",{className:"left-ctrls",children:[u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>G(new Date(U.getFullYear(),U.getMonth()-1,1)),"aria-label":"Previous month",children:"◀"}),u.jsx("div",{className:"cal-title","aria-live":"polite",children:yM(U)}),u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>G(new Date(U.getFullYear(),U.getMonth()+1,1)),"aria-label":"Next month",children:"▶"})]}),_&&u.jsxs("div",{className:"view-toggle",role:"tablist","aria-label":"Calendar view selector",children:[u.jsx("button",{className:`view-btn ${Q==="month"?"active":""}`,role:"tab","aria-selected":Q==="month",onClick:()=>ie("month"),children:"Month"}),u.jsx("button",{className:`view-btn ${Q==="agenda"?"active":""}`,role:"tab","aria-selected":Q==="agenda",onClick:()=>ie("agenda"),children:"Agenda"})]})]}),Q==="month"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"cal-grid cal-weekdays",role:"row",children:re.map(ue=>u.jsx("div",{className:"cal-weekday",role:"columnheader","aria-label":ue,children:ue},ue))}),u.jsx("div",{className:"cal-grid cal-cells",role:"grid","aria-readonly":!0,children:me.map((ue,pe)=>{const de=wd(ue),Ye=Ee.get(de)||[],qe=pM(ue,new Date),gt=ue.getMonth()===U.getMonth();return u.jsxs("div",{className:`cal-cell ${gt?"":"muted"}`,role:"gridcell","aria-selected":qe,children:[u.jsx("div",{className:`cal-date ${qe?"today":""}`,"aria-label":ue.toDateString(),children:ue.getDate()}),u.jsxs("div",{className:"cal-events",children:[Ye.slice(0,m).map(pt=>u.jsxs("div",{className:"cal-pill-wrap",children:[u.jsx("button",{type:"button",className:`cal-pill${pt.status?` status-${pt.status}`:""}`,title:`${pt.title}${pt.location?" @ "+pt.location:""}`,onClick:()=>Z(pt),children:d?d(pt):pt.title}),u.jsx(ce,{id:pt.id})]},pt.id)),Ye.length>m&&u.jsxs("div",{className:"cal-more",children:["+",Ye.length-m," more"]})]})]},pe)})})]}):u.jsxs("div",{className:"agenda-wrap",children:[P.length===0&&u.jsx("p",{className:"muted-text",children:"No items."}),P.map(([ue,pe])=>u.jsxs("div",{className:"agenda-day",children:[u.jsx("h3",{className:"agenda-day-head",children:new Date(ue).toLocaleDateString()}),u.jsx("ul",{className:"agenda-items",children:pe.map(de=>u.jsxs("li",{className:"agenda-item",children:[u.jsxs("span",{className:"agenda-time",children:[de.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),de.end?` – ${de.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""]}),u.jsxs("div",{className:"agenda-pill-wrap",children:[u.jsxs("button",{type:"button",className:`agenda-pill${de.status?` status-${de.status}`:""}`,onClick:()=>Z(de),title:`${de.title}${de.location?" @ "+de.location:""}`,children:[u.jsx("strong",{children:de.title}),de.location?u.jsxs("span",{className:"agenda-loc",children:[" • ",de.location]}):null]}),u.jsx(ce,{id:de.id})]})]},de.id))})]},ue))]}),ee&&D&&u.jsx("div",{className:"drawer-backdrop",role:"dialog","aria-modal":"true",onClick:he,children:u.jsxs("div",{className:"drawer",onClick:ue=>ue.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsx("div",{className:"drawer-title",children:D.title}),u.jsxs("div",{className:"drawer-meta",children:[D.start.toLocaleString()," ",D.end?`– ${D.end.toLocaleTimeString()}`:"",D.location?` • ${D.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:he,"aria-label":"Close",children:"✕"})]}),b?u.jsx("div",{className:"drawer-body",children:O?u.jsx("div",{className:"loading",children:"Loading attendees…"}):x&&x.length?u.jsx(bM,{list:x}):u.jsx("div",{className:"muted-text",children:"No attendee data."})}):u.jsx("div",{className:"drawer-body",children:u.jsx("p",{className:"muted-text",children:"Attendee visibility disabled."})})]})})]})},bM=({list:n})=>{const[e,t]=oe.useState("going"),r=oe.useMemo(()=>{const d=n.filter(p=>p.status==="going"),m=n.filter(p=>p.status==="maybe"),y=n.filter(p=>p.status==="declined");return{g:d,m,d:y}},[n]),o=d=>u.jsxs("tr",{children:[u.jsx("td",{children:d.name??d.uid}),u.jsx("td",{className:`status ${d.status??"unknown"}`,children:d.status??"unknown"}),u.jsx("td",{children:d.section??"—"})]},d.uid),l=e==="all"?n:e==="going"?r.g:e==="maybe"?r.m:r.d;return u.jsxs("div",{className:"att-wrap",children:[u.jsxs("div",{className:"att-tabs",role:"tablist",children:[u.jsxs("button",{className:`att-tab ${e==="going"?"active":""}`,onClick:()=>t("going"),role:"tab","aria-selected":e==="going",children:["Going (",r.g.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="maybe"?"active":""}`,onClick:()=>t("maybe"),role:"tab","aria-selected":e==="maybe",children:["Maybe (",r.m.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="declined"?"active":""}`,onClick:()=>t("declined"),role:"tab","aria-selected":e==="declined",children:["Declined (",r.d.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="all"?"active":""}`,onClick:()=>t("all"),role:"tab","aria-selected":e==="all",children:["All (",n.length,")"]})]}),u.jsxs("table",{className:"att-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Section"})]})}),u.jsx("tbody",{children:l.length?l.map(o):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"muted-text",style:{textAlign:"center"},children:"No one here."})})})]})]})},uA=["participation","availability","avaiablity","rsvps","rsvp"];function zh(n){if(!n)return;if(n instanceof we||typeof n=="object"&&n&&"toDate"in n)return n.toDate();const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function wM(n){if(typeof n=="string"){const e=n.toLowerCase();if(["going","yes","attending","available","confirm","confirmed"].includes(e))return"going";if(["maybe","tentative","unsure"].includes(e))return"maybe";if(["declined","no","unavailable","cant","can't","cannot"].includes(e))return"declined"}return typeof n=="boolean"?n?"going":"declined":"unknown"}function hA(n,e){const t=e.uid||n,r=e.name||e.displayName,o=e.section||e.instrument,l=e.status??e.availability??e.response??e.rsvp??e.going,d=wM(l),m=zh(e.updatedAt)||zh(e.updated_at)||zh(e.lastUpdated)||zh(e._updated)||void 0;return{uid:t,name:r,status:d,section:o,updatedAt:m}}function SM(n,e){if(!n)return e;if(!e)return n;if(n.updatedAt&&e.updatedAt)return n.updatedAt>e.updatedAt?n:e;if(n.updatedAt&&!e.updatedAt)return n;if(!n.updatedAt&&e.updatedAt)return e;const t={going:3,maybe:2,declined:1,unknown:0},r=t[n.status??"unknown"],o=t[e.status??"unknown"];return r!==o&&r>o?n:e}function dA(n){const e=new Map;for(const t of n)for(const r of t)e.set(r.uid,SM(e.get(r.uid),r));return Array.from(e.values())}async function AM(n){const e=[];for(const t of uA)try{const r=await sn(ht(Ae,`events/${n}/${t}`));r.empty||e.push(r.docs.map(o=>hA(o.id,o.data())))}catch{}return dA(e)}function RM(n,e){const t=[],r=new Map,o=()=>e(dA(Array.from(r.values())));for(const l of uA)try{const d=ht(Ae,`events/${n}/${l}`),m=lu(d,y=>{const p=y.docs.map(_=>hA(_.id,_.data()));r.set(l,p),o()},()=>{r.delete(l),o()});t.push(m)}catch{}return()=>{for(const l of t)try{l()}catch{}}}const xM=n=>AM(n),CM=(n,e)=>RM(n,e),NM=()=>{const[n,e]=oe.useState(!1),[t,r]=oe.useState([]),[o,l]=oe.useState([]),[d,m]=oe.useState([]);oe.useEffect(()=>{const p=Dd(Yt,_=>{e(cA(_?.email??void 0))});return()=>p()},[]),oe.useEffect(()=>{const p=hM({statuses:["published"],onChange:r}),_=dM(l);return()=>{p(),_()}},[]),oe.useEffect(()=>{m(fM(t,o))},[t,o]);const y=oe.useMemo(()=>d,[d]);return u.jsxs("section",{className:"calendar-page",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Calendar"}),u.jsxs("p",{className:"ucla-paragraph",children:["Published events",n?" + client inquiries":"","."]}),y.length===0?u.jsx("p",{children:"No upcoming items yet."}):u.jsx(TM,{events:y,view:"agenda",showViewToggle:!0,canViewParticipants:!0,fetchParticipants:xM,subscribeParticipants:CM,viewerRole:n?"admin":"member",filterByAudience:!0,showAvailabilityBadges:!0})]})},qb=n=>{if(n){if(n instanceof Date)return n;if(n instanceof we)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},Fb=()=>{const[n,e]=oe.useState(!0),[t,r]=oe.useState(null),[o,l]=oe.useState(0),[d,m]=oe.useState(0),[y,p]=oe.useState(0);oe.useEffect(()=>{(async()=>{e(!0),r(null);try{const w=Date.now(),I=new Date(w-1440*60*1e3),M=ht(Ae,"events"),z=it(M,ct("status","==","published")),U=(await sn(z)).docs.filter(x=>{const C=x.data(),O=qb(C.start)?.getTime();return typeof O=="number"?O>=w-7200*1e3:!1}).length;l(U);const G=ht(Ae,"inquiries"),ie=(await sn(G)).docs.filter(x=>{const C=x.data();return typeof C.pushed=="boolean"?C.pushed===!1:C.status!=="closed"}).length;m(ie);const ee=ht(Ae,"availability_responses"),te=it(ee,ct("status","==","yes")),R=(await sn(te)).docs.filter(x=>{const C=x.data(),O=qb(C.eventStart);return O?O>=I:!1}).length;p(R)}catch(w){console.error("[AdminDashboard] Failed to load stats",w),r(w?.message||"Failed to load stats")}finally{e(!1)}})()},[]);const _=[{to:"events",title:"Events",desc:"Create, publish, and manage upcoming events.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M7 2v2M17 2v2M3 8h18M5 6h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm3 5h4m-4 4h8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"})})},{to:"managemembers",title:"Manage Members",desc:"Search members and assign roles.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M12 12a4 4 0 1 0-0.001-8.001A4 4 0 0 0 12 12zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z",fill:"currentColor"})})},{to:"reports",title:"Reports",desc:"Export availability & payouts (CSV/PDF).",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M7 3h10a2 2 0 0 1 2 2v10l-4 4H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm8 0v4h4",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 13h8M8 9h6M8 17h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"inquiries",title:"Requests",desc:"Accept/decline Hire Us inquiries → events.",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M21 7v10a2 2 0 0 1-2 2H9l-6 3V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 10h8M8 14h5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"participation",title:"Participation",desc:"Attendance & financial summaries.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M4 19V5m16 14V5M9 19V9m6 10V12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}];return u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{children:[u.jsx("h1",{className:"admin-title",children:"Admin Dashboard"}),u.jsx("p",{className:"admin-sub",children:"Manage members, assign roles, and oversee events."})]})}),u.jsx("section",{className:"admin-stats","aria-label":"Quick Stats",children:n?u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:"…"}),u.jsx("div",{className:"stat-label",children:"Loading…"})]}):t?u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:"!"}),u.jsx("div",{className:"stat-label",children:t})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:o}),u.jsx("div",{className:"stat-label",children:"Upcoming Events"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:d}),u.jsx("div",{className:"stat-label",children:"Pending Requests"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:y}),u.jsx("div",{className:"stat-label",children:"Performers Confirmed"})]})]})}),u.jsx("section",{className:"admin-grid","aria-label":"Admin Navigation",children:_.map(b=>u.jsxs(ft,{className:({isActive:w})=>`admin-card ${w?"active":""}`,to:b.to,children:[b.icon,u.jsxs("div",{className:"card-body",children:[u.jsx("h3",{children:b.title}),u.jsx("p",{children:b.desc})]}),u.jsx("span",{className:"chev","aria-hidden":!0,children:"›"})]},b.to))})]})},fA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:"Performer Portal"}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ft,{to:"/dashboard",className:n,children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{children:u.jsx(ft,{to:"/",className:n,children:"Public Site"})})]})]})},Hb=()=>u.jsxs(u.Fragment,{children:[u.jsx(fA,{}),u.jsxs("div",{style:{padding:"2rem"},children:[u.jsx("h1",{children:"Performer Dashboard"}),u.jsx("p",{children:"Welcome to the Performer Dashboard. Here you can see your events, resources, and manage your profile."})]})]}),mA=()=>u.jsxs("nav",{className:"navbar",children:[u.jsx("div",{className:"nav-brand",children:"Mariachi de Uclatlán"}),u.jsxs("ul",{className:"nav-links",children:[u.jsx("li",{children:u.jsx(Dn,{to:"/",children:"Home"})}),u.jsx("li",{children:u.jsx(Dn,{to:"/about",children:"About"})}),u.jsx("li",{children:u.jsx(Dn,{to:"/members",children:"Members"})}),u.jsx("li",{children:u.jsx(Dn,{to:"/contact",children:"Contact"})}),u.jsx("li",{children:u.jsx(Dn,{to:"/Login",children:"Login"})}),u.jsx("li",{children:u.jsx(Dn,{to:"/Register",children:"Register"})})]})]}),IM=()=>u.jsxs("footer",{className:"footer compact-footer",children:[u.jsxs("p",{children:["© ",new Date().getFullYear()," Mariachi de Uclatlán."]}),u.jsxs("p",{children:["Developed by Angel Ramirez | ",u.jsx("a",{href:"/contact",children:"Contact"})]})]}),pA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:u.jsx(ft,{to:"/members",className:n,children:"Members Portal"})}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ft,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{className:"divider"}),u.jsx("li",{children:u.jsx(ft,{to:"/admin-password",className:n,children:"Admin"})}),u.jsx("li",{children:u.jsx(ft,{to:"/",className:n,children:"Public Site"})})]})]})},wy=()=>u.jsxs("nav",{className:"admin-navbar",role:"navigation","aria-label":"Admin Navigation Bar",children:[u.jsx("div",{className:"admin-brand",children:"Admin Portal"}),u.jsx("button",{className:"admin-menu-toggle","aria-label":"Toggle menu",onClick:()=>{document.querySelector(".admin-links")?.classList.toggle("open")},children:"☰"}),u.jsxs("ul",{className:"admin-links",children:[u.jsx("li",{children:u.jsx(ft,{to:"/admin",end:!0,className:({isActive:n})=>n?"active":"",children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ft,{to:"/admin/inquiries",className:({isActive:n})=>n?"active":"",children:"Requests"})}),u.jsx("li",{children:u.jsx(ft,{to:"/admin/events",className:({isActive:n})=>n?"active":"",children:"Events"})}),u.jsx("li",{children:u.jsx(ft,{to:"/admin/managemembers",className:({isActive:n})=>n?"active":"",children:"Manage Members"})}),u.jsx("li",{children:u.jsx(ft,{to:"/admin/reports",className:({isActive:n})=>n?"active":"",children:"Reports"})}),u.jsx("li",{children:u.jsx(ft,{to:"/members/performer-availability",className:({isActive:n})=>n?"active":"",children:"Availability"})}),u.jsx("li",{className:"divider","aria-hidden":!0,children:"│"}),u.jsx("li",{children:u.jsx(ft,{to:"/",className:({isActive:n})=>n?"active":"",children:"Public Site"})})]})]}),DM=({user:n,isAdmin:e,claims:t})=>{const[r,o]=oe.useState(!1),l=()=>{console.log("AdminDebug -> user:",n),console.log("AdminDebug -> isAdmin:",e),console.log("AdminDebug -> claims:",t),o(d=>!d)};return u.jsxs("div",{className:"admin-debug",children:[u.jsx("button",{className:"admin-debug-btn",onClick:l,children:r?"Hide Debug":"Show Debug"}),r&&u.jsxs("div",{className:"admin-debug-info",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"User email:"})," ",n?.email||"None"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"isAdmin:"})," ",e?"true":"false"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Claims:"})," ",JSON.stringify(t)||"{}"]})]})]})},xp=({user:n,children:e,isAdminUser:t,requiresAdmin:r})=>{const o=Qi();return n?r&&!t?u.jsx(Ip,{to:"/",replace:!0}):u.jsx(u.Fragment,{children:e}):u.jsx(Ip,{to:"/login",replace:!0,state:{from:o}})},jM="chuy1345",OM=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(""),o=Ko(),l=d=>{d.preventDefault(),n===jM?(localStorage.setItem("adminAccess","true"),o("/admin")):r("Invalid password. Try again.")};return u.jsxs("section",{className:"ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Admin Access"}),u.jsxs("form",{onSubmit:l,style:{marginTop:"1rem"},children:[u.jsx("label",{htmlFor:"admin-password",style:{display:"block",marginBottom:".5rem"},children:"Enter admin password:"}),u.jsx("input",{id:"admin-password",type:"password",value:n,onChange:d=>{e(d.target.value),r("")},required:!0,style:{padding:"0.5rem",fontSize:"1rem",marginBottom:".5rem"}}),u.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem"},children:"Enter"}),t&&u.jsx("p",{style:{color:"red",marginTop:".5rem"},children:t})]})]})},PM=()=>u.jsxs("div",{className:"admin-shell",children:[u.jsx(wy,{}),u.jsx("div",{className:"admin-content",children:u.jsx(rw,{})})]}),kM=({open:n,onClose:e,onCreate:t,defaultValues:r})=>{const[o,l]=oe.useState(()=>({title:r?.title??"",date:r?.date??new Date().toISOString().slice(0,10),startTime:r?.startTime??"",endTime:r?.endTime??"",location:r?.location??"",description:r?.description??"",status:r?.status??"draft"})),[d,m]=oe.useState(!1),[y,p]=oe.useState(null);if(oe.useEffect(()=>{n&&(l(w=>({...w,title:r?.title??"",date:r?.date??new Date().toISOString().slice(0,10),startTime:r?.startTime??"",endTime:r?.endTime??"",location:r?.location??"",description:r?.description??"",status:r?.status??"draft"})),p(null))},[n]),!n)return null;const _=w=>{const{name:I,value:M}=w.target;l(z=>({...z,[I]:M}))},b=async w=>{if(w.preventDefault(),p(null),!o.title.trim())return p("Title is required.");if(!/^\d{4}-\d{2}-\d{2}$/.test(o.date))return p("Date must be YYYY-MM-DD.");try{m(!0),await t(o),m(!1),e()}catch(I){console.error("[CreateEventModal] create error",I),m(!1),p(I?.message??"Failed to create event.")}};return u.jsx("div",{className:"cem-backdrop",role:"dialog","aria-modal":"true","aria-label":"Create event",children:u.jsxs("div",{className:"cem-modal",children:[u.jsxs("header",{className:"cem-header",children:[u.jsx("h2",{children:"Create Event"}),u.jsx("button",{className:"cem-icon",onClick:e,"aria-label":"Close",children:"×"})]}),u.jsxs("form",{className:"cem-form",onSubmit:b,children:[y&&u.jsx("div",{className:"cem-error",children:y}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Title *"}),u.jsx("input",{name:"title",value:o.title,onChange:_,placeholder:"e.g., Wedding at Royce Hall"})]}),u.jsxs("div",{className:"cem-row",children:[u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Date *"}),u.jsx("input",{type:"date",name:"date",value:o.date,onChange:_})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Start"}),u.jsx("input",{type:"time",name:"startTime",value:o.startTime,onChange:_})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"End"}),u.jsx("input",{type:"time",name:"endTime",value:o.endTime,onChange:_})]})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Location"}),u.jsx("input",{name:"location",value:o.location,onChange:_,placeholder:"Address or venue"})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Description/Notes"}),u.jsx("textarea",{name:"description",value:o.description,onChange:_,placeholder:"Any details for performers or client..."})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Status"}),u.jsxs("select",{name:"status",value:o.status,onChange:_,children:[u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),u.jsxs("footer",{className:"cem-footer",children:[u.jsx("button",{type:"button",className:"btn btn-light",onClick:e,disabled:d,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn",disabled:d,children:d?"Saving…":"Create Event"})]})]})]})})};function MM(n){const{date:e,time:t}=rA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const VM=()=>{const[n,e]=oe.useState([]),[t,r]=oe.useState(!0),[o,l]=oe.useState(!1);oe.useEffect(()=>{const p=oA(_=>{e(_.map(MM)),r(!1)},_=>{console.error("[AdminEvents subscribe]",_),r(!1)});return()=>p()},[]);const d=p=>{console.log("edit",p)},m=async p=>{if(confirm("Delete (cancel) this event?"))try{await Wk(p,{status:"cancelled"})}catch(_){console.error("[handleDelete]",_),alert("Failed to delete (cancel) event.")}},y=async p=>{const _={title:p.title.trim(),date:p.date,startTime:p.startTime||null,endTime:p.endTime||null,location:p.location?.trim()||"",description:p.description?.trim()||"",status:p.status??"draft"};await Xk(_)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1024,margin:"0 auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Events"}),u.jsx("button",{className:"btn",onClick:()=>l(!0),children:"+ Create Event"})]}),t&&u.jsx("p",{children:"Loading events…"}),!t&&u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16,marginTop:16},children:n.map(p=>u.jsx(sA,{event:p,canManage:!0,onEdit:d,onDelete:m},p.id))}),!t&&n.length===0&&u.jsx("p",{children:"No events found."}),u.jsx(kM,{open:o,onClose:()=>l(!1),onCreate:y})]})};function lg(n){const e=["admin","performer","member"];return n?(Array.isArray(n)?n:[n]).map(r=>typeof r=="string"?r.toLowerCase():r).filter(r=>e.includes(r)):[]}const gA="users";async function LM(){return(await sn(ht(Ae,gA))).docs.map(e=>{const t=e.data();return{uid:e.id,email:t.email??"",...t}})}async function UM(n,e){const t=_t(Ae,gA,n);await Ns(t,{roles:e,isAdmin:e.includes("admin"),updatedAt:Kt()},{merge:!0})}const Gb={name:"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["member"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""};async function BM(){const n=Yt.currentUser;if(!n)return!1;try{if((await n.getIdTokenResult())?.claims?.admin)return!0}catch{}try{const e=await ou(_t(Ae,"users",n.uid));return!!e.exists()&&!!e.data()?.isAdmin}catch{}return!1}function zM(){const[n,e]=oe.useState([]),[t,r]=oe.useState(!0),[o,l]=oe.useState(null);return oe.useEffect(()=>{let d=!0;return(async()=>{r(!0),l(null);const m=Yt.currentUser;if(!m){l("Not signed in"),r(!1);return}try{if(await BM()){const _=(await LM()).map(b=>({...Gb,...b,uid:b.uid,email:b.email??"",roles:lg(b.roles),instruments:Array.isArray(b.instruments)?b.instruments:[]}));d&&e(_)}else{const p=await ou(_t(Ae,"users",m.uid)),_=p.exists()?p.data():{},b={...Gb,..._,uid:m.uid,email:_?.email??m.email??"",roles:lg(_?.roles),instruments:Array.isArray(_?.instruments)?_?.instruments:[]};d&&e([b])}}catch(y){console.error("[useUsersRoster] failed",y),d&&l(y?.message||"Failed to load users")}finally{d&&r(!1)}})(),()=>{d=!1}},[]),{profiles:n,loading:t,error:o}}const qM={member:"#e2e8f0",performer:"#cffafe",admin:"#fde68a"},FM={member:"Member",performer:"Performer",admin:"Admin"},HM=({role:n})=>u.jsx("span",{style:{background:qM[n],borderRadius:9999,padding:"2px 10px",fontSize:12,border:"1px solid rgba(0,0,0,0.06)"},children:FM[n]}),GM=({value:n,onChange:e,disabled:t})=>u.jsxs("select",{value:n,onChange:r=>e(r.target.value),disabled:t,style:{padding:"6px 8px"},children:[u.jsx("option",{value:"member",children:"Member"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]});function $M(n){return!n||n.length===0?"member":n.includes("admin")?"admin":n.includes("performer")?"performer":"member"}const YM=({checked:n,onChange:e,disabled:t,label:r})=>u.jsx("button",{type:"button",className:`toggle ${n?"on":""}`,"aria-pressed":n,disabled:t,onClick:()=>e(!n),title:r,children:u.jsx("span",{className:"knob"})}),Ss=n=>{if(n){if(n instanceof Date)return n;if(n instanceof we)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},KM=(n,e)=>{const t=Ss(n),r=Ss(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},QM=({member:n,open:e,onClose:t})=>{const[r,o]=oe.useState([]),[l,d]=oe.useState({}),[m,y]=oe.useState({}),[p,_]=oe.useState({}),[b,w]=oe.useState(!1);oe.useEffect(()=>{let j=!0;return(async()=>{if(!(!e||!n)){w(!0);try{const G=ht(Ae,"events"),Q=it(G,ct("status","==","published")),ie=await sn(Q);if(!j)return;const ee=ie.docs.map(N=>({id:N.id,...N.data()})),te=Date.now(),D=ee.filter(N=>{const Oe=Ss(N.start)?.getTime();return typeof Oe=="number"?Oe>=te-1e3*60*60*24:!0}).sort((N,Oe)=>(Ss(N.start)?.getTime()??0)-(Ss(Oe.start)?.getTime()??0)),R={},x={};D.forEach(N=>{R[N.id]="",x[N.id]=!1});const C=await Promise.all(D.map(N=>ou(_t(Ae,"events",N.id,"availability",n.uid))));if(!j)return;const O={...R},V={...x};C.forEach((N,Oe)=>{if(N.exists()){const De=N.data();O[D[Oe].id]=De.status||"",V[D[Oe].id]=!!De.finalized}}),o(D),d(O),y(V)}finally{j&&w(!1)}}})(),()=>{j=!1}},[e,n]);const I=(j,U)=>{d(G=>({...G,[j]:U}))},M=(j,U)=>{y(G=>({...G,[j]:U}))},z=async j=>{if(!n)return;const U=l[j.id]||"";if(U){_(G=>({...G,[j.id]:!0}));try{const G=!!m[j.id],Q={uid:n.uid,displayName:n.name||n.email||"Unknown",email:n.email||null,status:U,updatedAt:we.now(),eventId:j.id,eventTitle:j.title||"Untitled Event",eventStart:Ss(j.start)?we.fromDate(Ss(j.start)):null,eventEnd:Ss(j.end)?we.fromDate(Ss(j.end)):null,eventLocation:j.location||null,finalized:G,finalizedBy:"admin",finalizedAt:G?we.now():null},ie=_t(Ae,"events",j.id,"availability",n.uid);await Ns(ie,Q,{merge:!0});const ee=`${j.id}_${n.uid}`,te=_t(Ae,"availability",ee);await Ns(te,Q,{merge:!0})}finally{_(G=>({...G,[j.id]:!1}))}}};return u.jsxs("div",{className:`drawer ${e?"open":""}`,"aria-hidden":!e,children:[u.jsx("div",{className:"drawer-backdrop",onClick:t}),u.jsxs("div",{className:"drawer-panel",role:"dialog","aria-modal":"true","aria-label":"Manage Member RSVPs",children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{className:"drawer-title",children:[u.jsx("div",{className:"avatar sm",children:n?.photoURL?u.jsx("img",{src:n.photoURL,alt:"avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(n?.name||n?.email||"U")[0].toUpperCase()})}),u.jsxs("div",{children:[u.jsx("h3",{children:n?.name||"Member"}),u.jsx("p",{className:"muted",children:n?.email})]})]}),u.jsx("button",{className:"btn btn-light",onClick:t,children:"Close"})]}),u.jsxs("div",{className:"drawer-body",children:[b&&u.jsx("p",{className:"muted",children:"Loading events…"}),!b&&!r.length&&u.jsx("p",{className:"muted",children:"No upcoming events."}),u.jsx("div",{className:"event-list",children:r.map(j=>u.jsxs("article",{className:"event-card",children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h4",{children:j.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${j.status}`,children:j.status})]}),u.jsxs("dl",{className:"event-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:KM(j.start,j.end)||"TBA"})]}),j.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:j.location})]})]}),u.jsxs("div",{className:"event-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${n?.uid}-${j.id}`,children:["RSVP for ",j.title]}),u.jsxs("select",{id:`sel-${n?.uid}-${j.id}`,value:l[j.id]||"",onChange:U=>I(j.id,U.target.value),children:[u.jsx("option",{value:"",children:"Select…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsxs("label",{className:"finalize-toggle",children:[u.jsx("input",{type:"checkbox",checked:!!m[j.id],onChange:U=>M(j.id,U.target.checked)}),u.jsx("span",{children:"Finalize"})]}),u.jsx("button",{className:"btn-primary",disabled:!!p[j.id]||!l[j.id],onClick:()=>z(j),children:p[j.id]?"Saving…":"Save"})]}),m[j.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP will be locked for the performer."})]},j.id))})]})]})]})},XM=()=>{const{profiles:n,loading:e,error:t}=zM(),[r,o]=oe.useState(""),[l,d]=oe.useState({}),[m,y]=oe.useState(null),[p,_]=oe.useState(!1),b=oe.useMemo(()=>{const z=r.trim().toLowerCase();return z?n.filter(j=>{const U=(j.name??"").toLowerCase(),G=(j.email??"").toLowerCase(),Q=(j.instruments??[]).join(", ").toLowerCase();return U.includes(z)||G.includes(z)||Q.includes(z)}):n},[n,r]),w=async(z,j)=>{const U=j==="admin"?["admin"]:j==="performer"?["performer"]:["member"];await UM(z.uid,U)},I=async(z,j)=>{try{d(G=>({...G,[z.uid]:!0}));const U=_t(Ae,"users",z.uid);await Ns(U,{canSeeEvents:j},{merge:!0})}finally{d(U=>({...U,[z.uid]:!1}))}},M=z=>{y(z),_(!0)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1100,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Members"}),u.jsx("p",{children:"Search, assign roles, control event access, and finalize RSVPs."}),u.jsx("div",{style:{margin:"12px 0"},children:u.jsx("input",{value:r,onChange:z=>o(z.target.value),placeholder:"Search by name, email, instrument…",style:{width:"100%",maxWidth:420}})}),e&&u.jsx("p",{children:"Loading members…"}),t&&u.jsx("p",{style:{color:"salmon"},children:String(t)}),!e&&!t&&u.jsxs("table",{className:"members-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Name"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Instruments"}),u.jsx("th",{children:"Role"}),u.jsx("th",{children:"Change Role"}),u.jsx("th",{children:"See Events?"}),u.jsx("th",{children:"RSVPs"})]})}),u.jsx("tbody",{children:b.map(z=>{const j=lg(z.roles),U=$M(j),G=!!z.canSeeEvents,Q=!!l[z.uid];return u.jsxs("tr",{children:[u.jsx("td",{children:z.name??""}),u.jsx("td",{children:z.email??""}),u.jsx("td",{children:(z.instruments??[]).join(", ")}),u.jsx("td",{children:u.jsx(HM,{role:U})}),u.jsx("td",{children:u.jsx(GM,{value:U,onChange:ie=>w(z,ie)})}),u.jsx("td",{children:u.jsxs("div",{className:"perm-cell",children:[u.jsx(YM,{checked:G,disabled:Q,onChange:ie=>I(z,ie),label:"Can view members events"}),u.jsx("span",{className:"perm-label",children:G?"Allowed":"Hidden"})]})}),u.jsx("td",{children:u.jsx("button",{className:"btn",onClick:()=>M(z),children:"Open"})})]},z.uid)})})]}),u.jsx(QM,{member:m,open:p,onClose:()=>_(!1)})]})};function fc(n){if(n){if(typeof n=="string")return n;if(n instanceof we)return n.toDate().toISOString()}}async function $b(n,e){const t=it(ht(Ae,"calendar_feed"),ct("sourceId","==",n),KO(1)),o=(await sn(t)).docs[0];o&&await Pr(_t(Ae,"calendar_feed",o.id),{status:e,updatedAt:Kt()})}const WM=()=>{const[n,e]=oe.useState([]),[t,r]=oe.useState(""),[o,l]=oe.useState("");oe.useEffect(()=>{const y=it(ht(Ae,"inquiries"),Lt("createdAt","desc")),p=lu(y,_=>{const b=_.docs.map(w=>({id:w.id,...w.data()}));e(b)},_=>l(_?.message||"Failed to load inquiries"));return()=>p()},[]);const d=async y=>{try{r(y.id),l("");const p=y.event||{},_=fc(p.start)||(p.date?new Date(`${p.date}T12:00:00`).toISOString():void 0),b=fc(p.end),w={title:p.title||"Client Performance",date:p.date||void 0,start:_,end:b,location:p.location||"",status:"published",source:"inquiry",sourceId:y.id,createdAt:Kt(),updatedAt:Kt()},I=await Fc(ht(Ae,"events"),w);await Pr(_t(Ae,"inquiries",y.id),{status:"in_progress",eventId:I.id,updatedAt:Kt()}),await $b(y.id,"in_progress")}catch(p){console.error("[accept inquiry]",p),l(p?.message||"Failed to accept request")}finally{r("")}},m=async y=>{try{r(y.id),l(""),await Pr(_t(Ae,"inquiries",y.id),{status:"closed",updatedAt:Kt()}),await $b(y.id,"closed")}catch(p){console.error("[decline inquiry]",p),l(p?.message||"Failed to decline request")}finally{r("")}};return u.jsxs("section",{className:"admin-inquiries ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performance Requests"}),u.jsx("p",{children:"Review client inquiries. Accept to create an Event; Decline to close."}),o&&u.jsx("p",{className:"err",role:"alert",children:o}),u.jsx("div",{className:"inq-list",children:n.map(y=>{const p=y.event||{};return u.jsxs("article",{className:`inq-card status-${y.status||"new"}`,children:[u.jsxs("header",{className:"inq-head",children:[u.jsxs("div",{children:[u.jsx("h3",{children:p.title||"Client Inquiry"}),u.jsxs("div",{className:"muted",children:["From: ",y.name," • ",y.email,y.org?` • ${y.org}`:""]})]}),u.jsx("span",{className:`chip ${y.status||"new"}`,children:y.status||"new"})]}),u.jsxs("dl",{className:"grid",children:[u.jsxs("div",{children:[u.jsx("dt",{children:"Date"}),u.jsx("dd",{children:p.date||(typeof p.start=="string"?p.start.slice(0,10):"")||"—"})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Time"}),u.jsx("dd",{children:(fc(p.start)?.slice(11,16)||"—")+(fc(p.end)?` – ${fc(p.end).slice(11,16)}`:"")})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Location"}),u.jsx("dd",{children:p.location||"—"})]}),u.jsxs("div",{className:"span-2",children:[u.jsx("dt",{children:"Notes"}),u.jsx("dd",{children:y.message||"—"})]})]}),u.jsxs("footer",{className:"actions",children:[u.jsx("button",{className:"btn",disabled:t===y.id,onClick:()=>d(y),children:"Accept"}),u.jsx("button",{className:"btn btn-light",disabled:t===y.id,onClick:()=>m(y),children:"Decline"})]})]},y.id)})}),n.length===0&&u.jsx("p",{children:"No requests yet."})]})};async function ZM(n){const e=ht(Ae,"events"),t=[Lt("date","desc")];n?.statusIn&&n.statusIn.length&&t.unshift(ct("status","in",n.statusIn));const r=it(e,...t),o=await sn(r),l=[];for(const d of o.docs){const m={id:d.id,...d.data()},y=ht(Ae,`events/${d.id}/participation`),_=(await sn(y)).docs.map(M=>({uid:M.id,...M.data()}));let b=0,w=0,I=0;for(const M of _){if(!(M.status==="going"))continue;b+=1;const j=typeof M.compensatedHours=="number"?M.compensatedHours:m.eventDurationHours??0,U=typeof M.hourlyRateOverride=="number"?M.hourlyRateOverride:m.hourlyRate??0;w+=j,I+=j*U}l.push({...m,participants:_,totals:{headcountGoing:b,totalCompHours:w,totalPayout:I}})}return l}async function JM(n){await Pr(_t(Ae,"events",n),{status:"published"})}async function eV(n){await Pr(_t(Ae,"events",n),{status:"hidden"})}async function tV(n){await Pr(_t(Ae,"events",n),{status:"canceled"})}async function nV(n){const e=ZO(Ae),t=_t(Ae,"events",n),r=ht(Ae,`events/${n}/participation`);(await sn(r)).forEach(l=>e.delete(l.ref)),e.delete(t),await e.commit()}const iV=n=>n?n.toDate().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",va=n=>typeof n=="number"?`$${n.toFixed(2)}`:"—",sV=({status:n})=>u.jsx("span",{className:`status badge ${n}`,children:n}),Yb=()=>{const[n,e]=oe.useState(!0),[t,r]=oe.useState([]),[o,l]=oe.useState("all"),[d,m]=oe.useState(""),y=oe.useCallback(async()=>{e(!0);const b=await ZM({statusIn:o==="all"?void 0:[o]});r(b),e(!1)},[o]);oe.useEffect(()=>{y()},[y]);const p=oe.useMemo(()=>{const _=d.trim().toLowerCase();return t.filter(b=>!_||b.title.toLowerCase().includes(_))},[t,d]);return u.jsxs("section",{className:"participation-page",children:[u.jsx("h1",{children:"Participation & Event Financials"}),u.jsxs("div",{className:"toolbar",children:[u.jsx("input",{placeholder:"Search events by title…",value:d,onChange:_=>m(_.target.value)}),u.jsxs("select",{value:o,onChange:_=>l(_.target.value),children:[u.jsx("option",{value:"all",children:"All statuses"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"hidden",children:"Hidden"}),u.jsx("option",{value:"canceled",children:"Canceled"})]}),u.jsx("button",{onClick:y,disabled:n,children:n?"Loading…":"Reload"})]}),p.map(_=>u.jsxs("details",{className:"event-card",children:[u.jsx("summary",{children:u.jsxs("div",{className:"ev-summary",children:[u.jsxs("div",{className:"ev-title",children:[u.jsx("h3",{children:_.title}),u.jsxs("div",{className:"meta",children:[u.jsx("span",{children:iV(_.date)}),u.jsxs("span",{children:["• ",_.startTime??"—","–",_.endTime??"—"]}),u.jsxs("span",{children:["• ",_.venue??"—"]})]})]}),u.jsxs("div",{className:"ev-stats",children:[u.jsx(sV,{status:_.status}),u.jsxs("div",{className:"kpis",children:[u.jsxs("div",{children:[u.jsx("small",{children:"Going"}),u.jsx("strong",{children:_.totals.headcountGoing})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Comp Hours"}),u.jsx("strong",{children:_.totals.totalCompHours.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Total Payout"}),u.jsx("strong",{children:va(_.totals.totalPayout)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Client Charge"}),u.jsx("strong",{children:va(_.clientCharge)})]})]})]})]})}),u.jsxs("div",{className:"ev-actions",children:[u.jsx("button",{onClick:()=>JM(_.id).then(y),children:"Publish"}),u.jsx("button",{onClick:()=>eV(_.id).then(y),children:"Hide"}),u.jsx("button",{onClick:()=>tV(_.id).then(y),children:"Cancel"}),u.jsx("button",{className:"danger",onClick:()=>{confirm("Delete event and all participation? This cannot be undone.")&&nV(_.id).then(y)},children:"Delete"})]}),u.jsxs("div",{className:"ev-financials",children:[u.jsx("h4",{children:"Financial Summary"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Hourly Rate"}),u.jsx("th",{children:"Event Duration (hrs)"}),u.jsx("th",{children:"Headcount (Going)"}),u.jsx("th",{children:"Total Comp Hours"}),u.jsx("th",{children:"Total Payout"}),u.jsx("th",{children:"Client Charge"})]})}),u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("td",{children:va(_.hourlyRate??null)}),u.jsx("td",{children:_.eventDurationHours??"—"}),u.jsx("td",{children:_.totals.headcountGoing}),u.jsx("td",{children:_.totals.totalCompHours.toFixed(2)}),u.jsx("td",{children:va(_.totals.totalPayout)}),u.jsx("td",{children:va(_.clientCharge)})]})})]})]}),u.jsxs("div",{className:"ev-participants",children:[u.jsx("h4",{children:"Who’s Going"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Compensated Time (hrs)"}),u.jsx("th",{children:"Rate ($/hr)"}),u.jsx("th",{children:"Performer Payout"})]})}),u.jsxs("tbody",{children:[_.participants.filter(b=>b.status==="going").map(b=>{const w=b.compensatedHours??_.eventDurationHours??0,I=b.hourlyRateOverride??_.hourlyRate??0,M=w*I;return u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status}),u.jsx("td",{children:typeof w=="number"?w.toFixed(2):"—"}),u.jsx("td",{children:va(I)}),u.jsx("td",{children:va(M)})]},b.uid)}),_.participants.filter(b=>b.status==="going").length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:5,style:{textAlign:"center",opacity:.65},children:"No confirmed performers yet."})})]})]}),u.jsxs("details",{className:"others",children:[u.jsx("summary",{children:"View others (maybe/declined/unknown)"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Notes"})]})}),u.jsx("tbody",{children:_.participants.filter(b=>b.status!=="going").map(b=>u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status??"unknown"}),u.jsx("td",{children:"—"})]},b.uid))})]})]})]})]},_.id)),!n&&p.length===0&&u.jsx("p",{style:{opacity:.7},children:"No events match your filter."})]})},yr=n=>{try{if(!n&&n!==0)return null;if(n&&typeof n=="object"&&"toDate"in n)return n.toDate();if(typeof n=="string")return new Date(n);if(typeof n=="number")return new Date(n)}catch{}return null},rV=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():void 0,Cp=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"Unknown",qh=(n,e)=>{const t=n?yr(n):null,r=e?yr(e):null;if(!t||!r)return 0;const o=Math.max(0,r.getTime()-t.getTime());return Math.round(o/36e5*4)/4},aV=()=>{const[n,e]=oe.useState(""),[t,r]=oe.useState(""),[o,l]=oe.useState(!1),[d,m]=oe.useState(""),[y,p]=oe.useState([]),[_,b]=oe.useState([]),[w,I]=oe.useState([]),[M,z]=oe.useState({total:0,published:0,canceled:0,completed:0}),[j,U]=oe.useState({Submitted:0,Accepted:0,Booked:0,Completed:0}),[G,Q]=oe.useState({total:0,Yes:0,Maybe:0,No:0}),[ie,ee]=oe.useState(0),[te,D]=oe.useState(!1),[R,x]=oe.useState(null),[C,O]=oe.useState([]),[V,N]=oe.useState(!1),Oe=oe.useCallback(async()=>{l(!0),m("");const re=n?new Date(n+"T00:00:00"):null,P=t?new Date(t+"T23:59:59.999"):null;try{const Z=ht(Ae,"events");let he;re&&P?he=it(Z,ct("date",">=",we.fromDate(re)),ct("date","<=",we.fromDate(P)),Lt("date","desc")):re?he=it(Z,ct("date",">=",we.fromDate(re)),Lt("date","desc")):P?he=it(Z,ct("date","<=",we.fromDate(P)),Lt("date","desc")):he=it(Z,Lt("date","desc"));const ue=(await sn(he)).docs.map(st=>{const Ne=st.data();return{id:st.id,date:yr(Ne.date??Ne.start),start:Ne.start??Ne.date,end:Ne.end??null,status:Ne.status?Cp(Ne.status):void 0,title:Ne.title||Ne.name,location:Ne.location}}),pe={total:ue.length,published:0,canceled:0,completed:0};for(const st of ue){const Ne=(st.status||"").toLowerCase();Ne==="published"||Ne==="confirmed"?pe.published++:Ne==="cancelled"||Ne==="canceled"?pe.canceled++:(Ne==="completed"||Ne==="done")&&pe.completed++}const de=ht(Ae,"inquiries");let Ye;re&&P?Ye=it(de,ct("date",">=",we.fromDate(re)),ct("date","<=",we.fromDate(P)),Lt("date","desc")):re?Ye=it(de,ct("date",">=",we.fromDate(re)),Lt("date","desc")):P?Ye=it(de,ct("date","<=",we.fromDate(P)),Lt("date","desc")):Ye=it(de,Lt("date","desc"));const gt=(await sn(Ye)).docs.map(st=>{const Ne=st.data();return{id:st.id,date:yr(Ne.date),status:Ne.status?Cp(Ne.status):void 0,title:Ne.title||Ne.clientName||Ne.subject}}),pt={Submitted:0,Accepted:0,Booked:0,Completed:0};for(const st of gt){const Ne=Cp(st.status);Ne in pt&&pt[Ne]++}const Xt=ht(Ae,"availability"),bi=[re||P?re&&P?it(Xt,ct("eventStart",">=",we.fromDate(re)),ct("eventStart","<=",we.fromDate(P)),Lt("eventStart","desc")):re?it(Xt,ct("eventStart",">=",we.fromDate(re)),Lt("eventStart","desc")):it(Xt,ct("eventStart","<=",we.fromDate(P)),Lt("eventStart","desc")):it(Xt,Lt("eventStart","desc")),re||P?re&&P?it(Xt,ct("date",">=",we.fromDate(re)),ct("date","<=",we.fromDate(P)),Lt("date","desc")):re?it(Xt,ct("date",">=",we.fromDate(re)),Lt("date","desc")):it(Xt,ct("date","<=",we.fromDate(P)),Lt("date","desc")):it(Xt,Lt("date","desc"))],[Wi,Zi]=await Promise.all([sn(bi[0]),sn(bi[1])]),Us=new Map;for(const st of[...Wi.docs,...Zi.docs])Us.set(st.id,st.data());const Bs=Array.from(Us.entries()).map(([st,Ne])=>{const wi=Ne.response??Ne.status,Lr=typeof wi=="string"?wi.toLowerCase():"",zs=Lr==="yes"?"Yes":Lr==="no"?"No":Lr==="maybe"?"Maybe":rV(Ne.response);return{id:st,uid:Ne.uid,name:Ne.displayName||Ne.name,date:yr(Ne.eventStart??Ne.date),response:zs,eventId:Ne.eventId,title:Ne.title||Ne.eventTitle}}),rn={total:Bs.length,Yes:0,Maybe:0,No:0};for(const st of Bs)st.response==="Yes"?rn.Yes++:st.response==="Maybe"?rn.Maybe++:st.response==="No"&&rn.No++;let Ma=0;for(const st of ue)(st.status||"").toLowerCase()==="completed"&&(Ma+=qh(st.start,st.end));p(ue),b(gt),I(Bs),z(pe),U(pt),Q(rn),ee(Ma)}catch(Z){console.error(Z),m(Z?.message??"Failed to fetch report data"),p([]),b([]),I([]),z({total:0,published:0,canceled:0,completed:0}),U({Submitted:0,Accepted:0,Booked:0,Completed:0}),Q({total:0,Yes:0,Maybe:0,No:0}),ee(0)}finally{l(!1)}},[n,t]);oe.useEffect(()=>{Oe()},[Oe]);const De=()=>{try{const Z="\uFEFF"+["Metric,Value",`Events Total,${M.total}`,`Events Published,${M.published}`,`Events Canceled,${M.canceled}`,`Events Completed,${M.completed}`,`Inquiries Submitted,${j.Submitted}`,`Inquiries Accepted,${j.Accepted}`,`Inquiries Booked,${j.Booked}`,`Inquiries Completed,${j.Completed}`,`Availability Total,${G.total}`,`Availability Yes,${G.Yes}`,`Availability Maybe,${G.Maybe}`,`Availability No,${G.No}`,`Finance Approved Hours (approx),${ie}`].join(`\r
`),he=new Blob([Z],{type:"text/csv;charset=utf-8;"}),ce=URL.createObjectURL(he),ue=document.createElement("a");ue.href=ce,ue.download="tallies.csv",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(ce)}catch(re){console.error("CSV export failed:",re)}},X=async re=>{x(re),D(!0);const P=it(ht(Ae,"availability"),ct("eventId","==",re.id)),he=(await sn(P)).docs.map(ce=>ce.data()).filter(ce=>{const ue=ce.status??ce.response,pe=typeof ue=="string"?ue.toLowerCase():"";return pe==="yes"||pe==="going"||pe==="attending"}).map(ce=>({uid:ce.uid,name:ce.displayName||ce.name||ce.email||ce.uid,approved:!1}));O(he)},me=re=>O(P=>P.map(Z=>Z.uid===re?{...Z,approved:!Z.approved}:Z)),Ee=async()=>{if(R){N(!0);try{const re=qh(R.start,R.end),P=C.filter(Z=>Z.approved);await Promise.all(P.map(Z=>{const he=_t(Ae,"events",R.id,"payments",Z.uid),ce={uid:Z.uid,name:Z.name,eventId:R.id,eventTitle:R.title||"Untitled Event",eventDate:yr(R.date)??null,hours:re,approvedAt:Kt()};return Ns(he,ce,{merge:!0})})),await Pr(_t(Ae,"events",R.id),{status:"completed",completedAt:Kt()}),await Oe(),D(!1),x(null),O([])}catch(re){console.error("Finalize failed",re),m("Finalize failed. See console.")}finally{N(!1)}}};return u.jsxs("section",{className:"reports stack",children:[u.jsxs("header",{className:"stack",children:[u.jsx("h1",{className:"title",children:"Reports"}),u.jsx("p",{className:"lede",children:"Tallies for Events, Inquiries, Availability — with event finalization."})]}),u.jsxs("div",{className:"toolbar",children:[u.jsxs("div",{className:"left",children:[u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"From"}),u.jsx("input",{type:"date",value:n,onChange:re=>e(re.target.value)})]}),u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"To"}),u.jsx("input",{type:"date",value:t,onChange:re=>r(re.target.value)})]})]}),u.jsxs("div",{className:"right",children:[u.jsx("button",{className:"btn",onClick:De,disabled:o,children:"Export CSV"}),u.jsx("button",{className:"btn btn-secondary",onClick:Oe,disabled:o,children:o?"Loading…":"Refresh"})]})]}),d&&u.jsx("div",{className:"alert",children:d}),u.jsxs("div",{className:"grid cols-3 stack-md",children:[u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Events"}),u.jsxs("p",{className:"muted",children:["Total (range): ",M.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Published"}),u.jsx("strong",{children:M.published})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge canceled",children:"Canceled"}),u.jsx("strong",{children:M.canceled})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:M.completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Inquiries Funnel"}),u.jsxs("p",{className:"muted",children:["Total: ",Object.values(j).reduce((re,P)=>re+P,0)]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Submitted"}),u.jsx("strong",{children:j.Submitted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge accepted",children:"Accepted"}),u.jsx("strong",{children:j.Accepted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge booked",children:"Booked"}),u.jsx("strong",{children:j.Booked})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:j.Completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Availability"}),u.jsxs("p",{className:"muted",children:["Total responses: ",G.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge yes",children:"Yes"}),u.jsx("strong",{children:G.Yes})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge maybe",children:"Maybe"}),u.jsx("strong",{children:G.Maybe})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge no",children:"No"}),u.jsx("strong",{children:G.No})]})]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Events in Range"}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status"}),u.jsx("div",{children:"Duration"}),u.jsx("div",{children:"Actions"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&y.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No events."})}),!o&&y.map(re=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:re.date?re.date.toLocaleDateString():"—"}),u.jsx("div",{children:re.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(re.status||"unknown").toLowerCase()}`,children:re.status||"—"})}),u.jsxs("div",{children:[qh(re.start,re.end)," hr"]}),u.jsx("div",{children:u.jsx("button",{className:"btn sm",onClick:()=>X(re),disabled:!re.id,children:"Manage"})})]},re.id))]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Recent (Events • Inquiries • Availability)"}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Type"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status/Response"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&y.length+_.length+w.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No items for selected range."})}),!o&&u.jsxs(u.Fragment,{children:[y.map(re=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:re.date?re.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Event"}),u.jsx("div",{children:re.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(re.status||"unknown").toLowerCase()}`,children:re.status||"—"})})]},`e-${re.id}`)),_.map(re=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:re.date?re.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Inquiry"}),u.jsx("div",{children:re.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(re.status||"unknown").toLowerCase()}`,children:re.status||"—"})})]},`q-${re.id}`)),w.map(re=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:re.date?re.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Availability"}),u.jsx("div",{children:re.title||re.eventId||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(re.response||"unknown").toLowerCase()}`,children:re.response||"—"})})]},`r-${re.id}`))]})]})]}),te&&R&&E1.createPortal(u.jsx("div",{className:"drawer-backdrop csswrap",role:"dialog","aria-modal":!0,onClick:()=>D(!1),children:u.jsxs("div",{className:"drawer",onClick:re=>re.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"drawer-title",children:["Finalize: ",R.title]}),u.jsxs("div",{className:"drawer-meta",children:[yr(R.start)?.toLocaleString()??"—",R.end?` – ${yr(R.end)?.toLocaleTimeString()}`:"",R.location?` • ${R.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:()=>D(!1),"aria-label":"Close",children:"✕"})]}),u.jsxs("div",{className:"drawer-body",children:[u.jsx("p",{className:"muted",children:"YES RSVPs — check whom to approve for payment."}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Approve"}),u.jsx("div",{children:"Performer"})]}),C.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No YES RSVPs found."})}),C.map(re=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:u.jsx("input",{type:"checkbox",checked:re.approved,onChange:()=>me(re.uid),"aria-label":`Approve ${re.name}`})}),u.jsx("div",{children:re.name})]},re.uid))]}),u.jsxs("div",{className:"stack",children:[u.jsxs("div",{className:"muted",children:["Duration: ",qh(R.start,R.end)," hr"]}),u.jsx("button",{className:"btn-primary",onClick:Ee,disabled:V||C.every(re=>!re.approved),children:V?"Finalizing…":"Finalize & Write Payments"})]})]})]})}),document.body)]})},Sy=({person:n})=>u.jsxs("article",{className:"person-card","aria-label":n.name,children:[u.jsx("div",{className:"person-card__image",children:u.jsx("img",{src:n.headshotUrl||"https://via.placeholder.com/512x640?text=Headshot",alt:`${n.name} headshot`,loading:"lazy"})}),u.jsxs("div",{className:"person-card__body",children:[u.jsx("h3",{className:"person-card__name",children:n.name}),n.role&&u.jsx("p",{className:"person-card__meta",children:n.role}),n.instrument&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Instrument:"})," ",n.instrument]}),n.section&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Section:"})," ",n.section]})]})]}),oV=[{id:"staff-1",name:"Jesús Guzmán",category:"staff",role:"Director",headshotUrl:"../../assets/headshots/Chuy.png"},{id:"staff-2",name:"Elias Rodriguez",category:"staff",role:"Program Coordinator",headshotUrl:"https://via.placeholder.com/512x640?text=Elias+Rodriguez"}],lV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Staff"}),u.jsx("p",{className:"people-subtitle",children:"Leaders and coordinators supporting Mariachi de Uclatlán."})]}),u.jsx("div",{className:"people-grid",children:oV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),cV=[{id:"mus-1",name:"Enrique Rodrigruez-Gonzales",category:"musician",instrument:"Vihuela",section:"Armonia",headshotUrl:"EnriqueImg"},{id:"mus-2",name:"Angel Ramirez",category:"musician",instrument:"Guitarron",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=José+Hernández"},{id:"mus-3",name:"Brandon",category:"musician",role:"Guitarra",section:"Armonia",headshotUrl:"src/assets/headshots/brandon.jpg"},{id:"mus-3",name:"Paulina Perez",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-4",name:"Gaby (guitar)",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-5",name:"Dayanara Bravo",role:"Violin-Guitarron",category:"musician",section:"String-Armonia",headshotUrl:"src/assets/headshots/daya.jpg"},{id:"Mus-6",name:"Jake Sherry",category:"musician",role:"Trumpet",section:"Trumpet",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-7",name:"april",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-8",name:"Andrew",category:"musician",role:"Violin",section:"string",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],uV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Musicians"}),u.jsx("p",{className:"people-subtitle",children:"Meet the student performers who bring the music to life."})]}),u.jsx("div",{className:"people-grid",children:cV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),hV=[{id:"dan-1",name:"Sarah Ward",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],dV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Dancers"}),u.jsx("p",{className:"people-subtitle",children:"Folklórico dancers who bring motion and storytelling to our performances."})]}),u.jsx("div",{className:"people-grid",children:hV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),fV=({adminComponent:n,performerComponent:e,publicComponent:t})=>{const[r,o]=q.useState("public"),l=d=>{const m=d.target.value;o(m)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f0f0f0"},children:[u.jsx("label",{style:{marginRight:"0.5rem"},children:"Select Role View:"}),u.jsxs("select",{value:r,onChange:l,children:[u.jsx("option",{value:"public",children:"Public"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]})]}),r==="admin"&&u.jsx(wy,{}),r==="performer"&&u.jsx(pA,{}),"  ",r==="public"&&u.jsx(mA,{}),u.jsxs("main",{children:[r==="admin"&&n,r==="performer"&&e,r==="public"&&t]})]})},mV=()=>u.jsx(rw,{}),pV=()=>{const[n,e]=oe.useState(null),[t,r]=oe.useState(null),o=Qi();oe.useEffect(()=>{const b=Dd(Yt,async w=>{if(e(w),w){const I=await Dw(w);r(I.claims)}else r(null)});return()=>b()},[]),typeof window<"u"&&localStorage.getItem("adminAccess");const l=oe.useMemo(()=>typeof window<"u"&&localStorage.getItem("adminAccess")==="true"?!0:n?t?.admin||t?.role==="admin"?!0:cA(n.email??void 0):!1,[n,t,o.pathname]),d=o.pathname,m=d.startsWith("/members"),y=d.startsWith("/admin"),p=d.startsWith("/performer-dashboard"),_=d.startsWith("/dashboard")||p||y;return u.jsxs("div",{className:"app-shell",children:[!m&&!_&&u.jsx(mA,{}),m&&n&&u.jsx(pA,{}),p&&n&&u.jsx(fA,{}),u.jsx("main",{className:"container main stack",role:"main",children:u.jsxs(qx,{children:[u.jsx(Qe,{path:"/",element:u.jsx(XE,{})}),u.jsx(Qe,{path:"/about",element:u.jsx(R1,{})}),u.jsx(Qe,{path:"/contact",element:u.jsx(x1,{})}),u.jsx(Qe,{path:"/login",element:u.jsx(Dk,{})}),u.jsx(Qe,{path:"/register",element:u.jsx(Pk,{})}),u.jsx(Qe,{path:"/book-us",element:u.jsx(Vk,{})}),u.jsx(Qe,{path:"/hire-us",element:u.jsx(Bk,{})}),u.jsx(Qe,{path:"/join",element:u.jsx(Lk,{})}),u.jsx(Qe,{path:"/staff",element:u.jsx(lV,{})}),u.jsx(Qe,{path:"/musicians",element:u.jsx(uV,{})}),u.jsx(Qe,{path:"/dancers",element:u.jsx(dV,{})}),u.jsx(Qe,{path:"/admin-password",element:u.jsx(OM,{})}),u.jsxs(Qe,{path:"/members",element:u.jsx(xp,{user:n,children:u.jsx(mV,{})}),children:[u.jsx(Qe,{index:!0,element:u.jsx(Fk,{})}),u.jsx(Qe,{path:"profile",element:u.jsx($k,{})}),u.jsx(Qe,{path:"events",element:u.jsx(Jk,{})}),u.jsx(Qe,{path:"resources",element:u.jsx(eM,{})}),u.jsx(Qe,{path:"settings",element:u.jsx(nM,{})}),u.jsx(Qe,{path:"performer-availability",element:u.jsx(cM,{})}),u.jsx(Qe,{path:"calendar",element:u.jsx(NM,{})})]}),u.jsx(Qe,{path:"/dashboard",element:u.jsx(fV,{adminComponent:u.jsx(Fb,{}),performerComponent:u.jsx(Hb,{}),publicComponent:u.jsx(XE,{})})}),u.jsxs(Qe,{path:"/admin/*",element:u.jsx(xp,{user:n,isAdminUser:l,requiresAdmin:!0,children:u.jsxs(u.Fragment,{children:[u.jsx(wy,{}),u.jsx(PM,{})]})}),children:[u.jsx(Qe,{index:!0,element:u.jsx(Fb,{})}),u.jsx(Qe,{path:"events",element:u.jsx(VM,{})}),u.jsx(Qe,{path:"managemembers",element:u.jsx(XM,{})}),u.jsx(Qe,{path:"reports",element:u.jsx(aV,{})}),u.jsx(Qe,{path:"inquiries",element:u.jsx(WM,{})}),u.jsx(Qe,{path:"participation",element:u.jsx(Yb,{})})]}),u.jsx(Qe,{path:"/admin/participation",element:u.jsx(Yb,{})}),u.jsx(Qe,{path:"/performer-dashboard",element:u.jsx(xp,{user:n,children:u.jsx(Hb,{})})}),u.jsx(Qe,{path:"*",element:u.jsx(Ip,{to:"/",replace:!0})})]})}),!y&&u.jsx(IM,{}),u.jsx(DM,{user:n,isAdmin:l,claims:t})]})},gV=()=>u.jsx(h1,{children:u.jsx(pV,{})});XR.createRoot(document.getElementById("root")).render(u.jsx(oe.StrictMode,{children:u.jsx(gV,{})}));

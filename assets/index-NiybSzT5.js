(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Kb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Jm={exports:{}},ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kE;function BR(){if(kE)return ac;kE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,o,l){var d=null;if(l!==void 0&&(d=""+l),o.key!==void 0&&(d=""+o.key),"key"in o){l={};for(var m in o)m!=="key"&&(l[m]=o[m])}else l=o;return o=l.ref,{$$typeof:n,type:r,key:d,ref:o!==void 0?o:null,props:l}}return ac.Fragment=e,ac.jsx=t,ac.jsxs=t,ac}var ME;function zR(){return ME||(ME=1,Jm.exports=BR()),Jm.exports}var u=zR(),ep={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VE;function qR(){if(VE)return Pe;VE=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,z={};function j(k,Z,he){this.props=k,this.context=Z,this.refs=z,this.updater=he||I}j.prototype.isReactComponent={},j.prototype.setState=function(k,Z){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Z,"setState")},j.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function U(){}U.prototype=j.prototype;function G(k,Z,he){this.props=k,this.context=Z,this.refs=z,this.updater=he||I}var Q=G.prototype=new U;Q.constructor=G,M(Q,j.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray,ee={H:null,A:null,T:null,S:null,V:null},te=Object.prototype.hasOwnProperty;function D(k,Z,he,le,ue,pe){return he=pe.ref,{$$typeof:n,type:k,key:Z,ref:he!==void 0?he:null,props:pe}}function R(k,Z){return D(k.type,Z,void 0,void 0,void 0,k.props)}function x(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function C(k){var Z={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(he){return Z[he]})}var O=/\/+/g;function V(k,Z){return typeof k=="object"&&k!==null&&k.key!=null?C(""+k.key):Z.toString(36)}function N(){}function Oe(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(N,N):(k.status="pending",k.then(function(Z){k.status==="pending"&&(k.status="fulfilled",k.value=Z)},function(Z){k.status==="pending"&&(k.status="rejected",k.reason=Z)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function Ie(k,Z,he,le,ue){var pe=typeof k;(pe==="undefined"||pe==="boolean")&&(k=null);var de=!1;if(k===null)de=!0;else switch(pe){case"bigint":case"string":case"number":de=!0;break;case"object":switch(k.$$typeof){case n:case e:de=!0;break;case _:return de=k._init,Ie(de(k._payload),Z,he,le,ue)}}if(de)return ue=ue(k),de=le===""?"."+V(k,0):le,ie(ue)?(he="",de!=null&&(he=de.replace(O,"$&/")+"/"),Ie(ue,Z,he,"",function(pt){return pt})):ue!=null&&(x(ue)&&(ue=R(ue,he+(ue.key==null||k&&k.key===ue.key?"":(""+ue.key).replace(O,"$&/")+"/")+de)),Z.push(ue)),1;de=0;var Ke=le===""?".":le+":";if(ie(k))for(var qe=0;qe<k.length;qe++)le=k[qe],pe=Ke+V(le,qe),de+=Ie(le,Z,he,pe,ue);else if(qe=w(k),typeof qe=="function")for(k=qe.call(k),qe=0;!(le=k.next()).done;)le=le.value,pe=Ke+V(le,qe++),de+=Ie(le,Z,he,pe,ue);else if(pe==="object"){if(typeof k.then=="function")return Ie(Oe(k),Z,he,le,ue);throw Z=String(k),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return de}function X(k,Z,he){if(k==null)return k;var le=[],ue=0;return Ie(k,le,"","",function(pe){return Z.call(he,pe,ue++)}),le}function me(k){if(k._status===-1){var Z=k._result;Z=Z(),Z.then(function(he){(k._status===0||k._status===-1)&&(k._status=1,k._result=he)},function(he){(k._status===0||k._status===-1)&&(k._status=2,k._result=he)}),k._status===-1&&(k._status=0,k._result=Z)}if(k._status===1)return k._result.default;throw k._result}var Ee=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function ce(){}return Pe.Children={map:X,forEach:function(k,Z,he){X(k,function(){Z.apply(this,arguments)},he)},count:function(k){var Z=0;return X(k,function(){Z++}),Z},toArray:function(k){return X(k,function(Z){return Z})||[]},only:function(k){if(!x(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},Pe.Component=j,Pe.Fragment=t,Pe.Profiler=o,Pe.PureComponent=G,Pe.StrictMode=r,Pe.Suspense=y,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(k){return ee.H.useMemoCache(k)}},Pe.cache=function(k){return function(){return k.apply(null,arguments)}},Pe.cloneElement=function(k,Z,he){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var le=M({},k.props),ue=k.key,pe=void 0;if(Z!=null)for(de in Z.ref!==void 0&&(pe=void 0),Z.key!==void 0&&(ue=""+Z.key),Z)!te.call(Z,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&Z.ref===void 0||(le[de]=Z[de]);var de=arguments.length-2;if(de===1)le.children=he;else if(1<de){for(var Ke=Array(de),qe=0;qe<de;qe++)Ke[qe]=arguments[qe+2];le.children=Ke}return D(k.type,ue,void 0,void 0,pe,le)},Pe.createContext=function(k){return k={$$typeof:d,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},Pe.createElement=function(k,Z,he){var le,ue={},pe=null;if(Z!=null)for(le in Z.key!==void 0&&(pe=""+Z.key),Z)te.call(Z,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ue[le]=Z[le]);var de=arguments.length-2;if(de===1)ue.children=he;else if(1<de){for(var Ke=Array(de),qe=0;qe<de;qe++)Ke[qe]=arguments[qe+2];ue.children=Ke}if(k&&k.defaultProps)for(le in de=k.defaultProps,de)ue[le]===void 0&&(ue[le]=de[le]);return D(k,pe,void 0,void 0,null,ue)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(k){return{$$typeof:m,render:k}},Pe.isValidElement=x,Pe.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:me}},Pe.memo=function(k,Z){return{$$typeof:p,type:k,compare:Z===void 0?null:Z}},Pe.startTransition=function(k){var Z=ee.T,he={};ee.T=he;try{var le=k(),ue=ee.S;ue!==null&&ue(he,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(ce,Ee)}catch(pe){Ee(pe)}finally{ee.T=Z}},Pe.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()},Pe.use=function(k){return ee.H.use(k)},Pe.useActionState=function(k,Z,he){return ee.H.useActionState(k,Z,he)},Pe.useCallback=function(k,Z){return ee.H.useCallback(k,Z)},Pe.useContext=function(k){return ee.H.useContext(k)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(k,Z){return ee.H.useDeferredValue(k,Z)},Pe.useEffect=function(k,Z,he){var le=ee.H;if(typeof he=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(k,Z)},Pe.useId=function(){return ee.H.useId()},Pe.useImperativeHandle=function(k,Z,he){return ee.H.useImperativeHandle(k,Z,he)},Pe.useInsertionEffect=function(k,Z){return ee.H.useInsertionEffect(k,Z)},Pe.useLayoutEffect=function(k,Z){return ee.H.useLayoutEffect(k,Z)},Pe.useMemo=function(k,Z){return ee.H.useMemo(k,Z)},Pe.useOptimistic=function(k,Z){return ee.H.useOptimistic(k,Z)},Pe.useReducer=function(k,Z,he){return ee.H.useReducer(k,Z,he)},Pe.useRef=function(k){return ee.H.useRef(k)},Pe.useState=function(k){return ee.H.useState(k)},Pe.useSyncExternalStore=function(k,Z,he){return ee.H.useSyncExternalStore(k,Z,he)},Pe.useTransition=function(){return ee.H.useTransition()},Pe.version="19.1.1",Pe}var LE;function cg(){return LE||(LE=1,ep.exports=qR()),ep.exports}var q=cg();const ae=Kb(q);var tp={exports:{}},oc={},np={exports:{}},ip={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UE;function FR(){return UE||(UE=1,(function(n){function e(X,me){var Ee=X.length;X.push(me);e:for(;0<Ee;){var ce=Ee-1>>>1,k=X[ce];if(0<o(k,me))X[ce]=me,X[Ee]=k,Ee=ce;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var me=X[0],Ee=X.pop();if(Ee!==me){X[0]=Ee;e:for(var ce=0,k=X.length,Z=k>>>1;ce<Z;){var he=2*(ce+1)-1,le=X[he],ue=he+1,pe=X[ue];if(0>o(le,Ee))ue<k&&0>o(pe,le)?(X[ce]=pe,X[ue]=Ee,ce=ue):(X[ce]=le,X[he]=Ee,ce=he);else if(ue<k&&0>o(pe,Ee))X[ce]=pe,X[ue]=Ee,ce=ue;else break e}}return me}function o(X,me){var Ee=X.sortIndex-me.sortIndex;return Ee!==0?Ee:X.id-me.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();n.unstable_now=function(){return d.now()-m}}var y=[],p=[],_=1,b=null,w=3,I=!1,M=!1,z=!1,j=!1,U=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ie(X){for(var me=t(p);me!==null;){if(me.callback===null)r(p);else if(me.startTime<=X)r(p),me.sortIndex=me.expirationTime,e(y,me);else break;me=t(p)}}function ee(X){if(z=!1,ie(X),!M)if(t(y)!==null)M=!0,te||(te=!0,V());else{var me=t(p);me!==null&&Ie(ee,me.startTime-X)}}var te=!1,D=-1,R=5,x=-1;function C(){return j?!0:!(n.unstable_now()-x<R)}function O(){if(j=!1,te){var X=n.unstable_now();x=X;var me=!0;try{e:{M=!1,z&&(z=!1,G(D),D=-1),I=!0;var Ee=w;try{t:{for(ie(X),b=t(y);b!==null&&!(b.expirationTime>X&&C());){var ce=b.callback;if(typeof ce=="function"){b.callback=null,w=b.priorityLevel;var k=ce(b.expirationTime<=X);if(X=n.unstable_now(),typeof k=="function"){b.callback=k,ie(X),me=!0;break t}b===t(y)&&r(y),ie(X)}else r(y);b=t(y)}if(b!==null)me=!0;else{var Z=t(p);Z!==null&&Ie(ee,Z.startTime-X),me=!1}}break e}finally{b=null,w=Ee,I=!1}me=void 0}}finally{me?V():te=!1}}}var V;if(typeof Q=="function")V=function(){Q(O)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Oe=N.port2;N.port1.onmessage=O,V=function(){Oe.postMessage(null)}}else V=function(){U(O,0)};function Ie(X,me){D=U(function(){X(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_next=function(X){switch(w){case 1:case 2:case 3:var me=3;break;default:me=w}var Ee=w;w=me;try{return X()}finally{w=Ee}},n.unstable_requestPaint=function(){j=!0},n.unstable_runWithPriority=function(X,me){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Ee=w;w=X;try{return me()}finally{w=Ee}},n.unstable_scheduleCallback=function(X,me,Ee){var ce=n.unstable_now();switch(typeof Ee=="object"&&Ee!==null?(Ee=Ee.delay,Ee=typeof Ee=="number"&&0<Ee?ce+Ee:ce):Ee=ce,X){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=Ee+k,X={id:_++,callback:me,priorityLevel:X,startTime:Ee,expirationTime:k,sortIndex:-1},Ee>ce?(X.sortIndex=Ee,e(p,X),t(y)===null&&X===t(p)&&(z?(G(D),D=-1):z=!0,Ie(ee,Ee-ce))):(X.sortIndex=k,e(y,X),M||I||(M=!0,te||(te=!0,V()))),X},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(X){var me=w;return function(){var Ee=w;w=me;try{return X.apply(this,arguments)}finally{w=Ee}}}})(ip)),ip}var BE;function HR(){return BE||(BE=1,np.exports=FR()),np.exports}var sp={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zE;function GR(){if(zE)return fn;zE=1;var n=cg();function e(y){var p="https://react.dev/errors/"+y;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+y+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(y,p,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:y,containerInfo:p,implementation:_}}var d=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(y,p){if(y==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,fn.createPortal=function(y,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(y,p,null,_)},fn.flushSync=function(y){var p=d.T,_=r.p;try{if(d.T=null,r.p=2,y)return y()}finally{d.T=p,r.p=_,r.d.f()}},fn.preconnect=function(y,p){typeof y=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(y,p))},fn.prefetchDNS=function(y){typeof y=="string"&&r.d.D(y)},fn.preinit=function(y,p){if(typeof y=="string"&&p&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin),w=typeof p.integrity=="string"?p.integrity:void 0,I=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?r.d.S(y,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:b,integrity:w,fetchPriority:I}):_==="script"&&r.d.X(y,{crossOrigin:b,integrity:w,fetchPriority:I,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},fn.preinitModule=function(y,p){if(typeof y=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=m(p.as,p.crossOrigin);r.d.M(y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(y)},fn.preload=function(y,p){if(typeof y=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,b=m(_,p.crossOrigin);r.d.L(y,_,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},fn.preloadModule=function(y,p){if(typeof y=="string")if(p){var _=m(p.as,p.crossOrigin);r.d.m(y,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(y)},fn.requestFormReset=function(y){r.d.r(y)},fn.unstable_batchedUpdates=function(y,p){return y(p)},fn.useFormState=function(y,p,_){return d.H.useFormState(y,p,_)},fn.useFormStatus=function(){return d.H.useHostTransitionStatus()},fn.version="19.1.1",fn}var qE;function $R(){if(qE)return sp.exports;qE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),sp.exports=GR(),sp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FE;function YR(){if(FE)return oc;FE=1;var n=HR(),e=cg(),t=$R();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function d(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function m(i){if(l(i)!==i)throw Error(r(188))}function y(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(r(188));return s!==i?null:i}for(var a=i,c=s;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return m(f),i;if(g===c)return m(f),s;g=g.sibling}throw Error(r(188))}if(a.return!==c.return)a=f,c=g;else{for(var T=!1,S=f.child;S;){if(S===a){T=!0,a=f,c=g;break}if(S===c){T=!0,c=f,a=g;break}S=S.sibling}if(!T){for(S=g.child;S;){if(S===a){T=!0,a=g,c=f;break}if(S===c){T=!0,c=g,a=f;break}S=S.sibling}if(!T)throw Error(r(189))}}if(a.alternate!==c)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?i:s}function p(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=p(i),s!==null)return s;i=i.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),G=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function Oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case M:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case ee:return"Suspense";case te:return"SuspenseList";case x:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case I:return"Portal";case Q:return(i.displayName||"Context")+".Provider";case G:return(i._context.displayName||"Context")+".Consumer";case ie:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:Oe(i.type)||"Memo";case R:s=i._payload,i=i._init;try{return Oe(i(s))}catch{}}return null}var Ie=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ee={pending:!1,data:null,method:null,action:null},ce=[],k=-1;function Z(i){return{current:i}}function he(i){0>k||(i.current=ce[k],ce[k]=null,k--)}function le(i,s){k++,ce[k]=i.current,i.current=s}var ue=Z(null),pe=Z(null),de=Z(null),Ke=Z(null);function qe(i,s){switch(le(de,s),le(pe,i),le(ue,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?cE(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=cE(s),i=uE(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}he(ue),le(ue,i)}function pt(){he(ue),he(pe),he(de)}function ft(i){i.memoizedState!==null&&le(Ke,i);var s=ue.current,a=uE(s,i.type);s!==a&&(le(pe,i),le(ue,a))}function An(i){pe.current===i&&(he(ue),he(pe)),Ke.current===i&&(he(Ke),tc._currentValue=Ee)}var Vn=Object.prototype.hasOwnProperty,Us=n.unstable_scheduleCallback,ui=n.unstable_cancelCallback,wi=n.unstable_shouldYield,Vr=n.unstable_requestPaint,Ye=n.unstable_now,je=n.unstable_getCurrentPriorityLevel,Bs=n.unstable_ImmediatePriority,Si=n.unstable_UserBlockingPriority,Zi=n.unstable_NormalPriority,Jd=n.unstable_LowPriority,ka=n.unstable_IdlePriority,el=n.log,lu=n.unstable_setDisableYieldValue,wt=null,tt=null;function Ln(i){if(typeof el=="function"&&lu(i),tt&&typeof tt.setStrictMode=="function")try{tt.setStrictMode(wt,i)}catch{}}var hn=Math.clz32?Math.clz32:Lr,cu=Math.log,ef=Math.LN2;function Lr(i){return i>>>=0,i===0?32:31-(cu(i)/ef|0)|0}var Ur=256,Br=4194304;function hi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Ma(i,s,a){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var S=c&134217727;return S!==0?(c=S&~g,c!==0?f=hi(c):(T&=S,T!==0?f=hi(T):a||(a=S&~i,a!==0&&(f=hi(a))))):(S=c&~g,S!==0?f=hi(S):T!==0?f=hi(T):a||(a=c&~i,a!==0&&(f=hi(a)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,a=s&-s,g>=a||g===32&&(a&4194048)!==0)?s:f}function zr(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function tl(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nl(){var i=Ur;return Ur<<=1,(Ur&4194048)===0&&(Ur=256),i}function il(){var i=Br;return Br<<=1,(Br&62914560)===0&&(Br=4194304),i}function Ji(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function es(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function sl(i,s,a,c,f,g){var T=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var S=i.entanglements,P=i.expirationTimes,$=i.hiddenUpdates;for(a=T&~a;0<a;){var J=31-hn(a),re=1<<J;S[J]=0,P[J]=-1;var Y=$[J];if(Y!==null)for($[J]=null,J=0;J<Y.length;J++){var K=Y[J];K!==null&&(K.lane&=-536870913)}a&=~re}c!==0&&Ai(i,c,0),g!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=g&~(T&~s))}function Ai(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var c=31-hn(s);i.entangledLanes|=s,i.entanglements[c]=i.entanglements[c]|1073741824|a&4194090}function rl(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var c=31-hn(a),f=1<<c;f&s|i[c]&s&&(i[c]|=s),a&=~f}}function zs(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Va(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function qs(){var i=me.p;return i!==0?i:(i=window.event,i===void 0?32:NE(i.type))}function uu(i,s){var a=me.p;try{return me.p=i,s()}finally{me.p=a}}var gt=Math.random().toString(36).slice(2),zt="__reactFiber$"+gt,Ot="__reactProps$"+gt,Qn="__reactContainer$"+gt,al="__reactEvents$"+gt,tf="__reactListeners$"+gt,Fs="__reactHandles$"+gt,hu="__reactResources$"+gt,qr="__reactMarker$"+gt;function Hs(i){delete i[zt],delete i[Ot],delete i[al],delete i[tf],delete i[Fs]}function ts(i){var s=i[zt];if(s)return s;for(var a=i.parentNode;a;){if(s=a[Qn]||a[zt]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=mE(i);i!==null;){if(a=i[zt])return a;i=mE(i)}return s}i=a,a=i.parentNode}return null}function Ri(i){if(i=i[zt]||i[Qn]){var s=i.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return i}return null}function xi(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function En(i){var s=i[hu];return s||(s=i[hu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Nt(i){i[qr]=!0}var ol=new Set,La={};function di(i,s){ns(i,s),ns(i+"Capture",s)}function ns(i,s){for(La[i]=s,i=0;i<s.length;i++)ol.add(s[i])}var du=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),fu={},Fr={};function mu(i){return Vn.call(Fr,i)?!0:Vn.call(fu,i)?!1:du.test(i)?Fr[i]=!0:(fu[i]=!0,!1)}function Gs(i,s,a){if(mu(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function Ci(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function tn(i,s,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+c)}}var Hr,pu;function is(i){if(Hr===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Hr=s&&s[1]||"",pu=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hr+i+pu}var Ua=!1;function Ba(i,s){if(!i||Ua)return"";Ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(K){var Y=K}Reflect.construct(i,[],re)}else{try{re.call()}catch(K){Y=K}i.call(re.prototype)}}else{try{throw Error()}catch(K){Y=K}(re=i())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),T=g[0],S=g[1];if(T&&S){var P=T.split(`
`),$=S.split(`
`);for(f=c=0;c<P.length&&!P[c].includes("DetermineComponentFrameRoot");)c++;for(;f<$.length&&!$[f].includes("DetermineComponentFrameRoot");)f++;if(c===P.length||f===$.length)for(c=P.length-1,f=$.length-1;1<=c&&0<=f&&P[c]!==$[f];)f--;for(;1<=c&&0<=f;c--,f--)if(P[c]!==$[f]){if(c!==1||f!==1)do if(c--,f--,0>f||P[c]!==$[f]){var J=`
`+P[c].replace(" at new "," at ");return i.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",i.displayName)),J}while(1<=c&&0<=f);break}}}finally{Ua=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?is(a):""}function ll(i){switch(i.tag){case 26:case 27:case 5:return is(i.type);case 16:return is("Lazy");case 13:return is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return Ba(i.type,!1);case 11:return Ba(i.type.render,!1);case 1:return Ba(i.type,!0);case 31:return is("Activity");default:return""}}function za(i){try{var s="";do s+=ll(i),i=i.return;while(i);return s}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Tn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cl(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nf(i){var s=cl(i)?"checked":"value",a=Object.getOwnPropertyDescriptor(i.constructor.prototype,s),c=""+i[s];if(!i.hasOwnProperty(s)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return f.call(this)},set:function(T){c=""+T,g.call(this,T)}}),Object.defineProperty(i,s,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function qa(i){i._valueTracker||(i._valueTracker=nf(i))}function ul(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),c="";return i&&(c=cl(i)?i.checked?"true":"false":i.value),i=c,i!==a?(s.setValue(i),!0):!1}function Gr(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var sf=/[\n"\\]/g;function Pt(i){return i.replace(sf,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Un(i,s,a,c,f,g,T,S){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),s!=null?T==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Tn(s)):i.value!==""+Tn(s)&&(i.value=""+Tn(s)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),s!=null?$s(i,T,Tn(s)):a!=null?$s(i,T,Tn(a)):c!=null&&i.removeAttribute("value"),f==null&&g!=null&&(i.defaultChecked=!!g),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+Tn(S):i.removeAttribute("name")}function $r(i,s,a,c,f,g,T,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),s!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;a=a!=null?""+Tn(a):"",s=s!=null?""+Tn(s):a,S||s===i.value||(i.value=s),i.defaultValue=s}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function $s(i,s,a){s==="number"&&Gr(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ss(i,s,a,c){if(i=i.options,s){s={};for(var f=0;f<a.length;f++)s["$"+a[f]]=!0;for(a=0;a<i.length;a++)f=s.hasOwnProperty("$"+i[a].value),i[a].selected!==f&&(i[a].selected=f),f&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Tn(a),s=null,f=0;f<i.length;f++){if(i[f].value===a){i[f].selected=!0,c&&(i[f].defaultSelected=!0);return}s!==null||i[f].disabled||(s=i[f])}s!==null&&(s.selected=!0)}}function st(i,s,a){if(s!=null&&(s=""+Tn(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+Tn(a):""}function Yr(i,s,a,c){if(s==null){if(c!=null){if(a!=null)throw Error(r(92));if(Ie(c)){if(1<c.length)throw Error(r(93));c=c[0]}a=c}a==null&&(a=""),s=a}a=Tn(s),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c)}function Xn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var Kr=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function gu(i,s,a){var c=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":c?i.setProperty(s,a):typeof a!="number"||a===0||Kr.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function hl(i,s,a){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var f in s)c=s[f],s.hasOwnProperty(f)&&a[f]!==c&&gu(i,f,c)}else for(var g in s)s.hasOwnProperty(g)&&gu(i,g,s[g])}function dl(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Fa(i){return af.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var rs=null;function Wn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var as=null,os=null;function fl(i){var s=Ri(i);if(s&&(i=s.stateNode)){var a=i[Ot]||null;e:switch(i=s.stateNode,s.type){case"input":if(Un(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Pt(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var c=a[s];if(c!==i&&c.form===i.form){var f=c[Ot]||null;if(!f)throw Error(r(90));Un(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<a.length;s++)c=a[s],c.form===i.form&&ul(c)}break e;case"textarea":st(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&ss(i,!!a.multiple,s,!1)}}}var Ni=!1;function yu(i,s,a){if(Ni)return i(s,a);Ni=!0;try{var c=i(s);return c}finally{if(Ni=!1,(as!==null||os!==null)&&(uh(),as&&(s=as,i=os,os=as=null,fl(s),i)))for(s=0;s<i.length;s++)fl(i[s])}}function Qr(i,s){var a=i.stateNode;if(a===null)return null;var c=a[Ot]||null;if(c===null)return null;a=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(r(231,s,typeof a));return a}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Zn=!1;if(fi)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Zn=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Zn=!1}var Ii=null,Ys=null,ls=null;function ml(){if(ls)return ls;var i,s=Ys,a=s.length,c,f="value"in Ii?Ii.value:Ii.textContent,g=f.length;for(i=0;i<a&&s[i]===f[i];i++);var T=a-i;for(c=1;c<=T&&s[a-c]===f[g-c];c++);return ls=f.slice(i,1<c?1-c:void 0)}function Di(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function ji(){return!0}function pl(){return!1}function Qt(i){function s(a,c,f,g,T){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(a=i[S],this[S]=a?a(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ji:pl,this.isPropagationStopped=pl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ji)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ji)},persist:function(){},isPersistent:ji}),s}var Je={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Qt(Je),Wr=_({},Je,{view:0,detail:0}),vu=Qt(Wr),Ga,$a,Oi,Zr=_({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ta,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Oi&&(Oi&&i.type==="mousemove"?(Ga=i.screenX-Oi.screenX,$a=i.screenY-Oi.screenY):$a=Ga=0,Oi=i),Ga)},movementY:function(i){return"movementY"in i?i.movementY:$a}}),Jn=Qt(Zr),_u=_({},Zr,{dataTransfer:0}),of=Qt(_u),Jr=_({},Wr,{relatedTarget:0}),Ya=Qt(Jr),gl=_({},Je,{animationName:0,elapsedTime:0,pseudoElement:0}),Ka=Qt(gl),Eu=_({},Je,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Qa=Qt(Eu),lf=_({},Je,{data:0}),yl=Qt(lf),ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vl(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=bu[i])?!!s[i]:!1}function ta(){return vl}var wu=_({},Wr,{key:function(i){if(i.key){var s=ea[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Di(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Tu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ta,charCode:function(i){return i.type==="keypress"?Di(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Di(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Xa=Qt(wu),Su=_({},Zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=Qt(Su),cs=_({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ta}),Au=Qt(cs),Ru=_({},Je,{propertyName:0,elapsedTime:0,pseudoElement:0}),xu=Qt(Ru),Cu=_({},Zr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Wa=Qt(Cu),bn=_({},Je,{newState:0,oldState:0}),Nu=Qt(bn),Iu=[9,13,27,32],Pi=fi&&"CompositionEvent"in window,h=null;fi&&"documentMode"in document&&(h=document.documentMode);var v=fi&&"TextEvent"in window&&!h,E=fi&&(!Pi||h&&8<h&&11>=h),A=" ",F=!1;function W(i,s){switch(i){case"keyup":return Iu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fe=!1;function qt(i,s){switch(i){case"compositionend":return fe(s);case"keypress":return s.which!==32?null:(F=!0,A);case"textInput":return i=s.data,i===A&&F?null:i;default:return null}}function He(i,s){if(Fe)return i==="compositionend"||!Pi&&W(i,s)?(i=ml(),ls=Ys=Ii=null,Fe=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return E&&s.locale!=="ko"?null:s.data;default:return null}}var Xt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ft(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!Xt[i.type]:s==="textarea"}function us(i,s,a,c){as?os?os.push(c):os=[c]:as=c,s=gh(s,"onChange"),0<s.length&&(a=new Ha("onChange","change",null,a,c),i.push({event:a,listeners:s}))}var nn=null,ki=null;function El(i){sE(i,0)}function Du(i){var s=xi(i);if(ul(s))return i}function Ay(i,s){if(i==="change")return s}var Ry=!1;if(fi){var cf;if(fi){var uf="oninput"in document;if(!uf){var xy=document.createElement("div");xy.setAttribute("oninput","return;"),uf=typeof xy.oninput=="function"}cf=uf}else cf=!1;Ry=cf&&(!document.documentMode||9<document.documentMode)}function Cy(){nn&&(nn.detachEvent("onpropertychange",Ny),ki=nn=null)}function Ny(i){if(i.propertyName==="value"&&Du(ki)){var s=[];us(s,ki,i,Wn(i)),yu(El,s)}}function gA(i,s,a){i==="focusin"?(Cy(),nn=s,ki=a,nn.attachEvent("onpropertychange",Ny)):i==="focusout"&&Cy()}function yA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Du(ki)}function vA(i,s){if(i==="click")return Du(s)}function _A(i,s){if(i==="input"||i==="change")return Du(s)}function EA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Bn=typeof Object.is=="function"?Object.is:EA;function Tl(i,s){if(Bn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),c=Object.keys(s);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Vn.call(s,f)||!Bn(i[f],s[f]))return!1}return!0}function Iy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Dy(i,s){var a=Iy(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=s&&c>=s)return{node:a,offset:s-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Iy(a)}}function jy(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?jy(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Oy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Gr(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=Gr(i.document)}return s}function hf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var TA=fi&&"documentMode"in document&&11>=document.documentMode,Za=null,df=null,bl=null,ff=!1;function Py(i,s,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;ff||Za==null||Za!==Gr(c)||(c=Za,"selectionStart"in c&&hf(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),bl&&Tl(bl,c)||(bl=c,c=gh(df,"onSelect"),0<c.length&&(s=new Ha("onSelect","select",null,s,a),i.push({event:s,listeners:c}),s.target=Za)))}function na(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var Ja={animationend:na("Animation","AnimationEnd"),animationiteration:na("Animation","AnimationIteration"),animationstart:na("Animation","AnimationStart"),transitionrun:na("Transition","TransitionRun"),transitionstart:na("Transition","TransitionStart"),transitioncancel:na("Transition","TransitionCancel"),transitionend:na("Transition","TransitionEnd")},mf={},ky={};fi&&(ky=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function ia(i){if(mf[i])return mf[i];if(!Ja[i])return i;var s=Ja[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in ky)return mf[i]=s[a];return i}var My=ia("animationend"),Vy=ia("animationiteration"),Ly=ia("animationstart"),bA=ia("transitionrun"),wA=ia("transitionstart"),SA=ia("transitioncancel"),Uy=ia("transitionend"),By=new Map,pf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pf.push("scrollEnd");function mi(i,s){By.set(i,s),di(s,[i])}var zy=new WeakMap;function ei(i,s){if(typeof i=="object"&&i!==null){var a=zy.get(i);return a!==void 0?a:(s={value:i,source:s,stack:za(s)},zy.set(i,s),s)}return{value:i,source:s,stack:za(s)}}var ti=[],eo=0,gf=0;function ju(){for(var i=eo,s=gf=eo=0;s<i;){var a=ti[s];ti[s++]=null;var c=ti[s];ti[s++]=null;var f=ti[s];ti[s++]=null;var g=ti[s];if(ti[s++]=null,c!==null&&f!==null){var T=c.pending;T===null?f.next=f:(f.next=T.next,T.next=f),c.pending=f}g!==0&&qy(a,f,g)}}function Ou(i,s,a,c){ti[eo++]=i,ti[eo++]=s,ti[eo++]=a,ti[eo++]=c,gf|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function yf(i,s,a,c){return Ou(i,s,a,c),Pu(i)}function to(i,s){return Ou(i,null,null,s),Pu(i)}function qy(i,s,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var f=!1,g=i.return;g!==null;)g.childLanes|=a,c=g.alternate,c!==null&&(c.childLanes|=a),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(f=!0)),i=g,g=g.return;return i.tag===3?(g=i.stateNode,f&&s!==null&&(f=31-hn(a),i=g.hiddenUpdates,c=i[f],c===null?i[f]=[s]:c.push(s),s.lane=a|536870912),g):null}function Pu(i){if(50<Yl)throw Yl=0,wm=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var no={};function AA(i,s,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zn(i,s,a,c){return new AA(i,s,a,c)}function vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function hs(i,s){var a=i.alternate;return a===null?(a=zn(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function Fy(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function ku(i,s,a,c,f,g){var T=0;if(c=i,typeof i=="function")vf(i)&&(T=1);else if(typeof i=="string")T=xR(i,a,ue.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case x:return i=zn(31,a,s,f),i.elementType=x,i.lanes=g,i;case M:return sa(a.children,f,g,s);case z:T=8,f|=24;break;case j:return i=zn(12,a,s,f|2),i.elementType=j,i.lanes=g,i;case ee:return i=zn(13,a,s,f),i.elementType=ee,i.lanes=g,i;case te:return i=zn(19,a,s,f),i.elementType=te,i.lanes=g,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:case Q:T=10;break e;case G:T=9;break e;case ie:T=11;break e;case D:T=14;break e;case R:T=16,c=null;break e}T=29,a=Error(r(130,i===null?"null":typeof i,"")),c=null}return s=zn(T,a,s,f),s.elementType=i,s.type=c,s.lanes=g,s}function sa(i,s,a,c){return i=zn(7,i,c,s),i.lanes=a,i}function _f(i,s,a){return i=zn(6,i,null,s),i.lanes=a,i}function Ef(i,s,a){return s=zn(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var io=[],so=0,Mu=null,Vu=0,ni=[],ii=0,ra=null,ds=1,fs="";function aa(i,s){io[so++]=Vu,io[so++]=Mu,Mu=i,Vu=s}function Hy(i,s,a){ni[ii++]=ds,ni[ii++]=fs,ni[ii++]=ra,ra=i;var c=ds;i=fs;var f=32-hn(c)-1;c&=~(1<<f),a+=1;var g=32-hn(s)+f;if(30<g){var T=f-f%5;g=(c&(1<<T)-1).toString(32),c>>=T,f-=T,ds=1<<32-hn(s)+f|a<<f|c,fs=g+i}else ds=1<<g|a<<f|c,fs=i}function Tf(i){i.return!==null&&(aa(i,1),Hy(i,1,0))}function bf(i){for(;i===Mu;)Mu=io[--so],io[so]=null,Vu=io[--so],io[so]=null;for(;i===ra;)ra=ni[--ii],ni[ii]=null,fs=ni[--ii],ni[ii]=null,ds=ni[--ii],ni[ii]=null}var wn=null,St=null,We=!1,oa=null,Mi=!1,wf=Error(r(519));function la(i){var s=Error(r(418,""));throw Al(ei(s,i)),wf}function Gy(i){var s=i.stateNode,a=i.type,c=i.memoizedProps;switch(s[zt]=i,s[Ot]=c,a){case"dialog":Le("cancel",s),Le("close",s);break;case"iframe":case"object":case"embed":Le("load",s);break;case"video":case"audio":for(a=0;a<Ql.length;a++)Le(Ql[a],s);break;case"source":Le("error",s);break;case"img":case"image":case"link":Le("error",s),Le("load",s);break;case"details":Le("toggle",s);break;case"input":Le("invalid",s),$r(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),qa(s);break;case"select":Le("invalid",s);break;case"textarea":Le("invalid",s),Yr(s,c.value,c.defaultValue,c.children),qa(s)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||c.suppressHydrationWarning===!0||lE(s.textContent,a)?(c.popover!=null&&(Le("beforetoggle",s),Le("toggle",s)),c.onScroll!=null&&Le("scroll",s),c.onScrollEnd!=null&&Le("scrollend",s),c.onClick!=null&&(s.onclick=yh),s=!0):s=!1,s||la(i)}function $y(i){for(wn=i.return;wn;)switch(wn.tag){case 5:case 13:Mi=!1;return;case 27:case 3:Mi=!0;return;default:wn=wn.return}}function wl(i){if(i!==wn)return!1;if(!We)return $y(i),We=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||Um(i.type,i.memoizedProps)),a=!a),a&&St&&la(i),$y(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,s=0;i;){if(i.nodeType===8)if(a=i.data,a==="/$"){if(s===0){St=gi(i.nextSibling);break e}s--}else a!=="$"&&a!=="$!"&&a!=="$?"||s++;i=i.nextSibling}St=null}}else s===27?(s=St,cr(i.type)?(i=Fm,Fm=null,St=i):St=s):St=wn?gi(i.stateNode.nextSibling):null;return!0}function Sl(){St=wn=null,We=!1}function Yy(){var i=oa;return i!==null&&(Cn===null?Cn=i:Cn.push.apply(Cn,i),oa=null),i}function Al(i){oa===null?oa=[i]:oa.push(i)}var Sf=Z(null),ca=null,ms=null;function Ks(i,s,a){le(Sf,s._currentValue),s._currentValue=a}function ps(i){i._currentValue=Sf.current,he(Sf)}function Af(i,s,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),i===a)break;i=i.return}}function Rf(i,s,a,c){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var g=f.dependencies;if(g!==null){var T=f.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=f;for(var P=0;P<s.length;P++)if(S.context===s[P]){g.lanes|=a,S=g.alternate,S!==null&&(S.lanes|=a),Af(g.return,a,i),c||(T=null);break e}g=S.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(r(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),Af(T,a,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Rl(i,s,a,c){i=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var S=f.type;Bn(f.pendingProps.value,T.value)||(i!==null?i.push(S):i=[S])}}else if(f===Ke.current){if(T=f.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(tc):i=[tc])}f=f.return}i!==null&&Rf(s,i,a,c),s.flags|=262144}function Lu(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ua(i){ca=i,ms=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function dn(i){return Ky(ca,i)}function Uu(i,s){return ca===null&&ua(i),Ky(i,s)}function Ky(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},ms===null){if(i===null)throw Error(r(308));ms=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else ms=ms.next=s;return a}var RA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},xA=n.unstable_scheduleCallback,CA=n.unstable_NormalPriority,Ht={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function xf(){return{controller:new RA,data:new Map,refCount:0}}function xl(i){i.refCount--,i.refCount===0&&xA(CA,function(){i.controller.abort()})}var Cl=null,Cf=0,ro=0,ao=null;function NA(i,s){if(Cl===null){var a=Cl=[];Cf=0,ro=Im(),ao={status:"pending",value:void 0,then:function(c){a.push(c)}}}return Cf++,s.then(Qy,Qy),s}function Qy(){if(--Cf===0&&Cl!==null){ao!==null&&(ao.status="fulfilled");var i=Cl;Cl=null,ro=0,ao=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function IA(i,s){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return i.then(function(){c.status="fulfilled",c.value=s;for(var f=0;f<a.length;f++)(0,a[f])(s)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var Xy=X.S;X.S=function(i,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&NA(i,s),Xy!==null&&Xy(i,s)};var ha=Z(null);function Nf(){var i=ha.current;return i!==null?i:ut.pooledCache}function Bu(i,s){s===null?le(ha,ha.current):le(ha,s.pool)}function Wy(){var i=Nf();return i===null?null:{parent:Ht._currentValue,pool:i}}var Nl=Error(r(460)),Zy=Error(r(474)),zu=Error(r(542)),If={then:function(){}};function Jy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function qu(){}function ev(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(qu,qu),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i;default:if(typeof s.status=="string")s.then(qu,qu);else{if(i=ut,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(c){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=c}},function(c){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,nv(i),i}throw Il=s,Nl}}var Il=null;function tv(){if(Il===null)throw Error(r(459));var i=Il;return Il=null,i}function nv(i){if(i===Nl||i===zu)throw Error(r(483))}var Qs=!1;function Df(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jf(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ws(i,s,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(nt&2)!==0){var f=c.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),c.pending=s,s=Pu(i),qy(i,null,a),s}return Ou(i,c,s,a),Pu(i)}function Dl(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,rl(i,a)}}function Of(i,s){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?f=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?f=g=s:g=g.next=s}else f=g=s;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var Pf=!1;function jl(){if(Pf){var i=ao;if(i!==null)throw i}}function Ol(i,s,a,c){Pf=!1;var f=i.updateQueue;Qs=!1;var g=f.firstBaseUpdate,T=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var P=S,$=P.next;P.next=null,T===null?g=$:T.next=$,T=P;var J=i.alternate;J!==null&&(J=J.updateQueue,S=J.lastBaseUpdate,S!==T&&(S===null?J.firstBaseUpdate=$:S.next=$,J.lastBaseUpdate=P))}if(g!==null){var re=f.baseState;T=0,J=$=P=null,S=g;do{var Y=S.lane&-536870913,K=Y!==S.lane;if(K?(Ge&Y)===Y:(c&Y)===Y){Y!==0&&Y===ro&&(Pf=!0),J!==null&&(J=J.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var Ce=i,we=S;Y=s;var ot=a;switch(we.tag){case 1:if(Ce=we.payload,typeof Ce=="function"){re=Ce.call(ot,re,Y);break e}re=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=we.payload,Y=typeof Ce=="function"?Ce.call(ot,re,Y):Ce,Y==null)break e;re=_({},re,Y);break e;case 2:Qs=!0}}Y=S.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:S.tag,payload:S.payload,callback:S.callback,next:null},J===null?($=J=K,P=re):J=J.next=K,T|=Y;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;K=S,S=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);J===null&&(P=re),f.baseState=P,f.firstBaseUpdate=$,f.lastBaseUpdate=J,g===null&&(f.shared.lanes=0),rr|=T,i.lanes=T,i.memoizedState=re}}function iv(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function sv(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)iv(a[i],s)}var oo=Z(null),Fu=Z(0);function rv(i,s){i=bs,le(Fu,i),le(oo,s),bs=i|s.baseLanes}function kf(){le(Fu,bs),le(oo,oo.current)}function Mf(){bs=Fu.current,he(oo),he(Fu)}var Zs=0,ke=null,rt=null,kt=null,Hu=!1,lo=!1,da=!1,Gu=0,Pl=0,co=null,DA=0;function It(){throw Error(r(321))}function Vf(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Bn(i[a],s[a]))return!1;return!0}function Lf(i,s,a,c,f,g){return Zs=g,ke=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=i===null||i.memoizedState===null?qv:Fv,da=!1,g=a(c,f),da=!1,lo&&(g=ov(s,a,c,f)),av(i),g}function av(i){X.H=Wu;var s=rt!==null&&rt.next!==null;if(Zs=0,kt=rt=ke=null,Hu=!1,Pl=0,co=null,s)throw Error(r(300));i===null||Wt||(i=i.dependencies,i!==null&&Lu(i)&&(Wt=!0))}function ov(i,s,a,c){ke=i;var f=0;do{if(lo&&(co=null),Pl=0,lo=!1,25<=f)throw Error(r(301));if(f+=1,kt=rt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=LA,g=s(a,c)}while(lo);return g}function jA(){var i=X.H,s=i.useState()[0];return s=typeof s.then=="function"?kl(s):s,i=i.useState()[0],(rt!==null?rt.memoizedState:null)!==i&&(ke.flags|=1024),s}function Uf(){var i=Gu!==0;return Gu=0,i}function Bf(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function zf(i){if(Hu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Hu=!1}Zs=0,kt=rt=ke=null,lo=!1,Pl=Gu=0,co=null}function Rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?ke.memoizedState=kt=i:kt=kt.next=i,kt}function Mt(){if(rt===null){var i=ke.alternate;i=i!==null?i.memoizedState:null}else i=rt.next;var s=kt===null?ke.memoizedState:kt.next;if(s!==null)kt=s,rt=i;else{if(i===null)throw ke.alternate===null?Error(r(467)):Error(r(310));rt=i,i={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},kt===null?ke.memoizedState=kt=i:kt=kt.next=i}return kt}function qf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(i){var s=Pl;return Pl+=1,co===null&&(co=[]),i=ev(co,i,s),s=ke,(kt===null?s.memoizedState:kt.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?qv:Fv),i}function $u(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return kl(i);if(i.$$typeof===Q)return dn(i)}throw Error(r(438,String(i)))}function Ff(i){var s=null,a=ke.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var c=ke.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=qf(),ke.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),c=0;c<i;c++)a[c]=C;return s.index++,a}function gs(i,s){return typeof s=="function"?s(i):s}function Yu(i){var s=Mt();return Hf(s,rt,i)}function Hf(i,s,a){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=a;var f=i.baseQueue,g=c.pending;if(g!==null){if(f!==null){var T=f.next;f.next=g.next,g.next=T}s.baseQueue=f=g,c.pending=null}if(g=i.baseState,f===null)i.memoizedState=g;else{s=f.next;var S=T=null,P=null,$=s,J=!1;do{var re=$.lane&-536870913;if(re!==$.lane?(Ge&re)===re:(Zs&re)===re){var Y=$.revertLane;if(Y===0)P!==null&&(P=P.next={lane:0,revertLane:0,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),re===ro&&(J=!0);else if((Zs&Y)===Y){$=$.next,Y===ro&&(J=!0);continue}else re={lane:0,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(S=P=re,T=g):P=P.next=re,ke.lanes|=Y,rr|=Y;re=$.action,da&&a(g,re),g=$.hasEagerState?$.eagerState:a(g,re)}else Y={lane:re,revertLane:$.revertLane,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},P===null?(S=P=Y,T=g):P=P.next=Y,ke.lanes|=re,rr|=re;$=$.next}while($!==null&&$!==s);if(P===null?T=g:P.next=S,!Bn(g,i.memoizedState)&&(Wt=!0,J&&(a=ao,a!==null)))throw a;i.memoizedState=g,i.baseState=T,i.baseQueue=P,c.lastRenderedState=g}return f===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Gf(i){var s=Mt(),a=s.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=i;var c=a.dispatch,f=a.pending,g=s.memoizedState;if(f!==null){a.pending=null;var T=f=f.next;do g=i(g,T.action),T=T.next;while(T!==f);Bn(g,s.memoizedState)||(Wt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),a.lastRenderedState=g}return[g,c]}function lv(i,s,a){var c=ke,f=Mt(),g=We;if(g){if(a===void 0)throw Error(r(407));a=a()}else a=s();var T=!Bn((rt||f).memoizedState,a);T&&(f.memoizedState=a,Wt=!0),f=f.queue;var S=hv.bind(null,c,f,i);if(Ml(2048,8,S,[i]),f.getSnapshot!==s||T||kt!==null&&kt.memoizedState.tag&1){if(c.flags|=2048,uo(9,Ku(),uv.bind(null,c,f,a,s),null),ut===null)throw Error(r(349));g||(Zs&124)!==0||cv(c,s,a)}return a}function cv(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=ke.updateQueue,s===null?(s=qf(),ke.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function uv(i,s,a,c){s.value=a,s.getSnapshot=c,dv(s)&&fv(i)}function hv(i,s,a){return a(function(){dv(s)&&fv(i)})}function dv(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Bn(i,a)}catch{return!0}}function fv(i){var s=to(i,2);s!==null&&$n(s,i,2)}function $f(i){var s=Rn();if(typeof i=="function"){var a=i;if(i=a(),da){Ln(!0);try{a()}finally{Ln(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:i},s}function mv(i,s,a,c){return i.baseState=a,Hf(i,rt,typeof c=="function"?c:gs)}function OA(i,s,a,c,f){if(Xu(i))throw Error(r(485));if(i=s.action,i!==null){var g={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};X.T!==null?a(!0):g.isTransition=!1,c(g),a=s.pending,a===null?(g.next=s.pending=g,pv(s,g)):(g.next=a.next,s.pending=a.next=g)}}function pv(i,s){var a=s.action,c=s.payload,f=i.state;if(s.isTransition){var g=X.T,T={};X.T=T;try{var S=a(f,c),P=X.S;P!==null&&P(T,S),gv(i,s,S)}catch($){Yf(i,s,$)}finally{X.T=g}}else try{g=a(f,c),gv(i,s,g)}catch($){Yf(i,s,$)}}function gv(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){yv(i,s,c)},function(c){return Yf(i,s,c)}):yv(i,s,a)}function yv(i,s,a){s.status="fulfilled",s.value=a,vv(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,pv(i,a)))}function Yf(i,s,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=a,vv(s),s=s.next;while(s!==c)}i.action=null}function vv(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function _v(i,s){return s}function Ev(i,s){if(We){var a=ut.formState;if(a!==null){e:{var c=ke;if(We){if(St){t:{for(var f=St,g=Mi;f.nodeType!==8;){if(!g){f=null;break t}if(f=gi(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){St=gi(f.nextSibling),c=f.data==="F!";break e}}la(c)}c=!1}c&&(s=a[0])}}return a=Rn(),a.memoizedState=a.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_v,lastRenderedState:s},a.queue=c,a=Uv.bind(null,ke,c),c.dispatch=a,c=$f(!1),g=Zf.bind(null,ke,!1,c.queue),c=Rn(),f={state:s,dispatch:null,action:i,pending:null},c.queue=f,a=OA.bind(null,ke,f,g,a),f.dispatch=a,c.memoizedState=i,[s,a,!1]}function Tv(i){var s=Mt();return bv(s,rt,i)}function bv(i,s,a){if(s=Hf(i,s,_v)[0],i=Yu(gs)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=kl(s)}catch(T){throw T===Nl?zu:T}else c=s;s=Mt();var f=s.queue,g=f.dispatch;return a!==s.memoizedState&&(ke.flags|=2048,uo(9,Ku(),PA.bind(null,f,a),null)),[c,g,i]}function PA(i,s){i.action=s}function wv(i){var s=Mt(),a=rt;if(a!==null)return bv(s,a,i);Mt(),s=s.memoizedState,a=Mt();var c=a.queue.dispatch;return a.memoizedState=i,[s,c,!1]}function uo(i,s,a,c){return i={tag:i,create:a,deps:c,inst:s,next:null},s=ke.updateQueue,s===null&&(s=qf(),ke.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,s.lastEffect=i),i}function Ku(){return{destroy:void 0,resource:void 0}}function Sv(){return Mt().memoizedState}function Qu(i,s,a,c){var f=Rn();c=c===void 0?null:c,ke.flags|=i,f.memoizedState=uo(1|s,Ku(),a,c)}function Ml(i,s,a,c){var f=Mt();c=c===void 0?null:c;var g=f.memoizedState.inst;rt!==null&&c!==null&&Vf(c,rt.memoizedState.deps)?f.memoizedState=uo(s,g,a,c):(ke.flags|=i,f.memoizedState=uo(1|s,g,a,c))}function Av(i,s){Qu(8390656,8,i,s)}function Rv(i,s){Ml(2048,8,i,s)}function xv(i,s){return Ml(4,2,i,s)}function Cv(i,s){return Ml(4,4,i,s)}function Nv(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Iv(i,s,a){a=a!=null?a.concat([i]):null,Ml(4,4,Nv.bind(null,s,i),a)}function Kf(){}function Dv(i,s){var a=Mt();s=s===void 0?null:s;var c=a.memoizedState;return s!==null&&Vf(s,c[1])?c[0]:(a.memoizedState=[i,s],i)}function jv(i,s){var a=Mt();s=s===void 0?null:s;var c=a.memoizedState;if(s!==null&&Vf(s,c[1]))return c[0];if(c=i(),da){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,s],c}function Qf(i,s,a){return a===void 0||(Zs&1073741824)!==0?i.memoizedState=s:(i.memoizedState=a,i=k_(),ke.lanes|=i,rr|=i,a)}function Ov(i,s,a,c){return Bn(a,s)?a:oo.current!==null?(i=Qf(i,a,c),Bn(i,s)||(Wt=!0),i):(Zs&42)===0?(Wt=!0,i.memoizedState=a):(i=k_(),ke.lanes|=i,rr|=i,s)}function Pv(i,s,a,c,f){var g=me.p;me.p=g!==0&&8>g?g:8;var T=X.T,S={};X.T=S,Zf(i,!1,s,a);try{var P=f(),$=X.S;if($!==null&&$(S,P),P!==null&&typeof P=="object"&&typeof P.then=="function"){var J=IA(P,c);Vl(i,s,J,Gn(i))}else Vl(i,s,c,Gn(i))}catch(re){Vl(i,s,{then:function(){},status:"rejected",reason:re},Gn())}finally{me.p=g,X.T=T}}function kA(){}function Xf(i,s,a,c){if(i.tag!==5)throw Error(r(476));var f=kv(i).queue;Pv(i,f,s,Ee,a===null?kA:function(){return Mv(i),a(c)})}function kv(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:Ee,baseState:Ee,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:Ee},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Mv(i){var s=kv(i).next.queue;Vl(i,s,{},Gn())}function Wf(){return dn(tc)}function Vv(){return Mt().memoizedState}function Lv(){return Mt().memoizedState}function MA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Gn();i=Xs(a);var c=Ws(s,i,a);c!==null&&($n(c,s,a),Dl(c,s,a)),s={cache:xf()},i.payload=s;return}s=s.return}}function VA(i,s,a){var c=Gn();a={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Xu(i)?Bv(s,a):(a=yf(i,s,a,c),a!==null&&($n(a,i,c),zv(a,s,c)))}function Uv(i,s,a){var c=Gn();Vl(i,s,a,c)}function Vl(i,s,a,c){var f={lane:c,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Xu(i))Bv(s,f);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var T=s.lastRenderedState,S=g(T,a);if(f.hasEagerState=!0,f.eagerState=S,Bn(S,T))return Ou(i,s,f,0),ut===null&&ju(),!1}catch{}finally{}if(a=yf(i,s,f,c),a!==null)return $n(a,i,c),zv(a,s,c),!0}return!1}function Zf(i,s,a,c){if(c={lane:2,revertLane:Im(),action:c,hasEagerState:!1,eagerState:null,next:null},Xu(i)){if(s)throw Error(r(479))}else s=yf(i,a,c,2),s!==null&&$n(s,i,2)}function Xu(i){var s=i.alternate;return i===ke||s!==null&&s===ke}function Bv(i,s){lo=Hu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function zv(i,s,a){if((a&4194048)!==0){var c=s.lanes;c&=i.pendingLanes,a|=c,s.lanes=a,rl(i,a)}}var Wu={readContext:dn,use:$u,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},qv={readContext:dn,use:$u,useCallback:function(i,s){return Rn().memoizedState=[i,s===void 0?null:s],i},useContext:dn,useEffect:Av,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Qu(4194308,4,Nv.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Qu(4194308,4,i,s)},useInsertionEffect:function(i,s){Qu(4,2,i,s)},useMemo:function(i,s){var a=Rn();s=s===void 0?null:s;var c=i();if(da){Ln(!0);try{i()}finally{Ln(!1)}}return a.memoizedState=[c,s],c},useReducer:function(i,s,a){var c=Rn();if(a!==void 0){var f=a(s);if(da){Ln(!0);try{a(s)}finally{Ln(!1)}}}else f=s;return c.memoizedState=c.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},c.queue=i,i=i.dispatch=VA.bind(null,ke,i),[c.memoizedState,i]},useRef:function(i){var s=Rn();return i={current:i},s.memoizedState=i},useState:function(i){i=$f(i);var s=i.queue,a=Uv.bind(null,ke,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:Kf,useDeferredValue:function(i,s){var a=Rn();return Qf(a,i,s)},useTransition:function(){var i=$f(!1);return i=Pv.bind(null,ke,i.queue,!0,!1),Rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var c=ke,f=Rn();if(We){if(a===void 0)throw Error(r(407));a=a()}else{if(a=s(),ut===null)throw Error(r(349));(Ge&124)!==0||cv(c,s,a)}f.memoizedState=a;var g={value:a,getSnapshot:s};return f.queue=g,Av(hv.bind(null,c,g,i),[i]),c.flags|=2048,uo(9,Ku(),uv.bind(null,c,g,a,s),null),a},useId:function(){var i=Rn(),s=ut.identifierPrefix;if(We){var a=fs,c=ds;a=(c&~(1<<32-hn(c)-1)).toString(32)+a,s="«"+s+"R"+a,a=Gu++,0<a&&(s+="H"+a.toString(32)),s+="»"}else a=DA++,s="«"+s+"r"+a.toString(32)+"»";return i.memoizedState=s},useHostTransitionStatus:Wf,useFormState:Ev,useActionState:Ev,useOptimistic:function(i){var s=Rn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Zf.bind(null,ke,!0,a),a.dispatch=s,[i,s]},useMemoCache:Ff,useCacheRefresh:function(){return Rn().memoizedState=MA.bind(null,ke)}},Fv={readContext:dn,use:$u,useCallback:Dv,useContext:dn,useEffect:Rv,useImperativeHandle:Iv,useInsertionEffect:xv,useLayoutEffect:Cv,useMemo:jv,useReducer:Yu,useRef:Sv,useState:function(){return Yu(gs)},useDebugValue:Kf,useDeferredValue:function(i,s){var a=Mt();return Ov(a,rt.memoizedState,i,s)},useTransition:function(){var i=Yu(gs)[0],s=Mt().memoizedState;return[typeof i=="boolean"?i:kl(i),s]},useSyncExternalStore:lv,useId:Vv,useHostTransitionStatus:Wf,useFormState:Tv,useActionState:Tv,useOptimistic:function(i,s){var a=Mt();return mv(a,rt,i,s)},useMemoCache:Ff,useCacheRefresh:Lv},LA={readContext:dn,use:$u,useCallback:Dv,useContext:dn,useEffect:Rv,useImperativeHandle:Iv,useInsertionEffect:xv,useLayoutEffect:Cv,useMemo:jv,useReducer:Gf,useRef:Sv,useState:function(){return Gf(gs)},useDebugValue:Kf,useDeferredValue:function(i,s){var a=Mt();return rt===null?Qf(a,i,s):Ov(a,rt.memoizedState,i,s)},useTransition:function(){var i=Gf(gs)[0],s=Mt().memoizedState;return[typeof i=="boolean"?i:kl(i),s]},useSyncExternalStore:lv,useId:Vv,useHostTransitionStatus:Wf,useFormState:wv,useActionState:wv,useOptimistic:function(i,s){var a=Mt();return rt!==null?mv(a,rt,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Ff,useCacheRefresh:Lv},ho=null,Ll=0;function Zu(i){var s=Ll;return Ll+=1,ho===null&&(ho=[]),ev(ho,i,s)}function Ul(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Ju(i,s){throw s.$$typeof===b?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Hv(i){var s=i._init;return s(i._payload)}function Gv(i){function s(B,L){if(i){var H=B.deletions;H===null?(B.deletions=[L],B.flags|=16):H.push(L)}}function a(B,L){if(!i)return null;for(;L!==null;)s(B,L),L=L.sibling;return null}function c(B){for(var L=new Map;B!==null;)B.key!==null?L.set(B.key,B):L.set(B.index,B),B=B.sibling;return L}function f(B,L){return B=hs(B,L),B.index=0,B.sibling=null,B}function g(B,L,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<L?(B.flags|=67108866,L):H):(B.flags|=67108866,L)):(B.flags|=1048576,L)}function T(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function S(B,L,H,se){return L===null||L.tag!==6?(L=_f(H,B.mode,se),L.return=B,L):(L=f(L,H),L.return=B,L)}function P(B,L,H,se){var _e=H.type;return _e===M?J(B,L,H.props.children,se,H.key):L!==null&&(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Hv(_e)===L.type)?(L=f(L,H.props),Ul(L,H),L.return=B,L):(L=ku(H.type,H.key,H.props,null,B.mode,se),Ul(L,H),L.return=B,L)}function $(B,L,H,se){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=Ef(H,B.mode,se),L.return=B,L):(L=f(L,H.children||[]),L.return=B,L)}function J(B,L,H,se,_e){return L===null||L.tag!==7?(L=sa(H,B.mode,se,_e),L.return=B,L):(L=f(L,H),L.return=B,L)}function re(B,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=_f(""+L,B.mode,H),L.return=B,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return H=ku(L.type,L.key,L.props,null,B.mode,H),Ul(H,L),H.return=B,H;case I:return L=Ef(L,B.mode,H),L.return=B,L;case R:var se=L._init;return L=se(L._payload),re(B,L,H)}if(Ie(L)||V(L))return L=sa(L,B.mode,H,null),L.return=B,L;if(typeof L.then=="function")return re(B,Zu(L),H);if(L.$$typeof===Q)return re(B,Uu(B,L),H);Ju(B,L)}return null}function Y(B,L,H,se){var _e=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return _e!==null?null:S(B,L,""+H,se);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===_e?P(B,L,H,se):null;case I:return H.key===_e?$(B,L,H,se):null;case R:return _e=H._init,H=_e(H._payload),Y(B,L,H,se)}if(Ie(H)||V(H))return _e!==null?null:J(B,L,H,se,null);if(typeof H.then=="function")return Y(B,L,Zu(H),se);if(H.$$typeof===Q)return Y(B,L,Uu(B,H),se);Ju(B,H)}return null}function K(B,L,H,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return B=B.get(H)||null,S(L,B,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return B=B.get(se.key===null?H:se.key)||null,P(L,B,se,_e);case I:return B=B.get(se.key===null?H:se.key)||null,$(L,B,se,_e);case R:var Me=se._init;return se=Me(se._payload),K(B,L,H,se,_e)}if(Ie(se)||V(se))return B=B.get(H)||null,J(L,B,se,_e,null);if(typeof se.then=="function")return K(B,L,H,Zu(se),_e);if(se.$$typeof===Q)return K(B,L,H,Uu(L,se),_e);Ju(L,se)}return null}function Ce(B,L,H,se){for(var _e=null,Me=null,Te=L,Ae=L=0,Jt=null;Te!==null&&Ae<H.length;Ae++){Te.index>Ae?(Jt=Te,Te=null):Jt=Te.sibling;var Qe=Y(B,Te,H[Ae],se);if(Qe===null){Te===null&&(Te=Jt);break}i&&Te&&Qe.alternate===null&&s(B,Te),L=g(Qe,L,Ae),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe,Te=Jt}if(Ae===H.length)return a(B,Te),We&&aa(B,Ae),_e;if(Te===null){for(;Ae<H.length;Ae++)Te=re(B,H[Ae],se),Te!==null&&(L=g(Te,L,Ae),Me===null?_e=Te:Me.sibling=Te,Me=Te);return We&&aa(B,Ae),_e}for(Te=c(Te);Ae<H.length;Ae++)Jt=K(Te,B,Ae,H[Ae],se),Jt!==null&&(i&&Jt.alternate!==null&&Te.delete(Jt.key===null?Ae:Jt.key),L=g(Jt,L,Ae),Me===null?_e=Jt:Me.sibling=Jt,Me=Jt);return i&&Te.forEach(function(mr){return s(B,mr)}),We&&aa(B,Ae),_e}function we(B,L,H,se){if(H==null)throw Error(r(151));for(var _e=null,Me=null,Te=L,Ae=L=0,Jt=null,Qe=H.next();Te!==null&&!Qe.done;Ae++,Qe=H.next()){Te.index>Ae?(Jt=Te,Te=null):Jt=Te.sibling;var mr=Y(B,Te,Qe.value,se);if(mr===null){Te===null&&(Te=Jt);break}i&&Te&&mr.alternate===null&&s(B,Te),L=g(mr,L,Ae),Me===null?_e=mr:Me.sibling=mr,Me=mr,Te=Jt}if(Qe.done)return a(B,Te),We&&aa(B,Ae),_e;if(Te===null){for(;!Qe.done;Ae++,Qe=H.next())Qe=re(B,Qe.value,se),Qe!==null&&(L=g(Qe,L,Ae),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe);return We&&aa(B,Ae),_e}for(Te=c(Te);!Qe.done;Ae++,Qe=H.next())Qe=K(Te,B,Ae,Qe.value,se),Qe!==null&&(i&&Qe.alternate!==null&&Te.delete(Qe.key===null?Ae:Qe.key),L=g(Qe,L,Ae),Me===null?_e=Qe:Me.sibling=Qe,Me=Qe);return i&&Te.forEach(function(UR){return s(B,UR)}),We&&aa(B,Ae),_e}function ot(B,L,H,se){if(typeof H=="object"&&H!==null&&H.type===M&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var _e=H.key;L!==null;){if(L.key===_e){if(_e=H.type,_e===M){if(L.tag===7){a(B,L.sibling),se=f(L,H.props.children),se.return=B,B=se;break e}}else if(L.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&Hv(_e)===L.type){a(B,L.sibling),se=f(L,H.props),Ul(se,H),se.return=B,B=se;break e}a(B,L);break}else s(B,L);L=L.sibling}H.type===M?(se=sa(H.props.children,B.mode,se,H.key),se.return=B,B=se):(se=ku(H.type,H.key,H.props,null,B.mode,se),Ul(se,H),se.return=B,B=se)}return T(B);case I:e:{for(_e=H.key;L!==null;){if(L.key===_e)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){a(B,L.sibling),se=f(L,H.children||[]),se.return=B,B=se;break e}else{a(B,L);break}else s(B,L);L=L.sibling}se=Ef(H,B.mode,se),se.return=B,B=se}return T(B);case R:return _e=H._init,H=_e(H._payload),ot(B,L,H,se)}if(Ie(H))return Ce(B,L,H,se);if(V(H)){if(_e=V(H),typeof _e!="function")throw Error(r(150));return H=_e.call(H),we(B,L,H,se)}if(typeof H.then=="function")return ot(B,L,Zu(H),se);if(H.$$typeof===Q)return ot(B,L,Uu(B,H),se);Ju(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(a(B,L.sibling),se=f(L,H),se.return=B,B=se):(a(B,L),se=_f(H,B.mode,se),se.return=B,B=se),T(B)):a(B,L)}return function(B,L,H,se){try{Ll=0;var _e=ot(B,L,H,se);return ho=null,_e}catch(Te){if(Te===Nl||Te===zu)throw Te;var Me=zn(29,Te,null,B.mode);return Me.lanes=se,Me.return=B,Me}finally{}}}var fo=Gv(!0),$v=Gv(!1),si=Z(null),Vi=null;function Js(i){var s=i.alternate;le(Gt,Gt.current&1),le(si,i),Vi===null&&(s===null||oo.current!==null||s.memoizedState!==null)&&(Vi=i)}function Yv(i){if(i.tag===22){if(le(Gt,Gt.current),le(si,i),Vi===null){var s=i.alternate;s!==null&&s.memoizedState!==null&&(Vi=i)}}else er()}function er(){le(Gt,Gt.current),le(si,si.current)}function ys(i){he(si),Vi===i&&(Vi=null),he(Gt)}var Gt=Z(0);function eh(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||qm(a)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Jf(i,s,a,c){s=i.memoizedState,a=a(c,s),a=a==null?s:_({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var em={enqueueSetState:function(i,s,a){i=i._reactInternals;var c=Gn(),f=Xs(c);f.payload=s,a!=null&&(f.callback=a),s=Ws(i,f,c),s!==null&&($n(s,i,c),Dl(s,i,c))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var c=Gn(),f=Xs(c);f.tag=1,f.payload=s,a!=null&&(f.callback=a),s=Ws(i,f,c),s!==null&&($n(s,i,c),Dl(s,i,c))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Gn(),c=Xs(a);c.tag=2,s!=null&&(c.callback=s),s=Ws(i,c,a),s!==null&&($n(s,i,a),Dl(s,i,a))}};function Kv(i,s,a,c,f,g,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,T):s.prototype&&s.prototype.isPureReactComponent?!Tl(a,c)||!Tl(f,g):!0}function Qv(i,s,a,c){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,c),s.state!==i&&em.enqueueReplaceState(s,s.state,null)}function fa(i,s){var a=s;if("ref"in s){a={};for(var c in s)c!=="ref"&&(a[c]=s[c])}if(i=i.defaultProps){a===s&&(a=_({},a));for(var f in i)a[f]===void 0&&(a[f]=i[f])}return a}var th=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Xv(i){th(i)}function Wv(i){console.error(i)}function Zv(i){th(i)}function nh(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function Jv(i,s,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function tm(i,s,a){return a=Xs(a),a.tag=3,a.payload={element:null},a.callback=function(){nh(i,s)},a}function e_(i){return i=Xs(i),i.tag=3,i}function t_(i,s,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;i.payload=function(){return f(g)},i.callback=function(){Jv(s,a,c)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Jv(s,a,c),typeof f!="function"&&(ar===null?ar=new Set([this]):ar.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function UA(i,s,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=a.alternate,s!==null&&Rl(s,a,f,!0),a=si.current,a!==null){switch(a.tag){case 13:return Vi===null?Am():a.alternate===null&&At===0&&(At=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===If?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([c]):s.add(c),xm(i,c,f)),!1;case 22:return a.flags|=65536,c===If?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([c]):a.add(c)),xm(i,c,f)),!1}throw Error(r(435,a.tag))}return xm(i,c,f),Am(),!1}if(We)return s=si.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,c!==wf&&(i=Error(r(422),{cause:c}),Al(ei(i,a)))):(c!==wf&&(s=Error(r(423),{cause:c}),Al(ei(s,a))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,c=ei(c,a),f=tm(i.stateNode,c,f),Of(i,f),At!==4&&(At=2)),!1;var g=Error(r(520),{cause:c});if(g=ei(g,a),$l===null?$l=[g]:$l.push(g),At!==4&&(At=2),s===null)return!0;c=ei(c,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=f&-f,a.lanes|=i,i=tm(a.stateNode,c,i),Of(a,i),!1;case 1:if(s=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ar===null||!ar.has(g))))return a.flags|=65536,f&=-f,a.lanes|=f,f=e_(f),t_(f,i,a,c),Of(a,f),!1}a=a.return}while(a!==null);return!1}var n_=Error(r(461)),Wt=!1;function sn(i,s,a,c){s.child=i===null?$v(s,null,a,c):fo(s,i.child,a,c)}function i_(i,s,a,c,f){a=a.render;var g=s.ref;if("ref"in c){var T={};for(var S in c)S!=="ref"&&(T[S]=c[S])}else T=c;return ua(s),c=Lf(i,s,a,T,g,f),S=Uf(),i!==null&&!Wt?(Bf(i,s,f),vs(i,s,f)):(We&&S&&Tf(s),s.flags|=1,sn(i,s,c,f),s.child)}function s_(i,s,a,c,f){if(i===null){var g=a.type;return typeof g=="function"&&!vf(g)&&g.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=g,r_(i,s,g,c,f)):(i=ku(a.type,null,c,s,s.mode,f),i.ref=s.ref,i.return=s,s.child=i)}if(g=i.child,!cm(i,f)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:Tl,a(T,c)&&i.ref===s.ref)return vs(i,s,f)}return s.flags|=1,i=hs(g,c),i.ref=s.ref,i.return=s,s.child=i}function r_(i,s,a,c,f){if(i!==null){var g=i.memoizedProps;if(Tl(g,c)&&i.ref===s.ref)if(Wt=!1,s.pendingProps=c=g,cm(i,f))(i.flags&131072)!==0&&(Wt=!0);else return s.lanes=i.lanes,vs(i,s,f)}return nm(i,s,a,c,f)}function a_(i,s,a){var c=s.pendingProps,f=c.children,g=i!==null?i.memoizedState:null;if(c.mode==="hidden"){if((s.flags&128)!==0){if(c=g!==null?g.baseLanes|a:a,i!==null){for(f=s.child=i.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~c}else s.childLanes=0,s.child=null;return o_(i,s,c,a)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Bu(s,g!==null?g.cachePool:null),g!==null?rv(s,g):kf(),Yv(s);else return s.lanes=s.childLanes=536870912,o_(i,s,g!==null?g.baseLanes|a:a,a)}else g!==null?(Bu(s,g.cachePool),rv(s,g),er(),s.memoizedState=null):(i!==null&&Bu(s,null),kf(),er());return sn(i,s,f,a),s.child}function o_(i,s,a,c){var f=Nf();return f=f===null?null:{parent:Ht._currentValue,pool:f},s.memoizedState={baseLanes:a,cachePool:f},i!==null&&Bu(s,null),kf(),Yv(s),i!==null&&Rl(i,s,c,!0),null}function ih(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function nm(i,s,a,c,f){return ua(s),a=Lf(i,s,a,c,void 0,f),c=Uf(),i!==null&&!Wt?(Bf(i,s,f),vs(i,s,f)):(We&&c&&Tf(s),s.flags|=1,sn(i,s,a,f),s.child)}function l_(i,s,a,c,f,g){return ua(s),s.updateQueue=null,a=ov(s,c,a,f),av(i),c=Uf(),i!==null&&!Wt?(Bf(i,s,g),vs(i,s,g)):(We&&c&&Tf(s),s.flags|=1,sn(i,s,a,g),s.child)}function c_(i,s,a,c,f){if(ua(s),s.stateNode===null){var g=no,T=a.contextType;typeof T=="object"&&T!==null&&(g=dn(T)),g=new a(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=em,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Df(s),T=a.contextType,g.context=typeof T=="object"&&T!==null?dn(T):no,g.state=s.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(Jf(s,a,T,c),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&em.enqueueReplaceState(g,g.state,null),Ol(s,c,g,f),jl(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(i===null){g=s.stateNode;var S=s.memoizedProps,P=fa(a,S);g.props=P;var $=g.context,J=a.contextType;T=no,typeof J=="object"&&J!==null&&(T=dn(J));var re=a.getDerivedStateFromProps;J=typeof re=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,J||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||$!==T)&&Qv(s,g,c,T),Qs=!1;var Y=s.memoizedState;g.state=Y,Ol(s,c,g,f),jl(),$=s.memoizedState,S||Y!==$||Qs?(typeof re=="function"&&(Jf(s,a,re,c),$=s.memoizedState),(P=Qs||Kv(s,a,P,c,Y,$,T))?(J||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=$),g.props=c,g.state=$,g.context=T,c=P):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,jf(i,s),T=s.memoizedProps,J=fa(a,T),g.props=J,re=s.pendingProps,Y=g.context,$=a.contextType,P=no,typeof $=="object"&&$!==null&&(P=dn($)),S=a.getDerivedStateFromProps,($=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==re||Y!==P)&&Qv(s,g,c,P),Qs=!1,Y=s.memoizedState,g.state=Y,Ol(s,c,g,f),jl();var K=s.memoizedState;T!==re||Y!==K||Qs||i!==null&&i.dependencies!==null&&Lu(i.dependencies)?(typeof S=="function"&&(Jf(s,a,S,c),K=s.memoizedState),(J=Qs||Kv(s,a,J,c,Y,K,P)||i!==null&&i.dependencies!==null&&Lu(i.dependencies))?($||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,K,P),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,K,P)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=K),g.props=c,g.state=K,g.context=P,c=J):(typeof g.componentDidUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),c=!1)}return g=c,ih(i,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,i!==null&&c?(s.child=fo(s,i.child,null,f),s.child=fo(s,null,a,f)):sn(i,s,a,f),s.memoizedState=g.state,i=s.child):i=vs(i,s,f),i}function u_(i,s,a,c){return Sl(),s.flags|=256,sn(i,s,a,c),s.child}var im={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sm(i){return{baseLanes:i,cachePool:Wy()}}function rm(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=ri),i}function h_(i,s,a){var c=s.pendingProps,f=!1,g=(s.flags&128)!==0,T;if((T=g)||(T=i!==null&&i.memoizedState===null?!1:(Gt.current&2)!==0),T&&(f=!0,s.flags&=-129),T=(s.flags&32)!==0,s.flags&=-33,i===null){if(We){if(f?Js(s):er(),We){var S=St,P;if(P=S){e:{for(P=S,S=Mi;P.nodeType!==8;){if(!S){S=null;break e}if(P=gi(P.nextSibling),P===null){S=null;break e}}S=P}S!==null?(s.memoizedState={dehydrated:S,treeContext:ra!==null?{id:ds,overflow:fs}:null,retryLane:536870912,hydrationErrors:null},P=zn(18,null,null,0),P.stateNode=S,P.return=s,s.child=P,wn=s,St=null,P=!0):P=!1}P||la(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return qm(S)?s.lanes=32:s.lanes=536870912,null;ys(s)}return S=c.children,c=c.fallback,f?(er(),f=s.mode,S=sh({mode:"hidden",children:S},f),c=sa(c,f,a,null),S.return=s,c.return=s,S.sibling=c,s.child=S,f=s.child,f.memoizedState=sm(a),f.childLanes=rm(i,T,a),s.memoizedState=im,c):(Js(s),am(s,S))}if(P=i.memoizedState,P!==null&&(S=P.dehydrated,S!==null)){if(g)s.flags&256?(Js(s),s.flags&=-257,s=om(i,s,a)):s.memoizedState!==null?(er(),s.child=i.child,s.flags|=128,s=null):(er(),f=c.fallback,S=s.mode,c=sh({mode:"visible",children:c.children},S),f=sa(f,S,a,null),f.flags|=2,c.return=s,f.return=s,c.sibling=f,s.child=c,fo(s,i.child,null,a),c=s.child,c.memoizedState=sm(a),c.childLanes=rm(i,T,a),s.memoizedState=im,s=f);else if(Js(s),qm(S)){if(T=S.nextSibling&&S.nextSibling.dataset,T)var $=T.dgst;T=$,c=Error(r(419)),c.stack="",c.digest=T,Al({value:c,source:null,stack:null}),s=om(i,s,a)}else if(Wt||Rl(i,s,a,!1),T=(a&i.childLanes)!==0,Wt||T){if(T=ut,T!==null&&(c=a&-a,c=(c&42)!==0?1:zs(c),c=(c&(T.suspendedLanes|a))!==0?0:c,c!==0&&c!==P.retryLane))throw P.retryLane=c,to(i,c),$n(T,i,c),n_;S.data==="$?"||Am(),s=om(i,s,a)}else S.data==="$?"?(s.flags|=192,s.child=i.child,s=null):(i=P.treeContext,St=gi(S.nextSibling),wn=s,We=!0,oa=null,Mi=!1,i!==null&&(ni[ii++]=ds,ni[ii++]=fs,ni[ii++]=ra,ds=i.id,fs=i.overflow,ra=s),s=am(s,c.children),s.flags|=4096);return s}return f?(er(),f=c.fallback,S=s.mode,P=i.child,$=P.sibling,c=hs(P,{mode:"hidden",children:c.children}),c.subtreeFlags=P.subtreeFlags&65011712,$!==null?f=hs($,f):(f=sa(f,S,a,null),f.flags|=2),f.return=s,c.return=s,c.sibling=f,s.child=c,c=f,f=s.child,S=i.child.memoizedState,S===null?S=sm(a):(P=S.cachePool,P!==null?($=Ht._currentValue,P=P.parent!==$?{parent:$,pool:$}:P):P=Wy(),S={baseLanes:S.baseLanes|a,cachePool:P}),f.memoizedState=S,f.childLanes=rm(i,T,a),s.memoizedState=im,c):(Js(s),a=i.child,i=a.sibling,a=hs(a,{mode:"visible",children:c.children}),a.return=s,a.sibling=null,i!==null&&(T=s.deletions,T===null?(s.deletions=[i],s.flags|=16):T.push(i)),s.child=a,s.memoizedState=null,a)}function am(i,s){return s=sh({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function sh(i,s){return i=zn(22,i,null,s),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function om(i,s,a){return fo(s,i.child,null,a),i=am(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function d_(i,s,a){i.lanes|=s;var c=i.alternate;c!==null&&(c.lanes|=s),Af(i.return,s,a)}function lm(i,s,a,c,f){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=a,g.tailMode=f)}function f_(i,s,a){var c=s.pendingProps,f=c.revealOrder,g=c.tail;if(sn(i,s,c.children,a),c=Gt.current,(c&2)!==0)c=c&1|2,s.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&d_(i,a,s);else if(i.tag===19)d_(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(le(Gt,c),f){case"forwards":for(a=s.child,f=null;a!==null;)i=a.alternate,i!==null&&eh(i)===null&&(f=a),a=a.sibling;a=f,a===null?(f=s.child,s.child=null):(f=a.sibling,a.sibling=null),lm(s,!1,f,a,g);break;case"backwards":for(a=null,f=s.child,s.child=null;f!==null;){if(i=f.alternate,i!==null&&eh(i)===null){s.child=f;break}i=f.sibling,f.sibling=a,a=f,f=i}lm(s,!0,a,null,g);break;case"together":lm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vs(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),rr|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(Rl(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,a=hs(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=hs(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function cm(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Lu(i)))}function BA(i,s,a){switch(s.tag){case 3:qe(s,s.stateNode.containerInfo),Ks(s,Ht,i.memoizedState.cache),Sl();break;case 27:case 5:ft(s);break;case 4:qe(s,s.stateNode.containerInfo);break;case 10:Ks(s,s.type,s.memoizedProps.value);break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Js(s),s.flags|=128,null):(a&s.child.childLanes)!==0?h_(i,s,a):(Js(s),i=vs(i,s,a),i!==null?i.sibling:null);Js(s);break;case 19:var f=(i.flags&128)!==0;if(c=(a&s.childLanes)!==0,c||(Rl(i,s,a,!1),c=(a&s.childLanes)!==0),f){if(c)return f_(i,s,a);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Gt,Gt.current),c)break;return null;case 22:case 23:return s.lanes=0,a_(i,s,a);case 24:Ks(s,Ht,i.memoizedState.cache)}return vs(i,s,a)}function m_(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)Wt=!0;else{if(!cm(i,a)&&(s.flags&128)===0)return Wt=!1,BA(i,s,a);Wt=(i.flags&131072)!==0}else Wt=!1,We&&(s.flags&1048576)!==0&&Hy(s,Vu,s.index);switch(s.lanes=0,s.tag){case 16:e:{i=s.pendingProps;var c=s.elementType,f=c._init;if(c=f(c._payload),s.type=c,typeof c=="function")vf(c)?(i=fa(c,i),s.tag=1,s=c_(null,s,c,i,a)):(s.tag=0,s=nm(null,s,c,i,a));else{if(c!=null){if(f=c.$$typeof,f===ie){s.tag=11,s=i_(null,s,c,i,a);break e}else if(f===D){s.tag=14,s=s_(null,s,c,i,a);break e}}throw s=Oe(c)||c,Error(r(306,s,""))}}return s;case 0:return nm(i,s,s.type,s.pendingProps,a);case 1:return c=s.type,f=fa(c,s.pendingProps),c_(i,s,c,f,a);case 3:e:{if(qe(s,s.stateNode.containerInfo),i===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;f=g.element,jf(i,s),Ol(s,c,null,a);var T=s.memoizedState;if(c=T.cache,Ks(s,Ht,c),c!==g.cache&&Rf(s,[Ht],a,!0),jl(),c=T.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:T.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=u_(i,s,c,a);break e}else if(c!==f){f=ei(Error(r(424)),s),Al(f),s=u_(i,s,c,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(St=gi(i.firstChild),wn=s,We=!0,oa=null,Mi=!0,a=$v(s,null,c,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Sl(),c===f){s=vs(i,s,a);break e}sn(i,s,c,a)}s=s.child}return s;case 26:return ih(i,s),i===null?(a=vE(s.type,null,s.pendingProps,null))?s.memoizedState=a:We||(a=s.type,i=s.pendingProps,c=vh(de.current).createElement(a),c[zt]=s,c[Ot]=i,an(c,a,i),Nt(c),s.stateNode=c):s.memoizedState=vE(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ft(s),i===null&&We&&(c=s.stateNode=pE(s.type,s.pendingProps,de.current),wn=s,Mi=!0,f=St,cr(s.type)?(Fm=f,St=gi(c.firstChild)):St=f),sn(i,s,s.pendingProps.children,a),ih(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&We&&((f=c=St)&&(c=mR(c,s.type,s.pendingProps,Mi),c!==null?(s.stateNode=c,wn=s,St=gi(c.firstChild),Mi=!1,f=!0):f=!1),f||la(s)),ft(s),f=s.type,g=s.pendingProps,T=i!==null?i.memoizedProps:null,c=g.children,Um(f,g)?c=null:T!==null&&Um(f,T)&&(s.flags|=32),s.memoizedState!==null&&(f=Lf(i,s,jA,null,null,a),tc._currentValue=f),ih(i,s),sn(i,s,c,a),s.child;case 6:return i===null&&We&&((i=a=St)&&(a=pR(a,s.pendingProps,Mi),a!==null?(s.stateNode=a,wn=s,St=null,i=!0):i=!1),i||la(s)),null;case 13:return h_(i,s,a);case 4:return qe(s,s.stateNode.containerInfo),c=s.pendingProps,i===null?s.child=fo(s,null,c,a):sn(i,s,c,a),s.child;case 11:return i_(i,s,s.type,s.pendingProps,a);case 7:return sn(i,s,s.pendingProps,a),s.child;case 8:return sn(i,s,s.pendingProps.children,a),s.child;case 12:return sn(i,s,s.pendingProps.children,a),s.child;case 10:return c=s.pendingProps,Ks(s,s.type,c.value),sn(i,s,c.children,a),s.child;case 9:return f=s.type._context,c=s.pendingProps.children,ua(s),f=dn(f),c=c(f),s.flags|=1,sn(i,s,c,a),s.child;case 14:return s_(i,s,s.type,s.pendingProps,a);case 15:return r_(i,s,s.type,s.pendingProps,a);case 19:return f_(i,s,a);case 31:return c=s.pendingProps,a=s.mode,c={mode:c.mode,children:c.children},i===null?(a=sh(c,a),a.ref=s.ref,s.child=a,a.return=s,s=a):(a=hs(i.child,c),a.ref=s.ref,s.child=a,a.return=s,s=a),s;case 22:return a_(i,s,a);case 24:return ua(s),c=dn(Ht),i===null?(f=Nf(),f===null&&(f=ut,g=xf(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=a),f=g),s.memoizedState={parent:c,cache:f},Df(s),Ks(s,Ht,f)):((i.lanes&a)!==0&&(jf(i,s),Ol(s,null,null,a),jl()),f=i.memoizedState,g=s.memoizedState,f.parent!==c?(f={parent:c,cache:c},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Ks(s,Ht,c)):(c=g.cache,Ks(s,Ht,c),c!==f.cache&&Rf(s,[Ht],a,!0))),sn(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _s(i){i.flags|=4}function p_(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!wE(s)){if(s=si.current,s!==null&&((Ge&4194048)===Ge?Vi!==null:(Ge&62914560)!==Ge&&(Ge&536870912)===0||s!==Vi))throw Il=If,Zy;i.flags|=8192}}function rh(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?il():536870912,i.lanes|=s,yo|=s)}function Bl(i,s){if(!We)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function Tt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(s)for(var f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=c,i.childLanes=a,s}function zA(i,s,a){var c=s.pendingProps;switch(bf(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(s),null;case 1:return Tt(s),null;case 3:return a=s.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),ps(Ht),pt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(wl(s)?_s(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Yy())),Tt(s),null;case 26:return a=s.memoizedState,i===null?(_s(s),a!==null?(Tt(s),p_(s,a)):(Tt(s),s.flags&=-16777217)):a?a!==i.memoizedState?(_s(s),Tt(s),p_(s,a)):(Tt(s),s.flags&=-16777217):(i.memoizedProps!==c&&_s(s),Tt(s),s.flags&=-16777217),null;case 27:An(s),a=de.current;var f=s.type;if(i!==null&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}i=ue.current,wl(s)?Gy(s):(i=pE(f,c,a),s.stateNode=i,_s(s))}return Tt(s),null;case 5:if(An(s),a=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return Tt(s),null}if(i=ue.current,wl(s))Gy(s);else{switch(f=vh(de.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?f.createElement("select",{is:c.is}):f.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?f.createElement(a,{is:c.is}):f.createElement(a)}}i[zt]=s,i[Ot]=c;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=i;e:switch(an(i,a,c),a){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_s(s)}}return Tt(s),s.flags&=-16777217,null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==c&&_s(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(i=de.current,wl(s)){if(i=s.stateNode,a=s.memoizedProps,c=null,f=wn,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}i[zt]=s,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||lE(i.nodeValue,a)),i||la(s)}else i=vh(i).createTextNode(c),i[zt]=s,s.stateNode=i}return Tt(s),null;case 13:if(c=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=wl(s),c!==null&&c.dehydrated!==null){if(i===null){if(!f)throw Error(r(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[zt]=s}else Sl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Tt(s),f=!1}else f=Yy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(ys(s),s):(ys(s),null)}if(ys(s),(s.flags&128)!==0)return s.lanes=a,s;if(a=c!==null,i=i!==null&&i.memoizedState!==null,a){c=s.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)}return a!==i&&a&&(s.child.flags|=8192),rh(s,s.updateQueue),Tt(s),null;case 4:return pt(),i===null&&Pm(s.stateNode.containerInfo),Tt(s),null;case 10:return ps(s.type),Tt(s),null;case 19:if(he(Gt),f=s.memoizedState,f===null)return Tt(s),null;if(c=(s.flags&128)!==0,g=f.rendering,g===null)if(c)Bl(f,!1);else{if(At!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(g=eh(i),g!==null){for(s.flags|=128,Bl(f,!1),i=g.updateQueue,s.updateQueue=i,rh(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)Fy(a,i),a=a.sibling;return le(Gt,Gt.current&1|2),s.child}i=i.sibling}f.tail!==null&&Ye()>lh&&(s.flags|=128,c=!0,Bl(f,!1),s.lanes=4194304)}else{if(!c)if(i=eh(g),i!==null){if(s.flags|=128,c=!0,i=i.updateQueue,s.updateQueue=i,rh(s,i),Bl(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!We)return Tt(s),null}else 2*Ye()-f.renderingStartTime>lh&&a!==536870912&&(s.flags|=128,c=!0,Bl(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(i=f.last,i!==null?i.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=Ye(),s.sibling=null,i=Gt.current,le(Gt,c?i&1|2:i&1),s):(Tt(s),null);case 22:case 23:return ys(s),Mf(),c=s.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(a&536870912)!==0&&(s.flags&128)===0&&(Tt(s),s.subtreeFlags&6&&(s.flags|=8192)):Tt(s),a=s.updateQueue,a!==null&&rh(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==a&&(s.flags|=2048),i!==null&&he(ha),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),ps(Ht),Tt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function qA(i,s){switch(bf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ps(Ht),pt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return An(s),null;case 13:if(ys(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Sl()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return he(Gt),null;case 4:return pt(),null;case 10:return ps(s.type),null;case 22:case 23:return ys(s),Mf(),i!==null&&he(ha),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ps(Ht),null;case 25:return null;default:return null}}function g_(i,s){switch(bf(s),s.tag){case 3:ps(Ht),pt();break;case 26:case 27:case 5:An(s);break;case 4:pt();break;case 13:ys(s);break;case 19:he(Gt);break;case 10:ps(s.type);break;case 22:case 23:ys(s),Mf(),i!==null&&he(ha);break;case 24:ps(Ht)}}function zl(i,s){try{var a=s.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&i)===i){c=void 0;var g=a.create,T=a.inst;c=g(),T.destroy=c}a=a.next}while(a!==f)}}catch(S){lt(s,s.return,S)}}function tr(i,s,a){try{var c=s.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&i)===i){var T=c.inst,S=T.destroy;if(S!==void 0){T.destroy=void 0,f=s;var P=a,$=S;try{$()}catch(J){lt(f,P,J)}}}c=c.next}while(c!==g)}}catch(J){lt(s,s.return,J)}}function y_(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{sv(s,a)}catch(c){lt(i,i.return,c)}}}function v_(i,s,a){a.props=fa(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){lt(i,s,c)}}function ql(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(f){lt(i,s,f)}}function Li(i,s){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){lt(i,s,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){lt(i,s,f)}else a.current=null}function __(i){var s=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){lt(i,i.return,f)}}function um(i,s,a){try{var c=i.stateNode;cR(c,i.type,a,s),c[Ot]=s}catch(f){lt(i,i.return,f)}}function E_(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&cr(i.type)||i.tag===4}function hm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||E_(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&cr(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function dm(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=yh));else if(c!==4&&(c===27&&cr(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(dm(i,s,a),i=i.sibling;i!==null;)dm(i,s,a),i=i.sibling}function ah(i,s,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(c!==4&&(c===27&&cr(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(ah(i,s,a),i=i.sibling;i!==null;)ah(i,s,a),i=i.sibling}function T_(i){var s=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);an(s,c,a),s[zt]=i,s[Ot]=a}catch(g){lt(i,i.return,g)}}var Es=!1,Dt=!1,fm=!1,b_=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function FA(i,s){if(i=i.containerInfo,Vm=Sh,i=Oy(i),hf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,S=-1,P=-1,$=0,J=0,re=i,Y=null;t:for(;;){for(var K;re!==a||f!==0&&re.nodeType!==3||(S=T+f),re!==g||c!==0&&re.nodeType!==3||(P=T+c),re.nodeType===3&&(T+=re.nodeValue.length),(K=re.firstChild)!==null;)Y=re,re=K;for(;;){if(re===i)break t;if(Y===a&&++$===f&&(S=T),Y===g&&++J===c&&(P=T),(K=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=K}a=S===-1||P===-1?null:{start:S,end:P}}else a=null}a=a||{start:0,end:0}}else a=null;for(Lm={focusedElem:i,selectionRange:a},Sh=!1,Zt=s;Zt!==null;)if(s=Zt,i=s.child,(s.subtreeFlags&1024)!==0&&i!==null)i.return=s,Zt=i;else for(;Zt!==null;){switch(s=Zt,g=s.alternate,i=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,a=s,f=g.memoizedProps,g=g.memoizedState,c=a.stateNode;try{var Ce=fa(a.type,f,a.elementType===a.type);i=c.getSnapshotBeforeUpdate(Ce,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(we){lt(a,a.return,we)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)zm(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":zm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,Zt=i;break}Zt=s.return}}function w_(i,s,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:nr(i,a),c&4&&zl(5,a);break;case 1:if(nr(i,a),c&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(T){lt(a,a.return,T)}else{var f=fa(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(f,s,i.__reactInternalSnapshotBeforeUpdate)}catch(T){lt(a,a.return,T)}}c&64&&y_(a),c&512&&ql(a,a.return);break;case 3:if(nr(i,a),c&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{sv(i,s)}catch(T){lt(a,a.return,T)}}break;case 27:s===null&&c&4&&T_(a);case 26:case 5:nr(i,a),s===null&&c&4&&__(a),c&512&&ql(a,a.return);break;case 12:nr(i,a);break;case 13:nr(i,a),c&4&&R_(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=ZA.bind(null,a),gR(i,a))));break;case 22:if(c=a.memoizedState!==null||Es,!c){s=s!==null&&s.memoizedState!==null||Dt,f=Es;var g=Dt;Es=c,(Dt=s)&&!g?ir(i,a,(a.subtreeFlags&8772)!==0):nr(i,a),Es=f,Dt=g}break;case 30:break;default:nr(i,a)}}function S_(i){var s=i.alternate;s!==null&&(i.alternate=null,S_(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Hs(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var yt=null,xn=!1;function Ts(i,s,a){for(a=a.child;a!==null;)A_(i,s,a),a=a.sibling}function A_(i,s,a){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(wt,a)}catch{}switch(a.tag){case 26:Dt||Li(a,s),Ts(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Li(a,s);var c=yt,f=xn;cr(a.type)&&(yt=a.stateNode,xn=!1),Ts(i,s,a),Wl(a.stateNode),yt=c,xn=f;break;case 5:Dt||Li(a,s);case 6:if(c=yt,f=xn,yt=null,Ts(i,s,a),yt=c,xn=f,yt!==null)if(xn)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(a.stateNode)}catch(g){lt(a,s,g)}else try{yt.removeChild(a.stateNode)}catch(g){lt(a,s,g)}break;case 18:yt!==null&&(xn?(i=yt,fE(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),rc(i)):fE(yt,a.stateNode));break;case 4:c=yt,f=xn,yt=a.stateNode.containerInfo,xn=!0,Ts(i,s,a),yt=c,xn=f;break;case 0:case 11:case 14:case 15:Dt||tr(2,a,s),Dt||tr(4,a,s),Ts(i,s,a);break;case 1:Dt||(Li(a,s),c=a.stateNode,typeof c.componentWillUnmount=="function"&&v_(a,s,c)),Ts(i,s,a);break;case 21:Ts(i,s,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,Ts(i,s,a),Dt=c;break;default:Ts(i,s,a)}}function R_(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{rc(i)}catch(a){lt(s,s.return,a)}}function HA(i){switch(i.tag){case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new b_),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new b_),s;default:throw Error(r(435,i.tag))}}function mm(i,s){var a=HA(i);s.forEach(function(c){var f=JA.bind(null,i,c);a.has(c)||(a.add(c),c.then(f,f))})}function qn(i,s){var a=s.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],g=i,T=s,S=T;e:for(;S!==null;){switch(S.tag){case 27:if(cr(S.type)){yt=S.stateNode,xn=!1;break e}break;case 5:yt=S.stateNode,xn=!1;break e;case 3:case 4:yt=S.stateNode.containerInfo,xn=!0;break e}S=S.return}if(yt===null)throw Error(r(160));A_(g,T,f),yt=null,xn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)x_(s,i),s=s.sibling}var pi=null;function x_(i,s){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:qn(s,i),Fn(i),c&4&&(tr(3,i,i.return),zl(3,i),tr(5,i,i.return));break;case 1:qn(s,i),Fn(i),c&512&&(Dt||a===null||Li(a,a.return)),c&64&&Es&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=pi;if(qn(s,i),Fn(i),c&512&&(Dt||a===null||Li(a,a.return)),c&4){var g=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[qr]||g[zt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),an(g,c,a),g[zt]=i,Nt(g),c=g;break e;case"link":var T=TE("link","href",f).get(c+(a.href||""));if(T){for(var S=0;S<T.length;S++)if(g=T[S],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(S,1);break t}}g=f.createElement(c),an(g,c,a),f.head.appendChild(g);break;case"meta":if(T=TE("meta","content",f).get(c+(a.content||""))){for(S=0;S<T.length;S++)if(g=T[S],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(S,1);break t}}g=f.createElement(c),an(g,c,a),f.head.appendChild(g);break;default:throw Error(r(468,c))}g[zt]=i,Nt(g),c=g}i.stateNode=c}else bE(f,i.type,i.stateNode);else i.stateNode=EE(f,c,i.memoizedProps);else g!==c?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,c===null?bE(f,i.type,i.stateNode):EE(f,c,i.memoizedProps)):c===null&&i.stateNode!==null&&um(i,i.memoizedProps,a.memoizedProps)}break;case 27:qn(s,i),Fn(i),c&512&&(Dt||a===null||Li(a,a.return)),a!==null&&c&4&&um(i,i.memoizedProps,a.memoizedProps);break;case 5:if(qn(s,i),Fn(i),c&512&&(Dt||a===null||Li(a,a.return)),i.flags&32){f=i.stateNode;try{Xn(f,"")}catch(K){lt(i,i.return,K)}}c&4&&i.stateNode!=null&&(f=i.memoizedProps,um(i,f,a!==null?a.memoizedProps:f)),c&1024&&(fm=!0);break;case 6:if(qn(s,i),Fn(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(K){lt(i,i.return,K)}}break;case 3:if(Th=null,f=pi,pi=_h(s.containerInfo),qn(s,i),pi=f,Fn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{rc(s.containerInfo)}catch(K){lt(i,i.return,K)}fm&&(fm=!1,C_(i));break;case 4:c=pi,pi=_h(i.stateNode.containerInfo),qn(s,i),Fn(i),pi=c;break;case 12:qn(s,i),Fn(i);break;case 13:qn(s,i),Fn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Em=Ye()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,mm(i,c)));break;case 22:f=i.memoizedState!==null;var P=a!==null&&a.memoizedState!==null,$=Es,J=Dt;if(Es=$||f,Dt=J||P,qn(s,i),Dt=J,Es=$,Fn(i),c&8192)e:for(s=i.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(a===null||P||Es||Dt||ma(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){P=a=s;try{if(g=P.stateNode,f)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{S=P.stateNode;var re=P.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(K){lt(P,P.return,K)}}}else if(s.tag===6){if(a===null){P=s;try{P.stateNode.nodeValue=f?"":P.memoizedProps}catch(K){lt(P,P.return,K)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,mm(i,a))));break;case 19:qn(s,i),Fn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,mm(i,c)));break;case 30:break;case 21:break;default:qn(s,i),Fn(i)}}function Fn(i){var s=i.flags;if(s&2){try{for(var a,c=i.return;c!==null;){if(E_(c)){a=c;break}c=c.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,g=hm(i);ah(i,g,f);break;case 5:var T=a.stateNode;a.flags&32&&(Xn(T,""),a.flags&=-33);var S=hm(i);ah(i,S,T);break;case 3:case 4:var P=a.stateNode.containerInfo,$=hm(i);dm(i,$,P);break;default:throw Error(r(161))}}catch(J){lt(i,i.return,J)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function C_(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;C_(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function nr(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)w_(i,s.alternate,s),s=s.sibling}function ma(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:tr(4,s,s.return),ma(s);break;case 1:Li(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&v_(s,s.return,a),ma(s);break;case 27:Wl(s.stateNode);case 26:case 5:Li(s,s.return),ma(s);break;case 22:s.memoizedState===null&&ma(s);break;case 30:ma(s);break;default:ma(s)}i=i.sibling}}function ir(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,f=i,g=s,T=g.flags;switch(g.tag){case 0:case 11:case 15:ir(f,g,a),zl(4,g);break;case 1:if(ir(f,g,a),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch($){lt(c,c.return,$)}if(c=g,f=c.updateQueue,f!==null){var S=c.stateNode;try{var P=f.shared.hiddenCallbacks;if(P!==null)for(f.shared.hiddenCallbacks=null,f=0;f<P.length;f++)iv(P[f],S)}catch($){lt(c,c.return,$)}}a&&T&64&&y_(g),ql(g,g.return);break;case 27:T_(g);case 26:case 5:ir(f,g,a),a&&c===null&&T&4&&__(g),ql(g,g.return);break;case 12:ir(f,g,a);break;case 13:ir(f,g,a),a&&T&4&&R_(f,g);break;case 22:g.memoizedState===null&&ir(f,g,a),ql(g,g.return);break;case 30:break;default:ir(f,g,a)}s=s.sibling}}function pm(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&xl(a))}function gm(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xl(i))}function Ui(i,s,a,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)N_(i,s,a,c),s=s.sibling}function N_(i,s,a,c){var f=s.flags;switch(s.tag){case 0:case 11:case 15:Ui(i,s,a,c),f&2048&&zl(9,s);break;case 1:Ui(i,s,a,c);break;case 3:Ui(i,s,a,c),f&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&xl(i)));break;case 12:if(f&2048){Ui(i,s,a,c),i=s.stateNode;try{var g=s.memoizedProps,T=g.id,S=g.onPostCommit;typeof S=="function"&&S(T,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(P){lt(s,s.return,P)}}else Ui(i,s,a,c);break;case 13:Ui(i,s,a,c);break;case 23:break;case 22:g=s.stateNode,T=s.alternate,s.memoizedState!==null?g._visibility&2?Ui(i,s,a,c):Fl(i,s):g._visibility&2?Ui(i,s,a,c):(g._visibility|=2,mo(i,s,a,c,(s.subtreeFlags&10256)!==0)),f&2048&&pm(T,s);break;case 24:Ui(i,s,a,c),f&2048&&gm(s.alternate,s);break;default:Ui(i,s,a,c)}}function mo(i,s,a,c,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=i,T=s,S=a,P=c,$=T.flags;switch(T.tag){case 0:case 11:case 15:mo(g,T,S,P,f),zl(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?mo(g,T,S,P,f):Fl(g,T):(J._visibility|=2,mo(g,T,S,P,f)),f&&$&2048&&pm(T.alternate,T);break;case 24:mo(g,T,S,P,f),f&&$&2048&&gm(T.alternate,T);break;default:mo(g,T,S,P,f)}s=s.sibling}}function Fl(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,c=s,f=c.flags;switch(c.tag){case 22:Fl(a,c),f&2048&&pm(c.alternate,c);break;case 24:Fl(a,c),f&2048&&gm(c.alternate,c);break;default:Fl(a,c)}s=s.sibling}}var Hl=8192;function po(i){if(i.subtreeFlags&Hl)for(i=i.child;i!==null;)I_(i),i=i.sibling}function I_(i){switch(i.tag){case 26:po(i),i.flags&Hl&&i.memoizedState!==null&&NR(pi,i.memoizedState,i.memoizedProps);break;case 5:po(i);break;case 3:case 4:var s=pi;pi=_h(i.stateNode.containerInfo),po(i),pi=s;break;case 22:i.memoizedState===null&&(s=i.alternate,s!==null&&s.memoizedState!==null?(s=Hl,Hl=16777216,po(i),Hl=s):po(i));break;default:po(i)}}function D_(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function Gl(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Zt=c,O_(c,i)}D_(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)j_(i),i=i.sibling}function j_(i){switch(i.tag){case 0:case 11:case 15:Gl(i),i.flags&2048&&tr(9,i,i.return);break;case 3:Gl(i);break;case 12:Gl(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,oh(i)):Gl(i);break;default:Gl(i)}}function oh(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var c=s[a];Zt=c,O_(c,i)}D_(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:tr(8,s,s.return),oh(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,oh(s));break;default:oh(s)}i=i.sibling}}function O_(i,s){for(;Zt!==null;){var a=Zt;switch(a.tag){case 0:case 11:case 15:tr(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:xl(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Zt=c;else e:for(a=i;Zt!==null;){c=Zt;var f=c.sibling,g=c.return;if(S_(c),c===a){Zt=null;break e}if(f!==null){f.return=g,Zt=f;break e}Zt=g}}}var GA={getCacheForType:function(i){var s=dn(Ht),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a}},$A=typeof WeakMap=="function"?WeakMap:Map,nt=0,ut=null,Ve=null,Ge=0,it=0,Hn=null,sr=!1,go=!1,ym=!1,bs=0,At=0,rr=0,pa=0,vm=0,ri=0,yo=0,$l=null,Cn=null,_m=!1,Em=0,lh=1/0,ch=null,ar=null,rn=0,or=null,vo=null,_o=0,Tm=0,bm=null,P_=null,Yl=0,wm=null;function Gn(){if((nt&2)!==0&&Ge!==0)return Ge&-Ge;if(X.T!==null){var i=ro;return i!==0?i:Im()}return qs()}function k_(){ri===0&&(ri=(Ge&536870912)===0||We?nl():536870912);var i=si.current;return i!==null&&(i.flags|=32),ri}function $n(i,s,a){(i===ut&&(it===2||it===9)||i.cancelPendingCommit!==null)&&(Eo(i,0),lr(i,Ge,ri,!1)),es(i,a),((nt&2)===0||i!==ut)&&(i===ut&&((nt&2)===0&&(pa|=a),At===4&&lr(i,Ge,ri,!1)),Bi(i))}function M_(i,s,a){if((nt&6)!==0)throw Error(r(327));var c=!a&&(s&124)===0&&(s&i.expiredLanes)===0||zr(i,s),f=c?QA(i,s):Rm(i,s,!0),g=c;do{if(f===0){go&&!c&&lr(i,s,0,!1);break}else{if(a=i.current.alternate,g&&!YA(a)){f=Rm(i,s,!1),g=!1;continue}if(f===2){if(g=s,i.errorRecoveryDisabledLanes&g)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){s=T;e:{var S=i;f=$l;var P=S.current.memoizedState.isDehydrated;if(P&&(Eo(S,T).flags|=256),T=Rm(S,T,!1),T!==2){if(ym&&!P){S.errorRecoveryDisabledLanes|=g,pa|=g,f=4;break e}g=Cn,Cn=f,g!==null&&(Cn===null?Cn=g:Cn.push.apply(Cn,g))}f=T}if(g=!1,f!==2)continue}}if(f===1){Eo(i,0),lr(i,s,0,!0);break}e:{switch(c=i,g=f,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:lr(c,s,ri,!sr);break e;case 2:Cn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(f=Em+300-Ye(),10<f)){if(lr(c,s,ri,!sr),Ma(c,0,!0)!==0)break e;c.timeoutHandle=hE(V_.bind(null,c,a,Cn,ch,_m,s,ri,pa,yo,sr,g,2,-0,0),f);break e}V_(c,a,Cn,ch,_m,s,ri,pa,yo,sr,g,0,-0,0)}}break}while(!0);Bi(i)}function V_(i,s,a,c,f,g,T,S,P,$,J,re,Y,K){if(i.timeoutHandle=-1,re=s.subtreeFlags,(re&8192||(re&16785408)===16785408)&&(ec={stylesheets:null,count:0,unsuspend:CR},I_(s),re=IR(),re!==null)){i.cancelPendingCommit=re(H_.bind(null,i,s,g,a,c,f,T,S,P,J,1,Y,K)),lr(i,g,T,!$);return}H_(i,s,g,a,c,f,T,S,P)}function YA(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],g=f.getSnapshot;f=f.value;try{if(!Bn(g(),f))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function lr(i,s,a,c){s&=~vm,s&=~pa,i.suspendedLanes|=s,i.pingedLanes&=~s,c&&(i.warmLanes|=s),c=i.expirationTimes;for(var f=s;0<f;){var g=31-hn(f),T=1<<g;c[g]=-1,f&=~T}a!==0&&Ai(i,a,s)}function uh(){return(nt&6)===0?(Kl(0),!1):!0}function Sm(){if(Ve!==null){if(it===0)var i=Ve.return;else i=Ve,ms=ca=null,zf(i),ho=null,Ll=0,i=Ve;for(;i!==null;)g_(i.alternate,i),i=i.return;Ve=null}}function Eo(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,hR(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Sm(),ut=i,Ve=a=hs(i.current,null),Ge=s,it=0,Hn=null,sr=!1,go=zr(i,s),ym=!1,yo=ri=vm=pa=rr=At=0,Cn=$l=null,_m=!1,(s&8)!==0&&(s|=s&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=s;0<c;){var f=31-hn(c),g=1<<f;s|=i[f],c&=~g}return bs=s,ju(),a}function L_(i,s){ke=null,X.H=Wu,s===Nl||s===zu?(s=tv(),it=3):s===Zy?(s=tv(),it=4):it=s===n_?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hn=s,Ve===null&&(At=1,nh(i,ei(s,i.current)))}function U_(){var i=X.H;return X.H=Wu,i===null?Wu:i}function B_(){var i=X.A;return X.A=GA,i}function Am(){At=4,sr||(Ge&4194048)!==Ge&&si.current!==null||(go=!0),(rr&134217727)===0&&(pa&134217727)===0||ut===null||lr(ut,Ge,ri,!1)}function Rm(i,s,a){var c=nt;nt|=2;var f=U_(),g=B_();(ut!==i||Ge!==s)&&(ch=null,Eo(i,s)),s=!1;var T=At;e:do try{if(it!==0&&Ve!==null){var S=Ve,P=Hn;switch(it){case 8:Sm(),T=6;break e;case 3:case 2:case 9:case 6:si.current===null&&(s=!0);var $=it;if(it=0,Hn=null,To(i,S,P,$),a&&go){T=0;break e}break;default:$=it,it=0,Hn=null,To(i,S,P,$)}}KA(),T=At;break}catch(J){L_(i,J)}while(!0);return s&&i.shellSuspendCounter++,ms=ca=null,nt=c,X.H=f,X.A=g,Ve===null&&(ut=null,Ge=0,ju()),T}function KA(){for(;Ve!==null;)z_(Ve)}function QA(i,s){var a=nt;nt|=2;var c=U_(),f=B_();ut!==i||Ge!==s?(ch=null,lh=Ye()+500,Eo(i,s)):go=zr(i,s);e:do try{if(it!==0&&Ve!==null){s=Ve;var g=Hn;t:switch(it){case 1:it=0,Hn=null,To(i,s,g,1);break;case 2:case 9:if(Jy(g)){it=0,Hn=null,q_(s);break}s=function(){it!==2&&it!==9||ut!==i||(it=7),Bi(i)},g.then(s,s);break e;case 3:it=7;break e;case 4:it=5;break e;case 7:Jy(g)?(it=0,Hn=null,q_(s)):(it=0,Hn=null,To(i,s,g,7));break;case 5:var T=null;switch(Ve.tag){case 26:T=Ve.memoizedState;case 5:case 27:var S=Ve;if(!T||wE(T)){it=0,Hn=null;var P=S.sibling;if(P!==null)Ve=P;else{var $=S.return;$!==null?(Ve=$,hh($)):Ve=null}break t}}it=0,Hn=null,To(i,s,g,5);break;case 6:it=0,Hn=null,To(i,s,g,6);break;case 8:Sm(),At=6;break e;default:throw Error(r(462))}}XA();break}catch(J){L_(i,J)}while(!0);return ms=ca=null,X.H=c,X.A=f,nt=a,Ve!==null?0:(ut=null,Ge=0,ju(),At)}function XA(){for(;Ve!==null&&!wi();)z_(Ve)}function z_(i){var s=m_(i.alternate,i,bs);i.memoizedProps=i.pendingProps,s===null?hh(i):Ve=s}function q_(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=l_(a,s,s.pendingProps,s.type,void 0,Ge);break;case 11:s=l_(a,s,s.pendingProps,s.type.render,s.ref,Ge);break;case 5:zf(s);default:g_(a,s),s=Ve=Fy(s,bs),s=m_(a,s,bs)}i.memoizedProps=i.pendingProps,s===null?hh(i):Ve=s}function To(i,s,a,c){ms=ca=null,zf(s),ho=null,Ll=0;var f=s.return;try{if(UA(i,f,s,a,Ge)){At=1,nh(i,ei(a,i.current)),Ve=null;return}}catch(g){if(f!==null)throw Ve=f,g;At=1,nh(i,ei(a,i.current)),Ve=null;return}s.flags&32768?(We||c===1?i=!0:go||(Ge&536870912)!==0?i=!1:(sr=i=!0,(c===2||c===9||c===3||c===6)&&(c=si.current,c!==null&&c.tag===13&&(c.flags|=16384))),F_(s,i)):hh(s)}function hh(i){var s=i;do{if((s.flags&32768)!==0){F_(s,sr);return}i=s.return;var a=zA(s.alternate,s,bs);if(a!==null){Ve=a;return}if(s=s.sibling,s!==null){Ve=s;return}Ve=s=i}while(s!==null);At===0&&(At=5)}function F_(i,s){do{var a=qA(i.alternate,i);if(a!==null){a.flags&=32767,Ve=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=a}while(i!==null);At=6,Ve=null}function H_(i,s,a,c,f,g,T,S,P){i.cancelPendingCommit=null;do dh();while(rn!==0);if((nt&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=gf,sl(i,a,g,T,S,P),i===ut&&(Ve=ut=null,Ge=0),vo=s,or=i,_o=a,Tm=g,bm=f,P_=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,eR(Zi,function(){return Q_(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=X.T,X.T=null,f=me.p,me.p=2,T=nt,nt|=4;try{FA(i,s,a)}finally{nt=T,me.p=f,X.T=c}}rn=1,G_(),$_(),Y_()}}function G_(){if(rn===1){rn=0;var i=or,s=vo,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var c=me.p;me.p=2;var f=nt;nt|=4;try{x_(s,i);var g=Lm,T=Oy(i.containerInfo),S=g.focusedElem,P=g.selectionRange;if(T!==S&&S&&S.ownerDocument&&jy(S.ownerDocument.documentElement,S)){if(P!==null&&hf(S)){var $=P.start,J=P.end;if(J===void 0&&(J=$),"selectionStart"in S)S.selectionStart=$,S.selectionEnd=Math.min(J,S.value.length);else{var re=S.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),Ce=S.textContent.length,we=Math.min(P.start,Ce),ot=P.end===void 0?we:Math.min(P.end,Ce);!K.extend&&we>ot&&(T=ot,ot=we,we=T);var B=Dy(S,we),L=Dy(S,ot);if(B&&L&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var H=re.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),we>ot?(K.addRange(H),K.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),K.addRange(H))}}}}for(re=[],K=S;K=K.parentNode;)K.nodeType===1&&re.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var se=re[S];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Sh=!!Vm,Lm=Vm=null}finally{nt=f,me.p=c,X.T=a}}i.current=s,rn=2}}function $_(){if(rn===2){rn=0;var i=or,s=vo,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var c=me.p;me.p=2;var f=nt;nt|=4;try{w_(i,s.alternate,s)}finally{nt=f,me.p=c,X.T=a}}rn=3}}function Y_(){if(rn===4||rn===3){rn=0,Vr();var i=or,s=vo,a=_o,c=P_;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?rn=5:(rn=0,vo=or=null,K_(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ar=null),Va(a),s=s.stateNode,tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(wt,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=X.T,f=me.p,me.p=2,X.T=null;try{for(var g=i.onRecoverableError,T=0;T<c.length;T++){var S=c[T];g(S.value,{componentStack:S.stack})}}finally{X.T=s,me.p=f}}(_o&3)!==0&&dh(),Bi(i),f=i.pendingLanes,(a&4194090)!==0&&(f&42)!==0?i===wm?Yl++:(Yl=0,wm=i):Yl=0,Kl(0)}}function K_(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,xl(s)))}function dh(i){return G_(),$_(),Y_(),Q_()}function Q_(){if(rn!==5)return!1;var i=or,s=Tm;Tm=0;var a=Va(_o),c=X.T,f=me.p;try{me.p=32>a?32:a,X.T=null,a=bm,bm=null;var g=or,T=_o;if(rn=0,vo=or=null,_o=0,(nt&6)!==0)throw Error(r(331));var S=nt;if(nt|=4,j_(g.current),N_(g,g.current,T,a),nt=S,Kl(0,!1),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(wt,g)}catch{}return!0}finally{me.p=f,X.T=c,K_(i,s)}}function X_(i,s,a){s=ei(a,s),s=tm(i.stateNode,s,2),i=Ws(i,s,2),i!==null&&(es(i,2),Bi(i))}function lt(i,s,a){if(i.tag===3)X_(i,i,a);else for(;s!==null;){if(s.tag===3){X_(s,i,a);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ar===null||!ar.has(c))){i=ei(a,i),a=e_(2),c=Ws(s,a,2),c!==null&&(t_(a,c,s,i),es(c,2),Bi(c));break}}s=s.return}}function xm(i,s,a){var c=i.pingCache;if(c===null){c=i.pingCache=new $A;var f=new Set;c.set(s,f)}else f=c.get(s),f===void 0&&(f=new Set,c.set(s,f));f.has(a)||(ym=!0,f.add(a),i=WA.bind(null,i,s,a),s.then(i,i))}function WA(i,s,a){var c=i.pingCache;c!==null&&c.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,ut===i&&(Ge&a)===a&&(At===4||At===3&&(Ge&62914560)===Ge&&300>Ye()-Em?(nt&2)===0&&Eo(i,0):vm|=a,yo===Ge&&(yo=0)),Bi(i)}function W_(i,s){s===0&&(s=il()),i=to(i,s),i!==null&&(es(i,s),Bi(i))}function ZA(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),W_(i,a)}function JA(i,s){var a=0;switch(i.tag){case 13:var c=i.stateNode,f=i.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),W_(i,a)}function eR(i,s){return Us(i,s)}var fh=null,bo=null,Cm=!1,mh=!1,Nm=!1,ga=0;function Bi(i){i!==bo&&i.next===null&&(bo===null?fh=bo=i:bo=bo.next=i),mh=!0,Cm||(Cm=!0,nR())}function Kl(i,s){if(!Nm&&mh){Nm=!0;do for(var a=!1,c=fh;c!==null;){if(i!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var T=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-hn(42|i)+1)-1,g&=f&~(T&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,tE(c,g))}else g=Ge,g=Ma(c,c===ut?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||zr(c,g)||(a=!0,tE(c,g));c=c.next}while(a);Nm=!1}}function tR(){Z_()}function Z_(){mh=Cm=!1;var i=0;ga!==0&&(uR()&&(i=ga),ga=0);for(var s=Ye(),a=null,c=fh;c!==null;){var f=c.next,g=J_(c,s);g===0?(c.next=null,a===null?fh=f:a.next=f,f===null&&(bo=a)):(a=c,(i!==0||(g&3)!==0)&&(mh=!0)),c=f}Kl(i)}function J_(i,s){for(var a=i.suspendedLanes,c=i.pingedLanes,f=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var T=31-hn(g),S=1<<T,P=f[T];P===-1?((S&a)===0||(S&c)!==0)&&(f[T]=tl(S,s)):P<=s&&(i.expiredLanes|=S),g&=~S}if(s=ut,a=Ge,a=Ma(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===s&&(it===2||it===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ui(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||zr(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(c!==null&&ui(c),Va(a)){case 2:case 8:a=Si;break;case 32:a=Zi;break;case 268435456:a=ka;break;default:a=Zi}return c=eE.bind(null,i),a=Us(a,c),i.callbackPriority=s,i.callbackNode=a,s}return c!==null&&c!==null&&ui(c),i.callbackPriority=2,i.callbackNode=null,2}function eE(i,s){if(rn!==0&&rn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(dh()&&i.callbackNode!==a)return null;var c=Ge;return c=Ma(i,i===ut?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:(M_(i,c,s),J_(i,Ye()),i.callbackNode!=null&&i.callbackNode===a?eE.bind(null,i):null)}function tE(i,s){if(dh())return null;M_(i,s,!0)}function nR(){dR(function(){(nt&6)!==0?Us(Bs,tR):Z_()})}function Im(){return ga===0&&(ga=nl()),ga}function nE(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Fa(""+i)}function iE(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function iR(i,s,a,c,f){if(s==="submit"&&a&&a.stateNode===f){var g=nE((f[Ot]||null).action),T=c.submitter;T&&(s=(s=T[Ot]||null)?nE(s.formAction):T.getAttribute("formAction"),s!==null&&(g=s,T=null));var S=new Ha("action","action",null,c,f);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(ga!==0){var P=T?iE(f,T):new FormData(f);Xf(a,{pending:!0,data:P,method:f.method,action:g},null,P)}}else typeof g=="function"&&(S.preventDefault(),P=T?iE(f,T):new FormData(f),Xf(a,{pending:!0,data:P,method:f.method,action:g},g,P))},currentTarget:f}]})}}for(var Dm=0;Dm<pf.length;Dm++){var jm=pf[Dm],sR=jm.toLowerCase(),rR=jm[0].toUpperCase()+jm.slice(1);mi(sR,"on"+rR)}mi(My,"onAnimationEnd"),mi(Vy,"onAnimationIteration"),mi(Ly,"onAnimationStart"),mi("dblclick","onDoubleClick"),mi("focusin","onFocus"),mi("focusout","onBlur"),mi(bA,"onTransitionRun"),mi(wA,"onTransitionStart"),mi(SA,"onTransitionCancel"),mi(Uy,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),di("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),di("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),di("onBeforeInput",["compositionend","keypress","textInput","paste"]),di("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),di("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ql));function sE(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],f=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var T=c.length-1;0<=T;T--){var S=c[T],P=S.instance,$=S.currentTarget;if(S=S.listener,P!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=$;try{g(f)}catch(J){th(J)}f.currentTarget=null,g=P}else for(T=0;T<c.length;T++){if(S=c[T],P=S.instance,$=S.currentTarget,S=S.listener,P!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=$;try{g(f)}catch(J){th(J)}f.currentTarget=null,g=P}}}}function Le(i,s){var a=s[al];a===void 0&&(a=s[al]=new Set);var c=i+"__bubble";a.has(c)||(rE(s,i,2,!1),a.add(c))}function Om(i,s,a){var c=0;s&&(c|=4),rE(a,i,c,s)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Pm(i){if(!i[ph]){i[ph]=!0,ol.forEach(function(a){a!=="selectionchange"&&(aR.has(a)||Om(a,!1,i),Om(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ph]||(s[ph]=!0,Om("selectionchange",!1,s))}}function rE(i,s,a,c){switch(NE(s)){case 2:var f=OR;break;case 8:f=PR;break;default:f=Km}a=f.bind(null,s,a,i),f=void 0,!Zn||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),c?f!==void 0?i.addEventListener(s,a,{capture:!0,passive:f}):i.addEventListener(s,a,!0):f!==void 0?i.addEventListener(s,a,{passive:f}):i.addEventListener(s,a,!1)}function km(i,s,a,c,f){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var T=c.tag;if(T===3||T===4){var S=c.stateNode.containerInfo;if(S===f)break;if(T===4)for(T=c.return;T!==null;){var P=T.tag;if((P===3||P===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;S!==null;){if(T=ts(S),T===null)return;if(P=T.tag,P===5||P===6||P===26||P===27){c=g=T;continue e}S=S.parentNode}}c=c.return}yu(function(){var $=g,J=Wn(a),re=[];e:{var Y=By.get(i);if(Y!==void 0){var K=Ha,Ce=i;switch(i){case"keypress":if(Di(a)===0)break e;case"keydown":case"keyup":K=Xa;break;case"focusin":Ce="focus",K=Ya;break;case"focusout":Ce="blur",K=Ya;break;case"beforeblur":case"afterblur":K=Ya;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Jn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=of;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=Au;break;case My:case Vy:case Ly:K=Ka;break;case Uy:K=xu;break;case"scroll":case"scrollend":K=vu;break;case"wheel":K=Wa;break;case"copy":case"cut":case"paste":K=Qa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=_l;break;case"toggle":case"beforetoggle":K=Nu}var we=(s&4)!==0,ot=!we&&(i==="scroll"||i==="scrollend"),B=we?Y!==null?Y+"Capture":null:Y;we=[];for(var L=$,H;L!==null;){var se=L;if(H=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||H===null||B===null||(se=Qr(L,B),se!=null&&we.push(Xl(L,se,H))),ot)break;L=L.return}0<we.length&&(Y=new K(Y,Ce,null,a,J),re.push({event:Y,listeners:we}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==rs&&(Ce=a.relatedTarget||a.fromElement)&&(ts(Ce)||Ce[Qn]))break e;if((K||Y)&&(Y=J.window===J?J:(Y=J.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(Ce=a.relatedTarget||a.toElement,K=$,Ce=Ce?ts(Ce):null,Ce!==null&&(ot=l(Ce),we=Ce.tag,Ce!==ot||we!==5&&we!==27&&we!==6)&&(Ce=null)):(K=null,Ce=$),K!==Ce)){if(we=Jn,se="onMouseLeave",B="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(we=_l,se="onPointerLeave",B="onPointerEnter",L="pointer"),ot=K==null?Y:xi(K),H=Ce==null?Y:xi(Ce),Y=new we(se,L+"leave",K,a,J),Y.target=ot,Y.relatedTarget=H,se=null,ts(J)===$&&(we=new we(B,L+"enter",Ce,a,J),we.target=H,we.relatedTarget=ot,se=we),ot=se,K&&Ce)t:{for(we=K,B=Ce,L=0,H=we;H;H=wo(H))L++;for(H=0,se=B;se;se=wo(se))H++;for(;0<L-H;)we=wo(we),L--;for(;0<H-L;)B=wo(B),H--;for(;L--;){if(we===B||B!==null&&we===B.alternate)break t;we=wo(we),B=wo(B)}we=null}else we=null;K!==null&&aE(re,Y,K,we,!1),Ce!==null&&ot!==null&&aE(re,ot,Ce,we,!0)}}e:{if(Y=$?xi($):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var _e=Ay;else if(Ft(Y))if(Ry)_e=_A;else{_e=yA;var Me=gA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?$&&dl($.elementType)&&(_e=Ay):_e=vA;if(_e&&(_e=_e(i,$))){us(re,_e,a,J);break e}Me&&Me(i,Y,$),i==="focusout"&&$&&Y.type==="number"&&$.memoizedProps.value!=null&&$s(Y,"number",Y.value)}switch(Me=$?xi($):window,i){case"focusin":(Ft(Me)||Me.contentEditable==="true")&&(Za=Me,df=$,bl=null);break;case"focusout":bl=df=Za=null;break;case"mousedown":ff=!0;break;case"contextmenu":case"mouseup":case"dragend":ff=!1,Py(re,a,J);break;case"selectionchange":if(TA)break;case"keydown":case"keyup":Py(re,a,J)}var Te;if(Pi)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Fe?W(i,a)&&(Ae="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(E&&a.locale!=="ko"&&(Fe||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Fe&&(Te=ml()):(Ii=J,Ys="value"in Ii?Ii.value:Ii.textContent,Fe=!0)),Me=gh($,Ae),0<Me.length&&(Ae=new yl(Ae,i,null,a,J),re.push({event:Ae,listeners:Me}),Te?Ae.data=Te:(Te=fe(a),Te!==null&&(Ae.data=Te)))),(Te=v?qt(i,a):He(i,a))&&(Ae=gh($,"onBeforeInput"),0<Ae.length&&(Me=new yl("onBeforeInput","beforeinput",null,a,J),re.push({event:Me,listeners:Ae}),Me.data=Te)),iR(re,i,$,a,J)}sE(re,s)})}function Xl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function gh(i,s){for(var a=s+"Capture",c=[];i!==null;){var f=i,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=Qr(i,a),f!=null&&c.unshift(Xl(i,f,g)),f=Qr(i,s),f!=null&&c.push(Xl(i,f,g))),i.tag===3)return c;i=i.return}return[]}function wo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function aE(i,s,a,c,f){for(var g=s._reactName,T=[];a!==null&&a!==c;){var S=a,P=S.alternate,$=S.stateNode;if(S=S.tag,P!==null&&P===c)break;S!==5&&S!==26&&S!==27||$===null||(P=$,f?($=Qr(a,g),$!=null&&T.unshift(Xl(a,$,P))):f||($=Qr(a,g),$!=null&&T.push(Xl(a,$,P)))),a=a.return}T.length!==0&&i.push({event:s,listeners:T})}var oR=/\r\n?/g,lR=/\u0000|\uFFFD/g;function oE(i){return(typeof i=="string"?i:""+i).replace(oR,`
`).replace(lR,"")}function lE(i,s){return s=oE(s),oE(i)===s}function yh(){}function at(i,s,a,c,f,g){switch(a){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||Xn(i,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&Xn(i,""+c);break;case"className":Ci(i,"class",c);break;case"tabIndex":Ci(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Ci(i,a,c);break;case"style":hl(i,c,g);break;case"data":if(s!=="object"){Ci(i,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fa(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(s!=="input"&&at(i,s,"name",f.name,f,null),at(i,s,"formEncType",f.formEncType,f,null),at(i,s,"formMethod",f.formMethod,f,null),at(i,s,"formTarget",f.formTarget,f,null)):(at(i,s,"encType",f.encType,f,null),at(i,s,"method",f.method,f,null),at(i,s,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=Fa(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=yh);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=Fa(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":Le("beforetoggle",i),Le("toggle",i),Gs(i,"popover",c);break;case"xlinkActuate":tn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":tn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":tn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":tn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":tn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":tn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":tn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":tn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":tn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Gs(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=rf.get(a)||a,Gs(i,a,c))}}function Mm(i,s,a,c,f,g){switch(a){case"style":hl(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(r(60));i.innerHTML=a}}break;case"children":typeof c=="string"?Xn(i,c):(typeof c=="number"||typeof c=="bigint")&&Xn(i,""+c);break;case"onScroll":c!=null&&Le("scroll",i);break;case"onScrollEnd":c!=null&&Le("scrollend",i);break;case"onClick":c!=null&&(i.onclick=yh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!La.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),s=a.slice(2,f?a.length-7:void 0),g=i[Ot]||null,g=g!=null?g[a]:null,typeof g=="function"&&i.removeEventListener(s,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,c,f);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):Gs(i,a,c)}}}function an(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Le("error",i),Le("load",i);var c=!1,f=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:at(i,s,g,T,a,null)}}f&&at(i,s,"srcSet",a.srcSet,a,null),c&&at(i,s,"src",a.src,a,null);return;case"input":Le("invalid",i);var S=g=T=f=null,P=null,$=null;for(c in a)if(a.hasOwnProperty(c)){var J=a[c];if(J!=null)switch(c){case"name":f=J;break;case"type":T=J;break;case"checked":P=J;break;case"defaultChecked":$=J;break;case"value":g=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:at(i,s,c,J,a,null)}}$r(i,g,S,P,$,T,f,!1),qa(i);return;case"select":Le("invalid",i),c=T=g=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":g=S;break;case"defaultValue":T=S;break;case"multiple":c=S;default:at(i,s,f,S,a,null)}s=g,a=T,i.multiple=!!c,s!=null?ss(i,!!c,s,!1):a!=null&&ss(i,!!c,a,!0);return;case"textarea":Le("invalid",i),g=f=c=null;for(T in a)if(a.hasOwnProperty(T)&&(S=a[T],S!=null))switch(T){case"value":c=S;break;case"defaultValue":f=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:at(i,s,T,S,a,null)}Yr(i,c,f,g),qa(i);return;case"option":for(P in a)if(a.hasOwnProperty(P)&&(c=a[P],c!=null))switch(P){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:at(i,s,P,c,a,null)}return;case"dialog":Le("beforetoggle",i),Le("toggle",i),Le("cancel",i),Le("close",i);break;case"iframe":case"object":Le("load",i);break;case"video":case"audio":for(c=0;c<Ql.length;c++)Le(Ql[c],i);break;case"image":Le("error",i),Le("load",i);break;case"details":Le("toggle",i);break;case"embed":case"source":case"link":Le("error",i),Le("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in a)if(a.hasOwnProperty($)&&(c=a[$],c!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:at(i,s,$,c,a,null)}return;default:if(dl(s)){for(J in a)a.hasOwnProperty(J)&&(c=a[J],c!==void 0&&Mm(i,s,J,c,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(c=a[S],c!=null&&at(i,s,S,c,a,null))}function cR(i,s,a,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,T=null,S=null,P=null,$=null,J=null;for(K in a){var re=a[K];if(a.hasOwnProperty(K)&&re!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":P=re;default:c.hasOwnProperty(K)||at(i,s,K,null,c,re)}}for(var Y in c){var K=c[Y];if(re=a[Y],c.hasOwnProperty(Y)&&(K!=null||re!=null))switch(Y){case"type":g=K;break;case"name":f=K;break;case"checked":$=K;break;case"defaultChecked":J=K;break;case"value":T=K;break;case"defaultValue":S=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,s));break;default:K!==re&&at(i,s,Y,K,c,re)}}Un(i,T,S,P,$,J,g,f);return;case"select":K=T=S=Y=null;for(g in a)if(P=a[g],a.hasOwnProperty(g)&&P!=null)switch(g){case"value":break;case"multiple":K=P;default:c.hasOwnProperty(g)||at(i,s,g,null,c,P)}for(f in c)if(g=c[f],P=a[f],c.hasOwnProperty(f)&&(g!=null||P!=null))switch(f){case"value":Y=g;break;case"defaultValue":S=g;break;case"multiple":T=g;default:g!==P&&at(i,s,f,g,c,P)}s=S,a=T,c=K,Y!=null?ss(i,!!a,Y,!1):!!c!=!!a&&(s!=null?ss(i,!!a,s,!0):ss(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:at(i,s,S,null,c,f)}for(T in c)if(f=c[T],g=a[T],c.hasOwnProperty(T)&&(f!=null||g!=null))switch(T){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==g&&at(i,s,T,f,c,g)}st(i,Y,K);return;case"option":for(var Ce in a)if(Y=a[Ce],a.hasOwnProperty(Ce)&&Y!=null&&!c.hasOwnProperty(Ce))switch(Ce){case"selected":i.selected=!1;break;default:at(i,s,Ce,null,c,Y)}for(P in c)if(Y=c[P],K=a[P],c.hasOwnProperty(P)&&Y!==K&&(Y!=null||K!=null))switch(P){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:at(i,s,P,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)Y=a[we],a.hasOwnProperty(we)&&Y!=null&&!c.hasOwnProperty(we)&&at(i,s,we,null,c,Y);for($ in c)if(Y=c[$],K=a[$],c.hasOwnProperty($)&&Y!==K&&(Y!=null||K!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,s));break;default:at(i,s,$,Y,c,K)}return;default:if(dl(s)){for(var ot in a)Y=a[ot],a.hasOwnProperty(ot)&&Y!==void 0&&!c.hasOwnProperty(ot)&&Mm(i,s,ot,void 0,c,Y);for(J in c)Y=c[J],K=a[J],!c.hasOwnProperty(J)||Y===K||Y===void 0&&K===void 0||Mm(i,s,J,Y,c,K);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!c.hasOwnProperty(B)&&at(i,s,B,null,c,Y);for(re in c)Y=c[re],K=a[re],!c.hasOwnProperty(re)||Y===K||Y==null&&K==null||at(i,s,re,Y,c,K)}var Vm=null,Lm=null;function vh(i){return i.nodeType===9?i:i.ownerDocument}function cE(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function uE(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function Um(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Bm=null;function uR(){var i=window.event;return i&&i.type==="popstate"?i===Bm?!1:(Bm=i,!0):(Bm=null,!1)}var hE=typeof setTimeout=="function"?setTimeout:void 0,hR=typeof clearTimeout=="function"?clearTimeout:void 0,dE=typeof Promise=="function"?Promise:void 0,dR=typeof queueMicrotask=="function"?queueMicrotask:typeof dE<"u"?function(i){return dE.resolve(null).then(i).catch(fR)}:hE;function fR(i){setTimeout(function(){throw i})}function cr(i){return i==="head"}function fE(i,s){var a=s,c=0,f=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<c&&8>c){a=c;var T=i.ownerDocument;if(a&1&&Wl(T.documentElement),a&2&&Wl(T.body),a&4)for(a=T.head,Wl(a),T=a.firstChild;T;){var S=T.nextSibling,P=T.nodeName;T[qr]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=S}}if(f===0){i.removeChild(g),rc(s);return}f--}else a==="$"||a==="$?"||a==="$!"?f++:c=a.charCodeAt(0)-48;else c=0;a=g}while(a);rc(s)}function zm(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":zm(a),Hs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function mR(i,s,a,c){for(;i.nodeType===1;){var f=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[qr])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function pR(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=gi(i.nextSibling),i===null))return null;return i}function qm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function gR(i,s){var a=i.ownerDocument;if(i.data!=="$?"||a.readyState==="complete")s();else{var c=function(){s(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function gi(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return i}var Fm=null;function mE(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"){if(s===0)return i;s--}else a==="/$"&&s++}i=i.previousSibling}return null}function pE(i,s,a){switch(s=vh(a),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Wl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Hs(i)}var ai=new Map,gE=new Set;function _h(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ws=me.d;me.d={f:yR,r:vR,D:_R,C:ER,L:TR,m:bR,X:SR,S:wR,M:AR};function yR(){var i=ws.f(),s=uh();return i||s}function vR(i){var s=Ri(i);s!==null&&s.tag===5&&s.type==="form"?Mv(s):ws.r(i)}var So=typeof document>"u"?null:document;function yE(i,s,a){var c=So;if(c&&typeof s=="string"&&s){var f=Pt(s);f='link[rel="'+i+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),gE.has(f)||(gE.add(f),i={rel:i,crossOrigin:a,href:s},c.querySelector(f)===null&&(s=c.createElement("link"),an(s,"link",i),Nt(s),c.head.appendChild(s)))}}function _R(i){ws.D(i),yE("dns-prefetch",i,null)}function ER(i,s){ws.C(i,s),yE("preconnect",i,s)}function TR(i,s,a){ws.L(i,s,a);var c=So;if(c&&i&&s){var f='link[rel="preload"][as="'+Pt(s)+'"]';s==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Pt(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Pt(a.imageSizes)+'"]')):f+='[href="'+Pt(i)+'"]';var g=f;switch(s){case"style":g=Ao(i);break;case"script":g=Ro(i)}ai.has(g)||(i=_({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),ai.set(g,i),c.querySelector(f)!==null||s==="style"&&c.querySelector(Zl(g))||s==="script"&&c.querySelector(Jl(g))||(s=c.createElement("link"),an(s,"link",i),Nt(s),c.head.appendChild(s)))}}function bR(i,s){ws.m(i,s);var a=So;if(a&&i){var c=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Pt(c)+'"][href="'+Pt(i)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Ro(i)}if(!ai.has(g)&&(i=_({rel:"modulepreload",href:i},s),ai.set(g,i),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Jl(g)))return}c=a.createElement("link"),an(c,"link",i),Nt(c),a.head.appendChild(c)}}}function wR(i,s,a){ws.S(i,s,a);var c=So;if(c&&i){var f=En(c).hoistableStyles,g=Ao(i);s=s||"default";var T=f.get(g);if(!T){var S={loading:0,preload:null};if(T=c.querySelector(Zl(g)))S.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":s},a),(a=ai.get(g))&&Hm(i,a);var P=T=c.createElement("link");Nt(P),an(P,"link",i),P._p=new Promise(function($,J){P.onload=$,P.onerror=J}),P.addEventListener("load",function(){S.loading|=1}),P.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Eh(T,s,c)}T={type:"stylesheet",instance:T,count:1,state:S},f.set(g,T)}}}function SR(i,s){ws.X(i,s);var a=So;if(a&&i){var c=En(a).hoistableScripts,f=Ro(i),g=c.get(f);g||(g=a.querySelector(Jl(f)),g||(i=_({src:i,async:!0},s),(s=ai.get(f))&&Gm(i,s),g=a.createElement("script"),Nt(g),an(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function AR(i,s){ws.M(i,s);var a=So;if(a&&i){var c=En(a).hoistableScripts,f=Ro(i),g=c.get(f);g||(g=a.querySelector(Jl(f)),g||(i=_({src:i,async:!0,type:"module"},s),(s=ai.get(f))&&Gm(i,s),g=a.createElement("script"),Nt(g),an(g,"link",i),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function vE(i,s,a,c){var f=(f=de.current)?_h(f):null;if(!f)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=Ao(a.href),a=En(f).hoistableStyles,c=a.get(s),c||(c={type:"style",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=Ao(a.href);var g=En(f).hoistableStyles,T=g.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,T),(g=f.querySelector(Zl(i)))&&!g._p&&(T.instance=g,T.state.loading=5),ai.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ai.set(i,a),g||RR(f,i,a,T.state))),s&&c===null)throw Error(r(528,""));return T}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Ro(a),a=En(f).hoistableScripts,c=a.get(s),c||(c={type:"script",instance:null,count:0,state:null},a.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function Ao(i){return'href="'+Pt(i)+'"'}function Zl(i){return'link[rel="stylesheet"]['+i+"]"}function _E(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function RR(i,s,a,c){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=i.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),an(s,"link",a),Nt(s),i.head.appendChild(s))}function Ro(i){return'[src="'+Pt(i)+'"]'}function Jl(i){return"script[async]"+i}function EE(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var c=i.querySelector('style[data-href~="'+Pt(a.href)+'"]');if(c)return s.instance=c,Nt(c),c;var f=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Nt(c),an(c,"style",f),Eh(c,a.precedence,i),s.instance=c;case"stylesheet":f=Ao(a.href);var g=i.querySelector(Zl(f));if(g)return s.state.loading|=4,s.instance=g,Nt(g),g;c=_E(a),(f=ai.get(f))&&Hm(c,f),g=(i.ownerDocument||i).createElement("link"),Nt(g);var T=g;return T._p=new Promise(function(S,P){T.onload=S,T.onerror=P}),an(g,"link",c),s.state.loading|=4,Eh(g,a.precedence,i),s.instance=g;case"script":return g=Ro(a.src),(f=i.querySelector(Jl(g)))?(s.instance=f,Nt(f),f):(c=a,(f=ai.get(g))&&(c=_({},a),Gm(c,f)),i=i.ownerDocument||i,f=i.createElement("script"),Nt(f),an(f,"link",c),i.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Eh(c,a.precedence,i));return s.instance}function Eh(i,s,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,T=0;T<c.length;T++){var S=c[T];if(S.dataset.precedence===s)g=S;else if(g!==f)break}g?g.parentNode.insertBefore(i,g.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function Hm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function Gm(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Th=null;function TE(i,s,a){if(Th===null){var c=new Map,f=Th=new Map;f.set(a,c)}else f=Th,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),f=0;f<a.length;f++){var g=a[f];if(!(g[qr]||g[zt]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(s)||"";T=i+T;var S=c.get(T);S?S.push(g):c.set(T,[g])}}return c}function bE(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function xR(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function wE(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var ec=null;function CR(){}function NR(i,s,a){if(ec===null)throw Error(r(475));var c=ec;if(s.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Ao(a.href),g=i.querySelector(Zl(f));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=bh.bind(c),i.then(c,c)),s.state.loading|=4,s.instance=g,Nt(g);return}g=i.ownerDocument||i,a=_E(a),(f=ai.get(f))&&Hm(a,f),g=g.createElement("link"),Nt(g);var T=g;T._p=new Promise(function(S,P){T.onload=S,T.onerror=P}),an(g,"link",a),s.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(s,i),(i=s.state.preload)&&(s.state.loading&3)===0&&(c.count++,s=bh.bind(c),i.addEventListener("load",s),i.addEventListener("error",s))}}function IR(){if(ec===null)throw Error(r(475));var i=ec;return i.stylesheets&&i.count===0&&$m(i,i.stylesheets),0<i.count?function(s){var a=setTimeout(function(){if(i.stylesheets&&$m(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=s,function(){i.unsuspend=null,clearTimeout(a)}}:null}function bh(){if(this.count--,this.count===0){if(this.stylesheets)$m(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var wh=null;function $m(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,wh=new Map,s.forEach(DR,i),wh=null,bh.call(i))}function DR(i,s){if(!(s.state.loading&4)){var a=wh.get(i);if(a)var c=a.get(null);else{a=new Map,wh.set(i,a);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var T=f[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),c=T)}c&&a.set(null,c)}f=s.instance,T=f.getAttribute("data-precedence"),g=a.get(T)||c,g===c&&a.set(null,f),a.set(T,f),this.count++,c=bh.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),s.state.loading|=4}}var tc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:Ee,_currentValue2:Ee,_threadCount:0};function jR(i,s,a,c,f,g,T,S){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ji(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ji(0),this.hiddenUpdates=Ji(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function SE(i,s,a,c,f,g,T,S,P,$,J,re){return i=new jR(i,s,a,T,S,P,$,re),s=1,g===!0&&(s|=24),g=zn(3,null,null,s),i.current=g,g.stateNode=i,s=xf(),s.refCount++,i.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:a,cache:s},Df(g),i}function AE(i){return i?(i=no,i):no}function RE(i,s,a,c,f,g){f=AE(f),c.context===null?c.context=f:c.pendingContext=f,c=Xs(s),c.payload={element:a},g=g===void 0?null:g,g!==null&&(c.callback=g),a=Ws(i,c,s),a!==null&&($n(a,i,s),Dl(a,i,s))}function xE(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function Ym(i,s){xE(i,s),(i=i.alternate)&&xE(i,s)}function CE(i){if(i.tag===13){var s=to(i,67108864);s!==null&&$n(s,i,67108864),Ym(i,67108864)}}var Sh=!0;function OR(i,s,a,c){var f=X.T;X.T=null;var g=me.p;try{me.p=2,Km(i,s,a,c)}finally{me.p=g,X.T=f}}function PR(i,s,a,c){var f=X.T;X.T=null;var g=me.p;try{me.p=8,Km(i,s,a,c)}finally{me.p=g,X.T=f}}function Km(i,s,a,c){if(Sh){var f=Qm(c);if(f===null)km(i,s,c,Ah,a),IE(i,c);else if(MR(f,i,s,a,c))c.stopPropagation();else if(IE(i,c),s&4&&-1<kR.indexOf(i)){for(;f!==null;){var g=Ri(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=hi(g.pendingLanes);if(T!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;T;){var P=1<<31-hn(T);S.entanglements[1]|=P,T&=~P}Bi(g),(nt&6)===0&&(lh=Ye()+500,Kl(0))}}break;case 13:S=to(g,2),S!==null&&$n(S,g,2),uh(),Ym(g,2)}if(g=Qm(c),g===null&&km(i,s,c,Ah,a),g===f)break;f=g}f!==null&&c.stopPropagation()}else km(i,s,c,null,a)}}function Qm(i){return i=Wn(i),Xm(i)}var Ah=null;function Xm(i){if(Ah=null,i=ts(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=d(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Ah=i,null}function NE(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(je()){case Bs:return 2;case Si:return 8;case Zi:case Jd:return 32;case ka:return 268435456;default:return 32}default:return 32}}var Wm=!1,ur=null,hr=null,dr=null,nc=new Map,ic=new Map,fr=[],kR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function IE(i,s){switch(i){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":dr=null;break;case"pointerover":case"pointerout":nc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ic.delete(s.pointerId)}}function sc(i,s,a,c,f,g){return i===null||i.nativeEvent!==g?(i={blockedOn:s,domEventName:a,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},s!==null&&(s=Ri(s),s!==null&&CE(s)),i):(i.eventSystemFlags|=c,s=i.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),i)}function MR(i,s,a,c,f){switch(s){case"focusin":return ur=sc(ur,i,s,a,c,f),!0;case"dragenter":return hr=sc(hr,i,s,a,c,f),!0;case"mouseover":return dr=sc(dr,i,s,a,c,f),!0;case"pointerover":var g=f.pointerId;return nc.set(g,sc(nc.get(g)||null,i,s,a,c,f)),!0;case"gotpointercapture":return g=f.pointerId,ic.set(g,sc(ic.get(g)||null,i,s,a,c,f)),!0}return!1}function DE(i){var s=ts(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=d(a),s!==null){i.blockedOn=s,uu(i.priority,function(){if(a.tag===13){var c=Gn();c=zs(c);var f=to(a,c);f!==null&&$n(f,a,c),Ym(a,c)}});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Rh(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Qm(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);rs=c,a.target.dispatchEvent(c),rs=null}else return s=Ri(a),s!==null&&CE(s),i.blockedOn=a,!1;s.shift()}return!0}function jE(i,s,a){Rh(i)&&a.delete(s)}function VR(){Wm=!1,ur!==null&&Rh(ur)&&(ur=null),hr!==null&&Rh(hr)&&(hr=null),dr!==null&&Rh(dr)&&(dr=null),nc.forEach(jE),ic.forEach(jE)}function xh(i,s){i.blockedOn===s&&(i.blockedOn=null,Wm||(Wm=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,VR)))}var Ch=null;function OE(i){Ch!==i&&(Ch=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ch===i&&(Ch=null);for(var s=0;s<i.length;s+=3){var a=i[s],c=i[s+1],f=i[s+2];if(typeof c!="function"){if(Xm(c||a)===null)continue;break}var g=Ri(a);g!==null&&(i.splice(s,3),s-=3,Xf(g,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function rc(i){function s(P){return xh(P,i)}ur!==null&&xh(ur,i),hr!==null&&xh(hr,i),dr!==null&&xh(dr,i),nc.forEach(s),ic.forEach(s);for(var a=0;a<fr.length;a++){var c=fr[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<fr.length&&(a=fr[0],a.blockedOn===null);)DE(a),a.blockedOn===null&&fr.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],T=f[Ot]||null;if(typeof g=="function")T||OE(a);else if(T){var S=null;if(g&&g.hasAttribute("formAction")){if(f=g,T=g[Ot]||null)S=T.formAction;else if(Xm(f)!==null)continue}else S=T.action;typeof S=="function"?a[c+1]=S:(a.splice(c,3),c-=3),OE(a)}}}function Zm(i){this._internalRoot=i}Nh.prototype.render=Zm.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var a=s.current,c=Gn();RE(a,c,i,s,null,null)},Nh.prototype.unmount=Zm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;RE(i.current,2,null,i,null,null),uh(),s[Qn]=null}};function Nh(i){this._internalRoot=i}Nh.prototype.unstable_scheduleHydration=function(i){if(i){var s=qs();i={blockedOn:null,target:i,priority:s};for(var a=0;a<fr.length&&s!==0&&s<fr[a].priority;a++);fr.splice(a,0,i),a===0&&DE(i)}};var PE=e.version;if(PE!=="19.1.1")throw Error(r(527,PE,"19.1.1"));me.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=y(s),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var LR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ih.isDisabled&&Ih.supportsFiber)try{wt=Ih.inject(LR),tt=Ih}catch{}}return oc.createRoot=function(i,s){if(!o(i))throw Error(r(299));var a=!1,c="",f=Xv,g=Wv,T=Zv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(T=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=SE(i,1,!1,null,null,a,c,f,g,T,S,null),i[Qn]=s.current,Pm(i),new Zm(s)},oc.hydrateRoot=function(i,s,a){if(!o(i))throw Error(r(299));var c=!1,f="",g=Xv,T=Wv,S=Zv,P=null,$=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(P=a.unstable_transitionCallbacks),a.formState!==void 0&&($=a.formState)),s=SE(i,1,!0,s,a??null,c,f,g,T,S,P,$),s.context=AE(null),a=s.current,c=Gn(),c=zs(c),f=Xs(c),f.callback=null,Ws(a,f,c),a=c,s.current.lanes=a,es(s,a),Bi(s),i[Qn]=s.current,Pm(i),new Nh(s)},oc.version="19.1.1",oc}var HE;function KR(){if(HE)return tp.exports;HE=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),tp.exports=YR(),tp.exports}var QR=KR();const XR=Kb(QR);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var GE="popstate";function WR(n={}){function e(r,o){let{pathname:l,search:d,hash:m}=r.location;return Np("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(r,o){return typeof o=="string"?o:Ic(o)}return JR(e,t,null,n)}function Et(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function vi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZR(){return Math.random().toString(36).substring(2,10)}function $E(n,e){return{usr:n.state,key:n.key,idx:e}}function Np(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ho(e):e,state:t,key:e&&e.key||r||ZR()}}function Ic({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ho(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function JR(n,e,t,r={}){let{window:o=document.defaultView,v5Compat:l=!1}=r,d=o.history,m="POP",y=null,p=_();p==null&&(p=0,d.replaceState({...d.state,idx:p},""));function _(){return(d.state||{idx:null}).idx}function b(){m="POP";let j=_(),U=j==null?null:j-p;p=j,y&&y({action:m,location:z.location,delta:U})}function w(j,U){m="PUSH";let G=Np(z.location,j,U);p=_()+1;let Q=$E(G,p),ie=z.createHref(G);try{d.pushState(Q,"",ie)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;o.location.assign(ie)}l&&y&&y({action:m,location:z.location,delta:1})}function I(j,U){m="REPLACE";let G=Np(z.location,j,U);p=_();let Q=$E(G,p),ie=z.createHref(G);d.replaceState(Q,"",ie),l&&y&&y({action:m,location:z.location,delta:0})}function M(j){return ex(j)}let z={get action(){return m},get location(){return n(o,d)},listen(j){if(y)throw new Error("A history only accepts one active listener");return o.addEventListener(GE,b),y=j,()=>{o.removeEventListener(GE,b),y=null}},createHref(j){return e(o,j)},createURL:M,encodeLocation(j){let U=M(j);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:w,replace:I,go(j){return d.go(j)}};return z}function ex(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Et(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Ic(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Qb(n,e,t="/"){return tx(n,e,t,!1)}function tx(n,e,t,r){let o=typeof e=="string"?Ho(e):e,l=Is(o.pathname||"/",t);if(l==null)return null;let d=Xb(n);nx(d);let m=null;for(let y=0;m==null&&y<d.length;++y){let p=fx(l);m=hx(d[y],p,r)}return m}function Xb(n,e=[],t=[],r="",o=!1){let l=(d,m,y=o,p)=>{let _={relativePath:p===void 0?d.path||"":p,caseSensitive:d.caseSensitive===!0,childrenIndex:m,route:d};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(r)&&y)return;Et(_.relativePath.startsWith(r),`Absolute route path "${_.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(r.length)}let b=xs([r,_.relativePath]),w=t.concat(_);d.children&&d.children.length>0&&(Et(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Xb(d.children,e,w,b,y)),!(d.path==null&&!d.index)&&e.push({path:b,score:cx(b,d.index),routesMeta:w})};return n.forEach((d,m)=>{if(d.path===""||!d.path?.includes("?"))l(d,m);else for(let y of Wb(d.path))l(d,m,!0,y)}),e}function Wb(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return o?[l,""]:[l];let d=Wb(r.join("/")),m=[];return m.push(...d.map(y=>y===""?l:[l,y].join("/"))),o&&m.push(...d),m.map(y=>n.startsWith("/")&&y===""?"/":y)}function nx(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:ux(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var ix=/^:[\w-]+$/,sx=3,rx=2,ax=1,ox=10,lx=-2,YE=n=>n==="*";function cx(n,e){let t=n.split("/"),r=t.length;return t.some(YE)&&(r+=lx),e&&(r+=rx),t.filter(o=>!YE(o)).reduce((o,l)=>o+(ix.test(l)?sx:l===""?ax:ox),r)}function ux(n,e){return n.length===e.length&&n.slice(0,-1).every((r,o)=>r===e[o])?n[n.length-1]-e[e.length-1]:0}function hx(n,e,t=!1){let{routesMeta:r}=n,o={},l="/",d=[];for(let m=0;m<r.length;++m){let y=r[m],p=m===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",b=ed({path:y.relativePath,caseSensitive:y.caseSensitive,end:p},_),w=y.route;if(!b&&p&&t&&!r[r.length-1].route.index&&(b=ed({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},_)),!b)return null;Object.assign(o,b.params),d.push({params:o,pathname:xs([l,b.pathname]),pathnameBase:yx(xs([l,b.pathnameBase])),route:w}),b.pathnameBase!=="/"&&(l=xs([l,b.pathnameBase]))}return d}function ed(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=dx(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:r.reduce((p,{paramName:_,isOptional:b},w)=>{if(_==="*"){let M=m[w]||"";d=l.slice(0,l.length-M.length).replace(/(.)\/+$/,"$1")}const I=m[w];return b&&!I?p[_]=void 0:p[_]=(I||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:d,pattern:n}}function dx(n,e=!1,t=!0){vi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,y)=>(r.push({paramName:m,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),r]}function fx(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Is(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function mx(n,e="/"){let{pathname:t,search:r="",hash:o=""}=typeof n=="string"?Ho(n):n;return{pathname:t?t.startsWith("/")?t:px(t,e):e,search:vx(r),hash:_x(o)}}function px(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function rp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function gx(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ug(n){let e=gx(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function hg(n,e,t,r=!1){let o;typeof n=="string"?o=Ho(n):(o={...n},Et(!o.pathname||!o.pathname.includes("?"),rp("?","pathname","search",o)),Et(!o.pathname||!o.pathname.includes("#"),rp("#","pathname","hash",o)),Et(!o.search||!o.search.includes("#"),rp("#","search","hash",o)));let l=n===""||o.pathname==="",d=l?"/":o.pathname,m;if(d==null)m=t;else{let b=e.length-1;if(!r&&d.startsWith("..")){let w=d.split("/");for(;w[0]==="..";)w.shift(),b-=1;o.pathname=w.join("/")}m=b>=0?e[b]:"/"}let y=mx(o,m),p=d&&d!=="/"&&d.endsWith("/"),_=(l||d===".")&&t.endsWith("/");return!y.pathname.endsWith("/")&&(p||_)&&(y.pathname+="/"),y}var xs=n=>n.join("/").replace(/\/\/+/g,"/"),yx=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vx=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_x=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Ex(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Zb=["POST","PUT","PATCH","DELETE"];new Set(Zb);var Tx=["GET",...Zb];new Set(Tx);var Go=q.createContext(null);Go.displayName="DataRouter";var wd=q.createContext(null);wd.displayName="DataRouterState";q.createContext(!1);var Jb=q.createContext({isTransitioning:!1});Jb.displayName="ViewTransition";var bx=q.createContext(new Map);bx.displayName="Fetchers";var wx=q.createContext(null);wx.displayName="Await";var Ei=q.createContext(null);Ei.displayName="Navigation";var Fc=q.createContext(null);Fc.displayName="Location";var Ti=q.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var dg=q.createContext(null);dg.displayName="RouteError";function Sx(n,{relative:e}={}){Et($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=q.useContext(Ei),{hash:o,pathname:l,search:d}=Hc(n,{relative:e}),m=l;return t!=="/"&&(m=l==="/"?t:xs([t,l])),r.createHref({pathname:m,search:d,hash:o})}function $o(){return q.useContext(Fc)!=null}function Xi(){return Et($o(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Fc).location}var ew="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tw(n){q.useContext(Ei).static||q.useLayoutEffect(n)}function Yo(){let{isDataRoute:n}=q.useContext(Ti);return n?Ux():Ax()}function Ax(){Et($o(),"useNavigate() may be used only in the context of a <Router> component.");let n=q.useContext(Go),{basename:e,navigator:t}=q.useContext(Ei),{matches:r}=q.useContext(Ti),{pathname:o}=Xi(),l=JSON.stringify(ug(r)),d=q.useRef(!1);return tw(()=>{d.current=!0}),q.useCallback((y,p={})=>{if(vi(d.current,ew),!d.current)return;if(typeof y=="number"){t.go(y);return}let _=hg(y,JSON.parse(l),o,p.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:xs([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,o,n])}var Rx=q.createContext(null);function xx(n){let e=q.useContext(Ti).outlet;return e&&q.createElement(Rx.Provider,{value:n},e)}function Hc(n,{relative:e}={}){let{matches:t}=q.useContext(Ti),{pathname:r}=Xi(),o=JSON.stringify(ug(t));return q.useMemo(()=>hg(n,JSON.parse(o),r,e==="path"),[n,o,r,e])}function Cx(n,e){return nw(n,e)}function nw(n,e,t,r,o){Et($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=q.useContext(Ei),{matches:d}=q.useContext(Ti),m=d[d.length-1],y=m?m.params:{},p=m?m.pathname:"/",_=m?m.pathnameBase:"/",b=m&&m.route;{let G=b&&b.path||"";iw(p,!b||G.endsWith("*")||G.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${G}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${G}"> to <Route path="${G==="/"?"*":`${G}/*`}">.`)}let w=Xi(),I;if(e){let G=typeof e=="string"?Ho(e):e;Et(_==="/"||G.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${G.pathname}" was given in the \`location\` prop.`),I=G}else I=w;let M=I.pathname||"/",z=M;if(_!=="/"){let G=_.replace(/^\//,"").split("/");z="/"+M.replace(/^\//,"").split("/").slice(G.length).join("/")}let j=Qb(n,{pathname:z});vi(b||j!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),vi(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=Ox(j&&j.map(G=>Object.assign({},G,{params:Object.assign({},y,G.params),pathname:xs([_,l.encodeLocation?l.encodeLocation(G.pathname).pathname:G.pathname]),pathnameBase:G.pathnameBase==="/"?_:xs([_,l.encodeLocation?l.encodeLocation(G.pathnameBase).pathname:G.pathnameBase])})),d,t,r,o);return e&&U?q.createElement(Fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},U):U}function Nx(){let n=Lx(),e=Ex(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},d=null;return console.error("Error handled by React Router default ErrorBoundary:",n),d=q.createElement(q.Fragment,null,q.createElement("p",null,"💿 Hey developer 👋"),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,d)}var Ix=q.createElement(Nx,null),Dx=class extends q.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.unstable_onError?this.props.unstable_onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?q.createElement(Ti.Provider,{value:this.props.routeContext},q.createElement(dg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jx({routeContext:n,match:e,children:t}){let r=q.useContext(Go);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(Ti.Provider,{value:n},t)}function Ox(n,e=[],t=null,r=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,d=t?.errors;if(d!=null){let p=l.findIndex(_=>_.route.id&&d?.[_.route.id]!==void 0);Et(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let m=!1,y=-1;if(t)for(let p=0;p<l.length;p++){let _=l[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(y=p),_.route.id){let{loaderData:b,errors:w}=t,I=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!w||w[_.route.id]===void 0);if(_.route.lazy||I){m=!0,y>=0?l=l.slice(0,y+1):l=[l[0]];break}}}return l.reduceRight((p,_,b)=>{let w,I=!1,M=null,z=null;t&&(w=d&&_.route.id?d[_.route.id]:void 0,M=_.route.errorElement||Ix,m&&(y<0&&b===0?(iw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,z=null):y===b&&(I=!0,z=_.route.hydrateFallbackElement||null)));let j=e.concat(l.slice(0,b+1)),U=()=>{let G;return w?G=M:I?G=z:_.route.Component?G=q.createElement(_.route.Component,null):_.route.element?G=_.route.element:G=p,q.createElement(jx,{match:_,routeContext:{outlet:p,matches:j,isDataRoute:t!=null},children:G})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?q.createElement(Dx,{location:t.location,revalidation:t.revalidation,component:M,error:w,children:U(),routeContext:{outlet:null,matches:j,isDataRoute:!0},unstable_onError:r}):U()},null)}function fg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Px(n){let e=q.useContext(Go);return Et(e,fg(n)),e}function kx(n){let e=q.useContext(wd);return Et(e,fg(n)),e}function Mx(n){let e=q.useContext(Ti);return Et(e,fg(n)),e}function mg(n){let e=Mx(n),t=e.matches[e.matches.length-1];return Et(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function Vx(){return mg("useRouteId")}function Lx(){let n=q.useContext(dg),e=kx("useRouteError"),t=mg("useRouteError");return n!==void 0?n:e.errors?.[t]}function Ux(){let{router:n}=Px("useNavigate"),e=mg("useNavigate"),t=q.useRef(!1);return tw(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{vi(t.current,ew),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var KE={};function iw(n,e,t){!e&&!KE[n]&&(KE[n]=!0,vi(!1,t))}q.memo(Bx);function Bx({routes:n,future:e,state:t,unstable_onError:r}){return nw(n,void 0,t,r,e)}function Ip({to:n,replace:e,state:t,relative:r}){Et($o(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=q.useContext(Ei);vi(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=q.useContext(Ti),{pathname:d}=Xi(),m=Yo(),y=hg(n,ug(l),d,r==="path"),p=JSON.stringify(y);return q.useEffect(()=>{m(JSON.parse(p),{replace:e,state:t,relative:r})},[m,p,r,e,t]),null}function sw(n){return xx(n.context)}function Xe(n){Et(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function zx({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:o,static:l=!1}){Et(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),m=q.useMemo(()=>({basename:d,navigator:o,static:l,future:{}}),[d,o,l]);typeof t=="string"&&(t=Ho(t));let{pathname:y="/",search:p="",hash:_="",state:b=null,key:w="default"}=t,I=q.useMemo(()=>{let M=Is(y,d);return M==null?null:{location:{pathname:M,search:p,hash:_,state:b,key:w},navigationType:r}},[d,y,p,_,b,w,r]);return vi(I!=null,`<Router basename="${d}"> is not able to match the URL "${y}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:q.createElement(Ei.Provider,{value:m},q.createElement(Fc.Provider,{children:e,value:I}))}function qx({children:n,location:e}){return Cx(Dp(n),e)}function Dp(n,e=[]){let t=[];return q.Children.forEach(n,(r,o)=>{if(!q.isValidElement(r))return;let l=[...e,o];if(r.type===q.Fragment){t.push.apply(t,Dp(r.props.children,l));return}Et(r.type===Xe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Et(!r.props.index||!r.props.children,"An index route cannot have child routes.");let d={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(d.children=Dp(r.props.children,l)),t.push(d)}),t}var qh="get",Fh="application/x-www-form-urlencoded";function Sd(n){return n!=null&&typeof n.tagName=="string"}function Fx(n){return Sd(n)&&n.tagName.toLowerCase()==="button"}function Hx(n){return Sd(n)&&n.tagName.toLowerCase()==="form"}function Gx(n){return Sd(n)&&n.tagName.toLowerCase()==="input"}function $x(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function Yx(n,e){return n.button===0&&(!e||e==="_self")&&!$x(n)}var Dh=null;function Kx(){if(Dh===null)try{new FormData(document.createElement("form"),0),Dh=!1}catch{Dh=!0}return Dh}var Qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ap(n){return n!=null&&!Qx.has(n)?(vi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fh}"`),null):n}function Xx(n,e){let t,r,o,l,d;if(Hx(n)){let m=n.getAttribute("action");r=m?Is(m,e):null,t=n.getAttribute("method")||qh,o=ap(n.getAttribute("enctype"))||Fh,l=new FormData(n)}else if(Fx(n)||Gx(n)&&(n.type==="submit"||n.type==="image")){let m=n.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=n.getAttribute("formaction")||m.getAttribute("action");if(r=y?Is(y,e):null,t=n.getAttribute("formmethod")||m.getAttribute("method")||qh,o=ap(n.getAttribute("formenctype"))||ap(m.getAttribute("enctype"))||Fh,l=new FormData(m,n),!Kx()){let{name:p,type:_,value:b}=n;if(_==="image"){let w=p?`${p}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else p&&l.append(p,b)}}else{if(Sd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=qh,r=null,o=Fh,d=n}return l&&o==="text/plain"&&(d=l,l=void 0),{action:r,method:t.toLowerCase(),encType:o,formData:l,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function pg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Wx(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&Is(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function Zx(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jx(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function e1(n,e,t){let r=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let d=await Zx(l,t);return d.links?d.links():[]}return[]}));return s1(r.flat(1).filter(Jx).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function QE(n,e,t,r,o,l){let d=(y,p)=>t[p]?y.route.id!==t[p].route.id:!0,m=(y,p)=>t[p].pathname!==y.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==y.params["*"];return l==="assets"?e.filter((y,p)=>d(y,p)||m(y,p)):l==="data"?e.filter((y,p)=>{let _=r.routes[y.route.id];if(!_||!_.hasLoader)return!1;if(d(y,p)||m(y,p))return!0;if(y.route.shouldRevalidate){let b=y.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function t1(n,e,{includeHydrateFallback:t}={}){return n1(n.map(r=>{let o=e.routes[r.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function n1(n){return[...new Set(n)]}function i1(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function s1(n,e){let t=new Set;return new Set(e),n.reduce((r,o)=>{let l=JSON.stringify(i1(o));return t.has(l)||(t.add(l),r.push({key:l,link:o})),r},[])}function rw(){let n=q.useContext(Go);return pg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function r1(){let n=q.useContext(wd);return pg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var gg=q.createContext(void 0);gg.displayName="FrameworkContext";function aw(){let n=q.useContext(gg);return pg(n,"You must render this element inside a <HydratedRouter> element"),n}function a1(n,e){let t=q.useContext(gg),[r,o]=q.useState(!1),[l,d]=q.useState(!1),{onFocus:m,onBlur:y,onMouseEnter:p,onMouseLeave:_,onTouchStart:b}=e,w=q.useRef(null);q.useEffect(()=>{if(n==="render"&&d(!0),n==="viewport"){let z=U=>{U.forEach(G=>{d(G.isIntersecting)})},j=new IntersectionObserver(z,{threshold:.5});return w.current&&j.observe(w.current),()=>{j.disconnect()}}},[n]),q.useEffect(()=>{if(r){let z=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(z)}}},[r]);let I=()=>{o(!0)},M=()=>{o(!1),d(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:lc(m,I),onBlur:lc(y,M),onMouseEnter:lc(p,I),onMouseLeave:lc(_,M),onTouchStart:lc(b,I)}]:[!1,w,{}]}function lc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function o1({page:n,...e}){let{router:t}=rw(),r=q.useMemo(()=>Qb(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?q.createElement(c1,{page:n,matches:r,...e}):null}function l1(n){let{manifest:e,routeModules:t}=aw(),[r,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return e1(n,e,t).then(d=>{l||o(d)}),()=>{l=!0}},[n,e,t]),r}function c1({page:n,matches:e,...t}){let r=Xi(),{manifest:o,routeModules:l}=aw(),{basename:d}=rw(),{loaderData:m,matches:y}=r1(),p=q.useMemo(()=>QE(n,e,y,o,r,"data"),[n,e,y,o,r]),_=q.useMemo(()=>QE(n,e,y,o,r,"assets"),[n,e,y,o,r]),b=q.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let M=new Set,z=!1;if(e.forEach(U=>{let G=o.routes[U.route.id];!G||!G.hasLoader||(!p.some(Q=>Q.route.id===U.route.id)&&U.route.id in m&&l[U.route.id]?.shouldRevalidate||G.hasClientLoader?z=!0:M.add(U.route.id))}),M.size===0)return[];let j=Wx(n,d,"data");return z&&M.size>0&&j.searchParams.set("_routes",e.filter(U=>M.has(U.route.id)).map(U=>U.route.id).join(",")),[j.pathname+j.search]},[d,m,r,o,p,e,n,l]),w=q.useMemo(()=>t1(_,o),[_,o]),I=l1(_);return q.createElement(q.Fragment,null,b.map(M=>q.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),w.map(M=>q.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),I.map(({key:M,link:z})=>q.createElement("link",{key:M,nonce:t.nonce,...z})))}function u1(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var ow=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ow&&(window.__reactRouterVersion="7.8.2")}catch{}function h1({basename:n,children:e,window:t}){let r=q.useRef();r.current==null&&(r.current=WR({window:t,v5Compat:!0}));let o=r.current,[l,d]=q.useState({action:o.action,location:o.location}),m=q.useCallback(y=>{q.startTransition(()=>d(y))},[d]);return q.useLayoutEffect(()=>o.listen(m),[o,m]),q.createElement(zx,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var lw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,In=q.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:o,reloadDocument:l,replace:d,state:m,target:y,to:p,preventScrollReset:_,viewTransition:b,...w},I){let{basename:M}=q.useContext(Ei),z=typeof p=="string"&&lw.test(p),j,U=!1;if(typeof p=="string"&&z&&(j=p,ow))try{let x=new URL(window.location.href),C=p.startsWith("//")?new URL(x.protocol+p):new URL(p),O=Is(C.pathname,M);C.origin===x.origin&&O!=null?p=O+C.search+C.hash:U=!0}catch{vi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=Sx(p,{relative:o}),[Q,ie,ee]=a1(r,w),te=m1(p,{replace:d,state:m,target:y,preventScrollReset:_,relative:o,viewTransition:b});function D(x){e&&e(x),x.defaultPrevented||te(x)}let R=q.createElement("a",{...w,...ee,href:j||G,onClick:U||l?e:D,ref:u1(I,ie),target:y,"data-discover":!z&&t==="render"?"true":void 0});return Q&&!z?q.createElement(q.Fragment,null,R,q.createElement(o1,{page:G})):R});In.displayName="Link";var ht=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:o=!1,style:l,to:d,viewTransition:m,children:y,...p},_){let b=Hc(d,{relative:p.relative}),w=Xi(),I=q.useContext(wd),{navigator:M,basename:z}=q.useContext(Ei),j=I!=null&&_1(b)&&m===!0,U=M.encodeLocation?M.encodeLocation(b).pathname:b.pathname,G=w.pathname,Q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(G=G.toLowerCase(),Q=Q?Q.toLowerCase():null,U=U.toLowerCase()),Q&&z&&(Q=Is(Q,z)||Q);const ie=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let ee=G===U||!o&&G.startsWith(U)&&G.charAt(ie)==="/",te=Q!=null&&(Q===U||!o&&Q.startsWith(U)&&Q.charAt(U.length)==="/"),D={isActive:ee,isPending:te,isTransitioning:j},R=ee?e:void 0,x;typeof r=="function"?x=r(D):x=[r,ee?"active":null,te?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let C=typeof l=="function"?l(D):l;return q.createElement(In,{...p,"aria-current":R,className:x,ref:_,style:C,to:d,viewTransition:m},typeof y=="function"?y(D):y)});ht.displayName="NavLink";var d1=q.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:o,state:l,method:d=qh,action:m,onSubmit:y,relative:p,preventScrollReset:_,viewTransition:b,...w},I)=>{let M=y1(),z=v1(m,{relative:p}),j=d.toLowerCase()==="get"?"get":"post",U=typeof m=="string"&&lw.test(m),G=Q=>{if(y&&y(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ee=ie?.getAttribute("formmethod")||d;M(ie||Q.currentTarget,{fetcherKey:e,method:ee,navigate:t,replace:o,state:l,relative:p,preventScrollReset:_,viewTransition:b})};return q.createElement("form",{ref:I,method:j,action:z,onSubmit:r?y:G,...w,"data-discover":!U&&n==="render"?"true":void 0})});d1.displayName="Form";function f1(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cw(n){let e=q.useContext(Go);return Et(e,f1(n)),e}function m1(n,{target:e,replace:t,state:r,preventScrollReset:o,relative:l,viewTransition:d}={}){let m=Yo(),y=Xi(),p=Hc(n,{relative:l});return q.useCallback(_=>{if(Yx(_,e)){_.preventDefault();let b=t!==void 0?t:Ic(y)===Ic(p);m(n,{replace:b,state:r,preventScrollReset:o,relative:l,viewTransition:d})}},[y,m,p,t,r,e,n,o,l,d])}var p1=0,g1=()=>`__${String(++p1)}__`;function y1(){let{router:n}=cw("useSubmit"),{basename:e}=q.useContext(Ei),t=Vx();return q.useCallback(async(r,o={})=>{let{action:l,method:d,encType:m,formData:y,body:p}=Xx(r,e);if(o.navigate===!1){let _=o.fetcherKey||g1();await n.fetch(_,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||m,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:y,body:p,formMethod:o.method||d,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function v1(n,{relative:e}={}){let{basename:t}=q.useContext(Ei),r=q.useContext(Ti);Et(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),l={...Hc(n||".",{relative:e})},d=Xi();if(n==null){l.search=d.search;let m=new URLSearchParams(l.search),y=m.getAll("index");if(y.some(_=>_==="")){m.delete("index"),y.filter(b=>b).forEach(b=>m.append("index",b));let _=m.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:xs([t,l.pathname])),Ic(l)}function _1(n,{relative:e}={}){let t=q.useContext(Jb);Et(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=cw("useViewTransitionState"),o=Hc(n,{relative:e});if(!t.isTransitioning)return!1;let l=Is(t.currentLocation.pathname,r)||t.currentLocation.pathname,d=Is(t.nextLocation.pathname,r)||t.nextLocation.pathname;return ed(o.pathname,d)!=null||ed(o.pathname,l)!=null}const E1="/mariachis-uclatlan/assets/juliofrenk-xh5a58GC.jpg",T1="/mariachis-uclatlan/assets/brandonPhoto-BqVCcDZm.jpg",b1="/mariachis-uclatlan/assets/rosebowl25-BWtiugWu.jpg",w1=[E1,T1,b1];function S1({images:n=w1,autoPlayMs:e=5e3,showIndicators:t=!0,aspectRatio:r="16/9",className:o=""}){const[l,d]=q.useState(0),m=q.useRef(null),y=q.useRef(null),p=q.useRef(!1),_=q.useRef(null),b=q.useRef(0),w=n.length,I=q.useCallback(ie=>{d((ie%w+w)%w)},[w]),M=q.useCallback(()=>I(l+1),[I,l]),z=q.useCallback(()=>I(l-1),[I,l]);q.useEffect(()=>{const ie=ee=>{ee.key==="ArrowRight"&&M(),ee.key==="ArrowLeft"&&z()};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[M,z]),q.useEffect(()=>{if(!e)return;const ie=()=>{y.current!==null&&window.clearInterval(y.current),!p.current&&!document.hidden&&(y.current=window.setInterval(()=>{d(D=>(D+1)%w)},e))},ee=()=>{y.current!==null&&window.clearInterval(y.current),y.current=null};ie();const te=()=>document.hidden?ee():ie();return document.addEventListener("visibilitychange",te),()=>{document.removeEventListener("visibilitychange",te),ee()}},[e,w]);const j=ie=>{_.current=ie.touches[0].clientX,b.current=0},U=ie=>{if(_.current!==null&&(b.current=ie.touches[0].clientX-_.current,m.current)){const ee=b.current/m.current.clientWidth*100;m.current.style.transition="none",m.current.style.transform=`translateX(calc(${-l*100}% + ${ee}%))`}},G=()=>{m.current&&(m.current.style.transition="");const ie=b.current;_.current=null,b.current=0,Math.abs(ie)>40?ie<0?M():z():m.current&&(m.current.style.transform=`translateX(${-l*100}%)`)},Q=q.useMemo(()=>n.map((ie,ee)=>u.jsx("button",{"aria-label":`Go to slide ${ee+1}`,className:`carousel-indicator ${ee===l?"active":""}`,onClick:()=>I(ee)},ee)),[n,l,I]);return u.jsxs("div",{className:`carousel ${o}`,style:{"--carousel-aspect":r},onMouseEnter:()=>p.current=!0,onMouseLeave:()=>p.current=!1,"aria-roledescription":"carousel",children:[u.jsx("div",{className:"carousel-viewport",onTouchStart:j,onTouchMove:U,onTouchEnd:G,children:u.jsx("div",{ref:m,className:"carousel-track",style:{transform:`translateX(${-l*100}%)`},children:n.map((ie,ee)=>u.jsxs("div",{className:"carousel-slide",role:"group","aria-roledescription":"slide","aria-label":`${ee+1} of ${w}`,children:[u.jsx("img",{className:"carousel-image",src:ie,loading:"lazy",alt:`Slide ${ee+1}`}),u.jsx("div",{className:"carousel-gradient","aria-hidden":"true"})]},ee))})}),u.jsx("button",{className:"carousel-button prev",onClick:z,"aria-label":"Previous slide",children:"‹"}),u.jsx("button",{className:"carousel-button next",onClick:M,"aria-label":"Next slide",children:"›"}),t&&u.jsx("div",{className:"carousel-indicators",role:"tablist","aria-label":"Slide indicators",children:Q})]})}const XE=()=>u.jsxs("section",{className:"home stack",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{children:"Welcome to Mariachi de Uclatlán"}),u.jsx("p",{children:"Mariachi de Uclatlán is a student-led musical ensemble at UCLA dedicated to preserving, celebrating, and innovating the traditions of mariachi music. Our group provides students from diverse academic and cultural backgrounds with the opportunity to share the beauty of this art form with the UCLA community and beyond."}),u.jsx("p",{children:"As part of our mission, we honor the roots of Mexican music while bringing it into contemporary spaces. From classrooms to grand stages, Mariachi de Uclatlán fosters a spirit of community, cultural pride, and artistic excellence. Our members balance their roles as students and performers, keeping alive the traditions passed down through generations."}),u.jsx("p",{children:"Alongside our musicians, we are proud to collaborate with UCLA’s Ballet Folklórico, whose dancers bring vibrant movement and color to our performances. Together, music and dance tell stories that embody the energy and passion of Mexican culture, creating a complete and unforgettable experience for audiences."}),u.jsx("p",{children:"Founded in 1961, Mariachi de Uclatlán holds the distinction of being one of the first collegiate mariachi ensembles in the United States. Over six decades, we have built a legacy of performances, community outreach, and cultural preservation. We continue to grow as a family of students dedicated to sharing this living tradition with future generations. ¡Viva el mariachi!"})]}),u.jsx(S1,{})]});function A1(){return u.jsxs("div",{className:"about-page",children:[u.jsx("h1",{children:"About Us"}),u.jsx("p",{children:"Welcome to Mariachi de Uclatlán! We are UCLA's premier mariachi ensemble dedicated to preserving the rich traditions of Mexican music and culture. Founded in 1961, our ensemble has a long history of excellence and passion for mariachi music."}),u.jsx("h2",{children:"Watch a Recent Performance"}),u.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,marginBottom:"2rem"},children:u.jsx("iframe",{src:"https://www.youtube.com/embed/PVT9JTaZokk?start=6720",title:"Mariachi de Uclatlán Performance",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),u.jsx("h2",{children:"Our History"}),u.jsx("p",{children:"Mariachi de Uclatlán was established to provide students with an opportunity to experience and perform traditional Mexican music while also promoting cultural awareness. Over the years, we have participated in numerous events and competitions, showcasing the talent and dedication of our members."})]})}const R1=()=>u.jsxs("section",{className:"contact-page",children:[u.jsx("h1",{children:"Contact Us"}),u.jsxs("p",{className:"contact-intro",children:["Email us at"," ",u.jsx("a",{href:"mailto:uclatlan@ucla.edu",className:"contact-link",children:"uclatlan@ucla.edu"})," ","or choose an option below:"]}),u.jsxs("div",{className:"contact-actions",children:[u.jsx(In,{to:"/hire-us",className:"cta-button",children:"Hiring"}),u.jsx(In,{to:"/book-us",className:"cta-button",children:"Performance Inquiry"}),u.jsx(In,{to:"/join",className:"cta-button",children:"How to Join Our Group"}),u.jsx(In,{to:"/contact/form",className:"cta-button",children:"General Questions"})]})]}),x1=()=>{};var WE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let o=n.charCodeAt(r);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},C1=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const o=n[t++];if(o<128)e[r++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[r++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],d=n[t++],m=n[t++],y=((o&7)<<18|(l&63)<<12|(d&63)<<6|m&63)-65536;e[r++]=String.fromCharCode(55296+(y>>10)),e[r++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],d=n[t++];e[r++]=String.fromCharCode((o&15)<<12|(l&63)<<6|d&63)}}return e.join("")},hw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<n.length;o+=3){const l=n[o],d=o+1<n.length,m=d?n[o+1]:0,y=o+2<n.length,p=y?n[o+2]:0,_=l>>2,b=(l&3)<<4|m>>4;let w=(m&15)<<2|p>>6,I=p&63;y||(I=64,d||(w=64)),r.push(t[_],t[b],t[w],t[I])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(uw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):C1(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],m=o<n.length?t[n.charAt(o)]:0;++o;const p=o<n.length?t[n.charAt(o)]:64;++o;const b=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||m==null||p==null||b==null)throw new N1;const w=l<<2|m>>4;if(r.push(w),p!==64){const I=m<<4&240|p>>2;if(r.push(I),b!==64){const M=p<<6&192|b;r.push(M)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class N1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const I1=function(n){const e=uw(n);return hw.encodeByteArray(e,!0)},td=function(n){return I1(n).replace(/\./g,"")},dw=function(n){try{return hw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1=()=>D1().__FIREBASE_DEFAULTS__,O1=()=>{if(typeof process>"u"||typeof WE>"u")return;const n=WE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},P1=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&dw(n[1]);return e&&JSON.parse(e)},Ad=()=>{try{return x1()||j1()||O1()||P1()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},fw=n=>Ad()?.emulatorHosts?.[n],yg=n=>{const e=fw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},mw=()=>Ad()?.config,pw=n=>Ad()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rd(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[td(JSON.stringify(t)),td(JSON.stringify(d)),""].join(".")}const Ec={};function M1(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ec))Ec[e]?n.emulator.push(e):n.prod.push(e);return n}function V1(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let ZE=!1;function xd(n,e){if(typeof window>"u"||typeof document>"u"||!Vs(window.location.host)||Ec[n]===e||Ec[n]||ZE)return;Ec[n]=e;function t(w){return`__firebase__banner__${w}`}const r="__firebase__banner",l=M1().prod.length>0;function d(){const w=document.getElementById(r);w&&w.remove()}function m(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function y(w,I){w.setAttribute("width","24"),w.setAttribute("id",I),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function p(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{ZE=!0,d()},w}function _(w,I){w.setAttribute("id",I),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function b(){const w=V1(r),I=t("text"),M=document.getElementById(I)||document.createElement("span"),z=t("learnmore"),j=document.getElementById(z)||document.createElement("a"),U=t("preprendIcon"),G=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const Q=w.element;m(Q),_(j,z);const ie=p();y(G,U),Q.append(G,M,j,ie),document.body.appendChild(Q)}l?(M.innerText="Preview backend disconnected.",G.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(G.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,M.innerText="Preview backend running in this workspace."),M.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function U1(){const n=Ad()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function B1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function z1(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function q1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function F1(){const n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function H1(){return!U1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function G1(){try{return typeof indexedDB=="object"}catch{return!1}}function $1(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="FirebaseError";class Wi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Y1,Object.setPrototypeOf(this,Wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gc.prototype.create)}}class Gc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],d=l?K1(l,r):"Error",m=`${this.serviceName}: ${d} (${o}).`;return new Wi(o,m,r)}}function K1(n,e){return n.replace(Q1,(t,r)=>{const o=e[r];return o!=null?String(o):`<${r}?>`})}const Q1=/\{\$([^}]+)}/g;function X1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Sa(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const o of t){if(!r.includes(o))return!1;const l=n[o],d=e[o];if(JE(l)&&JE(d)){if(!Sa(l,d))return!1}else if(l!==d)return!1}for(const o of r)if(!t.includes(o))return!1;return!0}function JE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fc(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[o,l]=r.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function mc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function W1(n,e){const t=new Z1(n,e);return t.subscribe.bind(t)}class Z1{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let o;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");J1(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:r},o.next===void 0&&(o.next=op),o.error===void 0&&(o.error=op),o.complete===void 0&&(o.complete=op);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function J1(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function op(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(n){return n&&n._delegate?n._delegate:n}class Ds{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new k1;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nC(e))try{this.getOrInitializeService({instanceIdentifier:va})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});r.resolve(l)}catch{}}}}clearInstance(e=va){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=va){return this.instances.has(e)}getOptions(e=va){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(l);r===m&&d.resolve(o)}return o}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(r)??new Set;o.add(e),this.onInitCallbacks.set(r,o);const l=this.instances.get(r);return l&&e(l,r),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const o of r)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tC(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=va){return this.component?this.component.multipleInstances?e:va:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function tC(n){return n===va?void 0:n}function nC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new eC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ue||(Ue={}));const sC={debug:Ue.DEBUG,verbose:Ue.VERBOSE,info:Ue.INFO,warn:Ue.WARN,error:Ue.ERROR,silent:Ue.SILENT},rC=Ue.INFO,aC={[Ue.DEBUG]:"log",[Ue.VERBOSE]:"log",[Ue.INFO]:"info",[Ue.WARN]:"warn",[Ue.ERROR]:"error"},oC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),o=aC[e];if(o)console[o](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vg{constructor(e){this.name=e,this._logLevel=rC,this._logHandler=oC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ue))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ue.DEBUG,...e),this._logHandler(this,Ue.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ue.VERBOSE,...e),this._logHandler(this,Ue.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ue.INFO,...e),this._logHandler(this,Ue.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ue.WARN,...e),this._logHandler(this,Ue.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ue.ERROR,...e),this._logHandler(this,Ue.ERROR,...e)}}const lC=(n,e)=>e.some(t=>n instanceof t);let eT,tT;function cC(){return eT||(eT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uC(){return tT||(tT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const yw=new WeakMap,jp=new WeakMap,vw=new WeakMap,lp=new WeakMap,_g=new WeakMap;function hC(n){const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",d)},l=()=>{t(br(n.result)),o()},d=()=>{r(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",d)});return e.then(t=>{t instanceof IDBCursor&&yw.set(t,n)}).catch(()=>{}),_g.set(e,n),e}function dC(n){if(jp.has(n))return;const e=new Promise((t,r)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",d),n.removeEventListener("abort",d)},l=()=>{t(),o()},d=()=>{r(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",d),n.addEventListener("abort",d)});jp.set(n,e)}let Op={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||vw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return br(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function fC(n){Op=n(Op)}function mC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(cp(this),e,...t);return vw.set(r,e.sort?e.sort():[e]),br(r)}:uC().includes(n)?function(...e){return n.apply(cp(this),e),br(yw.get(this))}:function(...e){return br(n.apply(cp(this),e))}}function pC(n){return typeof n=="function"?mC(n):(n instanceof IDBTransaction&&dC(n),lC(n,cC())?new Proxy(n,Op):n)}function br(n){if(n instanceof IDBRequest)return hC(n);if(lp.has(n))return lp.get(n);const e=pC(n);return e!==n&&(lp.set(n,e),_g.set(e,n)),e}const cp=n=>_g.get(n);function gC(n,e,{blocked:t,upgrade:r,blocking:o,terminated:l}={}){const d=indexedDB.open(n,e),m=br(d);return r&&d.addEventListener("upgradeneeded",y=>{r(br(d.result),y.oldVersion,y.newVersion,br(d.transaction),y)}),t&&d.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),m.then(y=>{l&&y.addEventListener("close",()=>l()),o&&y.addEventListener("versionchange",p=>o(p.oldVersion,p.newVersion,p))}).catch(()=>{}),m}const yC=["get","getKey","getAll","getAllKeys","count"],vC=["put","add","delete","clear"],up=new Map;function nT(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(up.get(e))return up.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,o=vC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(o||yC.includes(t)))return;const l=async function(d,...m){const y=this.transaction(d,o?"readwrite":"readonly");let p=y.store;return r&&(p=p.index(m.shift())),(await Promise.all([p[t](...m),o&&y.done]))[0]};return up.set(e,l),l}fC(n=>({...n,get:(e,t,r)=>nT(e,t)||n.get(e,t,r),has:(e,t)=>!!nT(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(EC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function EC(n){return n.getComponent()?.type==="VERSION"}const Pp="@firebase/app",iT="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new vg("@firebase/app"),TC="@firebase/app-compat",bC="@firebase/analytics-compat",wC="@firebase/analytics",SC="@firebase/app-check-compat",AC="@firebase/app-check",RC="@firebase/auth",xC="@firebase/auth-compat",CC="@firebase/database",NC="@firebase/data-connect",IC="@firebase/database-compat",DC="@firebase/functions",jC="@firebase/functions-compat",OC="@firebase/installations",PC="@firebase/installations-compat",kC="@firebase/messaging",MC="@firebase/messaging-compat",VC="@firebase/performance",LC="@firebase/performance-compat",UC="@firebase/remote-config",BC="@firebase/remote-config-compat",zC="@firebase/storage",qC="@firebase/storage-compat",FC="@firebase/firestore",HC="@firebase/ai",GC="@firebase/firestore-compat",$C="firebase",YC="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kp="[DEFAULT]",KC={[Pp]:"fire-core",[TC]:"fire-core-compat",[wC]:"fire-analytics",[bC]:"fire-analytics-compat",[AC]:"fire-app-check",[SC]:"fire-app-check-compat",[RC]:"fire-auth",[xC]:"fire-auth-compat",[CC]:"fire-rtdb",[NC]:"fire-data-connect",[IC]:"fire-rtdb-compat",[DC]:"fire-fn",[jC]:"fire-fn-compat",[OC]:"fire-iid",[PC]:"fire-iid-compat",[kC]:"fire-fcm",[MC]:"fire-fcm-compat",[VC]:"fire-perf",[LC]:"fire-perf-compat",[UC]:"fire-rc",[BC]:"fire-rc-compat",[zC]:"fire-gcs",[qC]:"fire-gcs-compat",[FC]:"fire-fst",[GC]:"fire-fst-compat",[HC]:"fire-vertex","fire-js":"fire-js",[$C]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dc=new Map,QC=new Map,Mp=new Map;function sT(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rr(n){const e=n.name;if(Mp.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;Mp.set(e,n);for(const t of Dc.values())sT(t,n);for(const t of QC.values())sT(t,n);return!0}function $c(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function vn(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wr=new Gc("app","Firebase",XC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ds("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Da=YC;function _w(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:kp,automaticDataCollectionEnabled:!0,...e},o=r.name;if(typeof o!="string"||!o)throw wr.create("bad-app-name",{appName:String(o)});if(t||(t=mw()),!t)throw wr.create("no-options");const l=Dc.get(o);if(l){if(Sa(t,l.options)&&Sa(r,l.config))return l;throw wr.create("duplicate-app",{appName:o})}const d=new iC(o);for(const y of Mp.values())d.addComponent(y);const m=new WC(t,r,d);return Dc.set(o,m),m}function Cd(n=kp){const e=Dc.get(n);if(!e&&n===kp&&mw())return _w();if(!e)throw wr.create("no-app",{appName:n});return e}function rT(){return Array.from(Dc.values())}function li(n,e,t){let r=KC[n]??n;t&&(r+=`-${t}`);const o=r.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const d=[`Unable to register library "${r}" with version "${e}":`];o&&d.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&l&&d.push("and"),l&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(d.join(" "));return}Rr(new Ds(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="firebase-heartbeat-database",JC=1,jc="firebase-heartbeat-store";let hp=null;function Ew(){return hp||(hp=gC(ZC,JC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw wr.create("idb-open",{originalErrorMessage:n.message})})),hp}async function eN(n){try{const t=(await Ew()).transaction(jc),r=await t.objectStore(jc).get(Tw(n));return await t.done,r}catch(e){if(e instanceof Wi)js.warn(e.message);else{const t=wr.create("idb-get",{originalErrorMessage:e?.message});js.warn(t.message)}}}async function aT(n,e){try{const r=(await Ew()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,Tw(n)),await r.done}catch(t){if(t instanceof Wi)js.warn(t.message);else{const r=wr.create("idb-set",{originalErrorMessage:t?.message});js.warn(r.message)}}}function Tw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=1024,nN=30;class iN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats.length>nN){const o=aN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){js.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=oT(),{heartbeatsToSend:t,unsentEntries:r}=sN(this._heartbeatsCache.heartbeats),o=td(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return js.warn(e),""}}}function oT(){return new Date().toISOString().substring(0,10)}function sN(n,e=tN){const t=[];let r=n.slice();for(const o of n){const l=t.find(d=>d.agent===o.agent);if(l){if(l.dates.push(o.date),lT(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),lT(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G1()?$1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await eN(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return aT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function lT(n){return td(JSON.stringify({version:2,heartbeats:n})).length}function aN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oN(n){Rr(new Ds("platform-logger",e=>new _C(e),"PRIVATE")),Rr(new Ds("heartbeat",e=>new iN(e),"PRIVATE")),li(Pp,iT,n),li(Pp,iT,"esm2020"),li("fire-js","")}oN("");function bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lN=bw,ww=new Gc("auth","Firebase",bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd=new vg("@firebase/auth");function cN(n,...e){nd.logLevel<=Ue.WARN&&nd.warn(`Auth (${Da}): ${n}`,...e)}function Hh(n,...e){nd.logLevel<=Ue.ERROR&&nd.error(`Auth (${Da}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(n,...e){throw Tg(n,...e)}function jn(n,...e){return Tg(n,...e)}function Eg(n,e,t){const r={...lN(),[e]:t};return new Gc("auth","Firebase",r).create(e,{appName:n.name})}function Hi(n){return Eg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function uN(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ci(n,"argument-error"),Eg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Tg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ww.create(n,...e)}function ve(n,e,...t){if(!n)throw Tg(e,...t)}function As(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Hh(e),new Error(e)}function Os(n,e){n||As(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(){return typeof self<"u"&&self.location?.href||""}function Sw(){return cT()==="http:"||cT()==="https:"}function cT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Sw()||z1()||"connection"in navigator)?navigator.onLine:!0}function dN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,Os(t>e,"Short delay should be less than long delay!"),this.isMobile=L1()||q1()}get(){return hN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bg(n,e){Os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;As("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;As("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;As("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pN=new Yc(3e4,6e4);function kn(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Mn(n,e,t,r,o={}){return Rw(n,o,async()=>{let l={},d={};r&&(e==="GET"?d=r:l={body:JSON.stringify(r)});const m=Ko({key:n.config.apiKey,...d}).slice(1),y=await n._getAdditionalHeaders();y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode);const p={method:e,headers:y,...l};return B1()||(p.referrerPolicy="no-referrer"),n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(p.credentials="include"),Aw.fetch()(await xw(n,n.config.apiHost,t,m),p)})}async function Rw(n,e,t){n._canInitEmulator=!1;const r={...fN,...e};try{const o=new yN(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const d=await l.json();if("needConfirmation"in d)throw pc(n,"account-exists-with-different-credential",d);if(l.ok&&!("errorMessage"in d))return d;{const m=l.ok?d.errorMessage:d.error.message,[y,p]=m.split(" : ");if(y==="FEDERATED_USER_ID_ALREADY_LINKED")throw pc(n,"credential-already-in-use",d);if(y==="EMAIL_EXISTS")throw pc(n,"email-already-in-use",d);if(y==="USER_DISABLED")throw pc(n,"user-disabled",d);const _=r[y]||y.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw Eg(n,_,p);ci(n,_)}}catch(o){if(o instanceof Wi)throw o;ci(n,"network-request-failed",{message:String(o)})}}async function Pr(n,e,t,r,o={}){const l=await Mn(n,e,t,r,o);return"mfaPendingCredential"in l&&ci(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function xw(n,e,t,r){const o=`${e}${t}?${r}`,l=n,d=l.config.emulator?bg(n.config,o):`${n.config.apiScheme}://${o}`;return mN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(d).toString():d}function gN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class yN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(jn(this.auth,"network-request-failed")),pN.get())})}}function pc(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const o=jn(n,e,r);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(n){return n!==void 0&&n.getResponse!==void 0}function hT(n){return n!==void 0&&n.enterprise!==void 0}class Cw{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return gN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(n){return(await Mn(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Nw(n,e){return Mn(n,"GET","/v2/recaptchaConfig",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(n,e){return Mn(n,"POST","/v1/accounts:delete",e)}async function id(n,e){return Mn(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iw(n,e=!1){const t=Ze(n),r=await t.getIdToken(e),o=wg(r);ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,d=l?.sign_in_provider;return{claims:o,token:r,authTime:Tc(dp(o.auth_time)),issuedAtTime:Tc(dp(o.iat)),expirationTime:Tc(dp(o.exp)),signInProvider:d||null,signInSecondFactor:l?.sign_in_second_factor||null}}function dp(n){return Number(n)*1e3}function wg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Hh("JWT malformed, contained fewer than 3 sections"),null;try{const o=dw(t);return o?JSON.parse(o):(Hh("Failed to decode base64 JWT payload"),null)}catch(o){return Hh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function dT(n){const e=wg(n);return ve(e,"internal-error"),ve(typeof e.exp<"u","internal-error"),ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aa(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Wi&&EN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function EN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Tc(this.lastLoginAt),this.creationTime=Tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sd(n){const e=n.auth,t=await n.getIdToken(),r=await Aa(n,id(e,{idToken:t}));ve(r?.users.length,e,"internal-error");const o=r.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?Dw(o.providerUserInfo):[],d=wN(n.providerData,l),m=n.isAnonymous,y=!(n.email&&o.passwordHash)&&!d?.length,p=m?y:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:p};Object.assign(n,_)}async function bN(n){const e=Ze(n);await sd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function wN(n,e){return[...n.filter(r=>!e.some(o=>o.providerId===r.providerId)),...e]}function Dw(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SN(n,e){const t=await Rw(n,{},async()=>{const r=Ko({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,d=await xw(n,o,"/v1/token",`key=${l}`),m=await n._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const y={method:"POST",headers:m,body:r};return n.emulatorConfig&&Vs(n.emulatorConfig.host)&&(y.credentials="include"),Aw.fetch()(d,y)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function AN(n,e){return Mn(n,"POST","/v2/accounts:revokeToken",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ve(e.idToken,"internal-error"),ve(typeof e.idToken<"u","internal-error"),ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):dT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ve(e.length!==0,"internal-error");const t=dT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:o,expiresIn:l}=await SN(e,t);this.updateTokensAndExpiration(r,o,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:o,expirationTime:l}=t,d=new jo;return r&&(ve(typeof r=="string","internal-error",{appName:e}),d.refreshToken=r),o&&(ve(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),l&&(ve(typeof l=="number","internal-error",{appName:e}),d.expirationTime=l),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jo,this.toJSON())}_performRefresh(){return As("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n,e){ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class yi{constructor({uid:e,auth:t,stsTokenManager:r,...o}){this.providerId="firebase",this.proactiveRefresh=new TN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Lp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Aa(this,this.stsTokenManager.getToken(this.auth,e));return ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Iw(this,e)}reload(){return bN(this)}_assign(e){this!==e&&(ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new yi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await sd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Hi(this.auth));const e=await this.getIdToken();return await Aa(this,_N(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,d=t.photoURL??void 0,m=t.tenantId??void 0,y=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:b,emailVerified:w,isAnonymous:I,providerData:M,stsTokenManager:z}=t;ve(b&&z,e,"internal-error");const j=jo.fromJSON(this.name,z);ve(typeof b=="string",e,"internal-error"),pr(r,e.name),pr(o,e.name),ve(typeof w=="boolean",e,"internal-error"),ve(typeof I=="boolean",e,"internal-error"),pr(l,e.name),pr(d,e.name),pr(m,e.name),pr(y,e.name),pr(p,e.name),pr(_,e.name);const U=new yi({uid:b,auth:e,email:o,emailVerified:w,displayName:r,isAnonymous:I,photoURL:d,phoneNumber:l,tenantId:m,stsTokenManager:j,createdAt:p,lastLoginAt:_});return M&&Array.isArray(M)&&(U.providerData=M.map(G=>({...G}))),y&&(U._redirectEventId=y),U}static async _fromIdTokenResponse(e,t,r=!1){const o=new jo;o.updateFromServerResponse(t);const l=new yi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:r});return await sd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const o=t.users[0];ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Dw(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!l?.length,m=new jo;m.updateFromIdToken(r);const y=new yi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:d}),p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Lp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(y,p),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fT=new Map;function Rs(n){Os(n instanceof Function,"Expected a class definition");let e=fT.get(n);return e?(Os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fT.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}jw.type="NONE";const mT=jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(n,e,t){return`firebase:${n}:${e}:${t}`}class Oo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:o,name:l}=this.auth;this.fullUserKey=Gh(this.userKey,o.apiKey,l),this.fullPersistenceKey=Gh("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await id(this.auth,{idToken:e}).catch(()=>{});return t?yi._fromGetAccountInfoResponse(this.auth,t,e):null}return yi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Oo(Rs(mT),e,r);const o=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=o[0]||Rs(mT);const d=Gh(r,e.config.apiKey,e.name);let m=null;for(const p of t)try{const _=await p._get(d);if(_){let b;if(typeof _=="string"){const w=await id(e,{idToken:_}).catch(()=>{});if(!w)break;b=await yi._fromGetAccountInfoResponse(e,w,_)}else b=yi._fromJSON(e,_);p!==l&&(m=b),l=p;break}}catch{}const y=o.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!y.length?new Oo(l,e,r):(l=y[0],m&&await l._set(d,m.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(d)}catch{}})),new Oo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ow(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Lw(e))return"Blackberry";if(Uw(e))return"Webos";if(Pw(e))return"Safari";if((e.includes("chrome/")||kw(e))&&!e.includes("edge/"))return"Chrome";if(Vw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Ow(n=_n()){return/firefox\//i.test(n)}function Pw(n=_n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kw(n=_n()){return/crios\//i.test(n)}function Mw(n=_n()){return/iemobile/i.test(n)}function Vw(n=_n()){return/android/i.test(n)}function Lw(n=_n()){return/blackberry/i.test(n)}function Uw(n=_n()){return/webos/i.test(n)}function Sg(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function RN(n=_n()){return Sg(n)&&!!window.navigator?.standalone}function xN(){return F1()&&document.documentMode===10}function Bw(n=_n()){return Sg(n)||Vw(n)||Uw(n)||Lw(n)||/windows phone/i.test(n)||Mw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(n,e=[]){let t;switch(n){case"Browser":t=pT(_n());break;case"Worker":t=`${pT(_n())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((d,m)=>{try{const y=e(l);d(y)}catch(y){m(y)}});r.onAbort=t,this.queue.push(r);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(n,e={}){return Mn(n,"GET","/v2/passwordPolicy",kn(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=6;class DN{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??IN,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let o=0;o<e.length;o++)r=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t,r,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gT(this),this.idTokenSubscription=new gT(this),this.beforeStateQueue=new CN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rs(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await id(this,{idToken:e}),r=await yi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,d=r?._redirectEventId,m=await this.tryRedirectSignIn(e);(!l||l===d)&&m?.user&&(r=m.user,o=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sd(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=dN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Hi(this));const t=e?Ze(e):null;return t&&ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Hi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Hi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await NN(this),t=new DN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Gc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await AN(this,r)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rs(e)||this._popupRedirectResolver;ve(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[Rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let d=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(ve(m,this,"internal-error"),m.then(()=>{d||l(this.currentUser)}),typeof t=="function"){const y=e.addObserver(t,r,o);return()=>{d=!0,y()}}else{const y=e.addObserver(t);return()=>{d=!0,y()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&cN(`Error while retrieving App Check token: ${e.error}`),e?.token}}function bi(n){return Ze(n)}class gT{constructor(e){this.auth=e,this.observer=null,this.addObserver=W1(t=>this.observer=t)}get next(){return ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ON(n){Kc=n}function Ag(n){return Kc.loadJS(n)}function PN(){return Kc.recaptchaV2Script}function kN(){return Kc.recaptchaEnterpriseScript}function MN(){return Kc.gapiScript}function qw(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN=500,LN=6e4,jh=1e12;class UN{constructor(e){this.auth=e,this.counter=jh,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new qN(e,this.auth.name,t||{})),this.counter++,r}reset(e){const t=e||jh;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||jh;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||jh;return this._widgets.get(t)?.execute(),""}}class BN{constructor(){this.enterprise=new zN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class zN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class qN{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;ve(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},LN)},VN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const HN="recaptcha-enterprise",bc="NO_RECAPTCHA";class Fw{constructor(e){this.type=HN,this.auth=bi(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(d,m)=>{Nw(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(y=>{if(y.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const p=new Cw(y);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,d(p.siteKey)}}).catch(y=>{m(y)})})}function o(l,d,m){const y=window.grecaptcha;hT(y)?y.enterprise.ready(()=>{y.enterprise.execute(l,{action:e}).then(p=>{d(p)}).catch(()=>{d(bc)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new BN().execute("siteKey",{action:"verify"}):new Promise((l,d)=>{r(this.auth).then(m=>{if(!t&&hT(window.grecaptcha))o(m,l,d);else{if(typeof window>"u"){d(new Error("RecaptchaVerifier is only supported in browser"));return}let y=kN();y.length!==0&&(y+=m),Ag(y).then(()=>{o(m,l,d)}).catch(p=>{d(p)})}}).catch(m=>{d(m)})})}}async function cc(n,e,t,r=!1,o=!1){const l=new Fw(n);let d;if(o)d=bc;else try{d=await l.verify(t)}catch{d=await l.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const y=m.phoneEnrollmentInfo.phoneNumber,p=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:y,recaptchaToken:p,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const y=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:y,captchaResponse:d,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return r?Object.assign(m,{captchaResp:d}):Object.assign(m,{captchaResponse:d}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Po(n,e,t,r,o){if(o==="EMAIL_PASSWORD_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await cc(n,e,t,t==="getOobCode");return r(n,l)}else return r(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const d=await cc(n,e,t,t==="getOobCode");return r(n,d)}else return Promise.reject(l)});else if(o==="PHONE_PROVIDER")if(n._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const l=await cc(n,e,t);return r(n,l).catch(async d=>{if(n._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(d.code==="auth/missing-recaptcha-token"||d.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await cc(n,e,t,!1,!0);return r(n,m)}return Promise.reject(d)})}else{const l=await cc(n,e,t,!1,!0);return r(n,l)}else return Promise.reject(o+" provider is not supported.")}async function GN(n){const e=bi(n),t=await Nw(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Cw(t);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new Fw(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e){const t=$c(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Sa(l,e??{}))return o;ci(o,"already-initialized")}return t.initialize({options:e})}function YN(n,e){const t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Rs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function KN(n,e,t){const r=bi(n);ve(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const o=!1,l=Hw(e),{host:d,port:m}=QN(e),y=m===null?"":`:${m}`,p={url:`${l}//${d}${y}/`},_=Object.freeze({host:d,port:m,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!r._canInitEmulator){ve(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ve(Sa(p,r.config.emulator)&&Sa(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,Vs(d)?(Rd(`${l}//${d}${y}`),xd("Auth",!0)):XN()}function Hw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function QN(n){const e=Hw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(r);if(o){const l=o[1];return{host:l,port:yT(r.substr(l.length+1))}}else{const[l,d]=r.split(":");return{host:l,port:yT(d)}}}function yT(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function XN(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return As("not implemented")}_getIdTokenResponse(e){return As("not implemented")}_linkToIdToken(e,t){return As("not implemented")}_getReauthenticationResolver(e){return As("not implemented")}}async function WN(n,e){return Mn(n,"POST","/v1/accounts:update",e)}async function ZN(n,e){return Mn(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e){return Pr(n,"POST","/v1/accounts:signInWithPassword",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eI(n,e){return Pr(n,"POST","/v1/accounts:signInWithEmailLink",kn(n,e))}async function tI(n,e){return Pr(n,"POST","/v1/accounts:signInWithEmailLink",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends Nd{constructor(e,t,r,o=null){super("password",r),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Oc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Oc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Po(e,t,"signInWithPassword",JN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return eI(e,{email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Po(e,r,"signUpPassword",ZN,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return tI(e,{idToken:t,email:this._email,oobCode:this._password});default:ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(n,e){return Pr(n,"POST","/v1/accounts:signInWithIdp",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI="http://localhost";class Ra extends Nd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:o,...l}=t;if(!r||!o)return null;const d=new Ra(r,o);return d.idToken=l.idToken||void 0,d.accessToken=l.accessToken||void 0,d.secret=l.secret,d.nonce=l.nonce,d.pendingToken=l.pendingToken||null,d}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,ko(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:nI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ko(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(n,e){return Mn(n,"POST","/v1/accounts:sendVerificationCode",kn(n,e))}async function iI(n,e){return Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,e))}async function sI(n,e){const t=await Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,e));if(t.temporaryProof)throw pc(n,"account-exists-with-different-credential",t);return t}const rI={USER_NOT_FOUND:"user-not-found"};async function aI(n,e){const t={...e,operation:"REAUTH"};return Pr(n,"POST","/v1/accounts:signInWithPhoneNumber",kn(n,t),rI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc extends Nd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new wc({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new wc({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return iI(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return sI(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return aI(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:o,temporaryProof:l}=e;return!r&&!t&&!o&&!l?null:new wc({verificationId:t,verificationCode:r,phoneNumber:o,temporaryProof:l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lI(n){const e=fc(mc(n)).link,t=e?fc(mc(e)).deep_link_id:null,r=fc(mc(n)).deep_link_id;return(r?fc(mc(r)).link:null)||r||t||e||n}class Rg{constructor(e){const t=fc(mc(e)),r=t.apiKey??null,o=t.oobCode??null,l=oI(t.mode??null);ve(r&&o&&l,"argument-error"),this.apiKey=r,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=lI(e);try{return new Rg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(){this.providerId=ja.PROVIDER_ID}static credential(e,t){return Oc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Rg.parseLink(t);return ve(r,"argument-error"),Oc._fromEmailAndCode(e,r.code,r.tenantId)}}ja.PROVIDER_ID="password";ja.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ja.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc extends xg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends Qc{constructor(){super("facebook.com")}static credential(e){return Ra._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Qc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ra._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return qi.credential(t,r)}catch{return null}}}qi.GOOGLE_SIGN_IN_METHOD="google.com";qi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends Qc{constructor(){super("github.com")}static credential(e){return Ra._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vr.credential(e.oauthAccessToken)}catch{return null}}}vr.GITHUB_SIGN_IN_METHOD="github.com";vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Qc{constructor(){super("twitter.com")}static credential(e,t){return Ra._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return _r.credential(t,r)}catch{return null}}}_r.TWITTER_SIGN_IN_METHOD="twitter.com";_r.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(n,e){return Pr(n,"POST","/v1/accounts:signUp",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,o=!1){const l=await yi._fromIdTokenResponse(e,r,o),d=_T(r);return new xa({user:l,providerId:d,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const o=_T(r);return new xa({user:e,providerId:o,_tokenResponse:r,operationType:t})}}function _T(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd extends Wi{constructor(e,t,r,o){super(t.code,t.message),this.operationType=r,this.user=o,Object.setPrototypeOf(this,rd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,o){return new rd(e,t,r,o)}}function Gw(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?rd._fromErrorAndOperation(n,l,e,r):l})}async function uI(n,e,t=!1){const r=await Aa(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return xa._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(n,e,t=!1){const{auth:r}=n;if(vn(r.app))return Promise.reject(Hi(r));const o="reauthenticate";try{const l=await Aa(n,Gw(r,o,e,n),t);ve(l.idToken,r,"internal-error");const d=wg(l.idToken);ve(d,r,"internal-error");const{sub:m}=d;return ve(n.uid===m,r,"user-mismatch"),xa._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&ci(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yw(n,e,t=!1){if(vn(n.app))return Promise.reject(Hi(n));const r="signIn",o=await Gw(n,r,e),l=await xa._fromIdTokenResponse(n,r,o);return t||await n._updateCurrentUser(l.user),l}async function Kw(n,e){return Yw(bi(n),e)}async function hI(n,e){return $w(Ze(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qw(n){const e=bi(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function dI(n,e,t){if(vn(n.app))return Promise.reject(Hi(n));const r=bi(n),d=await Po(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cI,"EMAIL_PASSWORD_PROVIDER").catch(y=>{throw y.code==="auth/password-does-not-meet-requirements"&&Qw(n),y}),m=await xa._fromIdTokenResponse(r,"signIn",d);return await r._updateCurrentUser(m.user),m}function fI(n,e,t){return vn(n.app)?Promise.reject(Hi(n)):Kw(Ze(n),ja.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Qw(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mI(n,e){return Mn(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=Ze(n),l={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},d=await Aa(r,mI(r.auth,l));r.displayName=d.displayName||null,r.photoURL=d.photoUrl||null;const m=r.providerData.find(({providerId:y})=>y==="password");m&&(m.displayName=r.displayName,m.photoURL=r.photoURL),await r._updateTokensIfNecessary(d)}function gI(n,e){return yI(Ze(n),null,e)}async function yI(n,e,t){const{auth:r}=n,l={idToken:await n.getIdToken(),returnSecureToken:!0};t&&(l.password=t);const d=await Aa(n,WN(r,l));await n._updateTokensIfNecessary(d,!0)}function vI(n,e,t,r){return Ze(n).onIdTokenChanged(e,t,r)}function _I(n,e,t){return Ze(n).beforeAuthStateChanged(e,t)}function Id(n,e,t,r){return Ze(n).onAuthStateChanged(e,t,r)}function EI(n){return Ze(n).signOut()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(n,e){return Mn(n,"POST","/v2/accounts/mfaEnrollment:start",kn(n,e))}const ad="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ad,"1"),this.storage.removeItem(ad),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI=1e3,bI=10;class Ww extends Xw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Bw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),o=this.localCache[t];r!==o&&e(t,o,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((d,m,y)=>{this.notifyListeners(d,y)});return}const r=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(r);!t&&this.localCache[r]===d||this.notifyListeners(r,d)},l=this.storage.getItem(r);xN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,bI):o()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},TI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ww.type="LOCAL";const wI=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw extends Xw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Zw.type="SESSION";const Jw=Zw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const r=new Dd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:o,data:l}=t.data,d=this.handlersMap[o];if(!d?.size)return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:o});const m=Array.from(d).map(async p=>p(t.origin,l)),y=await SI(m);t.ports[0].postMessage({status:"done",eventId:r,eventType:o,response:y})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,d;return new Promise((m,y)=>{const p=Cg("",20);o.port1.start();const _=setTimeout(()=>{y(new Error("unsupported_event"))},r);d={messageChannel:o,onMessage(b){const w=b;if(w.data.eventId===p)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{y(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),m(w.data.response);break;default:clearTimeout(_),clearTimeout(l),y(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return window}function RI(n){Lt().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){return typeof Lt().WorkerGlobalScope<"u"&&typeof Lt().importScripts=="function"}async function xI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CI(){return navigator?.serviceWorker?.controller||null}function NI(){return Ng()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firebaseLocalStorageDb",II=1,od="firebaseLocalStorage",t0="fbase_key";class Xc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jd(n,e){return n.transaction([od],e?"readwrite":"readonly").objectStore(od)}function DI(){const n=indexedDB.deleteDatabase(e0);return new Xc(n).toPromise()}function Up(){const n=indexedDB.open(e0,II);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(od,{keyPath:t0})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(od)?e(r):(r.close(),await DI(),e(await Up()))})})}async function TT(n,e,t){const r=jd(n,!0).put({[t0]:e,value:t});return new Xc(r).toPromise()}async function jI(n,e){const t=jd(n,!1).get(e),r=await new Xc(t).toPromise();return r===void 0?null:r.value}function bT(n,e){const t=jd(n,!0).delete(e);return new Xc(t).toPromise()}const OI=800,PI=3;class n0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Up(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>PI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ng()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dd._getInstance(NI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await xI(),!this.activeServiceWorker)return;this.sender=new AI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Up();return await TT(e,ad,"1"),await bT(e,ad),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>TT(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>jI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=jd(o,!1).getAll();return new Xc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)r.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!r.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const o of Array.from(r))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n0.type="LOCAL";const kI=n0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n,e){return Mn(n,"POST","/v2/accounts/mfaSignIn:start",kn(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp=qw("rcb"),MI=new Yc(3e4,6e4);class VI{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Lt().grecaptcha?.render}load(e,t=""){return ve(LI(t),e,"argument-error"),this.shouldResolveImmediately(t)&&uT(Lt().grecaptcha)?Promise.resolve(Lt().grecaptcha):new Promise((r,o)=>{const l=Lt().setTimeout(()=>{o(jn(e,"network-request-failed"))},MI.get());Lt()[fp]=()=>{Lt().clearTimeout(l),delete Lt()[fp];const m=Lt().grecaptcha;if(!m||!uT(m)){o(jn(e,"internal-error"));return}const y=m.render;m.render=(p,_)=>{const b=y(p,_);return this.counter++,b},this.hostLanguage=t,r(m)};const d=`${PN()}?${Ko({onload:fp,render:"explicit",hl:t})}`;Ag(d).catch(()=>{clearTimeout(l),o(jn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!Lt().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function LI(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class UI{async load(e){return new UN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sc="recaptcha",BI={theme:"light",type:"image"};class Bp{constructor(e,t,r={...BI}){this.parameters=r,this.type=Sc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bi(e),this.isInvisible=this.parameters.size==="invisible",ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;ve(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UI:new VI,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(o=>{const l=d=>{d&&(this.tokenChangeListeners.delete(l),o(d))};this.tokenChangeListeners.add(l),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){ve(!this.parameters.sitekey,this.auth,"argument-error"),ve(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ve(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Lt()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){ve(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ve(Sw()&&!Ng(),this.auth,"internal-error"),await zI(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await vN(this.auth);ve(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ve(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function zI(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=wc._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function i0(n,e,t){if(vn(n.app))return Promise.reject(Hi(n));const r=bi(n),o=await FI(r,e,Ze(t));return new qI(o,l=>Kw(r,l))}async function FI(n,e,t){if(!n._getRecaptchaConfig())try{await GN(n)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(typeof e=="string"?r={phoneNumber:e}:r=e,"session"in r){const o=r.session;if("phoneNumber"in r){ve(o.type==="enroll",n,"internal-error");const l={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Po(n,l,"mfaSmsEnrollment",async(p,_)=>{if(_.phoneEnrollmentInfo.captchaResponse===bc){ve(t?.type===Sc,p,"argument-error");const b=await mp(p,_,t);return ET(p,b)}return ET(p,_)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).phoneSessionInfo.sessionInfo}else{ve(o.type==="signin",n,"internal-error");const l=r.multiFactorHint?.uid||r.multiFactorUid;ve(l,n,"missing-multi-factor-info");const d={mfaPendingCredential:o.credential,mfaEnrollmentId:l,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Po(n,d,"mfaSmsSignIn",async(_,b)=>{if(b.phoneSignInInfo.captchaResponse===bc){ve(t?.type===Sc,_,"argument-error");const w=await mp(_,b,t);return wT(_,w)}return wT(_,b)},"PHONE_PROVIDER").catch(_=>Promise.reject(_))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Po(n,o,"sendVerificationCode",async(y,p)=>{if(p.captchaResponse===bc){ve(t?.type===Sc,y,"argument-error");const _=await mp(y,p,t);return vT(y,_)}return vT(y,p)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).sessionInfo}}finally{t?._reset()}}async function mp(n,e,t){ve(t.type===Sc,n,"argument-error");const r=await t.verify();ve(typeof r=="string",n,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const l=o.phoneEnrollmentInfo.phoneNumber,d=o.phoneEnrollmentInfo.captchaResponse,m=o.phoneEnrollmentInfo.clientType,y=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:r,captchaResponse:d,clientType:m,recaptchaVersion:y}}),o}else if("phoneSignInInfo"in o){const l=o.phoneSignInInfo.captchaResponse,d=o.phoneSignInInfo.clientType,m=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:l,clientType:d,recaptchaVersion:m}}),o}else return Object.assign(o,{recaptchaToken:r}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(n,e){return e?Rs(e):(ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Nd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function HI(n){return Yw(n.auth,new Ig(n),n.bypassAuthState)}function GI(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),$w(t,new Ig(n),n.bypassAuthState)}async function $I(n){const{auth:e,user:t}=n;return ve(t,e,"internal-error"),uI(t,new Ig(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{constructor(e,t,r,o,l=!1){this.auth=e,this.resolver=r,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:o,tenantId:l,error:d,type:m}=e;if(d){this.reject(d);return}const y={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(y))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return HI;case"linkViaPopup":case"linkViaRedirect":return $I;case"reauthViaPopup":case"reauthViaRedirect":return GI;default:ci(this.auth,"internal-error")}}resolve(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=new Yc(2e3,1e4);async function a0(n,e,t){if(vn(n.app))return Promise.reject(jn(n,"operation-not-supported-in-this-environment"));const r=bi(n);uN(n,e,xg);const o=s0(r,t);return new _a(r,"signInViaPopup",e,o).executeNotNull()}class _a extends r0{constructor(e,t,r,o,l){super(e,t,o,l),this.provider=r,this.authWindow=null,this.pollId=null,_a.currentPopupAction&&_a.currentPopupAction.cancel(),_a.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ve(e,this.auth,"internal-error"),e}async onExecution(){Os(this.filter.length===1,"Popup operations only handle one event");const e=Cg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_a.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,YI.get())};e()}}_a.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",$h=new Map;class QI extends r0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const r=await XI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XI(n,e){const t=JI(e),r=ZI(n);if(!await r._isAvailable())return!1;const o=await r._get(t)==="true";return await r._remove(t),o}function WI(n,e){$h.set(n._key(),e)}function ZI(n){return Rs(n._redirectPersistence)}function JI(n){return Gh(KI,n.config.apiKey,n.name)}async function eD(n,e,t=!1){if(vn(n.app))return Promise.reject(Hi(n));const r=bi(n),o=s0(r,e),d=await new QI(r,o,t).execute();return d&&!t&&(delete d.user._redirectEventId,await r._persistUserIfCurrent(d.user),await r._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD=600*1e3;class nD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iD(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!o0(e)){const r=e.error.code?.split("auth/")[1]||"internal-error";t.onError(jn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tD&&this.cachedEventUids.clear(),this.cachedEventUids.has(ST(e))}saveEventToCache(e){this.cachedEventUids.add(ST(e)),this.lastProcessedEventTime=Date.now()}}function ST(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function o0({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function iD(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return o0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sD(n,e={}){return Mn(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aD=/^https?/;async function oD(n){if(n.config.emulator)return;const{authorizedDomains:e}=await sD(n);for(const t of e)try{if(lD(t))return}catch{}ci(n,"unauthorized-domain")}function lD(n){const e=Vp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const d=new URL(n);return d.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&d.hostname===r}if(!aD.test(t))return!1;if(rD.test(n))return r===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD=new Yc(3e4,6e4);function AT(){const n=Lt().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function uD(n){return new Promise((e,t)=>{function r(){AT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{AT(),t(jn(n,"network-request-failed"))},timeout:cD.get()})}if(Lt().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Lt().gapi?.load)r();else{const o=qw("iframefcb");return Lt()[o]=()=>{gapi.load?r():t(jn(n,"network-request-failed"))},Ag(`${MN()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Yh=null,e})}let Yh=null;function hD(n){return Yh=Yh||uD(n),Yh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=new Yc(5e3,15e3),fD="__/auth/iframe",mD="emulator/auth/iframe",pD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yD(n){const e=n.config;ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?bg(e,mD):`https://${n.config.authDomain}/${fD}`,r={apiKey:e.apiKey,appName:n.name,v:Da},o=gD.get(n.config.apiHost);o&&(r.eid=o);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${Ko(r).slice(1)}`}async function vD(n){const e=await hD(n),t=Lt().gapi;return ve(t,n,"internal-error"),e.open({where:document.body,url:yD(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pD,dontclear:!0},r=>new Promise(async(o,l)=>{await r.restyle({setHideOnLeave:!1});const d=jn(n,"network-request-failed"),m=Lt().setTimeout(()=>{l(d)},dD.get());function y(){Lt().clearTimeout(m),o(r)}r.ping(y).then(y,()=>{l(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ED=500,TD=600,bD="_blank",wD="http://localhost";class RT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function SD(n,e,t,r=ED,o=TD){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-r)/2,0).toString();let m="";const y={..._D,width:r.toString(),height:o.toString(),top:l,left:d},p=_n().toLowerCase();t&&(m=kw(p)?bD:t),Ow(p)&&(e=e||wD,y.scrollbars="yes");const _=Object.entries(y).reduce((w,[I,M])=>`${w}${I}=${M},`,"");if(RN(p)&&m!=="_self")return AD(e||"",m),new RT(null);const b=window.open(e||"",m,_);ve(b,n,"popup-blocked");try{b.focus()}catch{}return new RT(b)}function AD(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RD="__/auth/handler",xD="emulator/auth/handler",CD=encodeURIComponent("fac");async function xT(n,e,t,r,o,l){ve(n.config.authDomain,n,"auth-domain-config-required"),ve(n.config.apiKey,n,"invalid-api-key");const d={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Da,eventId:o};if(e instanceof xg){e.setDefaultLanguage(n.languageCode),d.providerId=e.providerId||"",X1(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Qc){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}n.tenantId&&(d.tid=n.tenantId);const m=d;for(const _ of Object.keys(m))m[_]===void 0&&delete m[_];const y=await n._getAppCheckToken(),p=y?`#${CD}=${encodeURIComponent(y)}`:"";return`${ND(n)}?${Ko(m).slice(1)}${p}`}function ND({config:n}){return n.emulator?bg(n,xD):`https://${n.authDomain}/${RD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="webStorageSupport";class ID{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jw,this._completeRedirectFn=eD,this._overrideRedirectResult=WI}async _openPopup(e,t,r,o){Os(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await xT(e,t,r,Vp(),o);return SD(e,l,Cg())}async _openRedirect(e,t,r,o){await this._originValidation(e);const l=await xT(e,t,r,Vp(),o);return RI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Os(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vD(e),r=new nD(e);return t.register("authEvent",o=>(ve(o?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(pp,{type:pp},o=>{const l=o?.[0]?.[pp];l!==void 0&&t(!!l),ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=oD(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Bw()||Pw()||Sg()}}const DD=ID;var CT="@firebase/auth",NT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OD(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PD(n){Rr(new Ds("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:d,authDomain:m}=r.options;ve(d&&!d.includes(":"),"invalid-api-key",{appName:r.name});const y={apiKey:d,authDomain:m,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zw(n)},p=new jN(r,o,l,y);return YN(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rr(new Ds("auth-internal",e=>{const t=bi(e.getProvider("auth").getImmediate());return(r=>new jD(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),li(CT,NT,OD(n)),li(CT,NT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD=300,MD=pw("authIdTokenMaxAge")||kD;let IT=null;const VD=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>MD)return;const o=t?.token;IT!==o&&(IT=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function LD(n=Cd()){const e=$c(n,"auth");if(e.isInitialized())return e.getImmediate();const t=$N(n,{popupRedirectResolver:DD,persistence:[kI,wI,Jw]}),r=pw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const d=VD(l.toString());_I(t,d,()=>d(t.currentUser)),vI(t,m=>d(m))}}const o=fw("auth");return o&&KN(t,`http://${o}`),t}function UD(){return document.getElementsByTagName("head")?.[0]??document}ON({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=o=>{const l=jn("internal-error");l.customData=o,t(l)},r.type="text/javascript",r.charset="UTF-8",UD().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PD("Browser");var BD="firebase",zD="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */li(BD,zD,"app");var DT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sr,l0;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,R){function x(){}x.prototype=R.prototype,D.D=R.prototype,D.prototype=new x,D.prototype.constructor=D,D.C=function(C,O,V){for(var N=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)N[Oe-2]=arguments[Oe];return R.prototype[O].apply(C,N)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,R,x){x||(x=0);var C=Array(16);if(typeof R=="string")for(var O=0;16>O;++O)C[O]=R.charCodeAt(x++)|R.charCodeAt(x++)<<8|R.charCodeAt(x++)<<16|R.charCodeAt(x++)<<24;else for(O=0;16>O;++O)C[O]=R[x++]|R[x++]<<8|R[x++]<<16|R[x++]<<24;R=D.g[0],x=D.g[1],O=D.g[2];var V=D.g[3],N=R+(V^x&(O^V))+C[0]+3614090360&4294967295;R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[1]+3905402710&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[2]+606105819&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[3]+3250441966&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[4]+4118548399&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[5]+1200080426&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[6]+2821735955&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[7]+4249261313&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[8]+1770035416&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[9]+2336552879&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[10]+4294925233&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[11]+2304563134&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(V^x&(O^V))+C[12]+1804603682&4294967295,R=x+(N<<7&4294967295|N>>>25),N=V+(O^R&(x^O))+C[13]+4254626195&4294967295,V=R+(N<<12&4294967295|N>>>20),N=O+(x^V&(R^x))+C[14]+2792965006&4294967295,O=V+(N<<17&4294967295|N>>>15),N=x+(R^O&(V^R))+C[15]+1236535329&4294967295,x=O+(N<<22&4294967295|N>>>10),N=R+(O^V&(x^O))+C[1]+4129170786&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[6]+3225465664&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[11]+643717713&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[0]+3921069994&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[5]+3593408605&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[10]+38016083&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[15]+3634488961&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[4]+3889429448&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[9]+568446438&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[14]+3275163606&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[3]+4107603335&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[8]+1163531501&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(O^V&(x^O))+C[13]+2850285829&4294967295,R=x+(N<<5&4294967295|N>>>27),N=V+(x^O&(R^x))+C[2]+4243563512&4294967295,V=R+(N<<9&4294967295|N>>>23),N=O+(R^x&(V^R))+C[7]+1735328473&4294967295,O=V+(N<<14&4294967295|N>>>18),N=x+(V^R&(O^V))+C[12]+2368359562&4294967295,x=O+(N<<20&4294967295|N>>>12),N=R+(x^O^V)+C[5]+4294588738&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[8]+2272392833&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[11]+1839030562&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[14]+4259657740&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[1]+2763975236&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[4]+1272893353&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[7]+4139469664&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[10]+3200236656&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[13]+681279174&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[0]+3936430074&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[3]+3572445317&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[6]+76029189&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(x^O^V)+C[9]+3654602809&4294967295,R=x+(N<<4&4294967295|N>>>28),N=V+(R^x^O)+C[12]+3873151461&4294967295,V=R+(N<<11&4294967295|N>>>21),N=O+(V^R^x)+C[15]+530742520&4294967295,O=V+(N<<16&4294967295|N>>>16),N=x+(O^V^R)+C[2]+3299628645&4294967295,x=O+(N<<23&4294967295|N>>>9),N=R+(O^(x|~V))+C[0]+4096336452&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[7]+1126891415&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[14]+2878612391&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[5]+4237533241&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[12]+1700485571&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[3]+2399980690&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[10]+4293915773&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[1]+2240044497&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[8]+1873313359&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[15]+4264355552&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[6]+2734768916&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[13]+1309151649&4294967295,x=O+(N<<21&4294967295|N>>>11),N=R+(O^(x|~V))+C[4]+4149444226&4294967295,R=x+(N<<6&4294967295|N>>>26),N=V+(x^(R|~O))+C[11]+3174756917&4294967295,V=R+(N<<10&4294967295|N>>>22),N=O+(R^(V|~x))+C[2]+718787259&4294967295,O=V+(N<<15&4294967295|N>>>17),N=x+(V^(O|~R))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+R&4294967295,D.g[1]=D.g[1]+(O+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+V&4294967295}r.prototype.u=function(D,R){R===void 0&&(R=D.length);for(var x=R-this.blockSize,C=this.B,O=this.h,V=0;V<R;){if(O==0)for(;V<=x;)o(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<R;)if(C[O++]=D.charCodeAt(V++),O==this.blockSize){o(this,C),O=0;break}}else for(;V<R;)if(C[O++]=D[V++],O==this.blockSize){o(this,C),O=0;break}}this.h=O,this.o+=R},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var R=1;R<D.length-8;++R)D[R]=0;var x=8*this.o;for(R=D.length-8;R<D.length;++R)D[R]=x&255,x/=256;for(this.u(D),D=Array(16),R=x=0;4>R;++R)for(var C=0;32>C;C+=8)D[x++]=this.g[R]>>>C&255;return D};function l(D,R){var x=m;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=R(D)}function d(D,R){this.h=R;for(var x=[],C=!0,O=D.length-1;0<=O;O--){var V=D[O]|0;C&&V==R||(x[O]=V,C=!1)}this.g=x}var m={};function y(D){return-128<=D&&128>D?l(D,function(R){return new d([R|0],0>R?-1:0)}):new d([D|0],0>D?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return b;if(0>D)return j(p(-D));for(var R=[],x=1,C=0;D>=x;C++)R[C]=D/x|0,x*=4294967296;return new d(R,0)}function _(D,R){if(D.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(D.charAt(0)=="-")return j(_(D.substring(1),R));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var x=p(Math.pow(R,8)),C=b,O=0;O<D.length;O+=8){var V=Math.min(8,D.length-O),N=parseInt(D.substring(O,O+V),R);8>V?(V=p(Math.pow(R,V)),C=C.j(V).add(p(N))):(C=C.j(x),C=C.add(p(N)))}return C}var b=y(0),w=y(1),I=y(16777216);n=d.prototype,n.m=function(){if(z(this))return-j(this).m();for(var D=0,R=1,x=0;x<this.g.length;x++){var C=this.i(x);D+=(0<=C?C:4294967296+C)*R,R*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(M(this))return"0";if(z(this))return"-"+j(this).toString(D);for(var R=p(Math.pow(D,6)),x=this,C="";;){var O=ie(x,R).g;x=U(x,O.j(R));var V=((0<x.g.length?x.g[0]:x.h)>>>0).toString(D);if(x=O,M(x))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function M(D){if(D.h!=0)return!1;for(var R=0;R<D.g.length;R++)if(D.g[R]!=0)return!1;return!0}function z(D){return D.h==-1}n.l=function(D){return D=U(this,D),z(D)?-1:M(D)?0:1};function j(D){for(var R=D.g.length,x=[],C=0;C<R;C++)x[C]=~D.g[C];return new d(x,~D.h).add(w)}n.abs=function(){return z(this)?j(this):this},n.add=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0,O=0;O<=R;O++){var V=C+(this.i(O)&65535)+(D.i(O)&65535),N=(V>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);C=N>>>16,V&=65535,N&=65535,x[O]=N<<16|V}return new d(x,x[x.length-1]&-2147483648?-1:0)};function U(D,R){return D.add(j(R))}n.j=function(D){if(M(this)||M(D))return b;if(z(this))return z(D)?j(this).j(j(D)):j(j(this).j(D));if(z(D))return j(this.j(j(D)));if(0>this.l(I)&&0>D.l(I))return p(this.m()*D.m());for(var R=this.g.length+D.g.length,x=[],C=0;C<2*R;C++)x[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<D.g.length;O++){var V=this.i(C)>>>16,N=this.i(C)&65535,Oe=D.i(O)>>>16,Ie=D.i(O)&65535;x[2*C+2*O]+=N*Ie,G(x,2*C+2*O),x[2*C+2*O+1]+=V*Ie,G(x,2*C+2*O+1),x[2*C+2*O+1]+=N*Oe,G(x,2*C+2*O+1),x[2*C+2*O+2]+=V*Oe,G(x,2*C+2*O+2)}for(C=0;C<R;C++)x[C]=x[2*C+1]<<16|x[2*C];for(C=R;C<2*R;C++)x[C]=0;return new d(x,0)};function G(D,R){for(;(D[R]&65535)!=D[R];)D[R+1]+=D[R]>>>16,D[R]&=65535,R++}function Q(D,R){this.g=D,this.h=R}function ie(D,R){if(M(R))throw Error("division by zero");if(M(D))return new Q(b,b);if(z(D))return R=ie(j(D),R),new Q(j(R.g),j(R.h));if(z(R))return R=ie(D,j(R)),new Q(j(R.g),R.h);if(30<D.g.length){if(z(D)||z(R))throw Error("slowDivide_ only works with positive integers.");for(var x=w,C=R;0>=C.l(D);)x=ee(x),C=ee(C);var O=te(x,1),V=te(C,1);for(C=te(C,2),x=te(x,2);!M(C);){var N=V.add(C);0>=N.l(D)&&(O=O.add(x),V=N),C=te(C,1),x=te(x,1)}return R=U(D,O.j(R)),new Q(O,R)}for(O=b;0<=D.l(R);){for(x=Math.max(1,Math.floor(D.m()/R.m())),C=Math.ceil(Math.log(x)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=p(x),N=V.j(R);z(N)||0<N.l(D);)x-=C,V=p(x),N=V.j(R);M(V)&&(V=w),O=O.add(V),D=U(D,N)}return new Q(O,D)}n.A=function(D){return ie(this,D).h},n.and=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)&D.i(C);return new d(x,this.h&D.h)},n.or=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)|D.i(C);return new d(x,this.h|D.h)},n.xor=function(D){for(var R=Math.max(this.g.length,D.g.length),x=[],C=0;C<R;C++)x[C]=this.i(C)^D.i(C);return new d(x,this.h^D.h)};function ee(D){for(var R=D.g.length+1,x=[],C=0;C<R;C++)x[C]=D.i(C)<<1|D.i(C-1)>>>31;return new d(x,D.h)}function te(D,R){var x=R>>5;R%=32;for(var C=D.g.length-x,O=[],V=0;V<C;V++)O[V]=0<R?D.i(V+x)>>>R|D.i(V+x+1)<<32-R:D.i(V+x);return new d(O,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,l0=r,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=p,d.fromString=_,Sr=d}).apply(typeof DT<"u"?DT:typeof self<"u"?self:typeof window<"u"?window:{});var Oh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var c0,gc,u0,Kh,zp,h0,d0,f0;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,E){return h==Array.prototype||h==Object.prototype||(h[v]=E.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Oh=="object"&&Oh];for(var v=0;v<h.length;++v){var E=h[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function o(h,v){if(v)e:{var E=r;h=h.split(".");for(var A=0;A<h.length-1;A++){var F=h[A];if(!(F in E))break e;E=E[F]}h=h[h.length-1],A=E[h],v=v(A),v!=A&&v!=null&&e(E,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var E=0,A=!1,F={next:function(){if(!A&&E<h.length){var W=E++;return{value:v(W,h[W]),done:!1}}return A=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}o("Array.prototype.values",function(h){return h||function(){return l(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function _(h,v,E){return h.call.apply(h.bind,arguments)}function b(h,v,E){if(!h)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,A),h.apply(v,F)}}return function(){return h.apply(v,arguments)}}function w(h,v,E){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:b,w.apply(null,arguments)}function I(h,v){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function M(h,v){function E(){}E.prototype=v.prototype,h.aa=v.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(A,F,W){for(var fe=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)fe[Fe-2]=arguments[Fe];return v.prototype[F].apply(A,fe)}}function z(h){const v=h.length;if(0<v){const E=Array(v);for(let A=0;A<v;A++)E[A]=h[A];return E}return[]}function j(h,v){for(let E=1;E<arguments.length;E++){const A=arguments[E];if(y(A)){const F=h.length||0,W=A.length||0;h.length=F+W;for(let fe=0;fe<W;fe++)h[F+fe]=A[fe]}else h.push(A)}}class U{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function G(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=m.navigator;return h&&(h=h.userAgent)?h:""}function ie(h){return ie[" "](h),h}ie[" "]=function(){};var ee=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function te(h,v,E){for(const A in h)v.call(E,h[A],A,h)}function D(h,v){for(const E in h)v.call(void 0,h[E],E,h)}function R(h){const v={};for(const E in h)v[E]=h[E];return v}const x="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(h,v){let E,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(E in A)h[E]=A[E];for(let W=0;W<x.length;W++)E=x[W],Object.prototype.hasOwnProperty.call(A,E)&&(h[E]=A[E])}}function O(h){var v=1;h=h.split(":");const E=[];for(;0<v&&h.length;)E.push(h.shift()),v--;return h.length&&E.push(h.join(":")),E}function V(h){m.setTimeout(()=>{throw h},0)}function N(){var h=ce;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class Oe{constructor(){this.h=this.g=null}add(v,E){const A=Ie.get();A.set(v,E),this.h?this.h.next=A:this.g=A,this.h=A}}var Ie=new U(()=>new X,h=>h.reset());class X{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let me,Ee=!1,ce=new Oe,k=()=>{const h=m.Promise.resolve(void 0);me=()=>{h.then(Z)}};var Z=()=>{for(var h;h=N();){try{h.h.call(h.g)}catch(E){V(E)}var v=Ie;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}Ee=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function le(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}le.prototype.h=function(){this.defaultPrevented=!0};var ue=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};m.addEventListener("test",E,v),m.removeEventListener("test",E,v)}catch{}return h})();function pe(h,v){if(le.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(ee){e:{try{ie(v.nodeName);var F=!0;break e}catch{}F=!1}F||(v=null)}}else E=="mouseover"?v=h.fromElement:E=="mouseout"&&(v=h.toElement);this.relatedTarget=v,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:de[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&pe.aa.h.call(this)}}M(pe,le);var de={2:"touch",3:"pen",4:"mouse"};pe.prototype.h=function(){pe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),qe=0;function pt(h,v,E,A,F){this.listener=h,this.proxy=null,this.src=v,this.type=E,this.capture=!!A,this.ha=F,this.key=++qe,this.da=this.fa=!1}function ft(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function An(h){this.src=h,this.g={},this.h=0}An.prototype.add=function(h,v,E,A,F){var W=h.toString();h=this.g[W],h||(h=this.g[W]=[],this.h++);var fe=Us(h,v,A,F);return-1<fe?(v=h[fe],E||(v.fa=!1)):(v=new pt(v,this.src,W,!!A,F),v.fa=E,h.push(v)),v};function Vn(h,v){var E=v.type;if(E in h.g){var A=h.g[E],F=Array.prototype.indexOf.call(A,v,void 0),W;(W=0<=F)&&Array.prototype.splice.call(A,F,1),W&&(ft(v),h.g[E].length==0&&(delete h.g[E],h.h--))}}function Us(h,v,E,A){for(var F=0;F<h.length;++F){var W=h[F];if(!W.da&&W.listener==v&&W.capture==!!E&&W.ha==A)return F}return-1}var ui="closure_lm_"+(1e6*Math.random()|0),wi={};function Vr(h,v,E,A,F){if(Array.isArray(v)){for(var W=0;W<v.length;W++)Vr(h,v[W],E,A,F);return null}return E=lu(E),h&&h[Ke]?h.K(v,E,p(A)?!!A.capture:!1,F):Ye(h,v,E,!1,A,F)}function Ye(h,v,E,A,F,W){if(!v)throw Error("Invalid event type");var fe=p(F)?!!F.capture:!!F,Fe=ka(h);if(Fe||(h[ui]=Fe=new An(h)),E=Fe.add(v,E,A,fe,W),E.proxy)return E;if(A=je(),E.proxy=A,A.src=h,A.listener=E,h.addEventListener)ue||(F=fe),F===void 0&&(F=!1),h.addEventListener(v.toString(),A,F);else if(h.attachEvent)h.attachEvent(Zi(v.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function je(){function h(E){return v.call(h.src,h.listener,E)}const v=Jd;return h}function Bs(h,v,E,A,F){if(Array.isArray(v))for(var W=0;W<v.length;W++)Bs(h,v[W],E,A,F);else A=p(A)?!!A.capture:!!A,E=lu(E),h&&h[Ke]?(h=h.i,v=String(v).toString(),v in h.g&&(W=h.g[v],E=Us(W,E,A,F),-1<E&&(ft(W[E]),Array.prototype.splice.call(W,E,1),W.length==0&&(delete h.g[v],h.h--)))):h&&(h=ka(h))&&(v=h.g[v.toString()],h=-1,v&&(h=Us(v,E,A,F)),(E=-1<h?v[h]:null)&&Si(E))}function Si(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[Ke])Vn(v.i,h);else{var E=h.type,A=h.proxy;v.removeEventListener?v.removeEventListener(E,A,h.capture):v.detachEvent?v.detachEvent(Zi(E),A):v.addListener&&v.removeListener&&v.removeListener(A),(E=ka(v))?(Vn(E,h),E.h==0&&(E.src=null,v[ui]=null)):ft(h)}}}function Zi(h){return h in wi?wi[h]:wi[h]="on"+h}function Jd(h,v){if(h.da)h=!0;else{v=new pe(v,this);var E=h.listener,A=h.ha||h.src;h.fa&&Si(h),h=E.call(A,v)}return h}function ka(h){return h=h[ui],h instanceof An?h:null}var el="__closure_events_fn_"+(1e9*Math.random()>>>0);function lu(h){return typeof h=="function"?h:(h[el]||(h[el]=function(v){return h.handleEvent(v)}),h[el])}function wt(){he.call(this),this.i=new An(this),this.M=this,this.F=null}M(wt,he),wt.prototype[Ke]=!0,wt.prototype.removeEventListener=function(h,v,E,A){Bs(this,h,v,E,A)};function tt(h,v){var E,A=h.F;if(A)for(E=[];A;A=A.F)E.push(A);if(h=h.M,A=v.type||v,typeof v=="string")v=new le(v,h);else if(v instanceof le)v.target=v.target||h;else{var F=v;v=new le(A,h),C(v,F)}if(F=!0,E)for(var W=E.length-1;0<=W;W--){var fe=v.g=E[W];F=Ln(fe,A,!0,v)&&F}if(fe=v.g=h,F=Ln(fe,A,!0,v)&&F,F=Ln(fe,A,!1,v)&&F,E)for(W=0;W<E.length;W++)fe=v.g=E[W],F=Ln(fe,A,!1,v)&&F}wt.prototype.N=function(){if(wt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var E=h.g[v],A=0;A<E.length;A++)ft(E[A]);delete h.g[v],h.h--}}this.F=null},wt.prototype.K=function(h,v,E,A){return this.i.add(String(h),v,!1,E,A)},wt.prototype.L=function(h,v,E,A){return this.i.add(String(h),v,!0,E,A)};function Ln(h,v,E,A){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var F=!0,W=0;W<v.length;++W){var fe=v[W];if(fe&&!fe.da&&fe.capture==E){var Fe=fe.listener,qt=fe.ha||fe.src;fe.fa&&Vn(h.i,fe),F=Fe.call(qt,A)!==!1&&F}}return F&&!A.defaultPrevented}function hn(h,v,E){if(typeof h=="function")E&&(h=w(h,E));else if(h&&typeof h.handleEvent=="function")h=w(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:m.setTimeout(h,v||0)}function cu(h){h.g=hn(()=>{h.g=null,h.i&&(h.i=!1,cu(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class ef extends he{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:cu(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lr(h){he.call(this),this.h=h,this.g={}}M(Lr,he);var Ur=[];function Br(h){te(h.g,function(v,E){this.g.hasOwnProperty(E)&&Si(v)},h),h.g={}}Lr.prototype.N=function(){Lr.aa.N.call(this),Br(this)},Lr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hi=m.JSON.stringify,Ma=m.JSON.parse,zr=class{stringify(h){return m.JSON.stringify(h,void 0)}parse(h){return m.JSON.parse(h,void 0)}};function tl(){}tl.prototype.h=null;function nl(h){return h.h||(h.h=h.i())}function il(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function es(){le.call(this,"d")}M(es,le);function sl(){le.call(this,"c")}M(sl,le);var Ai={},rl=null;function zs(){return rl=rl||new wt}Ai.La="serverreachability";function Va(h){le.call(this,Ai.La,h)}M(Va,le);function qs(h){const v=zs();tt(v,new Va(v))}Ai.STAT_EVENT="statevent";function uu(h,v){le.call(this,Ai.STAT_EVENT,h),this.stat=v}M(uu,le);function gt(h){const v=zs();tt(v,new uu(v,h))}Ai.Ma="timingevent";function zt(h,v){le.call(this,Ai.Ma,h),this.size=v}M(zt,le);function Ot(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){h()},v)}function Qn(){this.g=!0}Qn.prototype.xa=function(){this.g=!1};function al(h,v,E,A,F,W){h.info(function(){if(h.g)if(W)for(var fe="",Fe=W.split("&"),qt=0;qt<Fe.length;qt++){var He=Fe[qt].split("=");if(1<He.length){var Xt=He[0];He=He[1];var Ft=Xt.split("_");fe=2<=Ft.length&&Ft[1]=="type"?fe+(Xt+"="+He+"&"):fe+(Xt+"=redacted&")}}else fe=null;else fe=W;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+v+`
`+E+`
`+fe})}function tf(h,v,E,A,F,W,fe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+v+`
`+E+`
`+W+" "+fe})}function Fs(h,v,E,A){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+qr(h,E)+(A?" "+A:"")})}function hu(h,v){h.info(function(){return"TIMEOUT: "+v})}Qn.prototype.info=function(){};function qr(h,v){if(!h.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var A=E[h];if(!(2>A.length)){var F=A[1];if(Array.isArray(F)&&!(1>F.length)){var W=F[0];if(W!="noop"&&W!="stop"&&W!="close")for(var fe=1;fe<F.length;fe++)F[fe]=""}}}}return hi(E)}catch{return v}}var Hs={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ts={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ri;function xi(){}M(xi,tl),xi.prototype.g=function(){return new XMLHttpRequest},xi.prototype.i=function(){return{}},Ri=new xi;function En(h,v,E,A){this.j=h,this.i=v,this.l=E,this.R=A||1,this.U=new Lr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Nt}function Nt(){this.i=null,this.g="",this.h=!1}var ol={},La={};function di(h,v,E){h.L=1,h.v=Yr(Un(v)),h.m=E,h.P=!0,ns(h,null)}function ns(h,v){h.F=Date.now(),Fr(h),h.A=Un(h.v);var E=h.A,A=h.R;Array.isArray(A)||(A=[String(A)]),fl(E.i,"t",A),h.C=0,E=h.j.J,h.h=new Nt,h.g=xu(h.j,E?v:null,!h.m),0<h.O&&(h.M=new ef(w(h.Y,h,h.g),h.O)),v=h.U,E=h.g,A=h.ca;var F="readystatechange";Array.isArray(F)||(F&&(Ur[0]=F.toString()),F=Ur);for(var W=0;W<F.length;W++){var fe=Vr(E,F[W],A||v.handleEvent,!1,v.h||v);if(!fe)break;v.g[fe.key]=fe}v=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),qs(),al(h.i,h.u,h.A,h.l,h.R,h.m)}En.prototype.ca=function(h){h=h.target;const v=this.M;v&&Jn(h)==3?v.j():this.Y(h)},En.prototype.Y=function(h){try{if(h==this.g)e:{const Ft=Jn(this.g);var v=this.g.Ba();const us=this.g.Z();if(!(3>Ft)&&(Ft!=3||this.g&&(this.h.h||this.g.oa()||_u(this.g)))){this.J||Ft!=4||v==7||(v==8||0>=us?qs(3):qs(2)),Gs(this);var E=this.g.Z();this.X=E;t:if(du(this)){var A=_u(this.g);h="";var F=A.length,W=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){tn(this),Ci(this);var fe="";break t}this.h.i=new m.TextDecoder}for(v=0;v<F;v++)this.h.h=!0,h+=this.h.i.decode(A[v],{stream:!(W&&v==F-1)});A.length=0,this.h.g+=h,this.C=0,fe=this.h.g}else fe=this.g.oa();if(this.o=E==200,tf(this.i,this.u,this.A,this.l,this.R,Ft,E),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,qt=this.g;if((Fe=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Fe)){var He=Fe;break t}}He=null}if(E=He)Fs(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hr(this,E);else{this.o=!1,this.s=3,gt(12),tn(this),Ci(this);break e}}if(this.P){E=!0;let nn;for(;!this.J&&this.C<fe.length;)if(nn=fu(this,fe),nn==La){Ft==4&&(this.s=4,gt(14),E=!1),Fs(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==ol){this.s=4,gt(15),Fs(this.i,this.l,fe,"[Invalid Chunk]"),E=!1;break}else Fs(this.i,this.l,nn,null),Hr(this,nn);if(du(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ft!=4||fe.length!=0||this.h.h||(this.s=1,gt(16),E=!1),this.o=this.o&&E,!E)Fs(this.i,this.l,fe,"[Invalid Chunked Response]"),tn(this),Ci(this);else if(0<fe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+fe.length),ta(Xt),Xt.M=!0,gt(11))}}else Fs(this.i,this.l,fe,null),Hr(this,fe);Ft==4&&tn(this),this.o&&!this.J&&(Ft==4?Su(this.j,this):(this.o=!1,Fr(this)))}else of(this.g),E==400&&0<fe.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),tn(this),Ci(this)}}}catch{}finally{}};function du(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function fu(h,v){var E=h.C,A=v.indexOf(`
`,E);return A==-1?La:(E=Number(v.substring(E,A)),isNaN(E)?ol:(A+=1,A+E>v.length?La:(v=v.slice(A,A+E),h.C=A+E,v)))}En.prototype.cancel=function(){this.J=!0,tn(this)};function Fr(h){h.S=Date.now()+h.I,mu(h,h.I)}function mu(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Ot(w(h.ba,h),v)}function Gs(h){h.B&&(m.clearTimeout(h.B),h.B=null)}En.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(hu(this.i,this.A),this.L!=2&&(qs(),gt(17)),tn(this),this.s=2,Ci(this)):mu(this,this.S-h)};function Ci(h){h.j.G==0||h.J||Su(h.j,h)}function tn(h){Gs(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,Br(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Hr(h,v){try{var E=h.j;if(E.G!=0&&(E.g==h||ll(E.h,h))){if(!h.K&&ll(E.h,h)&&E.G==3){try{var A=E.Da.g.parse(v)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)Xa(E),Ka(E);else break e;vl(E),gt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ot(w(E.Za,E),6e3));if(1>=Ba(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else cs(E,11)}else if((h.K||E.g==h)&&Xa(E),!G(v))for(F=E.Da.g.parse(v),v=0;v<F.length;v++){let He=F[v];if(E.T=He[0],He=He[1],E.G==2)if(He[0]=="c"){E.K=He[1],E.ia=He[2];const Xt=He[3];Xt!=null&&(E.la=Xt,E.j.info("VER="+E.la));const Ft=He[4];Ft!=null&&(E.Aa=Ft,E.j.info("SVER="+E.Aa));const us=He[5];us!=null&&typeof us=="number"&&0<us&&(A=1.5*us,E.L=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const nn=h.g;if(nn){const ki=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var W=A.h;W.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(za(W,W.h),W.h=null))}if(A.D){const El=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;El&&(A.ya=El,st(A.I,A.D,El))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),A=E;var fe=h;if(A.qa=Ru(A,A.J?A.ia:null,A.W),fe.K){Tn(A.h,fe);var Fe=fe,qt=A.L;qt&&(Fe.I=qt),Fe.B&&(Gs(Fe),Fr(Fe)),A.g=fe}else bu(A);0<E.i.length&&Qa(E)}else He[0]!="stop"&&He[0]!="close"||cs(E,7);else E.G==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?cs(E,7):gl(E):He[0]!="noop"&&E.l&&E.l.ta(He),E.v=0)}}qs(4)}catch{}}var pu=class{constructor(h,v){this.g=h,this.map=v}};function is(h){this.l=h||10,m.PerformanceNavigationTiming?(h=m.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ua(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Ba(h){return h.h?1:h.g?h.g.size:0}function ll(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function za(h,v){h.g?h.g.add(v):h.h=v}function Tn(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}is.prototype.cancel=function(){if(this.i=cl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function cl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const E of h.g.values())v=v.concat(E.D);return v}return z(h.i)}function nf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(y(h)){for(var v=[],E=h.length,A=0;A<E;A++)v.push(h[A]);return v}v=[],E=0;for(A in h)v[E++]=h[A];return v}function qa(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(y(h)||typeof h=="string"){var v=[];h=h.length;for(var E=0;E<h;E++)v.push(E);return v}v=[],E=0;for(const A in h)v[E++]=A;return v}}}function ul(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(y(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var E=qa(h),A=nf(h),F=A.length,W=0;W<F;W++)v.call(void 0,A[W],E&&E[W],h)}var Gr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sf(h,v){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var A=h[E].indexOf("="),F=null;if(0<=A){var W=h[E].substring(0,A);F=h[E].substring(A+1)}else W=h[E];v(W,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Pt(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Pt){this.h=h.h,$r(this,h.j),this.o=h.o,this.g=h.g,$s(this,h.s),this.l=h.l;var v=h.i,E=new rs;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),ss(this,E),this.m=h.m}else h&&(v=String(h).match(Gr))?(this.h=!1,$r(this,v[1]||"",!0),this.o=Xn(v[2]||""),this.g=Xn(v[3]||"",!0),$s(this,v[4]),this.l=Xn(v[5]||"",!0),ss(this,v[6]||"",!0),this.m=Xn(v[7]||"")):(this.h=!1,this.i=new rs(null,this.h))}Pt.prototype.toString=function(){var h=[],v=this.j;v&&h.push(Kr(v,hl,!0),":");var E=this.g;return(E||v=="file")&&(h.push("//"),(v=this.o)&&h.push(Kr(v,hl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Kr(E,E.charAt(0)=="/"?rf:dl,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Kr(E,Fa)),h.join("")};function Un(h){return new Pt(h)}function $r(h,v,E){h.j=E?Xn(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function $s(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function ss(h,v,E){v instanceof rs?(h.i=v,yu(h.i,h.h)):(E||(v=Kr(v,af)),h.i=new rs(v,h.h))}function st(h,v,E){h.i.set(v,E)}function Yr(h){return st(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Xn(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Kr(h,v,E){return typeof h=="string"?(h=encodeURI(h).replace(v,gu),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function gu(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var hl=/[#\/\?@]/g,dl=/[#\?:]/g,rf=/[#\?]/g,af=/[#\?@]/g,Fa=/#/g;function rs(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Wn(h){h.g||(h.g=new Map,h.h=0,h.i&&sf(h.i,function(v,E){h.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}n=rs.prototype,n.add=function(h,v){Wn(this),this.i=null,h=Ni(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(v),this.h+=1,this};function as(h,v){Wn(h),v=Ni(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function os(h,v){return Wn(h),v=Ni(h,v),h.g.has(v)}n.forEach=function(h,v){Wn(this),this.g.forEach(function(E,A){E.forEach(function(F){h.call(v,F,A,this)},this)},this)},n.na=function(){Wn(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let A=0;A<v.length;A++){const F=h[A];for(let W=0;W<F.length;W++)E.push(v[A])}return E},n.V=function(h){Wn(this);let v=[];if(typeof h=="string")os(this,h)&&(v=v.concat(this.g.get(Ni(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)v=v.concat(h[E])}return v},n.set=function(h,v){return Wn(this),this.i=null,h=Ni(this,h),os(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},n.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function fl(h,v,E){as(h,v),0<E.length&&(h.i=null,h.g.set(Ni(h,v),z(E)),h.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var A=v[E];const W=encodeURIComponent(String(A)),fe=this.V(A);for(A=0;A<fe.length;A++){var F=W;fe[A]!==""&&(F+="="+encodeURIComponent(String(fe[A]))),h.push(F)}}return this.i=h.join("&")};function Ni(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function yu(h,v){v&&!h.j&&(Wn(h),h.i=null,h.g.forEach(function(E,A){var F=A.toLowerCase();A!=F&&(as(this,A),fl(this,F,E))},h)),h.j=v}function Qr(h,v){const E=new Qn;if(m.Image){const A=new Image;A.onload=I(Zn,E,"TestLoadImage: loaded",!0,v,A),A.onerror=I(Zn,E,"TestLoadImage: error",!1,v,A),A.onabort=I(Zn,E,"TestLoadImage: abort",!1,v,A),A.ontimeout=I(Zn,E,"TestLoadImage: timeout",!1,v,A),m.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else v(!1)}function fi(h,v){const E=new Qn,A=new AbortController,F=setTimeout(()=>{A.abort(),Zn(E,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:A.signal}).then(W=>{clearTimeout(F),W.ok?Zn(E,"TestPingServer: ok",!0,v):Zn(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(F),Zn(E,"TestPingServer: error",!1,v)})}function Zn(h,v,E,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(E)}catch{}}function Xr(){this.g=new zr}function Ii(h,v,E){const A=E||"";try{ul(h,function(F,W){let fe=F;p(F)&&(fe=hi(F)),v.push(A+W+"="+encodeURIComponent(fe))})}catch(F){throw v.push(A+"type="+encodeURIComponent("_badmap")),F}}function Ys(h){this.l=h.Ub||null,this.j=h.eb||!1}M(Ys,tl),Ys.prototype.g=function(){return new ls(this.l,this.j)},Ys.prototype.i=(function(h){return function(){return h}})({});function ls(h,v){wt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}M(ls,wt),n=ls.prototype,n.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,ji(this)},n.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||m).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Di(this)),this.readyState=0},n.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ji(this)),this.g&&(this.readyState=3,ji(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ml(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function ml(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}n.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?Di(this):ji(this),this.readyState==3&&ml(this)}},n.Ra=function(h){this.g&&(this.response=this.responseText=h,Di(this))},n.Qa=function(h){this.g&&(this.response=h,Di(this))},n.ga=function(){this.g&&Di(this)};function Di(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ji(h)}n.setRequestHeader=function(h,v){this.u.append(h,v)},n.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=v.next();return h.join(`\r
`)};function ji(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(ls.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function pl(h){let v="";return te(h,function(E,A){v+=A,v+=":",v+=E,v+=`\r
`}),v}function Qt(h,v,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=pl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):st(h,v,E))}function Je(h){wt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}M(Je,wt);var Ha=/^https?$/i,Wr=["POST","PUT"];n=Je.prototype,n.Ha=function(h){this.J=h},n.ea=function(h,v,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ri.g(),this.v=this.o?nl(this.o):nl(Ri),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(W){vu(this,W);return}if(h=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)E.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())E.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(W=>W.toLowerCase()=="content-type"),F=m.FormData&&h instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Wr,v,void 0))||A||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,fe]of E)this.g.setRequestHeader(W,fe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zr(this),this.u=!0,this.g.send(h),this.u=!1}catch(W){vu(this,W)}};function vu(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,Ga(h),Oi(h)}function Ga(h){h.A||(h.A=!0,tt(h,"complete"),tt(h,"error"))}n.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,tt(this,"complete"),tt(this,"abort"),Oi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oi(this,!0)),Je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?$a(this):this.bb())},n.bb=function(){$a(this)};function $a(h){if(h.h&&typeof d<"u"&&(!h.v[1]||Jn(h)!=4||h.Z()!=2)){if(h.u&&Jn(h)==4)hn(h.Ea,0,h);else if(tt(h,"readystatechange"),Jn(h)==4){h.h=!1;try{const fe=h.Z();e:switch(fe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var A;if(A=fe===0){var F=String(h.D).match(Gr)[1]||null;!F&&m.self&&m.self.location&&(F=m.self.location.protocol.slice(0,-1)),A=!Ha.test(F?F.toLowerCase():"")}E=A}if(E)tt(h,"complete"),tt(h,"success");else{h.m=6;try{var W=2<Jn(h)?h.g.statusText:""}catch{W=""}h.l=W+" ["+h.Z()+"]",Ga(h)}}finally{Oi(h)}}}}function Oi(h,v){if(h.g){Zr(h);const E=h.g,A=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||tt(h,"ready");try{E.onreadystatechange=A}catch{}}}function Zr(h){h.I&&(m.clearTimeout(h.I),h.I=null)}n.isActive=function(){return!!this.g};function Jn(h){return h.g?h.g.readyState:0}n.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),Ma(v)}};function _u(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function of(h){const v={};h=(h.g&&2<=Jn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(G(h[A]))continue;var E=O(h[A]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const W=v[F]||[];v[F]=W,W.push(E)}D(v,function(A){return A.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Jr(h,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||v}function Ya(h){this.Aa=0,this.i=[],this.j=new Qn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Jr("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Jr("baseRetryDelayMs",5e3,h),this.cb=Jr("retryDelaySeedMs",1e4,h),this.Wa=Jr("forwardChannelMaxRetries",2,h),this.wa=Jr("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new is(h&&h.concurrentRequestLimit),this.Da=new Xr,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ya.prototype,n.la=8,n.G=1,n.connect=function(h,v,E,A){gt(0),this.W=h,this.H=v||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.I=Ru(this,null,this.W),Qa(this)};function gl(h){if(Eu(h),h.G==3){var v=h.U++,E=Un(h.I);if(st(E,"SID",h.K),st(E,"RID",v),st(E,"TYPE","terminate"),ea(h,E),v=new En(h,h.j,v),v.L=2,v.v=Yr(Un(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=v.v,E=!0),E||(v.g=xu(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Fr(v)}Au(h)}function Ka(h){h.g&&(ta(h),h.g.cancel(),h.g=null)}function Eu(h){Ka(h),h.u&&(m.clearTimeout(h.u),h.u=null),Xa(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&m.clearTimeout(h.s),h.s=null)}function Qa(h){if(!Ua(h.h)&&!h.s){h.s=!0;var v=h.Ga;me||k(),Ee||(me(),Ee=!0),ce.add(v,h),h.B=0}}function lf(h,v){return Ba(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Ot(w(h.Ga,h,v),_l(h,h.B)),h.B++,!0)}n.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const F=new En(this,this.j,h);let W=this.o;if(this.S&&(W?(W=R(W),C(W,this.S)):W=this.S),this.m!==null||this.O||(F.H=W,W=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(v+=A,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=Tu(this,F,v),E=Un(this.I),st(E,"RID",h),st(E,"CVER",22),this.D&&st(E,"X-HTTP-Session-Id",this.D),ea(this,E),W&&(this.O?v="headers="+encodeURIComponent(String(pl(W)))+"&"+v:this.m&&Qt(E,this.m,W)),za(this.h,F),this.Ua&&st(E,"TYPE","init"),this.P?(st(E,"$req",v),st(E,"SID","null"),F.T=!0,di(F,E,null)):di(F,E,v),this.G=2}}else this.G==3&&(h?yl(this,h):this.i.length==0||Ua(this.h)||yl(this))};function yl(h,v){var E;v?E=v.l:E=h.U++;const A=Un(h.I);st(A,"SID",h.K),st(A,"RID",E),st(A,"AID",h.T),ea(h,A),h.m&&h.o&&Qt(A,h.m,h.o),E=new En(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),v&&(h.i=v.D.concat(h.i)),v=Tu(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),za(h.h,E),di(E,A,v)}function ea(h,v){h.H&&te(h.H,function(E,A){st(v,A,E)}),h.l&&ul({},function(E,A){st(v,A,E)})}function Tu(h,v,E){E=Math.min(h.i.length,E);var A=h.l?w(h.l.Na,h.l,h):null;e:{var F=h.i;let W=-1;for(;;){const fe=["count="+E];W==-1?0<E?(W=F[0].g,fe.push("ofs="+W)):W=0:fe.push("ofs="+W);let Fe=!0;for(let qt=0;qt<E;qt++){let He=F[qt].g;const Xt=F[qt].map;if(He-=W,0>He)W=Math.max(0,F[qt].g-100),Fe=!1;else try{Ii(Xt,fe,"req"+He+"_")}catch{A&&A(Xt)}}if(Fe){A=fe.join("&");break e}}}return h=h.i.splice(0,E),v.D=h,A}function bu(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;me||k(),Ee||(me(),Ee=!0),ce.add(v,h),h.v=0}}function vl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Ot(w(h.Fa,h),_l(h,h.v)),h.v++,!0)}n.Fa=function(){if(this.u=null,wu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Ot(w(this.ab,this),h)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),Ka(this),wu(this))};function ta(h){h.A!=null&&(m.clearTimeout(h.A),h.A=null)}function wu(h){h.g=new En(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Un(h.qa);st(v,"RID","rpc"),st(v,"SID",h.K),st(v,"AID",h.T),st(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&st(v,"TO",h.ja),st(v,"TYPE","xmlhttp"),ea(h,v),h.m&&h.o&&Qt(v,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Yr(Un(v)),E.m=null,E.P=!0,ns(E,h)}n.Za=function(){this.C!=null&&(this.C=null,Ka(this),vl(this),gt(19))};function Xa(h){h.C!=null&&(m.clearTimeout(h.C),h.C=null)}function Su(h,v){var E=null;if(h.g==v){Xa(h),ta(h),h.g=null;var A=2}else if(ll(h.h,v))E=v.D,Tn(h.h,v),A=1;else return;if(h.G!=0){if(v.o)if(A==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var F=h.B;A=zs(),tt(A,new zt(A,E)),Qa(h)}else bu(h);else if(F=v.s,F==3||F==0&&0<v.X||!(A==1&&lf(h,v)||A==2&&vl(h)))switch(E&&0<E.length&&(v=h.h,v.i=v.i.concat(E)),F){case 1:cs(h,5);break;case 4:cs(h,10);break;case 3:cs(h,6);break;default:cs(h,2)}}}function _l(h,v){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*v}function cs(h,v){if(h.j.info("Error code "+v),v==2){var E=w(h.fb,h),A=h.Xa;const F=!A;A=new Pt(A||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||$r(A,"https"),Yr(A),F?Qr(A.toString(),E):fi(A.toString(),E)}else gt(2);h.G=0,h.l&&h.l.sa(v),Au(h),Eu(h)}n.fb=function(h){h?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Au(h){if(h.G=0,h.ka=[],h.l){const v=cl(h.h);(v.length!=0||h.i.length!=0)&&(j(h.ka,v),j(h.ka,h.i),h.h.i.length=0,z(h.i),h.i.length=0),h.l.ra()}}function Ru(h,v,E){var A=E instanceof Pt?Un(E):new Pt(E);if(A.g!="")v&&(A.g=v+"."+A.g),$s(A,A.s);else{var F=m.location;A=F.protocol,v=v?v+"."+F.hostname:F.hostname,F=+F.port;var W=new Pt(null);A&&$r(W,A),v&&(W.g=v),F&&$s(W,F),E&&(W.l=E),A=W}return E=h.D,v=h.ya,E&&v&&st(A,E,v),st(A,"VER",h.la),ea(h,A),A}function xu(h,v,E){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new Je(new Ys({eb:E})):new Je(h.pa),v.Ha(h.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cu(){}n=Cu.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wa(){}Wa.prototype.g=function(h,v){return new bn(h,v)};function bn(h,v){wt.call(this),this.g=new Ya(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!G(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!G(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new Pi(this)}M(bn,wt),bn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bn.prototype.close=function(){gl(this.g)},bn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=hi(h),h=E);v.i.push(new pu(v.Ya++,h)),v.G==3&&Qa(v)},bn.prototype.N=function(){this.g.l=null,delete this.j,gl(this.g),delete this.g,bn.aa.N.call(this)};function Nu(h){es.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const E in v){h=E;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}M(Nu,es);function Iu(){sl.call(this),this.status=1}M(Iu,sl);function Pi(h){this.g=h}M(Pi,Cu),Pi.prototype.ua=function(){tt(this.g,"a")},Pi.prototype.ta=function(h){tt(this.g,new Nu(h))},Pi.prototype.sa=function(h){tt(this.g,new Iu)},Pi.prototype.ra=function(){tt(this.g,"b")},Wa.prototype.createWebChannel=Wa.prototype.g,bn.prototype.send=bn.prototype.o,bn.prototype.open=bn.prototype.m,bn.prototype.close=bn.prototype.close,f0=function(){return new Wa},d0=function(){return zs()},h0=Ai,zp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Hs.NO_ERROR=0,Hs.TIMEOUT=8,Hs.HTTP_ERROR=6,Kh=Hs,ts.COMPLETE="complete",u0=ts,il.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",wt.prototype.listen=wt.prototype.K,gc=il,Je.prototype.listenOnce=Je.prototype.L,Je.prototype.getLastError=Je.prototype.Ka,Je.prototype.getLastErrorCode=Je.prototype.Ba,Je.prototype.getStatus=Je.prototype.Z,Je.prototype.getResponseJson=Je.prototype.Oa,Je.prototype.getResponseText=Je.prototype.oa,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Ha,c0=Je}).apply(typeof Oh<"u"?Oh:typeof self<"u"?self:typeof window<"u"?window:{});const jT="@firebase/firestore",OT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}gn.UNAUTHENTICATED=new gn(null),gn.GOOGLE_CREDENTIALS=new gn("google-credentials-uid"),gn.FIRST_PARTY=new gn("first-party-uid"),gn.MOCK_USER=new gn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=new vg("@firebase/firestore");function xo(){return Ca.logLevel}function ye(n,...e){if(Ca.logLevel<=Ue.DEBUG){const t=e.map(Dg);Ca.debug(`Firestore (${Qo}): ${n}`,...t)}}function Ps(n,...e){if(Ca.logLevel<=Ue.ERROR){const t=e.map(Dg);Ca.error(`Firestore (${Qo}): ${n}`,...t)}}function Lo(n,...e){if(Ca.logLevel<=Ue.WARN){const t=e.map(Dg);Ca.warn(`Firestore (${Qo}): ${n}`,...t)}}function Dg(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,m0(n,r,t)}function m0(n,e,t){let r=`FIRESTORE (${Qo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Ps(r),new Error(r)}function et(n,e,t,r){let o="Unexpected state";typeof t=="string"?o=t:r=t,n||m0(e,o,r)}function De(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(gn.UNAUTHENTICATED)))}shutdown(){}}class FD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class HD{constructor(e){this.t=e,this.currentUser=gn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0,42304);let r=this.i;const o=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let l=new Cs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Cs,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await o(this.currentUser)}))},m=y=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((y=>m(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Cs)}}),0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string",31837,{l:r}),new p0(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new gn(e)}}class GD{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=gn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class $D{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new GD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(gn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class PT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){et(this.o===void 0,3512);const r=l=>{l.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const d=l.token!==this.m;return this.m=l.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const o=l=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new PT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(et(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new PT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=KD(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%62))}return r}}function Be(n,e){return n<e?-1:n>e?1:0}function qp(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const o=n.charAt(r),l=e.charAt(r);if(o!==l)return gp(o)===gp(l)?Be(o,l):gp(o)?1:-1}return Be(n.length,e.length)}const QD=55296,XD=57343;function gp(n){const e=n.charCodeAt(0);return e>=QD&&e<=XD}function Uo(n,e,t){return n.length===e.length&&n.every(((r,o)=>t(r,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__name__";class zi{constructor(e,t,r){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&xe(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=zi.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Be(e.length,t.length)}static compareSegments(e,t){const r=zi.isNumericId(e),o=zi.isNumericId(t);return r&&!o?-1:!r&&o?1:r&&o?zi.extractNumericId(e).compare(zi.extractNumericId(t)):qp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sr.fromString(e.substring(4,e.length-2))}}class dt extends zi{construct(e,t,r){return new dt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ge(ne.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((o=>o.length>0)))}return new dt(t)}static emptyPath(){return new dt([])}}const WD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ln extends zi{construct(e,t,r){return new ln(e,t,r)}static isValidIdentifier(e){return WD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ln.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kT}static keyField(){return new ln([kT])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(r.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new ge(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[o+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ge(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=y,o+=2}else m==="`"?(d=!d,o++):m!=="."||d?(r+=m,o++):(l(),o++)}if(l(),d)throw new ge(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ln(t)}static emptyPath(){return new ln([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(dt.fromString(e))}static fromName(e){return new be(dt.fromString(e).popFirst(5))}static empty(){return new be(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return dt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new dt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g0(n,e,t){if(!t)throw new ge(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ZD(n,e,t,r){if(e===!0&&r===!0)throw new ge(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function MT(n){if(!be.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function VT(n){if(be.isDocumentKey(n))throw new ge(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function y0(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Od(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function On(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Od(n);throw new ge(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Wc(n,e){if(!y0(n))throw new ge(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const o=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const d=n[r];if(o&&typeof d!==o){t=`JSON field '${r}' must be a ${o}.`;break}if(l!==void 0&&d!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new ge(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT=-62135596800,UT=1e6;class Re{static now(){return Re.fromMillis(Date.now())}static fromDate(e){return Re.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*UT);return new Re(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<LT)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/UT}_compareTo(e){return this.seconds===e.seconds?Be(this.nanoseconds,e.nanoseconds):Be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Re._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Wc(e,Re._jsonSchema))return new Re(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-LT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Re._jsonSchemaVersion="firestore/timestamp/1.0",Re._jsonSchema={type:Bt("string",Re._jsonSchemaVersion),seconds:Bt("number"),nanoseconds:Bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Re(0,0))}static max(){return new Ne(new Re(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=-1;function JD(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Ne.fromTimestamp(r===1e9?new Re(t+1,0):new Re(t,r));return new xr(o,be.empty(),e)}function ej(n){return new xr(n.readTime,n.key,Pc)}class xr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xr(Ne.min(),be.empty(),Pc)}static max(){return new xr(Ne.max(),be.empty(),Pc)}}function tj(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Be(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ij{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xo(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==nj)throw n;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,r)=>{t(e)}))}static reject(e){return new oe(((t,r)=>{r(e)}))}static waitFor(e){return new oe(((t,r)=>{let o=0,l=0,d=!1;e.forEach((m=>{++o,m.next((()=>{++l,d&&l===o&&t()}),(y=>r(y)))})),d=!0,l===o&&t()}))}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next((o=>o?oe.resolve(o):r()));return t}static forEach(e,t){const r=[];return e.forEach(((o,l)=>{r.push(t.call(this,o,l))})),this.waitFor(r)}static mapArray(e,t){return new oe(((r,o)=>{const l=e.length,d=new Array(l);let m=0;for(let y=0;y<l;y++){const p=y;t(e[p]).next((_=>{d[p]=_,++m,m===l&&r(d)}),(_=>o(_)))}}))}static doWhile(e,t){return new oe(((r,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):r()};l()}))}}function sj(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Wo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=-1;function kd(n){return n==null}function ld(n){return n===0&&1/n==-1/0}function rj(n){return typeof n=="number"&&Number.isInteger(n)&&!ld(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0="";function aj(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=BT(e)),e=oj(n.get(t),e);return BT(e)}function oj(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case v0:t+="";break;default:t+=l}}return t}function BT(n){return n+v0+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function kr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||on.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(o===0)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ph(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ph(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ph(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ph(this.root,e,this.comparator,!0)}}class Ph{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=r??on.RED,this.left=o??on.EMPTY,this.right=l??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new on(e??this.key,t??this.value,r??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return on.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,r,o,l){return this}insert(e,t,r){return new on(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qT(this.data.getIterator())}getIteratorFrom(e){return new qT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class qT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(ln.comparator)}static empty(){return new Yn([])}unionWith(e){let t=new Kt(ln.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E0 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new E0("Invalid base64 string: "+l):l}})(e);return new un(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let d=0;d<o.length;++d)l+=String.fromCharCode(o[d]);return l})(e);return new un(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}un.EMPTY_BYTE_STRING=new un("");const lj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cr(n){if(et(!!n,39018),typeof n=="string"){let e=0;const t=lj.exec(n);if(et(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:jt(n.seconds),nanos:jt(n.nanos)}}function jt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Nr(n){return typeof n=="string"?un.fromBase64String(n):un.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="server_timestamp",b0="__type__",w0="__previous_value__",S0="__local_write_time__";function Pg(n){return(n?.mapValue?.fields||{})[b0]?.stringValue===T0}function Md(n){const e=n.mapValue.fields[w0];return Pg(e)?Md(e):e}function kc(n){const e=Cr(n.mapValue.fields[S0].timestampValue);return new Re(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(e,t,r,o,l,d,m,y,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=p,this.isUsingEmulator=_}}const cd="(default)";class Mc{constructor(e,t){this.projectId=e,this.database=t||cd}static empty(){return new Mc("","")}get isDefaultDatabase(){return this.database===cd}isEqual(e){return e instanceof Mc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0="__type__",uj="__max__",kh={mapValue:{}},R0="__vector__",ud="value";function Ir(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Pg(n)?4:dj(n)?9007199254740991:hj(n)?10:11:xe(28295,{value:n})}function Qi(n,e){if(n===e)return!0;const t=Ir(n);if(t!==Ir(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kc(n).isEqual(kc(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const d=Cr(o.timestampValue),m=Cr(l.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Nr(o.bytesValue).isEqual(Nr(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return jt(o.geoPointValue.latitude)===jt(l.geoPointValue.latitude)&&jt(o.geoPointValue.longitude)===jt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return jt(o.integerValue)===jt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const d=jt(o.doubleValue),m=jt(l.doubleValue);return d===m?ld(d)===ld(m):isNaN(d)&&isNaN(m)}return!1})(n,e);case 9:return Uo(n.arrayValue.values||[],e.arrayValue.values||[],Qi);case 10:case 11:return(function(o,l){const d=o.mapValue.fields||{},m=l.mapValue.fields||{};if(zT(d)!==zT(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Qi(d[y],m[y])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function Vc(n,e){return(n.values||[]).find((t=>Qi(t,e)))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Ir(n),r=Ir(e);if(t!==r)return Be(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Be(n.booleanValue,e.booleanValue);case 2:return(function(l,d){const m=jt(l.integerValue||l.doubleValue),y=jt(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1})(n,e);case 3:return FT(n.timestampValue,e.timestampValue);case 4:return FT(kc(n),kc(e));case 5:return qp(n.stringValue,e.stringValue);case 6:return(function(l,d){const m=Nr(l),y=Nr(d);return m.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,d){const m=l.split("/"),y=d.split("/");for(let p=0;p<m.length&&p<y.length;p++){const _=Be(m[p],y[p]);if(_!==0)return _}return Be(m.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,d){const m=Be(jt(l.latitude),jt(d.latitude));return m!==0?m:Be(jt(l.longitude),jt(d.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return HT(n.arrayValue,e.arrayValue);case 10:return(function(l,d){const m=l.fields||{},y=d.fields||{},p=m[ud]?.arrayValue,_=y[ud]?.arrayValue,b=Be(p?.values?.length||0,_?.values?.length||0);return b!==0?b:HT(p,_)})(n.mapValue,e.mapValue);case 11:return(function(l,d){if(l===kh.mapValue&&d===kh.mapValue)return 0;if(l===kh.mapValue)return 1;if(d===kh.mapValue)return-1;const m=l.fields||{},y=Object.keys(m),p=d.fields||{},_=Object.keys(p);y.sort(),_.sort();for(let b=0;b<y.length&&b<_.length;++b){const w=qp(y[b],_[b]);if(w!==0)return w;const I=Bo(m[y[b]],p[_[b]]);if(I!==0)return I}return Be(y.length,_.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function FT(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Be(n,e);const t=Cr(n),r=Cr(e),o=Be(t.seconds,r.seconds);return o!==0?o:Be(t.nanos,r.nanos)}function HT(n,e){const t=n.values||[],r=e.values||[];for(let o=0;o<t.length&&o<r.length;++o){const l=Bo(t[o],r[o]);if(l)return l}return Be(t.length,r.length)}function zo(n){return Fp(n)}function Fp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=Cr(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Nr(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",o=!0;for(const l of t.values||[])o?o=!1:r+=",",r+=Fp(l);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const d of r)l?l=!1:o+=",",o+=`${d}:${Fp(t.fields[d])}`;return o+"}"})(n.mapValue):xe(61005,{value:n})}function Qh(n){switch(Ir(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Md(n);return e?16+Qh(e):16;case 5:return 2*n.stringValue.length;case 6:return Nr(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,l)=>o+Qh(l)),0)})(n.arrayValue);case 10:case 11:return(function(r){let o=0;return kr(r.fields,((l,d)=>{o+=l.length+Qh(d)})),o})(n.mapValue);default:throw xe(13486,{value:n})}}function GT(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Hp(n){return!!n&&"integerValue"in n}function kg(n){return!!n&&"arrayValue"in n}function $T(n){return!!n&&"nullValue"in n}function YT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Xh(n){return!!n&&"mapValue"in n}function hj(n){return(n?.mapValue?.fields||{})[A0]?.stringValue===R0}function Ac(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return kr(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Ac(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ac(n.arrayValue.values[t]);return e}return{...n}}function dj(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uj}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Xh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ac(t)}setAll(e){let t=ln.emptyPath(),r={},o=[];e.forEach(((d,m)=>{if(!t.isImmediateParentOf(m)){const y=this.getFieldsMap(t);this.applyChanges(y,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Ac(d):o.push(m.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());Xh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Qi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Xh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){kr(t,((o,l)=>e[o]=l));for(const o of r)delete e[o]}clone(){return new Dn(Ac(this.value))}}function x0(n){const e=[];return kr(n.fields,((t,r)=>{const o=new ln([t]);if(Xh(r)){const l=x0(r.mapValue).fields;if(l.length===0)e.push(o);else for(const d of l)e.push(o.child(d))}else e.push(o)})),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,t,r,o,l,d,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=l,this.data=d,this.documentState=m}static newInvalidDocument(e){return new yn(e,0,Ne.min(),Ne.min(),Ne.min(),Dn.empty(),0)}static newFoundDocument(e,t,r,o){return new yn(e,1,t,Ne.min(),r,o,0)}static newNoDocument(e,t){return new yn(e,2,t,Ne.min(),Ne.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new yn(e,3,t,Ne.min(),Ne.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.position=e,this.inclusive=t}}function KT(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],d=n.position[o];if(l.field.isKeyField()?r=be.comparator(be.fromName(d.referenceValue),t.key):r=Bo(d,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function QT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Qi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t="asc"){this.field=e,this.dir=t}}function fj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{}class Ut extends C0{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new pj(e,t,r):t==="array-contains"?new vj(e,r):t==="in"?new _j(e,r):t==="not-in"?new Ej(e,r):t==="array-contains-any"?new Tj(e,r):new Ut(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new gj(e,r):new yj(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Ir(this.value)===Ir(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _i extends C0{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new _i(e,t)}matches(e){return N0(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function N0(n){return n.op==="and"}function I0(n){return mj(n)&&N0(n)}function mj(n){for(const e of n.filters)if(e instanceof _i)return!1;return!0}function Gp(n){if(n instanceof Ut)return n.field.canonicalString()+n.op.toString()+zo(n.value);if(I0(n))return n.filters.map((e=>Gp(e))).join(",");{const e=n.filters.map((t=>Gp(t))).join(",");return`${n.op}(${e})`}}function D0(n,e){return n instanceof Ut?(function(r,o){return o instanceof Ut&&r.op===o.op&&r.field.isEqual(o.field)&&Qi(r.value,o.value)})(n,e):n instanceof _i?(function(r,o){return o instanceof _i&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((l,d,m)=>l&&D0(d,o.filters[m])),!0):!1})(n,e):void xe(19439)}function j0(n){return n instanceof Ut?(function(t){return`${t.field.canonicalString()} ${t.op} ${zo(t.value)}`})(n):n instanceof _i?(function(t){return t.op.toString()+" {"+t.getFilters().map(j0).join(" ,")+"}"})(n):"Filter"}class pj extends Ut{constructor(e,t,r){super(e,t,r),this.key=be.fromName(r.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class gj extends Ut{constructor(e,t){super(e,"in",t),this.keys=O0("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yj extends Ut{constructor(e,t){super(e,"not-in",t),this.keys=O0("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function O0(n,e){return(e.arrayValue?.values||[]).map((t=>be.fromName(t.referenceValue)))}class vj extends Ut{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kg(t)&&Vc(t.arrayValue,this.value)}}class _j extends Ut{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class Ej extends Ut{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Vc(this.value.arrayValue,t)}}class Tj extends Ut{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>Vc(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,t=null,r=[],o=[],l=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=d,this.endAt=m,this.Te=null}}function XT(n,e=null,t=[],r=[],o=null,l=null,d=null){return new bj(n,e,t,r,o,l,d)}function Mg(n){const e=De(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Gp(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),kd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>zo(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>zo(r))).join(",")),e.Te=t}return e.Te}function Vg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!fj(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!D0(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!QT(n.startAt,e.startAt)&&QT(n.endAt,e.endAt)}function $p(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,t=null,r=[],o=[],l=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=d,this.startAt=m,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function wj(n,e,t,r,o,l,d,m){return new Zo(n,e,t,r,o,l,d,m)}function Vd(n){return new Zo(n)}function WT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function P0(n){return n.collectionGroup!==null}function Rc(n){const e=De(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new Kt(ln.comparator);return d.filters.forEach((y=>{y.getFlattenedFilters().forEach((p=>{p.isInequality()&&(m=m.add(p.field))}))})),m})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Lc(l,r))})),t.has(ln.keyField().canonicalString())||e.Ie.push(new Lc(ln.keyField(),r))}return e.Ie}function Gi(n){const e=De(n);return e.Ee||(e.Ee=Sj(e,Rc(n))),e.Ee}function Sj(n,e){if(n.limitType==="F")return XT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Lc(o.field,l)}));const t=n.endAt?new hd(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new hd(n.startAt.position,n.startAt.inclusive):null;return XT(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Yp(n,e){const t=n.filters.concat([e]);return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dd(n,e,t){return new Zo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ld(n,e){return Vg(Gi(n),Gi(e))&&n.limitType===e.limitType}function k0(n){return`${Mg(Gi(n))}|lt:${n.limitType}`}function Co(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((o=>j0(o))).join(", ")}]`),kd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((o=>zo(o))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((o=>zo(o))).join(",")),`Target(${r})`})(Gi(n))}; limitType=${n.limitType})`}function Ud(n,e){return e.isFoundDocument()&&(function(r,o){const l=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):be.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(n,e)&&(function(r,o){for(const l of Rc(r))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(r,o){for(const l of r.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(r,o){return!(r.startAt&&!(function(d,m,y){const p=KT(d,m,y);return d.inclusive?p<=0:p<0})(r.startAt,Rc(r),o)||r.endAt&&!(function(d,m,y){const p=KT(d,m,y);return d.inclusive?p>=0:p>0})(r.endAt,Rc(r),o))})(n,e)}function Aj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function M0(n){return(e,t)=>{let r=!1;for(const o of Rc(n)){const l=Rj(o,e,t);if(l!==0)return l;r=r||o.field.isKeyField()}return 0}}function Rj(n,e,t){const r=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,d,m){const y=d.data.field(l),p=m.data.field(l);return y!==null&&p!==null?Bo(y,p):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[o,l]of r)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(o===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return r.length===1?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){kr(this.inner,((t,r)=>{for(const[o,l]of r)e(o,l)}))}isEmpty(){return _0(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xj=new bt(be.comparator);function ks(){return xj}const V0=new bt(be.comparator);function yc(...n){let e=V0;for(const t of n)e=e.insert(t.key,t);return e}function L0(n){let e=V0;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ea(){return xc()}function U0(){return xc()}function xc(){return new Oa((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Cj=new bt(be.comparator),Nj=new Kt(be.comparator);function ze(...n){let e=Nj;for(const t of n)e=e.add(t);return e}const Ij=new Kt(Be);function Dj(){return Ij}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ld(e)?"-0":e}}function B0(n){return{integerValue:""+n}}function jj(n,e){return rj(e)?B0(e):Lg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this._=void 0}}function Oj(n,e,t){return n instanceof Uc?(function(o,l){const d={fields:{[b0]:{stringValue:T0},[S0]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Pg(l)&&(l=Md(l)),l&&(d.fields[w0]=l),{mapValue:d}})(t,e):n instanceof Bc?q0(n,e):n instanceof zc?F0(n,e):(function(o,l){const d=z0(o,l),m=ZT(d)+ZT(o.Ae);return Hp(d)&&Hp(o.Ae)?B0(m):Lg(o.serializer,m)})(n,e)}function Pj(n,e,t){return n instanceof Bc?q0(n,e):n instanceof zc?F0(n,e):t}function z0(n,e){return n instanceof fd?(function(r){return Hp(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Uc extends Bd{}class Bc extends Bd{constructor(e){super(),this.elements=e}}function q0(n,e){const t=H0(e);for(const r of n.elements)t.some((o=>Qi(o,r)))||t.push(r);return{arrayValue:{values:t}}}class zc extends Bd{constructor(e){super(),this.elements=e}}function F0(n,e){let t=H0(e);for(const r of n.elements)t=t.filter((o=>!Qi(o,r)));return{arrayValue:{values:t}}}class fd extends Bd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function ZT(n){return jt(n.integerValue||n.doubleValue)}function H0(n){return kg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,t){this.field=e,this.transform=t}}function Mj(n,e){return n.field.isEqual(e.field)&&(function(r,o){return r instanceof Bc&&o instanceof Bc||r instanceof zc&&o instanceof zc?Uo(r.elements,o.elements,Qi):r instanceof fd&&o instanceof fd?Qi(r.Ae,o.Ae):r instanceof Uc&&o instanceof Uc})(n.transform,e.transform)}class Vj{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Wh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zd{}function G0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ug(n.key,Pn.none()):new Zc(n.key,n.data,Pn.none());{const t=n.data,r=Dn.empty();let o=new Kt(ln.comparator);for(let l of e.fields)if(!o.has(l)){let d=t.field(l);d===null&&l.length>1&&(l=l.popLast(),d=t.field(l)),d===null?r.delete(l):r.set(l,d),o=o.add(l)}return new Mr(n.key,r,new Yn(o.toArray()),Pn.none())}}function Lj(n,e,t){n instanceof Zc?(function(o,l,d){const m=o.value.clone(),y=eb(o.fieldTransforms,l,d.transformResults);m.setAll(y),l.convertToFoundDocument(d.version,m).setHasCommittedMutations()})(n,e,t):n instanceof Mr?(function(o,l,d){if(!Wh(o.precondition,l))return void l.convertToUnknownDocument(d.version);const m=eb(o.fieldTransforms,l,d.transformResults),y=l.data;y.setAll($0(o)),y.setAll(m),l.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(n,e,t):(function(o,l,d){l.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,t)}function Cc(n,e,t,r){return n instanceof Zc?(function(l,d,m,y){if(!Wh(l.precondition,d))return m;const p=l.value.clone(),_=tb(l.fieldTransforms,y,d);return p.setAll(_),d.convertToFoundDocument(d.version,p).setHasLocalMutations(),null})(n,e,t,r):n instanceof Mr?(function(l,d,m,y){if(!Wh(l.precondition,d))return m;const p=tb(l.fieldTransforms,y,d),_=d.data;return _.setAll($0(l)),_.setAll(p),d.convertToFoundDocument(d.version,_).setHasLocalMutations(),m===null?null:m.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(l,d,m){return Wh(l.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m})(n,e,t)}function Uj(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=z0(r.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(r.field,l))}return t||null}function JT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&Uo(r,o,((l,d)=>Mj(l,d)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Zc extends zd{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Mr extends zd{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function $0(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function eb(n,e,t){const r=new Map;et(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],d=l.transform,m=e.data.field(l.field);r.set(l.field,Pj(d,m,t[o]))}return r}function tb(n,e,t){const r=new Map;for(const o of n){const l=o.transform,d=t.data.field(o.field);r.set(o.field,Oj(l,d,e))}return r}class Ug extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bj extends zd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Lj(l,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=U0();return this.mutations.forEach((o=>{const l=e.get(o.key),d=l.overlayedDocument;let m=this.applyToLocalView(d,l.mutatedFields);m=t.has(o.key)?null:m;const y=G0(d,m);y!==null&&r.set(o.key,y),d.isValidDocument()||d.convertToNoDocument(Ne.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((t,r)=>JT(t,r)))&&Uo(this.baseMutations,e.baseMutations,((t,r)=>JT(t,r)))}}class Bg{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){et(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let o=(function(){return Cj})();const l=e.mutations;for(let d=0;d<l.length;d++)o=o.insert(l[d].key,r[d].version);return new Bg(e,t,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,$e;function Hj(n){switch(n){case ne.OK:return xe(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function Y0(n){if(n===void 0)return Ps("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Vt.OK:return ne.OK;case Vt.CANCELLED:return ne.CANCELLED;case Vt.UNKNOWN:return ne.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return ne.INTERNAL;case Vt.UNAVAILABLE:return ne.UNAVAILABLE;case Vt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Vt.NOT_FOUND:return ne.NOT_FOUND;case Vt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Vt.ABORTED:return ne.ABORTED;case Vt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Vt.DATA_LOSS:return ne.DATA_LOSS;default:return xe(39323,{code:n})}}($e=Vt||(Vt={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=new Sr([4294967295,4294967295],0);function nb(n){const e=Gj().encode(n),t=new l0;return t.update(e),new Uint8Array(t.digest())}function ib(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Sr([t,r],0),new Sr([o,l],0)]}class zg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new vc(`Invalid padding: ${t}`);if(r<0)throw new vc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new vc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new vc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Sr.fromNumber(this.ge)}ye(e,t,r){let o=e.add(t.multiply(Sr.fromNumber(r)));return o.compare($j)===1&&(o=new Sr([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=nb(e),[r,o]=ib(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(r,o,l);if(!this.we(d))return!1}return!0}static create(e,t,r){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),d=new zg(l,o,t);return r.forEach((m=>d.insert(m))),d}insert(e){if(this.ge===0)return;const t=nb(e),[r,o]=ib(t);for(let l=0;l<this.hashCount;l++){const d=this.ye(r,o,l);this.Se(d)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class vc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Jc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new qd(Ne.min(),o,new bt(Be),ks(),ze())}}class Jc{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Jc(r,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,t,r,o){this.be=e,this.removedTargetIds=t,this.key=r,this.De=o}}class K0{constructor(e,t){this.targetId=e,this.Ce=t}}class Q0{constructor(e,t,r=un.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class sb{constructor(){this.ve=0,this.Fe=rb(),this.Me=un.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),r=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:xe(38017,{changeType:l})}})),new Jc(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=rb()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Yj{constructor(e){this.Ge=e,this.ze=new Map,this.je=ks(),this.Je=Mh(),this.He=Mh(),this.Ye=new bt(Be)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,r=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if($p(l))if(r===0){const d=new be(l.path);this.et(t,d,yn.newNoDocument(d,Ne.min()))}else et(r===1,20013,{expectedCount:r});else{const d=this._t(t);if(d!==r){const m=this.ut(e),y=m?this.ct(m,e,d):1;if(y!==0){this.it(t);const p=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:l=0}=t;let d,m;try{d=Nr(r).toUint8Array()}catch(y){if(y instanceof E0)return Lo("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new zg(d,o,l)}catch(y){return Lo(y instanceof vc?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.ge===0?null:m}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let o=0;return r.forEach((l=>{const d=this.Ge.ht(),m=`projects/${d.projectId}/databases/${d.database}/documents/${l.path.canonicalString()}`;e.mightContain(m)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,d)=>{const m=this.ot(d);if(m){if(l.current&&$p(m.target)){const y=new be(m.target.path);this.It(y).has(d)||this.Et(d,y)||this.et(d,y,yn.newNoDocument(y,e))}l.Be&&(t.set(d,l.ke()),l.qe())}}));let r=ze();this.He.forEach(((l,d)=>{let m=!0;d.forEachWhile((y=>{const p=this.ot(y);return!p||p.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(l))})),this.je.forEach(((l,d)=>d.setReadTime(e)));const o=new qd(e,t,this.Ye,this.je,r);return this.je=ks(),this.Je=Mh(),this.He=Mh(),this.Ye=new bt(Be),o}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new sb,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Kt(Be),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Kt(Be),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ye("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new sb),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Mh(){return new bt(be.comparator)}function rb(){return new bt(be.comparator)}const Kj={asc:"ASCENDING",desc:"DESCENDING"},Qj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Xj={and:"AND",or:"OR"};class Wj{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kp(n,e){return n.useProto3Json||kd(e)?e:{value:e}}function md(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function X0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Zj(n,e){return md(n,e.toTimestamp())}function $i(n){return et(!!n,49232),Ne.fromTimestamp((function(t){const r=Cr(t);return new Re(r.seconds,r.nanos)})(n))}function qg(n,e){return Qp(n,e).canonicalString()}function Qp(n,e){const t=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function W0(n){const e=dt.fromString(n);return et(nS(e),10190,{key:e.toString()}),e}function Xp(n,e){return qg(n.databaseId,e.path)}function yp(n,e){const t=W0(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(J0(t))}function Z0(n,e){return qg(n.databaseId,e)}function Jj(n){const e=W0(n);return e.length===4?dt.emptyPath():J0(e)}function Wp(n){return new dt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function J0(n){return et(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function ab(n,e,t){return{name:Xp(n,e),fields:t.value.mapValue.fields}}function e2(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:xe(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(et(_===void 0||typeof _=="string",58123),un.fromBase64String(_||"")):(et(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),un.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&(function(p){const _=p.code===void 0?ne.UNKNOWN:Y0(p.code);return new ge(_,p.message||"")})(d);t=new Q0(r,o,l,m||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const o=yp(n,r.document.name),l=$i(r.document.updateTime),d=r.document.createTime?$i(r.document.createTime):Ne.min(),m=new Dn({mapValue:{fields:r.document.fields}}),y=yn.newFoundDocument(o,l,d,m),p=r.targetIds||[],_=r.removedTargetIds||[];t=new Zh(p,_,y.key,y)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const o=yp(n,r.document),l=r.readTime?$i(r.readTime):Ne.min(),d=yn.newNoDocument(o,l),m=r.removedTargetIds||[];t=new Zh([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const o=yp(n,r.document),l=r.removedTargetIds||[];t=new Zh([],l,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:o=0,unchangedNames:l}=r,d=new Fj(o,l),m=r.targetId;t=new K0(m,d)}}return t}function t2(n,e){let t;if(e instanceof Zc)t={update:ab(n,e.key,e.value)};else if(e instanceof Ug)t={delete:Xp(n,e.key)};else if(e instanceof Mr)t={update:ab(n,e.key,e.data),updateMask:u2(e.fieldMask)};else{if(!(e instanceof Bj))return xe(16599,{Vt:e.type});t={verify:Xp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,d){const m=d.transform;if(m instanceof Uc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Bc)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof zc)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof fd)return{fieldPath:d.field.canonicalString(),increment:m.Ae};throw xe(20930,{transform:d.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Zj(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(n,e.precondition)),t}function n2(n,e){return n&&n.length>0?(et(e!==void 0,14353),n.map((t=>(function(o,l){let d=o.updateTime?$i(o.updateTime):$i(l);return d.isEqual(Ne.min())&&(d=$i(l)),new Vj(d,o.transformResults||[])})(t,e)))):[]}function i2(n,e){return{documents:[Z0(n,e.path)]}}function s2(n,e){const t={structuredQuery:{}},r=e.path;let o;e.collectionGroup!==null?(o=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Z0(n,o);const l=(function(p){if(p.length!==0)return tS(_i.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const d=(function(p){if(p.length!==0)return p.map((_=>(function(w){return{field:No(w.field),direction:o2(w.dir)}})(_)))})(e.orderBy);d&&(t.structuredQuery.orderBy=d);const m=Kp(n,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:o}}function r2(n){let e=Jj(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){et(r===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(b){const w=eS(b);return w instanceof _i&&I0(w)?w.getFilters():[w]})(t.where));let d=[];t.orderBy&&(d=(function(b){return b.map((w=>(function(M){return new Lc(Io(M.field),(function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(M.direction))})(w)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let w;return w=typeof b=="object"?b.value:b,kd(w)?null:w})(t.limit));let y=null;t.startAt&&(y=(function(b){const w=!!b.before,I=b.values||[];return new hd(I,w)})(t.startAt));let p=null;return t.endAt&&(p=(function(b){const w=!b.before,I=b.values||[];return new hd(I,w)})(t.endAt)),wj(e,o,d,l,m,"F",y,p)}function a2(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function eS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Io(t.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=Io(t.unaryFilter.field);return Ut.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Io(t.unaryFilter.field);return Ut.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Io(t.unaryFilter.field);return Ut.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ut.create(Io(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return _i.create(t.compositeFilter.filters.map((r=>eS(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function o2(n){return Kj[n]}function l2(n){return Qj[n]}function c2(n){return Xj[n]}function No(n){return{fieldPath:n.canonicalString()}}function Io(n){return ln.fromServerFormat(n.fieldPath)}function tS(n){return n instanceof Ut?(function(t){if(t.op==="=="){if(YT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if($T(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(YT(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if($T(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:l2(t.op),value:t.value}}})(n):n instanceof _i?(function(t){const r=t.getFilters().map((o=>tS(o)));return r.length===1?r[0]:{compositeFilter:{op:c2(t.op),filters:r}}})(n):xe(54877,{filter:n})}function u2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e,t,r,o,l=Ne.min(),d=Ne.min(),m=un.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Tr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.yt=e}}function d2(n){const e=r2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(){this.Cn=new m2}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(xr.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class m2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Kt(dt.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Kt(dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},iS=41943040;class Nn{static withCacheSize(e){return new Nn(e,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nn.DEFAULT_COLLECTION_PERCENTILE=10,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nn.DEFAULT=new Nn(iS,Nn.DEFAULT_COLLECTION_PERCENTILE,Nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nn.DISABLED=new Nn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new qo(0)}static cr(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="LruGarbageCollector",p2=1048576;function cb([n,e],[t,r]){const o=Be(n,t);return o===0?Be(e,r):o}class g2{constructor(e){this.Ir=e,this.buffer=new Kt(cb),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();cb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(lb,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Wo(t)?ye(lb,"Ignoring IndexedDB error during garbage collection: ",t):await Xo(t)}await this.Vr(3e5)}))}}class v2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Pd.ce);const r=new g2(t);return this.mr.forEachTarget(e,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(ob)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ob):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,o,l,d,m,y,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(r=b,m=Date.now(),this.removeTargets(e,r,t)))).next((b=>(l=b,y=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(p=Date.now(),xo()<=Ue.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-_}ms
	Determined least recently used ${o} in `+(m-d)+`ms
	Removed ${l} targets in `+(y-m)+`ms
	Removed ${b} documents in `+(p-y)+`ms
Total Duration: ${p-_}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:b}))))}}function _2(n,e){return new v2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.changes=new Oa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(r=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(r!==null&&Cc(r.mutation,o,Yn.empty(),Re.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=ze()){const o=Ea();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,r).next((l=>{let d=yc();return l.forEach(((m,y)=>{d=d.insert(m,y.overlayedDocument)})),d}))))}getOverlayedDocuments(e,t){const r=Ea();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,ze())))}populateOverlays(e,t,r){const o=[];return r.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((d,m)=>{t.set(d,m)}))}))}computeViews(e,t,r,o){let l=ks();const d=xc(),m=(function(){return xc()})();return t.forEach(((y,p)=>{const _=r.get(p.key);o.has(p.key)&&(_===void 0||_.mutation instanceof Mr)?l=l.insert(p.key,p):_!==void 0?(d.set(p.key,_.mutation.getFieldMask()),Cc(_.mutation,p,_.mutation.getFieldMask(),Re.now())):d.set(p.key,Yn.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((p,_)=>d.set(p,_))),t.forEach(((p,_)=>m.set(p,new T2(_,d.get(p)??null)))),m)))}recalculateAndSaveOverlays(e,t){const r=xc();let o=new bt(((d,m)=>d-m)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((d=>{for(const m of d)m.keys().forEach((y=>{const p=t.get(y);if(p===null)return;let _=r.get(y)||Yn.empty();_=m.applyToLocalView(p,_),r.set(y,_);const b=(o.get(m.batchId)||ze()).add(y);o=o.insert(m.batchId,b)}))})).next((()=>{const d=[],m=o.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),p=y.key,_=y.value,b=U0();_.forEach((w=>{if(!l.has(w)){const I=G0(t.get(w),r.get(w));I!==null&&b.set(w,I),l=l.add(w)}})),d.push(this.documentOverlayCache.saveOverlays(e,p,b))}return oe.waitFor(d)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,o){return(function(d){return be.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):P0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,o):this.getDocumentsMatchingCollectionQuery(e,t,r,o)}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next((l=>{const d=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-l.size):oe.resolve(Ea());let m=Pc,y=l;return d.next((p=>oe.forEach(p,((_,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),l.get(_)?oe.resolve():this.remoteDocumentCache.getEntry(e,_).next((w=>{y=y.insert(_,w)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,y,p,ze()))).next((_=>({batchId:m,changes:L0(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((r=>{let o=yc();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,o){const l=t.collectionGroup;let d=yc();return this.indexManager.getCollectionParents(e,l).next((m=>oe.forEach(m,(y=>{const p=(function(b,w){return new Zo(w,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,o).next((_=>{_.forEach(((b,w)=>{d=d.insert(b,w)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,t,r,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((d=>(l=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,o)))).next((d=>{l.forEach(((y,p)=>{const _=p.getKey();d.get(_)===null&&(d=d.insert(_,yn.newInvalidDocument(_)))}));let m=yc();return d.forEach(((y,p)=>{const _=l.get(y);_!==void 0&&Cc(_.mutation,p,Yn.empty(),Re.now()),Ud(t,p)&&(m=m.insert(y,p))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:$i(o.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:d2(o.bundledQuery),readTime:$i(o.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.overlays=new bt(be.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ea();return oe.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&r.set(o,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((o,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=Ea(),l=t.length+1,d=new be(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,p=y.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&y.largestBatchId>r&&o.set(y.getKey(),y)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let l=new bt(((p,_)=>p-_));const d=this.overlays.getIterator();for(;d.hasNext();){const p=d.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let _=l.get(p.largestBatchId);_===null&&(_=Ea(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const m=Ea(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((p,_)=>m.set(p,_))),!(m.size()>=o)););return oe.resolve(m)}St(e,t,r){const o=this.overlays.get(r.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new qj(t,r));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(){this.sessionToken=un.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(){this.Qr=new Kt(en.$r),this.Ur=new Kt(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new en(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new en(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new be(new dt([])),r=new en(t,e),o=new en(t,e+1),l=[];return this.Ur.forEachInRange([r,o],(d=>{this.Gr(d),l.push(d.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new dt([])),r=new en(t,e),o=new en(t,e+1);let l=ze();return this.Ur.forEachInRange([r,o],(d=>{l=l.add(d.key)})),l}containsKey(e){const t=new en(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Be(e.Yr,t.Yr)}static Kr(e,t){return Be(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(en.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new zj(l,t,r,o);this.mutationQueue.push(d);for(const m of o)this.Zr=this.Zr.add(new en(m.key,l)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=this.ei(r),l=o<0?0:o;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Og:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new en(t,0),o=new en(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([r,o],(d=>{const m=this.Xr(d.Yr);l.push(m)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Kt(Be);return t.forEach((o=>{const l=new en(o,0),d=new en(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,d],(m=>{r=r.add(m.Yr)}))})),oe.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;be.isDocumentKey(l)||(l=l.child(""));const d=new en(new be(l),0);let m=new Kt(Be);return this.Zr.forEachWhile((y=>{const p=y.key.path;return!!r.isPrefixOf(p)&&(p.length===o&&(m=m.add(y.Yr)),!0)}),d),oe.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((r=>{const o=this.Xr(r);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){et(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return oe.forEach(t.mutations,(o=>{const l=new en(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new en(t,0),o=this.Zr.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.ri=e,this.docs=(function(){return new bt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),l=o?o.size:0,d=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():yn.newInvalidDocument(t))}getEntries(e,t){let r=ks();return t.forEach((o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.mutableCopy():yn.newInvalidDocument(o))})),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let l=ks();const d=t.path,m=new be(d.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:p,value:{document:_}}=y.getNext();if(!d.isPrefixOf(p.path))break;p.path.length>d.length+1||tj(ej(_),r)<=0||(o.has(_.key)||Ud(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,r,o){xe(9500)}ii(e,t){return oe.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new C2(this)}getSize(e){return oe.resolve(this.size)}}class C2 extends E2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(r)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.persistence=e,this.si=new Oa((t=>Mg(t)),Vg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.oi=0,this._i=new Fg,this.targetCount=0,this.ai=qo.ur()}forEachTarget(e,t){return this.si.forEach(((r,o)=>t(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.si.forEach(((d,m)=>{m.sequenceNumber<=t&&r.get(m.targetId)===null&&(this.si.delete(d),l.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),oe.waitFor(l).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((d=>{l.push(o.markPotentiallyOrphaned(e,d))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pd(0),this.li=!1,this.li=!0,this.hi=new A2,this.referenceDelegate=e(this),this.Pi=new N2(this),this.indexManager=new f2,this.remoteDocumentCache=(function(o){return new x2(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new h2(t),this.Ii=new w2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new S2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new R2(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){ye("MemoryPersistence","Starting transaction:",e);const o=new I2(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class I2 extends ij{constructor(e){super(),this.currentSequenceNumber=e}}class Hg{constructor(e){this.persistence=e,this.Ri=new Fg,this.Vi=null}static mi(e){return new Hg(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(r=>{const o=be.fromPath(r);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ne.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class pd{constructor(e,t){this.persistence=e,this.pi=new Oa((r=>aj(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=_2(this,t)}static mi(e,t){return new pd(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((o=>r+o))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((r,o)=>this.br(e,r,o).next((l=>l?oe.resolve():t(o)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,t).next((m=>{m||(r++,l.removeEntry(d,Ne.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qh(e.data.value)),t}br(e,t,r){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return oe.resolve(o!==void 0&&o>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gg{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=o}static As(e,t){let r=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Gg(e,t.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return H1()?8:sj(_n())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,o){const l={result:null};return this.ys(e,t).next((d=>{l.result=d})).next((()=>{if(!l.result)return this.ws(e,t,o,r).next((d=>{l.result=d}))})).next((()=>{if(l.result)return;const d=new D2;return this.Ss(e,t,d).next((m=>{if(l.result=m,this.Vs)return this.bs(e,t,d,m.size)}))})).next((()=>l.result))}bs(e,t,r,o){return r.documentReadCount<this.fs?(xo()<=Ue.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",Co(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(xo()<=Ue.DEBUG&&ye("QueryEngine","Query:",Co(t),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(xo()<=Ue.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",Co(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gi(t))):oe.resolve())}ys(e,t){if(WT(t))return oe.resolve(null);let r=Gi(t);return this.indexManager.getIndexType(e,r).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dd(t,null,"F"),r=Gi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const d=ze(...l);return this.ps.getDocuments(e,d).next((m=>this.indexManager.getMinOffset(e,r).next((y=>{const p=this.Ds(t,m);return this.Cs(t,p,d,y.readTime)?this.ys(e,dd(t,null,"F")):this.vs(e,p,t,y)}))))})))))}ws(e,t,r,o){return WT(t)||o.isEqual(Ne.min())?oe.resolve(null):this.ps.getDocuments(e,r).next((l=>{const d=this.Ds(t,l);return this.Cs(t,d,r,o)?oe.resolve(null):(xo()<=Ue.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Co(t)),this.vs(e,d,t,JD(o,Pc)).next((m=>m)))}))}Ds(e,t){let r=new Kt(M0(e));return t.forEach(((o,l)=>{Ud(e,l)&&(r=r.add(l))})),r}Cs(e,t,r,o){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,r){return xo()<=Ue.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",Co(t)),this.ps.getDocumentsMatchingQuery(e,t,xr.min(),r)}vs(e,t,r,o){return this.ps.getDocumentsMatchingQuery(e,r,o).next((l=>(t.forEach((d=>{l=l.insert(d.key,d)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $g="LocalStore",O2=3e8;class P2{constructor(e,t,r,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new bt(Be),this.xs=new Oa((l=>Mg(l)),Vg),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new b2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function k2(n,e,t,r){return new P2(n,e,t,r)}async function rS(n,e){const t=De(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const d=[],m=[];let y=ze();for(const p of o){d.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}for(const p of l){m.push(p.batchId);for(const _ of p.mutations)y=y.add(_.key)}return t.localDocuments.getDocuments(r,y).next((p=>({Ls:p,removedBatchIds:d,addedBatchIds:m})))}))}))}function M2(n,e){const t=De(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,y,p,_){const b=p.batch,w=b.keys();let I=oe.resolve();return w.forEach((M=>{I=I.next((()=>_.getEntry(y,M))).next((z=>{const j=p.docVersions.get(M);et(j!==null,48541),z.version.compareTo(j)<0&&(b.applyToRemoteDocument(z,p),z.isValidDocument()&&(z.setReadTime(p.commitVersion),_.addEntry(z)))}))})),I.next((()=>m.mutationQueue.removeMutationBatch(y,b)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let y=ze();for(let p=0;p<m.mutationResults.length;++p)m.mutationResults[p].transformResults.length>0&&(y=y.add(m.batch.mutations[p].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(r,o)))}))}function aS(n){const e=De(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function V2(n,e){const t=De(n),r=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const d=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((_,b)=>{const w=o.get(b);if(!w)return;m.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,b))));let I=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(b)!==null?I=I.withResumeToken(un.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):_.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(_.resumeToken,r)),o=o.insert(b,I),(function(z,j,U){return z.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=O2?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(w,I,_)&&m.push(t.Pi.updateTargetData(l,I))}));let y=ks(),p=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),m.push(L2(l,d,e.documentUpdates).next((_=>{y=_.ks,p=_.qs}))),!r.isEqual(Ne.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((b=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,r)));m.push(_)}return oe.waitFor(m).next((()=>d.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,p))).next((()=>y))})).then((l=>(t.Ms=o,l)))}function L2(n,e,t){let r=ze(),o=ze();return t.forEach((l=>r=r.add(l))),e.getEntries(n,r).next((l=>{let d=ks();return t.forEach(((m,y)=>{const p=l.get(m);y.isFoundDocument()!==p.isFoundDocument()&&(o=o.add(m)),y.isNoDocument()&&y.version.isEqual(Ne.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!p.isValidDocument()||y.version.compareTo(p.version)>0||y.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):ye($g,"Ignoring outdated watch update for ",m,". Current version:",p.version," Watch version:",y.version)})),{ks:d,qs:o}}))}function U2(n,e){const t=De(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Og),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function B2(n,e){const t=De(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return t.Pi.getTargetData(r,e).next((l=>l?(o=l,oe.resolve(o)):t.Pi.allocateTargetId(r).next((d=>(o=new Tr(e,d,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=t.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Zp(n,e,t){const r=De(n),o=r.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Wo(d))throw d;ye($g,`Failed to update sequence numbers for target ${e}: ${d}`)}r.Ms=r.Ms.remove(e),r.xs.delete(o.target)}function ub(n,e,t){const r=De(n);let o=Ne.min(),l=ze();return r.persistence.runTransaction("Execute query","readwrite",(d=>(function(y,p,_){const b=De(y),w=b.xs.get(_);return w!==void 0?oe.resolve(b.Ms.get(w)):b.Pi.getTargetData(p,_)})(r,d,Gi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(d,m.targetId).next((y=>{l=y}))})).next((()=>r.Fs.getDocumentsMatchingQuery(d,e,t?o:Ne.min(),t?l:ze()))).next((m=>(z2(r,Aj(e),m),{documents:m,Qs:l})))))}function z2(n,e,t){let r=n.Os.get(e)||Ne.min();t.forEach(((o,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),n.Os.set(e,r)}class hb{constructor(){this.activeTargetIds=Dj()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class q2{constructor(){this.Mo=new hb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new hb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="ConnectivityMonitor";class fb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(db,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(db,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vh=null;function Jp(){return Vh===null?Vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Vh++,"0x"+Vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vp="RestConnection",H2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class G2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===cd?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(e,t,r,o,l){const d=Jp(),m=this.zo(e,t.toUriEncodedString());ye(vp,`Sending RPC '${e}' ${d}:`,m,r);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,o,l);const{host:p}=new URL(m),_=Vs(p);return this.Jo(e,m,y,r,_).then((b=>(ye(vp,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw Lo(vp,`RPC '${e}' ${d} failed with error: `,b,"url: ",m,"request:",r),b}))}Ho(e,t,r,o,l,d){return this.Go(e,t,r,o,l)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Qo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),r&&r.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const r=H2[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn="WebChannelConnection";class Y2 extends G2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,o,l){const d=Jp();return new Promise(((m,y)=>{const p=new c0;p.setWithCredentials(!0),p.listenOnce(u0.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Kh.NO_ERROR:const b=p.getResponseJson();ye(mn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),m(b);break;case Kh.TIMEOUT:ye(mn,`RPC '${e}' ${d} timed out`),y(new ge(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Kh.HTTP_ERROR:const w=p.getStatus();if(ye(mn,`RPC '${e}' ${d} failed with status:`,w,"response text:",p.getResponseText()),w>0){let I=p.getResponseJson();Array.isArray(I)&&(I=I[0]);const M=I?.error;if(M&&M.status&&M.message){const z=(function(U){const G=U.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(G)>=0?G:ne.UNKNOWN})(M.status);y(new ge(z,M.message))}else y(new ge(ne.UNKNOWN,"Server responded with status "+p.getStatus()))}else y(new ge(ne.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:d,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{ye(mn,`RPC '${e}' ${d} completed.`)}}));const _=JSON.stringify(o);ye(mn,`RPC '${e}' ${d} sending request:`,o),p.send(t,"POST",_,r,15)}))}T_(e,t,r){const o=Jp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=f0(),m=d0(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(y.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,r),y.encodeInitMessageHeaders=!0;const _=l.join("");ye(mn,`Creating RPC '${e}' stream ${o}: ${_}`,y);const b=d.createWebChannel(_,y);this.I_(b);let w=!1,I=!1;const M=new $2({Yo:j=>{I?ye(mn,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(w||(ye(mn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),w=!0),ye(mn,`RPC '${e}' stream ${o} sending:`,j),b.send(j))},Zo:()=>b.close()}),z=(j,U,G)=>{j.listen(U,(Q=>{try{G(Q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return z(b,gc.EventType.OPEN,(()=>{I||(ye(mn,`RPC '${e}' stream ${o} transport opened.`),M.o_())})),z(b,gc.EventType.CLOSE,(()=>{I||(I=!0,ye(mn,`RPC '${e}' stream ${o} transport closed`),M.a_(),this.E_(b))})),z(b,gc.EventType.ERROR,(j=>{I||(I=!0,Lo(mn,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),M.a_(new ge(ne.UNAVAILABLE,"The operation could not be completed")))})),z(b,gc.EventType.MESSAGE,(j=>{if(!I){const U=j.data[0];et(!!U,16349);const G=U,Q=G?.error||G[0]?.error;if(Q){ye(mn,`RPC '${e}' stream ${o} received error:`,Q);const ie=Q.status;let ee=(function(R){const x=Vt[R];if(x!==void 0)return Y0(x)})(ie),te=Q.message;ee===void 0&&(ee=ne.INTERNAL,te="Unknown error status: "+ie+" with message "+Q.message),I=!0,M.a_(new ge(ee,te)),b.close()}else ye(mn,`RPC '${e}' stream ${o} received:`,U),M.u_(U)}})),z(m,h0.STAT_EVENT,(j=>{j.stat===zp.PROXY?ye(mn,`RPC '${e}' stream ${o} detected buffering proxy`):j.stat===zp.NOPROXY&&ye(mn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{M.__()}),0),M}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function _p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n){return new Wj(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-r);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="PersistentStream";class lS{constructor(e,t,r,o,l,d,m,y){this.Mi=e,this.S_=r,this.b_=o,this.connection=l,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new oS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(Ps(t.toString()),Ps("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===t&&this.G_(r,o)}),(r=>{e((()=>{const o=new ge(ne.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(mb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ye(mb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class K2 extends lS{constructor(e,t,r,o,l,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=e2(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Ne.min();const d=l.targetChange;return d.targetIds&&d.targetIds.length?Ne.min():d.readTime?$i(d.readTime):Ne.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Wp(this.serializer),t.addTarget=(function(l,d){let m;const y=d.target;if(m=$p(y)?{documents:i2(l,y)}:{query:s2(l,y).ft},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=X0(l,d.resumeToken);const p=Kp(l,d.expectedCount);p!==null&&(m.expectedCount=p)}else if(d.snapshotVersion.compareTo(Ne.min())>0){m.readTime=md(l,d.snapshotVersion.toTimestamp());const p=Kp(l,d.expectedCount);p!==null&&(m.expectedCount=p)}return m})(this.serializer,e);const r=a2(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Wp(this.serializer),t.removeTarget=e,this.q_(t)}}class Q2 extends lS{constructor(e,t,r,o,l,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=n2(e.writeResults,e.commitTime),r=$i(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Wp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>t2(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{}class W2 extends X2{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Go(e,Qp(t,r),o,l,d))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ne.UNKNOWN,l.toString())}))}Ho(e,t,r,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,m])=>this.connection.Ho(e,Qp(t,r),o,d,m,l))).catch((d=>{throw d.name==="FirebaseError"?(d.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ge(ne.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Z2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ps(t),this.aa=!1):ye("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na="RemoteStore";class J2{constructor(e,t,r,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((d=>{r.enqueueAndForget((async()=>{Pa(this)&&(ye(Na,"Restarting streams for network reachability change."),await(async function(y){const p=De(y);p.Ea.add(4),await eu(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Hd(p)})(this))}))})),this.Ra=new Z2(r,o)}}async function Hd(n){if(Pa(n))for(const e of n.da)await e(!0)}async function eu(n){for(const e of n.da)await e(!1)}function cS(n,e){const t=De(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Xg(t)?Qg(t):Jo(t).O_()&&Kg(t,e))}function Yg(n,e){const t=De(n),r=Jo(t);t.Ia.delete(e),r.O_()&&uS(t,e),t.Ia.size===0&&(r.O_()?r.L_():Pa(t)&&t.Ra.set("Unknown"))}function Kg(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Jo(n).Y_(e)}function uS(n,e){n.Va.Ue(e),Jo(n).Z_(e)}function Qg(n){n.Va=new Yj({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),Jo(n).start(),n.Ra.ua()}function Xg(n){return Pa(n)&&!Jo(n).x_()&&n.Ia.size>0}function Pa(n){return De(n).Ea.size===0}function hS(n){n.Va=void 0}async function eO(n){n.Ra.set("Online")}async function tO(n){n.Ia.forEach(((e,t)=>{Kg(n,e)}))}async function nO(n,e){hS(n),Xg(n)?(n.Ra.ha(e),Qg(n)):n.Ra.set("Unknown")}async function iO(n,e,t){if(n.Ra.set("Online"),e instanceof Q0&&e.state===2&&e.cause)try{await(async function(o,l){const d=l.cause;for(const m of l.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,d),o.Ia.delete(m),o.Va.removeTarget(m))})(n,e)}catch(r){ye(Na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await gd(n,r)}else if(e instanceof Zh?n.Va.Ze(e):e instanceof K0?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ne.min()))try{const r=await aS(n.localStore);t.compareTo(r)>=0&&await(function(l,d){const m=l.Va.Tt(d);return m.targetChanges.forEach(((y,p)=>{if(y.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(y.resumeToken,d))}})),m.targetMismatches.forEach(((y,p)=>{const _=l.Ia.get(y);if(!_)return;l.Ia.set(y,_.withResumeToken(un.EMPTY_BYTE_STRING,_.snapshotVersion)),uS(l,y);const b=new Tr(_.target,y,p,_.sequenceNumber);Kg(l,b)})),l.remoteSyncer.applyRemoteEvent(m)})(n,t)}catch(r){ye(Na,"Failed to raise snapshot:",r),await gd(n,r)}}async function gd(n,e,t){if(!Wo(e))throw e;n.Ea.add(1),await eu(n),n.Ra.set("Offline"),t||(t=()=>aS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ye(Na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Hd(n)}))}function dS(n,e){return e().catch((t=>gd(n,t,e)))}async function Gd(n){const e=De(n),t=Dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Og;for(;sO(e);)try{const o=await U2(e.localStore,r);if(o===null){e.Ta.length===0&&t.L_();break}r=o.batchId,rO(e,o)}catch(o){await gd(e,o)}fS(e)&&mS(e)}function sO(n){return Pa(n)&&n.Ta.length<10}function rO(n,e){n.Ta.push(e);const t=Dr(n);t.O_()&&t.X_&&t.ea(e.mutations)}function fS(n){return Pa(n)&&!Dr(n).x_()&&n.Ta.length>0}function mS(n){Dr(n).start()}async function aO(n){Dr(n).ra()}async function oO(n){const e=Dr(n);for(const t of n.Ta)e.ea(t.mutations)}async function lO(n,e,t){const r=n.Ta.shift(),o=Bg.from(r,e,t);await dS(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Gd(n)}async function cO(n,e){e&&Dr(n).X_&&await(async function(r,o){if((function(d){return Hj(d)&&d!==ne.ABORTED})(o.code)){const l=r.Ta.shift();Dr(r).B_(),await dS(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Gd(r)}})(n,e),fS(n)&&mS(n)}async function pb(n,e){const t=De(n);t.asyncQueue.verifyOperationInProgress(),ye(Na,"RemoteStore received new credentials");const r=Pa(t);t.Ea.add(3),await eu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Hd(t)}async function uO(n,e){const t=De(n);e?(t.Ea.delete(2),await Hd(t)):e||(t.Ea.add(2),await eu(t),t.Ra.set("Unknown"))}function Jo(n){return n.ma||(n.ma=(function(t,r,o){const l=De(t);return l.sa(),new K2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:eO.bind(null,n),t_:tO.bind(null,n),r_:nO.bind(null,n),H_:iO.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Xg(n)?Qg(n):n.Ra.set("Unknown")):(await n.ma.stop(),hS(n))}))),n.ma}function Dr(n){return n.fa||(n.fa=(function(t,r,o){const l=De(t);return l.sa(),new Q2(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:aO.bind(null,n),r_:cO.bind(null,n),ta:oO.bind(null,n),na:lO.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Gd(n)):(await n.fa.stop(),n.Ta.length>0&&(ye(Na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,o,l){const d=Date.now()+r,m=new Wg(e,t,d,o,l);return m.start(r),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zg(n,e){if(Ps("AsyncQueue",`${e}: ${n}`),Wo(n))return new ge(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||be.comparator(t.key,r.key):(t,r)=>be.comparator(t.key,r.key),this.keyedMap=yc(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Mo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(){this.ga=new bt(be.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Fo{constructor(e,t,r,o,l,d,m,y,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,o,l){const d=[];return t.forEach((m=>{d.push({type:0,doc:m})})),new Fo(e,t,Mo.emptySet(t),d,r,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ld(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class dO{constructor(){this.queries=yb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const o=De(t),l=o.queries;o.queries=yb(),l.forEach(((d,m)=>{for(const y of m.Sa)y.onError(r)}))})(this,new ge(ne.ABORTED,"Firestore shutting down"))}}function yb(){return new Oa((n=>k0(n)),Ld)}async function Jg(n,e){const t=De(n);let r=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(r=2):(l=new hO,r=e.Da()?0:1);try{switch(r){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(d){const m=Zg(d,`Initialization of query '${Co(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&ty(t)}async function ey(n,e){const t=De(n),r=e.query;let o=3;const l=t.queries.get(r);if(l){const d=l.Sa.indexOf(e);d>=0&&(l.Sa.splice(d,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function fO(n,e){const t=De(n);let r=!1;for(const o of e){const l=o.query,d=t.queries.get(l);if(d){for(const m of d.Sa)m.Fa(o)&&(r=!0);d.wa=o}}r&&ty(t)}function mO(n,e,t){const r=De(n),o=r.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);r.queries.delete(e)}function ty(n){n.Ca.forEach((e=>{e.next()}))}var eg,vb;(vb=eg||(eg={})).Ma="default",vb.Cache="cache";class ny{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)o.type!==3&&r.push(o);e=new Fo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==eg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e){this.key=e}}class gS{constructor(e){this.key=e}}class pO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=M0(e),this.tu=new Mo(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new gb,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const y=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,p=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,b)=>{const w=o.get(_),I=Ud(this.query,b)?b:null,M=!!w&&this.mutatedKeys.has(w.key),z=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let j=!1;w&&I?w.data.isEqual(I.data)?M!==z&&(r.track({type:3,doc:I}),j=!0):this.su(w,I)||(r.track({type:2,doc:I}),j=!0,(y&&this.eu(I,y)>0||p&&this.eu(I,p)<0)&&(m=!0)):!w&&I?(r.track({type:0,doc:I}),j=!0):w&&!I&&(r.track({type:1,doc:w}),j=!0,(y||p)&&(m=!0)),j&&(I?(d=d.add(I),l=z?l.add(_):l.delete(_)):(d=d.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const _=this.query.limitType==="F"?d.last():d.first();d=d.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{tu:d,iu:r,Cs:m,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((_,b)=>(function(I,M){const z=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:j})}};return z(I)-z(M)})(_.type,b.type)||this.eu(_.doc,b.doc))),this.ou(r),o=o??!1;const m=t&&!o?this._u():[],y=this.Xa.size===0&&this.current&&!o?1:0,p=y!==this.Za;return this.Za=y,d.length!==0||p?{snapshot:new Fo(this.query,e.tu,l,d,e.mutatedKeys,y===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new gS(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new pS(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const iy="SyncEngine";class gO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class yO{constructor(e){this.key=e,this.hu=!1}}class vO{constructor(e,t,r,o,l,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Oa((m=>k0(m)),Ld),this.Iu=new Map,this.Eu=new Set,this.du=new bt(be.comparator),this.Au=new Map,this.Ru=new Fg,this.Vu={},this.mu=new Map,this.fu=qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _O(n,e,t=!0){const r=bS(n);let o;const l=r.Tu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await yS(r,e,t,!0),o}async function EO(n,e){const t=bS(n);await yS(t,e,!0,!1)}async function yS(n,e,t,r){const o=await B2(n.localStore,Gi(e)),l=o.targetId,d=n.sharedClientState.addLocalQueryTarget(l,t);let m;return r&&(m=await TO(n,e,l,d==="current",o.resumeToken)),n.isPrimaryClient&&t&&cS(n.remoteStore,o),m}async function TO(n,e,t,r,o){n.pu=(b,w,I)=>(async function(z,j,U,G){let Q=j.view.ru(U);Q.Cs&&(Q=await ub(z.localStore,j.query,!1).then((({documents:D})=>j.view.ru(D,Q))));const ie=G&&G.targetChanges.get(j.targetId),ee=G&&G.targetMismatches.get(j.targetId)!=null,te=j.view.applyChanges(Q,z.isPrimaryClient,ie,ee);return Eb(z,j.targetId,te.au),te.snapshot})(n,b,w,I);const l=await ub(n.localStore,e,!0),d=new pO(e,l.Qs),m=d.ru(l.documents),y=Jc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",o),p=d.applyChanges(m,n.isPrimaryClient,y);Eb(n,t,p.au);const _=new gO(e,t,d);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),p.snapshot}async function bO(n,e,t){const r=De(n),o=r.Tu.get(e),l=r.Iu.get(o.targetId);if(l.length>1)return r.Iu.set(o.targetId,l.filter((d=>!Ld(d,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Zp(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),t&&Yg(r.remoteStore,o.targetId),tg(r,o.targetId)})).catch(Xo)):(tg(r,o.targetId),await Zp(r.localStore,o.targetId,!0))}async function wO(n,e){const t=De(n),r=t.Tu.get(e),o=t.Iu.get(r.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yg(t.remoteStore,r.targetId))}async function SO(n,e,t){const r=DO(n);try{const o=await(function(d,m){const y=De(d),p=Re.now(),_=m.reduce(((I,M)=>I.add(M.key)),ze());let b,w;return y.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let M=ks(),z=ze();return y.Ns.getEntries(I,_).next((j=>{M=j,M.forEach(((U,G)=>{G.isValidDocument()||(z=z.add(U))}))})).next((()=>y.localDocuments.getOverlayedDocuments(I,M))).next((j=>{b=j;const U=[];for(const G of m){const Q=Uj(G,b.get(G.key).overlayedDocument);Q!=null&&U.push(new Mr(G.key,Q,x0(Q.value.mapValue),Pn.exists(!0)))}return y.mutationQueue.addMutationBatch(I,p,U,m)})).next((j=>{w=j;const U=j.applyToLocalDocumentSet(b,z);return y.documentOverlayCache.saveOverlays(I,j.batchId,U)}))})).then((()=>({batchId:w.batchId,changes:L0(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),(function(d,m,y){let p=d.Vu[d.currentUser.toKey()];p||(p=new bt(Be)),p=p.insert(m,y),d.Vu[d.currentUser.toKey()]=p})(r,o.batchId,t),await tu(r,o.changes),await Gd(r.remoteStore)}catch(o){const l=Zg(o,"Failed to persist write");t.reject(l)}}async function vS(n,e){const t=De(n);try{const r=await V2(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const d=t.Au.get(l);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?et(d.hu,14607):o.removedDocuments.size>0&&(et(d.hu,42227),d.hu=!1))})),await tu(t,r,e)}catch(r){await Xo(r)}}function _b(n,e,t){const r=De(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const o=[];r.Tu.forEach(((l,d)=>{const m=d.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(d,m){const y=De(d);y.onlineState=m;let p=!1;y.queries.forEach(((_,b)=>{for(const w of b.Sa)w.va(m)&&(p=!0)})),p&&ty(y)})(r.eventManager,e),o.length&&r.Pu.H_(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function AO(n,e,t){const r=De(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Au.get(e),l=o&&o.key;if(l){let d=new bt(be.comparator);d=d.insert(l,yn.newNoDocument(l,Ne.min()));const m=ze().add(l),y=new qd(Ne.min(),new Map,new bt(Be),d,m);await vS(r,y),r.du=r.du.remove(l),r.Au.delete(e),sy(r)}else await Zp(r.localStore,e,!1).then((()=>tg(r,e,t))).catch(Xo)}async function RO(n,e){const t=De(n),r=e.batch.batchId;try{const o=await M2(t.localStore,e);ES(t,r,null),_S(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await tu(t,o)}catch(o){await Xo(o)}}async function xO(n,e,t){const r=De(n);try{const o=await(function(d,m){const y=De(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return y.mutationQueue.lookupMutationBatch(p,m).next((b=>(et(b!==null,37113),_=b.keys(),y.mutationQueue.removeMutationBatch(p,b)))).next((()=>y.mutationQueue.performConsistencyCheck(p))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(p,_,m))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>y.localDocuments.getDocuments(p,_)))}))})(r.localStore,e);ES(r,e,t),_S(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await tu(r,o)}catch(o){await Xo(o)}}function _S(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function ES(n,e,t){const r=De(n);let o=r.Vu[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.Vu[r.currentUser.toKey()]=o}}function tg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||TS(n,r)}))}function TS(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Yg(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),sy(n))}function Eb(n,e,t){for(const r of t)r instanceof pS?(n.Ru.addReference(r.key,e),CO(n,r)):r instanceof gS?(ye(iy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||TS(n,r.key)):xe(19791,{wu:r})}function CO(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(ye(iy,"New document in limbo: "+t),n.Eu.add(r),sy(n))}function sy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(dt.fromString(e)),r=n.fu.next();n.Au.set(r,new yO(t)),n.du=n.du.insert(t,r),cS(n.remoteStore,new Tr(Gi(Vd(t.path)),r,"TargetPurposeLimboResolution",Pd.ce))}}async function tu(n,e,t){const r=De(n),o=[],l=[],d=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,y)=>{d.push(r.pu(y,e,t).then((p=>{if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(y.targetId)?.current;r.sharedClientState.updateQueryState(y.targetId,_?"current":"not-current")}if(p){o.push(p);const _=Gg.As(y.targetId,p);l.push(_)}})))})),await Promise.all(d),r.Pu.H_(o),await(async function(y,p){const _=De(y);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>oe.forEach(p,(w=>oe.forEach(w.Es,(I=>_.persistence.referenceDelegate.addReference(b,w.targetId,I))).next((()=>oe.forEach(w.ds,(I=>_.persistence.referenceDelegate.removeReference(b,w.targetId,I)))))))))}catch(b){if(!Wo(b))throw b;ye($g,"Failed to update sequence numbers: "+b)}for(const b of p){const w=b.targetId;if(!b.fromCache){const I=_.Ms.get(w),M=I.snapshotVersion,z=I.withLastLimboFreeSnapshotVersion(M);_.Ms=_.Ms.insert(w,z)}}})(r.localStore,l))}async function NO(n,e){const t=De(n);if(!t.currentUser.isEqual(e)){ye(iy,"User change. New user:",e.toKey());const r=await rS(t.localStore,e);t.currentUser=e,(function(l,d){l.mu.forEach((m=>{m.forEach((y=>{y.reject(new ge(ne.CANCELLED,d))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tu(t,r.Ls)}}function IO(n,e){const t=De(n),r=t.Au.get(e);if(r&&r.hu)return ze().add(r.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const d of l){const m=t.Tu.get(d);o=o.unionWith(m.view.nu)}return o}}function bS(n){const e=De(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=vS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AO.bind(null,e),e.Pu.H_=fO.bind(null,e.eventManager),e.Pu.yu=mO.bind(null,e.eventManager),e}function DO(n){const e=De(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xO.bind(null,e),e}class yd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return k2(this.persistence,new j2,e.initialUser,this.serializer)}Cu(e){return new sS(Hg.mi,this.serializer)}Du(e){return new q2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yd.provider={build:()=>new yd};class jO extends yd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){et(this.persistence.referenceDelegate instanceof pd,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new y2(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Nn.withCacheSize(this.cacheSizeBytes):Nn.DEFAULT;return new sS((r=>pd.mi(r,t)),this.serializer)}}class ng{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_b(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=NO.bind(null,this.syncEngine),await uO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dO})()}createDatastore(e){const t=Fd(e.databaseInfo.databaseId),r=(function(l){return new Y2(l)})(e.databaseInfo);return(function(l,d,m,y){return new W2(l,d,m,y)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,o,l,d,m){return new J2(r,o,l,d,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>_b(this.syncEngine,t,0)),(function(){return fb.v()?new fb:new F2})())}createSyncEngine(e,t){return(function(o,l,d,m,y,p,_){const b=new vO(o,l,d,m,y,p);return _&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const r=De(t);ye(Na,"RemoteStore shutting down."),r.Ea.add(5),await eu(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ng.provider={build:()=>new ng};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Ps("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr="FirestoreClient";class OO{constructor(e,t,r,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=gn.UNAUTHENTICATED,this.clientId=jg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async d=>{ye(jr,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(r,(d=>(ye(jr,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Zg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Ep(n,e){n.asyncQueue.verifyOperationInProgress(),ye(jr,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async o=>{r.isEqual(o)||(await rS(e.localStore,o),r=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function Tb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await PO(n);ye(jr,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>pb(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,o)=>pb(e.remoteStore,o))),n._onlineComponents=e}async function PO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ye(jr,"Using user provided OfflineComponentProvider");try{await Ep(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Lo("Error using user provided cache. Falling back to memory cache: "+t),await Ep(n,new yd)}}else ye(jr,"Using default OfflineComponentProvider"),await Ep(n,new jO(void 0));return n._offlineComponents}async function wS(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ye(jr,"Using user provided OnlineComponentProvider"),await Tb(n,n._uninitializedComponentsProvider._online)):(ye(jr,"Using default OnlineComponentProvider"),await Tb(n,new ng))),n._onlineComponents}function kO(n){return wS(n).then((e=>e.syncEngine))}async function vd(n){const e=await wS(n),t=e.eventManager;return t.onListen=_O.bind(null,e.syncEngine),t.onUnlisten=bO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=wO.bind(null,e.syncEngine),t}function MO(n,e,t={}){const r=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,y,p){const _=new ry({next:w=>{_.Nu(),d.enqueueAndForget((()=>ey(l,b)));const I=w.docs.has(m);!I&&w.fromCache?p.reject(new ge(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&y&&y.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new ny(Vd(m.path),_,{includeMetadataChanges:!0,qa:!0});return Jg(l,b)})(await vd(n),n.asyncQueue,e,t,r))),r.promise}function VO(n,e,t={}){const r=new Cs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,d,m,y,p){const _=new ry({next:w=>{_.Nu(),d.enqueueAndForget((()=>ey(l,b))),w.fromCache&&y.source==="server"?p.reject(new ge(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(w)},error:w=>p.reject(w)}),b=new ny(m,_,{includeMetadataChanges:!0,qa:!0});return Jg(l,b)})(await vd(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SS(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS="firestore.googleapis.com",wb=!0;class Sb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=AS,this.ssl=wb}else this.host=e.host,this.ssl=e.ssl??wb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=iS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<p2)throw new ge(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=SS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new ge(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $d{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Sb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Sb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new qD;switch(r.type){case"firstParty":return new $D(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ge(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=bb.get(t);r&&(ye("ComponentProvider","Removing Datastore"),bb.delete(t),r.terminate())})(this),Promise.resolve()}}function LO(n,e,t,r={}){n=On(n,$d);const o=Vs(e),l=n._getSettings(),d={...l,emulatorOptions:n._getEmulatorOptions()},m=`${e}:${t}`;o&&(Rd(`https://${m}`),xd("Firestore",!0)),l.host!==AS&&l.host!==m&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:m,ssl:o,emulatorOptions:r};if(!Sa(y,d)&&(n._setSettings(y),r.mockUserToken)){let p,_;if(typeof r.mockUserToken=="string")p=r.mockUserToken,_=gn.MOCK_USER;else{p=gw(r.mockUserToken,n._app?.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new ge(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new gn(b)}n._authCredentials=new FD(new p0(p,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ar(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rt(this.firestore,e,this._key)}toJSON(){return{type:Rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Wc(t,Rt._jsonSchema))return new Rt(e,r||null,new be(dt.fromString(t.referencePath)))}}Rt._jsonSchemaVersion="firestore/documentReference/1.0",Rt._jsonSchema={type:Bt("string",Rt._jsonSchemaVersion),referencePath:Bt("string")};class Ar extends Ls{constructor(e,t,r){super(e,t,Vd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rt(this.firestore,null,new be(e))}withConverter(e){return new Ar(this.firestore,e,this._path)}}function ct(n,e,...t){if(n=Ze(n),g0("collection","path",e),n instanceof $d){const r=dt.fromString(e,...t);return VT(r),new Ar(n,null,r)}{if(!(n instanceof Rt||n instanceof Ar))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return VT(r),new Ar(n.firestore,null,r)}}function _t(n,e,...t){if(n=Ze(n),arguments.length===1&&(e=jg.newId()),g0("doc","path",e),n instanceof $d){const r=dt.fromString(e,...t);return MT(r),new Rt(n,null,new be(r))}{if(!(n instanceof Rt||n instanceof Ar))throw new ge(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(dt.fromString(e,...t));return MT(r),new Rt(n.firestore,n instanceof Ar?n.converter:null,new be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="AsyncQueue";class Rb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new oS(this,"async_queue_retry"),this._c=()=>{const r=_p();r&&ye(Ab,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=_p();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=_p();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Cs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Wo(e))throw e;ye(Ab,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ps("INTERNAL UNHANDLED ERROR: ",xb(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Wg.createAndSchedule(this,e,t,r,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:xb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function xb(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cb(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of r)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class Ms extends $d{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new Rb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Rb(e),this._firestoreClient=void 0,await e}}}function UO(n,e){const t=typeof n=="object"?n:Cd(),r=typeof n=="string"?n:cd,o=$c(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const l=yg("firestore");l&&LO(o,...l)}return o}function nu(n){if(n._terminated)throw new ge(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||BO(n),n._firestoreClient}function BO(n){const e=n._freezeSettings(),t=(function(o,l,d,m){return new cj(o,l,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,SS(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new OO(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new oi(un.fromBase64String(e))}catch(t){throw new ge(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new oi(un.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:oi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Wc(e,oi._jsonSchema))return oi.fromBase64String(e.bytes)}}oi._jsonSchemaVersion="firestore/bytes/1.0",oi._jsonSchema={type:Bt("string",oi._jsonSchemaVersion),bytes:Bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ln(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Be(this._lat,e._lat)||Be(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Yi._jsonSchemaVersion}}static fromJSON(e){if(Wc(e,Yi._jsonSchema))return new Yi(e.latitude,e.longitude)}}Yi._jsonSchemaVersion="firestore/geoPoint/1.0",Yi._jsonSchema={type:Bt("string",Yi._jsonSchemaVersion),latitude:Bt("number"),longitude:Bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,o){if(r.length!==o.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ki._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Wc(e,Ki._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ki(e.vectorValues);throw new ge(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ki._jsonSchemaVersion="firestore/vectorValue/1.0",Ki._jsonSchema={type:Bt("string",Ki._jsonSchemaVersion),vectorValues:Bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^__.*__$/;class qO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zc(e,this.data,t,this.fieldTransforms)}}class RS{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Mr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function xS(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:n})}}class ay{constructor(e,t,r,o,l,d){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new ay({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){const t=this.path?.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return _d(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(xS(this.Ac)&&zO.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class FO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Fd(e)}Cc(e,t,r,o=!1){return new ay({Ac:e,methodName:t,Dc:r,path:ln.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function su(n){const e=n._freezeSettings(),t=Fd(n._databaseId);return new FO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function oy(n,e,t,r,o,l={}){const d=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);cy("Data must be an object, but it was:",d,r);const m=IS(r,d);let y,p;if(l.merge)y=new Yn(d.fieldMask),p=d.fieldTransforms;else if(l.mergeFields){const _=[];for(const b of l.mergeFields){const w=ig(e,b,t);if(!d.contains(w))throw new ge(ne.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);jS(_,w)||_.push(w)}y=new Yn(_),p=d.fieldTransforms.filter((b=>y.covers(b.field)))}else y=null,p=d.fieldTransforms;return new qO(new Dn(m),y,p)}class Kd extends Yd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Kd}}class ly extends Yd{_toFieldTransform(e){return new kj(e.path,new Uc)}isEqual(e){return e instanceof ly}}function CS(n,e,t,r){const o=n.Cc(1,e,t);cy("Data must be an object, but it was:",o,r);const l=[],d=Dn.empty();kr(r,((y,p)=>{const _=uy(e,y,t);p=Ze(p);const b=o.yc(_);if(p instanceof Kd)l.push(_);else{const w=ru(p,b);w!=null&&(l.push(_),d.set(_,w))}}));const m=new Yn(l);return new RS(d,m,o.fieldTransforms)}function NS(n,e,t,r,o,l){const d=n.Cc(1,e,t),m=[ig(e,r,t)],y=[o];if(l.length%2!=0)throw new ge(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)m.push(ig(e,l[w])),y.push(l[w+1]);const p=[],_=Dn.empty();for(let w=m.length-1;w>=0;--w)if(!jS(p,m[w])){const I=m[w];let M=y[w];M=Ze(M);const z=d.yc(I);if(M instanceof Kd)p.push(I);else{const j=ru(M,z);j!=null&&(p.push(I),_.set(I,j))}}const b=new Yn(p);return new RS(_,b,d.fieldTransforms)}function HO(n,e,t,r=!1){return ru(t,n.Cc(r?4:3,e))}function ru(n,e){if(DS(n=Ze(n)))return cy("Unsupported field value:",e,n),IS(n,e);if(n instanceof Yd)return(function(r,o){if(!xS(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,o){const l=[];let d=0;for(const m of r){let y=ru(m,o.wc(d));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),d++}return{arrayValue:{values:l}}})(n,e)}return(function(r,o){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jj(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Re.fromDate(r);return{timestampValue:md(o.serializer,l)}}if(r instanceof Re){const l=new Re(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:md(o.serializer,l)}}if(r instanceof Yi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof oi)return{bytesValue:X0(o.serializer,r._byteString)};if(r instanceof Rt){const l=o.databaseId,d=r.firestore._databaseId;if(!d.isEqual(l))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:qg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Ki)return(function(d,m){return{mapValue:{fields:{[A0]:{stringValue:R0},[ud]:{arrayValue:{values:d.toArray().map((p=>{if(typeof p!="number")throw m.Sc("VectorValues must only contain numeric values.");return Lg(m.serializer,p)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Od(r)}`)})(n,e)}function IS(n,e){const t={};return _0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):kr(n,((r,o)=>{const l=ru(o,e.mc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function DS(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Re||n instanceof Yi||n instanceof oi||n instanceof Rt||n instanceof Yd||n instanceof Ki)}function cy(n,e,t){if(!DS(t)||!y0(t)){const r=Od(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ig(n,e,t){if((e=Ze(e))instanceof iu)return e._internalPath;if(typeof e=="string")return uy(n,e);throw _d("Field path arguments must be of type string or ",n,!1,void 0,t)}const GO=new RegExp("[~\\*/\\[\\]]");function uy(n,e,t){if(e.search(GO)>=0)throw _d(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new iu(...e.split("."))._internalPath}catch{throw _d(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _d(n,e,t,r,o){const l=r&&!r.isEmpty(),d=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(l||d)&&(y+=" (found",l&&(y+=` in field ${r}`),d&&(y+=` in document ${o}`),y+=")"),new ge(ne.INVALID_ARGUMENT,m+n+y)}function jS(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $O(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Qd("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $O extends OS{data(){return super.data()}}function Qd(n,e){return typeof e=="string"?uy(n,e):e instanceof iu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hy{}class dy extends hy{}function mt(n,e,...t){let r=[];e instanceof hy&&r.push(e),r=r.concat(t),(function(l){const d=l.filter((y=>y instanceof fy)).length,m=l.filter((y=>y instanceof Xd)).length;if(d>1||d>0&&m>0)throw new ge(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)n=o._apply(n);return n}class Xd extends dy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xd(e,t,r)}_apply(e){const t=this._parse(e);return kS(e._query,t),new Ls(e.firestore,e.converter,Yp(e._query,t))}_parse(e){const t=su(e.firestore);return(function(l,d,m,y,p,_,b){let w;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Ib(b,_);const M=[];for(const z of b)M.push(Nb(y,l,z));w={arrayValue:{values:M}}}else w=Nb(y,l,b)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Ib(b,_),w=HO(m,d,b,_==="in"||_==="not-in");return Ut.create(p,_,w)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vt(n,e,t){const r=e,o=Qd("where",n);return Xd._create(o,r,t)}class fy extends hy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fy(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:_i.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let d=o;const m=l.getFlattenedFilters();for(const y of m)kS(d,y),d=Yp(d,y)})(e._query,t),new Ls(e.firestore,e.converter,Yp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class my extends dy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new my(e,t)}_apply(e){const t=(function(o,l,d){if(o.startAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ge(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lc(l,d)})(e._query,this._field,this._direction);return new Ls(e.firestore,e.converter,(function(o,l){const d=o.explicitOrderBy.concat([l]);return new Zo(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function pn(n,e="asc"){const t=e,r=Qd("orderBy",n);return my._create(r,t)}class py extends dy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new py(e,t,r)}_apply(e){return new Ls(e.firestore,e.converter,dd(e._query,this._limit,this._limitType))}}function YO(n){return py._create("limit",n,"F")}function Nb(n,e,t){if(typeof(t=Ze(t))=="string"){if(t==="")throw new ge(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!P0(e)&&t.indexOf("/")!==-1)throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(dt.fromString(t));if(!be.isDocumentKey(r))throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return GT(n,new be(r))}if(t instanceof Rt)return GT(n,t._key);throw new ge(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Od(t)}.`)}function Ib(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(n,e){const t=(function(o,l){for(const d of o)for(const m of d.getFlattenedFilters())if(l.indexOf(m.op)>=0)return m.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KO{convertValue(e,t="none"){switch(Ir(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Nr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return kr(e,((o,l)=>{r[o]=this.convertValue(l,t)})),r}convertVectorValue(e){const t=e.fields?.[ud].arrayValue?.values?.map((r=>jt(r.doubleValue)));return new Ki(t)}convertGeoPoint(e){return new Yi(jt(e.latitude),jt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Md(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(kc(e));default:return null}}convertTimestamp(e){const t=Cr(e);return new Re(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=dt.fromString(e);et(nS(r),9688,{name:e});const o=new Mc(r.get(1),r.get(3)),l=new be(r.popFirst(5));return o.isEqual(t)||Ps(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class _c{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ta extends OS{constructor(e,t,r,o,l,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Qd("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ta._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ta._jsonSchema={type:Bt("string",Ta._jsonSchemaVersion),bundleSource:Bt("string","DocumentSnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class Jh extends Ta{data(e={}){return super.data(e)}}class ba{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _c(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Jh(this._firestore,this._userDataWriter,r.key,r,new _c(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((m=>{const y=new Jh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:y,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>l||m.type!==3)).map((m=>{const y=new Jh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new _c(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let p=-1,_=-1;return m.type!==0&&(p=d.indexOf(m.doc.key),d=d.delete(m.doc.key)),m.type!==1&&(d=d.add(m.doc),_=d.indexOf(m.doc.key)),{type:QO(m.type),doc:y,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=jg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function QO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(n){n=On(n,Rt);const e=On(n.firestore,Ms);return MO(nu(e),n._key).then((t=>MS(e,n,t)))}ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:Bt("string",ba._jsonSchemaVersion),bundleSource:Bt("string","QuerySnapshot"),bundleName:Bt("string"),bundle:Bt("string")};class yy extends KO{constructor(e){super(),this.firestore=e}convertBytes(e){return new oi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rt(this.firestore,null,t)}}function cn(n){n=On(n,Ls);const e=On(n.firestore,Ms),t=nu(e),r=new yy(e);return PS(n._query),VO(t,n._query).then((o=>new ba(e,r,n,o)))}function Ns(n,e,t){n=On(n,Rt);const r=On(n.firestore,Ms),o=gy(n.converter,e,t);return Wd(r,[oy(su(r),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Pn.none())])}function Or(n,e,t,...r){n=On(n,Rt);const o=On(n.firestore,Ms),l=su(o);let d;return d=typeof(e=Ze(e))=="string"||e instanceof iu?NS(l,"updateDoc",n._key,e,t,r):CS(l,"updateDoc",n._key,e),Wd(o,[d.toMutation(n._key,Pn.exists(!0))])}function qc(n,e){const t=On(n.firestore,Ms),r=_t(n),o=gy(n.converter,e);return Wd(t,[oy(su(n.firestore),"addDoc",r._key,o,n.converter!==null,{}).toMutation(r._key,Pn.exists(!1))]).then((()=>r))}function ou(n,...e){n=Ze(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||Cb(e[r])||(t=e[r++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(Cb(e[r])){const y=e[r];e[r]=y.next?.bind(y),e[r+1]=y.error?.bind(y),e[r+2]=y.complete?.bind(y)}let l,d,m;if(n instanceof Rt)d=On(n.firestore,Ms),m=Vd(n._key.path),l={next:y=>{e[r]&&e[r](MS(d,n,y))},error:e[r+1],complete:e[r+2]};else{const y=On(n,Ls);d=On(y.firestore,Ms),m=y._query;const p=new yy(d);l={next:_=>{e[r]&&e[r](new ba(d,p,y,_))},error:e[r+1],complete:e[r+2]},PS(n._query)}return(function(p,_,b,w){const I=new ry(w),M=new ny(_,I,b);return p.asyncQueue.enqueueAndForget((async()=>Jg(await vd(p),M))),()=>{I.Nu(),p.asyncQueue.enqueueAndForget((async()=>ey(await vd(p),M)))}})(nu(d),m,o,l)}function Wd(n,e){return(function(r,o){const l=new Cs;return r.asyncQueue.enqueueAndForget((async()=>SO(await kO(r),o,l))),l.promise})(nu(n),e)}function MS(n,e,t){const r=t.docs.get(e._key),o=new yy(n);return new Ta(n,o,e._key,r,new _c(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=su(e)}set(e,t,r){this._verifyNotCommitted();const o=Tp(e,this._firestore),l=gy(o.converter,t,r),d=oy(this._dataReader,"WriteBatch.set",o._key,l,o.converter!==null,r);return this._mutations.push(d.toMutation(o._key,Pn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Tp(e,this._firestore);let d;return d=typeof(t=Ze(t))=="string"||t instanceof iu?NS(this._dataReader,"WriteBatch.update",l._key,t,r,o):CS(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(d.toMutation(l._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Tp(e,this._firestore);return this._mutations=this._mutations.concat(new Ug(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ge(ne.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Tp(n,e){if((n=Ze(n)).firestore!==e)throw new ge(ne.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}function Yt(){return new ly("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WO(n){return nu(n=On(n,Ms)),new XO(n,(e=>Wd(n,e)))}(function(e,t=!0){(function(o){Qo=o})(Da),Rr(new Ds("firestore",((r,{instanceIdentifier:o,options:l})=>{const d=r.getProvider("app").getImmediate(),m=new Ms(new HD(r.getProvider("auth-internal")),new YD(d,r.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ge(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mc(p.options.projectId,_)})(d,o),d);return l={useFetchStreams:t,...l},m._setSettings(l),m}),"PUBLIC").setMultipleInstances(!0)),li(jT,OT,e),li(jT,OT,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(e,t,r,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,vn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||r.get().then(l=>this.messaging=l,()=>{}),this.appCheck||o?.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="us-central1";class JO{constructor(e,t,r,o,l=sg,d=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=d,this.emulatorOrigin=null,this.contextProvider=new ZO(e,t,r,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(l);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=sg}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function eP(n,e,t){const r=Vs(e);n.emulatorOrigin=`http${r?"s":""}://${e}:${t}`,r&&(Rd(n.emulatorOrigin),xd("Functions",!0))}const Db="@firebase/functions",jb="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP="auth-internal",nP="app-check-internal",iP="messaging-internal";function sP(n){const e=(t,{instanceIdentifier:r})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider(tP),d=t.getProvider(iP),m=t.getProvider(nP);return new JO(o,l,d,m,r)};Rr(new Ds(VS,e,"PUBLIC").setMultipleInstances(!0)),li(Db,jb,n),li(Db,jb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n=Cd(),e=sg){const r=$c(Ze(n),VS).getImmediate({identifier:e}),o=yg("functions");return o&&aP(r,...o),r}function aP(n,e,t){eP(Ze(n),e,t)}sP();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS="firebasestorage.googleapis.com",US="storageBucket",oP=120*1e3,lP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends Wi{constructor(e,t,r=0){super(bp(e),`Firebase Storage: ${t} (${bp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var xt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(xt||(xt={}));function bp(n){return"storage/"+n}function vy(){const n="An unknown error occurred, please check the error payload for server response.";return new Ct(xt.UNKNOWN,n)}function cP(n){return new Ct(xt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function uP(n){return new Ct(xt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function hP(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(xt.UNAUTHENTICATED,n)}function dP(){return new Ct(xt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function fP(n){return new Ct(xt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function mP(){return new Ct(xt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function pP(){return new Ct(xt.CANCELED,"User canceled the upload/download.")}function gP(n){return new Ct(xt.INVALID_URL,"Invalid URL '"+n+"'.")}function yP(n){return new Ct(xt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function vP(){return new Ct(xt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+US+"' property when initializing the app?")}function _P(){return new Ct(xt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function EP(){return new Ct(xt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function TP(n){return new Ct(xt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rg(n){return new Ct(xt.INVALID_ARGUMENT,n)}function BS(){return new Ct(xt.APP_DELETED,"The Firebase app was deleted.")}function bP(n){return new Ct(xt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nc(n,e){return new Ct(xt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uc(n){throw new Ct(xt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Kn.makeFromUrl(e,t)}catch{return new Kn(e,"")}if(r.path==="")return r;throw yP(e)}static makeFromUrl(e,t){let r=null;const o="([A-Za-z0-9.\\-_]+)";function l(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+o+d,"i"),y={bucket:1,path:3};function p(ie){ie.path_=decodeURIComponent(ie.path)}const _="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",I=new RegExp(`^https?://${b}/${_}/b/${o}/o${w}`,"i"),M={bucket:1,path:3},z=t===LS?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",U=new RegExp(`^https?://${z}/${o}/${j}`,"i"),Q=[{regex:m,indices:y,postModify:l},{regex:I,indices:M,postModify:p},{regex:U,indices:{bucket:1,path:2},postModify:p}];for(let ie=0;ie<Q.length;ie++){const ee=Q[ie],te=ee.regex.exec(e);if(te){const D=te[ee.indices.bucket];let R=te[ee.indices.path];R||(R=""),r=new Kn(D,R),ee.postModify(r);break}}if(r==null)throw gP(e);return r}}class wP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(n,e,t){let r=1,o=null,l=null,d=!1,m=0;function y(){return m===2}let p=!1;function _(...j){p||(p=!0,e.apply(null,j))}function b(j){o=setTimeout(()=>{o=null,n(I,y())},j)}function w(){l&&clearTimeout(l)}function I(j,...U){if(p){w();return}if(j){w(),_.call(null,j,...U);return}if(y()||d){w(),_.call(null,j,...U);return}r<64&&(r*=2);let Q;m===1?(m=2,Q=0):Q=(r+Math.random())*1e3,b(Q)}let M=!1;function z(j){M||(M=!0,w(),!p&&(o!==null?(j||(m=2),clearTimeout(o),b(0)):j||(m=1)))}return b(0),l=setTimeout(()=>{d=!0,z(!0)},t),z}function AP(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(n){return n!==void 0}function xP(n){return typeof n=="object"&&!Array.isArray(n)}function _y(n){return typeof n=="string"||n instanceof String}function Ob(n){return Ey()&&n instanceof Blob}function Ey(){return typeof Blob<"u"}function Pb(n,e,t,r){if(r<e)throw rg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function zS(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const o=e(r)+"="+e(n[r]);t=t+o+"&"}return t=t.slice(0,-1),t}var wa;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(wa||(wa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CP(n,e){const t=n>=500&&n<600,o=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||o||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(e,t,r,o,l,d,m,y,p,_,b,w=!0,I=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=o,this.successCodes_=l,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=b,this.retry=w,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((M,z)=>{this.resolve_=M,this.reject_=z,this.start_()})}start_(){const e=(r,o)=>{if(o){r(!1,new Lh(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const d=m=>{const y=m.loaded,p=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,p)};this.progressCallback_!==null&&l.addUploadProgressListener(d),l.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(d),this.pendingConnection_=null;const m=l.getErrorCode()===wa.NO_ERROR,y=l.getStatus();if(!m||CP(y,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===wa.ABORT;r(!1,new Lh(!1,null,_));return}const p=this.successCodes_.indexOf(y)!==-1;r(!0,new Lh(p,l))})},t=(r,o)=>{const l=this.resolve_,d=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());RP(y)?l(y):l()}catch(y){d(y)}else if(m!==null){const y=vy();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(o.canceled){const y=this.appDelete_?BS():pP();d(y)}else{const y=mP();d(y)}};this.canceled_?t(!1,new Lh(!1,null,!0)):this.backoffId_=SP(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Lh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function IP(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function DP(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function jP(n,e){e&&(n["X-Firebase-GMPID"]=e)}function OP(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function PP(n,e,t,r,o,l,d=!0,m=!1){const y=zS(n.urlParams),p=n.url+y,_=Object.assign({},n.headers);return jP(_,e),IP(_,t),DP(_,l),OP(_,r),new NP(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,o,d,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kP(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MP(...n){const e=kP();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Ey())return new Blob(n);throw new Ct(xt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function VP(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(n){if(typeof atob>"u")throw TP("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wp{constructor(e,t){this.data=e,this.contentType=t||null}}function UP(n,e){switch(n){case Fi.RAW:return new wp(qS(e));case Fi.BASE64:case Fi.BASE64URL:return new wp(FS(n,e));case Fi.DATA_URL:return new wp(zP(e),qP(e))}throw vy()}function qS(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,d=n.charCodeAt(++t);r=65536|(l&1023)<<10|d&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function BP(n){let e;try{e=decodeURIComponent(n)}catch{throw Nc(Fi.DATA_URL,"Malformed data URL.")}return qS(e)}function FS(n,e){switch(n){case Fi.BASE64:{const o=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(o||l)throw Nc(n,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Fi.BASE64URL:{const o=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(o||l)throw Nc(n,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=LP(e)}catch(o){throw o.message.includes("polyfill")?o:Nc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let o=0;o<t.length;o++)r[o]=t.charCodeAt(o);return r}class HS{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Nc(Fi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=FP(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function zP(n){const e=new HS(n);return e.base64?FS(Fi.BASE64,e.rest):BP(e.rest)}function qP(n){return new HS(n).contentType}function FP(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,t){let r=0,o="";Ob(e)?(this.data_=e,r=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ob(this.data_)){const r=this.data_,o=VP(r,e,t);return o===null?null:new Er(o)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Er(r,!0)}}static getBlob(...e){if(Ey()){const t=e.map(r=>r instanceof Er?r.data_:r);return new Er(MP.apply(null,t))}else{const t=e.map(d=>_y(d)?UP(Fi.RAW,d).data:d.data_);let r=0;t.forEach(d=>{r+=d.byteLength});const o=new Uint8Array(r);let l=0;return t.forEach(d=>{for(let m=0;m<d.length;m++)o[l++]=d[m]}),new Er(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(n){let e;try{e=JSON.parse(n)}catch{return null}return xP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function GP(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function $S(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $P(n,e){return e}class Sn{constructor(e,t,r,o){this.server=e,this.local=t||e,this.writable=!!r,this.xform=o||$P}}let Uh=null;function YP(n){return!_y(n)||n.length<2?n:$S(n)}function YS(){if(Uh)return Uh;const n=[];n.push(new Sn("bucket")),n.push(new Sn("generation")),n.push(new Sn("metageneration")),n.push(new Sn("name","fullPath",!0));function e(l,d){return YP(d)}const t=new Sn("name");t.xform=e,n.push(t);function r(l,d){return d!==void 0?Number(d):d}const o=new Sn("size");return o.xform=r,n.push(o),n.push(new Sn("timeCreated")),n.push(new Sn("updated")),n.push(new Sn("md5Hash",null,!0)),n.push(new Sn("cacheControl",null,!0)),n.push(new Sn("contentDisposition",null,!0)),n.push(new Sn("contentEncoding",null,!0)),n.push(new Sn("contentLanguage",null,!0)),n.push(new Sn("contentType",null,!0)),n.push(new Sn("metadata","customMetadata",!0)),Uh=n,Uh}function KP(n,e){function t(){const r=n.bucket,o=n.fullPath,l=new Kn(r,o);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function QP(n,e,t){const r={};r.type="file";const o=t.length;for(let l=0;l<o;l++){const d=t[l];r[d.local]=d.xform(r,e[d.server])}return KP(r,n),r}function KS(n,e,t){const r=GS(e);return r===null?null:QP(n,r,t)}function XP(n,e,t,r){const o=GS(e);if(o===null||!_y(o.downloadTokens))return null;const l=o.downloadTokens;if(l.length===0)return null;const d=encodeURIComponent;return l.split(",").map(p=>{const _=n.bucket,b=n.fullPath,w="/b/"+d(_)+"/o/"+d(b),I=Ty(w,t,r),M=zS({alt:"media",token:p});return I+M})[0]}function WP(n,e){const t={},r=e.length;for(let o=0;o<r;o++){const l=e[o];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class QS{constructor(e,t,r,o){this.url=e,this.method=t,this.handler=r,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n){if(!n)throw vy()}function ZP(n,e){function t(r,o){const l=KS(n,o,e);return XS(l!==null),l}return t}function JP(n,e){function t(r,o){const l=KS(n,o,e);return XS(l!==null),XP(l,o,n.host,n._protocol)}return t}function WS(n){function e(t,r){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=dP():o=hP():t.getStatus()===402?o=uP(n.bucket):t.getStatus()===403?o=fP(n.path):o=r,o.status=t.getStatus(),o.serverResponse=r.serverResponse,o}return e}function ek(n){const e=WS(n);function t(r,o){let l=e(r,o);return r.getStatus()===404&&(l=cP(n.path)),l.serverResponse=o.serverResponse,l}return t}function tk(n,e,t){const r=e.fullServerUrl(),o=Ty(r,n.host,n._protocol),l="GET",d=n.maxOperationRetryTime,m=new QS(o,l,JP(n,t),d);return m.errorHandler=ek(e),m}function nk(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function ik(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=nk(null,e)),r}function sk(n,e,t,r,o){const l=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let Q="";for(let ie=0;ie<2;ie++)Q=Q+Math.random().toString().slice(2);return Q}const y=m();d["Content-Type"]="multipart/related; boundary="+y;const p=ik(e,r,o),_=WP(p,t),b="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+y+`\r
Content-Type: `+p.contentType+`\r
\r
`,w=`\r
--`+y+"--",I=Er.getBlob(b,r,w);if(I===null)throw _P();const M={name:p.fullPath},z=Ty(l,n.host,n._protocol),j="POST",U=n.maxUploadRetryTime,G=new QS(z,j,ZP(n,t),U);return G.urlParams=M,G.headers=d,G.body=I.uploadData(),G.errorHandler=WS(e),G}class rk{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=wa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=wa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=wa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,o,l){if(this.sent_)throw uc("cannot .send() more than once");if(Vs(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),l!==void 0)for(const d in l)l.hasOwnProperty(d)&&this.xhr_.setRequestHeader(d,l[d].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ak extends rk{initXhr(){this.xhr_.responseType="text"}}function ZS(){return new ak}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(e,t){this._service=e,t instanceof Kn?this._location=t:this._location=Kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ia(e,t)}get root(){const e=new Kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $S(this._location.path)}get storage(){return this._service}get parent(){const e=HP(this._location.path);if(e===null)return null;const t=new Kn(this._location.bucket,e);return new Ia(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw bP(e)}}function ok(n,e,t){n._throwIfRoot("uploadBytes");const r=sk(n.storage,n._location,YS(),new Er(e,!0),t);return n.storage.makeRequestWithTokens(r,ZS).then(o=>({metadata:o,ref:n}))}function lk(n){n._throwIfRoot("getDownloadURL");const e=tk(n.storage,n._location,YS());return n.storage.makeRequestWithTokens(e,ZS).then(t=>{if(t===null)throw EP();return t})}function ck(n,e){const t=GP(n._location.path,e),r=new Kn(n._location.bucket,t);return new Ia(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(n){return/^[A-Za-z]+:\/\//.test(n)}function hk(n,e){return new Ia(n,e)}function JS(n,e){if(n instanceof by){const t=n;if(t._bucket==null)throw vP();const r=new Ia(t,t._bucket);return e!=null?JS(r,e):r}else return e!==void 0?ck(n,e):n}function dk(n,e){if(e&&uk(e)){if(n instanceof by)return hk(n,e);throw rg("To use ref(service, url), the first argument must be a Storage instance.")}else return JS(n,e)}function kb(n,e){const t=e?.[US];return t==null?null:Kn.makeFromBucketSpec(t,n)}function fk(n,e,t,r={}){n.host=`${e}:${t}`;const o=Vs(e);o&&(Rd(`https://${n.host}/b`),xd("Storage",!0)),n._isUsingEmulator=!0,n._protocol=o?"https":"http";const{mockUserToken:l}=r;l&&(n._overrideAuthToken=typeof l=="string"?l:gw(l,n.app.options.projectId))}class by{constructor(e,t,r,o,l,d=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=o,this._firebaseVersion=l,this._isUsingEmulator=d,this._bucket=null,this._host=LS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=oP,this._maxUploadRetryTime=lP,this._requests=new Set,o!=null?this._bucket=Kn.makeFromBucketSpec(o,this._host):this._bucket=kb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Kn.makeFromBucketSpec(this._url,e):this._bucket=kb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(vn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ia(this,e)}_makeRequest(e,t,r,o,l=!0){if(this._deleted)return new wP(BS());{const d=PP(e,this._appId,r,o,t,this._firebaseVersion,l,this._isUsingEmulator);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,t){const[r,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,o).getPromise()}}const Mb="@firebase/storage",Vb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="storage";function mk(n,e,t){return n=Ze(n),ok(n,e,t)}function pk(n){return n=Ze(n),lk(n)}function gk(n,e){return n=Ze(n),dk(n,e)}function yk(n=Cd(),e){n=Ze(n);const r=$c(n,eA).getImmediate({identifier:e}),o=yg("storage");return o&&vk(r,...o),r}function vk(n,e,t,r={}){fk(n,e,t,r)}function _k(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),o=n.getProvider("app-check-internal");return new by(t,r,o,e,Da)}function Ek(){Rr(new Ds(eA,_k,"PUBLIC").setMultipleInstances(!0)),li(Mb,Vb,""),li(Mb,Vb,"esm2020")}Ek();var Tk="AIzaSyBTl0Jl9ZMQBA84LBbECwzUz5jcL4dYV3Y",bk="mduwebsite1345.firebaseapp.com",wk="mduwebsite1345",Sk="mduwebsite1345.firebasestorage.app",Ak="653256711691",Rk="1:653256711691:web:5aca0f2e84ed19df90710e";const xk={apiKey:Tk,authDomain:bk,projectId:wk,storageBucket:Sk,messagingSenderId:Ak,appId:Rk},Zd=rT().length?rT()[0]:_w(xk),$t=LD(Zd),Se=UO(Zd);rP(Zd);const Ck=yk(Zd),Nk=/^\+[1-9]\d{7,14}$/,Ik=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(""),[o,l]=q.useState(""),[d,m]=q.useState(""),[y,p]=q.useState(null),[_,b]=q.useState(""),[w,I]=q.useState(!1),M=Yo(),z=()=>M("/members");q.useEffect(()=>{const te=Id($t,D=>{D&&z()});return()=>te()},[]);const j=async te=>{if(te.preventDefault(),!w){b(""),I(!0);try{await fI($t,n.trim(),t),z()}catch(D){console.error("[Email login] ",D),b(D?.message??"Login failed")}finally{I(!1)}}},U=async()=>{if(!w){b(""),I(!0);try{const te=new qi;await a0($t,te),z()}catch(te){console.error("[Google login] ",te),b(te?.message??"Google sign-in failed")}finally{I(!1)}}},G=()=>{if(window.recaptchaVerifier)return window.recaptchaVerifier;try{window.recaptchaVerifier=new Bp($t,"recaptcha-container",{size:"invisible"})}catch(te){console.warn("[reCAPTCHA modular ctor failed, trying compat]",te),window.recaptchaVerifier=new Bp("recaptcha-container",{size:"invisible"},$t)}return window.recaptchaVerifier};q.useEffect(()=>()=>{try{window.recaptchaVerifier?.clear?.()}catch{}window.recaptchaVerifier=void 0},[]);const Q=q.useMemo(()=>Nk.test(o.trim()),[o]),ie=async()=>{if(!(w||!Q)){b(""),I(!0);try{const te=G(),D=await i0($t,o.trim(),te);p(D)}catch(te){console.error("[sendPhoneCode] ",te),b(te?.message??"Failed to send code");try{window.recaptchaVerifier?.reset?.()}catch{}}finally{I(!1)}}},ee=async()=>{if(!(!y||w||d.trim().length<6)){b(""),I(!0);try{await y.confirm(d.trim()),z()}catch(te){console.error("[verifyPhoneCode] ",te),b(te?.message??"Invalid verification code")}finally{I(!1)}}};return u.jsx("div",{children:u.jsxs("div",{className:"background",children:[u.jsx("div",{className:"shape"}),u.jsx("div",{className:"shape"}),u.jsxs("form",{onSubmit:j,"aria-busy":w,children:[u.jsx("h3",{children:"Login Here"}),u.jsx("label",{htmlFor:"email",children:"Email"}),u.jsx("input",{id:"email",type:"email",placeholder:"you@ucla.edu",value:n,onChange:te=>e(te.target.value),autoComplete:"email",required:!0,disabled:w}),u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsx("input",{id:"password",type:"password",placeholder:"Password",value:t,onChange:te=>r(te.target.value),autoComplete:"current-password",required:!0,disabled:w}),u.jsx("button",{type:"submit",disabled:w,children:w?"Signing in…":"Log In"}),u.jsx("div",{className:"social",style:{marginTop:20},children:u.jsx("button",{type:"button",className:"go",onClick:U,"aria-label":"Continue with Google",disabled:w,children:"Continue with Google"})}),u.jsxs("fieldset",{style:{marginTop:24,border:"none",padding:0},children:[u.jsx("legend",{style:{fontWeight:600,marginBottom:8},children:"Or sign in with phone"}),y?u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{id:"code",type:"text",placeholder:"123456",value:d,onChange:te=>m(te.target.value),disabled:w}),u.jsx("button",{type:"button",onClick:ee,disabled:w||d.trim().length<6,children:"Verify & Sign in"}),u.jsx("button",{type:"button",onClick:()=>{p(null),m("");try{window.recaptchaVerifier?.reset?.()}catch{}},disabled:w,style:{marginLeft:8},children:"Use a different phone"})]}):u.jsxs(u.Fragment,{children:[u.jsx("label",{htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{id:"phone",type:"tel",placeholder:"+1##########",value:o,onChange:te=>l(te.target.value),disabled:w,"aria-invalid":o.length>0&&!Q}),u.jsx("button",{type:"button",onClick:ie,disabled:w||!Q,children:"Send verification code"})]})]}),_&&u.jsx("p",{style:{color:"salmon",marginTop:16},role:"alert",children:_}),u.jsx("div",{id:"recaptcha-container"}),u.jsxs("p",{style:{marginTop:16},children:["No account? ",u.jsx(In,{to:"/register",children:"Register"})]})]})]})})};function Dk(n,e){return{uid:n,name:e.name??"",email:e.email??"",phoneNumber:e.phoneNumber??"",year:e.year??"",major:e.major??"",instrument:e.instrument??"",instruments:Array.isArray(e.instruments)?e.instruments:[],section:e.section??"",bio:e.bio??"",roles:Array.isArray(e.roles)?e.roles:["performer"],returning:e.returning??"",photoURL:e.photoURL??"",createdAt:e.createdAt,updatedAt:e.updatedAt}}async function jk(n){const e=await au(_t(Se,"users",n));return e.exists()?Dk(n,e.data()):null}async function ag(n,e){const t=_t(Se,"users",n),r={...e,uid:n,...Array.isArray(e.roles)?{roles:e.roles}:{},updatedAt:Yt(),...e&&!e.createdAt?{createdAt:Yt()}:{}};await Ns(t,r,{merge:!0})}const Lb="recaptcha-container-register",Ok=()=>{const[n,e]=q.useState({name:"",email:"",phoneNumber:"",year:"",major:"",instrument:"",instrumentsCsv:"",sectionCsv:"",returning:"",bio:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",password:""}),[t,r]=q.useState(""),[o,l]=q.useState(!1),[d,m]=q.useState(""),[y,p]=q.useState(""),[_,b]=q.useState(null),w=Yo(),I=te=>{const{name:D,value:R}=te.target;e(x=>({...x,[D]:R}))},M=q.useMemo(()=>n.instrumentsCsv.split(",").map(te=>te.trim()).filter(Boolean),[n.instrumentsCsv]),z=q.useMemo(()=>{const te=n.sectionCsv.split(",").map(D=>D.trim()).filter(Boolean);return te.length?te[0]:""},[n.sectionCsv]),j=async(te,D,R)=>{await ag(te,{name:n.name,email:n.email||D||void 0,phoneNumber:n.phoneNumber,year:n.year,major:n.major,instrument:n.instrument,instruments:M.length?M:void 0,section:z||void 0,returning:n.returning,bio:n.bio,emergencyName:n.emergencyName,emergencyPhone:n.emergencyPhone,emergencyRelation:n.emergencyRelation,roles:["performer"],...R||{}})},U=async te=>{te.preventDefault(),r(""),l(!0);try{const D=await dI($t,n.email,n.password);await j(D.user.uid,D.user.email),w("/members")}catch(D){r(D?.message||"Failed to create account")}finally{l(!1)}},G=async()=>{r(""),l(!0);try{const te=new qi,D=await a0($t,te);await j(D.user.uid,D.user.email),w("/members")}catch(te){r(te?.message||"Google sign-in failed")}finally{l(!1)}},Q=te=>(window._registerRecaptcha||(window._registerRecaptcha=new Bp(te,Lb,{size:"normal"})),window._registerRecaptcha),ie=async()=>{if(r(""),!d){r("Enter a phone number in E.164 format, e.g. +13105551234");return}l(!0);try{const te=Q($t),D=await i0($t,d,te);b(D)}catch(te){r(te?.message||"Failed to send verification code")}finally{l(!1)}},ee=async()=>{if(r(""),!_||!y){r("Enter the verification code you received");return}l(!0);try{const te=await _.confirm(y);await j(te.user.uid,te.user.email,{phoneNumber:d}),w("/members")}catch(te){r(te?.message||"Verification failed")}finally{l(!1)}};return u.jsxs("section",{className:"register-container",children:[u.jsx("h1",{className:"register-title",children:"Create your account"}),u.jsx("p",{className:"register-subtitle",children:"Use email, Google, or phone. You can edit details later in your portal."}),u.jsxs("form",{onSubmit:U,className:"register-form",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"name",children:"Full Name"}),u.jsx("input",{className:"input",id:"name",name:"name",value:n.name,onChange:I,placeholder:"Jane Doe",required:!0})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),u.jsx("input",{className:"input",id:"email",name:"email",type:"email",value:n.email,onChange:I,placeholder:"you@ucla.edu",autoComplete:"email",required:!0})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phoneNumber",children:"Phone"}),u.jsx("input",{className:"input",id:"phoneNumber",name:"phoneNumber",value:n.phoneNumber,onChange:I,placeholder:"(###) ###-####"})]})]}),u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"year",children:"Year in School"}),u.jsxs("select",{className:"input",id:"year",name:"year",value:n.year,onChange:I,required:!0,children:[u.jsx("option",{value:"",children:"Select Year"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"major",children:"Major"}),u.jsx("input",{className:"input",id:"major",name:"major",value:n.major,onChange:I,placeholder:"Physics, EE, Music, ..."})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrument",children:"Primary Instrument"}),u.jsx("input",{className:"input",id:"instrument",name:"instrument",value:n.instrument,onChange:I,placeholder:"Violin, Trumpet, Vihuela..."})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"instrumentsCsv",children:"Instrument(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"instrumentsCsv",name:"instrumentsCsv",value:n.instrumentsCsv,onChange:I,placeholder:"violin, guitar, trumpet, voice"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"sectionCsv",children:"Section(s) (comma-separated)"}),u.jsx("input",{className:"input",id:"sectionCsv",name:"sectionCsv",value:n.sectionCsv,onChange:I,placeholder:"violas, violins, harp, voces"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"returning",children:"Are you a returning member?"}),u.jsxs("select",{className:"input",id:"returning",name:"returning",value:n.returning,onChange:I,required:!0,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{value:"Yes",children:"Yes"}),u.jsx("option",{value:"No",children:"No"})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"bio",children:"Short Bio"}),u.jsx("textarea",{className:"input",id:"bio",name:"bio",value:n.bio,onChange:I,placeholder:"Tell us a little about your experience",rows:3})]}),u.jsxs("div",{className:"grid-3 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyName",children:"Emergency Contact Name"}),u.jsx("input",{className:"input",id:"emergencyName",name:"emergencyName",value:n.emergencyName,onChange:I})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyPhone",children:"Emergency Contact Phone"}),u.jsx("input",{className:"input",id:"emergencyPhone",name:"emergencyPhone",value:n.emergencyPhone,onChange:I})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"emergencyRelation",children:"Relation"}),u.jsx("input",{className:"input",id:"emergencyRelation",name:"emergencyRelation",value:n.emergencyRelation,onChange:I})]})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),u.jsx("input",{className:"input",type:"password",id:"password",name:"password",value:n.password,onChange:I,required:!0})]}),t&&u.jsx("p",{className:"error",children:t}),u.jsx("button",{type:"submit",className:"submit",disabled:o,children:o?"Creating account…":"Register with Email"})]}),u.jsx("div",{className:"divider",children:u.jsx("span",{children:"or"})}),u.jsx("div",{className:"oauth-row",children:u.jsx("button",{type:"button",className:"btn-google",onClick:G,disabled:o,"aria-label":"Continue with Google",children:"Continue with Google"})}),u.jsxs("div",{className:"phone-card",children:[_?u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"code",children:"Enter verification code"}),u.jsx("input",{className:"input",id:"code",value:y,onChange:te=>p(te.target.value),placeholder:"123456"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:ee,disabled:o||!y,children:"Verify & Create account"})]})]}):u.jsxs("div",{className:"grid-2 gap",children:[u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),u.jsx("input",{className:"input",id:"phone",type:"tel",value:d,onChange:te=>m(te.target.value),placeholder:"+1##########"})]}),u.jsxs("div",{className:"field",children:[u.jsx("label",{className:"label",children:" "}),u.jsx("button",{type:"button",className:"btn-outline",onClick:ie,disabled:o||!d,children:"Send verification code"})]})]}),u.jsx("div",{id:Lb})]})]})},Pk={};function kk(n){const e="recaptcha-v3";if(document.getElementById(e))return;const t=document.createElement("script");t.id=e,t.async=!0,t.defer=!0,t.src=`https://www.google.com/recaptcha/api.js?render=${n}`,document.head.appendChild(t)}function tA(){const[n,e]=q.useState(!1),t=q.useRef(typeof import.meta<"u"?Pk?.VITE_RECAPTCHA_SITE_KEY??null:null);q.useEffect(()=>{if(!t.current){e(!0);return}kk(t.current);const o=()=>e(!0),l=window.setInterval(()=>{window.grecaptcha?.execute&&(window.clearInterval(l),o())},100);return()=>window.clearInterval(l)},[]);const r=q.useCallback(async o=>{if(!t.current)return`dev_${o}_${Date.now()}`;const l=window.grecaptcha;if(!l||!l.execute)throw new Error("reCAPTCHA not ready");return await l.execute(t.current,{action:o})},[]);return{ready:n,execute:r}}async function nA(n){if(!n?.name||!n?.email)throw new Error("Name and email are required");const e={type:"client_request",name:n.name,email:n.email,phone:n.phone??null,org:n.org??null,message:n.message??null,event:n.event??null,recaptchaToken:n.recaptchaToken??null,status:"new",createdAt:Yt(),updatedAt:Yt()},t=await qc(ct(Se,"clients"),e);try{n.event&&(n.event.title||n.event.date)&&await qc(ct(Se,"events"),{title:n.event.title||"Client Inquiry",date:n.event.date??null,start:n.event.start??null,end:n.event.end??null,location:n.event.location??null,status:"inquiry",visibility:"private",source:"client_form",clientRef:t.path,createdAt:Yt(),updatedAt:Yt()})}catch(o){console.warn("[submitClientRequest] event draft create failed:",o)}const r="https://https://script.google.com/u/0/home/projects/1FIwKXVOJn4P5Toveh84N7GisHXMpfKnGDv3Xrr-_j384zPbr8hW05Lvk/edit";try{await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,firestoreId:t.id})})}catch(o){console.warn("[submitClientRequest] webhook failed:",o)}return{id:t.id}}const Mk=()=>{const[n,e]=q.useState({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""}),[t,r]=q.useState("idle"),[o,l]=q.useState(""),{execute:d}=tA(),m=p=>{e(_=>({..._,[p.target.name]:p.target.value}))};async function y(p){if(p.preventDefault(),l(""),n.website&&n.website.trim().length>0){r("success");return}try{r("submitting");const _=await d("client_booking"),b=n.eventDate?new Date(`${n.eventDate}T09:00`).toISOString():void 0;await nA({recaptchaToken:_,name:n.name,email:n.email,phone:n.phone||void 0,org:void 0,message:[n.eventDetails?`Details: ${n.eventDetails}`:"",n.extraDetails?`Extra: ${n.extraDetails}`:""].filter(Boolean).join(`
`),event:{title:"Client Inquiry",date:n.eventDate||void 0,start:b,end:void 0,location:n.eventLocation||void 0}}),r("success"),e({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""})}catch(_){r("error"),l(_?.message||"Failed to submit. Please try again later.")}}return u.jsxs("section",{className:"form-page bookus",children:[u.jsx("h1",{children:"Book Us"}),u.jsx("p",{children:"Please fill out this form to request a performance booking."}),u.jsxs("form",{onSubmit:y,className:"bookus-form",children:[u.jsx("input",{name:"website",value:n.website,onChange:m,className:"hp",tabIndex:-1,"aria-hidden":!0}),u.jsx("input",{name:"name",placeholder:"Your Name",value:n.name,onChange:m,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",value:n.email,onChange:m,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",value:n.phone,onChange:m,required:!0}),u.jsx("input",{name:"eventDate",type:"date",value:n.eventDate,onChange:m,required:!0}),u.jsx("input",{name:"eventLocation",placeholder:"Event Location",value:n.eventLocation,onChange:m,required:!0}),u.jsx("textarea",{name:"eventDetails",placeholder:"Tell us about your event...",value:n.eventDetails,onChange:m,required:!0}),u.jsx("textarea",{name:"extraDetails",placeholder:"Anything else?",value:n.extraDetails,onChange:m}),u.jsx("button",{type:"submit",disabled:t==="submitting",children:t==="submitting"?"Submitting…":"Submit Request"}),t==="success"&&u.jsx("p",{className:"ok",children:"Thank you for your inquiry! We will get back to you soon."}),t==="error"&&u.jsx("p",{className:"err",children:o})]})]})},Vk=()=>{const[n,e]=q.useState({name:"",email:"",phone:"",instrument:"",experience:""}),t=o=>{e({...n,[o.target.name]:o.target.value})},r=o=>{o.preventDefault(),console.log("Join request submitted:",n),alert("Thank you for your interest! We will contact you soon.")};return u.jsxs("section",{className:"form-page",children:[u.jsx("h1",{children:"Join Mariachi de Uclatlán"}),u.jsx("p",{children:"Interested in joining our group? Fill out the form below."}),u.jsxs("form",{onSubmit:r,children:[u.jsx("input",{name:"name",placeholder:"Your Name",onChange:t,required:!0}),u.jsx("input",{name:"email",type:"email",placeholder:"Your Email",onChange:t,required:!0}),u.jsx("input",{name:"phone",placeholder:"Phone Number",onChange:t,required:!0}),u.jsx("input",{name:"instrument",placeholder:"Instrument",onChange:t,required:!0}),u.jsx("textarea",{name:"experience",placeholder:"Tell us about your experience...",onChange:t,required:!0}),u.jsx("button",{type:"submit",children:"Submit Application"})]})]})};async function Lk(n){if(!n?.name||!n?.email)throw new Error("Missing name or email in inquiry");const e={...n,status:"new",source:"public_form",createdAt:Yt(),updatedAt:Yt()};return(await qc(ct(Se,"inquiries"),e)).id}function Uk(){const[n,e]=q.useState({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""}),[t,r]=q.useState(""),[o,l]=q.useState(""),{execute:d}=tA();async function m(y){y.preventDefault(),r(""),l("");try{const p=await d("client_booking"),_=n.date&&n.startTime?new Date(`${n.date}T${n.startTime}`).toISOString():void 0,b=n.date&&n.endTime?new Date(`${n.date}T${n.endTime}`).toISOString():void 0,w={name:n.name,email:n.email,phone:n.phone||void 0,org:n.org||void 0,message:n.details||void 0,event:{title:n.title||"Client Inquiry",date:n.date||void 0,start:_,end:b,location:n.location||void 0},meta:{userAgent:typeof navigator<"u"?navigator.userAgent:void 0,tz:Intl.DateTimeFormat().resolvedOptions().timeZone}};await Promise.all([nA({recaptchaToken:p,...w}),Lk(w)]),r("Thanks! Your request was received. We'll reach out soon."),e({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""})}catch(p){console.error("[HireUs submit] ",p),l(p?.message||"Failed to send")}}return u.jsxs("div",{className:"hireus",children:[u.jsx("h2",{children:"Hire Us"}),u.jsxs("form",{onSubmit:m,className:"event-form",children:[u.jsx("h3",{children:"Contact"}),u.jsx("input",{placeholder:"Your name",value:n.name,onChange:y=>e(p=>({...p,name:y.target.value})),required:!0}),u.jsx("input",{type:"email",placeholder:"Email",value:n.email,onChange:y=>e(p=>({...p,email:y.target.value})),required:!0}),u.jsx("input",{placeholder:"Phone",value:n.phone,onChange:y=>e(p=>({...p,phone:y.target.value}))}),u.jsx("input",{placeholder:"Organization (optional)",value:n.org,onChange:y=>e(p=>({...p,org:y.target.value}))}),u.jsx("h3",{children:"Event"}),u.jsx("input",{placeholder:"Event title",value:n.title,onChange:y=>e(p=>({...p,title:y.target.value})),required:!0}),u.jsx("input",{type:"date",value:n.date,onChange:y=>e(p=>({...p,date:y.target.value}))}),u.jsxs("div",{className:"time-row",children:[u.jsx("input",{type:"time",value:n.startTime,onChange:y=>e(p=>({...p,startTime:y.target.value}))}),u.jsx("input",{type:"time",value:n.endTime,onChange:y=>e(p=>({...p,endTime:y.target.value}))})]}),u.jsx("input",{placeholder:"Location",value:n.location,onChange:y=>e(p=>({...p,location:y.target.value}))}),u.jsx("textarea",{placeholder:"Details / repertoire / special notes",value:n.details,onChange:y=>e(p=>({...p,details:y.target.value}))}),u.jsx("button",{type:"submit",children:"Submit request"}),t&&u.jsx("p",{className:"ok",children:t}),o&&u.jsx("p",{className:"err",children:o})]})]})}const Bk=`data:image/svg+xml;utf8,
  <svg xmlns='http://www.w3.org/2000/svg' width='600' height='360' viewBox='0 0 600 360'>
    <defs>
      <linearGradient id='g' x1='0' x2='1' y1='0' y2='1'>
        <stop offset='0%' stop-color='%232774AE'/>
        <stop offset='100%' stop-color='%23FFD100'/>
      </linearGradient>
    </defs>
    <rect width='600' height='360' fill='url(%23g)'/>
    <text x='50%' y='45%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='40' fill='white'>
      Mariachi Mood 😎🎺
    </text>
    <text x='50%' y='70%' text-anchor='middle' font-family='Arial, Helvetica, sans-serif' font-size='20' fill='white'>
      Add your own funny pic below!
    </text>
  </svg>`,zk=()=>{const[n,e]=ae.useState(()=>{try{return localStorage.getItem("members:funnyPicture")}catch{return null}});return{src:n??Bk,update:r=>{e(r);try{r?localStorage.setItem("members:funnyPicture",r):localStorage.removeItem("members:funnyPicture")}catch{}}}},qk=()=>{zk();const[n,e]=ae.useState(""),[t,r]=ae.useState(!1);return u.jsxs("section",{className:"members-dashboard ucla-content",children:[u.jsxs("header",{className:"welcome",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Welcome back! 🎶"}),u.jsx("p",{className:"ucla-paragraph",children:"Your space for events, resources, and all things Mariachi de Uclatlán."})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("article",{className:"card announcement",children:[u.jsx("h2",{children:"Hi — welcome back to Week 2!"}),u.jsxs("p",{children:["This week in Uclatlán, we kick things off with ",u.jsx("strong",{children:"rehearsal on Monday, Oct 6 at 7:00 PM"}),"."]}),u.jsxs("p",{children:["We typically have a ",u.jsx("strong",{children:"mariachi dinner at 6:00 PM"})," — ",u.jsx("em",{children:"location TBA"}),". Keep an eye on the Events page for updates."]})]}),u.jsx("article",{className:"card funny-picture",children:u.jsxs("figure",{className:"funny-figure",children:[u.jsx("img",{src:"https://images.unsplash.com/photo-1543852786-1cf6624b9987?q=80&w=1600&auto=format&fit=crop",alt:"Mariachi vibes: a playful moment",className:"funny-image"}),u.jsx("figcaption",{className:"caption",children:"Mood check ✅ — add your own jokes below in the chat 😄"})]})})]}),u.jsxs("article",{className:"card news",children:[u.jsx("h2",{children:"What’s new"}),u.jsxs("ul",{className:"bullets",children:[u.jsxs("li",{children:["🎺 New: Export your event calendar from ",u.jsx(In,{to:"/members/settings",children:"Settings → Download .ics"}),"."]}),u.jsx("li",{children:"📅 Remember to update your availability for upcoming gigs."}),u.jsx("li",{children:"🧑‍🎓 Welcome new members—check Resources for onboarding!"})]})]})]})},Fk=(n,e)=>({uid:n,name:"",email:e||"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["performer"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""}),Ed=n=>{if(!n)return null;if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?null:e}catch{return null}},Hk=(n,e)=>{const t=Ed(n),r=Ed(e);if(!t)return"TBA";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},Gk=()=>{const n=$t.currentUser,e=n?.uid??"",t=n?.email??"",[r,o]=q.useState(!0),[l,d]=q.useState(!1),[m,y]=q.useState(""),[p,_]=q.useState(null),[b,w]=q.useState(!1),[I,M]=q.useState(null),[z,j]=q.useState(null),[U,G]=q.useState([]),[Q,ie]=q.useState(!0);q.useEffect(()=>{let C=!0;return(async()=>{if(!e){o(!1);return}o(!0);try{const O=await jk(e),V=O??Fk(e,n?.email??null);C&&_(V),O||await ag(e,V)}catch(O){console.error("[Profile load]",O),C&&y(O?.message??"Failed to load profile")}finally{C&&o(!1)}})(),()=>{C=!1}},[e,n?.email]),q.useEffect(()=>{let C=!0;return(async()=>{if(!t){ie(!1);return}ie(!0);try{const O=ct(Se,"availability"),V=mt(O,vt("email","==",t),vt("status","==","yes")),N=await cn(V);if(!C)return;const Oe=N.docs.map(Ie=>{const X=Ie.data();return{id:Ie.id,eventId:X.eventId,eventTitle:X.eventTitle||"Untitled Event",eventStart:Ed(X.eventStart),eventEnd:Ed(X.eventEnd),eventLocation:X.eventLocation??null}});Oe.sort((Ie,X)=>(Ie.eventStart?.getTime()??0)-(X.eventStart?.getTime()??0)),C&&G(Oe)}catch(O){console.error("[Accepted events]",O)}finally{C&&ie(!1)}})(),()=>{C=!1}},[t]);const ee=C=>{const{name:O,value:V}=C.target;_(N=>N&&{...N,[O]:V})},te=C=>{const O=C.target.files?.[0]||null;if(M(O),O){const V=URL.createObjectURL(O);_(N=>N&&{...N,photoURL:V})}},D=async()=>{if(!I||!e)return;const C=(I.name.split(".").pop()||"jpg").toLowerCase(),O=gk(Ck,`avatars/${e}/avatar.${C}`);return await mk(O,I),await pk(O)},R=async()=>{if(!(!p||!e)){d(!0),y(""),j(null);try{const C=await D(),O=p._instrumentsCSV,V=O?O.split(",").map(Ie=>Ie.trim()).filter(Boolean):p.instruments||[],N={...p,instruments:V,...C?{photoURL:C}:{}};await ag(e,N);const Oe=p.name||n?.displayName||void 0;await pI($t.currentUser,{displayName:Oe,photoURL:C??p.photoURL??void 0}),w(!1),_({...p,instruments:V,...C?{photoURL:C}:{}}),j({type:"success",text:"Profile saved. Thank you!"})}catch(C){console.error("[Profile save]",C),y(C?.message??"Failed to save profile"),j({type:"error",text:"Something went wrong. Try again or re‑login."})}finally{d(!1)}}};if(r)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"Loading profile…"})})});if(!p)return u.jsx("div",{className:"profile-wrap",children:u.jsx("div",{className:"card",children:u.jsx("p",{children:"No profile."})})});const x=p.roles||[];return u.jsxs("div",{className:"profile-wrap",children:[u.jsxs("div",{className:"card profile-card",children:[z&&u.jsxs("div",{className:`inline-banner ${z.type}`,role:"status","aria-live":"polite",children:[u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:z.type==="success"?"✓":"!"}),u.jsx("span",{children:z.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>j(null),"aria-label":"Dismiss",children:"×"})]}),u.jsxs("div",{className:"profile-head",children:[u.jsxs("div",{className:"avatar",children:[p.photoURL?u.jsx("img",{src:p.photoURL,alt:`${p.name||"Member"} avatar`}):u.jsx("div",{className:"avatar-placeholder",children:(p.name||p.email||"U")[0].toUpperCase()}),b&&u.jsxs("label",{className:"btn btn-light",style:{marginTop:8},children:["Upload photo",u.jsx("input",{type:"file",accept:"image/*",onChange:te,hidden:!0})]})]}),u.jsx("div",{className:"id-block",children:b?u.jsxs(u.Fragment,{children:[u.jsx("label",{className:"lbl",children:"Full Name"}),u.jsx("input",{name:"name",value:p.name||"",onChange:ee,placeholder:"First Last"})]}):u.jsxs(u.Fragment,{children:[u.jsx("h2",{children:p.name||"Add your name"}),u.jsx("p",{className:"muted",children:p.email}),!!x.length&&u.jsx("div",{className:"roles",children:x.map(C=>u.jsx("span",{className:`role-chip role-${C}`,children:C},C))})]})}),u.jsx("div",{className:"actions",children:b?u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"btn",disabled:l,onClick:R,children:l?"Saving…":"Save"}),u.jsx("button",{className:"btn btn-light",disabled:l,onClick:()=>w(!1),children:"Cancel"})]}):u.jsx("button",{className:"btn",onClick:()=>w(!0),children:"Edit"})})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Phone"}),b?u.jsx("input",{name:"phoneNumber",value:p.phoneNumber||"",onChange:ee,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:p.phoneNumber||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Year"}),b?u.jsxs("select",{name:"year",value:p.year||"",onChange:ee,children:[u.jsx("option",{value:"",children:"Select"}),u.jsx("option",{children:"1st Year"}),u.jsx("option",{children:"2nd Year"}),u.jsx("option",{children:"3rd Year"}),u.jsx("option",{children:"4th Year"}),u.jsx("option",{children:"Graduate"}),u.jsx("option",{children:"Alumni"})]}):u.jsx("div",{className:"val",children:p.year||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Major"}),b?u.jsx("input",{name:"major",value:p.major||"",onChange:ee,placeholder:"e.g., Math, EE, Music"}):u.jsx("div",{className:"val",children:p.major||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Instrument"}),b?u.jsx("input",{name:"instrument",value:p.instrument||"",onChange:ee,placeholder:"e.g., Violin, Trumpet, Vihuela"}):u.jsx("div",{className:"val",children:p.instrument||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Section"}),b?u.jsx("input",{name:"section",value:p.section||"",onChange:ee,placeholder:"Strings / Brass / Rhythm / Vocals"}):u.jsx("div",{className:"val",children:p.section||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"All Instruments"}),b?u.jsx("input",{name:"_instrumentsCSV",value:(p.instruments||[]).join(", "),onChange:ee,placeholder:"Violin, Viola, Trumpet"}):u.jsx("div",{className:"val",children:p.instruments&&p.instruments.length?p.instruments.join(", "):"—"})]})]}),u.jsxs("div",{className:"grid",children:[u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Contact"}),b?u.jsx("input",{name:"emergencyName",value:p.emergencyName||"",onChange:ee,placeholder:"Full name"}):u.jsx("div",{className:"val",children:p.emergencyName||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Emergency Phone"}),b?u.jsx("input",{name:"emergencyPhone",value:p.emergencyPhone||"",onChange:ee,placeholder:"+1 (###) ###-####"}):u.jsx("div",{className:"val",children:p.emergencyPhone||"—"})]}),u.jsxs("div",{className:"col",children:[u.jsx("label",{className:"lbl",children:"Relation"}),b?u.jsx("input",{name:"emergencyRelation",value:p.emergencyRelation||"",onChange:ee,placeholder:"Parent / Sibling / Friend"}):u.jsx("div",{className:"val",children:p.emergencyRelation||"—"})]})]}),u.jsxs("div",{className:"bio",children:[u.jsx("label",{className:"lbl",children:"Bio"}),b?u.jsx("textarea",{name:"bio",value:p.bio||"",onChange:ee,rows:4,placeholder:"Short bio (markdown/plaintext)"}):u.jsx("p",{className:"val multi",children:p.bio||"Add a short bio about you, your experience, and favorite pieces to perform."})]}),m&&u.jsx("p",{className:"error",children:m})]}),u.jsx("h2",{className:"section-title",children:"Events I’m Playing (Yes)"}),Q&&u.jsx("p",{className:"muted",children:"Loading your events…"}),u.jsxs("div",{className:"accepted-list",children:[U.map(C=>u.jsxs("article",{className:"accepted-card",children:[u.jsx("header",{className:"accepted-head",children:u.jsx("h3",{className:"accepted-title",children:C.eventTitle})}),u.jsxs("dl",{className:"accepted-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:Hk(C.eventStart,C.eventEnd)})]}),C.eventLocation&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:C.eventLocation})]})]})]},C.id)),!Q&&!U.length&&u.jsx("p",{className:"muted",children:"No accepted events yet. Head to Performer Availability to RSVP."})]})]})},$k=n=>n==="published"?u.jsx("span",{className:"status published",children:"Published"}):n==="draft"?u.jsx("span",{className:"status draft",children:"Draft"}):n==="cancelled"?u.jsx("span",{className:"status cancelled",children:"Cancelled"}):null,iA=({event:n,canManage:e=!1,canRSVP:t=!1,onEdit:r,onDelete:o})=>u.jsxs("article",{className:`event-card ${n.status??""}`,children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h3",{className:"event-title",children:n.title}),$k(n.status)]}),n.subtitle&&u.jsx("p",{className:"event-sub",children:n.subtitle}),u.jsxs("ul",{className:"event-meta",children:[u.jsxs("li",{children:[u.jsx("strong",{children:"When:"})," ",n.dateStr]}),n.location&&u.jsxs("li",{children:[u.jsx("strong",{children:"Where:"})," ",n.location]})]}),n.notes&&u.jsx("p",{className:"event-notes",children:n.notes}),u.jsxs("footer",{className:"event-actions",children:[t&&u.jsxs("div",{className:"left-actions",children:[u.jsx("button",{className:"btn",children:"I can play"}),u.jsx("button",{className:"btn btn-light",children:"Can’t make it"})]}),e&&u.jsxs("div",{className:"right-actions",children:[u.jsx("button",{className:"btn",onClick:()=>r?.(n.id),children:"Edit"}),u.jsx("button",{className:"btn btn-danger",onClick:()=>o?.(n.id),children:"Delete"})]})]})]}),Yk=({event:n,onClose:e})=>{const t=n.dateStr?n.dateStr.split(","):[],r=t[0]?t[0].trim():"",o=t[1]?t[1].trim():"";return u.jsx("div",{className:"modal-overlay",onClick:e,children:u.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[u.jsx("h2",{className:"modal-title",children:n.title}),r&&u.jsxs("p",{children:[u.jsx("strong",{children:"Date:"})," ",r]}),o&&u.jsxs("p",{children:[u.jsx("strong",{children:"Time:"})," ",o]}),n.location&&u.jsxs("p",{children:[u.jsx("strong",{children:"Location:"})," ",n.location]}),n.notes&&u.jsx("p",{className:"modal-desc",children:n.notes}),u.jsx("div",{className:"modal-actions",children:u.jsx("button",{onClick:e,children:"Close"})})]})})};function Ub(n){if(n)return n instanceof Re?n.toDate():n instanceof Date?n:new Date(n)}function Kk(n){return{...n,start:Ub(n.start),end:Ub(n.end)}}function sA(n,e,t){const r=typeof n=="object"&&"start"in n&&!(n instanceof Date),o=Intl.DateTimeFormat().resolvedOptions().timeZone,l={dateStyle:"medium",timeZone:o},d={timeStyle:"short",timeZone:o};if(r){const m=n,y=new Intl.DateTimeFormat(void 0,l).format(m.start),p=new Intl.DateTimeFormat(void 0,d).format(m.start),_=m.end?new Intl.DateTimeFormat(void 0,d).format(m.end):"";return{date:y,time:_?`${p} – ${_}`:p}}else{const m=n,y=new Intl.DateTimeFormat(void 0,l).format(m),p=new Intl.DateTimeFormat(void 0,d).format(m),_="";return _?`${y} • ${p} – ${_}`:`${y} • ${p}`}}const rA="events";function aA(n,e){const t=mt(ct(Se,rA),pn("start","asc"));return ou(t,r=>{const o=r.docs.map(l=>Kk({id:l.id,...l.data()}));n(o)},r=>e?.(r))}async function Qk(n){return qc(ct(Se,"events"),{...n,createdAt:Yt(),updatedAt:Yt()})}async function Xk(n,e){await Or(_t(Se,rA,n),{...e,updatedAt:Date.now()})}function Wk(n){const{date:e,time:t}=sA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const Zk=()=>{const[n,e]=ae.useState([]),[t,r]=ae.useState(null),[o,l]=ae.useState(!0);return ae.useEffect(()=>{const d=aA(m=>{e(m.map(Wk)),l(!1)},m=>{console.error("[Events subscribe]",m),l(!1)});return()=>d()},[]),u.jsxs("section",{className:"ucla-content",style:{maxWidth:980,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Upcoming Events"}),o&&u.jsx("p",{children:"Loading events…"}),!o&&n.length===0&&u.jsx("p",{children:"No events yet."}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16,marginTop:16},children:n.map(d=>u.jsx(iA,{event:d,onClick:()=>r(d)},d.id))}),t&&u.jsx(Yk,{event:t,onClose:()=>r(null)})]})},Jk=()=>u.jsxs("section",{className:"ucla-content",style:{padding:"2rem"},children:[u.jsx("h1",{className:"ucla-heading-xl",style:{color:"#FFD100"},children:"🎼 Sheet Music Library"}),u.jsx("p",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Access PDF sheet music for each instrument section."}),u.jsx("a",{href:"https://ucla.box.com/s/l1aip4gbacfkgy80bf46cya0pj50tv77",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"1rem 2rem",backgroundColor:"#2774AE",color:"#fff",textDecoration:"none",fontWeight:"bold",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"Open Sheet Music Library →"})]}),Bb=n=>{if(!n&&n!==0)return null;if(typeof n=="object"&&n&&typeof n.toDate=="function")return n.toDate();if(n instanceof Date)return n;if(typeof n=="string"||typeof n=="number"){const e=new Date(n);return isNaN(e.getTime())?null:e}return null},hc=n=>n<10?`0${n}`:`${n}`,Sp=n=>`${n.getUTCFullYear()}${hc(n.getUTCMonth()+1)}${hc(n.getUTCDate())}T${hc(n.getUTCHours())}${hc(n.getUTCMinutes())}${hc(n.getUTCSeconds())}Z`,Ap=n=>n.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"").replace(/[,;]/g,e=>`\\${e}`),eM=n=>{const e=["BEGIN:VCALENDAR","VERSION:2.0","PRODID:-//Uclatlán//Mariachi Events//EN","CALSCALE:GREGORIAN","METHOD:PUBLISH","X-WR-CALNAME:Mariachi de Uclatlán — Events"];for(const t of n)e.push("BEGIN:VEVENT",`UID:${t.id}@uclatlanmariachi`,`DTSTAMP:${Sp(new Date)}`,`DTSTART:${Sp(t.start)}`,`DTEND:${Sp(t.end)}`,`SUMMARY:${Ap(t.title)}`,t.location?`LOCATION:${Ap(t.location)}`:"",t.description?`DESCRIPTION:${Ap(t.description)}`:"","END:VEVENT");return e.push("END:VCALENDAR"),e.filter(Boolean).join(`\r
`)},tM=()=>{const n=Yo(),e=async()=>{try{await EI($t),localStorage.removeItem("adminAccess"),n("/login")}catch(Q){console.error("Error during logout:",Q)}},[t,r]=ae.useState(!1),[o,l]=ae.useState(""),d=ae.useCallback(async()=>{r(!0),l("");try{const Q=mt(ct(Se,"events"),vt("status","in",["published","confirmed","active"]),pn("start","asc")),ie=await cn(Q),ee=[];ie.forEach(C=>{const O=C.data(),V=Bb(O.start),N=Bb(O.end);!V||!N||ee.push({id:C.id,title:O.title??"Untitled Event",start:V,end:N,location:O.location??"",description:O.description??""})});const te=eM(ee),D=new Blob([te],{type:"text/calendar;charset=utf-8"}),R=URL.createObjectURL(D),x=document.createElement("a");x.href=R,x.download="uclatlan_events.ics",document.body.appendChild(x),x.click(),x.remove(),URL.revokeObjectURL(R),l(`Exported ${ee.length} event${ee.length===1?"":"s"} to .ics`)}catch(Q){console.error("[Settings] Download ICS failed",Q),l("Failed to export calendar")}finally{r(!1)}},[]),[m,y]=ae.useState(""),[p,_]=ae.useState(""),[b,w]=ae.useState(""),[I,M]=ae.useState(""),[z,j]=ae.useState(!1),U=m.length>0&&p.length>=8&&p===b,G=async Q=>{Q.preventDefault(),M("");const ie=$t.currentUser;if(!ie){M("You must be logged in.");return}if(!U){M("Please fill all fields. Password must be at least 8 characters and match.");return}try{j(!0);const ee=ie.email;if(!ee)throw new Error("This account uses a provider login (e.g., Google). Change your password with your provider.");if(m===p)throw new Error("New password must be different from the current password.");const te=ja.credential(ee,m);await hI(ie,te),await gI(ie,p),y(""),_(""),w(""),M("Password updated successfully.")}catch(ee){M(ee?.message??"Failed to change password")}finally{j(!1)}};return u.jsxs("section",{className:"settings ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Account Settings"}),u.jsx("p",{className:"ucla-paragraph",children:"Manage your session, export your calendar, and update your password."}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Calendar"}),u.jsx("p",{className:"muted",children:"Export all published/confirmed events to an .ics file for Google/Apple/Outlook."}),u.jsx("button",{className:"btn primary",onClick:d,disabled:t,children:t?"Building calendar…":"Download .ics of events"}),o&&u.jsx("p",{className:"status",children:o})]}),u.jsxs("div",{className:"settings-card",children:[u.jsx("h2",{children:"Change Password"}),u.jsxs("form",{className:"form",onSubmit:G,children:[u.jsxs("label",{children:[u.jsx("span",{children:"Current password"}),u.jsx("input",{type:"password",value:m,onChange:Q=>y(Q.target.value),autoComplete:"current-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"New password"}),u.jsx("input",{type:"password",value:p,onChange:Q=>_(Q.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsxs("label",{children:[u.jsx("span",{children:"Confirm new password"}),u.jsx("input",{type:"password",value:b,onChange:Q=>w(Q.target.value),minLength:8,autoComplete:"new-password",required:!0})]}),u.jsx("button",{className:"btn primary",type:"submit",disabled:!U||z,children:z?"Updating…":"Update password"}),I&&u.jsx("p",{className:`status ${/failed|error|requires|different/i.test(I)?"error":""}`,children:I}),u.jsx("p",{className:"muted tiny",children:"Note: If you signed in with Google/SSO, change your password with your provider."})]})]}),u.jsxs("div",{className:"settings-card danger",children:[u.jsx("h2",{children:"Session"}),u.jsx("p",{className:"muted",children:"Sign out of your account on this device."}),u.jsx("button",{className:"btn danger",onClick:e,children:"Log out"})]})]})};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function nM(n,e,t,r){function o(l){return l instanceof t?l:new t(function(d){d(l)})}return new(t||(t=Promise))(function(l,d){function m(_){try{p(r.next(_))}catch(b){d(b)}}function y(_){try{p(r.throw(_))}catch(b){d(b)}}function p(_){_.done?l(_.value):o(_.value).then(m,y)}p((r=r.apply(n,[])).next())})}function iM(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(p){return function(_){return y([p,_])}}function y(p){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=p[0]&2?o.return:p[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,p[1])).done)return l;switch(o=0,l&&(p=[p[0]&2,l.value]),p[0]){case 0:case 1:l=p;break;case 4:return t.label++,{value:p[1],done:!1};case 5:t.label++,o=p[1],p=[0];continue;case 7:p=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(p[0]===6||p[0]===2)){t=0;continue}if(p[0]===3&&(!l||p[1]>l[0]&&p[1]<l[3])){t.label=p[1];break}if(p[0]===6&&t.label<l[1]){t.label=l[1],l=p;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(p);break}l[2]&&t.ops.pop(),t.trys.pop();continue}p=e.call(n,t)}catch(_){p=[6,_],o=0}finally{r=l=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Do=function(){return Do=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},Do.apply(this,arguments)},oA=function(n){return{loading:n==null,value:n}},sM=function(){return function(n,e){switch(e.type){case"error":return Do(Do({},n),{error:e.error,loading:!1,value:void 0});case"reset":return oA(e.defaultValue);case"value":return Do(Do({},n),{error:void 0,loading:!1,value:e.value});default:return n}}},rM=(function(n){var e=n?n():void 0,t=q.useReducer(sM(),oA(e)),r=t[0],o=t[1],l=q.useCallback(function(){var y=n?n():void 0;o({type:"reset",defaultValue:y})},[n]),d=q.useCallback(function(y){o({type:"error",error:y})},[]),m=q.useCallback(function(y){o({type:"value",value:y})},[]);return q.useMemo(function(){return{error:r.error,loading:r.loading,reset:l,setError:d,setValue:m,value:r.value}},[r.error,r.loading,l,d,m,r.value])}),aM=(function(n,e){var t=rM(function(){return n.currentUser}),r=t.error,o=t.loading,l=t.setError,d=t.setValue,m=t.value;return q.useEffect(function(){var y=Id(n,function(p){return nM(void 0,void 0,void 0,function(){var _;return iM(this,function(b){switch(b.label){case 0:return[3,4];case 1:return b.trys.push([1,3,,4]),[4,e.onUserChanged(p)];case 2:return b.sent(),[3,4];case 3:return _=b.sent(),l(_),[3,4];case 4:return d(p),[2]}})})},l);return function(){y()}},[n]),[m,o,r]});const Vo=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},zb=n=>{const e=Vo(n);return e?Re.fromDate(e):null},oM=(n,e)=>{const t=Vo(n),r=Vo(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},lM=()=>{const[n]=aM($t),[e,t]=ae.useState(!0),[r,o]=ae.useState(null),[l,d]=ae.useState([]),[m,y]=ae.useState({}),[p,_]=ae.useState({}),[b,w]=ae.useState({}),[I,M]=ae.useState(null);ae.useEffect(()=>{(async()=>{o(null),t(!0);try{const G=ct(Se,"events"),Q=mt(G,vt("status","==","published")),ee=(await cn(Q)).docs.map(C=>({id:C.id,...C.data()})),te=Date.now(),D=ee.filter(C=>{const O=Vo(C.start)?.getTime();return typeof O=="number"?O>=te-1e3*60*60*24:!0}).sort((C,O)=>{const V=Vo(C.start)?.getTime()??0,N=Vo(O.start)?.getTime()??0;return V-N});d(D);const R={},x={};for(const C of D)R[C.id]="",x[C.id]=!1;if(y(R),w(x),n){const C={...R},O={...x};for(const V of D){const N=_t(Se,"events",V.id,"availability",n.uid),Oe=await au(N),Ie=Oe.exists()?Oe.data():void 0,X=Ie?.status||"",me=!!Ie?.finalized;C[V.id]=X,O[V.id]=me}y(C),w(O)}}catch(G){console.error(G),o(G?.message||"Failed to load events")}finally{t(!1)}})()},[n]);const z=(U,G)=>{const Q=G.target.value;y(ie=>({...ie,[U]:Q}))},j=async U=>{if(!n){M({type:"error",text:"Try again or re‑login."});return}if(b[U]){M({type:"error",text:"This RSVP was finalized by an admin."});return}const G=m[U]||"";if(!G){M({type:"error",text:"Please select an availability first."});return}const Q=l.find(ie=>ie.id===U);_(ie=>({...ie,[U]:!0})),M(null);try{const ie=_t(Se,"events",U,"availability",n.uid),ee={uid:n.uid,displayName:n.displayName||n.email||"Unknown",email:n.email||null,status:G,updatedAt:Yt(),eventId:U,eventTitle:Q?.title||"Untitled Event",eventStart:zb(Q?.start),eventEnd:zb(Q?.end),eventLocation:Q?.location||null,finalized:!1};await Ns(ie,ee,{merge:!0});const te=`${U}_${n.uid}`;await Ns(_t(Se,"availability_responses",te),ee,{merge:!0}),await Ns(_t(Se,"availability",te),ee,{merge:!0}),M({type:"success",text:"Thank you — your response has been submitted."})}catch(ie){console.error(ie),M({type:"error",text:"Something went wrong. Try again or re‑login."})}finally{_(ie=>({...ie,[U]:!1}))}};return n?u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),I&&u.jsxs("div",{className:`inline-banner ${I.type}`,role:"status","aria-live":"polite",children:[I.type==="success"?u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"✓"}):u.jsx("span",{className:"banner-icon","aria-hidden":!0,children:"!"}),u.jsx("span",{children:I.text}),u.jsx("button",{className:"banner-dismiss",onClick:()=>M(null),"aria-label":"Dismiss",children:"×"})]}),e&&u.jsx("p",{className:"muted",children:"Loading events…"}),r&&u.jsx("p",{className:"error-text",children:r}),u.jsxs("div",{className:"availability-list",children:[l.map(U=>u.jsxs("article",{className:"availability-card",children:[u.jsxs("header",{className:"availability-head",children:[u.jsx("h3",{className:"availability-title",children:U.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${U.status}`,children:U.status})]}),u.jsxs("dl",{className:"availability-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:oM(U.start,U.end)||"TBA"})]}),U.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:U.location})]})]}),u.jsxs("div",{className:"availability-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${U.id}`,children:["Availability for ",U.title]}),u.jsxs("select",{id:`sel-${U.id}`,value:m[U.id]||"",onChange:G=>z(U.id,G),disabled:b[U.id]||!!p[U.id],children:[u.jsx("option",{value:"",children:"Select availability…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsx("button",{className:"btn-primary",disabled:b[U.id]||!!p[U.id],onClick:()=>j(U.id),children:p[U.id]?"Saving…":b[U.id]?"Finalized":"Submit"})]}),b[U.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP was finalized by an admin and can’t be changed."})]},U.id)),!e&&!l.length&&u.jsx("p",{className:"muted",children:"No upcoming events yet."})]})]}):u.jsxs("section",{className:"ucla-content availability-shell",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),u.jsx("p",{children:"Please log in to set availability."})]})},cM=["angelrocks0319@gmail.com","angelr19@g.ucla.edu","angelr19@ucla.edu","uclatlan@ucla.edu","uclatlan@g.ucla.edu","enriquerodgon09@g.ucla.edu","andelapena1374@gmail.com"],lA=n=>{if(!n)return!1;const e=n.toLowerCase();return cM.some(t=>t.toLowerCase()===e)};function Td(n,e){if(!n)return new Date;if(n instanceof Re)return n.toDate();if(typeof n=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(n))return new Date(`${n}T12:00:00`);const t=new Date(n);return isNaN(+t)?e??new Date:t}return n instanceof Date?n:e??new Date}function uM(n){const e=n.statuses??["published"],t=[];e.length===1?t.push(vt("status","==",e[0])):e.length>1&&t.push(vt("status","in",e.slice(0,10)));const r=mt(ct(Se,"events"),...t);return ou(r,o=>{const l=o.docs.map(d=>{const m=d.data(),y=Td(m.start??m.date),p=m.end?Td(m.end):null,_=m.title??"Untitled Event";return{id:d.id,type:"event",title:_,start:y,end:p,location:m.location??null,status:m.status,raw:m}});l.sort((d,m)=>+d.start-+m.start),n.onChange(l)})}function hM(n){const e=mt(ct(Se,"calendar_feed"));return ou(e,t=>{const r=t.docs.map(o=>{const l=o.data(),d=Td(l.start??l.date),m=l.end?Td(l.end):null,y=l.title??"Client Inquiry";return{id:o.id,type:"inquiry",title:y,start:d,end:m,location:l.location??null,status:l.status??"new",raw:l}});r.sort((o,l)=>+o.start-+l.start),n(r)})}function dM(n,e){const t=[...n,...e];return t.sort((r,o)=>+r.start-+o.start),t}const fM=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],mM=(n,e)=>n.getFullYear()===e.getFullYear()&&n.getMonth()===e.getMonth()&&n.getDate()===e.getDate(),og=(n,e)=>{const t=new Date(n);return t.setDate(t.getDate()+e),t};function pM(n,e){const t=new Date(n.getFullYear(),n.getMonth(),1),r=(t.getDay()-e+7)%7,o=og(t,-r),l=[];for(let d=0;d<42;d++)l.push(og(o,d));return l}const gM=n=>n.toLocaleString(void 0,{month:"long",year:"numeric"});function yM(n,e){return n.slice(e).concat(n.slice(0,e))}function bd(n){const e=n.getFullYear(),t=(n.getMonth()+1).toString().padStart(2,"0"),r=n.getDate().toString().padStart(2,"0");return`${e}-${t}-${r}`}function vM(n,e){const t=new Map;for(const r of n){const o=new Date(r.start.getFullYear(),r.start.getMonth(),r.start.getDate()),l=r.end&&r.end>r.start?new Date(r.end.getFullYear(),r.end.getMonth(),r.end.getDate()):o;if(!e){const y=bd(o);t.has(y)||t.set(y,[]),t.get(y).push(r);continue}let d=o,m=0;for(;d<=l&&m++<60;){const y=bd(d);t.has(y)||t.set(y,[]),t.get(y).push(r),d=og(d,1)}}return t}function _M(n,e){const t=n.audience;return!t||t==="public"?!0:t==="members"?e==="member"||e==="admin":t==="admins"?e==="admin":!0}const Rp=n=>{const e={yes:0,maybe:0,no:0};if(!n)return e;for(const t of n)t.status==="going"?e.yes++:t.status==="maybe"?e.maybe++:t.status==="declined"&&e.no++;return e},EM=({events:n,month:e,year:t,firstDayOfWeek:r=0,onEventClick:o,onMonthChange:l,renderEvent:d,maxPillsPerDay:m=3,expandMultiDay:y=!0,view:p="month",showViewToggle:_=!0,canViewParticipants:b=!1,fetchParticipants:w,subscribeParticipants:I,viewerRole:M="guest",filterByAudience:z=!0,showAvailabilityBadges:j=!0})=>{const[U,G]=ae.useState(()=>new Date(t??new Date().getFullYear(),e??new Date().getMonth(),1)),[Q,ie]=ae.useState(p),[ee,te]=ae.useState(!1),[D,R]=ae.useState(null),[x,C]=ae.useState(null),[O,V]=ae.useState(!1),[N,Oe]=ae.useState({}),Ie=ae.useRef({});ae.useEffect(()=>{l?.(U.getFullYear(),U.getMonth())},[U.getFullYear(),U.getMonth()]),ae.useEffect(()=>{ie(p)},[p]);const X=ae.useMemo(()=>(z?n.filter(ue=>_M(ue,M)):n).sort((ue,pe)=>+ue.start-+pe.start),[n,M,z]),me=ae.useMemo(()=>pM(U,r),[U,r]),Ee=ae.useMemo(()=>vM(X,y),[X,y]),ce=ae.useMemo(()=>yM(fM,r),[r]),k=ae.useMemo(()=>{const ue=new Map;for(const pe of X){const de=bd(pe.start);ue.has(de)||ue.set(de,[]),ue.get(de).push(pe)}return Array.from(ue.entries()).sort((pe,de)=>pe[0].localeCompare(de[0]))},[X]);ae.useEffect(()=>{if(Object.values(Ie.current).forEach(de=>de()),Ie.current={},!I){(async()=>{const de=new Set,Ke=Q==="month"?Array.from(Ee.values()).flat():X;for(const pt of Ke)de.add(pt.id);const qe={};if(w){for(const pt of de)try{const ft=await w(pt);qe[pt]=Rp(ft)}catch{}Oe(pt=>({...pt,...qe}))}})();return}const ue=de=>{if(Ie.current[de])return;const Ke=I(de,qe=>{Oe(pt=>({...pt,[de]:Rp(qe)}))});Ie.current[de]=Ke},pe=Q==="month"?Array.from(Ee.values()).flat():X;for(const de of pe)ue(de.id);return()=>{Object.values(Ie.current).forEach(de=>de()),Ie.current={}}},[Q,Ee,X,I,w]);const Z=async ue=>{if(o?.(ue),!!b)if(R(ue),te(!0),w){V(!0);try{const pe=await w(ue.id);C(pe),Oe(de=>({...de,[ue.id]:Rp(pe)}))}finally{V(!1)}}else C(null)},he=()=>{te(!1),R(null),C(null)},le=({id:ue})=>{if(!j)return null;const pe=N[ue];return!pe||pe.yes+pe.maybe+pe.no===0?null:u.jsxs("div",{className:"av-badges","aria-label":`Availability: ${pe.yes} yes, ${pe.maybe} maybe, ${pe.no} no`,children:[u.jsxs("span",{className:"av-chip yes",children:["Yes ",pe.yes]}),pe.maybe?u.jsxs("span",{className:"av-chip maybe",children:["Maybe ",pe.maybe]}):null,pe.no?u.jsxs("span",{className:"av-chip no",children:["No ",pe.no]}):null]})};return u.jsxs("div",{className:"cal-wrap",role:"group","aria-label":"Calendar",children:[u.jsxs("div",{className:"cal-header",children:[u.jsxs("div",{className:"left-ctrls",children:[u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>G(new Date(U.getFullYear(),U.getMonth()-1,1)),"aria-label":"Previous month",children:"◀"}),u.jsx("div",{className:"cal-title","aria-live":"polite",children:gM(U)}),u.jsx("button",{type:"button",className:"cal-nav",onClick:()=>G(new Date(U.getFullYear(),U.getMonth()+1,1)),"aria-label":"Next month",children:"▶"})]}),_&&u.jsxs("div",{className:"view-toggle",role:"tablist","aria-label":"Calendar view selector",children:[u.jsx("button",{className:`view-btn ${Q==="month"?"active":""}`,role:"tab","aria-selected":Q==="month",onClick:()=>ie("month"),children:"Month"}),u.jsx("button",{className:`view-btn ${Q==="agenda"?"active":""}`,role:"tab","aria-selected":Q==="agenda",onClick:()=>ie("agenda"),children:"Agenda"})]})]}),Q==="month"?u.jsxs(u.Fragment,{children:[u.jsx("div",{className:"cal-grid cal-weekdays",role:"row",children:ce.map(ue=>u.jsx("div",{className:"cal-weekday",role:"columnheader","aria-label":ue,children:ue},ue))}),u.jsx("div",{className:"cal-grid cal-cells",role:"grid","aria-readonly":!0,children:me.map((ue,pe)=>{const de=bd(ue),Ke=Ee.get(de)||[],qe=mM(ue,new Date),pt=ue.getMonth()===U.getMonth();return u.jsxs("div",{className:`cal-cell ${pt?"":"muted"}`,role:"gridcell","aria-selected":qe,children:[u.jsx("div",{className:`cal-date ${qe?"today":""}`,"aria-label":ue.toDateString(),children:ue.getDate()}),u.jsxs("div",{className:"cal-events",children:[Ke.slice(0,m).map(ft=>u.jsxs("div",{className:"cal-pill-wrap",children:[u.jsx("button",{type:"button",className:`cal-pill${ft.status?` status-${ft.status}`:""}`,title:`${ft.title}${ft.location?" @ "+ft.location:""}`,onClick:()=>Z(ft),children:d?d(ft):ft.title}),u.jsx(le,{id:ft.id})]},ft.id)),Ke.length>m&&u.jsxs("div",{className:"cal-more",children:["+",Ke.length-m," more"]})]})]},pe)})})]}):u.jsxs("div",{className:"agenda-wrap",children:[k.length===0&&u.jsx("p",{className:"muted-text",children:"No items."}),k.map(([ue,pe])=>u.jsxs("div",{className:"agenda-day",children:[u.jsx("h3",{className:"agenda-day-head",children:new Date(ue).toLocaleDateString()}),u.jsx("ul",{className:"agenda-items",children:pe.map(de=>u.jsxs("li",{className:"agenda-item",children:[u.jsxs("span",{className:"agenda-time",children:[de.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),de.end?` – ${de.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""]}),u.jsxs("div",{className:"agenda-pill-wrap",children:[u.jsxs("button",{type:"button",className:`agenda-pill${de.status?` status-${de.status}`:""}`,onClick:()=>Z(de),title:`${de.title}${de.location?" @ "+de.location:""}`,children:[u.jsx("strong",{children:de.title}),de.location?u.jsxs("span",{className:"agenda-loc",children:[" • ",de.location]}):null]}),u.jsx(le,{id:de.id})]})]},de.id))})]},ue))]}),ee&&D&&u.jsx("div",{className:"drawer-backdrop",role:"dialog","aria-modal":"true",onClick:he,children:u.jsxs("div",{className:"drawer",onClick:ue=>ue.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsx("div",{className:"drawer-title",children:D.title}),u.jsxs("div",{className:"drawer-meta",children:[D.start.toLocaleString()," ",D.end?`– ${D.end.toLocaleTimeString()}`:"",D.location?` • ${D.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:he,"aria-label":"Close",children:"✕"})]}),b?u.jsx("div",{className:"drawer-body",children:O?u.jsx("div",{className:"loading",children:"Loading attendees…"}):x&&x.length?u.jsx(TM,{list:x}):u.jsx("div",{className:"muted-text",children:"No attendee data."})}):u.jsx("div",{className:"drawer-body",children:u.jsx("p",{className:"muted-text",children:"Attendee visibility disabled."})})]})})]})},TM=({list:n})=>{const[e,t]=ae.useState("going"),r=ae.useMemo(()=>{const d=n.filter(p=>p.status==="going"),m=n.filter(p=>p.status==="maybe"),y=n.filter(p=>p.status==="declined");return{g:d,m,d:y}},[n]),o=d=>u.jsxs("tr",{children:[u.jsx("td",{children:d.name??d.uid}),u.jsx("td",{className:`status ${d.status??"unknown"}`,children:d.status??"unknown"}),u.jsx("td",{children:d.section??"—"})]},d.uid),l=e==="all"?n:e==="going"?r.g:e==="maybe"?r.m:r.d;return u.jsxs("div",{className:"att-wrap",children:[u.jsxs("div",{className:"att-tabs",role:"tablist",children:[u.jsxs("button",{className:`att-tab ${e==="going"?"active":""}`,onClick:()=>t("going"),role:"tab","aria-selected":e==="going",children:["Going (",r.g.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="maybe"?"active":""}`,onClick:()=>t("maybe"),role:"tab","aria-selected":e==="maybe",children:["Maybe (",r.m.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="declined"?"active":""}`,onClick:()=>t("declined"),role:"tab","aria-selected":e==="declined",children:["Declined (",r.d.length,")"]}),u.jsxs("button",{className:`att-tab ${e==="all"?"active":""}`,onClick:()=>t("all"),role:"tab","aria-selected":e==="all",children:["All (",n.length,")"]})]}),u.jsxs("table",{className:"att-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Section"})]})}),u.jsx("tbody",{children:l.length?l.map(o):u.jsx("tr",{children:u.jsx("td",{colSpan:3,className:"muted-text",style:{textAlign:"center"},children:"No one here."})})})]})]})},cA=["participation","availability","avaiablity","rsvps","rsvp"];function Bh(n){if(!n)return;if(n instanceof Re||typeof n=="object"&&n&&"toDate"in n)return n.toDate();const e=new Date(n);return Number.isNaN(e.getTime())?void 0:e}function bM(n){if(typeof n=="string"){const e=n.toLowerCase();if(["going","yes","attending","available","confirm","confirmed"].includes(e))return"going";if(["maybe","tentative","unsure"].includes(e))return"maybe";if(["declined","no","unavailable","cant","can't","cannot"].includes(e))return"declined"}return typeof n=="boolean"?n?"going":"declined":"unknown"}function uA(n,e){const t=e.uid||n,r=e.name||e.displayName,o=e.section||e.instrument,l=e.status??e.availability??e.response??e.rsvp??e.going,d=bM(l),m=Bh(e.updatedAt)||Bh(e.updated_at)||Bh(e.lastUpdated)||Bh(e._updated)||void 0;return{uid:t,name:r,status:d,section:o,updatedAt:m}}function wM(n,e){if(!n)return e;if(!e)return n;if(n.updatedAt&&e.updatedAt)return n.updatedAt>e.updatedAt?n:e;if(n.updatedAt&&!e.updatedAt)return n;if(!n.updatedAt&&e.updatedAt)return e;const t={going:3,maybe:2,declined:1,unknown:0},r=t[n.status??"unknown"],o=t[e.status??"unknown"];return r!==o&&r>o?n:e}function hA(n){const e=new Map;for(const t of n)for(const r of t)e.set(r.uid,wM(e.get(r.uid),r));return Array.from(e.values())}async function SM(n){const e=[];for(const t of cA)try{const r=await cn(ct(Se,`events/${n}/${t}`));r.empty||e.push(r.docs.map(o=>uA(o.id,o.data())))}catch{}return hA(e)}function AM(n,e){const t=[],r=new Map,o=()=>e(hA(Array.from(r.values())));for(const l of cA)try{const d=ct(Se,`events/${n}/${l}`),m=ou(d,y=>{const p=y.docs.map(_=>uA(_.id,_.data()));r.set(l,p),o()},()=>{r.delete(l),o()});t.push(m)}catch{}return()=>{for(const l of t)try{l()}catch{}}}const RM=n=>SM(n),xM=(n,e)=>AM(n,e),CM=()=>{const[n,e]=ae.useState(!1),[t,r]=ae.useState([]),[o,l]=ae.useState([]),[d,m]=ae.useState([]);ae.useEffect(()=>{const p=Id($t,_=>{e(lA(_?.email??void 0))});return()=>p()},[]),ae.useEffect(()=>{const p=uM({statuses:["published"],onChange:r}),_=hM(l);return()=>{p(),_()}},[]),ae.useEffect(()=>{m(dM(t,o))},[t,o]);const y=ae.useMemo(()=>d,[d]);return u.jsxs("section",{className:"calendar-page",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Calendar"}),u.jsxs("p",{className:"ucla-paragraph",children:["Published events",n?" + client inquiries":"","."]}),y.length===0?u.jsx("p",{children:"No upcoming items yet."}):u.jsx(EM,{events:y,view:"agenda",showViewToggle:!0,canViewParticipants:!0,fetchParticipants:RM,subscribeParticipants:xM,viewerRole:n?"admin":"member",filterByAudience:!0,showAvailabilityBadges:!0})]})},qb=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},Fb=()=>{const[n,e]=ae.useState(!0),[t,r]=ae.useState(null),[o,l]=ae.useState(0),[d,m]=ae.useState(0),[y,p]=ae.useState(0);ae.useEffect(()=>{(async()=>{e(!0),r(null);try{const w=Date.now(),I=new Date(w-1440*60*1e3),M=ct(Se,"events"),z=mt(M,vt("status","==","published")),U=(await cn(z)).docs.filter(x=>{const C=x.data(),O=qb(C.start)?.getTime();return typeof O=="number"?O>=w-7200*1e3:!1}).length;l(U);const G=ct(Se,"inquiries"),ie=(await cn(G)).docs.filter(x=>{const C=x.data();return typeof C.pushed=="boolean"?C.pushed===!1:C.status!=="closed"}).length;m(ie);const ee=ct(Se,"availability_responses"),te=mt(ee,vt("status","==","yes")),R=(await cn(te)).docs.filter(x=>{const C=x.data(),O=qb(C.eventStart);return O?O>=I:!1}).length;p(R)}catch(w){console.error("[AdminDashboard] Failed to load stats",w),r(w?.message||"Failed to load stats")}finally{e(!1)}})()},[]);const _=[{to:"events",title:"Events",desc:"Create, publish, and manage upcoming events.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M7 2v2M17 2v2M3 8h18M5 6h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2zm3 5h4m-4 4h8",stroke:"currentColor",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"})})},{to:"managemembers",title:"Manage Members",desc:"Search members and assign roles.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M12 12a4 4 0 1 0-0.001-8.001A4 4 0 0 0 12 12zm0 2c-4.418 0-8 2.239-8 5v1h16v-1c0-2.761-3.582-5-8-5z",fill:"currentColor"})})},{to:"reports",title:"Reports",desc:"Export availability & payouts (CSV/PDF).",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M7 3h10a2 2 0 0 1 2 2v10l-4 4H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2zm8 0v4h4",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 13h8M8 9h6M8 17h4",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"inquiries",title:"Requests",desc:"Accept/decline Hire Us inquiries → events.",icon:u.jsxs("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:[u.jsx("path",{d:"M21 7v10a2 2 0 0 1-2 2H9l-6 3V7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),u.jsx("path",{d:"M8 10h8M8 14h5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})]})},{to:"participation",title:"Participation",desc:"Attendance & financial summaries.",icon:u.jsx("svg",{viewBox:"0 0 24 24",className:"icon","aria-hidden":!0,children:u.jsx("path",{d:"M4 19V5m16 14V5M9 19V9m6 10V12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round"})})}];return u.jsxs("div",{className:"admin-page",children:[u.jsx("header",{className:"admin-header",children:u.jsxs("div",{children:[u.jsx("h1",{className:"admin-title",children:"Admin Dashboard"}),u.jsx("p",{className:"admin-sub",children:"Manage members, assign roles, and oversee events."})]})}),u.jsx("section",{className:"admin-stats","aria-label":"Quick Stats",children:n?u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:"…"}),u.jsx("div",{className:"stat-label",children:"Loading…"})]}):t?u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:"!"}),u.jsx("div",{className:"stat-label",children:t})]}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:o}),u.jsx("div",{className:"stat-label",children:"Upcoming Events"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:d}),u.jsx("div",{className:"stat-label",children:"Pending Requests"})]}),u.jsxs("div",{className:"stat-card",children:[u.jsx("div",{className:"stat-value",children:y}),u.jsx("div",{className:"stat-label",children:"Performers Confirmed"})]})]})}),u.jsx("section",{className:"admin-grid","aria-label":"Admin Navigation",children:_.map(b=>u.jsxs(ht,{className:({isActive:w})=>`admin-card ${w?"active":""}`,to:b.to,children:[b.icon,u.jsxs("div",{className:"card-body",children:[u.jsx("h3",{children:b.title}),u.jsx("p",{children:b.desc})]}),u.jsx("span",{className:"chev","aria-hidden":!0,children:"›"})]},b.to))})]})},dA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:"Performer Portal"}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/dashboard",className:n,children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:n,children:"Public Site"})})]})]})},Hb=()=>u.jsxs(u.Fragment,{children:[u.jsx(dA,{}),u.jsxs("div",{style:{padding:"2rem"},children:[u.jsx("h1",{children:"Performer Dashboard"}),u.jsx("p",{children:"Welcome to the Performer Dashboard. Here you can see your events, resources, and manage your profile."})]})]}),fA=()=>u.jsxs("nav",{className:"navbar",children:[u.jsx("div",{className:"nav-brand",children:"Mariachi de Uclatlán"}),u.jsxs("ul",{className:"nav-links",children:[u.jsx("li",{children:u.jsx(In,{to:"/",children:"Home"})}),u.jsx("li",{children:u.jsx(In,{to:"/about",children:"About"})}),u.jsx("li",{children:u.jsx(In,{to:"/members",children:"Members"})}),u.jsx("li",{children:u.jsx(In,{to:"/contact",children:"Contact"})}),u.jsx("li",{children:u.jsx(In,{to:"/Login",children:"Login"})}),u.jsx("li",{children:u.jsx(In,{to:"/Register",children:"Register"})})]})]}),NM=()=>u.jsxs("footer",{className:"footer compact-footer",children:[u.jsxs("p",{children:["© ",new Date().getFullYear()," Mariachi de Uclatlán."]}),u.jsxs("p",{children:["Developed by Angel Ramirez | ",u.jsx("a",{href:"/contact",children:"Contact"})]})]}),mA=()=>{const n=({isActive:e})=>e?"active":void 0;return u.jsxs("nav",{className:"member-navbar",children:[u.jsx("div",{className:"member-brand",children:u.jsx(ht,{to:"/members",className:n,children:"Members Portal"})}),u.jsxs("ul",{className:"member-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/members/profile",className:n,children:"Profile"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/events",className:n,children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/calendar",className:n,children:"Calendar"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:n,children:"Availability"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/resources",className:n,children:"Resources"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/settings",className:n,children:"Settings"})}),u.jsx("li",{className:"divider"}),u.jsx("li",{children:u.jsx(ht,{to:"/admin-password",className:n,children:"Admin"})}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:n,children:"Public Site"})})]})]})},wy=()=>u.jsxs("nav",{className:"admin-navbar",role:"navigation","aria-label":"Admin Navigation Bar",children:[u.jsx("div",{className:"admin-brand",children:"Admin Portal"}),u.jsx("button",{className:"admin-menu-toggle","aria-label":"Toggle menu",onClick:()=>{document.querySelector(".admin-links")?.classList.toggle("open")},children:"☰"}),u.jsxs("ul",{className:"admin-links",children:[u.jsx("li",{children:u.jsx(ht,{to:"/admin",end:!0,className:({isActive:n})=>n?"active":"",children:"Dashboard"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/inquiries",className:({isActive:n})=>n?"active":"",children:"Requests"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/events",className:({isActive:n})=>n?"active":"",children:"Events"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/managemembers",className:({isActive:n})=>n?"active":"",children:"Manage Members"})}),u.jsx("li",{children:u.jsx(ht,{to:"/admin/reports",className:({isActive:n})=>n?"active":"",children:"Reports"})}),u.jsx("li",{children:u.jsx(ht,{to:"/members/performer-availability",className:({isActive:n})=>n?"active":"",children:"Availability"})}),u.jsx("li",{className:"divider","aria-hidden":!0,children:"│"}),u.jsx("li",{children:u.jsx(ht,{to:"/",className:({isActive:n})=>n?"active":"",children:"Public Site"})})]})]}),IM=({user:n,isAdmin:e,claims:t})=>{const[r,o]=ae.useState(!1),l=()=>{console.log("AdminDebug -> user:",n),console.log("AdminDebug -> isAdmin:",e),console.log("AdminDebug -> claims:",t),o(d=>!d)};return u.jsxs("div",{className:"admin-debug",children:[u.jsx("button",{className:"admin-debug-btn",onClick:l,children:r?"Hide Debug":"Show Debug"}),r&&u.jsxs("div",{className:"admin-debug-info",children:[u.jsxs("p",{children:[u.jsx("strong",{children:"User email:"})," ",n?.email||"None"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"isAdmin:"})," ",e?"true":"false"]}),u.jsxs("p",{children:[u.jsx("strong",{children:"Claims:"})," ",JSON.stringify(t)||"{}"]})]})]})},xp=({user:n,children:e,isAdminUser:t,requiresAdmin:r})=>{const o=Xi();return n?r&&!t?u.jsx(Ip,{to:"/",replace:!0}):u.jsx(u.Fragment,{children:e}):u.jsx(Ip,{to:"/login",replace:!0,state:{from:o}})},DM="chuy1345",jM=()=>{const[n,e]=q.useState(""),[t,r]=q.useState(""),o=Yo(),l=d=>{d.preventDefault(),n===DM?(localStorage.setItem("adminAccess","true"),o("/admin")):r("Invalid password. Try again.")};return u.jsxs("section",{className:"ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Admin Access"}),u.jsxs("form",{onSubmit:l,style:{marginTop:"1rem"},children:[u.jsx("label",{htmlFor:"admin-password",style:{display:"block",marginBottom:".5rem"},children:"Enter admin password:"}),u.jsx("input",{id:"admin-password",type:"password",value:n,onChange:d=>{e(d.target.value),r("")},required:!0,style:{padding:"0.5rem",fontSize:"1rem",marginBottom:".5rem"}}),u.jsx("button",{type:"submit",style:{padding:"0.5rem 1rem"},children:"Enter"}),t&&u.jsx("p",{style:{color:"red",marginTop:".5rem"},children:t})]})]})},OM=()=>u.jsxs("div",{className:"admin-shell",children:[u.jsx(wy,{}),u.jsx("div",{className:"admin-content",children:u.jsx(sw,{})})]}),PM=({open:n,onClose:e,onCreate:t,defaultValues:r})=>{const[o,l]=ae.useState(()=>({title:r?.title??"",date:r?.date??new Date().toISOString().slice(0,10),startTime:r?.startTime??"",endTime:r?.endTime??"",location:r?.location??"",description:r?.description??"",status:r?.status??"draft"})),[d,m]=ae.useState(!1),[y,p]=ae.useState(null);if(ae.useEffect(()=>{n&&(l(w=>({...w,title:r?.title??"",date:r?.date??new Date().toISOString().slice(0,10),startTime:r?.startTime??"",endTime:r?.endTime??"",location:r?.location??"",description:r?.description??"",status:r?.status??"draft"})),p(null))},[n]),!n)return null;const _=w=>{const{name:I,value:M}=w.target;l(z=>({...z,[I]:M}))},b=async w=>{if(w.preventDefault(),p(null),!o.title.trim())return p("Title is required.");if(!/^\d{4}-\d{2}-\d{2}$/.test(o.date))return p("Date must be YYYY-MM-DD.");try{m(!0),await t(o),m(!1),e()}catch(I){console.error("[CreateEventModal] create error",I),m(!1),p(I?.message??"Failed to create event.")}};return u.jsx("div",{className:"cem-backdrop",role:"dialog","aria-modal":"true","aria-label":"Create event",children:u.jsxs("div",{className:"cem-modal",children:[u.jsxs("header",{className:"cem-header",children:[u.jsx("h2",{children:"Create Event"}),u.jsx("button",{className:"cem-icon",onClick:e,"aria-label":"Close",children:"×"})]}),u.jsxs("form",{className:"cem-form",onSubmit:b,children:[y&&u.jsx("div",{className:"cem-error",children:y}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Title *"}),u.jsx("input",{name:"title",value:o.title,onChange:_,placeholder:"e.g., Wedding at Royce Hall"})]}),u.jsxs("div",{className:"cem-row",children:[u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Date *"}),u.jsx("input",{type:"date",name:"date",value:o.date,onChange:_})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Start"}),u.jsx("input",{type:"time",name:"startTime",value:o.startTime,onChange:_})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"End"}),u.jsx("input",{type:"time",name:"endTime",value:o.endTime,onChange:_})]})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Location"}),u.jsx("input",{name:"location",value:o.location,onChange:_,placeholder:"Address or venue"})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Description/Notes"}),u.jsx("textarea",{name:"description",value:o.description,onChange:_,placeholder:"Any details for performers or client..."})]}),u.jsxs("label",{className:"cem-field",children:[u.jsx("span",{children:"Status"}),u.jsxs("select",{name:"status",value:o.status,onChange:_,children:[u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),u.jsxs("footer",{className:"cem-footer",children:[u.jsx("button",{type:"button",className:"btn btn-light",onClick:e,disabled:d,children:"Cancel"}),u.jsx("button",{type:"submit",className:"btn",disabled:d,children:d?"Saving…":"Create Event"})]})]})]})})};function kM(n){const{date:e,time:t}=sA(n);return{id:n.id,title:n.title,dateStr:t?`${e}, ${t}`:e,location:n.location||"",notes:n.description||"",status:n.status}}const MM=()=>{const[n,e]=ae.useState([]),[t,r]=ae.useState(!0),[o,l]=ae.useState(!1);ae.useEffect(()=>{const p=aA(_=>{e(_.map(kM)),r(!1)},_=>{console.error("[AdminEvents subscribe]",_),r(!1)});return()=>p()},[]);const d=p=>{console.log("edit",p)},m=async p=>{if(confirm("Delete (cancel) this event?"))try{await Xk(p,{status:"cancelled"})}catch(_){console.error("[handleDelete]",_),alert("Failed to delete (cancel) event.")}},y=async p=>{const _={title:p.title.trim(),date:p.date,startTime:p.startTime||null,endTime:p.endTime||null,location:p.location?.trim()||"",description:p.description?.trim()||"",status:p.status??"draft"};await Qk(_)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1024,margin:"0 auto"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Events"}),u.jsx("button",{className:"btn",onClick:()=>l(!0),children:"+ Create Event"})]}),t&&u.jsx("p",{children:"Loading events…"}),!t&&u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16,marginTop:16},children:n.map(p=>u.jsx(iA,{event:p,canManage:!0,onEdit:d,onDelete:m},p.id))}),!t&&n.length===0&&u.jsx("p",{children:"No events found."}),u.jsx(PM,{open:o,onClose:()=>l(!1),onCreate:y})]})};function lg(n){const e=["admin","performer","member"];return n?(Array.isArray(n)?n:[n]).map(r=>typeof r=="string"?r.toLowerCase():r).filter(r=>e.includes(r)):[]}const pA="users";async function VM(){return(await cn(ct(Se,pA))).docs.map(e=>{const t=e.data();return{uid:e.id,email:t.email??"",...t}})}async function LM(n,e){const t=_t(Se,pA,n);await Ns(t,{roles:e,isAdmin:e.includes("admin"),updatedAt:Yt()},{merge:!0})}const Gb={name:"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["member"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""};async function UM(){const n=$t.currentUser;if(!n)return!1;try{if((await n.getIdTokenResult())?.claims?.admin)return!0}catch{}try{const e=await au(_t(Se,"users",n.uid));return!!e.exists()&&!!e.data()?.isAdmin}catch{}return!1}function BM(){const[n,e]=ae.useState([]),[t,r]=ae.useState(!0),[o,l]=ae.useState(null);return ae.useEffect(()=>{let d=!0;return(async()=>{r(!0),l(null);const m=$t.currentUser;if(!m){l("Not signed in"),r(!1);return}try{if(await UM()){const _=(await VM()).map(b=>({...Gb,...b,uid:b.uid,email:b.email??"",roles:lg(b.roles),instruments:Array.isArray(b.instruments)?b.instruments:[]}));d&&e(_)}else{const p=await au(_t(Se,"users",m.uid)),_=p.exists()?p.data():{},b={...Gb,..._,uid:m.uid,email:_?.email??m.email??"",roles:lg(_?.roles),instruments:Array.isArray(_?.instruments)?_?.instruments:[]};d&&e([b])}}catch(y){console.error("[useUsersRoster] failed",y),d&&l(y?.message||"Failed to load users")}finally{d&&r(!1)}})(),()=>{d=!1}},[]),{profiles:n,loading:t,error:o}}const zM={member:"#e2e8f0",performer:"#cffafe",admin:"#fde68a"},qM={member:"Member",performer:"Performer",admin:"Admin"},FM=({role:n})=>u.jsx("span",{style:{background:zM[n],borderRadius:9999,padding:"2px 10px",fontSize:12,border:"1px solid rgba(0,0,0,0.06)"},children:qM[n]}),HM=({value:n,onChange:e,disabled:t})=>u.jsxs("select",{value:n,onChange:r=>e(r.target.value),disabled:t,style:{padding:"6px 8px"},children:[u.jsx("option",{value:"member",children:"Member"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]});function GM(n){return!n||n.length===0?"member":n.includes("admin")?"admin":n.includes("performer")?"performer":"member"}const $M=({checked:n,onChange:e,disabled:t,label:r})=>u.jsx("button",{type:"button",className:`toggle ${n?"on":""}`,"aria-pressed":n,disabled:t,onClick:()=>e(!n),title:r,children:u.jsx("span",{className:"knob"})}),Ss=n=>{if(n){if(n instanceof Date)return n;if(n instanceof Re)return n.toDate();try{const e=new Date(n);return isNaN(e.getTime())?void 0:e}catch{return}}},YM=(n,e)=>{const t=Ss(n),r=Ss(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!r)return o;const d=t.toDateString()===r.toDateString()?r.toLocaleTimeString?.():r.toLocaleString?.();return`${o} → ${d}`},KM=({member:n,open:e,onClose:t})=>{const[r,o]=ae.useState([]),[l,d]=ae.useState({}),[m,y]=ae.useState({}),[p,_]=ae.useState({}),[b,w]=ae.useState(!1);ae.useEffect(()=>{let j=!0;return(async()=>{if(!(!e||!n)){w(!0);try{const G=ct(Se,"events"),Q=mt(G,vt("status","==","published")),ie=await cn(Q);if(!j)return;const ee=ie.docs.map(N=>({id:N.id,...N.data()})),te=Date.now(),D=ee.filter(N=>{const Oe=Ss(N.start)?.getTime();return typeof Oe=="number"?Oe>=te-1e3*60*60*24:!0}).sort((N,Oe)=>(Ss(N.start)?.getTime()??0)-(Ss(Oe.start)?.getTime()??0)),R={},x={};D.forEach(N=>{R[N.id]="",x[N.id]=!1});const C=await Promise.all(D.map(N=>au(_t(Se,"events",N.id,"availability",n.uid))));if(!j)return;const O={...R},V={...x};C.forEach((N,Oe)=>{if(N.exists()){const Ie=N.data();O[D[Oe].id]=Ie.status||"",V[D[Oe].id]=!!Ie.finalized}}),o(D),d(O),y(V)}finally{j&&w(!1)}}})(),()=>{j=!1}},[e,n]);const I=(j,U)=>{d(G=>({...G,[j]:U}))},M=(j,U)=>{y(G=>({...G,[j]:U}))},z=async j=>{if(!n)return;const U=l[j.id]||"";if(U){_(G=>({...G,[j.id]:!0}));try{const G=!!m[j.id],Q={uid:n.uid,displayName:n.name||n.email||"Unknown",email:n.email||null,status:U,updatedAt:Re.now(),eventId:j.id,eventTitle:j.title||"Untitled Event",eventStart:Ss(j.start)?Re.fromDate(Ss(j.start)):null,eventEnd:Ss(j.end)?Re.fromDate(Ss(j.end)):null,eventLocation:j.location||null,finalized:G,finalizedBy:"admin",finalizedAt:G?Re.now():null},ie=_t(Se,"events",j.id,"availability",n.uid);await Ns(ie,Q,{merge:!0});const ee=`${j.id}_${n.uid}`,te=_t(Se,"availability",ee);await Ns(te,Q,{merge:!0})}finally{_(G=>({...G,[j.id]:!1}))}}};return u.jsxs("div",{className:`drawer ${e?"open":""}`,"aria-hidden":!e,children:[u.jsx("div",{className:"drawer-backdrop",onClick:t}),u.jsxs("div",{className:"drawer-panel",role:"dialog","aria-modal":"true","aria-label":"Manage Member RSVPs",children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{className:"drawer-title",children:[u.jsx("div",{className:"avatar sm",children:n?.photoURL?u.jsx("img",{src:n.photoURL,alt:"avatar"}):u.jsx("div",{className:"avatar-placeholder",children:(n?.name||n?.email||"U")[0].toUpperCase()})}),u.jsxs("div",{children:[u.jsx("h3",{children:n?.name||"Member"}),u.jsx("p",{className:"muted",children:n?.email})]})]}),u.jsx("button",{className:"btn btn-light",onClick:t,children:"Close"})]}),u.jsxs("div",{className:"drawer-body",children:[b&&u.jsx("p",{className:"muted",children:"Loading events…"}),!b&&!r.length&&u.jsx("p",{className:"muted",children:"No upcoming events."}),u.jsx("div",{className:"event-list",children:r.map(j=>u.jsxs("article",{className:"event-card",children:[u.jsxs("header",{className:"event-head",children:[u.jsx("h4",{children:j.title||"Untitled Event"}),u.jsx("span",{className:`status-pill ${j.status}`,children:j.status})]}),u.jsxs("dl",{className:"event-meta",children:[u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"When"}),u.jsx("dd",{children:YM(j.start,j.end)||"TBA"})]}),j.location&&u.jsxs("div",{className:"meta-row",children:[u.jsx("dt",{children:"Where"}),u.jsx("dd",{children:j.location})]})]}),u.jsxs("div",{className:"event-actions",children:[u.jsxs("label",{className:"sr-only",htmlFor:`sel-${n?.uid}-${j.id}`,children:["RSVP for ",j.title]}),u.jsxs("select",{id:`sel-${n?.uid}-${j.id}`,value:l[j.id]||"",onChange:U=>I(j.id,U.target.value),children:[u.jsx("option",{value:"",children:"Select…"}),u.jsx("option",{value:"yes",children:"Yes"}),u.jsx("option",{value:"maybe",children:"Maybe"}),u.jsx("option",{value:"no",children:"No"})]}),u.jsxs("label",{className:"finalize-toggle",children:[u.jsx("input",{type:"checkbox",checked:!!m[j.id],onChange:U=>M(j.id,U.target.checked)}),u.jsx("span",{children:"Finalize"})]}),u.jsx("button",{className:"btn-primary",disabled:!!p[j.id]||!l[j.id],onClick:()=>z(j),children:p[j.id]?"Saving…":"Save"})]}),m[j.id]&&u.jsx("p",{className:"finalized-note",children:"This RSVP will be locked for the performer."})]},j.id))})]})]})]})},QM=()=>{const{profiles:n,loading:e,error:t}=BM(),[r,o]=ae.useState(""),[l,d]=ae.useState({}),[m,y]=ae.useState(null),[p,_]=ae.useState(!1),b=ae.useMemo(()=>{const z=r.trim().toLowerCase();return z?n.filter(j=>{const U=(j.name??"").toLowerCase(),G=(j.email??"").toLowerCase(),Q=(j.instruments??[]).join(", ").toLowerCase();return U.includes(z)||G.includes(z)||Q.includes(z)}):n},[n,r]),w=async(z,j)=>{const U=j==="admin"?["admin"]:j==="performer"?["performer"]:["member"];await LM(z.uid,U)},I=async(z,j)=>{try{d(G=>({...G,[z.uid]:!0}));const U=_t(Se,"users",z.uid);await Ns(U,{canSeeEvents:j},{merge:!0})}finally{d(U=>({...U,[z.uid]:!1}))}},M=z=>{y(z),_(!0)};return u.jsxs("section",{className:"ucla-content",style:{maxWidth:1100,margin:"0 auto"},children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Manage Members"}),u.jsx("p",{children:"Search, assign roles, control event access, and finalize RSVPs."}),u.jsx("div",{style:{margin:"12px 0"},children:u.jsx("input",{value:r,onChange:z=>o(z.target.value),placeholder:"Search by name, email, instrument…",style:{width:"100%",maxWidth:420}})}),e&&u.jsx("p",{children:"Loading members…"}),t&&u.jsx("p",{style:{color:"salmon"},children:String(t)}),!e&&!t&&u.jsxs("table",{className:"members-table",children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Name"}),u.jsx("th",{children:"Email"}),u.jsx("th",{children:"Instruments"}),u.jsx("th",{children:"Role"}),u.jsx("th",{children:"Change Role"}),u.jsx("th",{children:"See Events?"}),u.jsx("th",{children:"RSVPs"})]})}),u.jsx("tbody",{children:b.map(z=>{const j=lg(z.roles),U=GM(j),G=!!z.canSeeEvents,Q=!!l[z.uid];return u.jsxs("tr",{children:[u.jsx("td",{children:z.name??""}),u.jsx("td",{children:z.email??""}),u.jsx("td",{children:(z.instruments??[]).join(", ")}),u.jsx("td",{children:u.jsx(FM,{role:U})}),u.jsx("td",{children:u.jsx(HM,{value:U,onChange:ie=>w(z,ie)})}),u.jsx("td",{children:u.jsxs("div",{className:"perm-cell",children:[u.jsx($M,{checked:G,disabled:Q,onChange:ie=>I(z,ie),label:"Can view members events"}),u.jsx("span",{className:"perm-label",children:G?"Allowed":"Hidden"})]})}),u.jsx("td",{children:u.jsx("button",{className:"btn",onClick:()=>M(z),children:"Open"})})]},z.uid)})})]}),u.jsx(KM,{member:m,open:p,onClose:()=>_(!1)})]})};function dc(n){if(n){if(typeof n=="string")return n;if(n instanceof Re)return n.toDate().toISOString()}}async function $b(n,e){const t=mt(ct(Se,"calendar_feed"),vt("sourceId","==",n),YO(1)),o=(await cn(t)).docs[0];o&&await Or(_t(Se,"calendar_feed",o.id),{status:e,updatedAt:Yt()})}const XM=()=>{const[n,e]=ae.useState([]),[t,r]=ae.useState(""),[o,l]=ae.useState("");ae.useEffect(()=>{const y=mt(ct(Se,"inquiries"),pn("createdAt","desc")),p=ou(y,_=>{const b=_.docs.map(w=>({id:w.id,...w.data()}));e(b)},_=>l(_?.message||"Failed to load inquiries"));return()=>p()},[]);const d=async y=>{try{r(y.id),l("");const p=y.event||{},_=dc(p.start)||(p.date?new Date(`${p.date}T12:00:00`).toISOString():void 0),b=dc(p.end),w={title:p.title||"Client Performance",date:p.date||void 0,start:_,end:b,location:p.location||"",status:"published",source:"inquiry",sourceId:y.id,createdAt:Yt(),updatedAt:Yt()},I=await qc(ct(Se,"events"),w);await Or(_t(Se,"inquiries",y.id),{status:"in_progress",eventId:I.id,updatedAt:Yt()}),await $b(y.id,"in_progress")}catch(p){console.error("[accept inquiry]",p),l(p?.message||"Failed to accept request")}finally{r("")}},m=async y=>{try{r(y.id),l(""),await Or(_t(Se,"inquiries",y.id),{status:"closed",updatedAt:Yt()}),await $b(y.id,"closed")}catch(p){console.error("[decline inquiry]",p),l(p?.message||"Failed to decline request")}finally{r("")}};return u.jsxs("section",{className:"admin-inquiries ucla-content",children:[u.jsx("h1",{className:"ucla-heading-xl",children:"Performance Requests"}),u.jsx("p",{children:"Review client inquiries. Accept to create an Event; Decline to close."}),o&&u.jsx("p",{className:"err",role:"alert",children:o}),u.jsx("div",{className:"inq-list",children:n.map(y=>{const p=y.event||{};return u.jsxs("article",{className:`inq-card status-${y.status||"new"}`,children:[u.jsxs("header",{className:"inq-head",children:[u.jsxs("div",{children:[u.jsx("h3",{children:p.title||"Client Inquiry"}),u.jsxs("div",{className:"muted",children:["From: ",y.name," • ",y.email,y.org?` • ${y.org}`:""]})]}),u.jsx("span",{className:`chip ${y.status||"new"}`,children:y.status||"new"})]}),u.jsxs("dl",{className:"grid",children:[u.jsxs("div",{children:[u.jsx("dt",{children:"Date"}),u.jsx("dd",{children:p.date||(typeof p.start=="string"?p.start.slice(0,10):"")||"—"})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Time"}),u.jsx("dd",{children:(dc(p.start)?.slice(11,16)||"—")+(dc(p.end)?` – ${dc(p.end).slice(11,16)}`:"")})]}),u.jsxs("div",{children:[u.jsx("dt",{children:"Location"}),u.jsx("dd",{children:p.location||"—"})]}),u.jsxs("div",{className:"span-2",children:[u.jsx("dt",{children:"Notes"}),u.jsx("dd",{children:y.message||"—"})]})]}),u.jsxs("footer",{className:"actions",children:[u.jsx("button",{className:"btn",disabled:t===y.id,onClick:()=>d(y),children:"Accept"}),u.jsx("button",{className:"btn btn-light",disabled:t===y.id,onClick:()=>m(y),children:"Decline"})]})]},y.id)})}),n.length===0&&u.jsx("p",{children:"No requests yet."})]})};async function WM(n){const e=ct(Se,"events"),t=[pn("date","desc")];n?.statusIn&&n.statusIn.length&&t.unshift(vt("status","in",n.statusIn));const r=mt(e,...t),o=await cn(r),l=[];for(const d of o.docs){const m={id:d.id,...d.data()},y=ct(Se,`events/${d.id}/participation`),_=(await cn(y)).docs.map(M=>({uid:M.id,...M.data()}));let b=0,w=0,I=0;for(const M of _){if(!(M.status==="going"))continue;b+=1;const j=typeof M.compensatedHours=="number"?M.compensatedHours:m.eventDurationHours??0,U=typeof M.hourlyRateOverride=="number"?M.hourlyRateOverride:m.hourlyRate??0;w+=j,I+=j*U}l.push({...m,participants:_,totals:{headcountGoing:b,totalCompHours:w,totalPayout:I}})}return l}async function ZM(n){await Or(_t(Se,"events",n),{status:"published"})}async function JM(n){await Or(_t(Se,"events",n),{status:"hidden"})}async function eV(n){await Or(_t(Se,"events",n),{status:"canceled"})}async function tV(n){const e=WO(Se),t=_t(Se,"events",n),r=ct(Se,`events/${n}/participation`);(await cn(r)).forEach(l=>e.delete(l.ref)),e.delete(t),await e.commit()}const nV=n=>n?n.toDate().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",ya=n=>typeof n=="number"?`$${n.toFixed(2)}`:"—",iV=({status:n})=>u.jsx("span",{className:`status badge ${n}`,children:n}),Yb=()=>{const[n,e]=ae.useState(!0),[t,r]=ae.useState([]),[o,l]=ae.useState("all"),[d,m]=ae.useState(""),y=ae.useCallback(async()=>{e(!0);const b=await WM({statusIn:o==="all"?void 0:[o]});r(b),e(!1)},[o]);ae.useEffect(()=>{y()},[y]);const p=ae.useMemo(()=>{const _=d.trim().toLowerCase();return t.filter(b=>!_||b.title.toLowerCase().includes(_))},[t,d]);return u.jsxs("section",{className:"participation-page",children:[u.jsx("h1",{children:"Participation & Event Financials"}),u.jsxs("div",{className:"toolbar",children:[u.jsx("input",{placeholder:"Search events by title…",value:d,onChange:_=>m(_.target.value)}),u.jsxs("select",{value:o,onChange:_=>l(_.target.value),children:[u.jsx("option",{value:"all",children:"All statuses"}),u.jsx("option",{value:"published",children:"Published"}),u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"hidden",children:"Hidden"}),u.jsx("option",{value:"canceled",children:"Canceled"})]}),u.jsx("button",{onClick:y,disabled:n,children:n?"Loading…":"Reload"})]}),p.map(_=>u.jsxs("details",{className:"event-card",children:[u.jsx("summary",{children:u.jsxs("div",{className:"ev-summary",children:[u.jsxs("div",{className:"ev-title",children:[u.jsx("h3",{children:_.title}),u.jsxs("div",{className:"meta",children:[u.jsx("span",{children:nV(_.date)}),u.jsxs("span",{children:["• ",_.startTime??"—","–",_.endTime??"—"]}),u.jsxs("span",{children:["• ",_.venue??"—"]})]})]}),u.jsxs("div",{className:"ev-stats",children:[u.jsx(iV,{status:_.status}),u.jsxs("div",{className:"kpis",children:[u.jsxs("div",{children:[u.jsx("small",{children:"Going"}),u.jsx("strong",{children:_.totals.headcountGoing})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Comp Hours"}),u.jsx("strong",{children:_.totals.totalCompHours.toFixed(2)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Total Payout"}),u.jsx("strong",{children:ya(_.totals.totalPayout)})]}),u.jsxs("div",{children:[u.jsx("small",{children:"Client Charge"}),u.jsx("strong",{children:ya(_.clientCharge)})]})]})]})]})}),u.jsxs("div",{className:"ev-actions",children:[u.jsx("button",{onClick:()=>ZM(_.id).then(y),children:"Publish"}),u.jsx("button",{onClick:()=>JM(_.id).then(y),children:"Hide"}),u.jsx("button",{onClick:()=>eV(_.id).then(y),children:"Cancel"}),u.jsx("button",{className:"danger",onClick:()=>{confirm("Delete event and all participation? This cannot be undone.")&&tV(_.id).then(y)},children:"Delete"})]}),u.jsxs("div",{className:"ev-financials",children:[u.jsx("h4",{children:"Financial Summary"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Hourly Rate"}),u.jsx("th",{children:"Event Duration (hrs)"}),u.jsx("th",{children:"Headcount (Going)"}),u.jsx("th",{children:"Total Comp Hours"}),u.jsx("th",{children:"Total Payout"}),u.jsx("th",{children:"Client Charge"})]})}),u.jsx("tbody",{children:u.jsxs("tr",{children:[u.jsx("td",{children:ya(_.hourlyRate??null)}),u.jsx("td",{children:_.eventDurationHours??"—"}),u.jsx("td",{children:_.totals.headcountGoing}),u.jsx("td",{children:_.totals.totalCompHours.toFixed(2)}),u.jsx("td",{children:ya(_.totals.totalPayout)}),u.jsx("td",{children:ya(_.clientCharge)})]})})]})]}),u.jsxs("div",{className:"ev-participants",children:[u.jsx("h4",{children:"Who’s Going"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Compensated Time (hrs)"}),u.jsx("th",{children:"Rate ($/hr)"}),u.jsx("th",{children:"Performer Payout"})]})}),u.jsxs("tbody",{children:[_.participants.filter(b=>b.status==="going").map(b=>{const w=b.compensatedHours??_.eventDurationHours??0,I=b.hourlyRateOverride??_.hourlyRate??0,M=w*I;return u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status}),u.jsx("td",{children:typeof w=="number"?w.toFixed(2):"—"}),u.jsx("td",{children:ya(I)}),u.jsx("td",{children:ya(M)})]},b.uid)}),_.participants.filter(b=>b.status==="going").length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:5,style:{textAlign:"center",opacity:.65},children:"No confirmed performers yet."})})]})]}),u.jsxs("details",{className:"others",children:[u.jsx("summary",{children:"View others (maybe/declined/unknown)"}),u.jsxs("table",{children:[u.jsx("thead",{children:u.jsxs("tr",{children:[u.jsx("th",{children:"Performer"}),u.jsx("th",{children:"Status"}),u.jsx("th",{children:"Notes"})]})}),u.jsx("tbody",{children:_.participants.filter(b=>b.status!=="going").map(b=>u.jsxs("tr",{children:[u.jsx("td",{children:b.name??b.uid}),u.jsx("td",{children:b.status??"unknown"}),u.jsx("td",{children:"—"})]},b.uid))})]})]})]})]},_.id)),!n&&p.length===0&&u.jsx("p",{style:{opacity:.7},children:"No events match your filter."})]})},gr=n=>{try{if(!n&&n!==0)return null;if(n&&typeof n=="object"&&"toDate"in n)return n.toDate();if(typeof n=="string")return new Date(n);if(typeof n=="number")return new Date(n)}catch{}return null},sV=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():void 0,Cp=n=>n?n.charAt(0).toUpperCase()+n.slice(1).toLowerCase():"Unknown",zh=(n,e)=>{const t=n?gr(n):null,r=e?gr(e):null;if(!t||!r)return 0;const o=Math.max(0,r.getTime()-t.getTime());return Math.round(o/36e5*4)/4},rV=()=>{const[n,e]=ae.useState(""),[t,r]=ae.useState(""),[o,l]=ae.useState(!1),[d,m]=ae.useState(""),[y,p]=ae.useState([]),[_,b]=ae.useState([]),[w,I]=ae.useState([]),[M,z]=ae.useState({total:0,published:0,canceled:0,completed:0}),[j,U]=ae.useState({Submitted:0,Accepted:0,Booked:0,Completed:0}),[G,Q]=ae.useState({total:0,Yes:0,Maybe:0,No:0}),[ie,ee]=ae.useState(0),[te,D]=ae.useState(!1),[R,x]=ae.useState(null),[C,O]=ae.useState([]),[V,N]=ae.useState(!1),Oe=ae.useCallback(async()=>{l(!0),m("");const ce=n?new Date(n+"T00:00:00"):null,k=t?new Date(t+"T23:59:59.999"):null;try{const Z=ct(Se,"events");let he;ce&&k?he=mt(Z,vt("date",">=",Re.fromDate(ce)),vt("date","<=",Re.fromDate(k)),pn("date","desc")):ce?he=mt(Z,vt("date",">=",Re.fromDate(ce)),pn("date","desc")):k?he=mt(Z,vt("date","<=",Re.fromDate(k)),pn("date","desc")):he=mt(Z,pn("date","desc"));const ue=(await cn(he)).docs.map(Ye=>{const je=Ye.data();return{id:Ye.id,date:gr(je.date??je.start),start:je.start??je.date,end:je.end??null,status:je.status?Cp(je.status):void 0,title:je.title||je.name,location:je.location}}),pe={total:ue.length,published:0,canceled:0,completed:0};for(const Ye of ue){const je=(Ye.status||"").toLowerCase();je==="published"||je==="confirmed"?pe.published++:je==="cancelled"||je==="canceled"?pe.canceled++:(je==="completed"||je==="done")&&pe.completed++}const de=ct(Se,"inquiries");let Ke;ce&&k?Ke=mt(de,vt("date",">=",Re.fromDate(ce)),vt("date","<=",Re.fromDate(k)),pn("date","desc")):ce?Ke=mt(de,vt("date",">=",Re.fromDate(ce)),pn("date","desc")):k?Ke=mt(de,vt("date","<=",Re.fromDate(k)),pn("date","desc")):Ke=mt(de,pn("date","desc"));const pt=(await cn(Ke)).docs.map(Ye=>{const je=Ye.data();return{id:Ye.id,date:gr(je.date),status:je.status?Cp(je.status):void 0,title:je.title||je.clientName||je.subject}}),ft={Submitted:0,Accepted:0,Booked:0,Completed:0};for(const Ye of pt){const je=Cp(Ye.status);je in ft&&ft[je]++}const An=ct(Se,"availability");let Vn;ce&&k?Vn=mt(An,vt("eventStart",">=",Re.fromDate(ce)),vt("eventStart","<=",Re.fromDate(k)),pn("eventStart","desc")):ce?Vn=mt(An,vt("eventStart",">=",Re.fromDate(ce)),pn("eventStart","desc")):k?Vn=mt(An,vt("eventStart","<=",Re.fromDate(k)),pn("eventStart","desc")):Vn=mt(An,pn("eventStart","desc"));const ui=(await cn(Vn)).docs.map(Ye=>{const je=Ye.data(),Bs=je.response??je.status,Si=typeof Bs=="string"?Bs.toLowerCase():"",Zi=Si==="yes"?"Yes":Si==="no"?"No":Si==="maybe"?"Maybe":sV(je.response);return{id:Ye.id,uid:je.uid,name:je.displayName||je.name,date:gr(je.eventStart??je.date),response:Zi,eventId:je.eventId,title:je.title||je.eventTitle}}),wi={total:ui.length,Yes:0,Maybe:0,No:0};for(const Ye of ui)Ye.response==="Yes"?wi.Yes++:Ye.response==="Maybe"?wi.Maybe++:Ye.response==="No"&&wi.No++;let Vr=0;for(const Ye of ue)(Ye.status||"").toLowerCase()==="completed"&&(Vr+=zh(Ye.start,Ye.end));p(ue),b(pt),I(ui),z(pe),U(ft),Q(wi),ee(Vr)}catch(Z){console.error(Z),m(Z?.message??"Failed to fetch report data"),p([]),b([]),I([]),z({total:0,published:0,canceled:0,completed:0}),U({Submitted:0,Accepted:0,Booked:0,Completed:0}),Q({total:0,Yes:0,Maybe:0,No:0}),ee(0)}finally{l(!1)}},[n,t]);ae.useEffect(()=>{Oe()},[Oe]);const Ie=()=>{try{const Z="\uFEFF"+["Metric,Value",`Events Total,${M.total}`,`Events Published,${M.published}`,`Events Canceled,${M.canceled}`,`Events Completed,${M.completed}`,`Inquiries Submitted,${j.Submitted}`,`Inquiries Accepted,${j.Accepted}`,`Inquiries Booked,${j.Booked}`,`Inquiries Completed,${j.Completed}`,`Availability Total,${G.total}`,`Availability Yes,${G.Yes}`,`Availability Maybe,${G.Maybe}`,`Availability No,${G.No}`,`Finance Approved Hours (approx),${ie}`].join(`\r
`),he=new Blob([Z],{type:"text/csv;charset=utf-8;"}),le=URL.createObjectURL(he),ue=document.createElement("a");ue.href=le,ue.download="tallies.csv",document.body.appendChild(ue),ue.click(),document.body.removeChild(ue),URL.revokeObjectURL(le)}catch(ce){console.error("CSV export failed:",ce)}},X=async ce=>{x(ce),D(!0);const k=mt(ct(Se,"availability"),vt("eventId","==",ce.id)),he=(await cn(k)).docs.map(le=>le.data()).filter(le=>{const ue=le.status??le.response,pe=typeof ue=="string"?ue.toLowerCase():"";return pe==="yes"||pe==="going"||pe==="attending"}).map(le=>({uid:le.uid,name:le.displayName||le.name||le.email||le.uid,approved:!1}));O(he)},me=ce=>O(k=>k.map(Z=>Z.uid===ce?{...Z,approved:!Z.approved}:Z)),Ee=async()=>{if(R){N(!0);try{const ce=zh(R.start,R.end),k=C.filter(Z=>Z.approved);await Promise.all(k.map(Z=>{const he=_t(Se,"events",R.id,"payments",Z.uid),le={uid:Z.uid,name:Z.name,eventId:R.id,eventTitle:R.title||"Untitled Event",eventDate:gr(R.date)??null,hours:ce,approvedAt:Yt()};return Ns(he,le,{merge:!0})})),await Or(_t(Se,"events",R.id),{status:"completed",completedAt:Yt()}),await Oe(),D(!1),x(null),O([])}catch(ce){console.error("Finalize failed",ce),m("Finalize failed. See console.")}finally{N(!1)}}};return u.jsxs("section",{className:"reports stack",children:[u.jsxs("header",{className:"stack",children:[u.jsx("h1",{className:"title",children:"Reports"}),u.jsx("p",{className:"lede",children:"Tallies for Events, Inquiries, Availability — with event finalization."})]}),u.jsxs("div",{className:"toolbar",children:[u.jsxs("div",{className:"left",children:[u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"From"}),u.jsx("input",{type:"date",value:n,onChange:ce=>e(ce.target.value)})]}),u.jsxs("label",{className:"field",children:[u.jsx("span",{children:"To"}),u.jsx("input",{type:"date",value:t,onChange:ce=>r(ce.target.value)})]})]}),u.jsxs("div",{className:"right",children:[u.jsx("button",{className:"btn",onClick:Ie,disabled:o,children:"Export CSV"}),u.jsx("button",{className:"btn btn-secondary",onClick:Oe,disabled:o,children:o?"Loading…":"Refresh"})]})]}),d&&u.jsx("div",{className:"alert",children:d}),u.jsxs("div",{className:"grid cols-3 stack-md",children:[u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Events"}),u.jsxs("p",{className:"muted",children:["Total (range): ",M.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Published"}),u.jsx("strong",{children:M.published})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge canceled",children:"Canceled"}),u.jsx("strong",{children:M.canceled})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:M.completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Inquiries Funnel"}),u.jsxs("p",{className:"muted",children:["Total: ",Object.values(j).reduce((ce,k)=>ce+k,0)]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge submitted",children:"Submitted"}),u.jsx("strong",{children:j.Submitted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge accepted",children:"Accepted"}),u.jsx("strong",{children:j.Accepted})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge booked",children:"Booked"}),u.jsx("strong",{children:j.Booked})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge completed",children:"Completed"}),u.jsx("strong",{children:j.Completed})]})]}),u.jsxs("article",{className:"card stat",children:[u.jsx("h3",{children:"Availability"}),u.jsxs("p",{className:"muted",children:["Total responses: ",G.total]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge yes",children:"Yes"}),u.jsx("strong",{children:G.Yes})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge maybe",children:"Maybe"}),u.jsx("strong",{children:G.Maybe})]}),u.jsxs("div",{className:"pill-row",children:[u.jsx("span",{className:"badge no",children:"No"}),u.jsx("strong",{children:G.No})]})]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Events in Range"}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status"}),u.jsx("div",{children:"Duration"}),u.jsx("div",{children:"Actions"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&y.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No events."})}),!o&&y.map(ce=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:ce.date?ce.date.toLocaleDateString():"—"}),u.jsx("div",{children:ce.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(ce.status||"unknown").toLowerCase()}`,children:ce.status||"—"})}),u.jsxs("div",{children:[zh(ce.start,ce.end)," hr"]}),u.jsx("div",{children:u.jsx("button",{className:"btn sm",onClick:()=>X(ce),disabled:!ce.id,children:"Manage"})})]},ce.id))]})]}),u.jsxs("section",{className:"card stack",children:[u.jsx("h3",{children:"Recent (Events • Inquiries • Availability)"}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Date"}),u.jsx("div",{children:"Type"}),u.jsx("div",{children:"Title"}),u.jsx("div",{children:"Status/Response"})]}),o&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"Loading…"})}),!o&&y.length+_.length+w.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No items for selected range."})}),!o&&u.jsxs(u.Fragment,{children:[y.map(ce=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:ce.date?ce.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Event"}),u.jsx("div",{children:ce.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(ce.status||"unknown").toLowerCase()}`,children:ce.status||"—"})})]},`e-${ce.id}`)),_.map(ce=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:ce.date?ce.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Inquiry"}),u.jsx("div",{children:ce.title||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(ce.status||"unknown").toLowerCase()}`,children:ce.status||"—"})})]},`q-${ce.id}`)),w.map(ce=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:ce.date?ce.date.toLocaleDateString():"—"}),u.jsx("div",{children:"Availability"}),u.jsx("div",{children:ce.title||ce.eventId||"—"}),u.jsx("div",{children:u.jsx("span",{className:`badge ${String(ce.response||"unknown").toLowerCase()}`,children:ce.response||"—"})})]},`r-${ce.id}`))]})]})]}),te&&R&&u.jsx("div",{className:"drawer-backdrop",role:"dialog","aria-modal":!0,onClick:()=>D(!1),children:u.jsxs("div",{className:"drawer",onClick:ce=>ce.stopPropagation(),children:[u.jsxs("div",{className:"drawer-head",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"drawer-title",children:["Finalize: ",R.title]}),u.jsxs("div",{className:"drawer-meta",children:[gr(R.start)?.toLocaleString()??"—",R.end?` – ${gr(R.end)?.toLocaleTimeString()}`:"",R.location?` • ${R.location}`:""]})]}),u.jsx("button",{className:"drawer-close",onClick:()=>D(!1),"aria-label":"Close",children:"✕"})]}),u.jsxs("div",{className:"drawer-body",children:[u.jsx("p",{className:"muted",children:"YES RSVPs — check whom to approve for payment."}),u.jsxs("div",{className:"table",children:[u.jsxs("div",{className:"row head",children:[u.jsx("div",{children:"Approve"}),u.jsx("div",{children:"Performer"})]}),C.length===0&&u.jsx("div",{className:"row message",children:u.jsx("div",{className:"full",children:"No YES RSVPs found."})}),C.map(ce=>u.jsxs("div",{className:"row",children:[u.jsx("div",{children:u.jsx("input",{type:"checkbox",checked:ce.approved,onChange:()=>me(ce.uid),"aria-label":`Approve ${ce.name}`})}),u.jsx("div",{children:ce.name})]},ce.uid))]}),u.jsxs("div",{className:"stack",children:[u.jsxs("div",{className:"muted",children:["Duration: ",zh(R.start,R.end)," hr"]}),u.jsx("button",{className:"btn-primary",onClick:Ee,disabled:V||C.every(ce=>!ce.approved),children:V?"Finalizing…":"Finalize & Write Payments"})]})]})]})})]})},Sy=({person:n})=>u.jsxs("article",{className:"person-card","aria-label":n.name,children:[u.jsx("div",{className:"person-card__image",children:u.jsx("img",{src:n.headshotUrl||"https://via.placeholder.com/512x640?text=Headshot",alt:`${n.name} headshot`,loading:"lazy"})}),u.jsxs("div",{className:"person-card__body",children:[u.jsx("h3",{className:"person-card__name",children:n.name}),n.role&&u.jsx("p",{className:"person-card__meta",children:n.role}),n.instrument&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Instrument:"})," ",n.instrument]}),n.section&&u.jsxs("p",{className:"person-card__meta",children:[u.jsx("strong",{children:"Section:"})," ",n.section]})]})]}),aV=[{id:"staff-1",name:"Jesús Guzmán",category:"staff",role:"Director",headshotUrl:"../../assets/headshots/Chuy.png"},{id:"staff-2",name:"Elias Rodriguez",category:"staff",role:"Program Coordinator",headshotUrl:"https://via.placeholder.com/512x640?text=Elias+Rodriguez"}],oV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Staff"}),u.jsx("p",{className:"people-subtitle",children:"Leaders and coordinators supporting Mariachi de Uclatlán."})]}),u.jsx("div",{className:"people-grid",children:aV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),lV=[{id:"mus-1",name:"Enrique Rodrigruez-Gonzales",category:"musician",instrument:"Vihuela",section:"Armonia",headshotUrl:"EnriqueImg"},{id:"mus-2",name:"Angel Ramirez",category:"musician",instrument:"Guitarron",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=José+Hernández"},{id:"mus-3",name:"Brandon",category:"musician",role:"Guitarra",section:"Armonia",headshotUrl:"src/assets/headshots/brandon.jpg"},{id:"mus-3",name:"Paulina Perez",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-4",name:"Gaby (guitar)",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-5",name:"Dayanara Bravo",role:"Violin-Guitarron",category:"musician",section:"String-Armonia",headshotUrl:"src/assets/headshots/daya.jpg"},{id:"Mus-6",name:"Jake Sherry",category:"musician",role:"Trumpet",section:"Trumpet",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-7",name:"april",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-8",name:"Andrew",category:"musician",role:"Violin",section:"string",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],cV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Musicians"}),u.jsx("p",{className:"people-subtitle",children:"Meet the student performers who bring the music to life."})]}),u.jsx("div",{className:"people-grid",children:lV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),uV=[{id:"dan-1",name:"Sarah Ward",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],hV=()=>u.jsxs("section",{className:"people-page",children:[u.jsxs("header",{className:"people-header",children:[u.jsx("h1",{children:"Our Dancers"}),u.jsx("p",{className:"people-subtitle",children:"Folklórico dancers who bring motion and storytelling to our performances."})]}),u.jsx("div",{className:"people-grid",children:uV.map(n=>u.jsx(Sy,{person:n},n.id))})]}),dV=({adminComponent:n,performerComponent:e,publicComponent:t})=>{const[r,o]=q.useState("public"),l=d=>{const m=d.target.value;o(m)};return u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f0f0f0"},children:[u.jsx("label",{style:{marginRight:"0.5rem"},children:"Select Role View:"}),u.jsxs("select",{value:r,onChange:l,children:[u.jsx("option",{value:"public",children:"Public"}),u.jsx("option",{value:"performer",children:"Performer"}),u.jsx("option",{value:"admin",children:"Admin"})]})]}),r==="admin"&&u.jsx(wy,{}),r==="performer"&&u.jsx(mA,{}),"  ",r==="public"&&u.jsx(fA,{}),u.jsxs("main",{children:[r==="admin"&&n,r==="performer"&&e,r==="public"&&t]})]})},fV=()=>u.jsx(sw,{}),mV=()=>{const[n,e]=ae.useState(null),[t,r]=ae.useState(null),o=Xi();ae.useEffect(()=>{const b=Id($t,async w=>{if(e(w),w){const I=await Iw(w);r(I.claims)}else r(null)});return()=>b()},[]),typeof window<"u"&&localStorage.getItem("adminAccess");const l=ae.useMemo(()=>typeof window<"u"&&localStorage.getItem("adminAccess")==="true"?!0:n?t?.admin||t?.role==="admin"?!0:lA(n.email??void 0):!1,[n,t,o.pathname]),d=o.pathname,m=d.startsWith("/members"),y=d.startsWith("/admin"),p=d.startsWith("/performer-dashboard"),_=d.startsWith("/dashboard")||p||y;return u.jsxs("div",{className:"app-shell",children:[!m&&!_&&u.jsx(fA,{}),m&&n&&u.jsx(mA,{}),p&&n&&u.jsx(dA,{}),u.jsx("main",{className:"container main stack",role:"main",children:u.jsxs(qx,{children:[u.jsx(Xe,{path:"/",element:u.jsx(XE,{})}),u.jsx(Xe,{path:"/about",element:u.jsx(A1,{})}),u.jsx(Xe,{path:"/contact",element:u.jsx(R1,{})}),u.jsx(Xe,{path:"/login",element:u.jsx(Ik,{})}),u.jsx(Xe,{path:"/register",element:u.jsx(Ok,{})}),u.jsx(Xe,{path:"/book-us",element:u.jsx(Mk,{})}),u.jsx(Xe,{path:"/hire-us",element:u.jsx(Uk,{})}),u.jsx(Xe,{path:"/join",element:u.jsx(Vk,{})}),u.jsx(Xe,{path:"/staff",element:u.jsx(oV,{})}),u.jsx(Xe,{path:"/musicians",element:u.jsx(cV,{})}),u.jsx(Xe,{path:"/dancers",element:u.jsx(hV,{})}),u.jsx(Xe,{path:"/admin-password",element:u.jsx(jM,{})}),u.jsxs(Xe,{path:"/members",element:u.jsx(xp,{user:n,children:u.jsx(fV,{})}),children:[u.jsx(Xe,{index:!0,element:u.jsx(qk,{})}),u.jsx(Xe,{path:"profile",element:u.jsx(Gk,{})}),u.jsx(Xe,{path:"events",element:u.jsx(Zk,{})}),u.jsx(Xe,{path:"resources",element:u.jsx(Jk,{})}),u.jsx(Xe,{path:"settings",element:u.jsx(tM,{})}),u.jsx(Xe,{path:"performer-availability",element:u.jsx(lM,{})}),u.jsx(Xe,{path:"calendar",element:u.jsx(CM,{})})]}),u.jsx(Xe,{path:"/dashboard",element:u.jsx(dV,{adminComponent:u.jsx(Fb,{}),performerComponent:u.jsx(Hb,{}),publicComponent:u.jsx(XE,{})})}),u.jsxs(Xe,{path:"/admin/*",element:u.jsx(xp,{user:n,isAdminUser:l,requiresAdmin:!0,children:u.jsxs(u.Fragment,{children:[u.jsx(wy,{}),u.jsx(OM,{})]})}),children:[u.jsx(Xe,{index:!0,element:u.jsx(Fb,{})}),u.jsx(Xe,{path:"events",element:u.jsx(MM,{})}),u.jsx(Xe,{path:"managemembers",element:u.jsx(QM,{})}),u.jsx(Xe,{path:"reports",element:u.jsx(rV,{})}),u.jsx(Xe,{path:"inquiries",element:u.jsx(XM,{})}),u.jsx(Xe,{path:"participation",element:u.jsx(Yb,{})})]}),u.jsx(Xe,{path:"/admin/participation",element:u.jsx(Yb,{})}),u.jsx(Xe,{path:"/performer-dashboard",element:u.jsx(xp,{user:n,children:u.jsx(Hb,{})})}),u.jsx(Xe,{path:"*",element:u.jsx(Ip,{to:"/",replace:!0})})]})}),!y&&u.jsx(NM,{}),u.jsx(IM,{user:n,isAdmin:l,claims:t})]})},pV=()=>u.jsx(h1,{children:u.jsx(mV,{})});XR.createRoot(document.getElementById("root")).render(u.jsx(ae.StrictMode,{children:u.jsx(pV,{})}));

(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=t(o);fetch(o.href,u)}})();function jb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var $m={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wE;function bR(){if(wE)return Zl;wE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=t,Zl.jsxs=t,Zl}var AE;function wR(){return AE||(AE=1,$m.exports=bR()),$m.exports}var f=wR(),Ym={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SE;function AR(){if(SE)return Ce;SE=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.iterator;function A(P){return P===null||typeof P!="object"?null:(P=b&&P[b]||P["@@iterator"],typeof P=="function"?P:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,q={};function V(P,se,ce){this.props=P,this.context=se,this.refs=q,this.updater=ce||R}V.prototype.isReactComponent={},V.prototype.setState=function(P,se){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,se,"setState")},V.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function ee(){}ee.prototype=V.prototype;function K(P,se,ce){this.props=P,this.context=se,this.refs=q,this.updater=ce||R}var Q=K.prototype=new ee;Q.constructor=K,O(Q,V.prototype),Q.isPureReactComponent=!0;var ie=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},re=Object.prototype.hasOwnProperty;function N(P,se,ce,oe,ve,xe){return ce=xe.ref,{$$typeof:i,type:P,key:se,ref:ce!==void 0?ce:null,props:xe}}function C(P,se){return N(P.type,se,void 0,void 0,void 0,P.props)}function I(P){return typeof P=="object"&&P!==null&&P.$$typeof===i}function M(P){var se={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(ce){return se[ce]})}var k=/\/+/g;function U(P,se){return typeof P=="object"&&P!==null&&P.key!=null?M(""+P.key):se.toString(36)}function D(){}function Ft(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(D,D):(P.status="pending",P.then(function(se){P.status==="pending"&&(P.status="fulfilled",P.value=se)},function(se){P.status==="pending"&&(P.status="rejected",P.reason=se)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function dt(P,se,ce,oe,ve){var xe=typeof P;(xe==="undefined"||xe==="boolean")&&(P=null);var Ae=!1;if(P===null)Ae=!0;else switch(xe){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(P.$$typeof){case i:case e:Ae=!0;break;case v:return Ae=P._init,dt(Ae(P._payload),se,ce,oe,ve)}}if(Ae)return ve=ve(P),Ae=oe===""?"."+U(P,0):oe,ie(ve)?(ce="",Ae!=null&&(ce=Ae.replace(k,"$&/")+"/"),dt(ve,se,ce,"",function(mi){return mi})):ve!=null&&(I(ve)&&(ve=C(ve,ce+(ve.key==null||P&&P.key===ve.key?"":(""+ve.key).replace(k,"$&/")+"/")+Ae)),se.push(ve)),1;Ae=0;var Vt=oe===""?".":oe+":";if(ie(P))for(var it=0;it<P.length;it++)oe=P[it],xe=Vt+U(oe,it),Ae+=dt(oe,se,ce,xe,ve);else if(it=A(P),typeof it=="function")for(P=it.call(P),it=0;!(oe=P.next()).done;)oe=oe.value,xe=Vt+U(oe,it++),Ae+=dt(oe,se,ce,xe,ve);else if(xe==="object"){if(typeof P.then=="function")return dt(Ft(P),se,ce,oe,ve);throw se=String(P),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function X(P,se,ce){if(P==null)return P;var oe=[],ve=0;return dt(P,oe,"","",function(xe){return se.call(ce,xe,ve++)}),oe}function ue(P){if(P._status===-1){var se=P._result;se=se(),se.then(function(ce){(P._status===0||P._status===-1)&&(P._status=1,P._result=ce)},function(ce){(P._status===0||P._status===-1)&&(P._status=2,P._result=ce)}),P._status===-1&&(P._status=0,P._result=se)}if(P._status===1)return P._result.default;throw P._result}var ye=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function ze(){}return Ce.Children={map:X,forEach:function(P,se,ce){X(P,function(){se.apply(this,arguments)},ce)},count:function(P){var se=0;return X(P,function(){se++}),se},toArray:function(P){return X(P,function(se){return se})||[]},only:function(P){if(!I(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Ce.Component=V,Ce.Fragment=t,Ce.Profiler=o,Ce.PureComponent=K,Ce.StrictMode=s,Ce.Suspense=p,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(P){return ae.H.useMemoCache(P)}},Ce.cache=function(P){return function(){return P.apply(null,arguments)}},Ce.cloneElement=function(P,se,ce){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var oe=O({},P.props),ve=P.key,xe=void 0;if(se!=null)for(Ae in se.ref!==void 0&&(xe=void 0),se.key!==void 0&&(ve=""+se.key),se)!re.call(se,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&se.ref===void 0||(oe[Ae]=se[Ae]);var Ae=arguments.length-2;if(Ae===1)oe.children=ce;else if(1<Ae){for(var Vt=Array(Ae),it=0;it<Ae;it++)Vt[it]=arguments[it+2];oe.children=Vt}return N(P.type,ve,void 0,void 0,xe,oe)},Ce.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:u,_context:P},P},Ce.createElement=function(P,se,ce){var oe,ve={},xe=null;if(se!=null)for(oe in se.key!==void 0&&(xe=""+se.key),se)re.call(se,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(ve[oe]=se[oe]);var Ae=arguments.length-2;if(Ae===1)ve.children=ce;else if(1<Ae){for(var Vt=Array(Ae),it=0;it<Ae;it++)Vt[it]=arguments[it+2];ve.children=Vt}if(P&&P.defaultProps)for(oe in Ae=P.defaultProps,Ae)ve[oe]===void 0&&(ve[oe]=Ae[oe]);return N(P,xe,void 0,void 0,null,ve)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(P){return{$$typeof:m,render:P}},Ce.isValidElement=I,Ce.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:ue}},Ce.memo=function(P,se){return{$$typeof:y,type:P,compare:se===void 0?null:se}},Ce.startTransition=function(P){var se=ae.T,ce={};ae.T=ce;try{var oe=P(),ve=ae.S;ve!==null&&ve(ce,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(ze,ye)}catch(xe){ye(xe)}finally{ae.T=se}},Ce.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},Ce.use=function(P){return ae.H.use(P)},Ce.useActionState=function(P,se,ce){return ae.H.useActionState(P,se,ce)},Ce.useCallback=function(P,se){return ae.H.useCallback(P,se)},Ce.useContext=function(P){return ae.H.useContext(P)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(P,se){return ae.H.useDeferredValue(P,se)},Ce.useEffect=function(P,se,ce){var oe=ae.H;if(typeof ce=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return oe.useEffect(P,se)},Ce.useId=function(){return ae.H.useId()},Ce.useImperativeHandle=function(P,se,ce){return ae.H.useImperativeHandle(P,se,ce)},Ce.useInsertionEffect=function(P,se){return ae.H.useInsertionEffect(P,se)},Ce.useLayoutEffect=function(P,se){return ae.H.useLayoutEffect(P,se)},Ce.useMemo=function(P,se){return ae.H.useMemo(P,se)},Ce.useOptimistic=function(P,se){return ae.H.useOptimistic(P,se)},Ce.useReducer=function(P,se,ce){return ae.H.useReducer(P,se,ce)},Ce.useRef=function(P){return ae.H.useRef(P)},Ce.useState=function(P){return ae.H.useState(P)},Ce.useSyncExternalStore=function(P,se,ce){return ae.H.useSyncExternalStore(P,se,ce)},Ce.useTransition=function(){return ae.H.useTransition()},Ce.version="19.1.1",Ce}var RE;function Xp(){return RE||(RE=1,Ym.exports=AR()),Ym.exports}var B=Xp();const pe=jb(B);var Km={exports:{}},Jl={},Qm={exports:{}},Xm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function SR(){return CE||(CE=1,(function(i){function e(X,ue){var ye=X.length;X.push(ue);e:for(;0<ye;){var ze=ye-1>>>1,P=X[ze];if(0<o(P,ue))X[ze]=ue,X[ye]=P,ye=ze;else break e}}function t(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var ue=X[0],ye=X.pop();if(ye!==ue){X[0]=ye;e:for(var ze=0,P=X.length,se=P>>>1;ze<se;){var ce=2*(ze+1)-1,oe=X[ce],ve=ce+1,xe=X[ve];if(0>o(oe,ye))ve<P&&0>o(xe,oe)?(X[ze]=xe,X[ve]=ye,ze=ve):(X[ze]=oe,X[ce]=ye,ze=ce);else if(ve<P&&0>o(xe,ye))X[ze]=xe,X[ve]=ye,ze=ve;else break e}}return ue}function o(X,ue){var ye=X.sortIndex-ue.sortIndex;return ye!==0?ye:X.id-ue.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();i.unstable_now=function(){return h.now()-m}}var p=[],y=[],v=1,b=null,A=3,R=!1,O=!1,q=!1,V=!1,ee=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ie(X){for(var ue=t(y);ue!==null;){if(ue.callback===null)s(y);else if(ue.startTime<=X)s(y),ue.sortIndex=ue.expirationTime,e(p,ue);else break;ue=t(y)}}function ae(X){if(q=!1,ie(X),!O)if(t(p)!==null)O=!0,re||(re=!0,U());else{var ue=t(y);ue!==null&&dt(ae,ue.startTime-X)}}var re=!1,N=-1,C=5,I=-1;function M(){return V?!0:!(i.unstable_now()-I<C)}function k(){if(V=!1,re){var X=i.unstable_now();I=X;var ue=!0;try{e:{O=!1,q&&(q=!1,K(N),N=-1),R=!0;var ye=A;try{t:{for(ie(X),b=t(p);b!==null&&!(b.expirationTime>X&&M());){var ze=b.callback;if(typeof ze=="function"){b.callback=null,A=b.priorityLevel;var P=ze(b.expirationTime<=X);if(X=i.unstable_now(),typeof P=="function"){b.callback=P,ie(X),ue=!0;break t}b===t(p)&&s(p),ie(X)}else s(p);b=t(p)}if(b!==null)ue=!0;else{var se=t(y);se!==null&&dt(ae,se.startTime-X),ue=!1}}break e}finally{b=null,A=ye,R=!1}ue=void 0}}finally{ue?U():re=!1}}}var U;if(typeof Q=="function")U=function(){Q(k)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,Ft=D.port2;D.port1.onmessage=k,U=function(){Ft.postMessage(null)}}else U=function(){ee(k,0)};function dt(X,ue){N=ee(function(){X(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return A},i.unstable_next=function(X){switch(A){case 1:case 2:case 3:var ue=3;break;default:ue=A}var ye=A;A=ue;try{return X()}finally{A=ye}},i.unstable_requestPaint=function(){V=!0},i.unstable_runWithPriority=function(X,ue){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=A;A=X;try{return ue()}finally{A=ye}},i.unstable_scheduleCallback=function(X,ue,ye){var ze=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?ze+ye:ze):ye=ze,X){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=ye+P,X={id:v++,callback:ue,priorityLevel:X,startTime:ye,expirationTime:P,sortIndex:-1},ye>ze?(X.sortIndex=ye,e(y,X),t(p)===null&&X===t(y)&&(q?(K(N),N=-1):q=!0,dt(ae,ye-ze))):(X.sortIndex=P,e(p,X),O||R||(O=!0,re||(re=!0,U()))),X},i.unstable_shouldYield=M,i.unstable_wrapCallback=function(X){var ue=A;return function(){var ye=A;A=ue;try{return X.apply(this,arguments)}finally{A=ye}}}})(Xm)),Xm}var IE;function RR(){return IE||(IE=1,Qm.exports=SR()),Qm.exports}var Wm={exports:{}},nn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xE;function CR(){if(xE)return nn;xE=1;var i=Xp();function e(p){var y="https://react.dev/errors/"+p;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)y+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,y,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:y,implementation:v}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,y){if(p==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(p,y){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(p,y,null,v)},nn.flushSync=function(p){var y=h.T,v=s.p;try{if(h.T=null,s.p=2,p)return p()}finally{h.T=y,s.p=v,s.d.f()}},nn.preconnect=function(p,y){typeof p=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(p,y))},nn.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},nn.preinit=function(p,y){if(typeof p=="string"&&y&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin),A=typeof y.integrity=="string"?y.integrity:void 0,R=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;v==="style"?s.d.S(p,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:b,integrity:A,fetchPriority:R}):v==="script"&&s.d.X(p,{crossOrigin:b,integrity:A,fetchPriority:R,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},nn.preinitModule=function(p,y){if(typeof p=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var v=m(y.as,y.crossOrigin);s.d.M(p,{crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(p)},nn.preload=function(p,y){if(typeof p=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var v=y.as,b=m(v,y.crossOrigin);s.d.L(p,v,{crossOrigin:b,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},nn.preloadModule=function(p,y){if(typeof p=="string")if(y){var v=m(y.as,y.crossOrigin);s.d.m(p,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:v,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(p)},nn.requestFormReset=function(p){s.d.r(p)},nn.unstable_batchedUpdates=function(p,y){return p(y)},nn.useFormState=function(p,y,v){return h.H.useFormState(p,y,v)},nn.useFormStatus=function(){return h.H.useHostTransitionStatus()},nn.version="19.1.1",nn}var NE;function IR(){if(NE)return Wm.exports;NE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Wm.exports=CR(),Wm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DE;function xR(){if(DE)return Jl;DE=1;var i=RR(),e=Xp(),t=IR();function s(n){var r="https://react.dev/errors/"+n;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+n+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function u(n){var r=n,a=n;if(n.alternate)for(;r.return;)r=r.return;else{n=r;do r=n,(r.flags&4098)!==0&&(a=r.return),n=r.return;while(n)}return r.tag===3?a:null}function h(n){if(n.tag===13){var r=n.memoizedState;if(r===null&&(n=n.alternate,n!==null&&(r=n.memoizedState)),r!==null)return r.dehydrated}return null}function m(n){if(u(n)!==n)throw Error(s(188))}function p(n){var r=n.alternate;if(!r){if(r=u(n),r===null)throw Error(s(188));return r!==n?null:n}for(var a=n,l=r;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return m(d),n;if(g===l)return m(d),r;g=g.sibling}throw Error(s(188))}if(a.return!==l.return)a=d,l=g;else{for(var T=!1,w=d.child;w;){if(w===a){T=!0,a=d,l=g;break}if(w===l){T=!0,l=d,a=g;break}w=w.sibling}if(!T){for(w=g.child;w;){if(w===a){T=!0,a=g,l=d;break}if(w===l){T=!0,l=g,a=d;break}w=w.sibling}if(!T)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?n:r}function y(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n;for(n=n.child;n!==null;){if(r=y(n),r!==null)return r;n=n.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),K=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ie=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(n){return n===null||typeof n!="object"?null:(n=k&&n[k]||n["@@iterator"],typeof n=="function"?n:null)}var D=Symbol.for("react.client.reference");function Ft(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===D?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case O:return"Fragment";case V:return"Profiler";case q:return"StrictMode";case ae:return"Suspense";case re:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case R:return"Portal";case Q:return(n.displayName||"Context")+".Provider";case K:return(n._context.displayName||"Context")+".Consumer";case ie:var r=n.render;return n=n.displayName,n||(n=r.displayName||r.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case N:return r=n.displayName||null,r!==null?r:Ft(n.type)||"Memo";case C:r=n._payload,n=n._init;try{return Ft(n(r))}catch{}}return null}var dt=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},ze=[],P=-1;function se(n){return{current:n}}function ce(n){0>P||(n.current=ze[P],ze[P]=null,P--)}function oe(n,r){P++,ze[P]=n.current,n.current=r}var ve=se(null),xe=se(null),Ae=se(null),Vt=se(null);function it(n,r){switch(oe(Ae,r),oe(xe,n),oe(ve,null),r.nodeType){case 9:case 11:n=(n=r.documentElement)&&(n=n.namespaceURI)?Wv(n):0;break;default:if(n=r.tagName,r=r.namespaceURI)r=Wv(r),n=Zv(r,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ce(ve),oe(ve,n)}function mi(){ce(ve),ce(xe),ce(Ae)}function Cr(n){n.memoizedState!==null&&oe(Vt,n);var r=ve.current,a=Zv(r,n.type);r!==a&&(oe(xe,n),oe(ve,a))}function qi(n){xe.current===n&&(ce(ve),ce(xe)),Vt.current===n&&(ce(Vt),Yl._currentValue=ye)}var ws=Object.prototype.hasOwnProperty,As=i.unstable_scheduleCallback,Ss=i.unstable_cancelCallback,Fo=i.unstable_shouldYield,Wu=i.unstable_requestPaint,Ln=i.unstable_now,Gd=i.unstable_getCurrentPriorityLevel,Go=i.unstable_ImmediatePriority,wa=i.unstable_UserBlockingPriority,Rs=i.unstable_NormalPriority,$d=i.unstable_LowPriority,Aa=i.unstable_IdlePriority,$o=i.log,Zu=i.unstable_setDisableYieldValue,ft=null,Ye=null;function Rn(n){if(typeof $o=="function"&&Zu(n),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(ft,n)}catch{}}var en=Math.clz32?Math.clz32:Cs,Ju=Math.log,Yd=Math.LN2;function Cs(n){return n>>>=0,n===0?32:31-(Ju(n)/Yd|0)|0}var Is=256,xs=4194304;function ti(n){var r=n&42;if(r!==0)return r;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function Sa(n,r,a){var l=n.pendingLanes;if(l===0)return 0;var d=0,g=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var w=l&134217727;return w!==0?(l=w&~g,l!==0?d=ti(l):(T&=w,T!==0?d=ti(T):a||(a=w&~n,a!==0&&(d=ti(a))))):(w=l&~g,w!==0?d=ti(w):T!==0?d=ti(T):a||(a=l&~n,a!==0&&(d=ti(a)))),d===0?0:r!==0&&r!==d&&(r&g)===0&&(g=d&-d,a=r&-r,g>=a||g===32&&(a&4194048)!==0)?r:d}function Ns(n,r){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&r)===0}function Yo(n,r){switch(n){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var n=Is;return Is<<=1,(Is&4194048)===0&&(Is=256),n}function Qo(){var n=xs;return xs<<=1,(xs&62914560)===0&&(xs=4194304),n}function Hi(n){for(var r=[],a=0;31>a;a++)r.push(n);return r}function Fi(n,r){n.pendingLanes|=r,r!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Xo(n,r,a,l,d,g){var T=n.pendingLanes;n.pendingLanes=a,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=a,n.entangledLanes&=a,n.errorRecoveryDisabledLanes&=a,n.shellSuspendCounter=0;var w=n.entanglements,x=n.expirationTimes,F=n.hiddenUpdates;for(a=T&~a;0<a;){var W=31-en(a),te=1<<W;w[W]=0,x[W]=-1;var G=F[W];if(G!==null)for(F[W]=null,W=0;W<G.length;W++){var $=G[W];$!==null&&($.lane&=-536870913)}a&=~te}l!==0&&pi(n,l,0),g!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=g&~(T&~r))}function pi(n,r,a){n.pendingLanes|=r,n.suspendedLanes&=~r;var l=31-en(r);n.entangledLanes|=r,n.entanglements[l]=n.entanglements[l]|1073741824|a&4194090}function Wo(n,r){var a=n.entangledLanes|=r;for(n=n.entanglements;a;){var l=31-en(a),d=1<<l;d&r|n[l]&r&&(n[l]|=r),a&=~d}}function Ir(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ra(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function xr(){var n=ue.p;return n!==0?n:(n=window.event,n===void 0?32:yE(n.type))}function ec(n,r){var a=ue.p;try{return ue.p=n,r()}finally{ue.p=a}}var ot=Math.random().toString(36).slice(2),Dt="__reactFiber$"+ot,wt="__reactProps$"+ot,Un="__reactContainer$"+ot,Zo="__reactEvents$"+ot,Kd="__reactListeners$"+ot,Nr="__reactHandles$"+ot,tc="__reactResources$"+ot,Ds="__reactMarker$"+ot;function Dr(n){delete n[Dt],delete n[wt],delete n[Zo],delete n[Kd],delete n[Nr]}function Gi(n){var r=n[Dt];if(r)return r;for(var a=n.parentNode;a;){if(r=a[Un]||a[Dt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(n=nE(n);n!==null;){if(a=n[Dt])return a;n=nE(n)}return r}n=a,a=n.parentNode}return null}function gi(n){if(n=n[Dt]||n[Un]){var r=n.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return n}return null}function yi(n){var r=n.tag;if(r===5||r===26||r===27||r===6)return n.stateNode;throw Error(s(33))}function dn(n){var r=n[tc];return r||(r=n[tc]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function vt(n){n[Ds]=!0}var Jo=new Set,Ca={};function ni(n,r){$i(n,r),$i(n+"Capture",r)}function $i(n,r){for(Ca[n]=r,n=0;n<r.length;n++)Jo.add(r[n])}var nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ic={},Os={};function rc(n){return ws.call(Os,n)?!0:ws.call(ic,n)?!1:nc.test(n)?Os[n]=!0:(ic[n]=!0,!1)}function Or(n,r,a){if(rc(r))if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":n.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){n.removeAttribute(r);return}}n.setAttribute(r,""+a)}}function _i(n,r,a){if(a===null)n.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttribute(r,""+a)}}function Gt(n,r,a,l){if(l===null)n.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttributeNS(r,a,""+l)}}var Ps,sc;function Yi(n){if(Ps===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Ps=r&&r[1]||"",sc=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ps+n+sc}var Ia=!1;function xa(n,r){if(!n||Ia)return"";Ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var te=function(){throw Error()};if(Object.defineProperty(te.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(te,[])}catch($){var G=$}Reflect.construct(n,[],te)}else{try{te.call()}catch($){G=$}n.call(te.prototype)}}else{try{throw Error()}catch($){G=$}(te=n())&&typeof te.catch=="function"&&te.catch(function(){})}}catch($){if($&&G&&typeof $.stack=="string")return[$.stack,G.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),T=g[0],w=g[1];if(T&&w){var x=T.split(`
`),F=w.split(`
`);for(d=l=0;l<x.length&&!x[l].includes("DetermineComponentFrameRoot");)l++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(l===x.length||d===F.length)for(l=x.length-1,d=F.length-1;1<=l&&0<=d&&x[l]!==F[d];)d--;for(;1<=l&&0<=d;l--,d--)if(x[l]!==F[d]){if(l!==1||d!==1)do if(l--,d--,0>d||x[l]!==F[d]){var W=`
`+x[l].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=l&&0<=d);break}}}finally{Ia=!1,Error.prepareStackTrace=a}return(a=n?n.displayName||n.name:"")?Yi(a):""}function el(n){switch(n.tag){case 26:case 27:case 5:return Yi(n.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 15:return xa(n.type,!1);case 11:return xa(n.type.render,!1);case 1:return xa(n.type,!0);case 31:return Yi("Activity");default:return""}}function Na(n){try{var r="";do r+=el(n),n=n.return;while(n);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function fn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function tl(n){var r=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qd(n){var r=tl(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,r),l=""+n[r];if(!n.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(n,r,{configurable:!0,get:function(){return d.call(this)},set:function(T){l=""+T,g.call(this,T)}}),Object.defineProperty(n,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){n._valueTracker=null,delete n[r]}}}}function Da(n){n._valueTracker||(n._valueTracker=Qd(n))}function nl(n){if(!n)return!1;var r=n._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return n&&(l=tl(n)?n.checked?"true":"false":n.value),n=l,n!==a?(r.setValue(n),!0):!1}function js(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Xd=/[\n"\\]/g;function At(n){return n.replace(Xd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Cn(n,r,a,l,d,g,T,w){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),r!=null?T==="number"?(r===0&&n.value===""||n.value!=r)&&(n.value=""+fn(r)):n.value!==""+fn(r)&&(n.value=""+fn(r)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),r!=null?Pr(n,T,fn(r)):a!=null?Pr(n,T,fn(a)):l!=null&&n.removeAttribute("value"),d==null&&g!=null&&(n.defaultChecked=!!g),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+fn(w):n.removeAttribute("name")}function Ms(n,r,a,l,d,g,T,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),r!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;a=a!=null?""+fn(a):"",r=r!=null?""+fn(r):a,w||r===n.value||(n.value=r),n.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,n.checked=w?n.checked:!!l,n.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T)}function Pr(n,r,a){r==="number"&&js(n.ownerDocument)===n||n.defaultValue===""+a||(n.defaultValue=""+a)}function Ki(n,r,a,l){if(n=n.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<n.length;a++)d=r.hasOwnProperty("$"+n[a].value),n[a].selected!==d&&(n[a].selected=d),d&&l&&(n[a].defaultSelected=!0)}else{for(a=""+fn(a),r=null,d=0;d<n.length;d++){if(n[d].value===a){n[d].selected=!0,l&&(n[d].defaultSelected=!0);return}r!==null||n[d].disabled||(r=n[d])}r!==null&&(r.selected=!0)}}function Ze(n,r,a){if(r!=null&&(r=""+fn(r),r!==n.value&&(n.value=r),a==null)){n.defaultValue!==r&&(n.defaultValue=r);return}n.defaultValue=a!=null?""+fn(a):""}function ks(n,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(dt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=fn(r),n.defaultValue=a,l=n.textContent,l===a&&l!==""&&l!==null&&(n.value=l)}function Bn(n,r){if(r){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=r;return}}n.textContent=r}var Vs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ac(n,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?n.setProperty(r,""):r==="float"?n.cssFloat="":n[r]="":l?n.setProperty(r,a):typeof a!="number"||a===0||Vs.has(r)?r==="float"?n.cssFloat=a:n[r]=(""+a).trim():n[r]=a+"px"}function il(n,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(n=n.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&ac(n,d,l)}else for(var g in r)r.hasOwnProperty(g)&&ac(n,g,r[g])}function rl(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Zd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oa(n){return Zd.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Qi=null;function zn(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Xi=null,Wi=null;function sl(n){var r=gi(n);if(r&&(n=r.stateNode)){var a=n[wt]||null;e:switch(n=r.stateNode,r.type){case"input":if(Cn(n,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+At(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==n&&l.form===n.form){var d=l[wt]||null;if(!d)throw Error(s(90));Cn(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===n.form&&nl(l)}break e;case"textarea":Ze(n,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Ki(n,!!a.multiple,r,!1)}}}var vi=!1;function oc(n,r,a){if(vi)return n(r,a);vi=!0;try{var l=n(r);return l}finally{if(vi=!1,(Xi!==null||Wi!==null)&&(eh(),Xi&&(r=Xi,n=Wi,Wi=Xi=null,sl(r),n)))for(r=0;r<n.length;r++)sl(n[r])}}function Ls(n,r){var a=n.stateNode;if(a===null)return null;var l=a[wt]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(n=n.type,l=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!l;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ii=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qn=!1;if(ii)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){qn=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{qn=!1}var Ei=null,jr=null,Zi=null;function al(){if(Zi)return Zi;var n,r=jr,a=r.length,l,d="value"in Ei?Ei.value:Ei.textContent,g=d.length;for(n=0;n<a&&r[n]===d[n];n++);var T=a-n;for(l=1;l<=T&&r[a-l]===d[g-l];l++);return Zi=d.slice(n,1<l?1-l:void 0)}function Ti(n){var r=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&r===13&&(n=13)):n=r,n===10&&(n=13),32<=n||n===13?n:0}function bi(){return!0}function ol(){return!1}function Lt(n){function r(a,l,d,g,T){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=g,this.target=T,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(a=n[w],this[w]=a?a(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?bi:ol,this.isPropagationStopped=ol,this}return v(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),r}var Ge={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pa=Lt(Ge),Bs=v({},Ge,{view:0,detail:0}),lc=Lt(Bs),ja,Ma,wi,zs=v({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==wi&&(wi&&n.type==="mousemove"?(ja=n.screenX-wi.screenX,Ma=n.screenY-wi.screenY):Ma=ja=0,wi=n),ja)},movementY:function(n){return"movementY"in n?n.movementY:Ma}}),Hn=Lt(zs),uc=v({},zs,{dataTransfer:0}),Jd=Lt(uc),qs=v({},Bs,{relatedTarget:0}),ka=Lt(qs),ll=v({},Ge,{animationName:0,elapsedTime:0,pseudoElement:0}),Va=Lt(ll),cc=v({},Ge,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),La=Lt(cc),ef=v({},Ge,{data:0}),ul=Lt(ef),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cl(n){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(n):(n=dc[n])?!!r[n]:!1}function Fs(){return cl}var fc=v({},Bs,{key:function(n){if(n.key){var r=Hs[n.key]||n.key;if(r!=="Unidentified")return r}return n.type==="keypress"?(n=Ti(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?hc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fs,charCode:function(n){return n.type==="keypress"?Ti(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ti(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ua=Lt(fc),mc=v({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hl=Lt(mc),Ji=v({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fs}),pc=Lt(Ji),gc=v({},Ge,{propertyName:0,elapsedTime:0,pseudoElement:0}),yc=Lt(gc),_c=v({},zs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Ba=Lt(_c),mn=v({},Ge,{newState:0,oldState:0}),vc=Lt(mn),Ec=[9,13,27,32],Ai=ii&&"CompositionEvent"in window,c=null;ii&&"documentMode"in document&&(c=document.documentMode);var _=ii&&"TextEvent"in window&&!c,E=ii&&(!Ai||c&&8<c&&11>=c),S=" ",z=!1;function Y(n,r){switch(n){case"keyup":return Ec.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function le(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var ke=!1;function Ot(n,r){switch(n){case"compositionend":return le(r);case"keypress":return r.which!==32?null:(z=!0,S);case"textInput":return n=r.data,n===S&&z?null:n;default:return null}}function Ve(n,r){if(ke)return n==="compositionend"||!Ai&&Y(n,r)?(n=al(),Zi=jr=Ei=null,ke=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pt(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r==="input"?!!Ut[n.type]:r==="textarea"}function er(n,r,a,l){Xi?Wi?Wi.push(l):Wi=[l]:Xi=l,r=ah(r,"onChange"),0<r.length&&(a=new Pa("onChange","change",null,a,l),n.push({event:a,listeners:r}))}var $t=null,Si=null;function dl(n){$v(n,0)}function Tc(n){var r=yi(n);if(nl(r))return n}function fy(n,r){if(n==="change")return r}var my=!1;if(ii){var tf;if(ii){var nf="oninput"in document;if(!nf){var py=document.createElement("div");py.setAttribute("oninput","return;"),nf=typeof py.oninput=="function"}tf=nf}else tf=!1;my=tf&&(!document.documentMode||9<document.documentMode)}function gy(){$t&&($t.detachEvent("onpropertychange",yy),Si=$t=null)}function yy(n){if(n.propertyName==="value"&&Tc(Si)){var r=[];er(r,Si,n,zn(n)),oc(dl,r)}}function ZA(n,r,a){n==="focusin"?(gy(),$t=r,Si=a,$t.attachEvent("onpropertychange",yy)):n==="focusout"&&gy()}function JA(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tc(Si)}function eS(n,r){if(n==="click")return Tc(r)}function tS(n,r){if(n==="input"||n==="change")return Tc(r)}function nS(n,r){return n===r&&(n!==0||1/n===1/r)||n!==n&&r!==r}var In=typeof Object.is=="function"?Object.is:nS;function fl(n,r){if(In(n,r))return!0;if(typeof n!="object"||n===null||typeof r!="object"||r===null)return!1;var a=Object.keys(n),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!ws.call(r,d)||!In(n[d],r[d]))return!1}return!0}function _y(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function vy(n,r){var a=_y(n);n=0;for(var l;a;){if(a.nodeType===3){if(l=n+a.textContent.length,n<=r&&l>=r)return{node:a,offset:r-n};n=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=_y(a)}}function Ey(n,r){return n&&r?n===r?!0:n&&n.nodeType===3?!1:r&&r.nodeType===3?Ey(n,r.parentNode):"contains"in n?n.contains(r):n.compareDocumentPosition?!!(n.compareDocumentPosition(r)&16):!1:!1}function Ty(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var r=js(n.document);r instanceof n.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)n=r.contentWindow;else break;r=js(n.document)}return r}function rf(n){var r=n&&n.nodeName&&n.nodeName.toLowerCase();return r&&(r==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||r==="textarea"||n.contentEditable==="true")}var iS=ii&&"documentMode"in document&&11>=document.documentMode,za=null,sf=null,ml=null,af=!1;function by(n,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;af||za==null||za!==js(l)||(l=za,"selectionStart"in l&&rf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),ml&&fl(ml,l)||(ml=l,l=ah(sf,"onSelect"),0<l.length&&(r=new Pa("onSelect","select",null,r,a),n.push({event:r,listeners:l}),r.target=za)))}function Gs(n,r){var a={};return a[n.toLowerCase()]=r.toLowerCase(),a["Webkit"+n]="webkit"+r,a["Moz"+n]="moz"+r,a}var qa={animationend:Gs("Animation","AnimationEnd"),animationiteration:Gs("Animation","AnimationIteration"),animationstart:Gs("Animation","AnimationStart"),transitionrun:Gs("Transition","TransitionRun"),transitionstart:Gs("Transition","TransitionStart"),transitioncancel:Gs("Transition","TransitionCancel"),transitionend:Gs("Transition","TransitionEnd")},of={},wy={};ii&&(wy=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function $s(n){if(of[n])return of[n];if(!qa[n])return n;var r=qa[n],a;for(a in r)if(r.hasOwnProperty(a)&&a in wy)return of[n]=r[a];return n}var Ay=$s("animationend"),Sy=$s("animationiteration"),Ry=$s("animationstart"),rS=$s("transitionrun"),sS=$s("transitionstart"),aS=$s("transitioncancel"),Cy=$s("transitionend"),Iy=new Map,lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");lf.push("scrollEnd");function ri(n,r){Iy.set(n,r),ni(r,[n])}var xy=new WeakMap;function Fn(n,r){if(typeof n=="object"&&n!==null){var a=xy.get(n);return a!==void 0?a:(r={value:n,source:r,stack:Na(r)},xy.set(n,r),r)}return{value:n,source:r,stack:Na(r)}}var Gn=[],Ha=0,uf=0;function bc(){for(var n=Ha,r=uf=Ha=0;r<n;){var a=Gn[r];Gn[r++]=null;var l=Gn[r];Gn[r++]=null;var d=Gn[r];Gn[r++]=null;var g=Gn[r];if(Gn[r++]=null,l!==null&&d!==null){var T=l.pending;T===null?d.next=d:(d.next=T.next,T.next=d),l.pending=d}g!==0&&Ny(a,d,g)}}function wc(n,r,a,l){Gn[Ha++]=n,Gn[Ha++]=r,Gn[Ha++]=a,Gn[Ha++]=l,uf|=l,n.lanes|=l,n=n.alternate,n!==null&&(n.lanes|=l)}function cf(n,r,a,l){return wc(n,r,a,l),Ac(n)}function Fa(n,r){return wc(n,null,null,r),Ac(n)}function Ny(n,r,a){n.lanes|=a;var l=n.alternate;l!==null&&(l.lanes|=a);for(var d=!1,g=n.return;g!==null;)g.childLanes|=a,l=g.alternate,l!==null&&(l.childLanes|=a),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(d=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,d&&r!==null&&(d=31-en(a),n=g.hiddenUpdates,l=n[d],l===null?n[d]=[r]:l.push(r),r.lane=a|536870912),g):null}function Ac(n){if(50<Ul)throw Ul=0,gm=null,Error(s(185));for(var r=n.return;r!==null;)n=r,r=n.return;return n.tag===3?n.stateNode:null}var Ga={};function oS(n,r,a,l){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(n,r,a,l){return new oS(n,r,a,l)}function hf(n){return n=n.prototype,!(!n||!n.isReactComponent)}function tr(n,r){var a=n.alternate;return a===null?(a=xn(n.tag,r,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=r,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&65011712,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,r=n.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a.refCleanup=n.refCleanup,a}function Dy(n,r){n.flags&=65011714;var a=n.alternate;return a===null?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=a.childLanes,n.lanes=a.lanes,n.child=a.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=a.memoizedProps,n.memoizedState=a.memoizedState,n.updateQueue=a.updateQueue,n.type=a.type,r=a.dependencies,n.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),n}function Sc(n,r,a,l,d,g){var T=0;if(l=n,typeof n=="function")hf(n)&&(T=1);else if(typeof n=="string")T=uR(n,a,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=xn(31,a,r,d),n.elementType=I,n.lanes=g,n;case O:return Ys(a.children,d,g,r);case q:T=8,d|=24;break;case V:return n=xn(12,a,r,d|2),n.elementType=V,n.lanes=g,n;case ae:return n=xn(13,a,r,d),n.elementType=ae,n.lanes=g,n;case re:return n=xn(19,a,r,d),n.elementType=re,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ee:case Q:T=10;break e;case K:T=9;break e;case ie:T=11;break e;case N:T=14;break e;case C:T=16,l=null;break e}T=29,a=Error(s(130,n===null?"null":typeof n,"")),l=null}return r=xn(T,a,r,d),r.elementType=n,r.type=l,r.lanes=g,r}function Ys(n,r,a,l){return n=xn(7,n,l,r),n.lanes=a,n}function df(n,r,a){return n=xn(6,n,null,r),n.lanes=a,n}function ff(n,r,a){return r=xn(4,n.children!==null?n.children:[],n.key,r),r.lanes=a,r.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},r}var $a=[],Ya=0,Rc=null,Cc=0,$n=[],Yn=0,Ks=null,nr=1,ir="";function Qs(n,r){$a[Ya++]=Cc,$a[Ya++]=Rc,Rc=n,Cc=r}function Oy(n,r,a){$n[Yn++]=nr,$n[Yn++]=ir,$n[Yn++]=Ks,Ks=n;var l=nr;n=ir;var d=32-en(l)-1;l&=~(1<<d),a+=1;var g=32-en(r)+d;if(30<g){var T=d-d%5;g=(l&(1<<T)-1).toString(32),l>>=T,d-=T,nr=1<<32-en(r)+d|a<<d|l,ir=g+n}else nr=1<<g|a<<d|l,ir=n}function mf(n){n.return!==null&&(Qs(n,1),Oy(n,1,0))}function pf(n){for(;n===Rc;)Rc=$a[--Ya],$a[Ya]=null,Cc=$a[--Ya],$a[Ya]=null;for(;n===Ks;)Ks=$n[--Yn],$n[Yn]=null,ir=$n[--Yn],$n[Yn]=null,nr=$n[--Yn],$n[Yn]=null}var pn=null,mt=null,qe=!1,Xs=null,Ri=!1,gf=Error(s(519));function Ws(n){var r=Error(s(418,""));throw yl(Fn(r,n)),gf}function Py(n){var r=n.stateNode,a=n.type,l=n.memoizedProps;switch(r[Dt]=n,r[wt]=l,a){case"dialog":Oe("cancel",r),Oe("close",r);break;case"iframe":case"object":case"embed":Oe("load",r);break;case"video":case"audio":for(a=0;a<zl.length;a++)Oe(zl[a],r);break;case"source":Oe("error",r);break;case"img":case"image":case"link":Oe("error",r),Oe("load",r);break;case"details":Oe("toggle",r);break;case"input":Oe("invalid",r),Ms(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),Da(r);break;case"select":Oe("invalid",r);break;case"textarea":Oe("invalid",r),ks(r,l.value,l.defaultValue,l.children),Da(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Xv(r.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",r),Oe("toggle",r)),l.onScroll!=null&&Oe("scroll",r),l.onScrollEnd!=null&&Oe("scrollend",r),l.onClick!=null&&(r.onclick=oh),r=!0):r=!1,r||Ws(n)}function jy(n){for(pn=n.return;pn;)switch(pn.tag){case 5:case 13:Ri=!1;return;case 27:case 3:Ri=!0;return;default:pn=pn.return}}function pl(n){if(n!==pn)return!1;if(!qe)return jy(n),qe=!0,!1;var r=n.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=n.type,a=!(a!=="form"&&a!=="button")||Om(n.type,n.memoizedProps)),a=!a),a&&mt&&Ws(n),jy(n),r===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));e:{for(n=n.nextSibling,r=0;n;){if(n.nodeType===8)if(a=n.data,a==="/$"){if(r===0){mt=ai(n.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;n=n.nextSibling}mt=null}}else r===27?(r=mt,Xr(n.type)?(n=km,km=null,mt=n):mt=r):mt=pn?ai(n.stateNode.nextSibling):null;return!0}function gl(){mt=pn=null,qe=!1}function My(){var n=Xs;return n!==null&&(vn===null?vn=n:vn.push.apply(vn,n),Xs=null),n}function yl(n){Xs===null?Xs=[n]:Xs.push(n)}var yf=se(null),Zs=null,rr=null;function Mr(n,r,a){oe(yf,r._currentValue),r._currentValue=a}function sr(n){n._currentValue=yf.current,ce(yf)}function _f(n,r,a){for(;n!==null;){var l=n.alternate;if((n.childLanes&r)!==r?(n.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),n===a)break;n=n.return}}function vf(n,r,a,l){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var g=d.dependencies;if(g!==null){var T=d.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=d;for(var x=0;x<r.length;x++)if(w.context===r[x]){g.lanes|=a,w=g.alternate,w!==null&&(w.lanes|=a),_f(g.return,a,n),l||(T=null);break e}g=w.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(s(341));T.lanes|=a,g=T.alternate,g!==null&&(g.lanes|=a),_f(T,a,n),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===n){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function _l(n,r,a,l){n=null;for(var d=r,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=d.type;In(d.pendingProps.value,T.value)||(n!==null?n.push(w):n=[w])}}else if(d===Vt.current){if(T=d.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(Yl):n=[Yl])}d=d.return}n!==null&&vf(r,n,a,l),r.flags|=262144}function Ic(n){for(n=n.firstContext;n!==null;){if(!In(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Js(n){Zs=n,rr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function tn(n){return ky(Zs,n)}function xc(n,r){return Zs===null&&Js(n),ky(n,r)}function ky(n,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},rr===null){if(n===null)throw Error(s(308));rr=r,n.dependencies={lanes:0,firstContext:r},n.flags|=524288}else rr=rr.next=r;return a}var lS=typeof AbortController<"u"?AbortController:function(){var n=[],r=this.signal={aborted:!1,addEventListener:function(a,l){n.push(l)}};this.abort=function(){r.aborted=!0,n.forEach(function(a){return a()})}},uS=i.unstable_scheduleCallback,cS=i.unstable_NormalPriority,jt={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ef(){return{controller:new lS,data:new Map,refCount:0}}function vl(n){n.refCount--,n.refCount===0&&uS(cS,function(){n.controller.abort()})}var El=null,Tf=0,Ka=0,Qa=null;function hS(n,r){if(El===null){var a=El=[];Tf=0,Ka=wm(),Qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Tf++,r.then(Vy,Vy),r}function Vy(){if(--Tf===0&&El!==null){Qa!==null&&(Qa.status="fulfilled");var n=El;El=null,Ka=0,Qa=null;for(var r=0;r<n.length;r++)(0,n[r])()}}function dS(n,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return n.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var Ly=X.S;X.S=function(n,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&hS(n,r),Ly!==null&&Ly(n,r)};var ea=se(null);function bf(){var n=ea.current;return n!==null?n:rt.pooledCache}function Nc(n,r){r===null?oe(ea,ea.current):oe(ea,r.pool)}function Uy(){var n=bf();return n===null?null:{parent:jt._currentValue,pool:n}}var Tl=Error(s(460)),By=Error(s(474)),Dc=Error(s(542)),wf={then:function(){}};function zy(n){return n=n.status,n==="fulfilled"||n==="rejected"}function Oc(){}function qy(n,r,a){switch(a=n[a],a===void 0?n.push(r):a!==r&&(r.then(Oc,Oc),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Fy(n),n;default:if(typeof r.status=="string")r.then(Oc,Oc);else{if(n=rt,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=r,n.status="pending",n.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw n=r.reason,Fy(n),n}throw bl=r,Tl}}var bl=null;function Hy(){if(bl===null)throw Error(s(459));var n=bl;return bl=null,n}function Fy(n){if(n===Tl||n===Dc)throw Error(s(483))}var kr=!1;function Af(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sf(n,r){n=n.updateQueue,r.updateQueue===n&&(r.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Vr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Lr(n,r,a){var l=n.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=Ac(n),Ny(n,null,a),r}return wc(n,l,r,a),Ac(n)}function wl(n,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Wo(n,a)}}function Rf(n,r){var a=n.updateQueue,l=n.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var T={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=T:g=g.next=T,a=a.next}while(a!==null);g===null?d=g=r:g=g.next=r}else d=g=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=r:n.next=r,a.lastBaseUpdate=r}var Cf=!1;function Al(){if(Cf){var n=Qa;if(n!==null)throw n}}function Sl(n,r,a,l){Cf=!1;var d=n.updateQueue;kr=!1;var g=d.firstBaseUpdate,T=d.lastBaseUpdate,w=d.shared.pending;if(w!==null){d.shared.pending=null;var x=w,F=x.next;x.next=null,T===null?g=F:T.next=F,T=x;var W=n.alternate;W!==null&&(W=W.updateQueue,w=W.lastBaseUpdate,w!==T&&(w===null?W.firstBaseUpdate=F:w.next=F,W.lastBaseUpdate=x))}if(g!==null){var te=d.baseState;T=0,W=F=x=null,w=g;do{var G=w.lane&-536870913,$=G!==w.lane;if($?(Le&G)===G:(l&G)===G){G!==0&&G===Ka&&(Cf=!0),W!==null&&(W=W.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var we=n,Ee=w;G=r;var tt=a;switch(Ee.tag){case 1:if(we=Ee.payload,typeof we=="function"){te=we.call(tt,te,G);break e}te=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ee.payload,G=typeof we=="function"?we.call(tt,te,G):we,G==null)break e;te=v({},te,G);break e;case 2:kr=!0}}G=w.callback,G!==null&&(n.flags|=64,$&&(n.flags|=8192),$=d.callbacks,$===null?d.callbacks=[G]:$.push(G))}else $={lane:G,tag:w.tag,payload:w.payload,callback:w.callback,next:null},W===null?(F=W=$,x=te):W=W.next=$,T|=G;if(w=w.next,w===null){if(w=d.shared.pending,w===null)break;$=w,w=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);W===null&&(x=te),d.baseState=x,d.firstBaseUpdate=F,d.lastBaseUpdate=W,g===null&&(d.shared.lanes=0),$r|=T,n.lanes=T,n.memoizedState=te}}function Gy(n,r){if(typeof n!="function")throw Error(s(191,n));n.call(r)}function $y(n,r){var a=n.callbacks;if(a!==null)for(n.callbacks=null,n=0;n<a.length;n++)Gy(a[n],r)}var Xa=se(null),Pc=se(0);function Yy(n,r){n=dr,oe(Pc,n),oe(Xa,r),dr=n|r.baseLanes}function If(){oe(Pc,dr),oe(Xa,Xa.current)}function xf(){dr=Pc.current,ce(Xa),ce(Pc)}var Ur=0,Ie=null,Je=null,St=null,jc=!1,Wa=!1,ta=!1,Mc=0,Rl=0,Za=null,fS=0;function Et(){throw Error(s(321))}function Nf(n,r){if(r===null)return!1;for(var a=0;a<r.length&&a<n.length;a++)if(!In(n[a],r[a]))return!1;return!0}function Df(n,r,a,l,d,g){return Ur=g,Ie=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=n===null||n.memoizedState===null?N_:D_,ta=!1,g=a(l,d),ta=!1,Wa&&(g=Qy(r,a,l,d)),Ky(n),g}function Ky(n){X.H=zc;var r=Je!==null&&Je.next!==null;if(Ur=0,St=Je=Ie=null,jc=!1,Rl=0,Za=null,r)throw Error(s(300));n===null||Bt||(n=n.dependencies,n!==null&&Ic(n)&&(Bt=!0))}function Qy(n,r,a,l){Ie=n;var d=0;do{if(Wa&&(Za=null),Rl=0,Wa=!1,25<=d)throw Error(s(301));if(d+=1,St=Je=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=ES,g=r(a,l)}while(Wa);return g}function mS(){var n=X.H,r=n.useState()[0];return r=typeof r.then=="function"?Cl(r):r,n=n.useState()[0],(Je!==null?Je.memoizedState:null)!==n&&(Ie.flags|=1024),r}function Of(){var n=Mc!==0;return Mc=0,n}function Pf(n,r,a){r.updateQueue=n.updateQueue,r.flags&=-2053,n.lanes&=~a}function jf(n){if(jc){for(n=n.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}jc=!1}Ur=0,St=Je=Ie=null,Wa=!1,Rl=Mc=0,Za=null}function yn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?Ie.memoizedState=St=n:St=St.next=n,St}function Rt(){if(Je===null){var n=Ie.alternate;n=n!==null?n.memoizedState:null}else n=Je.next;var r=St===null?Ie.memoizedState:St.next;if(r!==null)St=r,Je=n;else{if(n===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Je=n,n={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},St===null?Ie.memoizedState=St=n:St=St.next=n}return St}function Mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cl(n){var r=Rl;return Rl+=1,Za===null&&(Za=[]),n=qy(Za,n,r),r=Ie,(St===null?r.memoizedState:St.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?N_:D_),n}function kc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Cl(n);if(n.$$typeof===Q)return tn(n)}throw Error(s(438,String(n)))}function kf(n){var r=null,a=Ie.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Mf(),Ie.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(n),l=0;l<n;l++)a[l]=M;return r.index++,a}function ar(n,r){return typeof r=="function"?r(n):r}function Vc(n){var r=Rt();return Vf(r,Je,n)}function Vf(n,r,a){var l=n.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var d=n.baseQueue,g=l.pending;if(g!==null){if(d!==null){var T=d.next;d.next=g.next,g.next=T}r.baseQueue=d=g,l.pending=null}if(g=n.baseState,d===null)n.memoizedState=g;else{r=d.next;var w=T=null,x=null,F=r,W=!1;do{var te=F.lane&-536870913;if(te!==F.lane?(Le&te)===te:(Ur&te)===te){var G=F.revertLane;if(G===0)x!==null&&(x=x.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),te===Ka&&(W=!0);else if((Ur&G)===G){F=F.next,G===Ka&&(W=!0);continue}else te={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},x===null?(w=x=te,T=g):x=x.next=te,Ie.lanes|=G,$r|=G;te=F.action,ta&&a(g,te),g=F.hasEagerState?F.eagerState:a(g,te)}else G={lane:te,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},x===null?(w=x=G,T=g):x=x.next=G,Ie.lanes|=te,$r|=te;F=F.next}while(F!==null&&F!==r);if(x===null?T=g:x.next=w,!In(g,n.memoizedState)&&(Bt=!0,W&&(a=Qa,a!==null)))throw a;n.memoizedState=g,n.baseState=T,n.baseQueue=x,l.lastRenderedState=g}return d===null&&(l.lanes=0),[n.memoizedState,l.dispatch]}function Lf(n){var r=Rt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=n;var l=a.dispatch,d=a.pending,g=r.memoizedState;if(d!==null){a.pending=null;var T=d=d.next;do g=n(g,T.action),T=T.next;while(T!==d);In(g,r.memoizedState)||(Bt=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,l]}function Xy(n,r,a){var l=Ie,d=Rt(),g=qe;if(g){if(a===void 0)throw Error(s(407));a=a()}else a=r();var T=!In((Je||d).memoizedState,a);T&&(d.memoizedState=a,Bt=!0),d=d.queue;var w=Jy.bind(null,l,d,n);if(Il(2048,8,w,[n]),d.getSnapshot!==r||T||St!==null&&St.memoizedState.tag&1){if(l.flags|=2048,Ja(9,Lc(),Zy.bind(null,l,d,a,r),null),rt===null)throw Error(s(349));g||(Ur&124)!==0||Wy(l,r,a)}return a}function Wy(n,r,a){n.flags|=16384,n={getSnapshot:r,value:a},r=Ie.updateQueue,r===null?(r=Mf(),Ie.updateQueue=r,r.stores=[n]):(a=r.stores,a===null?r.stores=[n]:a.push(n))}function Zy(n,r,a,l){r.value=a,r.getSnapshot=l,e_(r)&&t_(n)}function Jy(n,r,a){return a(function(){e_(r)&&t_(n)})}function e_(n){var r=n.getSnapshot;n=n.value;try{var a=r();return!In(n,a)}catch{return!0}}function t_(n){var r=Fa(n,2);r!==null&&jn(r,n,2)}function Uf(n){var r=yn();if(typeof n=="function"){var a=n;if(n=a(),ta){Rn(!0);try{a()}finally{Rn(!1)}}}return r.memoizedState=r.baseState=n,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:n},r}function n_(n,r,a,l){return n.baseState=a,Vf(n,Je,typeof l=="function"?l:ar)}function pS(n,r,a,l,d){if(Bc(n))throw Error(s(485));if(n=r.action,n!==null){var g={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){g.listeners.push(T)}};X.T!==null?a(!0):g.isTransition=!1,l(g),a=r.pending,a===null?(g.next=r.pending=g,i_(r,g)):(g.next=a.next,r.pending=a.next=g)}}function i_(n,r){var a=r.action,l=r.payload,d=n.state;if(r.isTransition){var g=X.T,T={};X.T=T;try{var w=a(d,l),x=X.S;x!==null&&x(T,w),r_(n,r,w)}catch(F){Bf(n,r,F)}finally{X.T=g}}else try{g=a(d,l),r_(n,r,g)}catch(F){Bf(n,r,F)}}function r_(n,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){s_(n,r,l)},function(l){return Bf(n,r,l)}):s_(n,r,a)}function s_(n,r,a){r.status="fulfilled",r.value=a,a_(r),n.state=a,r=n.pending,r!==null&&(a=r.next,a===r?n.pending=null:(a=a.next,r.next=a,i_(n,a)))}function Bf(n,r,a){var l=n.pending;if(n.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,a_(r),r=r.next;while(r!==l)}n.action=null}function a_(n){n=n.listeners;for(var r=0;r<n.length;r++)(0,n[r])()}function o_(n,r){return r}function l_(n,r){if(qe){var a=rt.formState;if(a!==null){e:{var l=Ie;if(qe){if(mt){t:{for(var d=mt,g=Ri;d.nodeType!==8;){if(!g){d=null;break t}if(d=ai(d.nextSibling),d===null){d=null;break t}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){mt=ai(d.nextSibling),l=d.data==="F!";break e}}Ws(l)}l=!1}l&&(r=a[0])}}return a=yn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o_,lastRenderedState:r},a.queue=l,a=C_.bind(null,Ie,l),l.dispatch=a,l=Uf(!1),g=Gf.bind(null,Ie,!1,l.queue),l=yn(),d={state:r,dispatch:null,action:n,pending:null},l.queue=d,a=pS.bind(null,Ie,d,g,a),d.dispatch=a,l.memoizedState=n,[r,a,!1]}function u_(n){var r=Rt();return c_(r,Je,n)}function c_(n,r,a){if(r=Vf(n,r,o_)[0],n=Vc(ar)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Cl(r)}catch(T){throw T===Tl?Dc:T}else l=r;r=Rt();var d=r.queue,g=d.dispatch;return a!==r.memoizedState&&(Ie.flags|=2048,Ja(9,Lc(),gS.bind(null,d,a),null)),[l,g,n]}function gS(n,r){n.action=r}function h_(n){var r=Rt(),a=Je;if(a!==null)return c_(r,a,n);Rt(),r=r.memoizedState,a=Rt();var l=a.queue.dispatch;return a.memoizedState=n,[r,l,!1]}function Ja(n,r,a,l){return n={tag:n,create:a,deps:l,inst:r,next:null},r=Ie.updateQueue,r===null&&(r=Mf(),Ie.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=n.next=n:(l=a.next,a.next=n,n.next=l,r.lastEffect=n),n}function Lc(){return{destroy:void 0,resource:void 0}}function d_(){return Rt().memoizedState}function Uc(n,r,a,l){var d=yn();l=l===void 0?null:l,Ie.flags|=n,d.memoizedState=Ja(1|r,Lc(),a,l)}function Il(n,r,a,l){var d=Rt();l=l===void 0?null:l;var g=d.memoizedState.inst;Je!==null&&l!==null&&Nf(l,Je.memoizedState.deps)?d.memoizedState=Ja(r,g,a,l):(Ie.flags|=n,d.memoizedState=Ja(1|r,g,a,l))}function f_(n,r){Uc(8390656,8,n,r)}function m_(n,r){Il(2048,8,n,r)}function p_(n,r){return Il(4,2,n,r)}function g_(n,r){return Il(4,4,n,r)}function y_(n,r){if(typeof r=="function"){n=n();var a=r(n);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return n=n(),r.current=n,function(){r.current=null}}function __(n,r,a){a=a!=null?a.concat([n]):null,Il(4,4,y_.bind(null,r,n),a)}function zf(){}function v_(n,r){var a=Rt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Nf(r,l[1])?l[0]:(a.memoizedState=[n,r],n)}function E_(n,r){var a=Rt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Nf(r,l[1]))return l[0];if(l=n(),ta){Rn(!0);try{n()}finally{Rn(!1)}}return a.memoizedState=[l,r],l}function qf(n,r,a){return a===void 0||(Ur&1073741824)!==0?n.memoizedState=r:(n.memoizedState=a,n=wv(),Ie.lanes|=n,$r|=n,a)}function T_(n,r,a,l){return In(a,r)?a:Xa.current!==null?(n=qf(n,a,l),In(n,r)||(Bt=!0),n):(Ur&42)===0?(Bt=!0,n.memoizedState=a):(n=wv(),Ie.lanes|=n,$r|=n,r)}function b_(n,r,a,l,d){var g=ue.p;ue.p=g!==0&&8>g?g:8;var T=X.T,w={};X.T=w,Gf(n,!1,r,a);try{var x=d(),F=X.S;if(F!==null&&F(w,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var W=dS(x,l);xl(n,r,W,Pn(n))}else xl(n,r,l,Pn(n))}catch(te){xl(n,r,{then:function(){},status:"rejected",reason:te},Pn())}finally{ue.p=g,X.T=T}}function yS(){}function Hf(n,r,a,l){if(n.tag!==5)throw Error(s(476));var d=w_(n).queue;b_(n,d,r,ye,a===null?yS:function(){return A_(n),a(l)})}function w_(n){var r=n.memoizedState;if(r!==null)return r;r={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:ye},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:a},next:null},n.memoizedState=r,n=n.alternate,n!==null&&(n.memoizedState=r),r}function A_(n){var r=w_(n).next.queue;xl(n,r,{},Pn())}function Ff(){return tn(Yl)}function S_(){return Rt().memoizedState}function R_(){return Rt().memoizedState}function _S(n){for(var r=n.return;r!==null;){switch(r.tag){case 24:case 3:var a=Pn();n=Vr(a);var l=Lr(r,n,a);l!==null&&(jn(l,r,a),wl(l,r,a)),r={cache:Ef()},n.payload=r;return}r=r.return}}function vS(n,r,a){var l=Pn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},Bc(n)?I_(r,a):(a=cf(n,r,a,l),a!==null&&(jn(a,n,l),x_(a,r,l)))}function C_(n,r,a){var l=Pn();xl(n,r,a,l)}function xl(n,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(Bc(n))I_(r,d);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var T=r.lastRenderedState,w=g(T,a);if(d.hasEagerState=!0,d.eagerState=w,In(w,T))return wc(n,r,d,0),rt===null&&bc(),!1}catch{}finally{}if(a=cf(n,r,d,l),a!==null)return jn(a,n,l),x_(a,r,l),!0}return!1}function Gf(n,r,a,l){if(l={lane:2,revertLane:wm(),action:l,hasEagerState:!1,eagerState:null,next:null},Bc(n)){if(r)throw Error(s(479))}else r=cf(n,a,l,2),r!==null&&jn(r,n,2)}function Bc(n){var r=n.alternate;return n===Ie||r!==null&&r===Ie}function I_(n,r){Wa=jc=!0;var a=n.pending;a===null?r.next=r:(r.next=a.next,a.next=r),n.pending=r}function x_(n,r,a){if((a&4194048)!==0){var l=r.lanes;l&=n.pendingLanes,a|=l,r.lanes=a,Wo(n,a)}}var zc={readContext:tn,use:kc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et},N_={readContext:tn,use:kc,useCallback:function(n,r){return yn().memoizedState=[n,r===void 0?null:r],n},useContext:tn,useEffect:f_,useImperativeHandle:function(n,r,a){a=a!=null?a.concat([n]):null,Uc(4194308,4,y_.bind(null,r,n),a)},useLayoutEffect:function(n,r){return Uc(4194308,4,n,r)},useInsertionEffect:function(n,r){Uc(4,2,n,r)},useMemo:function(n,r){var a=yn();r=r===void 0?null:r;var l=n();if(ta){Rn(!0);try{n()}finally{Rn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(n,r,a){var l=yn();if(a!==void 0){var d=a(r);if(ta){Rn(!0);try{a(r)}finally{Rn(!1)}}}else d=r;return l.memoizedState=l.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},l.queue=n,n=n.dispatch=vS.bind(null,Ie,n),[l.memoizedState,n]},useRef:function(n){var r=yn();return n={current:n},r.memoizedState=n},useState:function(n){n=Uf(n);var r=n.queue,a=C_.bind(null,Ie,r);return r.dispatch=a,[n.memoizedState,a]},useDebugValue:zf,useDeferredValue:function(n,r){var a=yn();return qf(a,n,r)},useTransition:function(){var n=Uf(!1);return n=b_.bind(null,Ie,n.queue,!0,!1),yn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,r,a){var l=Ie,d=yn();if(qe){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),rt===null)throw Error(s(349));(Le&124)!==0||Wy(l,r,a)}d.memoizedState=a;var g={value:a,getSnapshot:r};return d.queue=g,f_(Jy.bind(null,l,g,n),[n]),l.flags|=2048,Ja(9,Lc(),Zy.bind(null,l,g,a,r),null),a},useId:function(){var n=yn(),r=rt.identifierPrefix;if(qe){var a=ir,l=nr;a=(l&~(1<<32-en(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Mc++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=fS++,r="«"+r+"r"+a.toString(32)+"»";return n.memoizedState=r},useHostTransitionStatus:Ff,useFormState:l_,useActionState:l_,useOptimistic:function(n){var r=yn();r.memoizedState=r.baseState=n;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=Gf.bind(null,Ie,!0,a),a.dispatch=r,[n,r]},useMemoCache:kf,useCacheRefresh:function(){return yn().memoizedState=_S.bind(null,Ie)}},D_={readContext:tn,use:kc,useCallback:v_,useContext:tn,useEffect:m_,useImperativeHandle:__,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:E_,useReducer:Vc,useRef:d_,useState:function(){return Vc(ar)},useDebugValue:zf,useDeferredValue:function(n,r){var a=Rt();return T_(a,Je.memoizedState,n,r)},useTransition:function(){var n=Vc(ar)[0],r=Rt().memoizedState;return[typeof n=="boolean"?n:Cl(n),r]},useSyncExternalStore:Xy,useId:S_,useHostTransitionStatus:Ff,useFormState:u_,useActionState:u_,useOptimistic:function(n,r){var a=Rt();return n_(a,Je,n,r)},useMemoCache:kf,useCacheRefresh:R_},ES={readContext:tn,use:kc,useCallback:v_,useContext:tn,useEffect:m_,useImperativeHandle:__,useInsertionEffect:p_,useLayoutEffect:g_,useMemo:E_,useReducer:Lf,useRef:d_,useState:function(){return Lf(ar)},useDebugValue:zf,useDeferredValue:function(n,r){var a=Rt();return Je===null?qf(a,n,r):T_(a,Je.memoizedState,n,r)},useTransition:function(){var n=Lf(ar)[0],r=Rt().memoizedState;return[typeof n=="boolean"?n:Cl(n),r]},useSyncExternalStore:Xy,useId:S_,useHostTransitionStatus:Ff,useFormState:h_,useActionState:h_,useOptimistic:function(n,r){var a=Rt();return Je!==null?n_(a,Je,n,r):(a.baseState=n,[n,a.queue.dispatch])},useMemoCache:kf,useCacheRefresh:R_},eo=null,Nl=0;function qc(n){var r=Nl;return Nl+=1,eo===null&&(eo=[]),qy(eo,n,r)}function Dl(n,r){r=r.props.ref,n.ref=r!==void 0?r:null}function Hc(n,r){throw r.$$typeof===b?Error(s(525)):(n=Object.prototype.toString.call(r),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":n)))}function O_(n){var r=n._init;return r(n._payload)}function P_(n){function r(L,j){if(n){var H=L.deletions;H===null?(L.deletions=[j],L.flags|=16):H.push(j)}}function a(L,j){if(!n)return null;for(;j!==null;)r(L,j),j=j.sibling;return null}function l(L){for(var j=new Map;L!==null;)L.key!==null?j.set(L.key,L):j.set(L.index,L),L=L.sibling;return j}function d(L,j){return L=tr(L,j),L.index=0,L.sibling=null,L}function g(L,j,H){return L.index=H,n?(H=L.alternate,H!==null?(H=H.index,H<j?(L.flags|=67108866,j):H):(L.flags|=67108866,j)):(L.flags|=1048576,j)}function T(L){return n&&L.alternate===null&&(L.flags|=67108866),L}function w(L,j,H,Z){return j===null||j.tag!==6?(j=df(H,L.mode,Z),j.return=L,j):(j=d(j,H),j.return=L,j)}function x(L,j,H,Z){var me=H.type;return me===O?W(L,j,H.props.children,Z,H.key):j!==null&&(j.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===C&&O_(me)===j.type)?(j=d(j,H.props),Dl(j,H),j.return=L,j):(j=Sc(H.type,H.key,H.props,null,L.mode,Z),Dl(j,H),j.return=L,j)}function F(L,j,H,Z){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=ff(H,L.mode,Z),j.return=L,j):(j=d(j,H.children||[]),j.return=L,j)}function W(L,j,H,Z,me){return j===null||j.tag!==7?(j=Ys(H,L.mode,Z,me),j.return=L,j):(j=d(j,H),j.return=L,j)}function te(L,j,H){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=df(""+j,L.mode,H),j.return=L,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case A:return H=Sc(j.type,j.key,j.props,null,L.mode,H),Dl(H,j),H.return=L,H;case R:return j=ff(j,L.mode,H),j.return=L,j;case C:var Z=j._init;return j=Z(j._payload),te(L,j,H)}if(dt(j)||U(j))return j=Ys(j,L.mode,H,null),j.return=L,j;if(typeof j.then=="function")return te(L,qc(j),H);if(j.$$typeof===Q)return te(L,xc(L,j),H);Hc(L,j)}return null}function G(L,j,H,Z){var me=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return me!==null?null:w(L,j,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return H.key===me?x(L,j,H,Z):null;case R:return H.key===me?F(L,j,H,Z):null;case C:return me=H._init,H=me(H._payload),G(L,j,H,Z)}if(dt(H)||U(H))return me!==null?null:W(L,j,H,Z,null);if(typeof H.then=="function")return G(L,j,qc(H),Z);if(H.$$typeof===Q)return G(L,j,xc(L,H),Z);Hc(L,H)}return null}function $(L,j,H,Z,me){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return L=L.get(H)||null,w(j,L,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return L=L.get(Z.key===null?H:Z.key)||null,x(j,L,Z,me);case R:return L=L.get(Z.key===null?H:Z.key)||null,F(j,L,Z,me);case C:var Ne=Z._init;return Z=Ne(Z._payload),$(L,j,H,Z,me)}if(dt(Z)||U(Z))return L=L.get(H)||null,W(j,L,Z,me,null);if(typeof Z.then=="function")return $(L,j,H,qc(Z),me);if(Z.$$typeof===Q)return $(L,j,H,xc(j,Z),me);Hc(j,Z)}return null}function we(L,j,H,Z){for(var me=null,Ne=null,ge=j,Te=j=0,qt=null;ge!==null&&Te<H.length;Te++){ge.index>Te?(qt=ge,ge=null):qt=ge.sibling;var Be=G(L,ge,H[Te],Z);if(Be===null){ge===null&&(ge=qt);break}n&&ge&&Be.alternate===null&&r(L,ge),j=g(Be,j,Te),Ne===null?me=Be:Ne.sibling=Be,Ne=Be,ge=qt}if(Te===H.length)return a(L,ge),qe&&Qs(L,Te),me;if(ge===null){for(;Te<H.length;Te++)ge=te(L,H[Te],Z),ge!==null&&(j=g(ge,j,Te),Ne===null?me=ge:Ne.sibling=ge,Ne=ge);return qe&&Qs(L,Te),me}for(ge=l(ge);Te<H.length;Te++)qt=$(ge,L,Te,H[Te],Z),qt!==null&&(n&&qt.alternate!==null&&ge.delete(qt.key===null?Te:qt.key),j=g(qt,j,Te),Ne===null?me=qt:Ne.sibling=qt,Ne=qt);return n&&ge.forEach(function(ts){return r(L,ts)}),qe&&Qs(L,Te),me}function Ee(L,j,H,Z){if(H==null)throw Error(s(151));for(var me=null,Ne=null,ge=j,Te=j=0,qt=null,Be=H.next();ge!==null&&!Be.done;Te++,Be=H.next()){ge.index>Te?(qt=ge,ge=null):qt=ge.sibling;var ts=G(L,ge,Be.value,Z);if(ts===null){ge===null&&(ge=qt);break}n&&ge&&ts.alternate===null&&r(L,ge),j=g(ts,j,Te),Ne===null?me=ts:Ne.sibling=ts,Ne=ts,ge=qt}if(Be.done)return a(L,ge),qe&&Qs(L,Te),me;if(ge===null){for(;!Be.done;Te++,Be=H.next())Be=te(L,Be.value,Z),Be!==null&&(j=g(Be,j,Te),Ne===null?me=Be:Ne.sibling=Be,Ne=Be);return qe&&Qs(L,Te),me}for(ge=l(ge);!Be.done;Te++,Be=H.next())Be=$(ge,L,Te,Be.value,Z),Be!==null&&(n&&Be.alternate!==null&&ge.delete(Be.key===null?Te:Be.key),j=g(Be,j,Te),Ne===null?me=Be:Ne.sibling=Be,Ne=Be);return n&&ge.forEach(function(TR){return r(L,TR)}),qe&&Qs(L,Te),me}function tt(L,j,H,Z){if(typeof H=="object"&&H!==null&&H.type===O&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case A:e:{for(var me=H.key;j!==null;){if(j.key===me){if(me=H.type,me===O){if(j.tag===7){a(L,j.sibling),Z=d(j,H.props.children),Z.return=L,L=Z;break e}}else if(j.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===C&&O_(me)===j.type){a(L,j.sibling),Z=d(j,H.props),Dl(Z,H),Z.return=L,L=Z;break e}a(L,j);break}else r(L,j);j=j.sibling}H.type===O?(Z=Ys(H.props.children,L.mode,Z,H.key),Z.return=L,L=Z):(Z=Sc(H.type,H.key,H.props,null,L.mode,Z),Dl(Z,H),Z.return=L,L=Z)}return T(L);case R:e:{for(me=H.key;j!==null;){if(j.key===me)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){a(L,j.sibling),Z=d(j,H.children||[]),Z.return=L,L=Z;break e}else{a(L,j);break}else r(L,j);j=j.sibling}Z=ff(H,L.mode,Z),Z.return=L,L=Z}return T(L);case C:return me=H._init,H=me(H._payload),tt(L,j,H,Z)}if(dt(H))return we(L,j,H,Z);if(U(H)){if(me=U(H),typeof me!="function")throw Error(s(150));return H=me.call(H),Ee(L,j,H,Z)}if(typeof H.then=="function")return tt(L,j,qc(H),Z);if(H.$$typeof===Q)return tt(L,j,xc(L,H),Z);Hc(L,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,j!==null&&j.tag===6?(a(L,j.sibling),Z=d(j,H),Z.return=L,L=Z):(a(L,j),Z=df(H,L.mode,Z),Z.return=L,L=Z),T(L)):a(L,j)}return function(L,j,H,Z){try{Nl=0;var me=tt(L,j,H,Z);return eo=null,me}catch(ge){if(ge===Tl||ge===Dc)throw ge;var Ne=xn(29,ge,null,L.mode);return Ne.lanes=Z,Ne.return=L,Ne}finally{}}}var to=P_(!0),j_=P_(!1),Kn=se(null),Ci=null;function Br(n){var r=n.alternate;oe(Mt,Mt.current&1),oe(Kn,n),Ci===null&&(r===null||Xa.current!==null||r.memoizedState!==null)&&(Ci=n)}function M_(n){if(n.tag===22){if(oe(Mt,Mt.current),oe(Kn,n),Ci===null){var r=n.alternate;r!==null&&r.memoizedState!==null&&(Ci=n)}}else zr()}function zr(){oe(Mt,Mt.current),oe(Kn,Kn.current)}function or(n){ce(Kn),Ci===n&&(Ci=null),ce(Mt)}var Mt=se(0);function Fc(n){for(var r=n;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Mm(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function $f(n,r,a,l){r=n.memoizedState,a=a(l,r),a=a==null?r:v({},r,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Yf={enqueueSetState:function(n,r,a){n=n._reactInternals;var l=Pn(),d=Vr(l);d.payload=r,a!=null&&(d.callback=a),r=Lr(n,d,l),r!==null&&(jn(r,n,l),wl(r,n,l))},enqueueReplaceState:function(n,r,a){n=n._reactInternals;var l=Pn(),d=Vr(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=Lr(n,d,l),r!==null&&(jn(r,n,l),wl(r,n,l))},enqueueForceUpdate:function(n,r){n=n._reactInternals;var a=Pn(),l=Vr(a);l.tag=2,r!=null&&(l.callback=r),r=Lr(n,l,a),r!==null&&(jn(r,n,a),wl(r,n,a))}};function k_(n,r,a,l,d,g,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(l,g,T):r.prototype&&r.prototype.isPureReactComponent?!fl(a,l)||!fl(d,g):!0}function V_(n,r,a,l){n=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==n&&Yf.enqueueReplaceState(r,r.state,null)}function na(n,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(n=n.defaultProps){a===r&&(a=v({},a));for(var d in n)a[d]===void 0&&(a[d]=n[d])}return a}var Gc=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function L_(n){Gc(n)}function U_(n){console.error(n)}function B_(n){Gc(n)}function $c(n,r){try{var a=n.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function z_(n,r,a){try{var l=n.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Kf(n,r,a){return a=Vr(a),a.tag=3,a.payload={element:null},a.callback=function(){$c(n,r)},a}function q_(n){return n=Vr(n),n.tag=3,n}function H_(n,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=l.value;n.payload=function(){return d(g)},n.callback=function(){z_(r,a,l)}}var T=a.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){z_(r,a,l),typeof d!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function TS(n,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&_l(r,a,d,!0),a=Kn.current,a!==null){switch(a.tag){case 13:return Ci===null?_m():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===wf?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Em(n,l,d)),!1;case 22:return a.flags|=65536,l===wf?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Em(n,l,d)),!1}throw Error(s(435,a.tag))}return Em(n,l,d),_m(),!1}if(qe)return r=Kn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==gf&&(n=Error(s(422),{cause:l}),yl(Fn(n,a)))):(l!==gf&&(r=Error(s(423),{cause:l}),yl(Fn(r,a))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,l=Fn(l,a),d=Kf(n.stateNode,l,d),Rf(n,d),pt!==4&&(pt=2)),!1;var g=Error(s(520),{cause:l});if(g=Fn(g,a),Ll===null?Ll=[g]:Ll.push(g),pt!==4&&(pt=2),r===null)return!0;l=Fn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,n=d&-d,a.lanes|=n,n=Kf(a.stateNode,l,n),Rf(a,n),!1;case 1:if(r=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Yr===null||!Yr.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=q_(d),H_(d,n,a,l),Rf(a,d),!1}a=a.return}while(a!==null);return!1}var F_=Error(s(461)),Bt=!1;function Yt(n,r,a,l){r.child=n===null?j_(r,null,a,l):to(r,n.child,a,l)}function G_(n,r,a,l,d){a=a.render;var g=r.ref;if("ref"in l){var T={};for(var w in l)w!=="ref"&&(T[w]=l[w])}else T=l;return Js(r),l=Df(n,r,a,T,g,d),w=Of(),n!==null&&!Bt?(Pf(n,r,d),lr(n,r,d)):(qe&&w&&mf(r),r.flags|=1,Yt(n,r,l,d),r.child)}function $_(n,r,a,l,d){if(n===null){var g=a.type;return typeof g=="function"&&!hf(g)&&g.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=g,Y_(n,r,g,l,d)):(n=Sc(a.type,null,l,r,r.mode,d),n.ref=r.ref,n.return=r,r.child=n)}if(g=n.child,!nm(n,d)){var T=g.memoizedProps;if(a=a.compare,a=a!==null?a:fl,a(T,l)&&n.ref===r.ref)return lr(n,r,d)}return r.flags|=1,n=tr(g,l),n.ref=r.ref,n.return=r,r.child=n}function Y_(n,r,a,l,d){if(n!==null){var g=n.memoizedProps;if(fl(g,l)&&n.ref===r.ref)if(Bt=!1,r.pendingProps=l=g,nm(n,d))(n.flags&131072)!==0&&(Bt=!0);else return r.lanes=n.lanes,lr(n,r,d)}return Qf(n,r,a,l,d)}function K_(n,r,a){var l=r.pendingProps,d=l.children,g=n!==null?n.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=g!==null?g.baseLanes|a:a,n!==null){for(d=r.child=n.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;r.childLanes=g&~l}else r.childLanes=0,r.child=null;return Q_(n,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},n!==null&&Nc(r,g!==null?g.cachePool:null),g!==null?Yy(r,g):If(),M_(r);else return r.lanes=r.childLanes=536870912,Q_(n,r,g!==null?g.baseLanes|a:a,a)}else g!==null?(Nc(r,g.cachePool),Yy(r,g),zr(),r.memoizedState=null):(n!==null&&Nc(r,null),If(),zr());return Yt(n,r,d,a),r.child}function Q_(n,r,a,l){var d=bf();return d=d===null?null:{parent:jt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},n!==null&&Nc(r,null),If(),M_(r),n!==null&&_l(n,r,l,!0),null}function Yc(n,r){var a=r.ref;if(a===null)n!==null&&n.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(n===null||n.ref!==a)&&(r.flags|=4194816)}}function Qf(n,r,a,l,d){return Js(r),a=Df(n,r,a,l,void 0,d),l=Of(),n!==null&&!Bt?(Pf(n,r,d),lr(n,r,d)):(qe&&l&&mf(r),r.flags|=1,Yt(n,r,a,d),r.child)}function X_(n,r,a,l,d,g){return Js(r),r.updateQueue=null,a=Qy(r,l,a,d),Ky(n),l=Of(),n!==null&&!Bt?(Pf(n,r,g),lr(n,r,g)):(qe&&l&&mf(r),r.flags|=1,Yt(n,r,a,g),r.child)}function W_(n,r,a,l,d){if(Js(r),r.stateNode===null){var g=Ga,T=a.contextType;typeof T=="object"&&T!==null&&(g=tn(T)),g=new a(l,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yf,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=l,g.state=r.memoizedState,g.refs={},Af(r),T=a.contextType,g.context=typeof T=="object"&&T!==null?tn(T):Ga,g.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&($f(r,a,T,l),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(T=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),T!==g.state&&Yf.enqueueReplaceState(g,g.state,null),Sl(r,l,g,d),Al(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(n===null){g=r.stateNode;var w=r.memoizedProps,x=na(a,w);g.props=x;var F=g.context,W=a.contextType;T=Ga,typeof W=="object"&&W!==null&&(T=tn(W));var te=a.getDerivedStateFromProps;W=typeof te=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||F!==T)&&V_(r,g,l,T),kr=!1;var G=r.memoizedState;g.state=G,Sl(r,l,g,d),Al(),F=r.memoizedState,w||G!==F||kr?(typeof te=="function"&&($f(r,a,te,l),F=r.memoizedState),(x=kr||k_(r,a,x,l,G,F,T))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=F),g.props=l,g.state=F,g.context=T,l=x):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{g=r.stateNode,Sf(n,r),T=r.memoizedProps,W=na(a,T),g.props=W,te=r.pendingProps,G=g.context,F=a.contextType,x=Ga,typeof F=="object"&&F!==null&&(x=tn(F)),w=a.getDerivedStateFromProps,(F=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(T!==te||G!==x)&&V_(r,g,l,x),kr=!1,G=r.memoizedState,g.state=G,Sl(r,l,g,d),Al();var $=r.memoizedState;T!==te||G!==$||kr||n!==null&&n.dependencies!==null&&Ic(n.dependencies)?(typeof w=="function"&&($f(r,a,w,l),$=r.memoizedState),(W=kr||k_(r,a,W,l,G,$,x)||n!==null&&n.dependencies!==null&&Ic(n.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,$,x),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,$,x)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),g.props=l,g.state=$,g.context=x,l=W):(typeof g.componentDidUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&G===n.memoizedState||(r.flags|=1024),l=!1)}return g=l,Yc(n,r),l=(r.flags&128)!==0,g||l?(g=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,n!==null&&l?(r.child=to(r,n.child,null,d),r.child=to(r,null,a,d)):Yt(n,r,a,d),r.memoizedState=g.state,n=r.child):n=lr(n,r,d),n}function Z_(n,r,a,l){return gl(),r.flags|=256,Yt(n,r,a,l),r.child}var Xf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wf(n){return{baseLanes:n,cachePool:Uy()}}function Zf(n,r,a){return n=n!==null?n.childLanes&~a:0,r&&(n|=Qn),n}function J_(n,r,a){var l=r.pendingProps,d=!1,g=(r.flags&128)!==0,T;if((T=g)||(T=n!==null&&n.memoizedState===null?!1:(Mt.current&2)!==0),T&&(d=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,n===null){if(qe){if(d?Br(r):zr(),qe){var w=mt,x;if(x=w){e:{for(x=w,w=Ri;x.nodeType!==8;){if(!w){w=null;break e}if(x=ai(x.nextSibling),x===null){w=null;break e}}w=x}w!==null?(r.memoizedState={dehydrated:w,treeContext:Ks!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},x=xn(18,null,null,0),x.stateNode=w,x.return=r,r.child=x,pn=r,mt=null,x=!0):x=!1}x||Ws(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Mm(w)?r.lanes=32:r.lanes=536870912,null;or(r)}return w=l.children,l=l.fallback,d?(zr(),d=r.mode,w=Kc({mode:"hidden",children:w},d),l=Ys(l,d,a,null),w.return=r,l.return=r,w.sibling=l,r.child=w,d=r.child,d.memoizedState=Wf(a),d.childLanes=Zf(n,T,a),r.memoizedState=Xf,l):(Br(r),Jf(r,w))}if(x=n.memoizedState,x!==null&&(w=x.dehydrated,w!==null)){if(g)r.flags&256?(Br(r),r.flags&=-257,r=em(n,r,a)):r.memoizedState!==null?(zr(),r.child=n.child,r.flags|=128,r=null):(zr(),d=l.fallback,w=r.mode,l=Kc({mode:"visible",children:l.children},w),d=Ys(d,w,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,to(r,n.child,null,a),l=r.child,l.memoizedState=Wf(a),l.childLanes=Zf(n,T,a),r.memoizedState=Xf,r=d);else if(Br(r),Mm(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var F=T.dgst;T=F,l=Error(s(419)),l.stack="",l.digest=T,yl({value:l,source:null,stack:null}),r=em(n,r,a)}else if(Bt||_l(n,r,a,!1),T=(a&n.childLanes)!==0,Bt||T){if(T=rt,T!==null&&(l=a&-a,l=(l&42)!==0?1:Ir(l),l=(l&(T.suspendedLanes|a))!==0?0:l,l!==0&&l!==x.retryLane))throw x.retryLane=l,Fa(n,l),jn(T,n,l),F_;w.data==="$?"||_m(),r=em(n,r,a)}else w.data==="$?"?(r.flags|=192,r.child=n.child,r=null):(n=x.treeContext,mt=ai(w.nextSibling),pn=r,qe=!0,Xs=null,Ri=!1,n!==null&&($n[Yn++]=nr,$n[Yn++]=ir,$n[Yn++]=Ks,nr=n.id,ir=n.overflow,Ks=r),r=Jf(r,l.children),r.flags|=4096);return r}return d?(zr(),d=l.fallback,w=r.mode,x=n.child,F=x.sibling,l=tr(x,{mode:"hidden",children:l.children}),l.subtreeFlags=x.subtreeFlags&65011712,F!==null?d=tr(F,d):(d=Ys(d,w,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,w=n.child.memoizedState,w===null?w=Wf(a):(x=w.cachePool,x!==null?(F=jt._currentValue,x=x.parent!==F?{parent:F,pool:F}:x):x=Uy(),w={baseLanes:w.baseLanes|a,cachePool:x}),d.memoizedState=w,d.childLanes=Zf(n,T,a),r.memoizedState=Xf,l):(Br(r),a=n.child,n=a.sibling,a=tr(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,n!==null&&(T=r.deletions,T===null?(r.deletions=[n],r.flags|=16):T.push(n)),r.child=a,r.memoizedState=null,a)}function Jf(n,r){return r=Kc({mode:"visible",children:r},n.mode),r.return=n,n.child=r}function Kc(n,r){return n=xn(22,n,null,r),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function em(n,r,a){return to(r,n.child,null,a),n=Jf(r,r.pendingProps.children),n.flags|=2,r.memoizedState=null,n}function ev(n,r,a){n.lanes|=r;var l=n.alternate;l!==null&&(l.lanes|=r),_f(n.return,r,a)}function tm(n,r,a,l,d){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=d)}function tv(n,r,a){var l=r.pendingProps,d=l.revealOrder,g=l.tail;if(Yt(n,r,l.children,a),l=Mt.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=r.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ev(n,a,r);else if(n.tag===19)ev(n,a,r);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===r)break e;for(;n.sibling===null;){if(n.return===null||n.return===r)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}l&=1}switch(oe(Mt,l),d){case"forwards":for(a=r.child,d=null;a!==null;)n=a.alternate,n!==null&&Fc(n)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),tm(r,!1,d,a,g);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(n=d.alternate,n!==null&&Fc(n)===null){r.child=d;break}n=d.sibling,d.sibling=a,a=d,d=n}tm(r,!0,a,null,g);break;case"together":tm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function lr(n,r,a){if(n!==null&&(r.dependencies=n.dependencies),$r|=r.lanes,(a&r.childLanes)===0)if(n!==null){if(_l(n,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(n!==null&&r.child!==n.child)throw Error(s(153));if(r.child!==null){for(n=r.child,a=tr(n,n.pendingProps),r.child=a,a.return=r;n.sibling!==null;)n=n.sibling,a=a.sibling=tr(n,n.pendingProps),a.return=r;a.sibling=null}return r.child}function nm(n,r){return(n.lanes&r)!==0?!0:(n=n.dependencies,!!(n!==null&&Ic(n)))}function bS(n,r,a){switch(r.tag){case 3:it(r,r.stateNode.containerInfo),Mr(r,jt,n.memoizedState.cache),gl();break;case 27:case 5:Cr(r);break;case 4:it(r,r.stateNode.containerInfo);break;case 10:Mr(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(Br(r),r.flags|=128,null):(a&r.child.childLanes)!==0?J_(n,r,a):(Br(r),n=lr(n,r,a),n!==null?n.sibling:null);Br(r);break;case 19:var d=(n.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(_l(n,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return tv(n,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),oe(Mt,Mt.current),l)break;return null;case 22:case 23:return r.lanes=0,K_(n,r,a);case 24:Mr(r,jt,n.memoizedState.cache)}return lr(n,r,a)}function nv(n,r,a){if(n!==null)if(n.memoizedProps!==r.pendingProps)Bt=!0;else{if(!nm(n,a)&&(r.flags&128)===0)return Bt=!1,bS(n,r,a);Bt=(n.flags&131072)!==0}else Bt=!1,qe&&(r.flags&1048576)!==0&&Oy(r,Cc,r.index);switch(r.lanes=0,r.tag){case 16:e:{n=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")hf(l)?(n=na(l,n),r.tag=1,r=W_(null,r,l,n,a)):(r.tag=0,r=Qf(null,r,l,n,a));else{if(l!=null){if(d=l.$$typeof,d===ie){r.tag=11,r=G_(null,r,l,n,a);break e}else if(d===N){r.tag=14,r=$_(null,r,l,n,a);break e}}throw r=Ft(l)||l,Error(s(306,r,""))}}return r;case 0:return Qf(n,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=na(l,r.pendingProps),W_(n,r,l,d,a);case 3:e:{if(it(r,r.stateNode.containerInfo),n===null)throw Error(s(387));l=r.pendingProps;var g=r.memoizedState;d=g.element,Sf(n,r),Sl(r,l,null,a);var T=r.memoizedState;if(l=T.cache,Mr(r,jt,l),l!==g.cache&&vf(r,[jt],a,!0),Al(),l=T.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=Z_(n,r,l,a);break e}else if(l!==d){d=Fn(Error(s(424)),r),yl(d),r=Z_(n,r,l,a);break e}else{switch(n=r.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(mt=ai(n.firstChild),pn=r,qe=!0,Xs=null,Ri=!0,a=j_(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(gl(),l===d){r=lr(n,r,a);break e}Yt(n,r,l,a)}r=r.child}return r;case 26:return Yc(n,r),n===null?(a=aE(r.type,null,r.pendingProps,null))?r.memoizedState=a:qe||(a=r.type,n=r.pendingProps,l=lh(Ae.current).createElement(a),l[Dt]=r,l[wt]=n,Qt(l,a,n),vt(l),r.stateNode=l):r.memoizedState=aE(r.type,n.memoizedProps,r.pendingProps,n.memoizedState),null;case 27:return Cr(r),n===null&&qe&&(l=r.stateNode=iE(r.type,r.pendingProps,Ae.current),pn=r,Ri=!0,d=mt,Xr(r.type)?(km=d,mt=ai(l.firstChild)):mt=d),Yt(n,r,r.pendingProps.children,a),Yc(n,r),n===null&&(r.flags|=4194304),r.child;case 5:return n===null&&qe&&((d=l=mt)&&(l=XS(l,r.type,r.pendingProps,Ri),l!==null?(r.stateNode=l,pn=r,mt=ai(l.firstChild),Ri=!1,d=!0):d=!1),d||Ws(r)),Cr(r),d=r.type,g=r.pendingProps,T=n!==null?n.memoizedProps:null,l=g.children,Om(d,g)?l=null:T!==null&&Om(d,T)&&(r.flags|=32),r.memoizedState!==null&&(d=Df(n,r,mS,null,null,a),Yl._currentValue=d),Yc(n,r),Yt(n,r,l,a),r.child;case 6:return n===null&&qe&&((n=a=mt)&&(a=WS(a,r.pendingProps,Ri),a!==null?(r.stateNode=a,pn=r,mt=null,n=!0):n=!1),n||Ws(r)),null;case 13:return J_(n,r,a);case 4:return it(r,r.stateNode.containerInfo),l=r.pendingProps,n===null?r.child=to(r,null,l,a):Yt(n,r,l,a),r.child;case 11:return G_(n,r,r.type,r.pendingProps,a);case 7:return Yt(n,r,r.pendingProps,a),r.child;case 8:return Yt(n,r,r.pendingProps.children,a),r.child;case 12:return Yt(n,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Mr(r,r.type,l.value),Yt(n,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Js(r),d=tn(d),l=l(d),r.flags|=1,Yt(n,r,l,a),r.child;case 14:return $_(n,r,r.type,r.pendingProps,a);case 15:return Y_(n,r,r.type,r.pendingProps,a);case 19:return tv(n,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},n===null?(a=Kc(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=tr(n.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return K_(n,r,a);case 24:return Js(r),l=tn(jt),n===null?(d=bf(),d===null&&(d=rt,g=Ef(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),r.memoizedState={parent:l,cache:d},Af(r),Mr(r,jt,d)):((n.lanes&a)!==0&&(Sf(n,r),Sl(r,null,null,a),Al()),d=n.memoizedState,g=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),Mr(r,jt,l)):(l=g.cache,Mr(r,jt,l),l!==d.cache&&vf(r,[jt],a,!0))),Yt(n,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function ur(n){n.flags|=4}function iv(n,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!hE(r)){if(r=Kn.current,r!==null&&((Le&4194048)===Le?Ci!==null:(Le&62914560)!==Le&&(Le&536870912)===0||r!==Ci))throw bl=wf,By;n.flags|=8192}}function Qc(n,r){r!==null&&(n.flags|=4),n.flags&16384&&(r=n.tag!==22?Qo():536870912,n.lanes|=r,so|=r)}function Ol(n,r){if(!qe)switch(n.tailMode){case"hidden":r=n.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||n.tail===null?n.tail=null:n.tail.sibling=null:l.sibling=null}}function ct(n){var r=n.alternate!==null&&n.alternate.child===n.child,a=0,l=0;if(r)for(var d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=l,n.childLanes=a,r}function wS(n,r,a){var l=r.pendingProps;switch(pf(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(r),null;case 1:return ct(r),null;case 3:return a=r.stateNode,l=null,n!==null&&(l=n.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),sr(jt),mi(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(n===null||n.child===null)&&(pl(r)?ur(r):n===null||n.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,My())),ct(r),null;case 26:return a=r.memoizedState,n===null?(ur(r),a!==null?(ct(r),iv(r,a)):(ct(r),r.flags&=-16777217)):a?a!==n.memoizedState?(ur(r),ct(r),iv(r,a)):(ct(r),r.flags&=-16777217):(n.memoizedProps!==l&&ur(r),ct(r),r.flags&=-16777217),null;case 27:qi(r),a=Ae.current;var d=r.type;if(n!==null&&r.stateNode!=null)n.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}n=ve.current,pl(r)?Py(r):(n=iE(d,l,a),r.stateNode=n,ur(r))}return ct(r),null;case 5:if(qi(r),a=r.type,n!==null&&r.stateNode!=null)n.memoizedProps!==l&&ur(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ct(r),null}if(n=ve.current,pl(r))Py(r);else{switch(d=lh(Ae.current),n){case 1:n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":n=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":n=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":n=d.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?n.multiple=!0:l.size&&(n.size=l.size);break;default:n=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}n[Dt]=r,n[wt]=l;e:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)n.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break e;for(;d.sibling===null;){if(d.return===null||d.return===r)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=n;e:switch(Qt(n,a,l),a){case"button":case"input":case"select":case"textarea":n=!!l.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&ur(r)}}return ct(r),r.flags&=-16777217,null;case 6:if(n&&r.stateNode!=null)n.memoizedProps!==l&&ur(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(n=Ae.current,pl(r)){if(n=r.stateNode,a=r.memoizedProps,l=null,d=pn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}n[Dt]=r,n=!!(n.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Xv(n.nodeValue,a)),n||Ws(r)}else n=lh(n).createTextNode(l),n[Dt]=r,r.stateNode=n}return ct(r),null;case 13:if(l=r.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=pl(r),l!==null&&l.dehydrated!==null){if(n===null){if(!d)throw Error(s(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[Dt]=r}else gl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ct(r),d=!1}else d=My(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(or(r),r):(or(r),null)}if(or(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,n=n!==null&&n.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var g=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048)}return a!==n&&a&&(r.child.flags|=8192),Qc(r,r.updateQueue),ct(r),null;case 4:return mi(),n===null&&Cm(r.stateNode.containerInfo),ct(r),null;case 10:return sr(r.type),ct(r),null;case 19:if(ce(Mt),d=r.memoizedState,d===null)return ct(r),null;if(l=(r.flags&128)!==0,g=d.rendering,g===null)if(l)Ol(d,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=r.child;n!==null;){if(g=Fc(n),g!==null){for(r.flags|=128,Ol(d,!1),n=g.updateQueue,r.updateQueue=n,Qc(r,n),r.subtreeFlags=0,n=a,a=r.child;a!==null;)Dy(a,n),a=a.sibling;return oe(Mt,Mt.current&1|2),r.child}n=n.sibling}d.tail!==null&&Ln()>Zc&&(r.flags|=128,l=!0,Ol(d,!1),r.lanes=4194304)}else{if(!l)if(n=Fc(g),n!==null){if(r.flags|=128,l=!0,n=n.updateQueue,r.updateQueue=n,Qc(r,n),Ol(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!qe)return ct(r),null}else 2*Ln()-d.renderingStartTime>Zc&&a!==536870912&&(r.flags|=128,l=!0,Ol(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(n=d.last,n!==null?n.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Ln(),r.sibling=null,n=Mt.current,oe(Mt,l?n&1|2:n&1),r):(ct(r),null);case 22:case 23:return or(r),xf(),l=r.memoizedState!==null,n!==null?n.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ct(r),r.subtreeFlags&6&&(r.flags|=8192)):ct(r),a=r.updateQueue,a!==null&&Qc(r,a.retryQueue),a=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),n!==null&&ce(ea),null;case 24:return a=null,n!==null&&(a=n.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),sr(jt),ct(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function AS(n,r){switch(pf(r),r.tag){case 1:return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 3:return sr(jt),mi(),n=r.flags,(n&65536)!==0&&(n&128)===0?(r.flags=n&-65537|128,r):null;case 26:case 27:case 5:return qi(r),null;case 13:if(or(r),n=r.memoizedState,n!==null&&n.dehydrated!==null){if(r.alternate===null)throw Error(s(340));gl()}return n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 19:return ce(Mt),null;case 4:return mi(),null;case 10:return sr(r.type),null;case 22:case 23:return or(r),xf(),n!==null&&ce(ea),n=r.flags,n&65536?(r.flags=n&-65537|128,r):null;case 24:return sr(jt),null;case 25:return null;default:return null}}function rv(n,r){switch(pf(r),r.tag){case 3:sr(jt),mi();break;case 26:case 27:case 5:qi(r);break;case 4:mi();break;case 13:or(r);break;case 19:ce(Mt);break;case 10:sr(r.type);break;case 22:case 23:or(r),xf(),n!==null&&ce(ea);break;case 24:sr(jt)}}function Pl(n,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&n)===n){l=void 0;var g=a.create,T=a.inst;l=g(),T.destroy=l}a=a.next}while(a!==d)}}catch(w){nt(r,r.return,w)}}function qr(n,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&n)===n){var T=l.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,d=r;var x=a,F=w;try{F()}catch(W){nt(d,x,W)}}}l=l.next}while(l!==g)}}catch(W){nt(r,r.return,W)}}function sv(n){var r=n.updateQueue;if(r!==null){var a=n.stateNode;try{$y(r,a)}catch(l){nt(n,n.return,l)}}}function av(n,r,a){a.props=na(n.type,n.memoizedProps),a.state=n.memoizedState;try{a.componentWillUnmount()}catch(l){nt(n,r,l)}}function jl(n,r){try{var a=n.ref;if(a!==null){switch(n.tag){case 26:case 27:case 5:var l=n.stateNode;break;case 30:l=n.stateNode;break;default:l=n.stateNode}typeof a=="function"?n.refCleanup=a(l):a.current=l}}catch(d){nt(n,r,d)}}function Ii(n,r){var a=n.ref,l=n.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){nt(n,r,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){nt(n,r,d)}else a.current=null}function ov(n){var r=n.type,a=n.memoizedProps,l=n.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){nt(n,n.return,d)}}function im(n,r,a){try{var l=n.stateNode;GS(l,n.type,a,r),l[wt]=r}catch(d){nt(n,n.return,d)}}function lv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Xr(n.type)||n.tag===4}function rm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||lv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Xr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function sm(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(n,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(n),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=oh));else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode,r=null),n=n.child,n!==null))for(sm(n,r,a),n=n.sibling;n!==null;)sm(n,r,a),n=n.sibling}function Xc(n,r,a){var l=n.tag;if(l===5||l===6)n=n.stateNode,r?a.insertBefore(n,r):a.appendChild(n);else if(l!==4&&(l===27&&Xr(n.type)&&(a=n.stateNode),n=n.child,n!==null))for(Xc(n,r,a),n=n.sibling;n!==null;)Xc(n,r,a),n=n.sibling}function uv(n){var r=n.stateNode,a=n.memoizedProps;try{for(var l=n.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Qt(r,l,a),r[Dt]=n,r[wt]=a}catch(g){nt(n,n.return,g)}}var cr=!1,Tt=!1,am=!1,cv=typeof WeakSet=="function"?WeakSet:Set,zt=null;function SS(n,r){if(n=n.containerInfo,Nm=mh,n=Ty(n),rf(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var T=0,w=-1,x=-1,F=0,W=0,te=n,G=null;t:for(;;){for(var $;te!==a||d!==0&&te.nodeType!==3||(w=T+d),te!==g||l!==0&&te.nodeType!==3||(x=T+l),te.nodeType===3&&(T+=te.nodeValue.length),($=te.firstChild)!==null;)G=te,te=$;for(;;){if(te===n)break t;if(G===a&&++F===d&&(w=T),G===g&&++W===l&&(x=T),($=te.nextSibling)!==null)break;te=G,G=te.parentNode}te=$}a=w===-1||x===-1?null:{start:w,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(Dm={focusedElem:n,selectionRange:a},mh=!1,zt=r;zt!==null;)if(r=zt,n=r.child,(r.subtreeFlags&1024)!==0&&n!==null)n.return=r,zt=n;else for(;zt!==null;){switch(r=zt,g=r.alternate,n=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,a=r,d=g.memoizedProps,g=g.memoizedState,l=a.stateNode;try{var we=na(a.type,d,a.elementType===a.type);n=l.getSnapshotBeforeUpdate(we,g),l.__reactInternalSnapshotBeforeUpdate=n}catch(Ee){nt(a,a.return,Ee)}}break;case 3:if((n&1024)!==0){if(n=r.stateNode.containerInfo,a=n.nodeType,a===9)jm(n);else if(a===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":jm(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=r.sibling,n!==null){n.return=r.return,zt=n;break}zt=r.return}}function hv(n,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Hr(n,a),l&4&&Pl(5,a);break;case 1:if(Hr(n,a),l&4)if(n=a.stateNode,r===null)try{n.componentDidMount()}catch(T){nt(a,a.return,T)}else{var d=na(a.type,r.memoizedProps);r=r.memoizedState;try{n.componentDidUpdate(d,r,n.__reactInternalSnapshotBeforeUpdate)}catch(T){nt(a,a.return,T)}}l&64&&sv(a),l&512&&jl(a,a.return);break;case 3:if(Hr(n,a),l&64&&(n=a.updateQueue,n!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{$y(n,r)}catch(T){nt(a,a.return,T)}}break;case 27:r===null&&l&4&&uv(a);case 26:case 5:Hr(n,a),r===null&&l&4&&ov(a),l&512&&jl(a,a.return);break;case 12:Hr(n,a);break;case 13:Hr(n,a),l&4&&mv(n,a),l&64&&(n=a.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(a=jS.bind(null,a),ZS(n,a))));break;case 22:if(l=a.memoizedState!==null||cr,!l){r=r!==null&&r.memoizedState!==null||Tt,d=cr;var g=Tt;cr=l,(Tt=r)&&!g?Fr(n,a,(a.subtreeFlags&8772)!==0):Hr(n,a),cr=d,Tt=g}break;case 30:break;default:Hr(n,a)}}function dv(n){var r=n.alternate;r!==null&&(n.alternate=null,dv(r)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(r=n.stateNode,r!==null&&Dr(r)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var lt=null,_n=!1;function hr(n,r,a){for(a=a.child;a!==null;)fv(n,r,a),a=a.sibling}function fv(n,r,a){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(ft,a)}catch{}switch(a.tag){case 26:Tt||Ii(a,r),hr(n,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Tt||Ii(a,r);var l=lt,d=_n;Xr(a.type)&&(lt=a.stateNode,_n=!1),hr(n,r,a),Hl(a.stateNode),lt=l,_n=d;break;case 5:Tt||Ii(a,r);case 6:if(l=lt,d=_n,lt=null,hr(n,r,a),lt=l,_n=d,lt!==null)if(_n)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(g){nt(a,r,g)}else try{lt.removeChild(a.stateNode)}catch(g){nt(a,r,g)}break;case 18:lt!==null&&(_n?(n=lt,tE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,a.stateNode),Wl(n)):tE(lt,a.stateNode));break;case 4:l=lt,d=_n,lt=a.stateNode.containerInfo,_n=!0,hr(n,r,a),lt=l,_n=d;break;case 0:case 11:case 14:case 15:Tt||qr(2,a,r),Tt||qr(4,a,r),hr(n,r,a);break;case 1:Tt||(Ii(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&av(a,r,l)),hr(n,r,a);break;case 21:hr(n,r,a);break;case 22:Tt=(l=Tt)||a.memoizedState!==null,hr(n,r,a),Tt=l;break;default:hr(n,r,a)}}function mv(n,r){if(r.memoizedState===null&&(n=r.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Wl(n)}catch(a){nt(r,r.return,a)}}function RS(n){switch(n.tag){case 13:case 19:var r=n.stateNode;return r===null&&(r=n.stateNode=new cv),r;case 22:return n=n.stateNode,r=n._retryCache,r===null&&(r=n._retryCache=new cv),r;default:throw Error(s(435,n.tag))}}function om(n,r){var a=RS(n);r.forEach(function(l){var d=MS.bind(null,n,l);a.has(l)||(a.add(l),l.then(d,d))})}function Nn(n,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],g=n,T=r,w=T;e:for(;w!==null;){switch(w.tag){case 27:if(Xr(w.type)){lt=w.stateNode,_n=!1;break e}break;case 5:lt=w.stateNode,_n=!1;break e;case 3:case 4:lt=w.stateNode.containerInfo,_n=!0;break e}w=w.return}if(lt===null)throw Error(s(160));fv(g,T,d),lt=null,_n=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)pv(r,n),r=r.sibling}var si=null;function pv(n,r){var a=n.alternate,l=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Nn(r,n),Dn(n),l&4&&(qr(3,n,n.return),Pl(3,n),qr(5,n,n.return));break;case 1:Nn(r,n),Dn(n),l&512&&(Tt||a===null||Ii(a,a.return)),l&64&&cr&&(n=n.updateQueue,n!==null&&(l=n.callbacks,l!==null&&(a=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=si;if(Nn(r,n),Dn(n),l&512&&(Tt||a===null||Ii(a,a.return)),l&4){var g=a!==null?a.memoizedState:null;if(l=n.memoizedState,a===null)if(l===null)if(n.stateNode===null){e:{l=n.type,a=n.memoizedProps,d=d.ownerDocument||d;t:switch(l){case"title":g=d.getElementsByTagName("title")[0],(!g||g[Ds]||g[Dt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(l),d.head.insertBefore(g,d.querySelector("head > title"))),Qt(g,l,a),g[Dt]=n,vt(g),l=g;break e;case"link":var T=uE("link","href",d).get(l+(a.href||""));if(T){for(var w=0;w<T.length;w++)if(g=T[w],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){T.splice(w,1);break t}}g=d.createElement(l),Qt(g,l,a),d.head.appendChild(g);break;case"meta":if(T=uE("meta","content",d).get(l+(a.content||""))){for(w=0;w<T.length;w++)if(g=T[w],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){T.splice(w,1);break t}}g=d.createElement(l),Qt(g,l,a),d.head.appendChild(g);break;default:throw Error(s(468,l))}g[Dt]=n,vt(g),l=g}n.stateNode=l}else cE(d,n.type,n.stateNode);else n.stateNode=lE(d,l,n.memoizedProps);else g!==l?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,l===null?cE(d,n.type,n.stateNode):lE(d,l,n.memoizedProps)):l===null&&n.stateNode!==null&&im(n,n.memoizedProps,a.memoizedProps)}break;case 27:Nn(r,n),Dn(n),l&512&&(Tt||a===null||Ii(a,a.return)),a!==null&&l&4&&im(n,n.memoizedProps,a.memoizedProps);break;case 5:if(Nn(r,n),Dn(n),l&512&&(Tt||a===null||Ii(a,a.return)),n.flags&32){d=n.stateNode;try{Bn(d,"")}catch($){nt(n,n.return,$)}}l&4&&n.stateNode!=null&&(d=n.memoizedProps,im(n,d,a!==null?a.memoizedProps:d)),l&1024&&(am=!0);break;case 6:if(Nn(r,n),Dn(n),l&4){if(n.stateNode===null)throw Error(s(162));l=n.memoizedProps,a=n.stateNode;try{a.nodeValue=l}catch($){nt(n,n.return,$)}}break;case 3:if(hh=null,d=si,si=uh(r.containerInfo),Nn(r,n),si=d,Dn(n),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wl(r.containerInfo)}catch($){nt(n,n.return,$)}am&&(am=!1,gv(n));break;case 4:l=si,si=uh(n.stateNode.containerInfo),Nn(r,n),Dn(n),si=l;break;case 12:Nn(r,n),Dn(n);break;case 13:Nn(r,n),Dn(n),n.child.flags&8192&&n.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(fm=Ln()),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,om(n,l)));break;case 22:d=n.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,F=cr,W=Tt;if(cr=F||d,Tt=W||x,Nn(r,n),Tt=W,cr=F,Dn(n),l&8192)e:for(r=n.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||x||cr||Tt||ia(n)),a=null,r=n;;){if(r.tag===5||r.tag===26){if(a===null){x=a=r;try{if(g=x.stateNode,d)T=g.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=x.stateNode;var te=x.memoizedProps.style,G=te!=null&&te.hasOwnProperty("display")?te.display:null;w.style.display=G==null||typeof G=="boolean"?"":(""+G).trim()}}catch($){nt(x,x.return,$)}}}else if(r.tag===6){if(a===null){x=r;try{x.stateNode.nodeValue=d?"":x.memoizedProps}catch($){nt(x,x.return,$)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===n)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===n)break e;for(;r.sibling===null;){if(r.return===null||r.return===n)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=n.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,om(n,a))));break;case 19:Nn(r,n),Dn(n),l&4&&(l=n.updateQueue,l!==null&&(n.updateQueue=null,om(n,l)));break;case 30:break;case 21:break;default:Nn(r,n),Dn(n)}}function Dn(n){var r=n.flags;if(r&2){try{for(var a,l=n.return;l!==null;){if(lv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,g=rm(n);Xc(n,g,d);break;case 5:var T=a.stateNode;a.flags&32&&(Bn(T,""),a.flags&=-33);var w=rm(n);Xc(n,w,T);break;case 3:case 4:var x=a.stateNode.containerInfo,F=rm(n);sm(n,F,x);break;default:throw Error(s(161))}}catch(W){nt(n,n.return,W)}n.flags&=-3}r&4096&&(n.flags&=-4097)}function gv(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var r=n;gv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),n=n.sibling}}function Hr(n,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)hv(n,r.alternate,r),r=r.sibling}function ia(n){for(n=n.child;n!==null;){var r=n;switch(r.tag){case 0:case 11:case 14:case 15:qr(4,r,r.return),ia(r);break;case 1:Ii(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&av(r,r.return,a),ia(r);break;case 27:Hl(r.stateNode);case 26:case 5:Ii(r,r.return),ia(r);break;case 22:r.memoizedState===null&&ia(r);break;case 30:ia(r);break;default:ia(r)}n=n.sibling}}function Fr(n,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=n,g=r,T=g.flags;switch(g.tag){case 0:case 11:case 15:Fr(d,g,a),Pl(4,g);break;case 1:if(Fr(d,g,a),l=g,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){nt(l,l.return,F)}if(l=g,d=l.updateQueue,d!==null){var w=l.stateNode;try{var x=d.shared.hiddenCallbacks;if(x!==null)for(d.shared.hiddenCallbacks=null,d=0;d<x.length;d++)Gy(x[d],w)}catch(F){nt(l,l.return,F)}}a&&T&64&&sv(g),jl(g,g.return);break;case 27:uv(g);case 26:case 5:Fr(d,g,a),a&&l===null&&T&4&&ov(g),jl(g,g.return);break;case 12:Fr(d,g,a);break;case 13:Fr(d,g,a),a&&T&4&&mv(d,g);break;case 22:g.memoizedState===null&&Fr(d,g,a),jl(g,g.return);break;case 30:break;default:Fr(d,g,a)}r=r.sibling}}function lm(n,r){var a=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(a=n.memoizedState.cachePool.pool),n=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(n=r.memoizedState.cachePool.pool),n!==a&&(n!=null&&n.refCount++,a!=null&&vl(a))}function um(n,r){n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n))}function xi(n,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)yv(n,r,a,l),r=r.sibling}function yv(n,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:xi(n,r,a,l),d&2048&&Pl(9,r);break;case 1:xi(n,r,a,l);break;case 3:xi(n,r,a,l),d&2048&&(n=null,r.alternate!==null&&(n=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==n&&(r.refCount++,n!=null&&vl(n)));break;case 12:if(d&2048){xi(n,r,a,l),n=r.stateNode;try{var g=r.memoizedProps,T=g.id,w=g.onPostCommit;typeof w=="function"&&w(T,r.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(x){nt(r,r.return,x)}}else xi(n,r,a,l);break;case 13:xi(n,r,a,l);break;case 23:break;case 22:g=r.stateNode,T=r.alternate,r.memoizedState!==null?g._visibility&2?xi(n,r,a,l):Ml(n,r):g._visibility&2?xi(n,r,a,l):(g._visibility|=2,no(n,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&lm(T,r);break;case 24:xi(n,r,a,l),d&2048&&um(r.alternate,r);break;default:xi(n,r,a,l)}}function no(n,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=n,T=r,w=a,x=l,F=T.flags;switch(T.tag){case 0:case 11:case 15:no(g,T,w,x,d),Pl(8,T);break;case 23:break;case 22:var W=T.stateNode;T.memoizedState!==null?W._visibility&2?no(g,T,w,x,d):Ml(g,T):(W._visibility|=2,no(g,T,w,x,d)),d&&F&2048&&lm(T.alternate,T);break;case 24:no(g,T,w,x,d),d&&F&2048&&um(T.alternate,T);break;default:no(g,T,w,x,d)}r=r.sibling}}function Ml(n,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=n,l=r,d=l.flags;switch(l.tag){case 22:Ml(a,l),d&2048&&lm(l.alternate,l);break;case 24:Ml(a,l),d&2048&&um(l.alternate,l);break;default:Ml(a,l)}r=r.sibling}}var kl=8192;function io(n){if(n.subtreeFlags&kl)for(n=n.child;n!==null;)_v(n),n=n.sibling}function _v(n){switch(n.tag){case 26:io(n),n.flags&kl&&n.memoizedState!==null&&hR(si,n.memoizedState,n.memoizedProps);break;case 5:io(n);break;case 3:case 4:var r=si;si=uh(n.stateNode.containerInfo),io(n),si=r;break;case 22:n.memoizedState===null&&(r=n.alternate,r!==null&&r.memoizedState!==null?(r=kl,kl=16777216,io(n),kl=r):io(n));break;default:io(n)}}function vv(n){var r=n.alternate;if(r!==null&&(n=r.child,n!==null)){r.child=null;do r=n.sibling,n.sibling=null,n=r;while(n!==null)}}function Vl(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];zt=l,Tv(l,n)}vv(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Ev(n),n=n.sibling}function Ev(n){switch(n.tag){case 0:case 11:case 15:Vl(n),n.flags&2048&&qr(9,n,n.return);break;case 3:Vl(n);break;case 12:Vl(n);break;case 22:var r=n.stateNode;n.memoizedState!==null&&r._visibility&2&&(n.return===null||n.return.tag!==13)?(r._visibility&=-3,Wc(n)):Vl(n);break;default:Vl(n)}}function Wc(n){var r=n.deletions;if((n.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];zt=l,Tv(l,n)}vv(n)}for(n=n.child;n!==null;){switch(r=n,r.tag){case 0:case 11:case 15:qr(8,r,r.return),Wc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Wc(r));break;default:Wc(r)}n=n.sibling}}function Tv(n,r){for(;zt!==null;){var a=zt;switch(a.tag){case 0:case 11:case 15:qr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,zt=l;else e:for(a=n;zt!==null;){l=zt;var d=l.sibling,g=l.return;if(dv(l),l===a){zt=null;break e}if(d!==null){d.return=g,zt=d;break e}zt=g}}}var CS={getCacheForType:function(n){var r=tn(jt),a=r.data.get(n);return a===void 0&&(a=n(),r.data.set(n,a)),a}},IS=typeof WeakMap=="function"?WeakMap:Map,Ke=0,rt=null,De=null,Le=0,Qe=0,On=null,Gr=!1,ro=!1,cm=!1,dr=0,pt=0,$r=0,ra=0,hm=0,Qn=0,so=0,Ll=null,vn=null,dm=!1,fm=0,Zc=1/0,Jc=null,Yr=null,Kt=0,Kr=null,ao=null,oo=0,mm=0,pm=null,bv=null,Ul=0,gm=null;function Pn(){if((Ke&2)!==0&&Le!==0)return Le&-Le;if(X.T!==null){var n=Ka;return n!==0?n:wm()}return xr()}function wv(){Qn===0&&(Qn=(Le&536870912)===0||qe?Ko():536870912);var n=Kn.current;return n!==null&&(n.flags|=32),Qn}function jn(n,r,a){(n===rt&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)&&(lo(n,0),Qr(n,Le,Qn,!1)),Fi(n,a),((Ke&2)===0||n!==rt)&&(n===rt&&((Ke&2)===0&&(ra|=a),pt===4&&Qr(n,Le,Qn,!1)),Ni(n))}function Av(n,r,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&n.expiredLanes)===0||Ns(n,r),d=l?DS(n,r):vm(n,r,!0),g=l;do{if(d===0){ro&&!l&&Qr(n,r,0,!1);break}else{if(a=n.current.alternate,g&&!xS(a)){d=vm(n,r,!1),g=!1;continue}if(d===2){if(g=r,n.errorRecoveryDisabledLanes&g)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;e:{var w=n;d=Ll;var x=w.current.memoizedState.isDehydrated;if(x&&(lo(w,T).flags|=256),T=vm(w,T,!1),T!==2){if(cm&&!x){w.errorRecoveryDisabledLanes|=g,ra|=g,d=4;break e}g=vn,vn=d,g!==null&&(vn===null?vn=g:vn.push.apply(vn,g))}d=T}if(g=!1,d!==2)continue}}if(d===1){lo(n,0),Qr(n,r,0,!0);break}e:{switch(l=n,g=d,g){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Qr(l,r,Qn,!Gr);break e;case 2:vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(d=fm+300-Ln(),10<d)){if(Qr(l,r,Qn,!Gr),Sa(l,0,!0)!==0)break e;l.timeoutHandle=Jv(Sv.bind(null,l,a,vn,Jc,dm,r,Qn,ra,so,Gr,g,2,-0,0),d);break e}Sv(l,a,vn,Jc,dm,r,Qn,ra,so,Gr,g,0,-0,0)}}break}while(!0);Ni(n)}function Sv(n,r,a,l,d,g,T,w,x,F,W,te,G,$){if(n.timeoutHandle=-1,te=r.subtreeFlags,(te&8192||(te&16785408)===16785408)&&($l={stylesheets:null,count:0,unsuspend:cR},_v(r),te=dR(),te!==null)){n.cancelPendingCommit=te(Ov.bind(null,n,r,g,a,l,d,T,w,x,W,1,G,$)),Qr(n,g,T,!F);return}Ov(n,r,g,a,l,d,T,w,x)}function xS(n){for(var r=n;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],g=d.getSnapshot;d=d.value;try{if(!In(g(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===n)break;for(;r.sibling===null;){if(r.return===null||r.return===n)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(n,r,a,l){r&=~hm,r&=~ra,n.suspendedLanes|=r,n.pingedLanes&=~r,l&&(n.warmLanes|=r),l=n.expirationTimes;for(var d=r;0<d;){var g=31-en(d),T=1<<g;l[g]=-1,d&=~T}a!==0&&pi(n,a,r)}function eh(){return(Ke&6)===0?(Bl(0),!1):!0}function ym(){if(De!==null){if(Qe===0)var n=De.return;else n=De,rr=Zs=null,jf(n),eo=null,Nl=0,n=De;for(;n!==null;)rv(n.alternate,n),n=n.return;De=null}}function lo(n,r){var a=n.timeoutHandle;a!==-1&&(n.timeoutHandle=-1,YS(a)),a=n.cancelPendingCommit,a!==null&&(n.cancelPendingCommit=null,a()),ym(),rt=n,De=a=tr(n.current,null),Le=r,Qe=0,On=null,Gr=!1,ro=Ns(n,r),cm=!1,so=Qn=hm=ra=$r=pt=0,vn=Ll=null,dm=!1,(r&8)!==0&&(r|=r&32);var l=n.entangledLanes;if(l!==0)for(n=n.entanglements,l&=r;0<l;){var d=31-en(l),g=1<<d;r|=n[d],l&=~g}return dr=r,bc(),a}function Rv(n,r){Ie=null,X.H=zc,r===Tl||r===Dc?(r=Hy(),Qe=3):r===By?(r=Hy(),Qe=4):Qe=r===F_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,On=r,De===null&&(pt=1,$c(n,Fn(r,n.current)))}function Cv(){var n=X.H;return X.H=zc,n===null?zc:n}function Iv(){var n=X.A;return X.A=CS,n}function _m(){pt=4,Gr||(Le&4194048)!==Le&&Kn.current!==null||(ro=!0),($r&134217727)===0&&(ra&134217727)===0||rt===null||Qr(rt,Le,Qn,!1)}function vm(n,r,a){var l=Ke;Ke|=2;var d=Cv(),g=Iv();(rt!==n||Le!==r)&&(Jc=null,lo(n,r)),r=!1;var T=pt;e:do try{if(Qe!==0&&De!==null){var w=De,x=On;switch(Qe){case 8:ym(),T=6;break e;case 3:case 2:case 9:case 6:Kn.current===null&&(r=!0);var F=Qe;if(Qe=0,On=null,uo(n,w,x,F),a&&ro){T=0;break e}break;default:F=Qe,Qe=0,On=null,uo(n,w,x,F)}}NS(),T=pt;break}catch(W){Rv(n,W)}while(!0);return r&&n.shellSuspendCounter++,rr=Zs=null,Ke=l,X.H=d,X.A=g,De===null&&(rt=null,Le=0,bc()),T}function NS(){for(;De!==null;)xv(De)}function DS(n,r){var a=Ke;Ke|=2;var l=Cv(),d=Iv();rt!==n||Le!==r?(Jc=null,Zc=Ln()+500,lo(n,r)):ro=Ns(n,r);e:do try{if(Qe!==0&&De!==null){r=De;var g=On;t:switch(Qe){case 1:Qe=0,On=null,uo(n,r,g,1);break;case 2:case 9:if(zy(g)){Qe=0,On=null,Nv(r);break}r=function(){Qe!==2&&Qe!==9||rt!==n||(Qe=7),Ni(n)},g.then(r,r);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:zy(g)?(Qe=0,On=null,Nv(r)):(Qe=0,On=null,uo(n,r,g,7));break;case 5:var T=null;switch(De.tag){case 26:T=De.memoizedState;case 5:case 27:var w=De;if(!T||hE(T)){Qe=0,On=null;var x=w.sibling;if(x!==null)De=x;else{var F=w.return;F!==null?(De=F,th(F)):De=null}break t}}Qe=0,On=null,uo(n,r,g,5);break;case 6:Qe=0,On=null,uo(n,r,g,6);break;case 8:ym(),pt=6;break e;default:throw Error(s(462))}}OS();break}catch(W){Rv(n,W)}while(!0);return rr=Zs=null,X.H=l,X.A=d,Ke=a,De!==null?0:(rt=null,Le=0,bc(),pt)}function OS(){for(;De!==null&&!Fo();)xv(De)}function xv(n){var r=nv(n.alternate,n,dr);n.memoizedProps=n.pendingProps,r===null?th(n):De=r}function Nv(n){var r=n,a=r.alternate;switch(r.tag){case 15:case 0:r=X_(a,r,r.pendingProps,r.type,void 0,Le);break;case 11:r=X_(a,r,r.pendingProps,r.type.render,r.ref,Le);break;case 5:jf(r);default:rv(a,r),r=De=Dy(r,dr),r=nv(a,r,dr)}n.memoizedProps=n.pendingProps,r===null?th(n):De=r}function uo(n,r,a,l){rr=Zs=null,jf(r),eo=null,Nl=0;var d=r.return;try{if(TS(n,d,r,a,Le)){pt=1,$c(n,Fn(a,n.current)),De=null;return}}catch(g){if(d!==null)throw De=d,g;pt=1,$c(n,Fn(a,n.current)),De=null;return}r.flags&32768?(qe||l===1?n=!0:ro||(Le&536870912)!==0?n=!1:(Gr=n=!0,(l===2||l===9||l===3||l===6)&&(l=Kn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Dv(r,n)):th(r)}function th(n){var r=n;do{if((r.flags&32768)!==0){Dv(r,Gr);return}n=r.return;var a=wS(r.alternate,r,dr);if(a!==null){De=a;return}if(r=r.sibling,r!==null){De=r;return}De=r=n}while(r!==null);pt===0&&(pt=5)}function Dv(n,r){do{var a=AS(n.alternate,n);if(a!==null){a.flags&=32767,De=a;return}if(a=n.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(n=n.sibling,n!==null)){De=n;return}De=n=a}while(n!==null);pt=6,De=null}function Ov(n,r,a,l,d,g,T,w,x){n.cancelPendingCommit=null;do nh();while(Kt!==0);if((Ke&6)!==0)throw Error(s(327));if(r!==null){if(r===n.current)throw Error(s(177));if(g=r.lanes|r.childLanes,g|=uf,Xo(n,a,g,T,w,x),n===rt&&(De=rt=null,Le=0),ao=r,Kr=n,oo=a,mm=g,pm=d,bv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,kS(Rs,function(){return Vv(),null})):(n.callbackNode=null,n.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,d=ue.p,ue.p=2,T=Ke,Ke|=4;try{SS(n,r,a)}finally{Ke=T,ue.p=d,X.T=l}}Kt=1,Pv(),jv(),Mv()}}function Pv(){if(Kt===1){Kt=0;var n=Kr,r=ao,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=ue.p;ue.p=2;var d=Ke;Ke|=4;try{pv(r,n);var g=Dm,T=Ty(n.containerInfo),w=g.focusedElem,x=g.selectionRange;if(T!==w&&w&&w.ownerDocument&&Ey(w.ownerDocument.documentElement,w)){if(x!==null&&rf(w)){var F=x.start,W=x.end;if(W===void 0&&(W=F),"selectionStart"in w)w.selectionStart=F,w.selectionEnd=Math.min(W,w.value.length);else{var te=w.ownerDocument||document,G=te&&te.defaultView||window;if(G.getSelection){var $=G.getSelection(),we=w.textContent.length,Ee=Math.min(x.start,we),tt=x.end===void 0?Ee:Math.min(x.end,we);!$.extend&&Ee>tt&&(T=tt,tt=Ee,Ee=T);var L=vy(w,Ee),j=vy(w,tt);if(L&&j&&($.rangeCount!==1||$.anchorNode!==L.node||$.anchorOffset!==L.offset||$.focusNode!==j.node||$.focusOffset!==j.offset)){var H=te.createRange();H.setStart(L.node,L.offset),$.removeAllRanges(),Ee>tt?($.addRange(H),$.extend(j.node,j.offset)):(H.setEnd(j.node,j.offset),$.addRange(H))}}}}for(te=[],$=w;$=$.parentNode;)$.nodeType===1&&te.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<te.length;w++){var Z=te[w];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}mh=!!Nm,Dm=Nm=null}finally{Ke=d,ue.p=l,X.T=a}}n.current=r,Kt=2}}function jv(){if(Kt===2){Kt=0;var n=Kr,r=ao,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=ue.p;ue.p=2;var d=Ke;Ke|=4;try{hv(n,r.alternate,r)}finally{Ke=d,ue.p=l,X.T=a}}Kt=3}}function Mv(){if(Kt===4||Kt===3){Kt=0,Wu();var n=Kr,r=ao,a=oo,l=bv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Kt=5:(Kt=0,ao=Kr=null,kv(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(Yr=null),Ra(a),r=r.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(ft,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,d=ue.p,ue.p=2,X.T=null;try{for(var g=n.onRecoverableError,T=0;T<l.length;T++){var w=l[T];g(w.value,{componentStack:w.stack})}}finally{X.T=r,ue.p=d}}(oo&3)!==0&&nh(),Ni(n),d=n.pendingLanes,(a&4194090)!==0&&(d&42)!==0?n===gm?Ul++:(Ul=0,gm=n):Ul=0,Bl(0)}}function kv(n,r){(n.pooledCacheLanes&=r)===0&&(r=n.pooledCache,r!=null&&(n.pooledCache=null,vl(r)))}function nh(n){return Pv(),jv(),Mv(),Vv()}function Vv(){if(Kt!==5)return!1;var n=Kr,r=mm;mm=0;var a=Ra(oo),l=X.T,d=ue.p;try{ue.p=32>a?32:a,X.T=null,a=pm,pm=null;var g=Kr,T=oo;if(Kt=0,ao=Kr=null,oo=0,(Ke&6)!==0)throw Error(s(331));var w=Ke;if(Ke|=4,Ev(g.current),yv(g,g.current,T,a),Ke=w,Bl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(ft,g)}catch{}return!0}finally{ue.p=d,X.T=l,kv(n,r)}}function Lv(n,r,a){r=Fn(a,r),r=Kf(n.stateNode,r,2),n=Lr(n,r,2),n!==null&&(Fi(n,2),Ni(n))}function nt(n,r,a){if(n.tag===3)Lv(n,n,a);else for(;r!==null;){if(r.tag===3){Lv(r,n,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Yr===null||!Yr.has(l))){n=Fn(a,n),a=q_(2),l=Lr(r,a,2),l!==null&&(H_(a,l,r,n),Fi(l,2),Ni(l));break}}r=r.return}}function Em(n,r,a){var l=n.pingCache;if(l===null){l=n.pingCache=new IS;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(cm=!0,d.add(a),n=PS.bind(null,n,r,a),r.then(n,n))}function PS(n,r,a){var l=n.pingCache;l!==null&&l.delete(r),n.pingedLanes|=n.suspendedLanes&a,n.warmLanes&=~a,rt===n&&(Le&a)===a&&(pt===4||pt===3&&(Le&62914560)===Le&&300>Ln()-fm?(Ke&2)===0&&lo(n,0):hm|=a,so===Le&&(so=0)),Ni(n)}function Uv(n,r){r===0&&(r=Qo()),n=Fa(n,r),n!==null&&(Fi(n,r),Ni(n))}function jS(n){var r=n.memoizedState,a=0;r!==null&&(a=r.retryLane),Uv(n,a)}function MS(n,r){var a=0;switch(n.tag){case 13:var l=n.stateNode,d=n.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=n.stateNode;break;case 22:l=n.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),Uv(n,a)}function kS(n,r){return As(n,r)}var ih=null,co=null,Tm=!1,rh=!1,bm=!1,sa=0;function Ni(n){n!==co&&n.next===null&&(co===null?ih=co=n:co=co.next=n),rh=!0,Tm||(Tm=!0,LS())}function Bl(n,r){if(!bm&&rh){bm=!0;do for(var a=!1,l=ih;l!==null;){if(n!==0){var d=l.pendingLanes;if(d===0)var g=0;else{var T=l.suspendedLanes,w=l.pingedLanes;g=(1<<31-en(42|n)+1)-1,g&=d&~(T&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Hv(l,g))}else g=Le,g=Sa(l,l===rt?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Ns(l,g)||(a=!0,Hv(l,g));l=l.next}while(a);bm=!1}}function VS(){Bv()}function Bv(){rh=Tm=!1;var n=0;sa!==0&&($S()&&(n=sa),sa=0);for(var r=Ln(),a=null,l=ih;l!==null;){var d=l.next,g=zv(l,r);g===0?(l.next=null,a===null?ih=d:a.next=d,d===null&&(co=a)):(a=l,(n!==0||(g&3)!==0)&&(rh=!0)),l=d}Bl(n)}function zv(n,r){for(var a=n.suspendedLanes,l=n.pingedLanes,d=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var T=31-en(g),w=1<<T,x=d[T];x===-1?((w&a)===0||(w&l)!==0)&&(d[T]=Yo(w,r)):x<=r&&(n.expiredLanes|=w),g&=~w}if(r=rt,a=Le,a=Sa(n,n===r?a:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l=n.callbackNode,a===0||n===r&&(Qe===2||Qe===9)||n.cancelPendingCommit!==null)return l!==null&&l!==null&&Ss(l),n.callbackNode=null,n.callbackPriority=0;if((a&3)===0||Ns(n,a)){if(r=a&-a,r===n.callbackPriority)return r;switch(l!==null&&Ss(l),Ra(a)){case 2:case 8:a=wa;break;case 32:a=Rs;break;case 268435456:a=Aa;break;default:a=Rs}return l=qv.bind(null,n),a=As(a,l),n.callbackPriority=r,n.callbackNode=a,r}return l!==null&&l!==null&&Ss(l),n.callbackPriority=2,n.callbackNode=null,2}function qv(n,r){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var a=n.callbackNode;if(nh()&&n.callbackNode!==a)return null;var l=Le;return l=Sa(n,n===rt?l:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),l===0?null:(Av(n,l,r),zv(n,Ln()),n.callbackNode!=null&&n.callbackNode===a?qv.bind(null,n):null)}function Hv(n,r){if(nh())return null;Av(n,r,!0)}function LS(){KS(function(){(Ke&6)!==0?As(Go,VS):Bv()})}function wm(){return sa===0&&(sa=Ko()),sa}function Fv(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Oa(""+n)}function Gv(n,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,n.id&&a.setAttribute("form",n.id),r.parentNode.insertBefore(a,r),n=new FormData(n),a.parentNode.removeChild(a),n}function US(n,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var g=Fv((d[wt]||null).action),T=l.submitter;T&&(r=(r=T[wt]||null)?Fv(r.formAction):T.getAttribute("formAction"),r!==null&&(g=r,T=null));var w=new Pa("action","action",null,l,d);n.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(sa!==0){var x=T?Gv(d,T):new FormData(d);Hf(a,{pending:!0,data:x,method:d.method,action:g},null,x)}}else typeof g=="function"&&(w.preventDefault(),x=T?Gv(d,T):new FormData(d),Hf(a,{pending:!0,data:x,method:d.method,action:g},g,x))},currentTarget:d}]})}}for(var Am=0;Am<lf.length;Am++){var Sm=lf[Am],BS=Sm.toLowerCase(),zS=Sm[0].toUpperCase()+Sm.slice(1);ri(BS,"on"+zS)}ri(Ay,"onAnimationEnd"),ri(Sy,"onAnimationIteration"),ri(Ry,"onAnimationStart"),ri("dblclick","onDoubleClick"),ri("focusin","onFocus"),ri("focusout","onBlur"),ri(rS,"onTransitionRun"),ri(sS,"onTransitionStart"),ri(aS,"onTransitionCancel"),ri(Cy,"onTransitionEnd"),$i("onMouseEnter",["mouseout","mouseover"]),$i("onMouseLeave",["mouseout","mouseover"]),$i("onPointerEnter",["pointerout","pointerover"]),$i("onPointerLeave",["pointerout","pointerover"]),ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ni("onBeforeInput",["compositionend","keypress","textInput","paste"]),ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function $v(n,r){r=(r&4)!==0;for(var a=0;a<n.length;a++){var l=n[a],d=l.event;l=l.listeners;e:{var g=void 0;if(r)for(var T=l.length-1;0<=T;T--){var w=l[T],x=w.instance,F=w.currentTarget;if(w=w.listener,x!==g&&d.isPropagationStopped())break e;g=w,d.currentTarget=F;try{g(d)}catch(W){Gc(W)}d.currentTarget=null,g=x}else for(T=0;T<l.length;T++){if(w=l[T],x=w.instance,F=w.currentTarget,w=w.listener,x!==g&&d.isPropagationStopped())break e;g=w,d.currentTarget=F;try{g(d)}catch(W){Gc(W)}d.currentTarget=null,g=x}}}}function Oe(n,r){var a=r[Zo];a===void 0&&(a=r[Zo]=new Set);var l=n+"__bubble";a.has(l)||(Yv(r,n,2,!1),a.add(l))}function Rm(n,r,a){var l=0;r&&(l|=4),Yv(a,n,l,r)}var sh="_reactListening"+Math.random().toString(36).slice(2);function Cm(n){if(!n[sh]){n[sh]=!0,Jo.forEach(function(a){a!=="selectionchange"&&(qS.has(a)||Rm(a,!1,n),Rm(a,!0,n))});var r=n.nodeType===9?n:n.ownerDocument;r===null||r[sh]||(r[sh]=!0,Rm("selectionchange",!1,r))}}function Yv(n,r,a,l){switch(yE(r)){case 2:var d=pR;break;case 8:d=gR;break;default:d=zm}a=d.bind(null,r,a,n),d=void 0,!qn||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?n.addEventListener(r,a,{capture:!0,passive:d}):n.addEventListener(r,a,!0):d!==void 0?n.addEventListener(r,a,{passive:d}):n.addEventListener(r,a,!1)}function Im(n,r,a,l,d){var g=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var w=l.stateNode.containerInfo;if(w===d)break;if(T===4)for(T=l.return;T!==null;){var x=T.tag;if((x===3||x===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;w!==null;){if(T=Gi(w),T===null)return;if(x=T.tag,x===5||x===6||x===26||x===27){l=g=T;continue e}w=w.parentNode}}l=l.return}oc(function(){var F=g,W=zn(a),te=[];e:{var G=Iy.get(n);if(G!==void 0){var $=Pa,we=n;switch(n){case"keypress":if(Ti(a)===0)break e;case"keydown":case"keyup":$=Ua;break;case"focusin":we="focus",$=ka;break;case"focusout":we="blur",$=ka;break;case"beforeblur":case"afterblur":$=ka;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Hn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Jd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=pc;break;case Ay:case Sy:case Ry:$=Va;break;case Cy:$=yc;break;case"scroll":case"scrollend":$=lc;break;case"wheel":$=Ba;break;case"copy":case"cut":case"paste":$=La;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=hl;break;case"toggle":case"beforetoggle":$=vc}var Ee=(r&4)!==0,tt=!Ee&&(n==="scroll"||n==="scrollend"),L=Ee?G!==null?G+"Capture":null:G;Ee=[];for(var j=F,H;j!==null;){var Z=j;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||L===null||(Z=Ls(j,L),Z!=null&&Ee.push(ql(j,Z,H))),tt)break;j=j.return}0<Ee.length&&(G=new $(G,we,null,a,W),te.push({event:G,listeners:Ee}))}}if((r&7)===0){e:{if(G=n==="mouseover"||n==="pointerover",$=n==="mouseout"||n==="pointerout",G&&a!==Qi&&(we=a.relatedTarget||a.fromElement)&&(Gi(we)||we[Un]))break e;if(($||G)&&(G=W.window===W?W:(G=W.ownerDocument)?G.defaultView||G.parentWindow:window,$?(we=a.relatedTarget||a.toElement,$=F,we=we?Gi(we):null,we!==null&&(tt=u(we),Ee=we.tag,we!==tt||Ee!==5&&Ee!==27&&Ee!==6)&&(we=null)):($=null,we=F),$!==we)){if(Ee=Hn,Z="onMouseLeave",L="onMouseEnter",j="mouse",(n==="pointerout"||n==="pointerover")&&(Ee=hl,Z="onPointerLeave",L="onPointerEnter",j="pointer"),tt=$==null?G:yi($),H=we==null?G:yi(we),G=new Ee(Z,j+"leave",$,a,W),G.target=tt,G.relatedTarget=H,Z=null,Gi(W)===F&&(Ee=new Ee(L,j+"enter",we,a,W),Ee.target=H,Ee.relatedTarget=tt,Z=Ee),tt=Z,$&&we)t:{for(Ee=$,L=we,j=0,H=Ee;H;H=ho(H))j++;for(H=0,Z=L;Z;Z=ho(Z))H++;for(;0<j-H;)Ee=ho(Ee),j--;for(;0<H-j;)L=ho(L),H--;for(;j--;){if(Ee===L||L!==null&&Ee===L.alternate)break t;Ee=ho(Ee),L=ho(L)}Ee=null}else Ee=null;$!==null&&Kv(te,G,$,Ee,!1),we!==null&&tt!==null&&Kv(te,tt,we,Ee,!0)}}e:{if(G=F?yi(F):window,$=G.nodeName&&G.nodeName.toLowerCase(),$==="select"||$==="input"&&G.type==="file")var me=fy;else if(Pt(G))if(my)me=tS;else{me=JA;var Ne=ZA}else $=G.nodeName,!$||$.toLowerCase()!=="input"||G.type!=="checkbox"&&G.type!=="radio"?F&&rl(F.elementType)&&(me=fy):me=eS;if(me&&(me=me(n,F))){er(te,me,a,W);break e}Ne&&Ne(n,G,F),n==="focusout"&&F&&G.type==="number"&&F.memoizedProps.value!=null&&Pr(G,"number",G.value)}switch(Ne=F?yi(F):window,n){case"focusin":(Pt(Ne)||Ne.contentEditable==="true")&&(za=Ne,sf=F,ml=null);break;case"focusout":ml=sf=za=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,by(te,a,W);break;case"selectionchange":if(iS)break;case"keydown":case"keyup":by(te,a,W)}var ge;if(Ai)e:{switch(n){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else ke?Y(n,a)&&(Te="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Te="onCompositionStart");Te&&(E&&a.locale!=="ko"&&(ke||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&ke&&(ge=al()):(Ei=W,jr="value"in Ei?Ei.value:Ei.textContent,ke=!0)),Ne=ah(F,Te),0<Ne.length&&(Te=new ul(Te,n,null,a,W),te.push({event:Te,listeners:Ne}),ge?Te.data=ge:(ge=le(a),ge!==null&&(Te.data=ge)))),(ge=_?Ot(n,a):Ve(n,a))&&(Te=ah(F,"onBeforeInput"),0<Te.length&&(Ne=new ul("onBeforeInput","beforeinput",null,a,W),te.push({event:Ne,listeners:Te}),Ne.data=ge)),US(te,n,F,a,W)}$v(te,r)})}function ql(n,r,a){return{instance:n,listener:r,currentTarget:a}}function ah(n,r){for(var a=r+"Capture",l=[];n!==null;){var d=n,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=Ls(n,a),d!=null&&l.unshift(ql(n,d,g)),d=Ls(n,r),d!=null&&l.push(ql(n,d,g))),n.tag===3)return l;n=n.return}return[]}function ho(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function Kv(n,r,a,l,d){for(var g=r._reactName,T=[];a!==null&&a!==l;){var w=a,x=w.alternate,F=w.stateNode;if(w=w.tag,x!==null&&x===l)break;w!==5&&w!==26&&w!==27||F===null||(x=F,d?(F=Ls(a,g),F!=null&&T.unshift(ql(a,F,x))):d||(F=Ls(a,g),F!=null&&T.push(ql(a,F,x)))),a=a.return}T.length!==0&&n.push({event:r,listeners:T})}var HS=/\r\n?/g,FS=/\u0000|\uFFFD/g;function Qv(n){return(typeof n=="string"?n:""+n).replace(HS,`
`).replace(FS,"")}function Xv(n,r){return r=Qv(r),Qv(n)===r}function oh(){}function et(n,r,a,l,d,g){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Bn(n,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Bn(n,""+l);break;case"className":_i(n,"class",l);break;case"tabIndex":_i(n,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":_i(n,a,l);break;case"style":il(n,l,g);break;case"data":if(r!=="object"){_i(n,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){n.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Oa(""+l),n.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){n.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(r!=="input"&&et(n,r,"name",d.name,d,null),et(n,r,"formEncType",d.formEncType,d,null),et(n,r,"formMethod",d.formMethod,d,null),et(n,r,"formTarget",d.formTarget,d,null)):(et(n,r,"encType",d.encType,d,null),et(n,r,"method",d.method,d,null),et(n,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){n.removeAttribute(a);break}l=Oa(""+l),n.setAttribute(a,l);break;case"onClick":l!=null&&(n.onclick=oh);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"multiple":n.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":n.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){n.removeAttribute("xlink:href");break}a=Oa(""+l),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""+l):n.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,""):n.removeAttribute(a);break;case"capture":case"download":l===!0?n.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?n.setAttribute(a,l):n.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?n.setAttribute(a,l):n.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?n.removeAttribute(a):n.setAttribute(a,l);break;case"popover":Oe("beforetoggle",n),Oe("toggle",n),Or(n,"popover",l);break;case"xlinkActuate":Gt(n,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Gt(n,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Gt(n,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Gt(n,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Gt(n,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Gt(n,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Gt(n,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Or(n,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Wd.get(a)||a,Or(n,a,l))}}function xm(n,r,a,l,d,g){switch(a){case"style":il(n,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(s(60));n.innerHTML=a}}break;case"children":typeof l=="string"?Bn(n,l):(typeof l=="number"||typeof l=="bigint")&&Bn(n,""+l);break;case"onScroll":l!=null&&Oe("scroll",n);break;case"onScrollEnd":l!=null&&Oe("scrollend",n);break;case"onClick":l!=null&&(n.onclick=oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ca.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),g=n[wt]||null,g=g!=null?g[a]:null,typeof g=="function"&&n.removeEventListener(r,g,d),typeof l=="function")){typeof g!="function"&&g!==null&&(a in n?n[a]=null:n.hasAttribute(a)&&n.removeAttribute(a)),n.addEventListener(r,l,d);break e}a in n?n[a]=l:l===!0?n.setAttribute(a,""):Or(n,a,l)}}}function Qt(n,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",n),Oe("load",n);var l=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var T=a[g];if(T!=null)switch(g){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(n,r,g,T,a,null)}}d&&et(n,r,"srcSet",a.srcSet,a,null),l&&et(n,r,"src",a.src,a,null);return;case"input":Oe("invalid",n);var w=g=T=d=null,x=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var W=a[l];if(W!=null)switch(l){case"name":d=W;break;case"type":T=W;break;case"checked":x=W;break;case"defaultChecked":F=W;break;case"value":g=W;break;case"defaultValue":w=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,r));break;default:et(n,r,l,W,a,null)}}Ms(n,g,w,x,F,T,d,!1),Da(n);return;case"select":Oe("invalid",n),l=T=g=null;for(d in a)if(a.hasOwnProperty(d)&&(w=a[d],w!=null))switch(d){case"value":g=w;break;case"defaultValue":T=w;break;case"multiple":l=w;default:et(n,r,d,w,a,null)}r=g,a=T,n.multiple=!!l,r!=null?Ki(n,!!l,r,!1):a!=null&&Ki(n,!!l,a,!0);return;case"textarea":Oe("invalid",n),g=d=l=null;for(T in a)if(a.hasOwnProperty(T)&&(w=a[T],w!=null))switch(T){case"value":l=w;break;case"defaultValue":d=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:et(n,r,T,w,a,null)}ks(n,l,d,g),Da(n);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(l=a[x],l!=null))switch(x){case"selected":n.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:et(n,r,x,l,a,null)}return;case"dialog":Oe("beforetoggle",n),Oe("toggle",n),Oe("cancel",n),Oe("close",n);break;case"iframe":case"object":Oe("load",n);break;case"video":case"audio":for(l=0;l<zl.length;l++)Oe(zl[l],n);break;case"image":Oe("error",n),Oe("load",n);break;case"details":Oe("toggle",n);break;case"embed":case"source":case"link":Oe("error",n),Oe("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:et(n,r,F,l,a,null)}return;default:if(rl(r)){for(W in a)a.hasOwnProperty(W)&&(l=a[W],l!==void 0&&xm(n,r,W,l,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(l=a[w],l!=null&&et(n,r,w,l,a,null))}function GS(n,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,T=null,w=null,x=null,F=null,W=null;for($ in a){var te=a[$];if(a.hasOwnProperty($)&&te!=null)switch($){case"checked":break;case"value":break;case"defaultValue":x=te;default:l.hasOwnProperty($)||et(n,r,$,null,l,te)}}for(var G in l){var $=l[G];if(te=a[G],l.hasOwnProperty(G)&&($!=null||te!=null))switch(G){case"type":g=$;break;case"name":d=$;break;case"checked":F=$;break;case"defaultChecked":W=$;break;case"value":T=$;break;case"defaultValue":w=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==te&&et(n,r,G,$,l,te)}}Cn(n,T,w,x,F,W,g,d);return;case"select":$=T=w=G=null;for(g in a)if(x=a[g],a.hasOwnProperty(g)&&x!=null)switch(g){case"value":break;case"multiple":$=x;default:l.hasOwnProperty(g)||et(n,r,g,null,l,x)}for(d in l)if(g=l[d],x=a[d],l.hasOwnProperty(d)&&(g!=null||x!=null))switch(d){case"value":G=g;break;case"defaultValue":w=g;break;case"multiple":T=g;default:g!==x&&et(n,r,d,g,l,x)}r=w,a=T,l=$,G!=null?Ki(n,!!a,G,!1):!!l!=!!a&&(r!=null?Ki(n,!!a,r,!0):Ki(n,!!a,a?[]:"",!1));return;case"textarea":$=G=null;for(w in a)if(d=a[w],a.hasOwnProperty(w)&&d!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:et(n,r,w,null,l,d)}for(T in l)if(d=l[T],g=a[T],l.hasOwnProperty(T)&&(d!=null||g!=null))switch(T){case"value":G=d;break;case"defaultValue":$=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==g&&et(n,r,T,d,l,g)}Ze(n,G,$);return;case"option":for(var we in a)if(G=a[we],a.hasOwnProperty(we)&&G!=null&&!l.hasOwnProperty(we))switch(we){case"selected":n.selected=!1;break;default:et(n,r,we,null,l,G)}for(x in l)if(G=l[x],$=a[x],l.hasOwnProperty(x)&&G!==$&&(G!=null||$!=null))switch(x){case"selected":n.selected=G&&typeof G!="function"&&typeof G!="symbol";break;default:et(n,r,x,G,l,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)G=a[Ee],a.hasOwnProperty(Ee)&&G!=null&&!l.hasOwnProperty(Ee)&&et(n,r,Ee,null,l,G);for(F in l)if(G=l[F],$=a[F],l.hasOwnProperty(F)&&G!==$&&(G!=null||$!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(s(137,r));break;default:et(n,r,F,G,l,$)}return;default:if(rl(r)){for(var tt in a)G=a[tt],a.hasOwnProperty(tt)&&G!==void 0&&!l.hasOwnProperty(tt)&&xm(n,r,tt,void 0,l,G);for(W in l)G=l[W],$=a[W],!l.hasOwnProperty(W)||G===$||G===void 0&&$===void 0||xm(n,r,W,G,l,$);return}}for(var L in a)G=a[L],a.hasOwnProperty(L)&&G!=null&&!l.hasOwnProperty(L)&&et(n,r,L,null,l,G);for(te in l)G=l[te],$=a[te],!l.hasOwnProperty(te)||G===$||G==null&&$==null||et(n,r,te,G,l,$)}var Nm=null,Dm=null;function lh(n){return n.nodeType===9?n:n.ownerDocument}function Wv(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zv(n,r){if(n===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&r==="foreignObject"?0:n}function Om(n,r){return n==="textarea"||n==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pm=null;function $S(){var n=window.event;return n&&n.type==="popstate"?n===Pm?!1:(Pm=n,!0):(Pm=null,!1)}var Jv=typeof setTimeout=="function"?setTimeout:void 0,YS=typeof clearTimeout=="function"?clearTimeout:void 0,eE=typeof Promise=="function"?Promise:void 0,KS=typeof queueMicrotask=="function"?queueMicrotask:typeof eE<"u"?function(n){return eE.resolve(null).then(n).catch(QS)}:Jv;function QS(n){setTimeout(function(){throw n})}function Xr(n){return n==="head"}function tE(n,r){var a=r,l=0,d=0;do{var g=a.nextSibling;if(n.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<l&&8>l){a=l;var T=n.ownerDocument;if(a&1&&Hl(T.documentElement),a&2&&Hl(T.body),a&4)for(a=T.head,Hl(a),T=a.firstChild;T;){var w=T.nextSibling,x=T.nodeName;T[Ds]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&T.rel.toLowerCase()==="stylesheet"||a.removeChild(T),T=w}}if(d===0){n.removeChild(g),Wl(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=g}while(a);Wl(r)}function jm(n){var r=n.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":jm(a),Dr(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}n.removeChild(a)}}function XS(n,r,a,l){for(;n.nodeType===1;){var d=a;if(n.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(l){if(!n[Ds])switch(r){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(r==="input"&&n.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=ai(n.nextSibling),n===null)break}return null}function WS(n,r,a){if(r==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=ai(n.nextSibling),n===null))return null;return n}function Mm(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function ZS(n,r){var a=n.ownerDocument;if(n.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),n._reactRetry=l}}function ai(n){for(;n!=null;n=n.nextSibling){var r=n.nodeType;if(r===1||r===3)break;if(r===8){if(r=n.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return n}var km=null;function nE(n){n=n.previousSibling;for(var r=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return n;r--}else a==="/$"&&r++}n=n.previousSibling}return null}function iE(n,r,a){switch(r=lh(a),n){case"html":if(n=r.documentElement,!n)throw Error(s(452));return n;case"head":if(n=r.head,!n)throw Error(s(453));return n;case"body":if(n=r.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function Hl(n){for(var r=n.attributes;r.length;)n.removeAttributeNode(r[0]);Dr(n)}var Xn=new Map,rE=new Set;function uh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var fr=ue.d;ue.d={f:JS,r:eR,D:tR,C:nR,L:iR,m:rR,X:aR,S:sR,M:oR};function JS(){var n=fr.f(),r=eh();return n||r}function eR(n){var r=gi(n);r!==null&&r.tag===5&&r.type==="form"?A_(r):fr.r(n)}var fo=typeof document>"u"?null:document;function sE(n,r,a){var l=fo;if(l&&typeof r=="string"&&r){var d=At(r);d='link[rel="'+n+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),rE.has(d)||(rE.add(d),n={rel:n,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Qt(r,"link",n),vt(r),l.head.appendChild(r)))}}function tR(n){fr.D(n),sE("dns-prefetch",n,null)}function nR(n,r){fr.C(n,r),sE("preconnect",n,r)}function iR(n,r,a){fr.L(n,r,a);var l=fo;if(l&&n&&r){var d='link[rel="preload"][as="'+At(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+At(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+At(a.imageSizes)+'"]')):d+='[href="'+At(n)+'"]';var g=d;switch(r){case"style":g=mo(n);break;case"script":g=po(n)}Xn.has(g)||(n=v({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:n,as:r},a),Xn.set(g,n),l.querySelector(d)!==null||r==="style"&&l.querySelector(Fl(g))||r==="script"&&l.querySelector(Gl(g))||(r=l.createElement("link"),Qt(r,"link",n),vt(r),l.head.appendChild(r)))}}function rR(n,r){fr.m(n,r);var a=fo;if(a&&n){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+At(l)+'"][href="'+At(n)+'"]',g=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=po(n)}if(!Xn.has(g)&&(n=v({rel:"modulepreload",href:n},r),Xn.set(g,n),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Gl(g)))return}l=a.createElement("link"),Qt(l,"link",n),vt(l),a.head.appendChild(l)}}}function sR(n,r,a){fr.S(n,r,a);var l=fo;if(l&&n){var d=dn(l).hoistableStyles,g=mo(n);r=r||"default";var T=d.get(g);if(!T){var w={loading:0,preload:null};if(T=l.querySelector(Fl(g)))w.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":r},a),(a=Xn.get(g))&&Vm(n,a);var x=T=l.createElement("link");vt(x),Qt(x,"link",n),x._p=new Promise(function(F,W){x.onload=F,x.onerror=W}),x.addEventListener("load",function(){w.loading|=1}),x.addEventListener("error",function(){w.loading|=2}),w.loading|=4,ch(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:w},d.set(g,T)}}}function aR(n,r){fr.X(n,r);var a=fo;if(a&&n){var l=dn(a).hoistableScripts,d=po(n),g=l.get(d);g||(g=a.querySelector(Gl(d)),g||(n=v({src:n,async:!0},r),(r=Xn.get(d))&&Lm(n,r),g=a.createElement("script"),vt(g),Qt(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function oR(n,r){fr.M(n,r);var a=fo;if(a&&n){var l=dn(a).hoistableScripts,d=po(n),g=l.get(d);g||(g=a.querySelector(Gl(d)),g||(n=v({src:n,async:!0,type:"module"},r),(r=Xn.get(d))&&Lm(n,r),g=a.createElement("script"),vt(g),Qt(g,"link",n),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function aE(n,r,a,l){var d=(d=Ae.current)?uh(d):null;if(!d)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=mo(a.href),a=dn(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){n=mo(a.href);var g=dn(d).hoistableStyles,T=g.get(n);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,T),(g=d.querySelector(Fl(n)))&&!g._p&&(T.instance=g,T.state.loading=5),Xn.has(n)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Xn.set(n,a),g||lR(d,n,a,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=po(a),a=dn(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function mo(n){return'href="'+At(n)+'"'}function Fl(n){return'link[rel="stylesheet"]['+n+"]"}function oE(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function lR(n,r,a,l){n.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=n.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Qt(r,"link",a),vt(r),n.head.appendChild(r))}function po(n){return'[src="'+At(n)+'"]'}function Gl(n){return"script[async]"+n}function lE(n,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=n.querySelector('style[data-href~="'+At(a.href)+'"]');if(l)return r.instance=l,vt(l),l;var d=v({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(n.ownerDocument||n).createElement("style"),vt(l),Qt(l,"style",d),ch(l,a.precedence,n),r.instance=l;case"stylesheet":d=mo(a.href);var g=n.querySelector(Fl(d));if(g)return r.state.loading|=4,r.instance=g,vt(g),g;l=oE(a),(d=Xn.get(d))&&Vm(l,d),g=(n.ownerDocument||n).createElement("link"),vt(g);var T=g;return T._p=new Promise(function(w,x){T.onload=w,T.onerror=x}),Qt(g,"link",l),r.state.loading|=4,ch(g,a.precedence,n),r.instance=g;case"script":return g=po(a.src),(d=n.querySelector(Gl(g)))?(r.instance=d,vt(d),d):(l=a,(d=Xn.get(g))&&(l=v({},a),Lm(l,d)),n=n.ownerDocument||n,d=n.createElement("script"),vt(d),Qt(d,"link",l),n.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,ch(l,a.precedence,n));return r.instance}function ch(n,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,g=d,T=0;T<l.length;T++){var w=l[T];if(w.dataset.precedence===r)g=w;else if(g!==d)break}g?g.parentNode.insertBefore(n,g.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(n,r.firstChild))}function Vm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.title==null&&(n.title=r.title)}function Lm(n,r){n.crossOrigin==null&&(n.crossOrigin=r.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=r.referrerPolicy),n.integrity==null&&(n.integrity=r.integrity)}var hh=null;function uE(n,r,a){if(hh===null){var l=new Map,d=hh=new Map;d.set(a,l)}else d=hh,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(n))return l;for(l.set(n,null),a=a.getElementsByTagName(n),d=0;d<a.length;d++){var g=a[d];if(!(g[Ds]||g[Dt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var T=g.getAttribute(r)||"";T=n+T;var w=l.get(T);w?w.push(g):l.set(T,[g])}}return l}function cE(n,r,a){n=n.ownerDocument||n,n.head.insertBefore(a,r==="title"?n.querySelector("head > title"):null)}function uR(n,r,a){if(a===1||r.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return n=r.disabled,typeof r.precedence=="string"&&n==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function hE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var $l=null;function cR(){}function hR(n,r,a){if($l===null)throw Error(s(475));var l=$l;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=mo(a.href),g=n.querySelector(Fl(d));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(l.count++,l=dh.bind(l),n.then(l,l)),r.state.loading|=4,r.instance=g,vt(g);return}g=n.ownerDocument||n,a=oE(a),(d=Xn.get(d))&&Vm(a,d),g=g.createElement("link"),vt(g);var T=g;T._p=new Promise(function(w,x){T.onload=w,T.onerror=x}),Qt(g,"link",a),r.instance=g}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=dh.bind(l),n.addEventListener("load",r),n.addEventListener("error",r))}}function dR(){if($l===null)throw Error(s(475));var n=$l;return n.stylesheets&&n.count===0&&Um(n,n.stylesheets),0<n.count?function(r){var a=setTimeout(function(){if(n.stylesheets&&Um(n,n.stylesheets),n.unsuspend){var l=n.unsuspend;n.unsuspend=null,l()}},6e4);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(a)}}:null}function dh(){if(this.count--,this.count===0){if(this.stylesheets)Um(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var fh=null;function Um(n,r){n.stylesheets=null,n.unsuspend!==null&&(n.count++,fh=new Map,r.forEach(fR,n),fh=null,dh.call(n))}function fR(n,r){if(!(r.state.loading&4)){var a=fh.get(n);if(a)var l=a.get(null);else{a=new Map,fh.set(n,a);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var T=d[g];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(a.set(T.dataset.precedence,T),l=T)}l&&a.set(null,l)}d=r.instance,T=d.getAttribute("data-precedence"),g=a.get(T)||l,g===l&&a.set(null,d),a.set(T,d),this.count++,l=dh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),g?g.parentNode.insertBefore(d,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),r.state.loading|=4}}var Yl={$$typeof:Q,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function mR(n,r,a,l,d,g,T,w){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hi(0),this.hiddenUpdates=Hi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function dE(n,r,a,l,d,g,T,w,x,F,W,te){return n=new mR(n,r,a,T,w,x,F,te),r=1,g===!0&&(r|=24),g=xn(3,null,null,r),n.current=g,g.stateNode=n,r=Ef(),r.refCount++,n.pooledCache=r,r.refCount++,g.memoizedState={element:l,isDehydrated:a,cache:r},Af(g),n}function fE(n){return n?(n=Ga,n):Ga}function mE(n,r,a,l,d,g){d=fE(d),l.context===null?l.context=d:l.pendingContext=d,l=Vr(r),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=Lr(n,l,r),a!==null&&(jn(a,n,r),wl(a,n,r))}function pE(n,r){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<r?a:r}}function Bm(n,r){pE(n,r),(n=n.alternate)&&pE(n,r)}function gE(n){if(n.tag===13){var r=Fa(n,67108864);r!==null&&jn(r,n,67108864),Bm(n,67108864)}}var mh=!0;function pR(n,r,a,l){var d=X.T;X.T=null;var g=ue.p;try{ue.p=2,zm(n,r,a,l)}finally{ue.p=g,X.T=d}}function gR(n,r,a,l){var d=X.T;X.T=null;var g=ue.p;try{ue.p=8,zm(n,r,a,l)}finally{ue.p=g,X.T=d}}function zm(n,r,a,l){if(mh){var d=qm(l);if(d===null)Im(n,r,l,ph,a),_E(n,l);else if(_R(d,n,r,a,l))l.stopPropagation();else if(_E(n,l),r&4&&-1<yR.indexOf(n)){for(;d!==null;){var g=gi(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var T=ti(g.pendingLanes);if(T!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var x=1<<31-en(T);w.entanglements[1]|=x,T&=~x}Ni(g),(Ke&6)===0&&(Zc=Ln()+500,Bl(0))}}break;case 13:w=Fa(g,2),w!==null&&jn(w,g,2),eh(),Bm(g,2)}if(g=qm(l),g===null&&Im(n,r,l,ph,a),g===d)break;d=g}d!==null&&l.stopPropagation()}else Im(n,r,l,null,a)}}function qm(n){return n=zn(n),Hm(n)}var ph=null;function Hm(n){if(ph=null,n=Gi(n),n!==null){var r=u(n);if(r===null)n=null;else{var a=r.tag;if(a===13){if(n=h(r),n!==null)return n;n=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;n=null}else r!==n&&(n=null)}}return ph=n,null}function yE(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Gd()){case Go:return 2;case wa:return 8;case Rs:case $d:return 32;case Aa:return 268435456;default:return 32}default:return 32}}var Fm=!1,Wr=null,Zr=null,Jr=null,Kl=new Map,Ql=new Map,es=[],yR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _E(n,r){switch(n){case"focusin":case"focusout":Wr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":Kl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ql.delete(r.pointerId)}}function Xl(n,r,a,l,d,g){return n===null||n.nativeEvent!==g?(n={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:g,targetContainers:[d]},r!==null&&(r=gi(r),r!==null&&gE(r)),n):(n.eventSystemFlags|=l,r=n.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),n)}function _R(n,r,a,l,d){switch(r){case"focusin":return Wr=Xl(Wr,n,r,a,l,d),!0;case"dragenter":return Zr=Xl(Zr,n,r,a,l,d),!0;case"mouseover":return Jr=Xl(Jr,n,r,a,l,d),!0;case"pointerover":var g=d.pointerId;return Kl.set(g,Xl(Kl.get(g)||null,n,r,a,l,d)),!0;case"gotpointercapture":return g=d.pointerId,Ql.set(g,Xl(Ql.get(g)||null,n,r,a,l,d)),!0}return!1}function vE(n){var r=Gi(n.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){n.blockedOn=r,ec(n.priority,function(){if(a.tag===13){var l=Pn();l=Ir(l);var d=Fa(a,l);d!==null&&jn(d,a,l),Bm(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function gh(n){if(n.blockedOn!==null)return!1;for(var r=n.targetContainers;0<r.length;){var a=qm(n.nativeEvent);if(a===null){a=n.nativeEvent;var l=new a.constructor(a.type,a);Qi=l,a.target.dispatchEvent(l),Qi=null}else return r=gi(a),r!==null&&gE(r),n.blockedOn=a,!1;r.shift()}return!0}function EE(n,r,a){gh(n)&&a.delete(r)}function vR(){Fm=!1,Wr!==null&&gh(Wr)&&(Wr=null),Zr!==null&&gh(Zr)&&(Zr=null),Jr!==null&&gh(Jr)&&(Jr=null),Kl.forEach(EE),Ql.forEach(EE)}function yh(n,r){n.blockedOn===r&&(n.blockedOn=null,Fm||(Fm=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,vR)))}var _h=null;function TE(n){_h!==n&&(_h=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){_h===n&&(_h=null);for(var r=0;r<n.length;r+=3){var a=n[r],l=n[r+1],d=n[r+2];if(typeof l!="function"){if(Hm(l||a)===null)continue;break}var g=gi(a);g!==null&&(n.splice(r,3),r-=3,Hf(g,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Wl(n){function r(x){return yh(x,n)}Wr!==null&&yh(Wr,n),Zr!==null&&yh(Zr,n),Jr!==null&&yh(Jr,n),Kl.forEach(r),Ql.forEach(r);for(var a=0;a<es.length;a++){var l=es[a];l.blockedOn===n&&(l.blockedOn=null)}for(;0<es.length&&(a=es[0],a.blockedOn===null);)vE(a),a.blockedOn===null&&es.shift();if(a=(n.ownerDocument||n).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],T=d[wt]||null;if(typeof g=="function")T||TE(a);else if(T){var w=null;if(g&&g.hasAttribute("formAction")){if(d=g,T=g[wt]||null)w=T.formAction;else if(Hm(d)!==null)continue}else w=T.action;typeof w=="function"?a[l+1]=w:(a.splice(l,3),l-=3),TE(a)}}}function Gm(n){this._internalRoot=n}vh.prototype.render=Gm.prototype.render=function(n){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Pn();mE(a,l,n,r,null,null)},vh.prototype.unmount=Gm.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var r=n.containerInfo;mE(n.current,2,null,n,null,null),eh(),r[Un]=null}};function vh(n){this._internalRoot=n}vh.prototype.unstable_scheduleHydration=function(n){if(n){var r=xr();n={blockedOn:null,target:n,priority:r};for(var a=0;a<es.length&&r!==0&&r<es[a].priority;a++);es.splice(a,0,n),a===0&&vE(n)}};var bE=e.version;if(bE!=="19.1.1")throw Error(s(527,bE,"19.1.1"));ue.findDOMNode=function(n){var r=n._reactInternals;if(r===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(r),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var ER={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eh.isDisabled&&Eh.supportsFiber)try{ft=Eh.inject(ER),Ye=Eh}catch{}}return Jl.createRoot=function(n,r){if(!o(n))throw Error(s(299));var a=!1,l="",d=L_,g=U_,T=B_,w=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=dE(n,1,!1,null,null,a,l,d,g,T,w,null),n[Un]=r.current,Cm(n),new Gm(r)},Jl.hydrateRoot=function(n,r,a){if(!o(n))throw Error(s(299));var l=!1,d="",g=L_,T=U_,w=B_,x=null,F=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(T=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(x=a.unstable_transitionCallbacks),a.formState!==void 0&&(F=a.formState)),r=dE(n,1,!0,r,a??null,l,d,g,T,w,x,F),r.context=fE(null),a=r.current,l=Pn(),l=Ir(l),d=Vr(l),d.callback=null,Lr(a,d,l),a=l,r.current.lanes=a,Fi(r,a),Ni(r),n[Un]=r.current,Cm(n),new vh(r)},Jl.version="19.1.1",Jl}var OE;function NR(){if(OE)return Km.exports;OE=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Km.exports=xR(),Km.exports}var DR=NR();const OR=jb(DR);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var PE="popstate";function PR(i={}){function e(s,o){let{pathname:u,search:h,hash:m}=s.location;return yp("",{pathname:u,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:wu(o)}return MR(e,t,null,i)}function ut(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function ui(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jR(){return Math.random().toString(36).substring(2,10)}function jE(i,e){return{usr:i.state,key:i.key,idx:e}}function yp(i,e,t=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?jo(e):e,state:t,key:e&&e.key||s||jR()}}function wu({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function jo(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function MR(i,e,t,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,m="POP",p=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function b(){m="POP";let V=v(),ee=V==null?null:V-y;y=V,p&&p({action:m,location:q.location,delta:ee})}function A(V,ee){m="PUSH";let K=yp(q.location,V,ee);y=v()+1;let Q=jE(K,y),ie=q.createHref(K);try{h.pushState(Q,"",ie)}catch(ae){if(ae instanceof DOMException&&ae.name==="DataCloneError")throw ae;o.location.assign(ie)}u&&p&&p({action:m,location:q.location,delta:1})}function R(V,ee){m="REPLACE";let K=yp(q.location,V,ee);y=v();let Q=jE(K,y),ie=q.createHref(K);h.replaceState(Q,"",ie),u&&p&&p({action:m,location:q.location,delta:0})}function O(V){return kR(V)}let q={get action(){return m},get location(){return i(o,h)},listen(V){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(PE,b),p=V,()=>{o.removeEventListener(PE,b),p=null}},createHref(V){return e(o,V)},createURL:O,encodeLocation(V){let ee=O(V);return{pathname:ee.pathname,search:ee.search,hash:ee.hash}},push:A,replace:R,go(V){return h.go(V)}};return q}function kR(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ut(t,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:wu(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Mb(i,e,t="/"){return VR(i,e,t,!1)}function VR(i,e,t,s){let o=typeof e=="string"?jo(e):e,u=_r(o.pathname||"/",t);if(u==null)return null;let h=kb(i);LR(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let y=QR(u);m=YR(h[p],y,s)}return m}function kb(i,e=[],t=[],s="",o=!1){let u=(h,m,p=o,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&p)return;ut(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let b=gr([s,v.relativePath]),A=t.concat(v);h.children&&h.children.length>0&&(ut(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),kb(h.children,e,A,b,p)),!(h.path==null&&!h.index)&&e.push({path:b,score:GR(b,h.index),routesMeta:A})};return i.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let p of Vb(h.path))u(h,m,!0,p)}),e}function Vb(i){let e=i.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),u=t.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=Vb(s.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>i.startsWith("/")&&p===""?"/":p)}function LR(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:$R(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var UR=/^:[\w-]+$/,BR=3,zR=2,qR=1,HR=10,FR=-2,ME=i=>i==="*";function GR(i,e){let t=i.split("/"),s=t.length;return t.some(ME)&&(s+=FR),e&&(s+=zR),t.filter(o=>!ME(o)).reduce((o,u)=>o+(UR.test(u)?BR:u===""?qR:HR),s)}function $R(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function YR(i,e,t=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let m=0;m<s.length;++m){let p=s[m],y=m===s.length-1,v=u==="/"?e:e.slice(u.length)||"/",b=qh({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),A=p.route;if(!b&&y&&t&&!s[s.length-1].route.index&&(b=qh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!b)return null;Object.assign(o,b.params),h.push({params:o,pathname:gr([u,b.pathname]),pathnameBase:JR(gr([u,b.pathnameBase])),route:A}),b.pathnameBase!=="/"&&(u=gr([u,b.pathnameBase]))}return h}function qh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,s]=KR(i.path,i.caseSensitive,i.end),o=e.match(t);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:s.reduce((y,{paramName:v,isOptional:b},A)=>{if(v==="*"){let O=m[A]||"";h=u.slice(0,u.length-O.length).replace(/(.)\/+$/,"$1")}const R=m[A];return b&&!R?y[v]=void 0:y[v]=(R||"").replace(/%2F/g,"/"),y},{}),pathname:u,pathnameBase:h,pattern:i}}function KR(i,e=!1,t=!0){ui(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(s.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function QR(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ui(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function _r(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=i.charAt(t);return s&&s!=="/"?null:i.slice(t)||"/"}function XR(i,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof i=="string"?jo(i):i;return{pathname:t?t.startsWith("/")?t:WR(t,e):e,search:e1(s),hash:t1(o)}}function WR(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Zm(i,e,t,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZR(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Wp(i){let e=ZR(i);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function Zp(i,e,t,s=!1){let o;typeof i=="string"?o=jo(i):(o={...i},ut(!o.pathname||!o.pathname.includes("?"),Zm("?","pathname","search",o)),ut(!o.pathname||!o.pathname.includes("#"),Zm("#","pathname","hash",o)),ut(!o.search||!o.search.includes("#"),Zm("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=t;else{let b=e.length-1;if(!s&&h.startsWith("..")){let A=h.split("/");for(;A[0]==="..";)A.shift(),b-=1;o.pathname=A.join("/")}m=b>=0?e[b]:"/"}let p=XR(o,m),y=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}var gr=i=>i.join("/").replace(/\/\/+/g,"/"),JR=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),e1=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,t1=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function n1(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}var Lb=["POST","PUT","PATCH","DELETE"];new Set(Lb);var i1=["GET",...Lb];new Set(i1);var Mo=B.createContext(null);Mo.displayName="DataRouter";var ud=B.createContext(null);ud.displayName="DataRouterState";B.createContext(!1);var Ub=B.createContext({isTransitioning:!1});Ub.displayName="ViewTransition";var r1=B.createContext(new Map);r1.displayName="Fetchers";var s1=B.createContext(null);s1.displayName="Await";var hi=B.createContext(null);hi.displayName="Navigation";var Vu=B.createContext(null);Vu.displayName="Location";var di=B.createContext({outlet:null,matches:[],isDataRoute:!1});di.displayName="Route";var Jp=B.createContext(null);Jp.displayName="RouteError";function a1(i,{relative:e}={}){ut(ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=B.useContext(hi),{hash:o,pathname:u,search:h}=Lu(i,{relative:e}),m=u;return t!=="/"&&(m=u==="/"?t:gr([t,u])),s.createHref({pathname:m,search:h,hash:o})}function ko(){return B.useContext(Vu)!=null}function Bi(){return ut(ko(),"useLocation() may be used only in the context of a <Router> component."),B.useContext(Vu).location}var Bb="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zb(i){B.useContext(hi).static||B.useLayoutEffect(i)}function cd(){let{isDataRoute:i}=B.useContext(di);return i?T1():o1()}function o1(){ut(ko(),"useNavigate() may be used only in the context of a <Router> component.");let i=B.useContext(Mo),{basename:e,navigator:t}=B.useContext(hi),{matches:s}=B.useContext(di),{pathname:o}=Bi(),u=JSON.stringify(Wp(s)),h=B.useRef(!1);return zb(()=>{h.current=!0}),B.useCallback((p,y={})=>{if(ui(h.current,Bb),!h.current)return;if(typeof p=="number"){t.go(p);return}let v=Zp(p,JSON.parse(u),o,y.relative==="path");i==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:gr([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,u,o,i])}var l1=B.createContext(null);function u1(i){let e=B.useContext(di).outlet;return e&&B.createElement(l1.Provider,{value:i},e)}function Lu(i,{relative:e}={}){let{matches:t}=B.useContext(di),{pathname:s}=Bi(),o=JSON.stringify(Wp(t));return B.useMemo(()=>Zp(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function c1(i,e){return qb(i,e)}function qb(i,e,t,s,o){ut(ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=B.useContext(hi),{matches:h}=B.useContext(di),m=h[h.length-1],p=m?m.params:{},y=m?m.pathname:"/",v=m?m.pathnameBase:"/",b=m&&m.route;{let K=b&&b.path||"";Hb(y,!b||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let A=Bi(),R;if(e){let K=typeof e=="string"?jo(e):e;ut(v==="/"||K.pathname?.startsWith(v),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${K.pathname}" was given in the \`location\` prop.`),R=K}else R=A;let O=R.pathname||"/",q=O;if(v!=="/"){let K=v.replace(/^\//,"").split("/");q="/"+O.replace(/^\//,"").split("/").slice(K.length).join("/")}let V=Mb(i,{pathname:q});ui(b||V!=null,`No routes matched location "${R.pathname}${R.search}${R.hash}" `),ui(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${R.pathname}${R.search}${R.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ee=p1(V&&V.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:gr([v,u.encodeLocation?u.encodeLocation(K.pathname).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?v:gr([v,u.encodeLocation?u.encodeLocation(K.pathnameBase).pathname:K.pathnameBase])})),h,t,s,o);return e&&ee?B.createElement(Vu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...R},navigationType:"POP"}},ee):ee}function h1(){let i=E1(),e=n1(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=B.createElement(B.Fragment,null,B.createElement("p",null,"💿 Hey developer 👋"),B.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",B.createElement("code",{style:u},"ErrorBoundary")," or"," ",B.createElement("code",{style:u},"errorElement")," prop on your route.")),B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:o},t):null,h)}var d1=B.createElement(h1,null),f1=class extends B.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.unstable_onError?this.props.unstable_onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?B.createElement(di.Provider,{value:this.props.routeContext},B.createElement(Jp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function m1({routeContext:i,match:e,children:t}){let s=B.useContext(Mo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),B.createElement(di.Provider,{value:i},t)}function p1(i,e=[],t=null,s=null,o=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let u=i,h=t?.errors;if(h!=null){let y=u.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);ut(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let m=!1,p=-1;if(t)for(let y=0;y<u.length;y++){let v=u[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=y),v.route.id){let{loaderData:b,errors:A}=t,R=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!A||A[v.route.id]===void 0);if(v.route.lazy||R){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((y,v,b)=>{let A,R=!1,O=null,q=null;t&&(A=h&&v.route.id?h[v.route.id]:void 0,O=v.route.errorElement||d1,m&&(p<0&&b===0?(Hb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,q=null):p===b&&(R=!0,q=v.route.hydrateFallbackElement||null)));let V=e.concat(u.slice(0,b+1)),ee=()=>{let K;return A?K=O:R?K=q:v.route.Component?K=B.createElement(v.route.Component,null):v.route.element?K=v.route.element:K=y,B.createElement(m1,{match:v,routeContext:{outlet:y,matches:V,isDataRoute:t!=null},children:K})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?B.createElement(f1,{location:t.location,revalidation:t.revalidation,component:O,error:A,children:ee(),routeContext:{outlet:null,matches:V,isDataRoute:!0},unstable_onError:s}):ee()},null)}function eg(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function g1(i){let e=B.useContext(Mo);return ut(e,eg(i)),e}function y1(i){let e=B.useContext(ud);return ut(e,eg(i)),e}function _1(i){let e=B.useContext(di);return ut(e,eg(i)),e}function tg(i){let e=_1(i),t=e.matches[e.matches.length-1];return ut(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function v1(){return tg("useRouteId")}function E1(){let i=B.useContext(Jp),e=y1("useRouteError"),t=tg("useRouteError");return i!==void 0?i:e.errors?.[t]}function T1(){let{router:i}=g1("useNavigate"),e=tg("useNavigate"),t=B.useRef(!1);return zb(()=>{t.current=!0}),B.useCallback(async(o,u={})=>{ui(t.current,Bb),t.current&&(typeof o=="number"?i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var kE={};function Hb(i,e,t){!e&&!kE[i]&&(kE[i]=!0,ui(!1,t))}B.memo(b1);function b1({routes:i,future:e,state:t,unstable_onError:s}){return qb(i,void 0,t,s,e)}function _p({to:i,replace:e,state:t,relative:s}){ut(ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=B.useContext(hi);ui(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:u}=B.useContext(di),{pathname:h}=Bi(),m=cd(),p=Zp(i,Wp(u),h,s==="path"),y=JSON.stringify(p);return B.useEffect(()=>{m(JSON.parse(y),{replace:e,state:t,relative:s})},[m,y,s,e,t]),null}function Fb(i){return u1(i.context)}function He(i){ut(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function w1({basename:i="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:u=!1}){ut(!ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=i.replace(/^\/*/,"/"),m=B.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof t=="string"&&(t=jo(t));let{pathname:p="/",search:y="",hash:v="",state:b=null,key:A="default"}=t,R=B.useMemo(()=>{let O=_r(p,h);return O==null?null:{location:{pathname:O,search:y,hash:v,state:b,key:A},navigationType:s}},[h,p,y,v,b,A,s]);return ui(R!=null,`<Router basename="${h}"> is not able to match the URL "${p}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:B.createElement(hi.Provider,{value:m},B.createElement(Vu.Provider,{children:e,value:R}))}function A1({children:i,location:e}){return c1(vp(i),e)}function vp(i,e=[]){let t=[];return B.Children.forEach(i,(s,o)=>{if(!B.isValidElement(s))return;let u=[...e,o];if(s.type===B.Fragment){t.push.apply(t,vp(s.props.children,u));return}ut(s.type===He,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ut(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=vp(s.props.children,u)),t.push(h)}),t}var Nh="get",Dh="application/x-www-form-urlencoded";function hd(i){return i!=null&&typeof i.tagName=="string"}function S1(i){return hd(i)&&i.tagName.toLowerCase()==="button"}function R1(i){return hd(i)&&i.tagName.toLowerCase()==="form"}function C1(i){return hd(i)&&i.tagName.toLowerCase()==="input"}function I1(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function x1(i,e){return i.button===0&&(!e||e==="_self")&&!I1(i)}var Th=null;function N1(){if(Th===null)try{new FormData(document.createElement("form"),0),Th=!1}catch{Th=!0}return Th}var D1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Jm(i){return i!=null&&!D1.has(i)?(ui(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Dh}"`),null):i}function O1(i,e){let t,s,o,u,h;if(R1(i)){let m=i.getAttribute("action");s=m?_r(m,e):null,t=i.getAttribute("method")||Nh,o=Jm(i.getAttribute("enctype"))||Dh,u=new FormData(i)}else if(S1(i)||C1(i)&&(i.type==="submit"||i.type==="image")){let m=i.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||m.getAttribute("action");if(s=p?_r(p,e):null,t=i.getAttribute("formmethod")||m.getAttribute("method")||Nh,o=Jm(i.getAttribute("formenctype"))||Jm(m.getAttribute("enctype"))||Dh,u=new FormData(m,i),!N1()){let{name:y,type:v,value:b}=i;if(v==="image"){let A=y?`${y}.`:"";u.append(`${A}x`,"0"),u.append(`${A}y`,"0")}else y&&u.append(y,b)}}else{if(hd(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Nh,s=null,o=Dh,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ng(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function P1(i,e,t){let s=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&_r(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function j1(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M1(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function k1(i,e,t){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await j1(u,t);return h.links?h.links():[]}return[]}));return B1(s.flat(1).filter(M1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function VE(i,e,t,s,o,u){let h=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,m=(p,y)=>t[y].pathname!==p.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,y)=>h(p,y)||m(p,y)):u==="data"?e.filter((p,y)=>{let v=s.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,y)||m(p,y))return!0;if(p.route.shouldRevalidate){let b=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function V1(i,e,{includeHydrateFallback:t}={}){return L1(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function L1(i){return[...new Set(i)]}function U1(i){let e={},t=Object.keys(i).sort();for(let s of t)e[s]=i[s];return e}function B1(i,e){let t=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(U1(o));return t.has(u)||(t.add(u),s.push({key:u,link:o})),s},[])}function Gb(){let i=B.useContext(Mo);return ng(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function z1(){let i=B.useContext(ud);return ng(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var ig=B.createContext(void 0);ig.displayName="FrameworkContext";function $b(){let i=B.useContext(ig);return ng(i,"You must render this element inside a <HydratedRouter> element"),i}function q1(i,e){let t=B.useContext(ig),[s,o]=B.useState(!1),[u,h]=B.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:y,onMouseLeave:v,onTouchStart:b}=e,A=B.useRef(null);B.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let q=ee=>{ee.forEach(K=>{h(K.isIntersecting)})},V=new IntersectionObserver(q,{threshold:.5});return A.current&&V.observe(A.current),()=>{V.disconnect()}}},[i]),B.useEffect(()=>{if(s){let q=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(q)}}},[s]);let R=()=>{o(!0)},O=()=>{o(!1),h(!1)};return t?i!=="intent"?[u,A,{}]:[u,A,{onFocus:eu(m,R),onBlur:eu(p,O),onMouseEnter:eu(y,R),onMouseLeave:eu(v,O),onTouchStart:eu(b,R)}]:[!1,A,{}]}function eu(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function H1({page:i,...e}){let{router:t}=Gb(),s=B.useMemo(()=>Mb(t.routes,i,t.basename),[t.routes,i,t.basename]);return s?B.createElement(G1,{page:i,matches:s,...e}):null}function F1(i){let{manifest:e,routeModules:t}=$b(),[s,o]=B.useState([]);return B.useEffect(()=>{let u=!1;return k1(i,e,t).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,t]),s}function G1({page:i,matches:e,...t}){let s=Bi(),{manifest:o,routeModules:u}=$b(),{basename:h}=Gb(),{loaderData:m,matches:p}=z1(),y=B.useMemo(()=>VE(i,e,p,o,s,"data"),[i,e,p,o,s]),v=B.useMemo(()=>VE(i,e,p,o,s,"assets"),[i,e,p,o,s]),b=B.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let O=new Set,q=!1;if(e.forEach(ee=>{let K=o.routes[ee.route.id];!K||!K.hasLoader||(!y.some(Q=>Q.route.id===ee.route.id)&&ee.route.id in m&&u[ee.route.id]?.shouldRevalidate||K.hasClientLoader?q=!0:O.add(ee.route.id))}),O.size===0)return[];let V=P1(i,h,"data");return q&&O.size>0&&V.searchParams.set("_routes",e.filter(ee=>O.has(ee.route.id)).map(ee=>ee.route.id).join(",")),[V.pathname+V.search]},[h,m,s,o,y,e,i,u]),A=B.useMemo(()=>V1(v,o),[v,o]),R=F1(v);return B.createElement(B.Fragment,null,b.map(O=>B.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...t})),A.map(O=>B.createElement("link",{key:O,rel:"modulepreload",href:O,...t})),R.map(({key:O,link:q})=>B.createElement("link",{key:O,nonce:t.nonce,...q})))}function $1(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Yb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yb&&(window.__reactRouterVersion="7.8.2")}catch{}function Y1({basename:i,children:e,window:t}){let s=B.useRef();s.current==null&&(s.current=PR({window:t,v5Compat:!0}));let o=s.current,[u,h]=B.useState({action:o.action,location:o.location}),m=B.useCallback(p=>{B.startTransition(()=>h(p))},[h]);return B.useLayoutEffect(()=>o.listen(m),[o,m]),B.createElement(w1,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:o})}var Kb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sn=B.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:m,target:p,to:y,preventScrollReset:v,viewTransition:b,...A},R){let{basename:O}=B.useContext(hi),q=typeof y=="string"&&Kb.test(y),V,ee=!1;if(typeof y=="string"&&q&&(V=y,Yb))try{let I=new URL(window.location.href),M=y.startsWith("//")?new URL(I.protocol+y):new URL(y),k=_r(M.pathname,O);M.origin===I.origin&&k!=null?y=k+M.search+M.hash:ee=!0}catch{ui(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=a1(y,{relative:o}),[Q,ie,ae]=q1(s,A),re=X1(y,{replace:h,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:b});function N(I){e&&e(I),I.defaultPrevented||re(I)}let C=B.createElement("a",{...A,...ae,href:V||K,onClick:ee||u?e:N,ref:$1(R,ie),target:p,"data-discover":!q&&t==="render"?"true":void 0});return Q&&!q?B.createElement(B.Fragment,null,C,B.createElement(H1,{page:K})):C});sn.displayName="Link";var Fe=B.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:m,children:p,...y},v){let b=Lu(h,{relative:y.relative}),A=Bi(),R=B.useContext(ud),{navigator:O,basename:q}=B.useContext(hi),V=R!=null&&tC(b)&&m===!0,ee=O.encodeLocation?O.encodeLocation(b).pathname:b.pathname,K=A.pathname,Q=R&&R.navigation&&R.navigation.location?R.navigation.location.pathname:null;t||(K=K.toLowerCase(),Q=Q?Q.toLowerCase():null,ee=ee.toLowerCase()),Q&&q&&(Q=_r(Q,q)||Q);const ie=ee!=="/"&&ee.endsWith("/")?ee.length-1:ee.length;let ae=K===ee||!o&&K.startsWith(ee)&&K.charAt(ie)==="/",re=Q!=null&&(Q===ee||!o&&Q.startsWith(ee)&&Q.charAt(ee.length)==="/"),N={isActive:ae,isPending:re,isTransitioning:V},C=ae?e:void 0,I;typeof s=="function"?I=s(N):I=[s,ae?"active":null,re?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let M=typeof u=="function"?u(N):u;return B.createElement(sn,{...y,"aria-current":C,className:I,ref:v,style:M,to:h,viewTransition:m},typeof p=="function"?p(N):p)});Fe.displayName="NavLink";var K1=B.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:u,method:h=Nh,action:m,onSubmit:p,relative:y,preventScrollReset:v,viewTransition:b,...A},R)=>{let O=J1(),q=eC(m,{relative:y}),V=h.toLowerCase()==="get"?"get":"post",ee=typeof m=="string"&&Kb.test(m),K=Q=>{if(p&&p(Q),Q.defaultPrevented)return;Q.preventDefault();let ie=Q.nativeEvent.submitter,ae=ie?.getAttribute("formmethod")||h;O(ie||Q.currentTarget,{fetcherKey:e,method:ae,navigate:t,replace:o,state:u,relative:y,preventScrollReset:v,viewTransition:b})};return B.createElement("form",{ref:R,method:V,action:q,onSubmit:s?p:K,...A,"data-discover":!ee&&i==="render"?"true":void 0})});K1.displayName="Form";function Q1(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Qb(i){let e=B.useContext(Mo);return ut(e,Q1(i)),e}function X1(i,{target:e,replace:t,state:s,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=cd(),p=Bi(),y=Lu(i,{relative:u});return B.useCallback(v=>{if(x1(v,e)){v.preventDefault();let b=t!==void 0?t:wu(p)===wu(y);m(i,{replace:b,state:s,preventScrollReset:o,relative:u,viewTransition:h})}},[p,m,y,t,s,e,i,o,u,h])}var W1=0,Z1=()=>`__${String(++W1)}__`;function J1(){let{router:i}=Qb("useSubmit"),{basename:e}=B.useContext(hi),t=v1();return B.useCallback(async(s,o={})=>{let{action:u,method:h,encType:m,formData:p,body:y}=O1(s,e);if(o.navigate===!1){let v=o.fetcherKey||Z1();await i.fetch(v,t,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await i.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[i,e,t])}function eC(i,{relative:e}={}){let{basename:t}=B.useContext(hi),s=B.useContext(di);ut(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Lu(i||".",{relative:e})},h=Bi();if(i==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(b=>b).forEach(b=>m.append("index",b));let v=m.toString();u.search=v?`?${v}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(u.pathname=u.pathname==="/"?t:gr([t,u.pathname])),wu(u)}function tC(i,{relative:e}={}){let t=B.useContext(Ub);ut(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Qb("useViewTransitionState"),o=Lu(i,{relative:e});if(!t.isTransitioning)return!1;let u=_r(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=_r(t.nextLocation.pathname,s)||t.nextLocation.pathname;return qh(o.pathname,h)!=null||qh(o.pathname,u)!=null}const nC="/mariachis-uclatlan/assets/inauguration-CnT_fCsw.jpg",iC="/mariachis-uclatlan/assets/juliofrenk-xh5a58GC.jpg",rC="/mariachis-uclatlan/assets/brandonPhoto-BqVCcDZm.jpg",sC="/mariachis-uclatlan/assets/rosebowl25-BWtiugWu.jpg",aC=[nC,iC,rC,sC];function oC({images:i=aC,autoPlayMs:e=5e3,showIndicators:t=!0,aspectRatio:s="16/9",className:o=""}){const[u,h]=B.useState(0),m=B.useRef(null),p=B.useRef(null),y=B.useRef(!1),v=B.useRef(null),b=B.useRef(0),A=i.length,R=B.useCallback(ie=>{h((ie%A+A)%A)},[A]),O=B.useCallback(()=>R(u+1),[R,u]),q=B.useCallback(()=>R(u-1),[R,u]);B.useEffect(()=>{const ie=ae=>{ae.key==="ArrowRight"&&O(),ae.key==="ArrowLeft"&&q()};return window.addEventListener("keydown",ie),()=>window.removeEventListener("keydown",ie)},[O,q]),B.useEffect(()=>{if(!e)return;const ie=()=>{p.current!==null&&window.clearInterval(p.current),!y.current&&!document.hidden&&(p.current=window.setInterval(()=>{h(N=>(N+1)%A)},e))},ae=()=>{p.current!==null&&window.clearInterval(p.current),p.current=null};ie();const re=()=>document.hidden?ae():ie();return document.addEventListener("visibilitychange",re),()=>{document.removeEventListener("visibilitychange",re),ae()}},[e,A]);const V=ie=>{v.current=ie.touches[0].clientX,b.current=0},ee=ie=>{if(v.current!==null&&(b.current=ie.touches[0].clientX-v.current,m.current)){const ae=b.current/m.current.clientWidth*100;m.current.style.transition="none",m.current.style.transform=`translateX(calc(${-u*100}% + ${ae}%))`}},K=()=>{m.current&&(m.current.style.transition="");const ie=b.current;v.current=null,b.current=0,Math.abs(ie)>40?ie<0?O():q():m.current&&(m.current.style.transform=`translateX(${-u*100}%)`)},Q=B.useMemo(()=>i.map((ie,ae)=>f.jsx("button",{"aria-label":`Go to slide ${ae+1}`,className:`carousel-indicator ${ae===u?"active":""}`,onClick:()=>R(ae)},ae)),[i,u,R]);return f.jsxs("div",{className:`carousel ${o}`,style:{"--carousel-aspect":s},onMouseEnter:()=>y.current=!0,onMouseLeave:()=>y.current=!1,"aria-roledescription":"carousel",children:[f.jsx("div",{className:"carousel-viewport",onTouchStart:V,onTouchMove:ee,onTouchEnd:K,children:f.jsx("div",{ref:m,className:"carousel-track",style:{transform:`translateX(${-u*100}%)`},children:i.map((ie,ae)=>f.jsxs("div",{className:"carousel-slide",role:"group","aria-roledescription":"slide","aria-label":`${ae+1} of ${A}`,children:[f.jsx("img",{className:"carousel-image",src:ie,loading:"lazy",alt:`Slide ${ae+1}`}),f.jsx("div",{className:"carousel-gradient","aria-hidden":"true"})]},ae))})}),f.jsx("button",{className:"carousel-button prev",onClick:q,"aria-label":"Previous slide",children:"‹"}),f.jsx("button",{className:"carousel-button next",onClick:O,"aria-label":"Next slide",children:"›"}),t&&f.jsx("div",{className:"carousel-indicators",role:"tablist","aria-label":"Slide indicators",children:Q})]})}const LE=()=>f.jsxs("section",{className:"home stack",children:[f.jsxs("header",{className:"welcome",children:[f.jsx("h1",{children:"Welcome to Mariachi de Uclatlán"}),f.jsx("p",{children:"Mariachi de Uclatlán is a student-led musical ensemble at UCLA dedicated to preserving, celebrating, and innovating the traditions of mariachi music. Our group provides students from diverse academic and cultural backgrounds with the opportunity to share the beauty of this art form with the UCLA community and beyond."}),f.jsx("p",{children:"As part of our mission, we honor the roots of Mexican music while bringing it into contemporary spaces. From classrooms to grand stages, Mariachi de Uclatlán fosters a spirit of community, cultural pride, and artistic excellence. Our members balance their roles as students and performers, keeping alive the traditions passed down through generations."}),f.jsx("p",{children:"Alongside our musicians, we are proud to collaborate with UCLA’s Ballet Folklórico, whose dancers bring vibrant movement and color to our performances. Together, music and dance tell stories that embody the energy and passion of Mexican culture, creating a complete and unforgettable experience for audiences."}),f.jsx("p",{children:"Founded in 1961, Mariachi de Uclatlán holds the distinction of being one of the first collegiate mariachi ensembles in the United States. Over six decades, we have built a legacy of performances, community outreach, and cultural preservation. We continue to grow as a family of students dedicated to sharing this living tradition with future generations. ¡Viva el mariachi!"})]}),f.jsx(oC,{})]});function lC(){return f.jsxs("div",{className:"about-page",children:[f.jsx("h1",{children:"About Us"}),f.jsx("p",{children:"Welcome to Mariachi de Uclatlán! We are UCLA's premier mariachi ensemble dedicated to preserving the rich traditions of Mexican music and culture. Founded in 1961, our ensemble has a long history of excellence and passion for mariachi music."}),f.jsx("h2",{children:"Watch a Recent Performance"}),f.jsx("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,marginBottom:"2rem"},children:f.jsx("iframe",{src:"https://www.youtube.com/embed/PVT9JTaZokk?start=6720",title:"Mariachi de Uclatlán Performance",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"}})}),f.jsx("h2",{children:"Our History"}),f.jsx("p",{children:"Mariachi de Uclatlán was established to provide students with an opportunity to experience and perform traditional Mexican music while also promoting cultural awareness. Over the years, we have participated in numerous events and competitions, showcasing the talent and dedication of our members."})]})}const uC=()=>f.jsxs("section",{className:"contact-page",children:[f.jsx("h1",{children:"Contact Us"}),f.jsxs("p",{className:"contact-intro",children:["Email us at"," ",f.jsx("a",{href:"mailto:uclatlan@ucla.edu",className:"contact-link",children:"uclatlan@ucla.edu"})," ","or choose an option below:"]}),f.jsxs("div",{className:"contact-actions",children:[f.jsx(sn,{to:"/hire-us",className:"cta-button",children:"Hiring"}),f.jsx(sn,{to:"/book-us",className:"cta-button",children:"Performance Inquiry"}),f.jsx(sn,{to:"/join",className:"cta-button",children:"How to Join Our Group"}),f.jsx(sn,{to:"/contact/form",className:"cta-button",children:"General Questions"})]})]}),cC=()=>{};var UE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=function(i){const e=[];let t=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},hC=function(i){const e=[];let t=0,s=0;for(;t<i.length;){const o=i[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[t++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[t++],h=i[t++],m=i[t++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const u=i[t++],h=i[t++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},Wb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,m=h?i[o+1]:0,p=o+2<i.length,y=p?i[o+2]:0,v=u>>2,b=(u&3)<<4|m>>4;let A=(m&15)<<2|y>>6,R=y&63;p||(R=64,h||(A=64)),s.push(t[v],t[b],t[A],t[R])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Xb(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):hC(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=t[i.charAt(o++)],m=o<i.length?t[i.charAt(o)]:0;++o;const y=o<i.length?t[i.charAt(o)]:64;++o;const b=o<i.length?t[i.charAt(o)]:64;if(++o,u==null||m==null||y==null||b==null)throw new dC;const A=u<<2|m>>4;if(s.push(A),y!==64){const R=m<<4&240|y>>2;if(s.push(R),b!==64){const O=y<<6&192|b;s.push(O)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class dC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fC=function(i){const e=Xb(i);return Wb.encodeByteArray(e,!0)},Hh=function(i){return fC(i).replace(/\./g,"")},Zb=function(i){try{return Wb.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC=()=>mC().__FIREBASE_DEFAULTS__,gC=()=>{if(typeof process>"u"||typeof UE>"u")return;const i=UE.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},yC=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Zb(i[1]);return e&&JSON.parse(e)},dd=()=>{try{return cC()||pC()||gC()||yC()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Jb=i=>dd()?.emulatorHosts?.[i],rg=i=>{const e=Jb(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},e0=()=>dd()?.config,t0=i=>dd()?.[`_${i}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function fd(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Hh(JSON.stringify(t)),Hh(JSON.stringify(h)),""].join(".")}const du={};function vC(){const i={prod:[],emulator:[]};for(const e of Object.keys(du))du[e]?i.emulator.push(e):i.prod.push(e);return i}function EC(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let BE=!1;function md(i,e){if(typeof window>"u"||typeof document>"u"||!Sr(window.location.host)||du[i]===e||du[i]||BE)return;du[i]=e;function t(A){return`__firebase__banner__${A}`}const s="__firebase__banner",u=vC().prod.length>0;function h(){const A=document.getElementById(s);A&&A.remove()}function m(A){A.style.display="flex",A.style.background="#7faaf0",A.style.position="fixed",A.style.bottom="5px",A.style.left="5px",A.style.padding=".5em",A.style.borderRadius="5px",A.style.alignItems="center"}function p(A,R){A.setAttribute("width","24"),A.setAttribute("id",R),A.setAttribute("height","24"),A.setAttribute("viewBox","0 0 24 24"),A.setAttribute("fill","none"),A.style.marginLeft="-6px"}function y(){const A=document.createElement("span");return A.style.cursor="pointer",A.style.marginLeft="16px",A.style.fontSize="24px",A.innerHTML=" &times;",A.onclick=()=>{BE=!0,h()},A}function v(A,R){A.setAttribute("id",R),A.innerText="Learn more",A.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",A.setAttribute("target","__blank"),A.style.paddingLeft="5px",A.style.textDecoration="underline"}function b(){const A=EC(s),R=t("text"),O=document.getElementById(R)||document.createElement("span"),q=t("learnmore"),V=document.getElementById(q)||document.createElement("a"),ee=t("preprendIcon"),K=document.getElementById(ee)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(A.created){const Q=A.element;m(Q),v(V,q);const ie=y();p(K,ee),Q.append(K,O,V,ie),document.body.appendChild(Q)}u?(O.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(cn())}function bC(){const i=dd()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function wC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function AC(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function SC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function RC(){const i=cn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function CC(){return!bC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IC(){try{return typeof indexedDB=="object"}catch{return!1}}function xC(){return new Promise((i,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="FirebaseError";class zi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=NC,Object.setPrototypeOf(this,zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uu.prototype.create)}}class Uu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?DC(u,s):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new zi(o,m,s)}}function DC(i,e){return i.replace(OC,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const OC=/\{\$([^}]+)}/g;function PC(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function fa(i,e){if(i===e)return!0;const t=Object.keys(i),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(zE(u)&&zE(h)){if(!fa(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function zE(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(i){const e=[];for(const[t,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function su(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function au(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function jC(i,e){const t=new MC(i,e);return t.subscribe.bind(t)}class MC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");kC(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=ep),o.error===void 0&&(o.error=ep),o.complete===void 0&&(o.complete=ep);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kC(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function ep(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function at(i){return i&&i._delegate?i._delegate:i}class vr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new _C;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(UC(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);s===m&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:LC(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function LC(i){return i===oa?void 0:i}function UC(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new VC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Pe||(Pe={}));const zC={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},qC=Pe.INFO,HC={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},FC=(i,e,...t)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=HC[e];if(o)console[o](`[${s}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class sg{constructor(e){this.name=e,this._logLevel=qC,this._logHandler=FC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?zC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}const GC=(i,e)=>e.some(t=>i instanceof t);let qE,HE;function $C(){return qE||(qE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YC(){return HE||(HE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i0=new WeakMap,Ep=new WeakMap,r0=new WeakMap,tp=new WeakMap,ag=new WeakMap;function KC(i){const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{t(us(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&i0.set(t,i)}).catch(()=>{}),ag.set(e,i),e}function QC(i){if(Ep.has(i))return;const e=new Promise((t,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{t(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});Ep.set(i,e)}let Tp={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Ep.get(i);if(e==="objectStoreNames")return i.objectStoreNames||r0.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return us(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function XC(i){Tp=i(Tp)}function WC(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=i.call(np(this),e,...t);return r0.set(s,e.sort?e.sort():[e]),us(s)}:YC().includes(i)?function(...e){return i.apply(np(this),e),us(i0.get(this))}:function(...e){return us(i.apply(np(this),e))}}function ZC(i){return typeof i=="function"?WC(i):(i instanceof IDBTransaction&&QC(i),GC(i,$C())?new Proxy(i,Tp):i)}function us(i){if(i instanceof IDBRequest)return KC(i);if(tp.has(i))return tp.get(i);const e=ZC(i);return e!==i&&(tp.set(i,e),ag.set(e,i)),e}const np=i=>ag.get(i);function JC(i,e,{blocked:t,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),m=us(h);return s&&h.addEventListener("upgradeneeded",p=>{s(us(h.result),p.oldVersion,p.newVersion,us(h.transaction),p)}),t&&h.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const eI=["get","getKey","getAll","getAllKeys","count"],tI=["put","add","delete","clear"],ip=new Map;function FE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(ip.get(e))return ip.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=tI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||eI.includes(t)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(m.shift())),(await Promise.all([y[t](...m),o&&p.done]))[0]};return ip.set(e,u),u}XC(i=>({...i,get:(e,t,s)=>FE(e,t)||i.get(e,t,s),has:(e,t)=>!!FE(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(iI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function iI(i){return i.getComponent()?.type==="VERSION"}const bp="@firebase/app",GE="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new sg("@firebase/app"),rI="@firebase/app-compat",sI="@firebase/analytics-compat",aI="@firebase/analytics",oI="@firebase/app-check-compat",lI="@firebase/app-check",uI="@firebase/auth",cI="@firebase/auth-compat",hI="@firebase/database",dI="@firebase/data-connect",fI="@firebase/database-compat",mI="@firebase/functions",pI="@firebase/functions-compat",gI="@firebase/installations",yI="@firebase/installations-compat",_I="@firebase/messaging",vI="@firebase/messaging-compat",EI="@firebase/performance",TI="@firebase/performance-compat",bI="@firebase/remote-config",wI="@firebase/remote-config-compat",AI="@firebase/storage",SI="@firebase/storage-compat",RI="@firebase/firestore",CI="@firebase/ai",II="@firebase/firestore-compat",xI="firebase",NI="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="[DEFAULT]",DI={[bp]:"fire-core",[rI]:"fire-core-compat",[aI]:"fire-analytics",[sI]:"fire-analytics-compat",[lI]:"fire-app-check",[oI]:"fire-app-check-compat",[uI]:"fire-auth",[cI]:"fire-auth-compat",[hI]:"fire-rtdb",[dI]:"fire-data-connect",[fI]:"fire-rtdb-compat",[mI]:"fire-fn",[pI]:"fire-fn-compat",[gI]:"fire-iid",[yI]:"fire-iid-compat",[_I]:"fire-fcm",[vI]:"fire-fcm-compat",[EI]:"fire-perf",[TI]:"fire-perf-compat",[bI]:"fire-rc",[wI]:"fire-rc-compat",[AI]:"fire-gcs",[SI]:"fire-gcs-compat",[RI]:"fire-fst",[II]:"fire-fst-compat",[CI]:"fire-vertex","fire-js":"fire-js",[xI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=new Map,OI=new Map,Ap=new Map;function $E(i,e){try{i.container.addComponent(e)}catch(t){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function fs(i){const e=i.name;if(Ap.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;Ap.set(e,i);for(const t of Au.values())$E(t,i);for(const t of OI.values())$E(t,i);return!0}function Bu(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function un(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},cs=new Uu("app","Firebase",PI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw cs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const va=NI;function s0(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const s={name:wp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw cs.create("bad-app-name",{appName:String(o)});if(t||(t=e0()),!t)throw cs.create("no-options");const u=Au.get(o);if(u){if(fa(t,u.options)&&fa(s,u.config))return u;throw cs.create("duplicate-app",{appName:o})}const h=new BC(o);for(const p of Ap.values())h.addComponent(p);const m=new jI(t,s,h);return Au.set(o,m),m}function pd(i=wp){const e=Au.get(i);if(!e&&i===wp&&e0())return s0();if(!e)throw cs.create("no-app",{appName:i});return e}function YE(){return Array.from(Au.values())}function Zn(i,e,t){let s=DI[i]??i;t&&(s+=`-${t}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(h.join(" "));return}fs(new vr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MI="firebase-heartbeat-database",kI=1,Su="firebase-heartbeat-store";let rp=null;function a0(){return rp||(rp=JC(MI,kI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Su)}catch(t){console.warn(t)}}}}).catch(i=>{throw cs.create("idb-open",{originalErrorMessage:i.message})})),rp}async function VI(i){try{const t=(await a0()).transaction(Su),s=await t.objectStore(Su).get(o0(i));return await t.done,s}catch(e){if(e instanceof zi)Er.warn(e.message);else{const t=cs.create("idb-get",{originalErrorMessage:e?.message});Er.warn(t.message)}}}async function KE(i,e){try{const s=(await a0()).transaction(Su,"readwrite");await s.objectStore(Su).put(e,o0(i)),await s.done}catch(t){if(t instanceof zi)Er.warn(t.message);else{const s=cs.create("idb-set",{originalErrorMessage:t?.message});Er.warn(s.message)}}}function o0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=1024,UI=30;class BI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new qI(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=QE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>UI){const o=HI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Er.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=QE(),{heartbeatsToSend:t,unsentEntries:s}=zI(this._heartbeatsCache.heartbeats),o=Hh(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Er.warn(e),""}}}function QE(){return new Date().toISOString().substring(0,10)}function zI(i,e=LI){const t=[];let s=i.slice();for(const o of i){const u=t.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),XE(t)>e){u.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),XE(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class qI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IC()?xC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return KE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return KE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function XE(i){return Hh(JSON.stringify({version:2,heartbeats:i})).length}function HI(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let s=1;s<i.length;s++)i[s].date<t&&(t=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(i){fs(new vr("platform-logger",e=>new nI(e),"PRIVATE")),fs(new vr("heartbeat",e=>new BI(e),"PRIVATE")),Zn(bp,GE,i),Zn(bp,GE,"esm2020"),Zn("fire-js","")}FI("");function l0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const GI=l0,u0=new Uu("auth","Firebase",l0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh=new sg("@firebase/auth");function $I(i,...e){Fh.logLevel<=Pe.WARN&&Fh.warn(`Auth (${va}): ${i}`,...e)}function Oh(i,...e){Fh.logLevel<=Pe.ERROR&&Fh.error(`Auth (${va}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(i,...e){throw lg(i,...e)}function bn(i,...e){return lg(i,...e)}function og(i,e,t){const s={...GI(),[e]:t};return new Uu("auth","Firebase",s).create(e,{appName:i.name})}function ji(i){return og(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function YI(i,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&ei(i,"argument-error"),og(i,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function lg(i,...e){if(typeof i!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(t,...s)}return u0.create(i,...e)}function fe(i,e,...t){if(!i)throw lg(e,...t)}function mr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Oh(e),new Error(e)}function Tr(i,e){i||mr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(){return typeof self<"u"&&self.location?.href||""}function c0(){return WE()==="http:"||WE()==="https:"}function WE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(c0()||AC()||"connection"in navigator)?navigator.onLine:!0}function QI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Tr(t>e,"Short delay should be less than long delay!"),this.isMobile=TC()||SC()}get(){return KI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(i,e){Tr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h0{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ZI=new zu(3e4,6e4);function Sn(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Vn(i,e,t,s,o={}){return d0(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const m=Vo({key:i.config.apiKey,...h}).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const y={method:e,headers:p,...u};return wC()||(y.referrerPolicy="no-referrer"),i.emulatorConfig&&Sr(i.emulatorConfig.host)&&(y.credentials="include"),h0.fetch()(await f0(i,i.config.apiHost,t,m),y)})}async function d0(i,e,t){i._canInitEmulator=!1;const s={...XI,...e};try{const o=new ex(i),u=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw ou(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,y]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw ou(i,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw ou(i,"email-already-in-use",h);if(p==="USER_DISABLED")throw ou(i,"user-disabled",h);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw og(i,v,y);ei(i,v)}}catch(o){if(o instanceof zi)throw o;ei(i,"network-request-failed",{message:String(o)})}}async function Es(i,e,t,s,o={}){const u=await Vn(i,e,t,s,o);return"mfaPendingCredential"in u&&ei(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function f0(i,e,t,s){const o=`${e}${t}?${s}`,u=i,h=u.config.emulator?ug(i.config,o):`${i.config.apiScheme}://${o}`;return WI.includes(t)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function JI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(bn(this.auth,"network-request-failed")),ZI.get())})}}function ou(i,e,t){const s={appName:i.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=bn(i,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZE(i){return i!==void 0&&i.getResponse!==void 0}function JE(i){return i!==void 0&&i.enterprise!==void 0}class m0{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return JI(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(i){return(await Vn(i,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function p0(i,e){return Vn(i,"GET","/v2/recaptchaConfig",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nx(i,e){return Vn(i,"POST","/v1/accounts:delete",e)}async function Gh(i,e){return Vn(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function g0(i,e=!1){const t=at(i),s=await t.getIdToken(e),o=cg(s);fe(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:fu(sp(o.auth_time)),issuedAtTime:fu(sp(o.iat)),expirationTime:fu(sp(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function sp(i){return Number(i)*1e3}function cg(i){const[e,t,s]=i.split(".");if(e===void 0||t===void 0||s===void 0)return Oh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Zb(t);return o?JSON.parse(o):(Oh("Failed to decode base64 JWT payload"),null)}catch(o){return Oh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function eT(i){const e=cg(i);return fe(e,"internal-error"),fe(typeof e.exp<"u","internal-error"),fe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Co(i,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof zi&&ix(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function ix({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $h(i){const e=i.auth,t=await i.getIdToken(),s=await Co(i,Gh(e,{idToken:t}));fe(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?y0(o.providerUserInfo):[],h=ax(i.providerData,u),m=i.isAnonymous,p=!(i.email&&o.passwordHash)&&!h?.length,y=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function sx(i){const e=at(i);await $h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ax(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function y0(i){return i.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(i,e){const t=await d0(i,{},async()=>{const s=Vo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await f0(i,o,"/v1/token",`key=${u}`),m=await i._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:s};return i.emulatorConfig&&Sr(i.emulatorConfig.host)&&(p.credentials="include"),h0.fetch()(h,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lx(i,e){return Vn(i,"POST","/v2/accounts:revokeToken",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){fe(e.idToken,"internal-error"),fe(typeof e.idToken<"u","internal-error"),fe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){fe(e.length!==0,"internal-error");const t=eT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(fe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:u}=await ox(e,t);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:u}=t,h=new bo;return s&&(fe(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(fe(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(fe(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return mr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(i,e){fe(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class oi{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new rx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Rp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await Co(this,this.stsTokenManager.getToken(this.auth,e));return fe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return g0(this,e)}reload(){return sx(this)}_assign(e){this!==e&&(fe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new oi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await $h(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(un(this.auth.app))return Promise.reject(ji(this.auth));const e=await this.getIdToken();return await Co(this,nx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,u=t.phoneNumber??void 0,h=t.photoURL??void 0,m=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:A,isAnonymous:R,providerData:O,stsTokenManager:q}=t;fe(b&&q,e,"internal-error");const V=bo.fromJSON(this.name,q);fe(typeof b=="string",e,"internal-error"),ns(s,e.name),ns(o,e.name),fe(typeof A=="boolean",e,"internal-error"),fe(typeof R=="boolean",e,"internal-error"),ns(u,e.name),ns(h,e.name),ns(m,e.name),ns(p,e.name),ns(y,e.name),ns(v,e.name);const ee=new oi({uid:b,auth:e,email:o,emailVerified:A,displayName:s,isAnonymous:R,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:V,createdAt:y,lastLoginAt:v});return O&&Array.isArray(O)&&(ee.providerData=O.map(K=>({...K}))),p&&(ee._redirectEventId=p),ee}static async _fromIdTokenResponse(e,t,s=!1){const o=new bo;o.updateFromServerResponse(t);const u=new oi({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await $h(u),u}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];fe(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?y0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new bo;m.updateFromIdToken(s);const p=new oi({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Rp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT=new Map;function pr(i){Tr(i instanceof Function,"Expected a class definition");let e=tT.get(i);return e?(Tr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,tT.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}_0.type="NONE";const nT=_0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i,e,t){return`firebase:${i}:${e}:${t}`}class wo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Ph(this.userKey,o.apiKey,u),this.fullPersistenceKey=Ph("persistence",o.apiKey,u),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Gh(this.auth,{idToken:e}).catch(()=>{});return t?oi._fromGetAccountInfoResponse(this.auth,t,e):null}return oi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new wo(pr(nT),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||pr(nT);const h=Ph(s,e.config.apiKey,e.name);let m=null;for(const y of t)try{const v=await y._get(h);if(v){let b;if(typeof v=="string"){const A=await Gh(e,{idToken:v}).catch(()=>{});if(!A)break;b=await oi._fromGetAccountInfoResponse(e,A,v)}else b=oi._fromJSON(e,v);y!==u&&(m=b),u=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new wo(u,e,s):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(t.map(async y=>{if(y!==u)try{await y._remove(h)}catch{}})),new wo(u,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(b0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(A0(e))return"Blackberry";if(S0(e))return"Webos";if(E0(e))return"Safari";if((e.includes("chrome/")||T0(e))&&!e.includes("edge/"))return"Chrome";if(w0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(t);if(s?.length===2)return s[1]}return"Other"}function v0(i=cn()){return/firefox\//i.test(i)}function E0(i=cn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T0(i=cn()){return/crios\//i.test(i)}function b0(i=cn()){return/iemobile/i.test(i)}function w0(i=cn()){return/android/i.test(i)}function A0(i=cn()){return/blackberry/i.test(i)}function S0(i=cn()){return/webos/i.test(i)}function hg(i=cn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function ux(i=cn()){return hg(i)&&!!window.navigator?.standalone}function cx(){return RC()&&document.documentMode===10}function R0(i=cn()){return hg(i)||w0(i)||S0(i)||A0(i)||/windows phone/i.test(i)||b0(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(i,e=[]){let t;switch(i){case"Browser":t=iT(cn());break;case"Worker":t=`${iT(cn())}-${i}`;break;default:t=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${va}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dx(i,e={}){return Vn(i,"GET","/v2/passwordPolicy",Sn(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=6;class mx{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fx,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rT(this),this.idTokenSubscription=new rT(this),this.beforeStateQueue=new hx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=u0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Gh(this,{idToken:e}),s=await oi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(un(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(s=m.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return fe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await $h(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=QI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(un(this.app))return Promise.reject(ji(this));const t=e?at(e):null;return t&&fe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&fe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return un(this.app)?Promise.reject(ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return un(this.app)?Promise.reject(ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dx(this),t=new mx(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Uu("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await lx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&pr(e)||this._popupRedirectResolver;fe(t,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[pr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const u=typeof t=="function"?t:t.next.bind(t);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(fe(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{h=!0,p()}}else{const p=e.addObserver(t);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=C0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&$I(`Error while retrieving App Check token: ${e.error}`),e?.token}}function fi(i){return at(i)}class rT{constructor(e){this.auth=e,this.observer=null,this.addObserver=jC(t=>this.observer=t)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gx(i){qu=i}function dg(i){return qu.loadJS(i)}function yx(){return qu.recaptchaV2Script}function _x(){return qu.recaptchaEnterpriseScript}function vx(){return qu.gapiScript}function I0(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=500,Tx=6e4,bh=1e12;class bx{constructor(e){this.auth=e,this.counter=bh,this._widgets=new Map}render(e,t){const s=this.counter;return this._widgets.set(s,new Sx(e,this.auth.name,t||{})),this.counter++,s}reset(e){const t=e||bh;this._widgets.get(t)?.delete(),this._widgets.delete(t)}getResponse(e){const t=e||bh;return this._widgets.get(t)?.getResponse()||""}async execute(e){const t=e||bh;return this._widgets.get(t)?.execute(),""}}class wx{constructor(){this.enterprise=new Ax}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Ax{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Sx{constructor(e,t,s){this.params=s,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const o=typeof e=="string"?document.getElementById(e):e;fe(o,"argument-error",{appName:t}),this.container=o,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Rx(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},Tx)},Ex))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Rx(i){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let s=0;s<i;s++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}const Cx="recaptcha-enterprise",mu="NO_RECAPTCHA";class x0{constructor(e){this.type=Cx,this.auth=fi(e)}async verify(e="verify",t=!1){async function s(u){if(!t){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{p0(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const y=new m0(p);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,h(y.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;JE(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(y=>{h(y)}).catch(()=>{h(mu)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wx().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(m=>{if(!t&&JE(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=_x();p.length!==0&&(p+=m),dg(p).then(()=>{o(m,u,h)}).catch(y=>{h(y)})}}).catch(m=>{h(m)})})}}async function tu(i,e,t,s=!1,o=!1){const u=new x0(i);let h;if(o)h=mu;else try{h=await u.verify(t)}catch{h=await u.verify(t,!0)}const m={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,y=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return s?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function Ao(i,e,t,s,o){if(o==="EMAIL_PASSWORD_PROVIDER")if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await tu(i,e,t,t==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await tu(i,e,t,t==="getOobCode");return s(i,h)}else return Promise.reject(u)});else if(o==="PHONE_PROVIDER")if(i._getRecaptchaConfig()?.isProviderEnabled("PHONE_PROVIDER")){const u=await tu(i,e,t);return s(i,u).catch(async h=>{if(i._getRecaptchaConfig()?.getProviderEnforcementState("PHONE_PROVIDER")==="AUDIT"&&(h.code==="auth/missing-recaptcha-token"||h.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);const m=await tu(i,e,t,!1,!0);return s(i,m)}return Promise.reject(h)})}else{const u=await tu(i,e,t,!1,!0);return s(i,u)}else return Promise.reject(o+" provider is not supported.")}async function Ix(i){const e=fi(i),t=await p0(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),s=new m0(t);e.tenantId==null?e._agentRecaptchaConfig=s:e._tenantRecaptchaConfigs[e.tenantId]=s,s.isAnyProviderEnabled()&&new x0(e).verify()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(i,e){const t=Bu(i,"auth");if(t.isInitialized()){const o=t.getImmediate(),u=t.getOptions();if(fa(u,e??{}))return o;ei(o,"already-initialized")}return t.initialize({options:e})}function Nx(i,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(pr);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function Dx(i,e,t){const s=fi(i);fe(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=N0(e),{host:h,port:m}=Ox(e),p=m===null?"":`:${m}`,y={url:`${u}//${h}${p}/`},v=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){fe(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),fe(fa(y,s.config.emulator)&&fa(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Sr(h)?(fd(`${u}//${h}${p}`),md("Auth",!0)):Px()}function N0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function Ox(i){const e=N0(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:sT(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:sT(h)}}}function sT(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function Px(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mr("not implemented")}_getIdTokenResponse(e){return mr("not implemented")}_linkToIdToken(e,t){return mr("not implemented")}_getReauthenticationResolver(e){return mr("not implemented")}}async function jx(i,e){return Vn(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(i,e){return Es(i,"POST","/v1/accounts:signInWithPassword",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(i,e){return Es(i,"POST","/v1/accounts:signInWithEmailLink",Sn(i,e))}async function Vx(i,e){return Es(i,"POST","/v1/accounts:signInWithEmailLink",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru extends gd{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new Ru(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new Ru(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ao(e,t,"signInWithPassword",Mx,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return kx(e,{email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ao(e,s,"signUpPassword",jx,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return Vx(e,{idToken:t,email:this._email,oobCode:this._password});default:ei(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function So(i,e){return Es(i,"POST","/v1/accounts:signInWithIdp",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lx="http://localhost";class ma extends gd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ma(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ei("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=t;if(!s||!o)return null;const h=new ma(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const t=this.buildRequest();return So(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,So(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,So(e,t)}buildRequest(){const e={requestUri:Lx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vo(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aT(i,e){return Vn(i,"POST","/v1/accounts:sendVerificationCode",Sn(i,e))}async function Ux(i,e){return Es(i,"POST","/v1/accounts:signInWithPhoneNumber",Sn(i,e))}async function Bx(i,e){const t=await Es(i,"POST","/v1/accounts:signInWithPhoneNumber",Sn(i,e));if(t.temporaryProof)throw ou(i,"account-exists-with-different-credential",t);return t}const zx={USER_NOT_FOUND:"user-not-found"};async function qx(i,e){const t={...e,operation:"REAUTH"};return Es(i,"POST","/v1/accounts:signInWithPhoneNumber",Sn(i,t),zx)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends gd{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new pu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new pu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return Ux(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return Bx(e,{idToken:t,...this._makeVerificationRequest()})}_getReauthenticationResolver(e){return qx(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:s,verificationCode:o}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:s,code:o}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:u}=e;return!s&&!t&&!o&&!u?null:new pu({verificationId:t,verificationCode:s,phoneNumber:o,temporaryProof:u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Fx(i){const e=su(au(i)).link,t=e?su(au(e)).deep_link_id:null,s=su(au(i)).deep_link_id;return(s?su(au(s)).link:null)||s||t||e||i}class fg{constructor(e){const t=su(au(e)),s=t.apiKey??null,o=t.oobCode??null,u=Hx(t.mode??null);fe(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Fx(e);try{return new fg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(){this.providerId=Lo.PROVIDER_ID}static credential(e,t){return Ru._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=fg.parseLink(t);return fe(s,"argument-error"),Ru._fromEmailAndCode(e,s.code,s.tenantId)}}Lo.PROVIDER_ID="password";Lo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mg{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu extends mg{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is extends Hu{constructor(){super("facebook.com")}static credential(e){return ma._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return is.credential(e.oauthAccessToken)}catch{return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com";is.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Hu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ma._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Oi.credential(t,s)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rs extends Hu{constructor(){super("github.com")}static credential(e){return ma._fromParams({providerId:rs.PROVIDER_ID,signInMethod:rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return rs.credentialFromTaggedObject(e)}static credentialFromError(e){return rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return rs.credential(e.oauthAccessToken)}catch{return null}}}rs.GITHUB_SIGN_IN_METHOD="github.com";rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends Hu{constructor(){super("twitter.com")}static credential(e,t){return ma._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return ss.credential(t,s)}catch{return null}}}ss.TWITTER_SIGN_IN_METHOD="twitter.com";ss.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gx(i,e){return Es(i,"POST","/v1/accounts:signUp",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const u=await oi._fromIdTokenResponse(e,s,o),h=oT(s);return new pa({user:u,providerId:h,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=oT(s);return new pa({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function oT(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh extends zi{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Yh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Yh(e,t,s,o)}}function D0(i,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Yh._fromErrorAndOperation(i,u,e,s):u})}async function $x(i,e,t=!1){const s=await Co(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return pa._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(i,e,t=!1){const{auth:s}=i;if(un(s.app))return Promise.reject(ji(s));const o="reauthenticate";try{const u=await Co(i,D0(s,o,e,i),t);fe(u.idToken,s,"internal-error");const h=cg(u.idToken);fe(h,s,"internal-error");const{sub:m}=h;return fe(i.uid===m,s,"user-mismatch"),pa._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ei(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O0(i,e,t=!1){if(un(i.app))return Promise.reject(ji(i));const s="signIn",o=await D0(i,s,e),u=await pa._fromIdTokenResponse(i,s,o);return t||await i._updateCurrentUser(u.user),u}async function P0(i,e){return O0(fi(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(i){const e=fi(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kx(i,e,t){if(un(i.app))return Promise.reject(ji(i));const s=fi(i),h=await Ao(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Gx,"EMAIL_PASSWORD_PROVIDER").catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&j0(i),p}),m=await pa._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(m.user),m}function Qx(i,e,t){return un(i.app)?Promise.reject(ji(i)):P0(at(i),Lo.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&j0(i),s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(i,e){return Vn(i,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wx(i,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const s=at(i),u={idToken:await s.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=await Co(s,Xx(s.auth,u));s.displayName=h.displayName||null,s.photoURL=h.photoUrl||null;const m=s.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=s.displayName,m.photoURL=s.photoURL),await s._updateTokensIfNecessary(h)}function Zx(i,e,t,s){return at(i).onIdTokenChanged(e,t,s)}function Jx(i,e,t){return at(i).beforeAuthStateChanged(e,t)}function yd(i,e,t,s){return at(i).onAuthStateChanged(e,t,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lT(i,e){return Vn(i,"POST","/v2/accounts/mfaEnrollment:start",Sn(i,e))}const Kh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Kh,"1"),this.storage.removeItem(Kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=1e3,tN=10;class k0 extends M0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=R0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!t&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);cx()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,tN):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},eN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k0.type="LOCAL";const nN=k0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0 extends M0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}V0.type="SESSION";const L0=V0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iN(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new _d(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:u}=t.data,h=this.handlersMap[o];if(!h?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const m=Array.from(h).map(async y=>y(t.origin,u)),p=await iN(m);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_d.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg(i="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const y=pg("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(b){const A=b;if(A.data.eventId===y)switch(A.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(A.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return window}function sN(i){It().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(){return typeof It().WorkerGlobalScope<"u"&&typeof It().importScripts=="function"}async function aN(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oN(){return navigator?.serviceWorker?.controller||null}function lN(){return gg()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0="firebaseLocalStorageDb",uN=1,Qh="firebaseLocalStorage",B0="fbase_key";class Fu{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function vd(i,e){return i.transaction([Qh],e?"readwrite":"readonly").objectStore(Qh)}function cN(){const i=indexedDB.deleteDatabase(U0);return new Fu(i).toPromise()}function Cp(){const i=indexedDB.open(U0,uN);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Qh,{keyPath:B0})}catch(o){t(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Qh)?e(s):(s.close(),await cN(),e(await Cp()))})})}async function uT(i,e,t){const s=vd(i,!0).put({[B0]:e,value:t});return new Fu(s).toPromise()}async function hN(i,e){const t=vd(i,!1).get(e),s=await new Fu(t).toPromise();return s===void 0?null:s.value}function cT(i,e){const t=vd(i,!0).delete(e);return new Fu(t).toPromise()}const dN=800,fN=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>fN)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return gg()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_d._getInstance(lN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await aN(),!this.activeServiceWorker)return;this.sender=new rN(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cp();return await uT(e,Kh,"1"),await cT(e,Kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uT(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>hN(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=vd(o,!1).getAll();return new Fu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),dN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const mN=z0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(i,e){return Vn(i,"POST","/v2/accounts/mfaSignIn:start",Sn(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap=I0("rcb"),pN=new zu(3e4,6e4);class gN{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!It().grecaptcha?.render}load(e,t=""){return fe(yN(t),e,"argument-error"),this.shouldResolveImmediately(t)&&ZE(It().grecaptcha)?Promise.resolve(It().grecaptcha):new Promise((s,o)=>{const u=It().setTimeout(()=>{o(bn(e,"network-request-failed"))},pN.get());It()[ap]=()=>{It().clearTimeout(u),delete It()[ap];const m=It().grecaptcha;if(!m||!ZE(m)){o(bn(e,"internal-error"));return}const p=m.render;m.render=(y,v)=>{const b=p(y,v);return this.counter++,b},this.hostLanguage=t,s(m)};const h=`${yx()}?${Vo({onload:ap,render:"explicit",hl:t})}`;dg(h).catch(()=>{clearTimeout(u),o(bn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!It().grecaptcha?.render&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function yN(i){return i.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(i)}class _N{async load(e){return new bx(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gu="recaptcha",vN={theme:"light",type:"image"};class Ip{constructor(e,t,s={...vN}){this.parameters=s,this.type=gu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=fi(e),this.isInvisible=this.parameters.size==="invisible",fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const o=typeof t=="string"?document.getElementById(t):t;fe(o,this.auth,"argument-error"),this.container=o,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new _N:new gN,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),s=t.getResponse(e);return s||new Promise(o=>{const u=h=>{h&&(this.tokenChangeListeners.delete(u),o(h))};this.tokenChangeListeners.add(u),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(s=>s(t)),typeof e=="function")e(t);else if(typeof e=="string"){const s=It()[e];typeof s=="function"&&s(t)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){fe(c0()&&!gg(),this.auth,"internal-error"),await EN(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await tx(this.auth);fe(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function EN(){let i=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}i=()=>e(),window.addEventListener("load",i)}).catch(e=>{throw i&&window.removeEventListener("load",i),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=pu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function q0(i,e,t){if(un(i.app))return Promise.reject(ji(i));const s=fi(i),o=await bN(s,e,at(t));return new TN(o,u=>P0(s,u))}async function bN(i,e,t){if(!i._getRecaptchaConfig())try{await Ix(i)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const o=s.session;if("phoneNumber"in s){fe(o.type==="enroll",i,"internal-error");const u={idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await Ao(i,u,"mfaSmsEnrollment",async(y,v)=>{if(v.phoneEnrollmentInfo.captchaResponse===mu){fe(t?.type===gu,y,"argument-error");const b=await op(y,v,t);return lT(y,b)}return lT(y,v)},"PHONE_PROVIDER").catch(y=>Promise.reject(y))).phoneSessionInfo.sessionInfo}else{fe(o.type==="signin",i,"internal-error");const u=s.multiFactorHint?.uid||s.multiFactorUid;fe(u,i,"missing-multi-factor-info");const h={mfaPendingCredential:o.credential,mfaEnrollmentId:u,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await Ao(i,h,"mfaSmsSignIn",async(v,b)=>{if(b.phoneSignInInfo.captchaResponse===mu){fe(t?.type===gu,v,"argument-error");const A=await op(v,b,t);return hT(v,A)}return hT(v,b)},"PHONE_PROVIDER").catch(v=>Promise.reject(v))).phoneResponseInfo.sessionInfo}}else{const o={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await Ao(i,o,"sendVerificationCode",async(p,y)=>{if(y.captchaResponse===mu){fe(t?.type===gu,p,"argument-error");const v=await op(p,y,t);return aT(p,v)}return aT(p,y)},"PHONE_PROVIDER").catch(p=>Promise.reject(p))).sessionInfo}}finally{t?._reset()}}async function op(i,e,t){fe(t.type===gu,i,"argument-error");const s=await t.verify();fe(typeof s=="string",i,"argument-error");const o={...e};if("phoneEnrollmentInfo"in o){const u=o.phoneEnrollmentInfo.phoneNumber,h=o.phoneEnrollmentInfo.captchaResponse,m=o.phoneEnrollmentInfo.clientType,p=o.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:s,captchaResponse:h,clientType:m,recaptchaVersion:p}}),o}else if("phoneSignInInfo"in o){const u=o.phoneSignInInfo.captchaResponse,h=o.phoneSignInInfo.clientType,m=o.phoneSignInInfo.recaptchaVersion;return Object.assign(o,{phoneSignInInfo:{recaptchaToken:s,captchaResponse:u,clientType:h,recaptchaVersion:m}}),o}else return Object.assign(o,{recaptchaToken:s}),o}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H0(i,e){return e?pr(e):(fe(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg extends gd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return So(e,this._buildIdpRequest())}_linkToIdToken(e,t){return So(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return So(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wN(i){return O0(i.auth,new yg(i),i.bypassAuthState)}function AN(i){const{auth:e,user:t}=i;return fe(t,e,"internal-error"),Yx(t,new yg(i),i.bypassAuthState)}async function SN(i){const{auth:e,user:t}=i;return fe(t,e,"internal-error"),$x(t,new yg(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wN;case"linkViaPopup":case"linkViaRedirect":return SN;case"reauthViaPopup":case"reauthViaRedirect":return AN;default:ei(this.auth,"internal-error")}}resolve(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Tr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=new zu(2e3,1e4);async function G0(i,e,t){if(un(i.app))return Promise.reject(bn(i,"operation-not-supported-in-this-environment"));const s=fi(i);YI(i,e,mg);const o=H0(s,t);return new la(s,"signInViaPopup",e,o).executeNotNull()}class la extends F0{constructor(e,t,s,o,u){super(e,t,o,u),this.provider=s,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return fe(e,this.auth,"internal-error"),e}async onExecution(){Tr(this.filter.length===1,"Popup operations only handle one event");const e=pg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(bn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(bn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(bn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,RN.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CN="pendingRedirect",jh=new Map;class IN extends F0{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=jh.get(this.auth._key());if(!e){try{const s=await xN(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}jh.set(this.auth._key(),e)}return this.bypassAuthState||jh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function xN(i,e){const t=ON(e),s=DN(i);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function NN(i,e){jh.set(i._key(),e)}function DN(i){return pr(i._redirectPersistence)}function ON(i){return Ph(CN,i.config.apiKey,i.name)}async function PN(i,e,t=!1){if(un(i.app))return Promise.reject(ji(i));const s=fi(i),o=H0(s,e),h=await new IN(s,o,t).execute();return h&&!t&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jN=600*1e3;class MN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!kN(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!$0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(bn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jN&&this.cachedEventUids.clear(),this.cachedEventUids.has(dT(e))}saveEventToCache(e){this.cachedEventUids.add(dT(e)),this.lastProcessedEventTime=Date.now()}}function dT(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function $0({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function kN(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $0(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(i,e={}){return Vn(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,UN=/^https?/;async function BN(i){if(i.config.emulator)return;const{authorizedDomains:e}=await VN(i);for(const t of e)try{if(zN(t))return}catch{}ei(i,"unauthorized-domain")}function zN(i){const e=Sp(),{protocol:t,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&h.hostname===s}if(!UN.test(t))return!1;if(LN.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN=new zu(3e4,6e4);function fT(){const i=It().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function HN(i){return new Promise((e,t)=>{function s(){fT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fT(),t(bn(i,"network-request-failed"))},timeout:qN.get()})}if(It().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(It().gapi?.load)s();else{const o=I0("iframefcb");return It()[o]=()=>{gapi.load?s():t(bn(i,"network-request-failed"))},dg(`${vx()}?onload=${o}`).catch(u=>t(u))}}).catch(e=>{throw Mh=null,e})}let Mh=null;function FN(i){return Mh=Mh||HN(i),Mh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=new zu(5e3,15e3),$N="__/auth/iframe",YN="emulator/auth/iframe",KN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},QN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function XN(i){const e=i.config;fe(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?ug(e,YN):`https://${i.config.authDomain}/${$N}`,s={apiKey:e.apiKey,appName:i.name,v:va},o=QN.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${t}?${Vo(s).slice(1)}`}async function WN(i){const e=await FN(i),t=It().gapi;return fe(t,i,"internal-error"),e.open({where:document.body,url:XN(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KN,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=bn(i,"network-request-failed"),m=It().setTimeout(()=>{u(h)},GN.get());function p(){It().clearTimeout(m),o(s)}s.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},JN=500,eD=600,tD="_blank",nD="http://localhost";class mT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function iD(i,e,t,s=JN,o=eD){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let m="";const p={...ZN,width:s.toString(),height:o.toString(),top:u,left:h},y=cn().toLowerCase();t&&(m=T0(y)?tD:t),v0(y)&&(e=e||nD,p.scrollbars="yes");const v=Object.entries(p).reduce((A,[R,O])=>`${A}${R}=${O},`,"");if(ux(y)&&m!=="_self")return rD(e||"",m),new mT(null);const b=window.open(e||"",m,v);fe(b,i,"popup-blocked");try{b.focus()}catch{}return new mT(b)}function rD(i,e){const t=document.createElement("a");t.href=i,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD="__/auth/handler",aD="emulator/auth/handler",oD=encodeURIComponent("fac");async function pT(i,e,t,s,o,u){fe(i.config.authDomain,i,"auth-domain-config-required"),fe(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:s,v:va,eventId:o};if(e instanceof mg){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",PC(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))h[v]=b}if(e instanceof Hu){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(h.scopes=v.join(","))}i.tenantId&&(h.tid=i.tenantId);const m=h;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await i._getAppCheckToken(),y=p?`#${oD}=${encodeURIComponent(p)}`:"";return`${lD(i)}?${Vo(m).slice(1)}${y}`}function lD({config:i}){return i.emulator?ug(i,aD):`https://${i.authDomain}/${sD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp="webStorageSupport";class uD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L0,this._completeRedirectFn=PN,this._overrideRedirectResult=NN}async _openPopup(e,t,s,o){Tr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await pT(e,t,s,Sp(),o);return iD(e,u,pg())}async _openRedirect(e,t,s,o){await this._originValidation(e);const u=await pT(e,t,s,Sp(),o);return sN(u),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:u}=this.eventManagers[t];return o?Promise.resolve(o):(Tr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await WN(e),s=new MN(e);return t.register("authEvent",o=>(fe(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lp,{type:lp},o=>{const u=o?.[0]?.[lp];u!==void 0&&t(!!u),ei(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=BN(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return R0()||E0()||hg()}}const cD=uD;var gT="@firebase/auth",yT="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fD(i){fs(new vr("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=s.options;fe(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:h,authDomain:m,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:C0(i)},y=new px(s,o,u,p);return Nx(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),fs(new vr("auth-internal",e=>{const t=fi(e.getProvider("auth").getImmediate());return(s=>new hD(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Zn(gT,yT,dD(i)),Zn(gT,yT,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=300,pD=t0("authIdTokenMaxAge")||mD;let _T=null;const gD=i=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>pD)return;const o=t?.token;_T!==o&&(_T=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function yD(i=pd()){const e=Bu(i,"auth");if(e.isInitialized())return e.getImmediate();const t=xx(i,{popupRedirectResolver:cD,persistence:[mN,nN,L0]}),s=t0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=gD(u.toString());Jx(t,h,()=>h(t.currentUser)),Zx(t,m=>h(m))}}const o=Jb("auth");return o&&Dx(t,`http://${o}`),t}function _D(){return document.getElementsByTagName("head")?.[0]??document}gx({loadJS(i){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=bn("internal-error");u.customData=o,t(u)},s.type="text/javascript",s.charset="UTF-8",_D().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fD("Browser");var vD="firebase",ED="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Zn(vD,ED,"app");var vT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hs,Y0;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,C){function I(){}I.prototype=C.prototype,N.D=C.prototype,N.prototype=new I,N.prototype.constructor=N,N.C=function(M,k,U){for(var D=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)D[Ft-2]=arguments[Ft];return C.prototype[k].apply(M,D)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,t),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,C,I){I||(I=0);var M=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)M[k]=C.charCodeAt(I++)|C.charCodeAt(I++)<<8|C.charCodeAt(I++)<<16|C.charCodeAt(I++)<<24;else for(k=0;16>k;++k)M[k]=C[I++]|C[I++]<<8|C[I++]<<16|C[I++]<<24;C=N.g[0],I=N.g[1],k=N.g[2];var U=N.g[3],D=C+(U^I&(k^U))+M[0]+3614090360&4294967295;C=I+(D<<7&4294967295|D>>>25),D=U+(k^C&(I^k))+M[1]+3905402710&4294967295,U=C+(D<<12&4294967295|D>>>20),D=k+(I^U&(C^I))+M[2]+606105819&4294967295,k=U+(D<<17&4294967295|D>>>15),D=I+(C^k&(U^C))+M[3]+3250441966&4294967295,I=k+(D<<22&4294967295|D>>>10),D=C+(U^I&(k^U))+M[4]+4118548399&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(k^C&(I^k))+M[5]+1200080426&4294967295,U=C+(D<<12&4294967295|D>>>20),D=k+(I^U&(C^I))+M[6]+2821735955&4294967295,k=U+(D<<17&4294967295|D>>>15),D=I+(C^k&(U^C))+M[7]+4249261313&4294967295,I=k+(D<<22&4294967295|D>>>10),D=C+(U^I&(k^U))+M[8]+1770035416&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(k^C&(I^k))+M[9]+2336552879&4294967295,U=C+(D<<12&4294967295|D>>>20),D=k+(I^U&(C^I))+M[10]+4294925233&4294967295,k=U+(D<<17&4294967295|D>>>15),D=I+(C^k&(U^C))+M[11]+2304563134&4294967295,I=k+(D<<22&4294967295|D>>>10),D=C+(U^I&(k^U))+M[12]+1804603682&4294967295,C=I+(D<<7&4294967295|D>>>25),D=U+(k^C&(I^k))+M[13]+4254626195&4294967295,U=C+(D<<12&4294967295|D>>>20),D=k+(I^U&(C^I))+M[14]+2792965006&4294967295,k=U+(D<<17&4294967295|D>>>15),D=I+(C^k&(U^C))+M[15]+1236535329&4294967295,I=k+(D<<22&4294967295|D>>>10),D=C+(k^U&(I^k))+M[1]+4129170786&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^k&(C^I))+M[6]+3225465664&4294967295,U=C+(D<<9&4294967295|D>>>23),D=k+(C^I&(U^C))+M[11]+643717713&4294967295,k=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(k^U))+M[0]+3921069994&4294967295,I=k+(D<<20&4294967295|D>>>12),D=C+(k^U&(I^k))+M[5]+3593408605&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^k&(C^I))+M[10]+38016083&4294967295,U=C+(D<<9&4294967295|D>>>23),D=k+(C^I&(U^C))+M[15]+3634488961&4294967295,k=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(k^U))+M[4]+3889429448&4294967295,I=k+(D<<20&4294967295|D>>>12),D=C+(k^U&(I^k))+M[9]+568446438&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^k&(C^I))+M[14]+3275163606&4294967295,U=C+(D<<9&4294967295|D>>>23),D=k+(C^I&(U^C))+M[3]+4107603335&4294967295,k=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(k^U))+M[8]+1163531501&4294967295,I=k+(D<<20&4294967295|D>>>12),D=C+(k^U&(I^k))+M[13]+2850285829&4294967295,C=I+(D<<5&4294967295|D>>>27),D=U+(I^k&(C^I))+M[2]+4243563512&4294967295,U=C+(D<<9&4294967295|D>>>23),D=k+(C^I&(U^C))+M[7]+1735328473&4294967295,k=U+(D<<14&4294967295|D>>>18),D=I+(U^C&(k^U))+M[12]+2368359562&4294967295,I=k+(D<<20&4294967295|D>>>12),D=C+(I^k^U)+M[5]+4294588738&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^k)+M[8]+2272392833&4294967295,U=C+(D<<11&4294967295|D>>>21),D=k+(U^C^I)+M[11]+1839030562&4294967295,k=U+(D<<16&4294967295|D>>>16),D=I+(k^U^C)+M[14]+4259657740&4294967295,I=k+(D<<23&4294967295|D>>>9),D=C+(I^k^U)+M[1]+2763975236&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^k)+M[4]+1272893353&4294967295,U=C+(D<<11&4294967295|D>>>21),D=k+(U^C^I)+M[7]+4139469664&4294967295,k=U+(D<<16&4294967295|D>>>16),D=I+(k^U^C)+M[10]+3200236656&4294967295,I=k+(D<<23&4294967295|D>>>9),D=C+(I^k^U)+M[13]+681279174&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^k)+M[0]+3936430074&4294967295,U=C+(D<<11&4294967295|D>>>21),D=k+(U^C^I)+M[3]+3572445317&4294967295,k=U+(D<<16&4294967295|D>>>16),D=I+(k^U^C)+M[6]+76029189&4294967295,I=k+(D<<23&4294967295|D>>>9),D=C+(I^k^U)+M[9]+3654602809&4294967295,C=I+(D<<4&4294967295|D>>>28),D=U+(C^I^k)+M[12]+3873151461&4294967295,U=C+(D<<11&4294967295|D>>>21),D=k+(U^C^I)+M[15]+530742520&4294967295,k=U+(D<<16&4294967295|D>>>16),D=I+(k^U^C)+M[2]+3299628645&4294967295,I=k+(D<<23&4294967295|D>>>9),D=C+(k^(I|~U))+M[0]+4096336452&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~k))+M[7]+1126891415&4294967295,U=C+(D<<10&4294967295|D>>>22),D=k+(C^(U|~I))+M[14]+2878612391&4294967295,k=U+(D<<15&4294967295|D>>>17),D=I+(U^(k|~C))+M[5]+4237533241&4294967295,I=k+(D<<21&4294967295|D>>>11),D=C+(k^(I|~U))+M[12]+1700485571&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~k))+M[3]+2399980690&4294967295,U=C+(D<<10&4294967295|D>>>22),D=k+(C^(U|~I))+M[10]+4293915773&4294967295,k=U+(D<<15&4294967295|D>>>17),D=I+(U^(k|~C))+M[1]+2240044497&4294967295,I=k+(D<<21&4294967295|D>>>11),D=C+(k^(I|~U))+M[8]+1873313359&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~k))+M[15]+4264355552&4294967295,U=C+(D<<10&4294967295|D>>>22),D=k+(C^(U|~I))+M[6]+2734768916&4294967295,k=U+(D<<15&4294967295|D>>>17),D=I+(U^(k|~C))+M[13]+1309151649&4294967295,I=k+(D<<21&4294967295|D>>>11),D=C+(k^(I|~U))+M[4]+4149444226&4294967295,C=I+(D<<6&4294967295|D>>>26),D=U+(I^(C|~k))+M[11]+3174756917&4294967295,U=C+(D<<10&4294967295|D>>>22),D=k+(C^(U|~I))+M[2]+718787259&4294967295,k=U+(D<<15&4294967295|D>>>17),D=I+(U^(k|~C))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+C&4294967295,N.g[1]=N.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+U&4294967295}s.prototype.u=function(N,C){C===void 0&&(C=N.length);for(var I=C-this.blockSize,M=this.B,k=this.h,U=0;U<C;){if(k==0)for(;U<=I;)o(this,N,U),U+=this.blockSize;if(typeof N=="string"){for(;U<C;)if(M[k++]=N.charCodeAt(U++),k==this.blockSize){o(this,M),k=0;break}}else for(;U<C;)if(M[k++]=N[U++],k==this.blockSize){o(this,M),k=0;break}}this.h=k,this.o+=C},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var C=1;C<N.length-8;++C)N[C]=0;var I=8*this.o;for(C=N.length-8;C<N.length;++C)N[C]=I&255,I/=256;for(this.u(N),N=Array(16),C=I=0;4>C;++C)for(var M=0;32>M;M+=8)N[I++]=this.g[C]>>>M&255;return N};function u(N,C){var I=m;return Object.prototype.hasOwnProperty.call(I,N)?I[N]:I[N]=C(N)}function h(N,C){this.h=C;for(var I=[],M=!0,k=N.length-1;0<=k;k--){var U=N[k]|0;M&&U==C||(I[k]=U,M=!1)}this.g=I}var m={};function p(N){return-128<=N&&128>N?u(N,function(C){return new h([C|0],0>C?-1:0)}):new h([N|0],0>N?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return b;if(0>N)return V(y(-N));for(var C=[],I=1,M=0;N>=I;M++)C[M]=N/I|0,I*=4294967296;return new h(C,0)}function v(N,C){if(N.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(N.charAt(0)=="-")return V(v(N.substring(1),C));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=y(Math.pow(C,8)),M=b,k=0;k<N.length;k+=8){var U=Math.min(8,N.length-k),D=parseInt(N.substring(k,k+U),C);8>U?(U=y(Math.pow(C,U)),M=M.j(U).add(y(D))):(M=M.j(I),M=M.add(y(D)))}return M}var b=p(0),A=p(1),R=p(16777216);i=h.prototype,i.m=function(){if(q(this))return-V(this).m();for(var N=0,C=1,I=0;I<this.g.length;I++){var M=this.i(I);N+=(0<=M?M:4294967296+M)*C,C*=4294967296}return N},i.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(O(this))return"0";if(q(this))return"-"+V(this).toString(N);for(var C=y(Math.pow(N,6)),I=this,M="";;){var k=ie(I,C).g;I=ee(I,k.j(C));var U=((0<I.g.length?I.g[0]:I.h)>>>0).toString(N);if(I=k,O(I))return U+M;for(;6>U.length;)U="0"+U;M=U+M}},i.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function O(N){if(N.h!=0)return!1;for(var C=0;C<N.g.length;C++)if(N.g[C]!=0)return!1;return!0}function q(N){return N.h==-1}i.l=function(N){return N=ee(this,N),q(N)?-1:O(N)?0:1};function V(N){for(var C=N.g.length,I=[],M=0;M<C;M++)I[M]=~N.g[M];return new h(I,~N.h).add(A)}i.abs=function(){return q(this)?V(this):this},i.add=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],M=0,k=0;k<=C;k++){var U=M+(this.i(k)&65535)+(N.i(k)&65535),D=(U>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);M=D>>>16,U&=65535,D&=65535,I[k]=D<<16|U}return new h(I,I[I.length-1]&-2147483648?-1:0)};function ee(N,C){return N.add(V(C))}i.j=function(N){if(O(this)||O(N))return b;if(q(this))return q(N)?V(this).j(V(N)):V(V(this).j(N));if(q(N))return V(this.j(V(N)));if(0>this.l(R)&&0>N.l(R))return y(this.m()*N.m());for(var C=this.g.length+N.g.length,I=[],M=0;M<2*C;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(var k=0;k<N.g.length;k++){var U=this.i(M)>>>16,D=this.i(M)&65535,Ft=N.i(k)>>>16,dt=N.i(k)&65535;I[2*M+2*k]+=D*dt,K(I,2*M+2*k),I[2*M+2*k+1]+=U*dt,K(I,2*M+2*k+1),I[2*M+2*k+1]+=D*Ft,K(I,2*M+2*k+1),I[2*M+2*k+2]+=U*Ft,K(I,2*M+2*k+2)}for(M=0;M<C;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=C;M<2*C;M++)I[M]=0;return new h(I,0)};function K(N,C){for(;(N[C]&65535)!=N[C];)N[C+1]+=N[C]>>>16,N[C]&=65535,C++}function Q(N,C){this.g=N,this.h=C}function ie(N,C){if(O(C))throw Error("division by zero");if(O(N))return new Q(b,b);if(q(N))return C=ie(V(N),C),new Q(V(C.g),V(C.h));if(q(C))return C=ie(N,V(C)),new Q(V(C.g),C.h);if(30<N.g.length){if(q(N)||q(C))throw Error("slowDivide_ only works with positive integers.");for(var I=A,M=C;0>=M.l(N);)I=ae(I),M=ae(M);var k=re(I,1),U=re(M,1);for(M=re(M,2),I=re(I,2);!O(M);){var D=U.add(M);0>=D.l(N)&&(k=k.add(I),U=D),M=re(M,1),I=re(I,1)}return C=ee(N,k.j(C)),new Q(k,C)}for(k=b;0<=N.l(C);){for(I=Math.max(1,Math.floor(N.m()/C.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),U=y(I),D=U.j(C);q(D)||0<D.l(N);)I-=M,U=y(I),D=U.j(C);O(U)&&(U=A),k=k.add(U),N=ee(N,D)}return new Q(k,N)}i.A=function(N){return ie(this,N).h},i.and=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],M=0;M<C;M++)I[M]=this.i(M)&N.i(M);return new h(I,this.h&N.h)},i.or=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],M=0;M<C;M++)I[M]=this.i(M)|N.i(M);return new h(I,this.h|N.h)},i.xor=function(N){for(var C=Math.max(this.g.length,N.g.length),I=[],M=0;M<C;M++)I[M]=this.i(M)^N.i(M);return new h(I,this.h^N.h)};function ae(N){for(var C=N.g.length+1,I=[],M=0;M<C;M++)I[M]=N.i(M)<<1|N.i(M-1)>>>31;return new h(I,N.h)}function re(N,C){var I=C>>5;C%=32;for(var M=N.g.length-I,k=[],U=0;U<M;U++)k[U]=0<C?N.i(U+I)>>>C|N.i(U+I+1)<<32-C:N.i(U+I);return new h(k,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Y0=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.A,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,hs=h}).apply(typeof vT<"u"?vT:typeof self<"u"?self:typeof window<"u"?window:{});var wh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var K0,lu,Q0,kh,xp,X0,W0,Z0;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,_,E){return c==Array.prototype||c==Object.prototype||(c[_]=E.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof wh=="object"&&wh];for(var _=0;_<c.length;++_){var E=c[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=t(this);function o(c,_){if(_)e:{var E=s;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in E))break e;E=E[z]}c=c[c.length-1],S=E[c],_=_(S),_!=S&&_!=null&&e(E,c,{configurable:!0,writable:!0,value:_})}}function u(c,_){c instanceof String&&(c+="");var E=0,S=!1,z={next:function(){if(!S&&E<c.length){var Y=E++;return{value:_(Y,c[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}o("Array.prototype.values",function(c){return c||function(){return u(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var h=h||{},m=this||self;function p(c){var _=typeof c;return _=_!="object"?_:c?Array.isArray(c)?"array":_:"null",_=="array"||_=="object"&&typeof c.length=="number"}function y(c){var _=typeof c;return _=="object"&&c!=null||_=="function"}function v(c,_,E){return c.call.apply(c.bind,arguments)}function b(c,_,E){if(!c)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,S),c.apply(_,z)}}return function(){return c.apply(_,arguments)}}function A(c,_,E){return A=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,A.apply(null,arguments)}function R(c,_){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function O(c,_){function E(){}E.prototype=_.prototype,c.aa=_.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(S,z,Y){for(var le=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)le[ke-2]=arguments[ke];return _.prototype[z].apply(S,le)}}function q(c){const _=c.length;if(0<_){const E=Array(_);for(let S=0;S<_;S++)E[S]=c[S];return E}return[]}function V(c,_){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(p(S)){const z=c.length||0,Y=S.length||0;c.length=z+Y;for(let le=0;le<Y;le++)c[z+le]=S[le]}else c.push(S)}}class ee{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function K(c){return/^[\s\xa0]*$/.test(c)}function Q(){var c=m.navigator;return c&&(c=c.userAgent)?c:""}function ie(c){return ie[" "](c),c}ie[" "]=function(){};var ae=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function re(c,_,E){for(const S in c)_.call(E,c[S],S,c)}function N(c,_){for(const E in c)_.call(void 0,c[E],E,c)}function C(c){const _={};for(const E in c)_[E]=c[E];return _}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(c,_){let E,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(E in S)c[E]=S[E];for(let Y=0;Y<I.length;Y++)E=I[Y],Object.prototype.hasOwnProperty.call(S,E)&&(c[E]=S[E])}}function k(c){var _=1;c=c.split(":");const E=[];for(;0<_&&c.length;)E.push(c.shift()),_--;return c.length&&E.push(c.join(":")),E}function U(c){m.setTimeout(()=>{throw c},0)}function D(){var c=ze;let _=null;return c.g&&(_=c.g,c.g=c.g.next,c.g||(c.h=null),_.next=null),_}class Ft{constructor(){this.h=this.g=null}add(_,E){const S=dt.get();S.set(_,E),this.h?this.h.next=S:this.g=S,this.h=S}}var dt=new ee(()=>new X,c=>c.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,ye=!1,ze=new Ft,P=()=>{const c=m.Promise.resolve(void 0);ue=()=>{c.then(se)}};var se=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(E){U(E)}var _=dt;_.j(c),100>_.h&&(_.h++,c.next=_.g,_.g=c)}ye=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function oe(c,_){this.type=c,this.g=this.target=_,this.defaultPrevented=!1}oe.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!m.addEventListener||!Object.defineProperty)return!1;var c=!1,_=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};m.addEventListener("test",E,_),m.removeEventListener("test",E,_)}catch{}return c})();function xe(c,_){if(oe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=_,_=c.relatedTarget){if(ae){e:{try{ie(_.nodeName);var z=!0;break e}catch{}z=!1}z||(_=null)}}else E=="mouseover"?_=c.fromElement:E=="mouseout"&&(_=c.toElement);this.relatedTarget=_,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:Ae[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xe.aa.h.call(this)}}O(xe,oe);var Ae={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Vt="closure_listenable_"+(1e6*Math.random()|0),it=0;function mi(c,_,E,S,z){this.listener=c,this.proxy=null,this.src=_,this.type=E,this.capture=!!S,this.ha=z,this.key=++it,this.da=this.fa=!1}function Cr(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function qi(c){this.src=c,this.g={},this.h=0}qi.prototype.add=function(c,_,E,S,z){var Y=c.toString();c=this.g[Y],c||(c=this.g[Y]=[],this.h++);var le=As(c,_,S,z);return-1<le?(_=c[le],E||(_.fa=!1)):(_=new mi(_,this.src,Y,!!S,z),_.fa=E,c.push(_)),_};function ws(c,_){var E=_.type;if(E in c.g){var S=c.g[E],z=Array.prototype.indexOf.call(S,_,void 0),Y;(Y=0<=z)&&Array.prototype.splice.call(S,z,1),Y&&(Cr(_),c.g[E].length==0&&(delete c.g[E],c.h--))}}function As(c,_,E,S){for(var z=0;z<c.length;++z){var Y=c[z];if(!Y.da&&Y.listener==_&&Y.capture==!!E&&Y.ha==S)return z}return-1}var Ss="closure_lm_"+(1e6*Math.random()|0),Fo={};function Wu(c,_,E,S,z){if(Array.isArray(_)){for(var Y=0;Y<_.length;Y++)Wu(c,_[Y],E,S,z);return null}return E=Zu(E),c&&c[Vt]?c.K(_,E,y(S)?!!S.capture:!1,z):Ln(c,_,E,!1,S,z)}function Ln(c,_,E,S,z,Y){if(!_)throw Error("Invalid event type");var le=y(z)?!!z.capture:!!z,ke=Aa(c);if(ke||(c[Ss]=ke=new qi(c)),E=ke.add(_,E,S,le,Y),E.proxy)return E;if(S=Gd(),E.proxy=S,S.src=c,S.listener=E,c.addEventListener)ve||(z=le),z===void 0&&(z=!1),c.addEventListener(_.toString(),S,z);else if(c.attachEvent)c.attachEvent(Rs(_.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Gd(){function c(E){return _.call(c.src,c.listener,E)}const _=$d;return c}function Go(c,_,E,S,z){if(Array.isArray(_))for(var Y=0;Y<_.length;Y++)Go(c,_[Y],E,S,z);else S=y(S)?!!S.capture:!!S,E=Zu(E),c&&c[Vt]?(c=c.i,_=String(_).toString(),_ in c.g&&(Y=c.g[_],E=As(Y,E,S,z),-1<E&&(Cr(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete c.g[_],c.h--)))):c&&(c=Aa(c))&&(_=c.g[_.toString()],c=-1,_&&(c=As(_,E,S,z)),(E=-1<c?_[c]:null)&&wa(E))}function wa(c){if(typeof c!="number"&&c&&!c.da){var _=c.src;if(_&&_[Vt])ws(_.i,c);else{var E=c.type,S=c.proxy;_.removeEventListener?_.removeEventListener(E,S,c.capture):_.detachEvent?_.detachEvent(Rs(E),S):_.addListener&&_.removeListener&&_.removeListener(S),(E=Aa(_))?(ws(E,c),E.h==0&&(E.src=null,_[Ss]=null)):Cr(c)}}}function Rs(c){return c in Fo?Fo[c]:Fo[c]="on"+c}function $d(c,_){if(c.da)c=!0;else{_=new xe(_,this);var E=c.listener,S=c.ha||c.src;c.fa&&wa(c),c=E.call(S,_)}return c}function Aa(c){return c=c[Ss],c instanceof qi?c:null}var $o="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zu(c){return typeof c=="function"?c:(c[$o]||(c[$o]=function(_){return c.handleEvent(_)}),c[$o])}function ft(){ce.call(this),this.i=new qi(this),this.M=this,this.F=null}O(ft,ce),ft.prototype[Vt]=!0,ft.prototype.removeEventListener=function(c,_,E,S){Go(this,c,_,E,S)};function Ye(c,_){var E,S=c.F;if(S)for(E=[];S;S=S.F)E.push(S);if(c=c.M,S=_.type||_,typeof _=="string")_=new oe(_,c);else if(_ instanceof oe)_.target=_.target||c;else{var z=_;_=new oe(S,c),M(_,z)}if(z=!0,E)for(var Y=E.length-1;0<=Y;Y--){var le=_.g=E[Y];z=Rn(le,S,!0,_)&&z}if(le=_.g=c,z=Rn(le,S,!0,_)&&z,z=Rn(le,S,!1,_)&&z,E)for(Y=0;Y<E.length;Y++)le=_.g=E[Y],z=Rn(le,S,!1,_)&&z}ft.prototype.N=function(){if(ft.aa.N.call(this),this.i){var c=this.i,_;for(_ in c.g){for(var E=c.g[_],S=0;S<E.length;S++)Cr(E[S]);delete c.g[_],c.h--}}this.F=null},ft.prototype.K=function(c,_,E,S){return this.i.add(String(c),_,!1,E,S)},ft.prototype.L=function(c,_,E,S){return this.i.add(String(c),_,!0,E,S)};function Rn(c,_,E,S){if(_=c.i.g[String(_)],!_)return!0;_=_.concat();for(var z=!0,Y=0;Y<_.length;++Y){var le=_[Y];if(le&&!le.da&&le.capture==E){var ke=le.listener,Ot=le.ha||le.src;le.fa&&ws(c.i,le),z=ke.call(Ot,S)!==!1&&z}}return z&&!S.defaultPrevented}function en(c,_,E){if(typeof c=="function")E&&(c=A(c,E));else if(c&&typeof c.handleEvent=="function")c=A(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:m.setTimeout(c,_||0)}function Ju(c){c.g=en(()=>{c.g=null,c.i&&(c.i=!1,Ju(c))},c.l);const _=c.h;c.h=null,c.m.apply(null,_)}class Yd extends ce{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Ju(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Cs(c){ce.call(this),this.h=c,this.g={}}O(Cs,ce);var Is=[];function xs(c){re(c.g,function(_,E){this.g.hasOwnProperty(E)&&wa(_)},c),c.g={}}Cs.prototype.N=function(){Cs.aa.N.call(this),xs(this)},Cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ti=m.JSON.stringify,Sa=m.JSON.parse,Ns=class{stringify(c){return m.JSON.stringify(c,void 0)}parse(c){return m.JSON.parse(c,void 0)}};function Yo(){}Yo.prototype.h=null;function Ko(c){return c.h||(c.h=c.i())}function Qo(){}var Hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fi(){oe.call(this,"d")}O(Fi,oe);function Xo(){oe.call(this,"c")}O(Xo,oe);var pi={},Wo=null;function Ir(){return Wo=Wo||new ft}pi.La="serverreachability";function Ra(c){oe.call(this,pi.La,c)}O(Ra,oe);function xr(c){const _=Ir();Ye(_,new Ra(_))}pi.STAT_EVENT="statevent";function ec(c,_){oe.call(this,pi.STAT_EVENT,c),this.stat=_}O(ec,oe);function ot(c){const _=Ir();Ye(_,new ec(_,c))}pi.Ma="timingevent";function Dt(c,_){oe.call(this,pi.Ma,c),this.size=_}O(Dt,oe);function wt(c,_){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){c()},_)}function Un(){this.g=!0}Un.prototype.xa=function(){this.g=!1};function Zo(c,_,E,S,z,Y){c.info(function(){if(c.g)if(Y)for(var le="",ke=Y.split("&"),Ot=0;Ot<ke.length;Ot++){var Ve=ke[Ot].split("=");if(1<Ve.length){var Ut=Ve[0];Ve=Ve[1];var Pt=Ut.split("_");le=2<=Pt.length&&Pt[1]=="type"?le+(Ut+"="+Ve+"&"):le+(Ut+"=redacted&")}}else le=null;else le=Y;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+_+`
`+E+`
`+le})}function Kd(c,_,E,S,z,Y,le){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+_+`
`+E+`
`+Y+" "+le})}function Nr(c,_,E,S){c.info(function(){return"XMLHTTP TEXT ("+_+"): "+Ds(c,E)+(S?" "+S:"")})}function tc(c,_){c.info(function(){return"TIMEOUT: "+_})}Un.prototype.info=function(){};function Ds(c,_){if(!c.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var S=E[c];if(!(2>S.length)){var z=S[1];if(Array.isArray(z)&&!(1>z.length)){var Y=z[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var le=1;le<z.length;le++)z[le]=""}}}}return ti(E)}catch{return _}}var Dr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},gi;function yi(){}O(yi,Yo),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},gi=new yi;function dn(c,_,E,S){this.j=c,this.i=_,this.l=E,this.R=S||1,this.U=new Cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vt}function vt(){this.i=null,this.g="",this.h=!1}var Jo={},Ca={};function ni(c,_,E){c.L=1,c.v=ks(Cn(_)),c.m=E,c.P=!0,$i(c,null)}function $i(c,_){c.F=Date.now(),Os(c),c.A=Cn(c.v);var E=c.A,S=c.R;Array.isArray(S)||(S=[String(S)]),sl(E.i,"t",S),c.C=0,E=c.j.J,c.h=new vt,c.g=yc(c.j,E?_:null,!c.m),0<c.O&&(c.M=new Yd(A(c.Y,c,c.g),c.O)),_=c.U,E=c.g,S=c.ca;var z="readystatechange";Array.isArray(z)||(z&&(Is[0]=z.toString()),z=Is);for(var Y=0;Y<z.length;Y++){var le=Wu(E,z[Y],S||_.handleEvent,!1,_.h||_);if(!le)break;_.g[le.key]=le}_=c.H?C(c.H):{},c.m?(c.u||(c.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,_)):(c.u="GET",c.g.ea(c.A,c.u,null,_)),xr(),Zo(c.i,c.u,c.A,c.l,c.R,c.m)}dn.prototype.ca=function(c){c=c.target;const _=this.M;_&&Hn(c)==3?_.j():this.Y(c)},dn.prototype.Y=function(c){try{if(c==this.g)e:{const Pt=Hn(this.g);var _=this.g.Ba();const er=this.g.Z();if(!(3>Pt)&&(Pt!=3||this.g&&(this.h.h||this.g.oa()||uc(this.g)))){this.J||Pt!=4||_==7||(_==8||0>=er?xr(3):xr(2)),Or(this);var E=this.g.Z();this.X=E;t:if(nc(this)){var S=uc(this.g);c="";var z=S.length,Y=Hn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gt(this),_i(this);var le="";break t}this.h.i=new m.TextDecoder}for(_=0;_<z;_++)this.h.h=!0,c+=this.h.i.decode(S[_],{stream:!(Y&&_==z-1)});S.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=E==200,Kd(this.i,this.u,this.A,this.l,this.R,Pt,E),this.o){if(this.T&&!this.K){t:{if(this.g){var ke,Ot=this.g;if((ke=Ot.g?Ot.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(ke)){var Ve=ke;break t}}Ve=null}if(E=Ve)Nr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ps(this,E);else{this.o=!1,this.s=3,ot(12),Gt(this),_i(this);break e}}if(this.P){E=!0;let $t;for(;!this.J&&this.C<le.length;)if($t=ic(this,le),$t==Ca){Pt==4&&(this.s=4,ot(14),E=!1),Nr(this.i,this.l,null,"[Incomplete Response]");break}else if($t==Jo){this.s=4,ot(15),Nr(this.i,this.l,le,"[Invalid Chunk]"),E=!1;break}else Nr(this.i,this.l,$t,null),Ps(this,$t);if(nc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pt!=4||le.length!=0||this.h.h||(this.s=1,ot(16),E=!1),this.o=this.o&&E,!E)Nr(this.i,this.l,le,"[Invalid Chunked Response]"),Gt(this),_i(this);else if(0<le.length&&!this.W){this.W=!0;var Ut=this.j;Ut.g==this&&Ut.ba&&!Ut.M&&(Ut.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),Fs(Ut),Ut.M=!0,ot(11))}}else Nr(this.i,this.l,le,null),Ps(this,le);Pt==4&&Gt(this),this.o&&!this.J&&(Pt==4?mc(this.j,this):(this.o=!1,Os(this)))}else Jd(this.g),E==400&&0<le.indexOf("Unknown SID")?(this.s=3,ot(12)):(this.s=0,ot(13)),Gt(this),_i(this)}}}catch{}finally{}};function nc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function ic(c,_){var E=c.C,S=_.indexOf(`
`,E);return S==-1?Ca:(E=Number(_.substring(E,S)),isNaN(E)?Jo:(S+=1,S+E>_.length?Ca:(_=_.slice(S,S+E),c.C=S+E,_)))}dn.prototype.cancel=function(){this.J=!0,Gt(this)};function Os(c){c.S=Date.now()+c.I,rc(c,c.I)}function rc(c,_){if(c.B!=null)throw Error("WatchDog timer not null");c.B=wt(A(c.ba,c),_)}function Or(c){c.B&&(m.clearTimeout(c.B),c.B=null)}dn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(tc(this.i,this.A),this.L!=2&&(xr(),ot(17)),Gt(this),this.s=2,_i(this)):rc(this,this.S-c)};function _i(c){c.j.G==0||c.J||mc(c.j,c)}function Gt(c){Or(c);var _=c.M;_&&typeof _.ma=="function"&&_.ma(),c.M=null,xs(c.U),c.g&&(_=c.g,c.g=null,_.abort(),_.ma())}function Ps(c,_){try{var E=c.j;if(E.G!=0&&(E.g==c||el(E.h,c))){if(!c.K&&el(E.h,c)&&E.G==3){try{var S=E.Da.g.parse(_)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)Ua(E),Va(E);else break e;cl(E),ot(18)}}else E.za=z[1],0<E.za-E.T&&37500>z[2]&&E.F&&E.v==0&&!E.C&&(E.C=wt(A(E.Za,E),6e3));if(1>=xa(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ji(E,11)}else if((c.K||E.g==c)&&Ua(E),!K(_))for(z=E.Da.g.parse(_),_=0;_<z.length;_++){let Ve=z[_];if(E.T=Ve[0],Ve=Ve[1],E.G==2)if(Ve[0]=="c"){E.K=Ve[1],E.ia=Ve[2];const Ut=Ve[3];Ut!=null&&(E.la=Ut,E.j.info("VER="+E.la));const Pt=Ve[4];Pt!=null&&(E.Aa=Pt,E.j.info("SVER="+E.Aa));const er=Ve[5];er!=null&&typeof er=="number"&&0<er&&(S=1.5*er,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const $t=c.g;if($t){const Si=$t.g?$t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Si){var Y=S.h;Y.g||Si.indexOf("spdy")==-1&&Si.indexOf("quic")==-1&&Si.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Na(Y,Y.h),Y.h=null))}if(S.D){const dl=$t.g?$t.g.getResponseHeader("X-HTTP-Session-Id"):null;dl&&(S.ya=dl,Ze(S.I,S.D,dl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var le=c;if(S.qa=gc(S,S.J?S.ia:null,S.W),le.K){fn(S.h,le);var ke=le,Ot=S.L;Ot&&(ke.I=Ot),ke.B&&(Or(ke),Os(ke)),S.g=le}else dc(S);0<E.i.length&&La(E)}else Ve[0]!="stop"&&Ve[0]!="close"||Ji(E,7);else E.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?Ji(E,7):ll(E):Ve[0]!="noop"&&E.l&&E.l.ta(Ve),E.v=0)}}xr(4)}catch{}}var sc=class{constructor(c,_){this.g=c,this.map=_}};function Yi(c){this.l=c||10,m.PerformanceNavigationTiming?(c=m.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ia(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function xa(c){return c.h?1:c.g?c.g.size:0}function el(c,_){return c.h?c.h==_:c.g?c.g.has(_):!1}function Na(c,_){c.g?c.g.add(_):c.h=_}function fn(c,_){c.h&&c.h==_?c.h=null:c.g&&c.g.has(_)&&c.g.delete(_)}Yi.prototype.cancel=function(){if(this.i=tl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function tl(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let _=c.i;for(const E of c.g.values())_=_.concat(E.D);return _}return q(c.i)}function Qd(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(p(c)){for(var _=[],E=c.length,S=0;S<E;S++)_.push(c[S]);return _}_=[],E=0;for(S in c)_[E++]=c[S];return _}function Da(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(p(c)||typeof c=="string"){var _=[];c=c.length;for(var E=0;E<c;E++)_.push(E);return _}_=[],E=0;for(const S in c)_[E++]=S;return _}}}function nl(c,_){if(c.forEach&&typeof c.forEach=="function")c.forEach(_,void 0);else if(p(c)||typeof c=="string")Array.prototype.forEach.call(c,_,void 0);else for(var E=Da(c),S=Qd(c),z=S.length,Y=0;Y<z;Y++)_.call(void 0,S[Y],E&&E[Y],c)}var js=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xd(c,_){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var S=c[E].indexOf("="),z=null;if(0<=S){var Y=c[E].substring(0,S);z=c[E].substring(S+1)}else Y=c[E];_(Y,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function At(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof At){this.h=c.h,Ms(this,c.j),this.o=c.o,this.g=c.g,Pr(this,c.s),this.l=c.l;var _=c.i,E=new Qi;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),Ki(this,E),this.m=c.m}else c&&(_=String(c).match(js))?(this.h=!1,Ms(this,_[1]||"",!0),this.o=Bn(_[2]||""),this.g=Bn(_[3]||"",!0),Pr(this,_[4]),this.l=Bn(_[5]||"",!0),Ki(this,_[6]||"",!0),this.m=Bn(_[7]||"")):(this.h=!1,this.i=new Qi(null,this.h))}At.prototype.toString=function(){var c=[],_=this.j;_&&c.push(Vs(_,il,!0),":");var E=this.g;return(E||_=="file")&&(c.push("//"),(_=this.o)&&c.push(Vs(_,il,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(Vs(E,E.charAt(0)=="/"?Wd:rl,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",Vs(E,Oa)),c.join("")};function Cn(c){return new At(c)}function Ms(c,_,E){c.j=E?Bn(_,!0):_,c.j&&(c.j=c.j.replace(/:$/,""))}function Pr(c,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);c.s=_}else c.s=null}function Ki(c,_,E){_ instanceof Qi?(c.i=_,oc(c.i,c.h)):(E||(_=Vs(_,Zd)),c.i=new Qi(_,c.h))}function Ze(c,_,E){c.i.set(_,E)}function ks(c){return Ze(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Bn(c,_){return c?_?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Vs(c,_,E){return typeof c=="string"?(c=encodeURI(c).replace(_,ac),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function ac(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var il=/[#\/\?@]/g,rl=/[#\?:]/g,Wd=/[#\?]/g,Zd=/[#\?@]/g,Oa=/#/g;function Qi(c,_){this.h=this.g=null,this.i=c||null,this.j=!!_}function zn(c){c.g||(c.g=new Map,c.h=0,c.i&&Xd(c.i,function(_,E){c.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}i=Qi.prototype,i.add=function(c,_){zn(this),this.i=null,c=vi(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(_),this.h+=1,this};function Xi(c,_){zn(c),_=vi(c,_),c.g.has(_)&&(c.i=null,c.h-=c.g.get(_).length,c.g.delete(_))}function Wi(c,_){return zn(c),_=vi(c,_),c.g.has(_)}i.forEach=function(c,_){zn(this),this.g.forEach(function(E,S){E.forEach(function(z){c.call(_,z,S,this)},this)},this)},i.na=function(){zn(this);const c=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let S=0;S<_.length;S++){const z=c[S];for(let Y=0;Y<z.length;Y++)E.push(_[S])}return E},i.V=function(c){zn(this);let _=[];if(typeof c=="string")Wi(this,c)&&(_=_.concat(this.g.get(vi(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)_=_.concat(c[E])}return _},i.set=function(c,_){return zn(this),this.i=null,c=vi(this,c),Wi(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[_]),this.h+=1,this},i.get=function(c,_){return c?(c=this.V(c),0<c.length?String(c[0]):_):_};function sl(c,_,E){Xi(c,_),0<E.length&&(c.i=null,c.g.set(vi(c,_),q(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var S=_[E];const Y=encodeURIComponent(String(S)),le=this.V(S);for(S=0;S<le.length;S++){var z=Y;le[S]!==""&&(z+="="+encodeURIComponent(String(le[S]))),c.push(z)}}return this.i=c.join("&")};function vi(c,_){return _=String(_),c.j&&(_=_.toLowerCase()),_}function oc(c,_){_&&!c.j&&(zn(c),c.i=null,c.g.forEach(function(E,S){var z=S.toLowerCase();S!=z&&(Xi(this,S),sl(this,z,E))},c)),c.j=_}function Ls(c,_){const E=new Un;if(m.Image){const S=new Image;S.onload=R(qn,E,"TestLoadImage: loaded",!0,_,S),S.onerror=R(qn,E,"TestLoadImage: error",!1,_,S),S.onabort=R(qn,E,"TestLoadImage: abort",!1,_,S),S.ontimeout=R(qn,E,"TestLoadImage: timeout",!1,_,S),m.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else _(!1)}function ii(c,_){const E=new Un,S=new AbortController,z=setTimeout(()=>{S.abort(),qn(E,"TestPingServer: timeout",!1,_)},1e4);fetch(c,{signal:S.signal}).then(Y=>{clearTimeout(z),Y.ok?qn(E,"TestPingServer: ok",!0,_):qn(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(z),qn(E,"TestPingServer: error",!1,_)})}function qn(c,_,E,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(E)}catch{}}function Us(){this.g=new Ns}function Ei(c,_,E){const S=E||"";try{nl(c,function(z,Y){let le=z;y(z)&&(le=ti(z)),_.push(S+Y+"="+encodeURIComponent(le))})}catch(z){throw _.push(S+"type="+encodeURIComponent("_badmap")),z}}function jr(c){this.l=c.Ub||null,this.j=c.eb||!1}O(jr,Yo),jr.prototype.g=function(){return new Zi(this.l,this.j)},jr.prototype.i=(function(c){return function(){return c}})({});function Zi(c,_){ft.call(this),this.D=c,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Zi,ft),i=Zi.prototype,i.open=function(c,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=_,this.readyState=1,bi(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(_.body=c),(this.D||m).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ti(this)),this.readyState=0},i.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,bi(this)),this.g&&(this.readyState=3,bi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;al(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function al(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}i.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var _=c.value?c.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!c.done}))&&(this.response=this.responseText+=_)}c.done?Ti(this):bi(this),this.readyState==3&&al(this)}},i.Ra=function(c){this.g&&(this.response=this.responseText=c,Ti(this))},i.Qa=function(c){this.g&&(this.response=c,Ti(this))},i.ga=function(){this.g&&Ti(this)};function Ti(c){c.readyState=4,c.l=null,c.j=null,c.v=null,bi(c)}i.setRequestHeader=function(c,_){this.u.append(c,_)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=_.next();return c.join(`\r
`)};function bi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ol(c){let _="";return re(c,function(E,S){_+=S,_+=":",_+=E,_+=`\r
`}),_}function Lt(c,_,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=ol(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):Ze(c,_,E))}function Ge(c){ft.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(Ge,ft);var Pa=/^https?$/i,Bs=["POST","PUT"];i=Ge.prototype,i.Ha=function(c){this.J=c},i.ea=function(c,_,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);_=_?_.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():gi.g(),this.v=this.o?Ko(this.o):Ko(gi),this.g.onreadystatechange=A(this.Ea,this);try{this.B=!0,this.g.open(_,String(c),!0),this.B=!1}catch(Y){lc(this,Y);return}if(c=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)E.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())E.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),z=m.FormData&&c instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Bs,_,void 0))||S||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,le]of E)this.g.setRequestHeader(Y,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zs(this),this.u=!0,this.g.send(c),this.u=!1}catch(Y){lc(this,Y)}};function lc(c,_){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=_,c.m=5,ja(c),wi(c)}function ja(c){c.A||(c.A=!0,Ye(c,"complete"),Ye(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Ye(this,"complete"),Ye(this,"abort"),wi(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wi(this,!0)),Ge.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Ma(this):this.bb())},i.bb=function(){Ma(this)};function Ma(c){if(c.h&&typeof h<"u"&&(!c.v[1]||Hn(c)!=4||c.Z()!=2)){if(c.u&&Hn(c)==4)en(c.Ea,0,c);else if(Ye(c,"readystatechange"),Hn(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var E;if(!(E=_)){var S;if(S=le===0){var z=String(c.D).match(js)[1]||null;!z&&m.self&&m.self.location&&(z=m.self.location.protocol.slice(0,-1)),S=!Pa.test(z?z.toLowerCase():"")}E=S}if(E)Ye(c,"complete"),Ye(c,"success");else{c.m=6;try{var Y=2<Hn(c)?c.g.statusText:""}catch{Y=""}c.l=Y+" ["+c.Z()+"]",ja(c)}}finally{wi(c)}}}}function wi(c,_){if(c.g){zs(c);const E=c.g,S=c.v[0]?()=>{}:null;c.g=null,c.v=null,_||Ye(c,"ready");try{E.onreadystatechange=S}catch{}}}function zs(c){c.I&&(m.clearTimeout(c.I),c.I=null)}i.isActive=function(){return!!this.g};function Hn(c){return c.g?c.g.readyState:0}i.Z=function(){try{return 2<Hn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(c){if(this.g){var _=this.g.responseText;return c&&_.indexOf(c)==0&&(_=_.substring(c.length)),Sa(_)}};function uc(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Jd(c){const _={};c=(c.g&&2<=Hn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(K(c[S]))continue;var E=k(c[S]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=_[z]||[];_[z]=Y,Y.push(E)}N(_,function(S){return S.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qs(c,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||_}function ka(c){this.Aa=0,this.i=[],this.j=new Un,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qs("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qs("baseRetryDelayMs",5e3,c),this.cb=qs("retryDelaySeedMs",1e4,c),this.Wa=qs("forwardChannelMaxRetries",2,c),this.wa=qs("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new Yi(c&&c.concurrentRequestLimit),this.Da=new Us,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=ka.prototype,i.la=8,i.G=1,i.connect=function(c,_,E,S){ot(0),this.W=c,this.H=_||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=gc(this,null,this.W),La(this)};function ll(c){if(cc(c),c.G==3){var _=c.U++,E=Cn(c.I);if(Ze(E,"SID",c.K),Ze(E,"RID",_),Ze(E,"TYPE","terminate"),Hs(c,E),_=new dn(c,c.j,_),_.L=2,_.v=ks(Cn(E)),E=!1,m.navigator&&m.navigator.sendBeacon)try{E=m.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&m.Image&&(new Image().src=_.v,E=!0),E||(_.g=yc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Os(_)}pc(c)}function Va(c){c.g&&(Fs(c),c.g.cancel(),c.g=null)}function cc(c){Va(c),c.u&&(m.clearTimeout(c.u),c.u=null),Ua(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&m.clearTimeout(c.s),c.s=null)}function La(c){if(!Ia(c.h)&&!c.s){c.s=!0;var _=c.Ga;ue||P(),ye||(ue(),ye=!0),ze.add(_,c),c.B=0}}function ef(c,_){return xa(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=_.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=wt(A(c.Ga,c,_),hl(c,c.B)),c.B++,!0)}i.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const z=new dn(this,this.j,c);let Y=this.o;if(this.S&&(Y?(Y=C(Y),M(Y,this.S)):Y=this.S),this.m!==null||this.O||(z.H=Y,Y=null),this.P)e:{for(var _=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(_+=S,4096<_){_=E;break e}if(_===4096||E===this.i.length-1){_=E+1;break e}}_=1e3}else _=1e3;_=hc(this,z,_),E=Cn(this.I),Ze(E,"RID",c),Ze(E,"CVER",22),this.D&&Ze(E,"X-HTTP-Session-Id",this.D),Hs(this,E),Y&&(this.O?_="headers="+encodeURIComponent(String(ol(Y)))+"&"+_:this.m&&Lt(E,this.m,Y)),Na(this.h,z),this.Ua&&Ze(E,"TYPE","init"),this.P?(Ze(E,"$req",_),Ze(E,"SID","null"),z.T=!0,ni(z,E,null)):ni(z,E,_),this.G=2}}else this.G==3&&(c?ul(this,c):this.i.length==0||Ia(this.h)||ul(this))};function ul(c,_){var E;_?E=_.l:E=c.U++;const S=Cn(c.I);Ze(S,"SID",c.K),Ze(S,"RID",E),Ze(S,"AID",c.T),Hs(c,S),c.m&&c.o&&Lt(S,c.m,c.o),E=new dn(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),_&&(c.i=_.D.concat(c.i)),_=hc(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Na(c.h,E),ni(E,S,_)}function Hs(c,_){c.H&&re(c.H,function(E,S){Ze(_,S,E)}),c.l&&nl({},function(E,S){Ze(_,S,E)})}function hc(c,_,E){E=Math.min(c.i.length,E);var S=c.l?A(c.l.Na,c.l,c):null;e:{var z=c.i;let Y=-1;for(;;){const le=["count="+E];Y==-1?0<E?(Y=z[0].g,le.push("ofs="+Y)):Y=0:le.push("ofs="+Y);let ke=!0;for(let Ot=0;Ot<E;Ot++){let Ve=z[Ot].g;const Ut=z[Ot].map;if(Ve-=Y,0>Ve)Y=Math.max(0,z[Ot].g-100),ke=!1;else try{Ei(Ut,le,"req"+Ve+"_")}catch{S&&S(Ut)}}if(ke){S=le.join("&");break e}}}return c=c.i.splice(0,E),_.D=c,S}function dc(c){if(!c.g&&!c.u){c.Y=1;var _=c.Fa;ue||P(),ye||(ue(),ye=!0),ze.add(_,c),c.v=0}}function cl(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=wt(A(c.Fa,c),hl(c,c.v)),c.v++,!0)}i.Fa=function(){if(this.u=null,fc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=wt(A(this.ab,this),c)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ot(10),Va(this),fc(this))};function Fs(c){c.A!=null&&(m.clearTimeout(c.A),c.A=null)}function fc(c){c.g=new dn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var _=Cn(c.qa);Ze(_,"RID","rpc"),Ze(_,"SID",c.K),Ze(_,"AID",c.T),Ze(_,"CI",c.F?"0":"1"),!c.F&&c.ja&&Ze(_,"TO",c.ja),Ze(_,"TYPE","xmlhttp"),Hs(c,_),c.m&&c.o&&Lt(_,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=ks(Cn(_)),E.m=null,E.P=!0,$i(E,c)}i.Za=function(){this.C!=null&&(this.C=null,Va(this),cl(this),ot(19))};function Ua(c){c.C!=null&&(m.clearTimeout(c.C),c.C=null)}function mc(c,_){var E=null;if(c.g==_){Ua(c),Fs(c),c.g=null;var S=2}else if(el(c.h,_))E=_.D,fn(c.h,_),S=1;else return;if(c.G!=0){if(_.o)if(S==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var z=c.B;S=Ir(),Ye(S,new Dt(S,E)),La(c)}else dc(c);else if(z=_.s,z==3||z==0&&0<_.X||!(S==1&&ef(c,_)||S==2&&cl(c)))switch(E&&0<E.length&&(_=c.h,_.i=_.i.concat(E)),z){case 1:Ji(c,5);break;case 4:Ji(c,10);break;case 3:Ji(c,6);break;default:Ji(c,2)}}}function hl(c,_){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*_}function Ji(c,_){if(c.j.info("Error code "+_),_==2){var E=A(c.fb,c),S=c.Xa;const z=!S;S=new At(S||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||Ms(S,"https"),ks(S),z?Ls(S.toString(),E):ii(S.toString(),E)}else ot(2);c.G=0,c.l&&c.l.sa(_),pc(c),cc(c)}i.fb=function(c){c?(this.j.info("Successfully pinged google.com"),ot(2)):(this.j.info("Failed to ping google.com"),ot(1))};function pc(c){if(c.G=0,c.ka=[],c.l){const _=tl(c.h);(_.length!=0||c.i.length!=0)&&(V(c.ka,_),V(c.ka,c.i),c.h.i.length=0,q(c.i),c.i.length=0),c.l.ra()}}function gc(c,_,E){var S=E instanceof At?Cn(E):new At(E);if(S.g!="")_&&(S.g=_+"."+S.g),Pr(S,S.s);else{var z=m.location;S=z.protocol,_=_?_+"."+z.hostname:z.hostname,z=+z.port;var Y=new At(null);S&&Ms(Y,S),_&&(Y.g=_),z&&Pr(Y,z),E&&(Y.l=E),S=Y}return E=c.D,_=c.ya,E&&_&&Ze(S,E,_),Ze(S,"VER",c.la),Hs(c,S),S}function yc(c,_,E){if(_&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=c.Ca&&!c.pa?new Ge(new jr({eb:E})):new Ge(c.pa),_.Ha(c.J),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function _c(){}i=_c.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Ba(){}Ba.prototype.g=function(c,_){return new mn(c,_)};function mn(c,_){ft.call(this),this.g=new ka(_),this.l=c,this.h=_&&_.messageUrlParams||null,c=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(c?c["X-WebChannel-Content-Type"]=_.messageContentType:c={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(c?c["X-WebChannel-Client-Profile"]=_.va:c={"X-WebChannel-Client-Profile":_.va}),this.g.S=c,(c=_&&_.Sb)&&!K(c)&&(this.g.m=c),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!K(_)&&(this.g.D=_,c=this.h,c!==null&&_ in c&&(c=this.h,_ in c&&delete c[_])),this.j=new Ai(this)}O(mn,ft),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){ll(this.g)},mn.prototype.o=function(c){var _=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=ti(c),c=E);_.i.push(new sc(_.Ya++,c)),_.G==3&&La(_)},mn.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,mn.aa.N.call(this)};function vc(c){Fi.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var _=c.__sm__;if(_){e:{for(const E in _){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,_=_!==null&&c in _?_[c]:void 0),this.data=_}else this.data=c}O(vc,Fi);function Ec(){Xo.call(this),this.status=1}O(Ec,Xo);function Ai(c){this.g=c}O(Ai,_c),Ai.prototype.ua=function(){Ye(this.g,"a")},Ai.prototype.ta=function(c){Ye(this.g,new vc(c))},Ai.prototype.sa=function(c){Ye(this.g,new Ec)},Ai.prototype.ra=function(){Ye(this.g,"b")},Ba.prototype.createWebChannel=Ba.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,Z0=function(){return new Ba},W0=function(){return Ir()},X0=pi,xp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Dr.NO_ERROR=0,Dr.TIMEOUT=8,Dr.HTTP_ERROR=6,kh=Dr,Gi.COMPLETE="complete",Q0=Gi,Qo.EventType=Hi,Hi.OPEN="a",Hi.CLOSE="b",Hi.ERROR="c",Hi.MESSAGE="d",ft.prototype.listen=ft.prototype.K,lu=Qo,Ge.prototype.listenOnce=Ge.prototype.L,Ge.prototype.getLastError=Ge.prototype.Ka,Ge.prototype.getLastErrorCode=Ge.prototype.Ba,Ge.prototype.getStatus=Ge.prototype.Z,Ge.prototype.getResponseJson=Ge.prototype.Oa,Ge.prototype.getResponseText=Ge.prototype.oa,Ge.prototype.send=Ge.prototype.ea,Ge.prototype.setWithCredentials=Ge.prototype.Ha,K0=Ge}).apply(typeof wh<"u"?wh:typeof self<"u"?self:typeof window<"u"?window:{});const ET="@firebase/firestore",TT="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=new sg("@firebase/firestore");function go(){return ga.logLevel}function de(i,...e){if(ga.logLevel<=Pe.DEBUG){const t=e.map(_g);ga.debug(`Firestore (${Uo}): ${i}`,...t)}}function br(i,...e){if(ga.logLevel<=Pe.ERROR){const t=e.map(_g);ga.error(`Firestore (${Uo}): ${i}`,...t)}}function Io(i,...e){if(ga.logLevel<=Pe.WARN){const t=e.map(_g);ga.warn(`Firestore (${Uo}): ${i}`,...t)}}function _g(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(i,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,J0(i,s,t)}function J0(i,e,t){let s=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw br(s),new Error(s)}function $e(i,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,i||J0(e,o,s)}function Re(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends zi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class TD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class bD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class wD{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){$e(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let u=new yr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new yr,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{de("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(de("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new yr)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(de("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?($e(typeof s.accessToken=="string",31837,{l:s}),new ew(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return $e(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class AD{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class SD{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new AD(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bT{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RD{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,un(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){$e(this.o===void 0,3512);const s=u=>{u.error!=null&&de("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,de("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{de("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):de("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bT(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?($e(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bT(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<i;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=CD(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<t&&(s+=e.charAt(o[u]%62))}return s}}function je(i,e){return i<e?-1:i>e?1:0}function Np(i,e){const t=Math.min(i.length,e.length);for(let s=0;s<t;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return up(o)===up(u)?je(o,u):up(o)?1:-1}return je(i.length,e.length)}const ID=55296,xD=57343;function up(i){const e=i.charCodeAt(0);return e>=ID&&e<=xD}function xo(i,e,t){return i.length===e.length&&i.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT="__name__";class Di{constructor(e,t,s){t===void 0?t=0:t>e.length&&be(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&be(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Di.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Di?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const u=Di.compareSegments(e.get(o),t.get(o));if(u!==0)return u}return je(e.length,t.length)}static compareSegments(e,t){const s=Di.isNumericId(e),o=Di.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Di.extractNumericId(e).compare(Di.extractNumericId(t)):Np(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hs.fromString(e.substring(4,e.length-2))}}class st extends Di{construct(e,t,s){return new st(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new st(t)}static emptyPath(){return new st([])}}const ND=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wt extends Di{construct(e,t,s){return new Wt(e,t,s)}static isValidIdentifier(e){return ND.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wT}static keyField(){return new Wt([wT])}static fromServerFormat(e){const t=[];let s="",o=0;const u=()=>{if(s.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new he(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new he(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(s+=m,o++):(u(),o++)}if(u(),h)throw new he(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Wt(t)}static emptyPath(){return new Wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(st.fromString(e))}static fromName(e){return new _e(st.fromString(e).popFirst(5))}static empty(){return new _e(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return st.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new st(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tw(i,e,t){if(!t)throw new he(J.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function DD(i,e,t,s){if(e===!0&&s===!0)throw new he(J.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function AT(i){if(!_e.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function ST(i){if(_e.isDocumentKey(i))throw new he(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function nw(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Ed(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":be(12329,{type:typeof i})}function wn(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ed(i);throw new he(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(i,e){const t={typeString:i};return e&&(t.value=e),t}function Gu(i,e){if(!nw(i))throw new he(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){t=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){t=`Expected '${s}' field to equal '${u.value}'`;break}}if(t)throw new he(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=-62135596800,CT=1e6;class Xe{static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*CT);return new Xe(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new he(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<RT)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/CT}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Xe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gu(e,Xe._jsonSchema))return new Xe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-RT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Xe._jsonSchemaVersion="firestore/timestamp/1.0",Xe._jsonSchema={type:Nt("string",Xe._jsonSchemaVersion),seconds:Nt("number"),nanoseconds:Nt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Xe(0,0))}static max(){return new Se(new Xe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function OD(i,e){const t=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Se.fromTimestamp(s===1e9?new Xe(t+1,0):new Xe(t,s));return new ms(o,_e.empty(),e)}function PD(i){return new ms(i.readTime,i.key,Cu)}class ms{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new ms(Se.min(),_e.empty(),Cu)}static max(){return new ms(Se.max(),_e.empty(),Cu)}}function jD(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(i.documentKey,e.documentKey),t!==0?t:je(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class kD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(i){if(i.code!==J.FAILED_PRECONDITION||i.message!==MD)throw i;de("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ne.reject(t)}static resolve(e){return new ne(((t,s)=>{t(e)}))}static reject(e){return new ne(((t,s)=>{s(e)}))}static waitFor(e){return new ne(((t,s)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&t()}),(p=>s(p)))})),h=!0,u===o&&t()}))}static or(e){let t=ne.resolve(!1);for(const s of e)t=t.next((o=>o?ne.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,u)=>{s.push(t.call(this,o,u))})),this.waitFor(s)}static mapArray(e,t){return new ne(((s,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const y=p;t(e[y]).next((v=>{h[y]=v,++m,m===u&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new ne(((s,o)=>{const u=()=>{e()===!0?t().next((()=>{u()}),o):s()};u()}))}}function VD(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function zo(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Td.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=-1;function bd(i){return i==null}function Xh(i){return i===0&&1/i==-1/0}function LD(i){return typeof i=="number"&&Number.isInteger(i)&&!Xh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iw="";function UD(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=IT(e)),e=BD(i.get(t),e);return IT(e)}function BD(i,e){let t=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":t+="";break;case iw:t+="";break;default:t+=u}}return t}function IT(i){return i+iw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function Ts(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function rw(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ht(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ht(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ah(this.root,e,this.comparator,!0)}}class Ah{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?s(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,s,o,u){this.key=e,this.value=t,this.color=s??Xt.RED,this.left=o??Xt.EMPTY,this.right=u??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,u){return new Xt(e??this.key,t??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,s),null):u===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,t,s,o,u){return this}insert(e,t,s){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.comparator=e,this.data=new ht(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new NT(this.data.getIterator())}getIteratorFrom(e){return new NT(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new kt(this.comparator);return t.data=e,t}}class NT{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.fields=e,e.sort(Wt.comparator)}static empty(){return new Mn([])}unionWith(e){let t=new kt(Wt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new sw("Invalid base64 string: "+u):u}})(e);return new Jt(t)}static fromUint8Array(e){const t=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new Jt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const zD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(i){if($e(!!i,39018),typeof i=="string"){let e=0;const t=zD.exec(i);if($e(!!t,46558,{timestamp:i}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function gs(i){return typeof i=="string"?Jt.fromBase64String(i):Jt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="server_timestamp",ow="__type__",lw="__previous_value__",uw="__local_write_time__";function Tg(i){return(i?.mapValue?.fields||{})[ow]?.stringValue===aw}function wd(i){const e=i.mapValue.fields[lw];return Tg(e)?wd(e):e}function Iu(i){const e=ps(i.mapValue.fields[uw].timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{constructor(e,t,s,o,u,h,m,p,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v}}const Wh="(default)";class xu{constructor(e,t){this.projectId=e,this.database=t||Wh}static empty(){return new xu("","")}get isDefaultDatabase(){return this.database===Wh}isEqual(e){return e instanceof xu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw="__type__",HD="__max__",Sh={mapValue:{}},hw="__vector__",Zh="value";function ys(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Tg(i)?4:GD(i)?9007199254740991:FD(i)?10:11:be(28295,{value:i})}function Ui(i,e){if(i===e)return!0;const t=ys(i);if(t!==ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Iu(i).isEqual(Iu(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=ps(o.timestampValue),m=ps(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return gs(o.bytesValue).isEqual(gs(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return bt(o.geoPointValue.latitude)===bt(u.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return bt(o.integerValue)===bt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=bt(o.doubleValue),m=bt(u.doubleValue);return h===m?Xh(h)===Xh(m):isNaN(h)&&isNaN(m)}return!1})(i,e);case 9:return xo(i.arrayValue.values||[],e.arrayValue.values||[],Ui);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(xT(h)!==xT(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!Ui(h[p],m[p])))return!1;return!0})(i,e);default:return be(52216,{left:i})}}function Nu(i,e){return(i.values||[]).find((t=>Ui(t,e)))!==void 0}function No(i,e){if(i===e)return 0;const t=ys(i),s=ys(e);if(t!==s)return je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return je(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=bt(u.integerValue||u.doubleValue),p=bt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(i,e);case 3:return DT(i.timestampValue,e.timestampValue);case 4:return DT(Iu(i),Iu(e));case 5:return Np(i.stringValue,e.stringValue);case 6:return(function(u,h){const m=gs(u),p=gs(h);return m.compareTo(p)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),p=h.split("/");for(let y=0;y<m.length&&y<p.length;y++){const v=je(m[y],p[y]);if(v!==0)return v}return je(m.length,p.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=je(bt(u.latitude),bt(h.latitude));return m!==0?m:je(bt(u.longitude),bt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return OT(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},p=h.fields||{},y=m[Zh]?.arrayValue,v=p[Zh]?.arrayValue,b=je(y?.values?.length||0,v?.values?.length||0);return b!==0?b:OT(y,v)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===Sh.mapValue&&h===Sh.mapValue)return 0;if(u===Sh.mapValue)return 1;if(h===Sh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),y=h.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let b=0;b<p.length&&b<v.length;++b){const A=Np(p[b],v[b]);if(A!==0)return A;const R=No(m[p[b]],y[v[b]]);if(R!==0)return R}return je(p.length,v.length)})(i.mapValue,e.mapValue);default:throw be(23264,{he:t})}}function DT(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return je(i,e);const t=ps(i),s=ps(e),o=je(t.seconds,s.seconds);return o!==0?o:je(t.nanos,s.nanos)}function OT(i,e){const t=i.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const u=No(t[o],s[o]);if(u)return u}return je(t.length,s.length)}function Do(i){return Dp(i)}function Dp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const s=ps(t);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return gs(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return _e.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let s="[",o=!0;for(const u of t.values||[])o?o=!1:s+=",",s+=Dp(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Dp(t.fields[h])}`;return o+"}"})(i.mapValue):be(61005,{value:i})}function Vh(i){switch(ys(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=wd(i);return e?16+Vh(e):16;case 5:return 2*i.stringValue.length;case 6:return gs(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Vh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Ts(s.fields,((u,h)=>{o+=u.length+Vh(h)})),o})(i.mapValue);default:throw be(13486,{value:i})}}function PT(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Op(i){return!!i&&"integerValue"in i}function bg(i){return!!i&&"arrayValue"in i}function jT(i){return!!i&&"nullValue"in i}function MT(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Lh(i){return!!i&&"mapValue"in i}function FD(i){return(i?.mapValue?.fields||{})[cw]?.stringValue===hw}function yu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Ts(i.mapValue.fields,((t,s)=>e.mapValue.fields[t]=yu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=yu(i.arrayValue.values[t]);return e}return{...i}}function GD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===HD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Lh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=yu(t)}setAll(e){let t=Wt.emptyPath(),s={},o=[];e.forEach(((h,m)=>{if(!t.isImmediateParentOf(m)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=m.popLast()}h?s[m.lastSegment()]=yu(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(t);this.applyChanges(u,s,o)}delete(e){const t=this.field(e.popLast());Lh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ui(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Lh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ts(t,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Tn(yu(this.value))}}function dw(i){const e=[];return Ts(i.fields,((t,s)=>{const o=new Wt([t]);if(Lh(s)){const u=dw(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Mn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,t,s,o,u,h,m){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new on(e,0,Se.min(),Se.min(),Se.min(),Tn.empty(),0)}static newFoundDocument(e,t,s,o){return new on(e,1,t,Se.min(),s,o,0)}static newNoDocument(e,t){return new on(e,2,t,Se.min(),Se.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,Se.min(),Se.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,t){this.position=e,this.inclusive=t}}function kT(i,e,t){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=_e.comparator(_e.fromName(h.referenceValue),t.key):s=No(h,t.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function VT(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Ui(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,t="asc"){this.field=e,this.dir=t}}function $D(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class xt extends fw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new KD(e,t,s):t==="array-contains"?new WD(e,s):t==="in"?new ZD(e,s):t==="not-in"?new JD(e,s):t==="array-contains-any"?new e2(e,s):new xt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new QD(e,s):new XD(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(No(t,this.value)):t!==null&&ys(this.value)===ys(t)&&this.matchesComparison(No(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends fw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ci(e,t)}matches(e){return mw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mw(i){return i.op==="and"}function pw(i){return YD(i)&&mw(i)}function YD(i){for(const e of i.filters)if(e instanceof ci)return!1;return!0}function Pp(i){if(i instanceof xt)return i.field.canonicalString()+i.op.toString()+Do(i.value);if(pw(i))return i.filters.map((e=>Pp(e))).join(",");{const e=i.filters.map((t=>Pp(t))).join(",");return`${i.op}(${e})`}}function gw(i,e){return i instanceof xt?(function(s,o){return o instanceof xt&&s.op===o.op&&s.field.isEqual(o.field)&&Ui(s.value,o.value)})(i,e):i instanceof ci?(function(s,o){return o instanceof ci&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,m)=>u&&gw(h,o.filters[m])),!0):!1})(i,e):void be(19439)}function yw(i){return i instanceof xt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Do(t.value)}`})(i):i instanceof ci?(function(t){return t.op.toString()+" {"+t.getFilters().map(yw).join(" ,")+"}"})(i):"Filter"}class KD extends xt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class QD extends xt{constructor(e,t){super(e,"in",t),this.keys=_w("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class XD extends xt{constructor(e,t){super(e,"not-in",t),this.keys=_w("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function _w(i,e){return(e.arrayValue?.values||[]).map((t=>_e.fromName(t.referenceValue)))}class WD extends xt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bg(t)&&Nu(t.arrayValue,this.value)}}class ZD extends xt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Nu(this.value.arrayValue,t)}}class JD extends xt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Nu(this.value.arrayValue,t)}}class e2 extends xt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Nu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(e,t=null,s=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function LT(i,e=null,t=[],s=[],o=null,u=null,h=null){return new t2(i,e,t,s,o,u,h)}function wg(i){const e=Re(i);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Pp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),bd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Do(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Do(s))).join(",")),e.Te=t}return e.Te}function Ag(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!$D(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!gw(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!VT(i.startAt,e.startAt)&&VT(i.endAt,e.endAt)}function jp(i){return _e.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t=null,s=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function n2(i,e,t,s,o,u,h,m){return new qo(i,e,t,s,o,u,h,m)}function Ad(i){return new qo(i)}function UT(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function vw(i){return i.collectionGroup!==null}function _u(i){const e=Re(i);if(e.Ie===null){e.Ie=[];const t=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),t.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new kt(Wt.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(e).forEach((u=>{t.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new Du(u,s))})),t.has(Wt.keyField().canonicalString())||e.Ie.push(new Du(Wt.keyField(),s))}return e.Ie}function Mi(i){const e=Re(i);return e.Ee||(e.Ee=i2(e,_u(i))),e.Ee}function i2(i,e){if(i.limitType==="F")return LT(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Du(o.field,u)}));const t=i.endAt?new Jh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Jh(i.startAt.position,i.startAt.inclusive):null;return LT(i.path,i.collectionGroup,e,i.filters,i.limit,t,s)}}function Mp(i,e){const t=i.filters.concat([e]);return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function ed(i,e,t){return new qo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Sd(i,e){return Ag(Mi(i),Mi(e))&&i.limitType===e.limitType}function Ew(i){return`${wg(Mi(i))}|lt:${i.limitType}`}function yo(i){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>yw(o))).join(", ")}]`),bd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Do(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Do(o))).join(",")),`Target(${s})`})(Mi(i))}; limitType=${i.limitType})`}function Rd(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):_e.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of _u(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,m,p){const y=kT(h,m,p);return h.inclusive?y<=0:y<0})(s.startAt,_u(s),o)||s.endAt&&!(function(h,m,p){const y=kT(h,m,p);return h.inclusive?y>=0:y>0})(s.endAt,_u(s),o))})(i,e)}function r2(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Tw(i){return(e,t)=>{let s=!1;for(const o of _u(i)){const u=s2(o,e,t);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function s2(i,e,t){const s=i.field.isKeyField()?_e.comparator(e.key,t.key):(function(u,h,m){const p=h.data.field(u),y=m.data.field(u);return p!==null&&y!==null?No(p,y):be(42886)})(i.field,e,t);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,((t,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return rw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2=new ht(_e.comparator);function wr(){return a2}const bw=new ht(_e.comparator);function uu(...i){let e=bw;for(const t of i)e=e.insert(t.key,t);return e}function ww(i){let e=bw;return i.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function ua(){return vu()}function Aw(){return vu()}function vu(){return new Ea((i=>i.toString()),((i,e)=>i.isEqual(e)))}const o2=new ht(_e.comparator),l2=new kt(_e.comparator);function Me(...i){let e=l2;for(const t of i)e=e.add(t);return e}const u2=new kt(je);function c2(){return u2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xh(e)?"-0":e}}function Sw(i){return{integerValue:""+i}}function h2(i,e){return LD(e)?Sw(e):Sg(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cd{constructor(){this._=void 0}}function d2(i,e,t){return i instanceof Ou?(function(o,u){const h={fields:{[ow]:{stringValue:aw},[uw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Tg(u)&&(u=wd(u)),u&&(h.fields[lw]=u),{mapValue:h}})(t,e):i instanceof Pu?Cw(i,e):i instanceof ju?Iw(i,e):(function(o,u){const h=Rw(o,u),m=BT(h)+BT(o.Ae);return Op(h)&&Op(o.Ae)?Sw(m):Sg(o.serializer,m)})(i,e)}function f2(i,e,t){return i instanceof Pu?Cw(i,e):i instanceof ju?Iw(i,e):t}function Rw(i,e){return i instanceof td?(function(s){return Op(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Ou extends Cd{}class Pu extends Cd{constructor(e){super(),this.elements=e}}function Cw(i,e){const t=xw(e);for(const s of i.elements)t.some((o=>Ui(o,s)))||t.push(s);return{arrayValue:{values:t}}}class ju extends Cd{constructor(e){super(),this.elements=e}}function Iw(i,e){let t=xw(e);for(const s of i.elements)t=t.filter((o=>!Ui(o,s)));return{arrayValue:{values:t}}}class td extends Cd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function BT(i){return bt(i.integerValue||i.doubleValue)}function xw(i){return bg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.field=e,this.transform=t}}function p2(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Pu&&o instanceof Pu||s instanceof ju&&o instanceof ju?xo(s.elements,o.elements,Ui):s instanceof td&&o instanceof td?Ui(s.Ae,o.Ae):s instanceof Ou&&o instanceof Ou})(i.transform,e.transform)}class g2{constructor(e,t){this.version=e,this.transformResults=t}}class Jn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Jn}static exists(e){return new Jn(void 0,e)}static updateTime(e){return new Jn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Uh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Id{}function Nw(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new Rg(i.key,Jn.none()):new $u(i.key,i.data,Jn.none());{const t=i.data,s=Tn.empty();let o=new kt(Wt.comparator);for(let u of e.fields)if(!o.has(u)){let h=t.field(u);h===null&&u.length>1&&(u=u.popLast(),h=t.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new bs(i.key,s,new Mn(o.toArray()),Jn.none())}}function y2(i,e,t){i instanceof $u?(function(o,u,h){const m=o.value.clone(),p=qT(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,t):i instanceof bs?(function(o,u,h){if(!Uh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=qT(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(Dw(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,t):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Eu(i,e,t,s){return i instanceof $u?(function(u,h,m,p){if(!Uh(u.precondition,h))return m;const y=u.value.clone(),v=HT(u.fieldTransforms,p,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(i,e,t,s):i instanceof bs?(function(u,h,m,p){if(!Uh(u.precondition,h))return m;const y=HT(u.fieldTransforms,p,h),v=h.data;return v.setAll(Dw(u)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((b=>b.field)))})(i,e,t,s):(function(u,h,m){return Uh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(i,e,t)}function _2(i,e){let t=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=Rw(s.transform,o||null);u!=null&&(t===null&&(t=Tn.empty()),t.set(s.field,u))}return t||null}function zT(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&xo(s,o,((u,h)=>p2(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class $u extends Id{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class bs extends Id{constructor(e,t,s,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Dw(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=i.data.field(t);e.set(t,s)}})),e}function qT(i,e,t){const s=new Map;$e(i.length===t.length,32656,{Re:t.length,Ve:i.length});for(let o=0;o<t.length;o++){const u=i[o],h=u.transform,m=e.data.field(u.field);s.set(u.field,f2(h,m,t[o]))}return s}function HT(i,e,t){const s=new Map;for(const o of i){const u=o.transform,h=t.data.field(o.field);s.set(o.field,d2(u,h,e))}return s}class Rg extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class v2 extends Id{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&y2(u,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Eu(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Eu(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=Aw();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=t.has(o.key)?null:m;const p=Nw(h,m);p!==null&&s.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Se.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Me())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,((t,s)=>zT(t,s)))&&xo(this.baseMutations,e.baseMutations,((t,s)=>zT(t,s)))}}class Cg{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){$e(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return o2})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Cg(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ue;function w2(i){switch(i){case J.OK:return be(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return be(15467,{code:i})}}function Ow(i){if(i===void 0)return br("GRPC error has no .code"),J.UNKNOWN;switch(i){case Ct.OK:return J.OK;case Ct.CANCELLED:return J.CANCELLED;case Ct.UNKNOWN:return J.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return J.INTERNAL;case Ct.UNAVAILABLE:return J.UNAVAILABLE;case Ct.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ct.NOT_FOUND:return J.NOT_FOUND;case Ct.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ct.ABORTED:return J.ABORTED;case Ct.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ct.DATA_LOSS:return J.DATA_LOSS;default:return be(39323,{code:i})}}(Ue=Ct||(Ct={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2=new hs([4294967295,4294967295],0);function FT(i){const e=A2().encode(i),t=new Y0;return t.update(e),new Uint8Array(t.digest())}function GT(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new hs([t,s],0),new hs([o,u],0)]}class Ig{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new cu(`Invalid padding: ${t}`);if(s<0)throw new cu(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new cu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(hs.fromNumber(s)));return o.compare(S2)===1&&(o=new hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=FT(e),[s,o]=GT(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Ig(u,o,t);return s.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const t=FT(e),[s,o]=GT(t);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,s,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Yu.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new xd(Se.min(),o,new ht(je),wr(),Me())}}class Yu{constructor(e,t,s,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Yu(s,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Pw{constructor(e,t){this.targetId=e,this.Ce=t}}class jw{constructor(e,t,s=Jt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class $T{constructor(){this.ve=0,this.Fe=YT(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Me(),t=Me(),s=Me();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:u})}})),new Yu(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=YT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,$e(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R2{constructor(e){this.Ge=e,this.ze=new Map,this.je=wr(),this.Je=Rh(),this.He=Rh(),this.Ye=new ht(je)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const u=o.target;if(jp(u))if(s===0){const h=new _e(u.path);this.et(t,h,on.newNoDocument(h,Se.min()))}else $e(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=t;let h,m;try{h=gs(s).toUint8Array()}catch(p){if(p instanceof sw)return Io("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Ig(h,o,u)}catch(p){return Io(p instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(t,u,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&jp(m.target)){const p=new _e(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,on.newNoDocument(p,e))}u.Be&&(t.set(h,u.ke()),u.qe())}}));let s=Me();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new xd(e,t,this.Ye,this.je,s);return this.je=wr(),this.Je=Rh(),this.He=Rh(),this.Ye=new ht(je),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $T,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new kt(je),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new kt(je),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||de("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $T),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Rh(){return new ht(_e.comparator)}function YT(){return new ht(_e.comparator)}const C2={asc:"ASCENDING",desc:"DESCENDING"},I2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},x2={and:"AND",or:"OR"};class N2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function kp(i,e){return i.useProto3Json||bd(e)?e:{value:e}}function nd(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function D2(i,e){return nd(i,e.toTimestamp())}function ki(i){return $e(!!i,49232),Se.fromTimestamp((function(t){const s=ps(t);return new Xe(s.seconds,s.nanos)})(i))}function xg(i,e){return Vp(i,e).canonicalString()}function Vp(i,e){const t=(function(o){return new st(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?t:t.child(e)}function kw(i){const e=st.fromString(i);return $e(zw(e),10190,{key:e.toString()}),e}function Lp(i,e){return xg(i.databaseId,e.path)}function cp(i,e){const t=kw(e);if(t.get(1)!==i.databaseId.projectId)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new he(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new _e(Lw(t))}function Vw(i,e){return xg(i.databaseId,e)}function O2(i){const e=kw(i);return e.length===4?st.emptyPath():Lw(e)}function Up(i){return new st(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Lw(i){return $e(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function KT(i,e,t){return{name:Lp(i,e),fields:t.value.mapValue.fields}}function P2(i,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,v){return y.useProto3Json?($e(v===void 0||typeof v=="string",58123),Jt.fromBase64String(v||"")):($e(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Jt.fromUint8Array(v||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(y){const v=y.code===void 0?J.UNKNOWN:Ow(y.code);return new he(v,y.message||"")})(h);t=new jw(s,o,u,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=cp(i,s.document.name),u=ki(s.document.updateTime),h=s.document.createTime?ki(s.document.createTime):Se.min(),m=new Tn({mapValue:{fields:s.document.fields}}),p=on.newFoundDocument(o,u,h,m),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Bh(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=cp(i,s.document),u=s.readTime?ki(s.readTime):Se.min(),h=on.newNoDocument(o,u),m=s.removedTargetIds||[];t=new Bh([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=cp(i,s.document),u=s.removedTargetIds||[];t=new Bh([],u,o,null)}else{if(!("filter"in e))return be(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new b2(o,u),m=s.targetId;t=new Pw(m,h)}}return t}function j2(i,e){let t;if(e instanceof $u)t={update:KT(i,e.key,e.value)};else if(e instanceof Rg)t={delete:Lp(i,e.key)};else if(e instanceof bs)t={update:KT(i,e.key,e.data),updateMask:H2(e.fieldMask)};else{if(!(e instanceof v2))return be(16599,{Vt:e.type});t={verify:Lp(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const m=h.transform;if(m instanceof Ou)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Pu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof ju)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof td)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw be(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:D2(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be(27497)})(i,e.precondition)),t}function M2(i,e){return i&&i.length>0?($e(e!==void 0,14353),i.map((t=>(function(o,u){let h=o.updateTime?ki(o.updateTime):ki(u);return h.isEqual(Se.min())&&(h=ki(u)),new g2(h,o.transformResults||[])})(t,e)))):[]}function k2(i,e){return{documents:[Vw(i,e.path)]}}function V2(i,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Vw(i,o);const u=(function(y){if(y.length!==0)return Bw(ci.create(y,"and"))})(e.filters);u&&(t.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((v=>(function(A){return{field:_o(A.field),direction:B2(A.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const m=kp(i,e.limit);return m!==null&&(t.structuredQuery.limit=m),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function L2(i){let e=O2(i.parent);const t=i.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){$e(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];t.where&&(u=(function(b){const A=Uw(b);return A instanceof ci&&pw(A)?A.getFilters():[A]})(t.where));let h=[];t.orderBy&&(h=(function(b){return b.map((A=>(function(O){return new Du(vo(O.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(A)))})(t.orderBy));let m=null;t.limit&&(m=(function(b){let A;return A=typeof b=="object"?b.value:b,bd(A)?null:A})(t.limit));let p=null;t.startAt&&(p=(function(b){const A=!!b.before,R=b.values||[];return new Jh(R,A)})(t.startAt));let y=null;return t.endAt&&(y=(function(b){const A=!b.before,R=b.values||[];return new Jh(R,A)})(t.endAt)),n2(e,o,h,u,m,"F",p,y)}function U2(i,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Uw(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=vo(t.unaryFilter.field);return xt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=vo(t.unaryFilter.field);return xt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=vo(t.unaryFilter.field);return xt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=vo(t.unaryFilter.field);return xt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(i):i.fieldFilter!==void 0?(function(t){return xt.create(vo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return ci.create(t.compositeFilter.filters.map((s=>Uw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(t.compositeFilter.op))})(i):be(30097,{filter:i})}function B2(i){return C2[i]}function z2(i){return I2[i]}function q2(i){return x2[i]}function _o(i){return{fieldPath:i.canonicalString()}}function vo(i){return Wt.fromServerFormat(i.fieldPath)}function Bw(i){return i instanceof xt?(function(t){if(t.op==="=="){if(MT(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NAN"}};if(jT(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(MT(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NAN"}};if(jT(t.value))return{unaryFilter:{field:_o(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_o(t.field),op:z2(t.op),value:t.value}}})(i):i instanceof ci?(function(t){const s=t.getFilters().map((o=>Bw(o)));return s.length===1?s[0]:{compositeFilter:{op:q2(t.op),filters:s}}})(i):be(54877,{filter:i})}function H2(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function zw(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t,s,o,u=Se.min(),h=Se.min(),m=Jt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new os(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new os(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.yt=e}}function G2(i){const e=L2({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ed(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.Cn=new Y2}addToCollectionParentIndex(e,t){return this.Cn.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}deleteAllFieldIndexes(e){return ne.resolve()}createTargetIndexes(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(ms.min())}updateCollectionGroup(e,t,s){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class Y2{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new kt(st.comparator),u=!o.has(s);return this.index[t]=o.add(s),u}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new kt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qw=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(qw,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oo(0)}static cr(){return new Oo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="LruGarbageCollector",K2=1048576;function WT([i,e],[t,s]){const o=je(i,t);return o===0?je(e,s):o}class Q2{constructor(e){this.Ir=e,this.buffer=new kt(WT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();WT(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X2{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){de(XT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){zo(t)?de(XT,"Ignoring IndexedDB error during garbage collection: ",t):await Bo(t)}await this.Vr(3e5)}))}}class W2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return ne.resolve(Td.ce);const s=new Q2(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(de("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(QT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(de("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,u,h,m,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(de("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,h=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,m=Date.now(),this.removeTargets(e,s,t)))).next((b=>(u=b,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(y=Date.now(),go()<=Pe.DEBUG&&de("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${b} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:b}))))}}function Z2(i,e){return new W2(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(){this.changes=new Ea((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?ne.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Eu(s.mutation,o,Mn.empty(),Xe.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Me()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Me()){const o=ua();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((u=>{let h=uu();return u.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=ua();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Me())))}populateOverlays(e,t,s){const o=[];return s.forEach((u=>{t.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{t.set(h,m)}))}))}computeViews(e,t,s,o){let u=wr();const h=vu(),m=(function(){return vu()})();return t.forEach(((p,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof bs)?u=u.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Eu(v.mutation,y,v.mutation.getFieldMask(),Xe.now())):h.set(y.key,Mn.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>m.set(y,new eO(v,h.get(y)??null)))),m)))}recalculateAndSaveOverlays(e,t){const s=vu();let o=new ht(((h,m)=>h-m)),u=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const m of h)m.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=s.get(p)||Mn.empty();v=m.applyToLocalView(y,v),s.set(p,v);const b=(o.get(m.batchId)||Me()).add(p);o=o.insert(m.batchId,b)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),y=p.key,v=p.value,b=Aw();v.forEach((A=>{if(!u.has(A)){const R=Nw(t.get(A),s.get(A));R!==null&&b.set(A,R),u=u.add(A)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,b))}return ne.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-u.size):ne.resolve(ua());let m=Cu,p=u;return h.next((y=>ne.forEach(y,((v,b)=>(m<b.largestBatchId&&(m=b.largestBatchId),u.get(v)?ne.resolve():this.remoteDocumentCache.getEntry(e,v).next((A=>{p=p.insert(v,A)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,p,y,Me()))).next((v=>({batchId:m,changes:ww(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let o=uu();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const u=t.collectionGroup;let h=uu();return this.indexManager.getCollectionParents(e,u).next((m=>ne.forEach(m,(p=>{const y=(function(b,A){return new qo(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((b,A)=>{h=h.insert(b,A)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,u,o)))).next((h=>{u.forEach(((p,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,on.newInvalidDocument(v)))}));let m=uu();return h.forEach(((p,y)=>{const v=u.get(p);v!==void 0&&Eu(v.mutation,y,Mn.empty(),Xe.now()),Rd(t,y)&&(m=m.insert(p,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:ki(o.createTime)}})(t)),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:G2(o.bundledQuery),readTime:ki(o.readTime)}})(t)),ne.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iO{constructor(){this.overlays=new ht(_e.comparator),this.qr=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const s=ua();return ne.forEach(t,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,u)=>{this.St(e,t,u)})),ne.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),ne.resolve()}getOverlaysForCollection(e,t,s){const o=ua(),u=t.length+1,h=new _e(t.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===u&&p.largestBatchId>s&&o.set(p.getKey(),p)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let u=new ht(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=u.get(y.largestBatchId);v===null&&(v=ua(),u=u.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const m=ua(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>m.set(y,v))),!(m.size()>=o)););return ne.resolve(m)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new T2(t,s));let u=this.qr.get(t);u===void 0&&(u=Me(),this.qr.set(t,u)),this.qr.set(t,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(e){return ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ne.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.Qr=new kt(Ht.$r),this.Ur=new kt(Ht.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ht(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new st([])),s=new Ht(t,e),o=new Ht(t,e+1),u=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new st([])),s=new Ht(t,e),o=new Ht(t,e+1);let u=Me();return this.Ur.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const t=new Ht(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||je(e.Yr,t.Yr)}static Kr(e,t){return je(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new kt(Ht.$r)}checkEmpty(e){return ne.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new E2(u,t,s,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Ht(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(h)}lookupMutationBatch(e,t){return ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(this.mutationQueue.length===0?Eg:this.tr-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new kt(je);return t.forEach((o=>{const u=new Ht(o,0),h=new Ht(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{s=s.add(m.Yr)}))})),ne.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let u=s;_e.isDocumentKey(u)||(u=u.child(""));const h=new Ht(new _e(u),0);let m=new kt(je);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(m=m.add(p.Yr)),!0)}),h),ne.resolve(this.ti(m))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){$e(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return ne.forEach(t.mutations,(o=>{const u=new Ht(o.key,t.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ht(t,0),o=this.Zr.firstAfterOrEqual(s);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.ri=e,this.docs=(function(){return new ht(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),u=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return ne.resolve(s?s.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let s=wr();return t.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():on.newInvalidDocument(o))})),ne.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let u=wr();const h=t.path,m=new _e(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||jD(PD(v),s)<=0||(o.has(v.key)||Rd(t,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,s,o){be(9500)}ii(e,t){return ne.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new oO(this)}getSize(e){return ne.resolve(this.size)}}class oO extends J2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(e){this.persistence=e,this.si=new Ea((t=>wg(t)),Ag),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.oi=0,this._i=new Ng,this.targetCount=0,this.ai=Oo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Oo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Pr(t),ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,s){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=t&&s.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ne.waitFor(u).next((()=>o))}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return ne.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),ne.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return ne.resolve(s)}containsKey(e,t){return ne.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e,t){this.ui={},this.overlays={},this.ci=new Td(0),this.li=!1,this.li=!0,this.hi=new rO,this.referenceDelegate=e(this),this.Pi=new lO(this),this.indexManager=new $2,this.remoteDocumentCache=(function(o){return new aO(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new F2(t),this.Ii=new nO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new sO(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){de("MemoryPersistence","Starting transaction:",e);const o=new uO(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(e,t){return ne.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class uO extends kD{constructor(e){super(),this.currentSequenceNumber=e}}class Dg{constructor(e){this.persistence=e,this.Ri=new Ng,this.Vi=null}static mi(e){return new Dg(e)}get fi(){if(this.Vi)return this.Vi;throw be(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),ne.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.fi,(s=>{const o=_e.fromPath(s);return this.gi(e,o).next((u=>{u||t.removeEntry(o,Se.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ne.or([()=>ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class id{constructor(e,t){this.persistence=e,this.pi=new Ea((s=>UD(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=Z2(this,t)}static mi(e,t){return new id(e,t)}Ei(){}di(e){return ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return ne.forEach(this.pi,((s,o)=>this.br(e,s,o).next((u=>u?ne.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((m=>{m||(s++,u.removeEntry(h,Se.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Vh(e.data.value)),t}br(e,t,s){return ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return ne.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Me(),o=Me();for(const u of t.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Og(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return CC()?8:VD(cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const u={result:null};return this.ys(e,t).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(e,t,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new cO;return this.Ss(e,t,h).next((m=>{if(u.result=m,this.Vs)return this.bs(e,t,h,m.size)}))})).next((()=>u.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(go()<=Pe.DEBUG&&de("QueryEngine","SDK will not create cache indexes for query:",yo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ne.resolve()):(go()<=Pe.DEBUG&&de("QueryEngine","Query:",yo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(go()<=Pe.DEBUG&&de("QueryEngine","The SDK decides to create cache indexes for query:",yo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Mi(t))):ne.resolve())}ys(e,t){if(UT(t))return ne.resolve(null);let s=Mi(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=ed(t,null,"F"),s=Mi(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=Me(...u);return this.ps.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(t,m);return this.Cs(t,y,h,p.readTime)?this.ys(e,ed(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,s,o){return UT(t)||o.isEqual(Se.min())?ne.resolve(null):this.ps.getDocuments(e,s).next((u=>{const h=this.Ds(t,u);return this.Cs(t,h,s,o)?ne.resolve(null):(go()<=Pe.DEBUG&&de("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),yo(t)),this.vs(e,h,t,OD(o,Cu)).next((m=>m)))}))}Ds(e,t){let s=new kt(Tw(e));return t.forEach(((o,u)=>{Rd(e,u)&&(s=s.add(u))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const u=e.limitType==="F"?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(e,t,s){return go()<=Pe.DEBUG&&de("QueryEngine","Using full collection scan to execute query:",yo(t)),this.ps.getDocumentsMatchingQuery(e,t,ms.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((u=>(t.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="LocalStore",dO=3e8;class fO{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ht(je),this.xs=new Ea((u=>wg(u)),Ag),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function mO(i,e,t,s){return new fO(i,e,t,s)}async function Fw(i,e){const t=Re(i);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],m=[];let p=Me();for(const y of o){h.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of u){m.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:m})))}))}))}function pO(i,e){const t=Re(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,p,y,v){const b=y.batch,A=b.keys();let R=ne.resolve();return A.forEach((O=>{R=R.next((()=>v.getEntry(p,O))).next((q=>{const V=y.docVersions.get(O);$e(V!==null,48541),q.version.compareTo(V)<0&&(b.applyToRemoteDocument(q,y),q.isValidDocument()&&(q.setReadTime(y.commitVersion),v.addEntry(q)))}))})),R.next((()=>m.mutationQueue.removeMutationBatch(p,b)))})(t,s,e,u).next((()=>u.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(m){let p=Me();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(p=p.add(m.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Gw(i){const e=Re(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function gO(i,e){const t=Re(i),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const m=[];e.targetChanges.forEach(((v,b)=>{const A=o.get(b);if(!A)return;m.push(t.Pi.removeMatchingKeys(u,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(u,v.addedDocuments,b))));let R=A.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(b)!==null?R=R.withResumeToken(Jt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,s)),o=o.insert(b,R),(function(q,V,ee){return q.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=dO?!0:ee.addedDocuments.size+ee.modifiedDocuments.size+ee.removedDocuments.size>0})(A,R,v)&&m.push(t.Pi.updateTargetData(u,R))}));let p=wr(),y=Me();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(yO(u,h,e.documentUpdates).next((v=>{p=v.ks,y=v.qs}))),!s.isEqual(Se.min())){const v=t.Pi.getLastRemoteSnapshotVersion(u).next((b=>t.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));m.push(v)}return ne.waitFor(m).next((()=>h.apply(u))).next((()=>t.localDocuments.getLocalViewOfDocuments(u,p,y))).next((()=>p))})).then((u=>(t.Ms=o,u)))}function yO(i,e,t){let s=Me(),o=Me();return t.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=wr();return t.forEach(((m,p)=>{const y=u.get(m);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Se.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):de(Pg,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",p.version)})),{ks:h,qs:o}}))}function _O(i,e){const t=Re(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Eg),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function vO(i,e){const t=Re(i);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((u=>u?(o=u,ne.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new os(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Bp(i,e,t){const s=Re(i),o=s.Ms.get(e),u=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!zo(h))throw h;de(Pg,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function ZT(i,e,t){const s=Re(i);let o=Se.min(),u=Me();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,y,v){const b=Re(p),A=b.xs.get(v);return A!==void 0?ne.resolve(b.Ms.get(A)):b.Pi.getTargetData(y,v)})(s,h,Mi(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,m.targetId).next((p=>{u=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Se.min(),t?u:Me()))).next((m=>(EO(s,r2(e),m),{documents:m,Qs:u})))))}function EO(i,e,t){let s=i.Os.get(e)||Se.min();t.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Os.set(e,s)}class JT{constructor(){this.activeTargetIds=c2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class TO{constructor(){this.Mo=new JT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new JT,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="ConnectivityMonitor";class tb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){de(eb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){de(eb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch=null;function zp(){return Ch===null?Ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ch++,"0x"+Ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="RestConnection",wO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class AO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Wh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,u){const h=zp(),m=this.zo(e,t.toUriEncodedString());de(hp,`Sending RPC '${e}' ${h}:`,m,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,u);const{host:y}=new URL(m),v=Sr(y);return this.Jo(e,m,p,s,v).then((b=>(de(hp,`Received RPC '${e}' ${h}: `,b),b)),(b=>{throw Io(hp,`RPC '${e}' ${h} failed with error: `,b,"url: ",m,"request:",s),b}))}Ho(e,t,s,o,u,h){return this.Go(e,t,s,o,u)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Uo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}zo(e,t){const s=wO[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn="WebChannelConnection";class RO extends AO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,u){const h=zp();return new Promise(((m,p)=>{const y=new K0;y.setWithCredentials(!0),y.listenOnce(Q0.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case kh.NO_ERROR:const b=y.getResponseJson();de(rn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(b)),m(b);break;case kh.TIMEOUT:de(rn,`RPC '${e}' ${h} timed out`),p(new he(J.DEADLINE_EXCEEDED,"Request time out"));break;case kh.HTTP_ERROR:const A=y.getStatus();if(de(rn,`RPC '${e}' ${h} failed with status:`,A,"response text:",y.getResponseText()),A>0){let R=y.getResponseJson();Array.isArray(R)&&(R=R[0]);const O=R?.error;if(O&&O.status&&O.message){const q=(function(ee){const K=ee.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(K)>=0?K:J.UNKNOWN})(O.status);p(new he(q,O.message))}else p(new he(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new he(J.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{de(rn,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);de(rn,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=zp(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=Z0(),m=W0(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const v=u.join("");de(rn,`Creating RPC '${e}' stream ${o}: ${v}`,p);const b=h.createWebChannel(v,p);this.I_(b);let A=!1,R=!1;const O=new SO({Yo:V=>{R?de(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,V):(A||(de(rn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),A=!0),de(rn,`RPC '${e}' stream ${o} sending:`,V),b.send(V))},Zo:()=>b.close()}),q=(V,ee,K)=>{V.listen(ee,(Q=>{try{K(Q)}catch(ie){setTimeout((()=>{throw ie}),0)}}))};return q(b,lu.EventType.OPEN,(()=>{R||(de(rn,`RPC '${e}' stream ${o} transport opened.`),O.o_())})),q(b,lu.EventType.CLOSE,(()=>{R||(R=!0,de(rn,`RPC '${e}' stream ${o} transport closed`),O.a_(),this.E_(b))})),q(b,lu.EventType.ERROR,(V=>{R||(R=!0,Io(rn,`RPC '${e}' stream ${o} transport errored. Name:`,V.name,"Message:",V.message),O.a_(new he(J.UNAVAILABLE,"The operation could not be completed")))})),q(b,lu.EventType.MESSAGE,(V=>{if(!R){const ee=V.data[0];$e(!!ee,16349);const K=ee,Q=K?.error||K[0]?.error;if(Q){de(rn,`RPC '${e}' stream ${o} received error:`,Q);const ie=Q.status;let ae=(function(C){const I=Ct[C];if(I!==void 0)return Ow(I)})(ie),re=Q.message;ae===void 0&&(ae=J.INTERNAL,re="Unknown error status: "+ie+" with message "+Q.message),R=!0,O.a_(new he(ae,re)),b.close()}else de(rn,`RPC '${e}' stream ${o} received:`,ee),O.u_(ee)}})),q(m,X0.STAT_EVENT,(V=>{V.stat===xp.PROXY?de(rn,`RPC '${e}' stream ${o} detected buffering proxy`):V.stat===xp.NOPROXY&&de(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{O.__()}),0),O}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function dp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(i){return new N2(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e,t,s=1e3,o=1.5,u=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&de("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb="PersistentStream";class Yw{constructor(e,t,s,o,u,h,m,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $w(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new he(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return de(nb,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(de(nb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CO extends Yw{constructor(e,t,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=P2(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Se.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Se.min():h.readTime?ki(h.readTime):Se.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Up(this.serializer),t.addTarget=(function(u,h){let m;const p=h.target;if(m=jp(p)?{documents:k2(u,p)}:{query:V2(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Mw(u,h.resumeToken);const y=kp(u,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(Se.min())>0){m.readTime=nd(u,h.snapshotVersion.toTimestamp());const y=kp(u,h.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,e);const s=U2(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Up(this.serializer),t.removeTarget=e,this.q_(t)}}class IO extends Yw{constructor(e,t,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return $e(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,$e(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){$e(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=M2(e.writeResults,e.commitTime),s=ki(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Up(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>j2(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{}class NO extends xO{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(e,Vp(t,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new he(J.UNKNOWN,u.toString())}))}Ho(e,t,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(e,Vp(t,s),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new he(J.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class DO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(br(t),this.aa=!1):de("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ya="RemoteStore";class OO{constructor(e,t,s,o,u){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{Ta(this)&&(de(ya,"Restarting streams for network reachability change."),await(async function(p){const y=Re(p);y.Ea.add(4),await Ku(y),y.Ra.set("Unknown"),y.Ea.delete(4),await Dd(y)})(this))}))})),this.Ra=new DO(s,o)}}async function Dd(i){if(Ta(i))for(const e of i.da)await e(!0)}async function Ku(i){for(const e of i.da)await e(!1)}function Kw(i,e){const t=Re(i);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Vg(t)?kg(t):Ho(t).O_()&&Mg(t,e))}function jg(i,e){const t=Re(i),s=Ho(t);t.Ia.delete(e),s.O_()&&Qw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Ta(t)&&t.Ra.set("Unknown"))}function Mg(i,e){if(i.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ho(i).Y_(e)}function Qw(i,e){i.Va.Ue(e),Ho(i).Z_(e)}function kg(i){i.Va=new R2({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),Ho(i).start(),i.Ra.ua()}function Vg(i){return Ta(i)&&!Ho(i).x_()&&i.Ia.size>0}function Ta(i){return Re(i).Ea.size===0}function Xw(i){i.Va=void 0}async function PO(i){i.Ra.set("Online")}async function jO(i){i.Ia.forEach(((e,t)=>{Mg(i,e)}))}async function MO(i,e){Xw(i),Vg(i)?(i.Ra.ha(e),kg(i)):i.Ra.set("Unknown")}async function kO(i,e,t){if(i.Ra.set("Online"),e instanceof jw&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(i,e)}catch(s){de(ya,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await rd(i,s)}else if(e instanceof Bh?i.Va.Ze(e):e instanceof Pw?i.Va.st(e):i.Va.tt(e),!t.isEqual(Se.min()))try{const s=await Gw(i.localStore);t.compareTo(s)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(y);v&&u.Ia.set(y,v.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,y)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(Jt.EMPTY_BYTE_STRING,v.snapshotVersion)),Qw(u,p);const b=new os(v.target,p,y,v.sequenceNumber);Mg(u,b)})),u.remoteSyncer.applyRemoteEvent(m)})(i,t)}catch(s){de(ya,"Failed to raise snapshot:",s),await rd(i,s)}}async function rd(i,e,t){if(!zo(e))throw e;i.Ea.add(1),await Ku(i),i.Ra.set("Offline"),t||(t=()=>Gw(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{de(ya,"Retrying IndexedDB access"),await t(),i.Ea.delete(1),await Dd(i)}))}function Ww(i,e){return e().catch((t=>rd(i,t,e)))}async function Od(i){const e=Re(i),t=_s(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Eg;for(;VO(e);)try{const o=await _O(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,LO(e,o)}catch(o){await rd(e,o)}Zw(e)&&Jw(e)}function VO(i){return Ta(i)&&i.Ta.length<10}function LO(i,e){i.Ta.push(e);const t=_s(i);t.O_()&&t.X_&&t.ea(e.mutations)}function Zw(i){return Ta(i)&&!_s(i).x_()&&i.Ta.length>0}function Jw(i){_s(i).start()}async function UO(i){_s(i).ra()}async function BO(i){const e=_s(i);for(const t of i.Ta)e.ea(t.mutations)}async function zO(i,e,t){const s=i.Ta.shift(),o=Cg.from(s,e,t);await Ww(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await Od(i)}async function qO(i,e){e&&_s(i).X_&&await(async function(s,o){if((function(h){return w2(h)&&h!==J.ABORTED})(o.code)){const u=s.Ta.shift();_s(s).B_(),await Ww(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Od(s)}})(i,e),Zw(i)&&Jw(i)}async function ib(i,e){const t=Re(i);t.asyncQueue.verifyOperationInProgress(),de(ya,"RemoteStore received new credentials");const s=Ta(t);t.Ea.add(3),await Ku(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Dd(t)}async function HO(i,e){const t=Re(i);e?(t.Ea.delete(2),await Dd(t)):e||(t.Ea.add(2),await Ku(t),t.Ra.set("Unknown"))}function Ho(i){return i.ma||(i.ma=(function(t,s,o){const u=Re(t);return u.sa(),new CO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:PO.bind(null,i),t_:jO.bind(null,i),r_:MO.bind(null,i),H_:kO.bind(null,i)}),i.da.push((async e=>{e?(i.ma.B_(),Vg(i)?kg(i):i.Ra.set("Unknown")):(await i.ma.stop(),Xw(i))}))),i.ma}function _s(i){return i.fa||(i.fa=(function(t,s,o){const u=Re(t);return u.sa(),new IO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Xo:()=>Promise.resolve(),t_:UO.bind(null,i),r_:qO.bind(null,i),ta:BO.bind(null,i),na:zO.bind(null,i)}),i.da.push((async e=>{e?(i.fa.B_(),await Od(i)):(await i.fa.stop(),i.Ta.length>0&&(de(ya,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e,t,s,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,u){const h=Date.now()+s,m=new Lg(e,t,h,o,u);return m.start(s),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ug(i,e){if(br("AsyncQueue",`${e}: ${i}`),zo(i))return new he(J.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{static emptySet(e){return new Ro(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=uu(),this.sortedSet=new ht(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Ro;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(){this.ga=new ht(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):be(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Po{constructor(e,t,s,o,u,h,m,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,u){const h=[];return t.forEach((m=>{h.push({type:0,doc:m})})),new Po(e,t,Ro.emptySet(t),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class GO{constructor(){this.queries=sb(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Re(t),u=o.queries;o.queries=sb(),u.forEach(((h,m)=>{for(const p of m.Sa)p.onError(s)}))})(this,new he(J.ABORTED,"Firestore shutting down"))}}function sb(){return new Ea((i=>Ew(i)),Sd)}async function Bg(i,e){const t=Re(i);let s=3;const o=e.query;let u=t.queries.get(o);u?!u.ba()&&e.Da()&&(s=2):(u=new FO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await t.onListen(o,!0);break;case 1:u.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const m=Ug(h,`Initialization of query '${yo(e.query)}' failed`);return void e.onError(m)}t.queries.set(o,u),u.Sa.push(e),e.va(t.onlineState),u.wa&&e.Fa(u.wa)&&qg(t)}async function zg(i,e){const t=Re(i),s=e.query;let o=3;const u=t.queries.get(s);if(u){const h=u.Sa.indexOf(e);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=e.Da()?0:1:!u.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function $O(i,e){const t=Re(i);let s=!1;for(const o of e){const u=o.query,h=t.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(s=!0);h.wa=o}}s&&qg(t)}function YO(i,e,t){const s=Re(i),o=s.queries.get(e);if(o)for(const u of o.Sa)u.onError(t);s.queries.delete(e)}function qg(i){i.Ca.forEach((e=>{e.next()}))}var qp,ab;(ab=qp||(qp={})).Ma="default",ab.Cache="cache";class Hg{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Po(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Po.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==qp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.key=e}}class tA{constructor(e){this.key=e}}class KO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Me(),this.mutatedKeys=Me(),this.eu=Tw(e),this.tu=new Ro(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new rb,o=t?t.tu:this.tu;let u=t?t.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,b)=>{const A=o.get(v),R=Rd(this.query,b)?b:null,O=!!A&&this.mutatedKeys.has(A.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let V=!1;A&&R?A.data.isEqual(R.data)?O!==q&&(s.track({type:3,doc:R}),V=!0):this.su(A,R)||(s.track({type:2,doc:R}),V=!0,(p&&this.eu(R,p)>0||y&&this.eu(R,y)<0)&&(m=!0)):!A&&R?(s.track({type:0,doc:R}),V=!0):A&&!R&&(s.track({type:1,doc:A}),V=!0,(p||y)&&(m=!0)),V&&(R?(h=h.add(R),u=q?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:m,mutatedKeys:u}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,b)=>(function(R,O){const q=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Rt:V})}};return q(R)-q(O)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(s),o=o??!1;const m=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,h.length!==0||y?{snapshot:new Po(this.query,e.tu,u,h,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Me(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new tA(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new eA(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Me();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Po.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Fg="SyncEngine";class QO{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class XO{constructor(e){this.key=e,this.hu=!1}}class WO{constructor(e,t,s,o,u,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Ea((m=>Ew(m)),Sd),this.Iu=new Map,this.Eu=new Set,this.du=new ht(_e.comparator),this.Au=new Map,this.Ru=new Ng,this.Vu={},this.mu=new Map,this.fu=Oo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function ZO(i,e,t=!0){const s=oA(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await nA(s,e,t,!0),o}async function JO(i,e){const t=oA(i);await nA(t,e,!0,!1)}async function nA(i,e,t,s){const o=await vO(i.localStore,Mi(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,t);let m;return s&&(m=await eP(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&t&&Kw(i.remoteStore,o),m}async function eP(i,e,t,s,o){i.pu=(b,A,R)=>(async function(q,V,ee,K){let Q=V.view.ru(ee);Q.Cs&&(Q=await ZT(q.localStore,V.query,!1).then((({documents:N})=>V.view.ru(N,Q))));const ie=K&&K.targetChanges.get(V.targetId),ae=K&&K.targetMismatches.get(V.targetId)!=null,re=V.view.applyChanges(Q,q.isPrimaryClient,ie,ae);return lb(q,V.targetId,re.au),re.snapshot})(i,b,A,R);const u=await ZT(i.localStore,e,!0),h=new KO(e,u.Qs),m=h.ru(u.documents),p=Yu.createSynthesizedTargetChangeForCurrentChange(t,s&&i.onlineState!=="Offline",o),y=h.applyChanges(m,i.isPrimaryClient,p);lb(i,t,y.au);const v=new QO(e,t,h);return i.Tu.set(e,v),i.Iu.has(t)?i.Iu.get(t).push(e):i.Iu.set(t,[e]),y.snapshot}async function tP(i,e,t){const s=Re(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!Sd(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Bp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&jg(s.remoteStore,o.targetId),Hp(s,o.targetId)})).catch(Bo)):(Hp(s,o.targetId),await Bp(s.localStore,o.targetId,!0))}async function nP(i,e){const t=Re(i),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),jg(t.remoteStore,s.targetId))}async function iP(i,e,t){const s=cP(i);try{const o=await(function(h,m){const p=Re(h),y=Xe.now(),v=m.reduce(((R,O)=>R.add(O.key)),Me());let b,A;return p.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let O=wr(),q=Me();return p.Ns.getEntries(R,v).next((V=>{O=V,O.forEach(((ee,K)=>{K.isValidDocument()||(q=q.add(ee))}))})).next((()=>p.localDocuments.getOverlayedDocuments(R,O))).next((V=>{b=V;const ee=[];for(const K of m){const Q=_2(K,b.get(K.key).overlayedDocument);Q!=null&&ee.push(new bs(K.key,Q,dw(Q.value.mapValue),Jn.exists(!0)))}return p.mutationQueue.addMutationBatch(R,y,ee,m)})).next((V=>{A=V;const ee=V.applyToLocalDocumentSet(b,q);return p.documentOverlayCache.saveOverlays(R,V.batchId,ee)}))})).then((()=>({batchId:A.batchId,changes:ww(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let y=h.Vu[h.currentUser.toKey()];y||(y=new ht(je)),y=y.insert(m,p),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await Qu(s,o.changes),await Od(s.remoteStore)}catch(o){const u=Ug(o,"Failed to persist write");t.reject(u)}}async function iA(i,e){const t=Re(i);try{const s=await gO(t.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=t.Au.get(u);h&&($e(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?$e(h.hu,14607):o.removedDocuments.size>0&&($e(h.hu,42227),h.hu=!1))})),await Qu(t,s,e)}catch(s){await Bo(s)}}function ob(i,e,t){const s=Re(i);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Re(h);p.onlineState=m;let y=!1;p.queries.forEach(((v,b)=>{for(const A of b.Sa)A.va(m)&&(y=!0)})),y&&qg(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function rP(i,e,t){const s=Re(i);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new ht(_e.comparator);h=h.insert(u,on.newNoDocument(u,Se.min()));const m=Me().add(u),p=new xd(Se.min(),new Map,new ht(je),h,m);await iA(s,p),s.du=s.du.remove(u),s.Au.delete(e),Gg(s)}else await Bp(s.localStore,e,!1).then((()=>Hp(s,e,t))).catch(Bo)}async function sP(i,e){const t=Re(i),s=e.batch.batchId;try{const o=await pO(t.localStore,e);sA(t,s,null),rA(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Qu(t,o)}catch(o){await Bo(o)}}async function aP(i,e,t){const s=Re(i);try{const o=await(function(h,m){const p=Re(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,m).next((b=>($e(b!==null,37113),v=b.keys(),p.mutationQueue.removeMutationBatch(y,b)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);sA(s,e,t),rA(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Qu(s,o)}catch(o){await Bo(o)}}function rA(i,e){(i.mu.get(e)||[]).forEach((t=>{t.resolve()})),i.mu.delete(e)}function sA(i,e,t){const s=Re(i);let o=s.Vu[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Hp(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),t&&i.Pu.yu(s,t);i.Iu.delete(e),i.isPrimaryClient&&i.Ru.jr(e).forEach((s=>{i.Ru.containsKey(s)||aA(i,s)}))}function aA(i,e){i.Eu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(jg(i.remoteStore,t),i.du=i.du.remove(e),i.Au.delete(t),Gg(i))}function lb(i,e,t){for(const s of t)s instanceof eA?(i.Ru.addReference(s.key,e),oP(i,s)):s instanceof tA?(de(Fg,"Document no longer in limbo: "+s.key),i.Ru.removeReference(s.key,e),i.Ru.containsKey(s.key)||aA(i,s.key)):be(19791,{wu:s})}function oP(i,e){const t=e.key,s=t.path.canonicalString();i.du.get(t)||i.Eu.has(s)||(de(Fg,"New document in limbo: "+t),i.Eu.add(s),Gg(i))}function Gg(i){for(;i.Eu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const t=new _e(st.fromString(e)),s=i.fu.next();i.Au.set(s,new XO(t)),i.du=i.du.insert(t,s),Kw(i.remoteStore,new os(Mi(Ad(t.path)),s,"TargetPurposeLimboResolution",Td.ce))}}async function Qu(i,e,t){const s=Re(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((m,p)=>{h.push(s.pu(p,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const v=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(y){o.push(y);const v=Og.As(p.targetId,y);u.push(v)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(p,y){const v=Re(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ne.forEach(y,(A=>ne.forEach(A.Es,(R=>v.persistence.referenceDelegate.addReference(b,A.targetId,R))).next((()=>ne.forEach(A.ds,(R=>v.persistence.referenceDelegate.removeReference(b,A.targetId,R)))))))))}catch(b){if(!zo(b))throw b;de(Pg,"Failed to update sequence numbers: "+b)}for(const b of y){const A=b.targetId;if(!b.fromCache){const R=v.Ms.get(A),O=R.snapshotVersion,q=R.withLastLimboFreeSnapshotVersion(O);v.Ms=v.Ms.insert(A,q)}}})(s.localStore,u))}async function lP(i,e){const t=Re(i);if(!t.currentUser.isEqual(e)){de(Fg,"User change. New user:",e.toKey());const s=await Fw(t.localStore,e);t.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new he(J.CANCELLED,h))}))})),u.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Qu(t,s.Ls)}}function uP(i,e){const t=Re(i),s=t.Au.get(e);if(s&&s.hu)return Me().add(s.key);{let o=Me();const u=t.Iu.get(e);if(!u)return o;for(const h of u){const m=t.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function oA(i){const e=Re(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=iA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rP.bind(null,e),e.Pu.H_=$O.bind(null,e.eventManager),e.Pu.yu=YO.bind(null,e.eventManager),e}function cP(i){const e=Re(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aP.bind(null,e),e}class sd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Nd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return mO(this.persistence,new hO,e.initialUser,this.serializer)}Cu(e){return new Hw(Dg.mi,this.serializer)}Du(e){return new TO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}sd.provider={build:()=>new sd};class hP extends sd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){$e(this.persistence.referenceDelegate instanceof id,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new X2(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new Hw((s=>id.mi(s,t)),this.serializer)}}class Fp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>ob(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=lP.bind(null,this.syncEngine),await HO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new GO})()}createDatastore(e){const t=Nd(e.databaseInfo.databaseId),s=(function(u){return new RO(u)})(e.databaseInfo);return(function(u,h,m,p){return new NO(u,h,m,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,u,h,m){return new OO(s,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(t=>ob(this.syncEngine,t,0)),(function(){return tb.v()?new tb:new bO})())}createSyncEngine(e,t){return(function(o,u,h,m,p,y,v){const b=new WO(o,u,h,m,p,y);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Re(t);de(ya,"RemoteStore shutting down."),s.Ea.add(5),await Ku(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Fp.provider={build:()=>new Fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class dP{constructor(e,t,s,o,u){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=vg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{de(vs,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(de(vs,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Ug(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function fp(i,e){i.asyncQueue.verifyOperationInProgress(),de(vs,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let s=t.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Fw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function ub(i,e){i.asyncQueue.verifyOperationInProgress();const t=await fP(i);de(vs,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((s=>ib(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>ib(e.remoteStore,o))),i._onlineComponents=e}async function fP(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){de(vs,"Using user provided OfflineComponentProvider");try{await fp(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Io("Error using user provided cache. Falling back to memory cache: "+t),await fp(i,new sd)}}else de(vs,"Using default OfflineComponentProvider"),await fp(i,new hP(void 0));return i._offlineComponents}async function lA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(de(vs,"Using user provided OnlineComponentProvider"),await ub(i,i._uninitializedComponentsProvider._online)):(de(vs,"Using default OnlineComponentProvider"),await ub(i,new Fp))),i._onlineComponents}function mP(i){return lA(i).then((e=>e.syncEngine))}async function ad(i){const e=await lA(i),t=e.eventManager;return t.onListen=ZO.bind(null,e.syncEngine),t.onUnlisten=tP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=nP.bind(null,e.syncEngine),t}function pP(i,e,t={}){const s=new yr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,y){const v=new $g({next:A=>{v.Nu(),h.enqueueAndForget((()=>zg(u,b)));const R=A.docs.has(m);!R&&A.fromCache?y.reject(new he(J.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&A.fromCache&&p&&p.source==="server"?y.reject(new he(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(A)},error:A=>y.reject(A)}),b=new Hg(Ad(m.path),v,{includeMetadataChanges:!0,qa:!0});return Bg(u,b)})(await ad(i),i.asyncQueue,e,t,s))),s.promise}function gP(i,e,t={}){const s=new yr;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,y){const v=new $g({next:A=>{v.Nu(),h.enqueueAndForget((()=>zg(u,b))),A.fromCache&&p.source==="server"?y.reject(new he(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(A)},error:A=>y.reject(A)}),b=new Hg(m,v,{includeMetadataChanges:!0,qa:!0});return Bg(u,b)})(await ad(i),i.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA="firestore.googleapis.com",hb=!0;class db{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new he(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cA,this.ssl=hb}else this.host=e.host,this.ssl=e.ssl??hb;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<K2)throw new he(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}DD("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new he(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Pd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new db({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new db(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new TD;switch(s.type){case"firstParty":return new SD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=cb.get(t);s&&(de("ComponentProvider","Removing Datastore"),cb.delete(t),s.terminate())})(this),Promise.resolve()}}function yP(i,e,t,s={}){i=wn(i,Pd);const o=Sr(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},m=`${e}:${t}`;o&&(fd(`https://${m}`),md("Firestore",!0)),u.host!==cA&&u.host!==m&&Io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:s};if(!fa(p,h)&&(i._setSettings(p),s.mockUserToken)){let y,v;if(typeof s.mockUserToken=="string")y=s.mockUserToken,v=an.MOCK_USER;else{y=n0(s.mockUserToken,i._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new he(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new an(b)}i._authCredentials=new bD(new ew(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Rr(this.firestore,e,this._query)}}class gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gu(t,gt._jsonSchema))return new gt(e,s||null,new _e(st.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:Nt("string",gt._jsonSchemaVersion),referencePath:Nt("string")};class ds extends Rr{constructor(e,t,s){super(e,t,Ad(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new _e(e))}withConverter(e){return new ds(this.firestore,e,this._path)}}function hn(i,e,...t){if(i=at(i),tw("collection","path",e),i instanceof Pd){const s=st.fromString(e,...t);return ST(s),new ds(i,null,s)}{if(!(i instanceof gt||i instanceof ds))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...t));return ST(s),new ds(i.firestore,null,s)}}function An(i,e,...t){if(i=at(i),arguments.length===1&&(e=vg.newId()),tw("doc","path",e),i instanceof Pd){const s=st.fromString(e,...t);return AT(s),new gt(i,null,new _e(s))}{if(!(i instanceof gt||i instanceof ds))throw new he(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(st.fromString(e,...t));return AT(s),new gt(i.firestore,i instanceof ds?i.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fb="AsyncQueue";class mb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $w(this,"async_queue_retry"),this._c=()=>{const s=dp();s&&de(fb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=dp();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=dp();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new yr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!zo(e))throw e;de(fb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,br("INTERNAL UNHANDLED ERROR: ",pb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Lg.createAndSchedule(this,e,t,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:pb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function pb(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(i){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(i,["next","error","complete"])}class Ar extends Pd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new mb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mb(e),this._firestoreClient=void 0,await e}}}function _P(i,e){const t=typeof i=="object"?i:pd(),s=typeof i=="string"?i:Wh,o=Bu(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=rg("firestore");u&&yP(o,...u)}return o}function jd(i){if(i._terminated)throw new he(J.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||vP(i),i._firestoreClient}function vP(i){const e=i._freezeSettings(),t=(function(o,u,h,m){return new qD(o,u,h,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,uA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)})(i._databaseId,i._app?.options.appId||"",i._persistenceKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new dP(i._authCredentials,i._appCheckCredentials,i._queue,t,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wn(Jt.fromBase64String(e))}catch(t){throw new he(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Wn(Jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Wn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gu(e,Wn._jsonSchema))return Wn.fromBase64String(e.bytes)}}Wn._jsonSchemaVersion="firestore/bytes/1.0",Wn._jsonSchema={type:Nt("string",Wn._jsonSchemaVersion),bytes:Nt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new he(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new he(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new he(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vi._jsonSchemaVersion}}static fromJSON(e){if(Gu(e,Vi._jsonSchema))return new Vi(e.latitude,e.longitude)}}Vi._jsonSchemaVersion="firestore/geoPoint/1.0",Vi._jsonSchema={type:Nt("string",Vi._jsonSchemaVersion),latitude:Nt("number"),longitude:Nt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gu(e,Li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Li(e.vectorValues);throw new he(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Li._jsonSchemaVersion="firestore/vectorValue/1.0",Li._jsonSchema={type:Nt("string",Li._jsonSchemaVersion),vectorValues:Nt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EP=/^__.*__$/;class TP{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new bs(e,this.data,this.fieldMask,t,this.fieldTransforms):new $u(e,this.data,t,this.fieldTransforms)}}class hA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new bs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function dA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{Ac:i})}}class Yg{constructor(e,t,s,o,u,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return od(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dA(this.Ac)&&EP.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class bP{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Nd(e)}Cc(e,t,s,o=!1){return new Yg({Ac:e,methodName:t,Dc:s,path:Wt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Vd(i){const e=i._freezeSettings(),t=Nd(i._databaseId);return new bP(i._databaseId,!!e.ignoreUndefinedProperties,t)}function fA(i,e,t,s,o,u={}){const h=i.Cc(u.merge||u.mergeFields?2:0,e,t,o);Qg("Data must be an object, but it was:",h,s);const m=mA(s,h);let p,y;if(u.merge)p=new Mn(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const b of u.mergeFields){const A=Gp(e,b,t);if(!h.contains(A))throw new he(J.INVALID_ARGUMENT,`Field '${A}' is specified in your field mask but missing from your input data.`);gA(v,A)||v.push(A)}p=new Mn(v),y=h.fieldTransforms.filter((b=>p.covers(b.field)))}else p=null,y=h.fieldTransforms;return new TP(new Tn(m),p,y)}class Ld extends kd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ld}}class Kg extends kd{_toFieldTransform(e){return new m2(e.path,new Ou)}isEqual(e){return e instanceof Kg}}function wP(i,e,t,s){const o=i.Cc(1,e,t);Qg("Data must be an object, but it was:",o,s);const u=[],h=Tn.empty();Ts(s,((p,y)=>{const v=Xg(e,p,t);y=at(y);const b=o.yc(v);if(y instanceof Ld)u.push(v);else{const A=Xu(y,b);A!=null&&(u.push(v),h.set(v,A))}}));const m=new Mn(u);return new hA(h,m,o.fieldTransforms)}function AP(i,e,t,s,o,u){const h=i.Cc(1,e,t),m=[Gp(e,s,t)],p=[o];if(u.length%2!=0)throw new he(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let A=0;A<u.length;A+=2)m.push(Gp(e,u[A])),p.push(u[A+1]);const y=[],v=Tn.empty();for(let A=m.length-1;A>=0;--A)if(!gA(y,m[A])){const R=m[A];let O=p[A];O=at(O);const q=h.yc(R);if(O instanceof Ld)y.push(R);else{const V=Xu(O,q);V!=null&&(y.push(R),v.set(R,V))}}const b=new Mn(y);return new hA(v,b,h.fieldTransforms)}function SP(i,e,t,s=!1){return Xu(t,i.Cc(s?4:3,e))}function Xu(i,e){if(pA(i=at(i)))return Qg("Unsupported field value:",e,i),mA(i,e);if(i instanceof kd)return(function(s,o){if(!dA(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const m of s){let p=Xu(m,o.wc(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=at(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return h2(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=Xe.fromDate(s);return{timestampValue:nd(o.serializer,u)}}if(s instanceof Xe){const u=new Xe(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:nd(o.serializer,u)}}if(s instanceof Vi)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Wn)return{bytesValue:Mw(o.serializer,s._byteString)};if(s instanceof gt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:xg(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Li)return(function(h,m){return{mapValue:{fields:{[cw]:{stringValue:hw},[Zh]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Sg(m.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Ed(s)}`)})(i,e)}function mA(i,e){const t={};return rw(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(i,((s,o)=>{const u=Xu(o,e.mc(s));u!=null&&(t[s]=u)})),{mapValue:{fields:t}}}function pA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Xe||i instanceof Vi||i instanceof Wn||i instanceof gt||i instanceof kd||i instanceof Li)}function Qg(i,e,t){if(!pA(t)||!nw(t)){const s=Ed(t);throw s==="an object"?e.Sc(i+" a custom object"):e.Sc(i+" "+s)}}function Gp(i,e,t){if((e=at(e))instanceof Md)return e._internalPath;if(typeof e=="string")return Xg(i,e);throw od("Field path arguments must be of type string or ",i,!1,void 0,t)}const RP=new RegExp("[~\\*/\\[\\]]");function Xg(i,e,t){if(e.search(RP)>=0)throw od(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Md(...e.split("."))._internalPath}catch{throw od(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function od(i,e,t,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${s}`),h&&(p+=` in document ${o}`),p+=")"),new he(J.INVALID_ARGUMENT,m+i+p)}function gA(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e,t,s,o,u){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new CP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ud("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class CP extends yA{data(){return super.data()}}function Ud(i,e){return typeof e=="string"?Xg(i,e):e instanceof Md?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new he(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wg{}class Zg extends Wg{}function li(i,e,...t){let s=[];e instanceof Wg&&s.push(e),s=s.concat(t),(function(u){const h=u.filter((p=>p instanceof Jg)).length,m=u.filter((p=>p instanceof Bd)).length;if(h>1||h>0&&m>0)throw new he(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class Bd extends Zg{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Bd(e,t,s)}_apply(e){const t=this._parse(e);return vA(e._query,t),new Rr(e.firestore,e.converter,Mp(e._query,t))}_parse(e){const t=Vd(e.firestore);return(function(u,h,m,p,y,v,b){let A;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new he(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){_b(b,v);const O=[];for(const q of b)O.push(yb(p,u,q));A={arrayValue:{values:O}}}else A=yb(p,u,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||_b(b,v),A=SP(m,h,b,v==="in"||v==="not-in");return xt.create(y,v,A)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function ls(i,e,t){const s=e,o=Ud("where",i);return Bd._create(o,s,t)}class Jg extends Wg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Jg(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ci.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)vA(h,p),h=Mp(h,p)})(e._query,t),new Rr(e.firestore,e.converter,Mp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ey extends Zg{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ey(e,t)}_apply(e){const t=(function(o,u,h){if(o.startAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new he(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Du(u,h)})(e._query,this._field,this._direction);return new Rr(e.firestore,e.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new qo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function ty(i,e="asc"){const t=e,s=Ud("orderBy",i);return ey._create(s,t)}class ny extends Zg{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new ny(e,t,s)}_apply(e){return new Rr(e.firestore,e.converter,ed(e._query,this._limit,this._limitType))}}function IP(i){return ny._create("limit",i,"F")}function yb(i,e,t){if(typeof(t=at(t))=="string"){if(t==="")throw new he(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&t.indexOf("/")!==-1)throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(st.fromString(t));if(!_e.isDocumentKey(s))throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return PT(i,new _e(s))}if(t instanceof gt)return PT(i,t._key);throw new he(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ed(t)}.`)}function _b(i,e){if(!Array.isArray(i)||i.length===0)throw new he(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vA(i,e){const t=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new he(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class xP{convertValue(e,t="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ts(e,((o,u)=>{s[o]=this.convertValue(u,t)})),s}convertVectorValue(e){const t=e.fields?.[Zh].arrayValue?.values?.map((s=>bt(s.doubleValue)));return new Li(t)}convertGeoPoint(e){return new Vi(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=wd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){const t=ps(e);return new Xe(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=st.fromString(e);$e(zw(s),9688,{name:e});const o=new xu(s.get(1),s.get(3)),u=new _e(s.popFirst(5));return o.isEqual(t)||br(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(i,e,t){let s;return s=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,s}class hu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ca extends yA{constructor(e,t,s,o,u,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Ud("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ca._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ca._jsonSchemaVersion="firestore/documentSnapshot/1.0",ca._jsonSchema={type:Nt("string",ca._jsonSchemaVersion),bundleSource:Nt("string","DocumentSnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class zh extends ca{data(e={}){return super.data(e)}}class ha{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new hu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new zh(this._firestore,this._userDataWriter,s.key,s,new hu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new he(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new zh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new hu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),v=h.indexOf(m.doc.key)),{type:NP(m.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new he(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ha._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=vg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(t.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function NP(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:i})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(i){i=wn(i,gt);const e=wn(i.firestore,Ar);return pP(jd(e),i._key).then((t=>TA(e,i,t)))}ha._jsonSchemaVersion="firestore/querySnapshot/1.0",ha._jsonSchema={type:Nt("string",ha._jsonSchemaVersion),bundleSource:Nt("string","QuerySnapshot"),bundleName:Nt("string"),bundle:Nt("string")};class iy extends xP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function ba(i){i=wn(i,Rr);const e=wn(i.firestore,Ar),t=jd(e),s=new iy(e);return _A(i._query),gP(t,i._query).then((o=>new ha(e,s,i,o)))}function ry(i,e,t){i=wn(i,gt);const s=wn(i.firestore,Ar),o=EA(i.converter,e,t);return Hd(s,[fA(Vd(s),"setDoc",i._key,o,i.converter!==null,t).toMutation(i._key,Jn.none())])}function Mu(i,e,t,...s){i=wn(i,gt);const o=wn(i.firestore,Ar),u=Vd(o);let h;return h=typeof(e=at(e))=="string"||e instanceof Md?AP(u,"updateDoc",i._key,e,t,s):wP(u,"updateDoc",i._key,e),Hd(o,[h.toMutation(i._key,Jn.exists(!0))])}function vb(i){return Hd(wn(i.firestore,Ar),[new Rg(i._key,Jn.none())])}function ku(i,e){const t=wn(i.firestore,Ar),s=An(i),o=EA(i.converter,e);return Hd(t,[fA(Vd(i.firestore),"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,Jn.exists(!1))]).then((()=>s))}function qd(i,...e){i=at(i);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gb(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gb(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let u,h,m;if(i instanceof gt)h=wn(i.firestore,Ar),m=Ad(i._key.path),u={next:p=>{e[s]&&e[s](TA(h,i,p))},error:e[s+1],complete:e[s+2]};else{const p=wn(i,Rr);h=wn(p.firestore,Ar),m=p._query;const y=new iy(h);u={next:v=>{e[s]&&e[s](new ha(h,y,p,v))},error:e[s+1],complete:e[s+2]},_A(i._query)}return(function(y,v,b,A){const R=new $g(A),O=new Hg(v,R,b);return y.asyncQueue.enqueueAndForget((async()=>Bg(await ad(y),O))),()=>{R.Nu(),y.asyncQueue.enqueueAndForget((async()=>zg(await ad(y),O)))}})(jd(h),m,o,u)}function Hd(i,e){return(function(s,o){const u=new yr;return s.asyncQueue.enqueueAndForget((async()=>iP(await mP(s),o,u))),u.promise})(jd(i),e)}function TA(i,e,t){const s=t.docs.get(e._key),o=new iy(i);return new ca(i,o,e._key,s,new hu(t.hasPendingWrites,t.fromCache),e.converter)}function Zt(){return new Kg("serverTimestamp")}(function(e,t=!0){(function(o){Uo=o})(va),fs(new vr("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),m=new Ar(new wD(s.getProvider("auth-internal")),new RD(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new he(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new xu(y.options.projectId,v)})(h,o),h);return u={useFetchStreams:t,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Zn(ET,TT,e),Zn(ET,TT,"esm2020")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t,s,o){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,un(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=s.getImmediate({optional:!0}),this.auth||t.get().then(u=>this.auth=u,()=>{}),this.messaging||s.get().then(u=>this.messaging=u,()=>{}),this.appCheck||o?.get().then(u=>this.appCheck=u,()=>{})}async getAuthToken(){if(this.auth)try{return(await this.auth.getToken())?.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),s=await this.getMessagingToken(),o=await this.getAppCheckToken(e);return{authToken:t,messagingToken:s,appCheckToken:o}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p="us-central1";class OP{constructor(e,t,s,o,u=$p,h=(...m)=>fetch(...m)){this.app=e,this.fetchImpl=h,this.emulatorOrigin=null,this.contextProvider=new DP(e,t,s,o),this.cancelAllRequests=new Promise(m=>{this.deleteService=()=>Promise.resolve(m())});try{const m=new URL(u);this.customDomain=m.origin+(m.pathname==="/"?"":m.pathname),this.region=$p}catch{this.customDomain=null,this.region=u}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function PP(i,e,t){const s=Sr(e);i.emulatorOrigin=`http${s?"s":""}://${e}:${t}`,s&&(fd(i.emulatorOrigin),md("Functions",!0))}const Eb="@firebase/functions",Tb="0.13.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP="auth-internal",MP="app-check-internal",kP="messaging-internal";function VP(i){const e=(t,{instanceIdentifier:s})=>{const o=t.getProvider("app").getImmediate(),u=t.getProvider(jP),h=t.getProvider(kP),m=t.getProvider(MP);return new OP(o,u,h,m,s)};fs(new vr(bA,e,"PUBLIC").setMultipleInstances(!0)),Zn(Eb,Tb,i),Zn(Eb,Tb,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LP(i=pd(),e=$p){const s=Bu(at(i),bA).getImmediate({identifier:e}),o=rg("functions");return o&&UP(s,...o),s}function UP(i,e,t){PP(at(i),e,t)}VP();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="firebasestorage.googleapis.com",AA="storageBucket",BP=120*1e3,zP=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends zi{constructor(e,t,s=0){super(mp(e),`Firebase Storage: ${t} (${mp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var yt;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(yt||(yt={}));function mp(i){return"storage/"+i}function sy(){const i="An unknown error occurred, please check the error payload for server response.";return new _t(yt.UNKNOWN,i)}function qP(i){return new _t(yt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function HP(i){return new _t(yt.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function FP(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(yt.UNAUTHENTICATED,i)}function GP(){return new _t(yt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function $P(i){return new _t(yt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function YP(){return new _t(yt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function KP(){return new _t(yt.CANCELED,"User canceled the upload/download.")}function QP(i){return new _t(yt.INVALID_URL,"Invalid URL '"+i+"'.")}function XP(i){return new _t(yt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function WP(){return new _t(yt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+AA+"' property when initializing the app?")}function ZP(){return new _t(yt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function JP(){return new _t(yt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function ej(i){return new _t(yt.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Yp(i){return new _t(yt.INVALID_ARGUMENT,i)}function SA(){return new _t(yt.APP_DELETED,"The Firebase app was deleted.")}function tj(i){return new _t(yt.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Tu(i,e){return new _t(yt.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function nu(i){throw new _t(yt.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let s;try{s=kn.makeFromUrl(e,t)}catch{return new kn(e,"")}if(s.path==="")return s;throw XP(e)}static makeFromUrl(e,t){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(ie){ie.path.charAt(ie.path.length-1)==="/"&&(ie.path_=ie.path_.slice(0,-1))}const h="(/(.*))?$",m=new RegExp("^gs://"+o+h,"i"),p={bucket:1,path:3};function y(ie){ie.path_=decodeURIComponent(ie.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),A="(/([^?#]*).*)?$",R=new RegExp(`^https?://${b}/${v}/b/${o}/o${A}`,"i"),O={bucket:1,path:3},q=t===wA?"(?:storage.googleapis.com|storage.cloud.google.com)":t,V="([^?#]*)",ee=new RegExp(`^https?://${q}/${o}/${V}`,"i"),Q=[{regex:m,indices:p,postModify:u},{regex:R,indices:O,postModify:y},{regex:ee,indices:{bucket:1,path:2},postModify:y}];for(let ie=0;ie<Q.length;ie++){const ae=Q[ie],re=ae.regex.exec(e);if(re){const N=re[ae.indices.bucket];let C=re[ae.indices.path];C||(C=""),s=new kn(N,C),ae.postModify(s);break}}if(s==null)throw QP(e);return s}}class nj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(i,e,t){let s=1,o=null,u=null,h=!1,m=0;function p(){return m===2}let y=!1;function v(...V){y||(y=!0,e.apply(null,V))}function b(V){o=setTimeout(()=>{o=null,i(R,p())},V)}function A(){u&&clearTimeout(u)}function R(V,...ee){if(y){A();return}if(V){A(),v.call(null,V,...ee);return}if(p()||h){A(),v.call(null,V,...ee);return}s<64&&(s*=2);let Q;m===1?(m=2,Q=0):Q=(s+Math.random())*1e3,b(Q)}let O=!1;function q(V){O||(O=!0,A(),!y&&(o!==null?(V||(m=2),clearTimeout(o),b(0)):V||(m=1)))}return b(0),u=setTimeout(()=>{h=!0,q(!0)},t),q}function rj(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sj(i){return i!==void 0}function aj(i){return typeof i=="object"&&!Array.isArray(i)}function ay(i){return typeof i=="string"||i instanceof String}function bb(i){return oy()&&i instanceof Blob}function oy(){return typeof Blob<"u"}function wb(i,e,t,s){if(s<e)throw Yp(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>t)throw Yp(`Invalid value for '${i}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(i,e,t){let s=e;return t==null&&(s=`https://${e}`),`${t}://${s}/v0${i}`}function RA(i){const e=encodeURIComponent;let t="?";for(const s in i)if(i.hasOwnProperty(s)){const o=e(s)+"="+e(i[s]);t=t+o+"&"}return t=t.slice(0,-1),t}var da;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(da||(da={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(i,e){const t=i>=500&&i<600,o=[408,429].indexOf(i)!==-1,u=e.indexOf(i)!==-1;return t||o||u}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e,t,s,o,u,h,m,p,y,v,b,A=!0,R=!1){this.url_=e,this.method_=t,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=h,this.callback_=m,this.errorCallback_=p,this.timeout_=y,this.progressCallback_=v,this.connectionFactory_=b,this.retry=A,this.isUsingEmulator=R,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,q)=>{this.resolve_=O,this.reject_=q,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new Ih(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const h=m=>{const p=m.loaded,y=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,y)};this.progressCallback_!==null&&u.addUploadProgressListener(h),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(h),this.pendingConnection_=null;const m=u.getErrorCode()===da.NO_ERROR,p=u.getStatus();if(!m||oj(p,this.additionalRetryCodes_)&&this.retry){const v=u.getErrorCode()===da.ABORT;s(!1,new Ih(!1,null,v));return}const y=this.successCodes_.indexOf(p)!==-1;s(!0,new Ih(y,u))})},t=(s,o)=>{const u=this.resolve_,h=this.reject_,m=o.connection;if(o.wasSuccessCode)try{const p=this.callback_(m,m.getResponse());sj(p)?u(p):u()}catch(p){h(p)}else if(m!==null){const p=sy();p.serverResponse=m.getErrorText(),this.errorCallback_?h(this.errorCallback_(m,p)):h(p)}else if(o.canceled){const p=this.appDelete_?SA():KP();h(p)}else{const p=YP();h(p)}};this.canceled_?t(!1,new Ih(!1,null,!0)):this.backoffId_=ij(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&rj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ih{constructor(e,t,s){this.wasSuccessCode=e,this.connection=t,this.canceled=!!s}}function uj(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function cj(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function hj(i,e){e&&(i["X-Firebase-GMPID"]=e)}function dj(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function fj(i,e,t,s,o,u,h=!0,m=!1){const p=RA(i.urlParams),y=i.url+p,v=Object.assign({},i.headers);return hj(v,e),uj(v,t),cj(v,u),dj(v,s),new lj(y,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,o,h,m)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pj(...i){const e=mj();if(e!==void 0){const t=new e;for(let s=0;s<i.length;s++)t.append(i[s]);return t.getBlob()}else{if(oy())return new Blob(i);throw new _t(yt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gj(i,e,t){return i.webkitSlice?i.webkitSlice(e,t):i.mozSlice?i.mozSlice(e,t):i.slice?i.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yj(i){if(typeof atob>"u")throw ej("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class pp{constructor(e,t){this.data=e,this.contentType=t||null}}function _j(i,e){switch(i){case Pi.RAW:return new pp(CA(e));case Pi.BASE64:case Pi.BASE64URL:return new pp(IA(i,e));case Pi.DATA_URL:return new pp(Ej(e),Tj(e))}throw sy()}function CA(i){const e=[];for(let t=0;t<i.length;t++){let s=i.charCodeAt(t);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(t<i.length-1&&(i.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const u=s,h=i.charCodeAt(++t);s=65536|(u&1023)<<10|h&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function vj(i){let e;try{e=decodeURIComponent(i)}catch{throw Tu(Pi.DATA_URL,"Malformed data URL.")}return CA(e)}function IA(i,e){switch(i){case Pi.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw Tu(i,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Pi.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw Tu(i,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=yj(e)}catch(o){throw o.message.includes("polyfill")?o:Tu(i,"Invalid character found")}const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s}class xA{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Tu(Pi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=t[1]||null;s!=null&&(this.base64=bj(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function Ej(i){const e=new xA(i);return e.base64?IA(Pi.BASE64,e.rest):vj(e.rest)}function Tj(i){return new xA(i).contentType}function bj(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e,t){let s=0,o="";bb(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,t){if(bb(this.data_)){const s=this.data_,o=gj(s,e,t);return o===null?null:new as(o)}else{const s=new Uint8Array(this.data_.buffer,e,t-e);return new as(s,!0)}}static getBlob(...e){if(oy()){const t=e.map(s=>s instanceof as?s.data_:s);return new as(pj.apply(null,t))}else{const t=e.map(h=>ay(h)?_j(Pi.RAW,h).data:h.data_);let s=0;t.forEach(h=>{s+=h.byteLength});const o=new Uint8Array(s);let u=0;return t.forEach(h=>{for(let m=0;m<h.length;m++)o[u++]=h[m]}),new as(o,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(i){let e;try{e=JSON.parse(i)}catch{return null}return aj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wj(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function Aj(i,e){const t=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?t:i+"/"+t}function DA(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(i,e){return e}class gn{constructor(e,t,s,o){this.server=e,this.local=t||e,this.writable=!!s,this.xform=o||Sj}}let xh=null;function Rj(i){return!ay(i)||i.length<2?i:DA(i)}function OA(){if(xh)return xh;const i=[];i.push(new gn("bucket")),i.push(new gn("generation")),i.push(new gn("metageneration")),i.push(new gn("name","fullPath",!0));function e(u,h){return Rj(h)}const t=new gn("name");t.xform=e,i.push(t);function s(u,h){return h!==void 0?Number(h):h}const o=new gn("size");return o.xform=s,i.push(o),i.push(new gn("timeCreated")),i.push(new gn("updated")),i.push(new gn("md5Hash",null,!0)),i.push(new gn("cacheControl",null,!0)),i.push(new gn("contentDisposition",null,!0)),i.push(new gn("contentEncoding",null,!0)),i.push(new gn("contentLanguage",null,!0)),i.push(new gn("contentType",null,!0)),i.push(new gn("metadata","customMetadata",!0)),xh=i,xh}function Cj(i,e){function t(){const s=i.bucket,o=i.fullPath,u=new kn(s,o);return e._makeStorageReference(u)}Object.defineProperty(i,"ref",{get:t})}function Ij(i,e,t){const s={};s.type="file";const o=t.length;for(let u=0;u<o;u++){const h=t[u];s[h.local]=h.xform(s,e[h.server])}return Cj(s,i),s}function PA(i,e,t){const s=NA(e);return s===null?null:Ij(i,s,t)}function xj(i,e,t,s){const o=NA(e);if(o===null||!ay(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const h=encodeURIComponent;return u.split(",").map(y=>{const v=i.bucket,b=i.fullPath,A="/b/"+h(v)+"/o/"+h(b),R=ly(A,t,s),O=RA({alt:"media",token:y});return R+O})[0]}function Nj(i,e){const t={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(t[u.server]=i[u.local])}return JSON.stringify(t)}class jA{constructor(e,t,s,o){this.url=e,this.method=t,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(i){if(!i)throw sy()}function Dj(i,e){function t(s,o){const u=PA(i,o,e);return MA(u!==null),u}return t}function Oj(i,e){function t(s,o){const u=PA(i,o,e);return MA(u!==null),xj(u,o,i.host,i._protocol)}return t}function kA(i){function e(t,s){let o;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?o=GP():o=FP():t.getStatus()===402?o=HP(i.bucket):t.getStatus()===403?o=$P(i.path):o=s,o.status=t.getStatus(),o.serverResponse=s.serverResponse,o}return e}function Pj(i){const e=kA(i);function t(s,o){let u=e(s,o);return s.getStatus()===404&&(u=qP(i.path)),u.serverResponse=o.serverResponse,u}return t}function jj(i,e,t){const s=e.fullServerUrl(),o=ly(s,i.host,i._protocol),u="GET",h=i.maxOperationRetryTime,m=new jA(o,u,Oj(i,t),h);return m.errorHandler=Pj(e),m}function Mj(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function kj(i,e,t){const s=Object.assign({},t);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=Mj(null,e)),s}function Vj(i,e,t,s,o){const u=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function m(){let Q="";for(let ie=0;ie<2;ie++)Q=Q+Math.random().toString().slice(2);return Q}const p=m();h["Content-Type"]="multipart/related; boundary="+p;const y=kj(e,s,o),v=Nj(y,t),b="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+v+`\r
--`+p+`\r
Content-Type: `+y.contentType+`\r
\r
`,A=`\r
--`+p+"--",R=as.getBlob(b,s,A);if(R===null)throw ZP();const O={name:y.fullPath},q=ly(u,i.host,i._protocol),V="POST",ee=i.maxUploadRetryTime,K=new jA(q,V,Dj(i,t),ee);return K.urlParams=O,K.headers=h,K.body=R.uploadData(),K.errorHandler=kA(e),K}class Lj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=da.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=da.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=da.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,s,o,u){if(this.sent_)throw nu("cannot .send() more than once");if(Sr(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(t,e,!0),u!==void 0)for(const h in u)u.hasOwnProperty(h)&&this.xhr_.setRequestHeader(h,u[h].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw nu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw nu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw nu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw nu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Uj extends Lj{initXhr(){this.xhr_.responseType="text"}}function VA(){return new Uj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,t){this._service=e,t instanceof kn?this._location=t:this._location=kn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new _a(e,t)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DA(this._location.path)}get storage(){return this._service}get parent(){const e=wj(this._location.path);if(e===null)return null;const t=new kn(this._location.bucket,e);return new _a(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw tj(e)}}function Bj(i,e,t){i._throwIfRoot("uploadBytes");const s=Vj(i.storage,i._location,OA(),new as(e,!0),t);return i.storage.makeRequestWithTokens(s,VA).then(o=>({metadata:o,ref:i}))}function zj(i){i._throwIfRoot("getDownloadURL");const e=jj(i.storage,i._location,OA());return i.storage.makeRequestWithTokens(e,VA).then(t=>{if(t===null)throw JP();return t})}function qj(i,e){const t=Aj(i._location.path,e),s=new kn(i._location.bucket,t);return new _a(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(i){return/^[A-Za-z]+:\/\//.test(i)}function Fj(i,e){return new _a(i,e)}function LA(i,e){if(i instanceof uy){const t=i;if(t._bucket==null)throw WP();const s=new _a(t,t._bucket);return e!=null?LA(s,e):s}else return e!==void 0?qj(i,e):i}function Gj(i,e){if(e&&Hj(e)){if(i instanceof uy)return Fj(i,e);throw Yp("To use ref(service, url), the first argument must be a Storage instance.")}else return LA(i,e)}function Ab(i,e){const t=e?.[AA];return t==null?null:kn.makeFromBucketSpec(t,i)}function $j(i,e,t,s={}){i.host=`${e}:${t}`;const o=Sr(e);o&&(fd(`https://${i.host}/b`),md("Storage",!0)),i._isUsingEmulator=!0,i._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:n0(u,i.app.options.projectId))}class uy{constructor(e,t,s,o,u,h=!1){this.app=e,this._authProvider=t,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=h,this._bucket=null,this._host=wA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=BP,this._maxUploadRetryTime=zP,this._requests=new Set,o!=null?this._bucket=kn.makeFromBucketSpec(o,this._host):this._bucket=Ab(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=Ab(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){wb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){wb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(un(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new _a(this,e)}_makeRequest(e,t,s,o,u=!0){if(this._deleted)return new nj(SA());{const h=fj(e,this._appId,s,o,t,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,t){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,s,o).getPromise()}}const Sb="@firebase/storage",Rb="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="storage";function Yj(i,e,t){return i=at(i),Bj(i,e,t)}function Kj(i){return i=at(i),zj(i)}function Qj(i,e){return i=at(i),Gj(i,e)}function Xj(i=pd(),e){i=at(i);const s=Bu(i,UA).getImmediate({identifier:e}),o=rg("storage");return o&&Wj(s,...o),s}function Wj(i,e,t,s={}){$j(i,e,t,s)}function Zj(i,{instanceIdentifier:e}){const t=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),o=i.getProvider("app-check-internal");return new uy(t,s,o,e,va)}function Jj(){fs(new vr(UA,Zj,"PUBLIC").setMultipleInstances(!0)),Zn(Sb,Rb,""),Zn(Sb,Rb,"esm2020")}Jj();var eM="AIzaSyBTl0Jl9ZMQBA84LBbECwzUz5jcL4dYV3Y",tM="mduwebsite1345.firebaseapp.com",nM="mduwebsite1345",iM="mduwebsite1345.firebasestorage.app",rM="653256711691",sM="1:653256711691:web:5aca0f2e84ed19df90710e";const aM={apiKey:eM,authDomain:tM,projectId:nM,storageBucket:iM,messagingSenderId:rM,appId:sM},Fd=YE().length?YE()[0]:s0(aM),ln=yD(Fd),We=_P(Fd);LP(Fd);const oM=Xj(Fd),lM=/^\+[1-9]\d{7,14}$/,uM=()=>{const[i,e]=B.useState(""),[t,s]=B.useState(""),[o,u]=B.useState(""),[h,m]=B.useState(""),[p,y]=B.useState(null),[v,b]=B.useState(""),[A,R]=B.useState(!1),O=cd(),q=()=>O("/members");B.useEffect(()=>{const re=yd(ln,N=>{N&&q()});return()=>re()},[]);const V=async re=>{if(re.preventDefault(),!A){b(""),R(!0);try{await Qx(ln,i.trim(),t),q()}catch(N){console.error("[Email login] ",N),b(N?.message??"Login failed")}finally{R(!1)}}},ee=async()=>{if(!A){b(""),R(!0);try{const re=new Oi;await G0(ln,re),q()}catch(re){console.error("[Google login] ",re),b(re?.message??"Google sign-in failed")}finally{R(!1)}}},K=()=>{if(window.recaptchaVerifier)return window.recaptchaVerifier;try{window.recaptchaVerifier=new Ip(ln,"recaptcha-container",{size:"invisible"})}catch(re){console.warn("[reCAPTCHA modular ctor failed, trying compat]",re),window.recaptchaVerifier=new Ip("recaptcha-container",{size:"invisible"},ln)}return window.recaptchaVerifier};B.useEffect(()=>()=>{try{window.recaptchaVerifier?.clear?.()}catch{}window.recaptchaVerifier=void 0},[]);const Q=B.useMemo(()=>lM.test(o.trim()),[o]),ie=async()=>{if(!(A||!Q)){b(""),R(!0);try{const re=K(),N=await q0(ln,o.trim(),re);y(N)}catch(re){console.error("[sendPhoneCode] ",re),b(re?.message??"Failed to send code");try{window.recaptchaVerifier?.reset?.()}catch{}}finally{R(!1)}}},ae=async()=>{if(!(!p||A||h.trim().length<6)){b(""),R(!0);try{await p.confirm(h.trim()),q()}catch(re){console.error("[verifyPhoneCode] ",re),b(re?.message??"Invalid verification code")}finally{R(!1)}}};return f.jsx("div",{children:f.jsxs("div",{className:"background",children:[f.jsx("div",{className:"shape"}),f.jsx("div",{className:"shape"}),f.jsxs("form",{onSubmit:V,"aria-busy":A,children:[f.jsx("h3",{children:"Login Here"}),f.jsx("label",{htmlFor:"email",children:"Email"}),f.jsx("input",{id:"email",type:"email",placeholder:"you@ucla.edu",value:i,onChange:re=>e(re.target.value),autoComplete:"email",required:!0,disabled:A}),f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{id:"password",type:"password",placeholder:"Password",value:t,onChange:re=>s(re.target.value),autoComplete:"current-password",required:!0,disabled:A}),f.jsx("button",{type:"submit",disabled:A,children:A?"Signing in…":"Log In"}),f.jsx("div",{className:"social",style:{marginTop:20},children:f.jsx("button",{type:"button",className:"go",onClick:ee,"aria-label":"Continue with Google",disabled:A,children:"Continue with Google"})}),f.jsxs("fieldset",{style:{marginTop:24,border:"none",padding:0},children:[f.jsx("legend",{style:{fontWeight:600,marginBottom:8},children:"Or sign in with phone"}),p?f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"code",children:"Enter verification code"}),f.jsx("input",{id:"code",type:"text",placeholder:"123456",value:h,onChange:re=>m(re.target.value),disabled:A}),f.jsx("button",{type:"button",onClick:ae,disabled:A||h.trim().length<6,children:"Verify & Sign in"}),f.jsx("button",{type:"button",onClick:()=>{y(null),m("");try{window.recaptchaVerifier?.reset?.()}catch{}},disabled:A,style:{marginLeft:8},children:"Use a different phone"})]}):f.jsxs(f.Fragment,{children:[f.jsx("label",{htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),f.jsx("input",{id:"phone",type:"tel",placeholder:"+1##########",value:o,onChange:re=>u(re.target.value),disabled:A,"aria-invalid":o.length>0&&!Q}),f.jsx("button",{type:"button",onClick:ie,disabled:A||!Q,children:"Send verification code"})]})]}),v&&f.jsx("p",{style:{color:"salmon",marginTop:16},role:"alert",children:v}),f.jsx("div",{id:"recaptcha-container"}),f.jsxs("p",{style:{marginTop:16},children:["No account? ",f.jsx(sn,{to:"/register",children:"Register"})]})]})]})})};function cM(i,e){return{uid:i,name:e.name??"",email:e.email??"",phoneNumber:e.phoneNumber??"",year:e.year??"",major:e.major??"",instrument:e.instrument??"",instruments:Array.isArray(e.instruments)?e.instruments:[],section:e.section??"",bio:e.bio??"",roles:Array.isArray(e.roles)?e.roles:["performer"],returning:e.returning??"",photoURL:e.photoURL??"",createdAt:e.createdAt,updatedAt:e.updatedAt}}async function hM(i){const e=await zd(An(We,"users",i));return e.exists()?cM(i,e.data()):null}async function Kp(i,e){const t=An(We,"users",i),s={...e,uid:i,...Array.isArray(e.roles)?{roles:e.roles}:{},updatedAt:Zt(),...e&&!e.createdAt?{createdAt:Zt()}:{}};await ry(t,s,{merge:!0})}const Cb="recaptcha-container-register",dM=()=>{const[i,e]=B.useState({name:"",email:"",phoneNumber:"",year:"",major:"",instrument:"",instrumentsCsv:"",sectionCsv:"",returning:"",bio:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",password:""}),[t,s]=B.useState(""),[o,u]=B.useState(!1),[h,m]=B.useState(""),[p,y]=B.useState(""),[v,b]=B.useState(null),A=cd(),R=re=>{const{name:N,value:C}=re.target;e(I=>({...I,[N]:C}))},O=B.useMemo(()=>i.instrumentsCsv.split(",").map(re=>re.trim()).filter(Boolean),[i.instrumentsCsv]),q=B.useMemo(()=>{const re=i.sectionCsv.split(",").map(N=>N.trim()).filter(Boolean);return re.length?re[0]:""},[i.sectionCsv]),V=async(re,N,C)=>{await Kp(re,{name:i.name,email:i.email||N||void 0,phoneNumber:i.phoneNumber,year:i.year,major:i.major,instrument:i.instrument,instruments:O.length?O:void 0,section:q||void 0,returning:i.returning,bio:i.bio,emergencyName:i.emergencyName,emergencyPhone:i.emergencyPhone,emergencyRelation:i.emergencyRelation,roles:["performer"],...C||{}})},ee=async re=>{re.preventDefault(),s(""),u(!0);try{const N=await Kx(ln,i.email,i.password);await V(N.user.uid,N.user.email),A("/members")}catch(N){s(N?.message||"Failed to create account")}finally{u(!1)}},K=async()=>{s(""),u(!0);try{const re=new Oi,N=await G0(ln,re);await V(N.user.uid,N.user.email),A("/members")}catch(re){s(re?.message||"Google sign-in failed")}finally{u(!1)}},Q=re=>(window._registerRecaptcha||(window._registerRecaptcha=new Ip(re,Cb,{size:"normal"})),window._registerRecaptcha),ie=async()=>{if(s(""),!h){s("Enter a phone number in E.164 format, e.g. +13105551234");return}u(!0);try{const re=Q(ln),N=await q0(ln,h,re);b(N)}catch(re){s(re?.message||"Failed to send verification code")}finally{u(!1)}},ae=async()=>{if(s(""),!v||!p){s("Enter the verification code you received");return}u(!0);try{const re=await v.confirm(p);await V(re.user.uid,re.user.email,{phoneNumber:h}),A("/members")}catch(re){s(re?.message||"Verification failed")}finally{u(!1)}};return f.jsxs("section",{className:"register-container",children:[f.jsx("h1",{className:"register-title",children:"Create your account"}),f.jsx("p",{className:"register-subtitle",children:"Use email, Google, or phone. You can edit details later in your portal."}),f.jsxs("form",{onSubmit:ee,className:"register-form",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"name",children:"Full Name"}),f.jsx("input",{className:"input",id:"name",name:"name",value:i.name,onChange:R,placeholder:"Jane Doe",required:!0})]}),f.jsxs("div",{className:"grid-2 gap",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"email",children:"Email"}),f.jsx("input",{className:"input",id:"email",name:"email",type:"email",value:i.email,onChange:R,placeholder:"you@ucla.edu",autoComplete:"email",required:!0})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"phoneNumber",children:"Phone"}),f.jsx("input",{className:"input",id:"phoneNumber",name:"phoneNumber",value:i.phoneNumber,onChange:R,placeholder:"(###) ###-####"})]})]}),f.jsxs("div",{className:"grid-2 gap",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"year",children:"Year in School"}),f.jsxs("select",{className:"input",id:"year",name:"year",value:i.year,onChange:R,required:!0,children:[f.jsx("option",{value:"",children:"Select Year"}),f.jsx("option",{children:"1st Year"}),f.jsx("option",{children:"2nd Year"}),f.jsx("option",{children:"3rd Year"}),f.jsx("option",{children:"4th Year"}),f.jsx("option",{children:"Graduate"}),f.jsx("option",{children:"Alumni"})]})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"major",children:"Major"}),f.jsx("input",{className:"input",id:"major",name:"major",value:i.major,onChange:R,placeholder:"Physics, EE, Music, ..."})]})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"instrument",children:"Primary Instrument"}),f.jsx("input",{className:"input",id:"instrument",name:"instrument",value:i.instrument,onChange:R,placeholder:"Violin, Trumpet, Vihuela..."})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"instrumentsCsv",children:"Instrument(s) (comma-separated)"}),f.jsx("input",{className:"input",id:"instrumentsCsv",name:"instrumentsCsv",value:i.instrumentsCsv,onChange:R,placeholder:"violin, guitar, trumpet, voice"})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"sectionCsv",children:"Section(s) (optional, comma-separated)"}),f.jsx("input",{className:"input",id:"sectionCsv",name:"sectionCsv",value:i.sectionCsv,onChange:R,placeholder:"violas, violins, harp, voces"})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"returning",children:"Are you a returning member?"}),f.jsxs("select",{className:"input",id:"returning",name:"returning",value:i.returning,onChange:R,required:!0,children:[f.jsx("option",{value:"",children:"Select"}),f.jsx("option",{value:"Yes",children:"Yes"}),f.jsx("option",{value:"No",children:"No"})]})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"bio",children:"Short Bio (optional)"}),f.jsx("textarea",{className:"input",id:"bio",name:"bio",value:i.bio,onChange:R,placeholder:"Tell us a little about your experience",rows:3})]}),f.jsxs("div",{className:"grid-3 gap",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"emergencyName",children:"Emergency Contact Name"}),f.jsx("input",{className:"input",id:"emergencyName",name:"emergencyName",value:i.emergencyName,onChange:R})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"emergencyPhone",children:"Emergency Contact Phone"}),f.jsx("input",{className:"input",id:"emergencyPhone",name:"emergencyPhone",value:i.emergencyPhone,onChange:R})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"emergencyRelation",children:"Relation"}),f.jsx("input",{className:"input",id:"emergencyRelation",name:"emergencyRelation",value:i.emergencyRelation,onChange:R})]})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"password",children:"Password"}),f.jsx("input",{className:"input",type:"password",id:"password",name:"password",value:i.password,onChange:R,required:!0})]}),t&&f.jsx("p",{className:"error",children:t}),f.jsx("button",{type:"submit",className:"submit",disabled:o,children:o?"Creating account…":"Register with Email"})]}),f.jsx("div",{className:"divider",children:f.jsx("span",{children:"or"})}),f.jsx("div",{className:"oauth-row",children:f.jsx("button",{type:"button",className:"btn-google",onClick:K,disabled:o,"aria-label":"Continue with Google",children:"Continue with Google"})}),f.jsxs("div",{className:"phone-card",children:[v?f.jsxs("div",{className:"grid-2 gap",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"code",children:"Enter verification code"}),f.jsx("input",{className:"input",id:"code",value:p,onChange:re=>y(re.target.value),placeholder:"123456"})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",children:" "}),f.jsx("button",{type:"button",className:"btn-outline",onClick:ae,disabled:o||!p,children:"Verify & Create account"})]})]}):f.jsxs("div",{className:"grid-2 gap",children:[f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",htmlFor:"phone",children:"Phone (E.164, e.g. +13105551234)"}),f.jsx("input",{className:"input",id:"phone",type:"tel",value:h,onChange:re=>m(re.target.value),placeholder:"+1##########"})]}),f.jsxs("div",{className:"field",children:[f.jsx("label",{className:"label",children:" "}),f.jsx("button",{type:"button",className:"btn-outline",onClick:ie,disabled:o||!h,children:"Send verification code"})]})]}),f.jsx("div",{id:Cb})]})]})},fM={};function mM(i){const e="recaptcha-v3";if(document.getElementById(e))return;const t=document.createElement("script");t.id=e,t.async=!0,t.defer=!0,t.src=`https://www.google.com/recaptcha/api.js?render=${i}`,document.head.appendChild(t)}function BA(){const[i,e]=B.useState(!1),t=B.useRef(typeof import.meta<"u"?fM?.VITE_RECAPTCHA_SITE_KEY??null:null);B.useEffect(()=>{if(!t.current){e(!0);return}mM(t.current);const o=()=>e(!0),u=window.setInterval(()=>{window.grecaptcha?.execute&&(window.clearInterval(u),o())},100);return()=>window.clearInterval(u)},[]);const s=B.useCallback(async o=>{if(!t.current)return`dev_${o}_${Date.now()}`;const u=window.grecaptcha;if(!u||!u.execute)throw new Error("reCAPTCHA not ready");return await u.execute(t.current,{action:o})},[]);return{ready:i,execute:s}}async function zA(i){if(!i?.name||!i?.email)throw new Error("Name and email are required");const e={type:"client_request",name:i.name,email:i.email,phone:i.phone??null,org:i.org??null,message:i.message??null,event:i.event??null,recaptchaToken:i.recaptchaToken??null,status:"new",createdAt:Zt(),updatedAt:Zt()},t=await ku(hn(We,"clients"),e);try{i.event&&(i.event.title||i.event.date)&&await ku(hn(We,"events"),{title:i.event.title||"Client Inquiry",date:i.event.date??null,start:i.event.start??null,end:i.event.end??null,location:i.event.location??null,status:"inquiry",visibility:"private",source:"client_form",clientRef:t.path,createdAt:Zt(),updatedAt:Zt()})}catch(o){console.warn("[submitClientRequest] event draft create failed:",o)}const s="https://https://script.google.com/u/0/home/projects/1FIwKXVOJn4P5Toveh84N7GisHXMpfKnGDv3Xrr-_j384zPbr8hW05Lvk/edit";try{await fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,firestoreId:t.id})})}catch(o){console.warn("[submitClientRequest] webhook failed:",o)}return{id:t.id}}const pM=()=>{const[i,e]=B.useState({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""}),[t,s]=B.useState("idle"),[o,u]=B.useState(""),{execute:h}=BA(),m=y=>{e(v=>({...v,[y.target.name]:y.target.value}))};async function p(y){if(y.preventDefault(),u(""),i.website&&i.website.trim().length>0){s("success");return}try{s("submitting");const v=await h("client_booking"),b=i.eventDate?new Date(`${i.eventDate}T09:00`).toISOString():void 0;await zA({recaptchaToken:v,name:i.name,email:i.email,phone:i.phone||void 0,org:void 0,message:[i.eventDetails?`Details: ${i.eventDetails}`:"",i.extraDetails?`Extra: ${i.extraDetails}`:""].filter(Boolean).join(`
`),event:{title:"Client Inquiry",date:i.eventDate||void 0,start:b,end:void 0,location:i.eventLocation||void 0}}),s("success"),e({name:"",email:"",phone:"",eventDate:"",eventLocation:"",eventDetails:"",extraDetails:"",website:""})}catch(v){s("error"),u(v?.message||"Failed to submit. Please try again later.")}}return f.jsxs("section",{className:"form-page bookus",children:[f.jsx("h1",{children:"Book Us"}),f.jsx("p",{children:"Please fill out this form to request a performance booking."}),f.jsxs("form",{onSubmit:p,className:"bookus-form",children:[f.jsx("input",{name:"website",value:i.website,onChange:m,className:"hp",tabIndex:-1,"aria-hidden":!0}),f.jsx("input",{name:"name",placeholder:"Your Name",value:i.name,onChange:m,required:!0}),f.jsx("input",{name:"email",type:"email",placeholder:"Your Email",value:i.email,onChange:m,required:!0}),f.jsx("input",{name:"phone",placeholder:"Phone Number",value:i.phone,onChange:m,required:!0}),f.jsx("input",{name:"eventDate",type:"date",value:i.eventDate,onChange:m,required:!0}),f.jsx("input",{name:"eventLocation",placeholder:"Event Location",value:i.eventLocation,onChange:m,required:!0}),f.jsx("textarea",{name:"eventDetails",placeholder:"Tell us about your event...",value:i.eventDetails,onChange:m,required:!0}),f.jsx("textarea",{name:"extraDetails",placeholder:"Anything else?",value:i.extraDetails,onChange:m}),f.jsx("button",{type:"submit",disabled:t==="submitting",children:t==="submitting"?"Submitting…":"Submit Request"}),t==="success"&&f.jsx("p",{className:"ok",children:"Thank you for your inquiry! We will get back to you soon."}),t==="error"&&f.jsx("p",{className:"err",children:o})]})]})},gM=()=>{const[i,e]=B.useState({name:"",email:"",phone:"",instrument:"",experience:""}),t=o=>{e({...i,[o.target.name]:o.target.value})},s=o=>{o.preventDefault(),console.log("Join request submitted:",i),alert("Thank you for your interest! We will contact you soon.")};return f.jsxs("section",{className:"form-page",children:[f.jsx("h1",{children:"Join Mariachi de Uclatlán"}),f.jsx("p",{children:"Interested in joining our group? Fill out the form below."}),f.jsxs("form",{onSubmit:s,children:[f.jsx("input",{name:"name",placeholder:"Your Name",onChange:t,required:!0}),f.jsx("input",{name:"email",type:"email",placeholder:"Your Email",onChange:t,required:!0}),f.jsx("input",{name:"phone",placeholder:"Phone Number",onChange:t,required:!0}),f.jsx("input",{name:"instrument",placeholder:"Instrument",onChange:t,required:!0}),f.jsx("textarea",{name:"experience",placeholder:"Tell us about your experience...",onChange:t,required:!0}),f.jsx("button",{type:"submit",children:"Submit Application"})]})]})};async function yM(i){if(!i?.name||!i?.email)throw new Error("Missing name or email in inquiry");const e={...i,status:"new",source:"public_form",createdAt:Zt(),updatedAt:Zt()};return(await ku(hn(We,"inquiries"),e)).id}function _M(){const[i,e]=B.useState({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""}),[t,s]=B.useState(""),[o,u]=B.useState(""),{execute:h}=BA();async function m(p){p.preventDefault(),s(""),u("");try{const y=await h("client_booking"),v=i.date&&i.startTime?new Date(`${i.date}T${i.startTime}`).toISOString():void 0,b=i.date&&i.endTime?new Date(`${i.date}T${i.endTime}`).toISOString():void 0,A={name:i.name,email:i.email,phone:i.phone||void 0,org:i.org||void 0,message:i.details||void 0,event:{title:i.title||"Client Inquiry",date:i.date||void 0,start:v,end:b,location:i.location||void 0},meta:{userAgent:typeof navigator<"u"?navigator.userAgent:void 0,tz:Intl.DateTimeFormat().resolvedOptions().timeZone}};await Promise.all([zA({recaptchaToken:y,...A}),yM(A)]),s("Thanks! Your request was received. We'll reach out soon."),e({name:"",email:"",phone:"",org:"",title:"",date:"",startTime:"",endTime:"",location:"",details:""})}catch(y){console.error("[HireUs submit] ",y),u(y?.message||"Failed to send")}}return f.jsxs("div",{className:"hireus",children:[f.jsx("h2",{children:"Hire Us"}),f.jsxs("form",{onSubmit:m,className:"event-form",children:[f.jsx("h3",{children:"Contact"}),f.jsx("input",{placeholder:"Your name",value:i.name,onChange:p=>e(y=>({...y,name:p.target.value})),required:!0}),f.jsx("input",{type:"email",placeholder:"Email",value:i.email,onChange:p=>e(y=>({...y,email:p.target.value})),required:!0}),f.jsx("input",{placeholder:"Phone",value:i.phone,onChange:p=>e(y=>({...y,phone:p.target.value}))}),f.jsx("input",{placeholder:"Organization (optional)",value:i.org,onChange:p=>e(y=>({...y,org:p.target.value}))}),f.jsx("h3",{children:"Event"}),f.jsx("input",{placeholder:"Event title",value:i.title,onChange:p=>e(y=>({...y,title:p.target.value})),required:!0}),f.jsx("input",{type:"date",value:i.date,onChange:p=>e(y=>({...y,date:p.target.value}))}),f.jsxs("div",{className:"time-row",children:[f.jsx("input",{type:"time",value:i.startTime,onChange:p=>e(y=>({...y,startTime:p.target.value}))}),f.jsx("input",{type:"time",value:i.endTime,onChange:p=>e(y=>({...y,endTime:p.target.value}))})]}),f.jsx("input",{placeholder:"Location",value:i.location,onChange:p=>e(y=>({...y,location:p.target.value}))}),f.jsx("textarea",{placeholder:"Details / repertoire / special notes",value:i.details,onChange:p=>e(y=>({...y,details:p.target.value}))}),f.jsx("button",{type:"submit",children:"Submit request"}),t&&f.jsx("p",{className:"ok",children:t}),o&&f.jsx("p",{className:"err",children:o})]})]})}const vM=()=>f.jsxs("section",{className:"ucla-content",children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Welcome to Your Dashboard"}),f.jsx("p",{className:"ucla-paragraph",children:"Access events, resources, and tools for active members of Mariachi de Uclatlán."})]}),EM=(i,e)=>({uid:i,name:"",email:e||"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["performer"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""}),TM=()=>{const i=ln.currentUser,e=i?.uid??"",[t,s]=B.useState(!0),[o,u]=B.useState(!1),[h,m]=B.useState(""),[p,y]=B.useState(null),[v,b]=B.useState(!1),[A,R]=B.useState(null);B.useEffect(()=>{let Q=!0;return(async()=>{if(!e){s(!1);return}s(!0);try{const ie=await hM(e),ae=ie??EM(e,i?.email??null);Q&&y(ae),ie||await Kp(e,ae)}catch(ie){console.error("[Profile load]",ie),m(ie?.message??"Failed to load profile")}finally{Q&&s(!1)}})(),()=>{Q=!1}},[e,i?.email]);const O=Q=>{const{name:ie,value:ae}=Q.target;y(re=>re&&{...re,[ie]:ae})},q=Q=>{const ie=Q.target.files?.[0]||null;R(ie)},V=async()=>{if(!A||!e)return;const Q=A.name.split(".").pop()||"jpg",ie=Qj(oM,`avatars/${e}/avatar.${Q}`);return await Yj(ie,A),await Kj(ie)},ee=async()=>{if(!(!p||!e)){u(!0),m("");try{const Q=await V(),ie=p._instrumentsCSV,ae=ie?ie.split(",").map(N=>N.trim()).filter(Boolean):p.instruments||[],re={...p,instruments:ae,...Q?{photoURL:Q}:{}};await Kp(e,re),await Wx(i,{displayName:p.name||i?.displayName||void 0,photoURL:Q??p.photoURL??void 0}),b(!1),y({...p,instruments:ae,...Q?{photoURL:Q}:{}})}catch(Q){console.error("[Profile save]",Q),m(Q?.message??"Failed to save profile")}finally{u(!1)}}};if(t)return f.jsx("div",{className:"profile-wrap",children:f.jsx("div",{className:"card",children:f.jsx("p",{children:"Loading profile…"})})});if(!p)return f.jsx("div",{className:"profile-wrap",children:f.jsx("div",{className:"card",children:f.jsx("p",{children:"No profile."})})});const K=p.roles||[];return f.jsx("div",{className:"profile-wrap",children:f.jsxs("div",{className:"card profile-card",children:[f.jsxs("div",{className:"profile-head",children:[f.jsxs("div",{className:"avatar",children:[p.photoURL?f.jsx("img",{src:p.photoURL,alt:`${p.name||"Member"} avatar`}):f.jsx("div",{className:"avatar-placeholder",children:(p.name||p.email||"U")[0].toUpperCase()}),v&&f.jsxs("label",{className:"btn btn-light",style:{marginTop:8},children:["Upload photo",f.jsx("input",{type:"file",accept:"image/*",onChange:q,hidden:!0})]})]}),f.jsx("div",{className:"id-block",children:v?f.jsxs(f.Fragment,{children:[f.jsx("label",{className:"lbl",children:"Full Name"}),f.jsx("input",{name:"name",value:p.name||"",onChange:O,placeholder:"First Last"})]}):f.jsxs(f.Fragment,{children:[f.jsx("h2",{children:p.name||"Add your name"}),f.jsx("p",{className:"muted",children:p.email}),!!K.length&&f.jsx("div",{className:"roles",children:K.map(Q=>f.jsx("span",{className:`role-chip role-${Q}`,children:Q},Q))})]})}),f.jsx("div",{className:"actions",children:v?f.jsxs(f.Fragment,{children:[f.jsx("button",{className:"btn",disabled:o,onClick:ee,children:o?"Saving…":"Save"}),f.jsx("button",{className:"btn btn-light",disabled:o,onClick:()=>b(!1),children:"Cancel"})]}):f.jsx("button",{className:"btn",onClick:()=>b(!0),children:"Edit"})})]}),f.jsxs("div",{className:"grid",children:[f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Phone"}),v?f.jsx("input",{name:"phoneNumber",value:p.phoneNumber||"",onChange:O,placeholder:"+1 (###) ###-####"}):f.jsx("div",{className:"val",children:p.phoneNumber||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Year"}),v?f.jsxs("select",{name:"year",value:p.year||"",onChange:O,children:[f.jsx("option",{value:"",children:"Select"}),f.jsx("option",{children:"1st Year"}),f.jsx("option",{children:"2nd Year"}),f.jsx("option",{children:"3rd Year"}),f.jsx("option",{children:"4th Year"}),f.jsx("option",{children:"Graduate"}),f.jsx("option",{children:"Alumni"})]}):f.jsx("div",{className:"val",children:p.year||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Major"}),v?f.jsx("input",{name:"major",value:p.major||"",onChange:O,placeholder:"e.g., Math, EE, Music"}):f.jsx("div",{className:"val",children:p.major||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Instrument"}),v?f.jsx("input",{name:"instrument",value:p.instrument||"",onChange:O,placeholder:"e.g., Violin, Trumpet, Vihuela"}):f.jsx("div",{className:"val",children:p.instrument||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Section"}),v?f.jsx("input",{name:"section",value:p.section||"",onChange:O,placeholder:"Strings / Brass / Rhythm / Vocals"}):f.jsx("div",{className:"val",children:p.section||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"All Instruments"}),v?f.jsx("input",{name:"_instrumentsCSV",value:(p.instruments||[]).join(", "),onChange:O,placeholder:"Violin, Viola, Trumpet"}):f.jsx("div",{className:"val",children:p.instruments&&p.instruments.length?p.instruments.join(", "):"—"})]})]}),f.jsxs("div",{className:"grid",children:[f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Emergency Contact"}),v?f.jsx("input",{name:"emergencyName",value:p.emergencyName||"",onChange:O,placeholder:"Full name"}):f.jsx("div",{className:"val",children:p.emergencyName||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Emergency Phone"}),v?f.jsx("input",{name:"emergencyPhone",value:p.emergencyPhone||"",onChange:O,placeholder:"+1 (###) ###-####"}):f.jsx("div",{className:"val",children:p.emergencyPhone||"—"})]}),f.jsxs("div",{className:"col",children:[f.jsx("label",{className:"lbl",children:"Relation"}),v?f.jsx("input",{name:"emergencyRelation",value:p.emergencyRelation||"",onChange:O,placeholder:"Parent / Sibling / Friend"}):f.jsx("div",{className:"val",children:p.emergencyRelation||"—"})]})]}),f.jsxs("div",{className:"bio",children:[f.jsx("label",{className:"lbl",children:"Bio"}),v?f.jsx("textarea",{name:"bio",value:p.bio||"",onChange:O,rows:4,placeholder:"Short bio (markdown/plaintext)"}):f.jsx("p",{className:"val multi",children:p.bio||"Add a short bio about you, your experience, and favorite pieces to perform."})]}),h&&f.jsx("p",{className:"error",children:h})]})})},bM=i=>i==="published"?f.jsx("span",{className:"status published",children:"Published"}):i==="draft"?f.jsx("span",{className:"status draft",children:"Draft"}):i==="cancelled"?f.jsx("span",{className:"status cancelled",children:"Cancelled"}):null,qA=({event:i,canManage:e=!1,canRSVP:t=!1,onEdit:s,onDelete:o})=>f.jsxs("article",{className:`event-card ${i.status??""}`,children:[f.jsxs("header",{className:"event-head",children:[f.jsx("h3",{className:"event-title",children:i.title}),bM(i.status)]}),i.subtitle&&f.jsx("p",{className:"event-sub",children:i.subtitle}),f.jsxs("ul",{className:"event-meta",children:[f.jsxs("li",{children:[f.jsx("strong",{children:"When:"})," ",i.dateStr]}),i.location&&f.jsxs("li",{children:[f.jsx("strong",{children:"Where:"})," ",i.location]})]}),i.notes&&f.jsx("p",{className:"event-notes",children:i.notes}),f.jsxs("footer",{className:"event-actions",children:[t&&f.jsxs("div",{className:"left-actions",children:[f.jsx("button",{className:"btn",children:"I can play"}),f.jsx("button",{className:"btn btn-light",children:"Can’t make it"})]}),e&&f.jsxs("div",{className:"right-actions",children:[f.jsx("button",{className:"btn",onClick:()=>s?.(i.id),children:"Edit"}),f.jsx("button",{className:"btn btn-danger",onClick:()=>o?.(i.id),children:"Delete"})]})]})]}),wM=({event:i,onClose:e})=>{const t=i.dateStr?i.dateStr.split(","):[],s=t[0]?t[0].trim():"",o=t[1]?t[1].trim():"";return f.jsx("div",{className:"modal-overlay",onClick:e,children:f.jsxs("div",{className:"modal-content",onClick:u=>u.stopPropagation(),children:[f.jsx("h2",{className:"modal-title",children:i.title}),s&&f.jsxs("p",{children:[f.jsx("strong",{children:"Date:"})," ",s]}),o&&f.jsxs("p",{children:[f.jsx("strong",{children:"Time:"})," ",o]}),i.location&&f.jsxs("p",{children:[f.jsx("strong",{children:"Location:"})," ",i.location]}),i.notes&&f.jsx("p",{className:"modal-desc",children:i.notes}),f.jsx("div",{className:"modal-actions",children:f.jsx("button",{onClick:e,children:"Close"})})]})})};function Ib(i){if(i)return i instanceof Xe?i.toDate():i instanceof Date?i:new Date(i)}function AM(i){return{...i,start:Ib(i.start),end:Ib(i.end)}}function HA(i,e,t){const s=typeof i=="object"&&"start"in i&&!(i instanceof Date),o=Intl.DateTimeFormat().resolvedOptions().timeZone,u={dateStyle:"medium",timeZone:o},h={timeStyle:"short",timeZone:o};if(s){const m=i,p=new Intl.DateTimeFormat(void 0,u).format(m.start),y=new Intl.DateTimeFormat(void 0,h).format(m.start),v=m.end?new Intl.DateTimeFormat(void 0,h).format(m.end):"";return{date:p,time:v?`${y} – ${v}`:y}}else{const m=i,p=new Intl.DateTimeFormat(void 0,u).format(m),y=new Intl.DateTimeFormat(void 0,h).format(m),v="";return v?`${p} • ${y} – ${v}`:`${p} • ${y}`}}const FA="events";function GA(i,e){const t=li(hn(We,FA),ty("start","asc"));return qd(t,s=>{const o=s.docs.map(u=>AM({id:u.id,...u.data()}));i(o)},s=>e?.(s))}async function SM(i){return ku(hn(We,"events"),{...i,createdAt:Zt(),updatedAt:Zt()})}async function RM(i,e){await Mu(An(We,FA,i),{...e,updatedAt:Date.now()})}function CM(i){const{date:e,time:t}=HA(i);return{id:i.id,title:i.title,dateStr:t?`${e}, ${t}`:e,location:i.location||"",notes:i.description||"",status:i.status}}const IM=()=>{const[i,e]=pe.useState([]),[t,s]=pe.useState(null),[o,u]=pe.useState(!0);return pe.useEffect(()=>{const h=GA(m=>{e(m.map(CM)),u(!1)},m=>{console.error("[Events subscribe]",m),u(!1)});return()=>h()},[]),f.jsxs("section",{className:"ucla-content",style:{maxWidth:980,margin:"0 auto"},children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Upcoming Events"}),o&&f.jsx("p",{children:"Loading events…"}),!o&&i.length===0&&f.jsx("p",{children:"No events yet."}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:16,marginTop:16},children:i.map(h=>f.jsx(qA,{event:h,onClick:()=>s(h)},h.id))}),t&&f.jsx(wM,{event:t,onClose:()=>s(null)})]})},xM=()=>f.jsxs("section",{className:"ucla-content",style:{padding:"2rem"},children:[f.jsx("h1",{className:"ucla-heading-xl",style:{color:"#FFD100"},children:"🎼 Sheet Music Library"}),f.jsx("p",{style:{marginBottom:"1.5rem",fontSize:"1.1rem"},children:"Access PDF sheet music for each instrument section."}),f.jsx("a",{href:"https://ucla.box.com/s/l1aip4gbacfkgy80bf46cya0pj50tv77",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-block",padding:"1rem 2rem",backgroundColor:"#2774AE",color:"#fff",textDecoration:"none",fontWeight:"bold",borderRadius:"8px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:"Open Sheet Music Library →"})]}),NM=()=>f.jsxs("section",{className:"ucla-content",children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Account Settings"}),f.jsx("p",{className:"ucla-paragraph",children:"Here you can update your profile, change your password, and manage notification preferences."})]});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function DM(i,e,t,s){function o(u){return u instanceof t?u:new t(function(h){h(u)})}return new(t||(t=Promise))(function(u,h){function m(v){try{y(s.next(v))}catch(b){h(b)}}function p(v){try{y(s.throw(v))}catch(b){h(b)}}function y(v){v.done?u(v.value):o(v.value).then(m,p)}y((s=s.apply(i,[])).next())})}function OM(i,e){var t={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,o,u,h;return h={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function m(y){return function(v){return p([y,v])}}function p(y){if(s)throw new TypeError("Generator is already executing.");for(;t;)try{if(s=1,o&&(u=y[0]&2?o.return:y[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,y[1])).done)return u;switch(o=0,u&&(y=[y[0]&2,u.value]),y[0]){case 0:case 1:u=y;break;case 4:return t.label++,{value:y[1],done:!1};case 5:t.label++,o=y[1],y=[0];continue;case 7:y=t.ops.pop(),t.trys.pop();continue;default:if(u=t.trys,!(u=u.length>0&&u[u.length-1])&&(y[0]===6||y[0]===2)){t=0;continue}if(y[0]===3&&(!u||y[1]>u[0]&&y[1]<u[3])){t.label=y[1];break}if(y[0]===6&&t.label<u[1]){t.label=u[1],u=y;break}if(u&&t.label<u[2]){t.label=u[2],t.ops.push(y);break}u[2]&&t.ops.pop(),t.trys.pop();continue}y=e.call(i,t)}catch(v){y=[6,v],o=0}finally{s=u=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var To=function(){return To=Object.assign||function(e){for(var t,s=1,o=arguments.length;s<o;s++){t=arguments[s];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(e[u]=t[u])}return e},To.apply(this,arguments)},$A=function(i){return{loading:i==null,value:i}},PM=function(){return function(i,e){switch(e.type){case"error":return To(To({},i),{error:e.error,loading:!1,value:void 0});case"reset":return $A(e.defaultValue);case"value":return To(To({},i),{error:void 0,loading:!1,value:e.value});default:return i}}},jM=(function(i){var e=i?i():void 0,t=B.useReducer(PM(),$A(e)),s=t[0],o=t[1],u=B.useCallback(function(){var p=i?i():void 0;o({type:"reset",defaultValue:p})},[i]),h=B.useCallback(function(p){o({type:"error",error:p})},[]),m=B.useCallback(function(p){o({type:"value",value:p})},[]);return B.useMemo(function(){return{error:s.error,loading:s.loading,reset:u,setError:h,setValue:m,value:s.value}},[s.error,s.loading,u,h,m,s.value])}),MM=(function(i,e){var t=jM(function(){return i.currentUser}),s=t.error,o=t.loading,u=t.setError,h=t.setValue,m=t.value;return B.useEffect(function(){var p=yd(i,function(y){return DM(void 0,void 0,void 0,function(){var v;return OM(this,function(b){switch(b.label){case 0:return[3,4];case 1:return b.trys.push([1,3,,4]),[4,e.onUserChanged(y)];case 2:return b.sent(),[3,4];case 3:return v=b.sent(),u(v),[3,4];case 4:return h(y),[2]}})})},u);return function(){p()}},[i]),[m,o,s]});const bu=i=>{if(i){if(i instanceof Date)return i;if(i instanceof Xe)return i.toDate();try{const e=new Date(i);return isNaN(e.getTime())?void 0:e}catch{return}}},kM=(i,e)=>{const t=bu(i),s=bu(e);if(!t)return"";const o=t.toLocaleString?.()||t.toISOString();if(!s)return o;const h=t.toDateString()===s.toDateString()?s.toLocaleTimeString?.():s.toLocaleString?.();return`${o} → ${h}`},VM=()=>{const[i]=MM(ln),[e,t]=pe.useState(!0),[s,o]=pe.useState(null),[u,h]=pe.useState([]),[m,p]=pe.useState({}),[y,v]=pe.useState({});pe.useEffect(()=>{(async()=>{o(null),t(!0);try{const O=hn(We,"events"),q=li(O,ls("status","==","published")),ee=(await ba(q)).docs.map(ie=>({id:ie.id,...ie.data()})),K=Date.now(),Q=ee.filter(ie=>{const ae=bu(ie.start)?.getTime();return typeof ae=="number"?ae>=K-1e3*60*60*24:!0}).sort((ie,ae)=>{const re=bu(ie.start)?.getTime()??0,N=bu(ae.start)?.getTime()??0;return re-N});if(h(Q),i){const ie={};for(const ae of Q){const re=An(We,"events",ae.id,"availability",i.uid),N=await zd(re),C=N.exists()?N.data().status:"";ie[ae.id]=C||""}p(ie)}}catch(O){console.error(O),o(O?.message||"Failed to load events")}finally{t(!1)}})()},[i]);const b=(R,O)=>{const q=O.target.value;p(V=>({...V,[R]:q}))},A=async R=>{if(!i)return;const O=m[R]||"";if(!O){alert("Please select an availability first.");return}v(q=>({...q,[R]:!0}));try{const q=An(We,"events",R,"availability",i.uid);await ry(q,{uid:i.uid,status:O,updatedAt:Zt(),displayName:i.displayName||i.email||"Unknown",email:i.email||null},{merge:!0}),alert("Availability saved.")}catch(q){console.error(q),alert(q?.message||"Failed to save")}finally{v(q=>({...q,[R]:!1}))}};return i?f.jsxs("section",{className:"ucla-content",style:{maxWidth:900,margin:"0 auto"},children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),e&&f.jsx("p",{children:"Loading events…"}),s&&f.jsx("p",{style:{color:"salmon"},children:s}),f.jsxs("div",{className:"availability-list",children:[u.map(R=>f.jsxs("div",{className:"availability-card",children:[f.jsxs("div",{className:"availability-head",children:[f.jsx("h3",{className:"availability-title",children:R.title||"Untitled Event"}),f.jsx("span",{className:`status-pill ${R.status}`,children:R.status})]}),f.jsxs("div",{className:"availability-meta",children:[f.jsxs("div",{children:[f.jsx("strong",{children:"When: "}),f.jsx("span",{children:kM(R.start,R.end)})]}),R.location&&f.jsxs("div",{children:[f.jsx("strong",{children:"Where: "}),f.jsx("span",{children:R.location})]})]}),f.jsxs("div",{className:"availability-actions",children:[f.jsxs("select",{value:m[R.id]||"",onChange:O=>b(R.id,O),"aria-label":`Availability for ${R.title}`,children:[f.jsx("option",{value:"",children:"Select availability…"}),f.jsx("option",{value:"yes",children:"Yes"}),f.jsx("option",{value:"maybe",children:"Maybe"}),f.jsx("option",{value:"no",children:"No"})]}),f.jsx("button",{disabled:!!y[R.id],onClick:()=>A(R.id),children:y[R.id]?"Saving…":"Submit"})]})]},R.id)),!e&&!u.length&&f.jsx("p",{children:"No upcoming events yet."})]})]}):f.jsxs("section",{className:"ucla-content",style:{maxWidth:900,margin:"0 auto"},children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Performer Availability"}),f.jsx("p",{children:"Please log in to set availability."})]})},LM=["angelrocks0319@gmail.com","angelr19@g.ucla.edu","angelr19@ucla.edu","uclatlan@ucla.edu","uclatlan@g.ucla.edu","enriquerodgon09@g.ucla.edu","andelapena1374@gmail.com"];function YA(i){if(!i)return!1;const e=i.toLowerCase();return LM.map(t=>t.toLowerCase()).includes(e)}function ld(i,e){if(!i)return new Date;if(i instanceof Xe)return i.toDate();if(typeof i=="string"){if(/^\d{4}-\d{2}-\d{2}$/.test(i))return new Date(`${i}T12:00:00`);const t=new Date(i);return isNaN(+t)?e??new Date:t}return i instanceof Date?i:e??new Date}function UM(i){const e=i.statuses??["published"],t=[];e.length===1?t.push(ls("status","==",e[0])):e.length>1&&t.push(ls("status","in",e.slice(0,10)));const s=li(hn(We,"events"),...t);return qd(s,o=>{const u=o.docs.map(h=>{const m=h.data(),p=ld(m.start??m.date),y=m.end?ld(m.end):null,v=m.title??"Untitled Event";return{id:h.id,type:"event",title:v,start:p,end:y,location:m.location??null,status:m.status,raw:m}});u.sort((h,m)=>+h.start-+m.start),i.onChange(u)})}function BM(i){const e=li(hn(We,"calendar_feed"));return qd(e,t=>{const s=t.docs.map(o=>{const u=o.data(),h=ld(u.start??u.date),m=u.end?ld(u.end):null,p=u.title??"Client Inquiry";return{id:o.id,type:"inquiry",title:p,start:h,end:m,location:u.location??null,status:u.status??"new",raw:u}});s.sort((o,u)=>+o.start-+u.start),i(s)})}function zM(i,e){const t=[...i,...e];return t.sort((s,o)=>+s.start-+o.start),t}const qM=()=>{const[i,e]=pe.useState(void 0),[t,s]=pe.useState(!1),[o,u]=pe.useState([]),[h,m]=pe.useState([]),[p,y]=pe.useState([]);pe.useEffect(()=>{const b=yd(ln,A=>{const R=A?.email??void 0;e(R),s(YA(R))});return()=>b()},[]),pe.useEffect(()=>{const b=UM({statuses:["published"],onChange:u}),A=BM(m);return()=>{b(),A()}},[t]),pe.useEffect(()=>{y(zM(o,h))},[o,h]);const v=pe.useMemo(()=>{const b=new Map;for(const A of p){const R=A.start.toISOString().slice(0,10);b.has(R)||b.set(R,[]),b.get(R).push(A)}return Array.from(b.entries()).sort((A,R)=>A[0].localeCompare(R[0]))},[p]);return f.jsxs("section",{className:"calendar-page",children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Calendar"}),f.jsxs("p",{className:"ucla-paragraph",children:["Published events",t?" + client inquiries":"","."]}),v.length===0&&f.jsx("p",{children:"No upcoming items yet."}),f.jsx("div",{className:"calendar-agenda",children:v.map(([b,A])=>f.jsxs("div",{className:"day-group",children:[f.jsx("h3",{className:"day-head",children:new Date(b).toLocaleDateString()}),f.jsx("ul",{className:"day-items",children:A.map(R=>f.jsxs("li",{className:`item ${R.type}`,children:[f.jsx("span",{className:`dot ${R.type}`}),f.jsxs("div",{className:"item-main",children:[f.jsxs("div",{className:"title-row",children:[f.jsx("strong",{children:R.title}),R.type==="inquiry"&&f.jsx("span",{className:"badge warn",children:"Inquiry"}),R.type==="event"&&R.status&&f.jsx("span",{className:`badge ${R.status}`,children:R.status})]}),f.jsxs("div",{className:"meta",children:[f.jsxs("span",{children:[R.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),R.end?` – ${R.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:""]}),R.location?f.jsxs("span",{children:[" • ",R.location]}):null]})]})]},`${R.type}-${R.id}`))})]},b))})]})},xb=()=>f.jsxs("div",{className:"admin-page",children:[f.jsxs("header",{className:"admin-header",children:[f.jsx("h1",{children:"Admin Dashboard"}),f.jsx("p",{children:"Manage members, assign roles, and oversee events."})]}),f.jsxs("section",{className:"admin-grid",children:[f.jsxs(Fe,{className:"admin-card",to:"events",children:[f.jsx("h3",{children:"Events"}),f.jsx("p",{children:"Create, publish, and manage upcoming events."})]}),f.jsxs(Fe,{className:"admin-card",to:"managemembers",children:[f.jsx("h3",{children:"Manage Members"}),f.jsx("p",{children:"Search members and assign roles."})]}),f.jsxs(Fe,{className:"admin-card",to:"reports",children:[f.jsx("h3",{children:"Reports"}),f.jsx("p",{children:"Export availability summaries (CSV/PDF)."})]}),f.jsxs(Fe,{className:"admin-card",to:"inquiries",children:[f.jsx("h3",{children:"Requests"}),f.jsx("p",{children:"Accept/decline Hire Us inquiries → events."})]}),f.jsxs(Fe,{className:"admin-card",to:"participation",children:[f.jsx("h3",{children:"Participation"}),f.jsx("p",{children:"Event participation summaries."})]})]})]}),KA=()=>{const i=({isActive:e})=>e?"active":void 0;return f.jsxs("nav",{className:"member-navbar",children:[f.jsx("div",{className:"member-brand",children:"Performer Portal"}),f.jsxs("ul",{className:"member-links",children:[f.jsx("li",{children:f.jsx(Fe,{to:"/dashboard",className:i,children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/profile",className:i,children:"Profile"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/events",className:i,children:"Events"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/calendar",className:i,children:"Calendar"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/performer-availability",className:i,children:"Availability"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/resources",className:i,children:"Resources"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/settings",className:i,children:"Settings"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/",className:i,children:"Public Site"})})]})]})},Nb=()=>f.jsxs(f.Fragment,{children:[f.jsx(KA,{}),f.jsxs("div",{style:{padding:"2rem"},children:[f.jsx("h1",{children:"Performer Dashboard"}),f.jsx("p",{children:"Welcome to the Performer Dashboard. Here you can see your events, resources, and manage your profile."})]})]}),QA=()=>f.jsxs("nav",{className:"navbar",children:[f.jsx("div",{className:"nav-brand",children:"Mariachi de Uclatlán"}),f.jsxs("ul",{className:"nav-links",children:[f.jsx("li",{children:f.jsx(sn,{to:"/",children:"Home"})}),f.jsx("li",{children:f.jsx(sn,{to:"/about",children:"About"})}),f.jsx("li",{children:f.jsx(sn,{to:"/members",children:"Members"})}),f.jsx("li",{children:f.jsx(sn,{to:"/contact",children:"Contact"})}),f.jsx("li",{children:f.jsx(sn,{to:"/Login",children:"Login"})}),f.jsx("li",{children:f.jsx(sn,{to:"/Register",children:"Register"})}),f.jsx("li",{children:f.jsx(sn,{to:"/musicians",children:"Musicians"})}),f.jsx("li",{children:f.jsx(sn,{to:"/dancers",children:"Dancers"})}),f.jsx("li",{children:f.jsx(sn,{to:"/staff",children:"Staff"})})]})]}),HM=()=>f.jsxs("footer",{className:"footer compact-footer",children:[f.jsxs("p",{children:["© ",new Date().getFullYear()," Mariachi de Uclatlán."]}),f.jsxs("p",{children:["Developed by Angel Ramirez | ",f.jsx("a",{href:"/contact",children:"Contact"})]})]}),XA=()=>{const i=({isActive:e})=>e?"active":void 0;return f.jsxs("nav",{className:"member-navbar",children:[f.jsx("div",{className:"member-brand",children:f.jsx(Fe,{to:"/members",className:i,children:"Members Portal"})}),f.jsxs("ul",{className:"member-links",children:[f.jsx("li",{children:f.jsx(Fe,{to:"/members/profile",className:i,children:"Profile"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/events",className:i,children:"Events"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/calendar",className:i,children:"Calendar"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/performer-availability",className:i,children:"Availability"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/resources",className:i,children:"Resources"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/settings",className:i,children:"Settings"})}),f.jsx("li",{className:"divider"}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin-dashboard",className:i,children:"Admin Dashboard"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/",className:i,children:"Public Site"})})]})]})},cy=()=>f.jsxs("nav",{className:"admin-navbar",role:"navigation","aria-label":"Admin Navigation Bar",children:[f.jsx("div",{className:"admin-brand",children:"Admin Portal"}),f.jsx("button",{className:"admin-menu-toggle","aria-label":"Toggle menu",onClick:()=>{document.querySelector(".admin-links")?.classList.toggle("open")},children:"☰"}),f.jsxs("ul",{className:"admin-links",children:[f.jsx("li",{children:f.jsx(Fe,{to:"/admin",end:!0,className:({isActive:i})=>i?"active":"",children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin/inquiries",className:({isActive:i})=>i?"active":"",children:"Requests"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin/participation",className:({isActive:i})=>i?"active":"",children:"Participation"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin/events",className:({isActive:i})=>i?"active":"",children:"Events"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin/managemembers",className:({isActive:i})=>i?"active":"",children:"Manage Members"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/admin/reports",className:({isActive:i})=>i?"active":"",children:"Reports"})}),f.jsx("li",{children:f.jsx(Fe,{to:"/members/performer-availability",className:({isActive:i})=>i?"active":"",children:"Availability"})}),f.jsx("li",{className:"divider","aria-hidden":!0,children:"│"}),f.jsx("li",{children:f.jsx(Fe,{to:"/",className:({isActive:i})=>i?"active":"",children:"Public Site"})})]})]}),FM=({user:i,isAdmin:e,claims:t})=>{const[s,o]=pe.useState(!1),u=()=>{console.log("AdminDebug -> user:",i),console.log("AdminDebug -> isAdmin:",e),console.log("AdminDebug -> claims:",t),o(h=>!h)};return f.jsxs("div",{className:"admin-debug",children:[f.jsx("button",{className:"admin-debug-btn",onClick:u,children:s?"Hide Debug":"Show Debug"}),s&&f.jsxs("div",{className:"admin-debug-info",children:[f.jsxs("p",{children:[f.jsx("strong",{children:"User email:"})," ",i?.email||"None"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"isAdmin:"})," ",e?"true":"false"]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Claims:"})," ",JSON.stringify(t)||"{}"]})]})]})},gp=({user:i,children:e})=>{const t=Bi();return i?f.jsx(f.Fragment,{children:e}):f.jsx(_p,{to:"/login",replace:!0,state:{from:t}})},GM=()=>f.jsxs("div",{className:"admin-shell",children:[f.jsx(cy,{}),f.jsx("div",{className:"admin-content",children:f.jsx(Fb,{})})]}),$M=({open:i,onClose:e,onCreate:t,defaultValues:s})=>{const[o,u]=pe.useState(()=>({title:s?.title??"",date:s?.date??new Date().toISOString().slice(0,10),startTime:s?.startTime??"",endTime:s?.endTime??"",location:s?.location??"",description:s?.description??"",status:s?.status??"draft"})),[h,m]=pe.useState(!1),[p,y]=pe.useState(null);if(pe.useEffect(()=>{i&&(u(A=>({...A,title:s?.title??"",date:s?.date??new Date().toISOString().slice(0,10),startTime:s?.startTime??"",endTime:s?.endTime??"",location:s?.location??"",description:s?.description??"",status:s?.status??"draft"})),y(null))},[i]),!i)return null;const v=A=>{const{name:R,value:O}=A.target;u(q=>({...q,[R]:O}))},b=async A=>{if(A.preventDefault(),y(null),!o.title.trim())return y("Title is required.");if(!/^\d{4}-\d{2}-\d{2}$/.test(o.date))return y("Date must be YYYY-MM-DD.");try{m(!0),await t(o),m(!1),e()}catch(R){console.error("[CreateEventModal] create error",R),m(!1),y(R?.message??"Failed to create event.")}};return f.jsx("div",{className:"cem-backdrop",role:"dialog","aria-modal":"true","aria-label":"Create event",children:f.jsxs("div",{className:"cem-modal",children:[f.jsxs("header",{className:"cem-header",children:[f.jsx("h2",{children:"Create Event"}),f.jsx("button",{className:"cem-icon",onClick:e,"aria-label":"Close",children:"×"})]}),f.jsxs("form",{className:"cem-form",onSubmit:b,children:[p&&f.jsx("div",{className:"cem-error",children:p}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Title *"}),f.jsx("input",{name:"title",value:o.title,onChange:v,placeholder:"e.g., Wedding at Royce Hall"})]}),f.jsxs("div",{className:"cem-row",children:[f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Date *"}),f.jsx("input",{type:"date",name:"date",value:o.date,onChange:v})]}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Start"}),f.jsx("input",{type:"time",name:"startTime",value:o.startTime,onChange:v})]}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"End"}),f.jsx("input",{type:"time",name:"endTime",value:o.endTime,onChange:v})]})]}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Location"}),f.jsx("input",{name:"location",value:o.location,onChange:v,placeholder:"Address or venue"})]}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Description/Notes"}),f.jsx("textarea",{name:"description",value:o.description,onChange:v,placeholder:"Any details for performers or client..."})]}),f.jsxs("label",{className:"cem-field",children:[f.jsx("span",{children:"Status"}),f.jsxs("select",{name:"status",value:o.status,onChange:v,children:[f.jsx("option",{value:"draft",children:"Draft"}),f.jsx("option",{value:"published",children:"Published"}),f.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),f.jsxs("footer",{className:"cem-footer",children:[f.jsx("button",{type:"button",className:"btn btn-light",onClick:e,disabled:h,children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn",disabled:h,children:h?"Saving…":"Create Event"})]})]})]})})};function YM(i){const{date:e,time:t}=HA(i);return{id:i.id,title:i.title,dateStr:t?`${e}, ${t}`:e,location:i.location||"",notes:i.description||"",status:i.status}}const KM=()=>{const[i,e]=pe.useState([]),[t,s]=pe.useState(!0),[o,u]=pe.useState(!1);pe.useEffect(()=>{const y=GA(v=>{e(v.map(YM)),s(!1)},v=>{console.error("[AdminEvents subscribe]",v),s(!1)});return()=>y()},[]);const h=y=>{console.log("edit",y)},m=async y=>{if(confirm("Delete (cancel) this event?"))try{await RM(y,{status:"cancelled"})}catch(v){console.error("[handleDelete]",v),alert("Failed to delete (cancel) event.")}},p=async y=>{const v={title:y.title.trim(),date:y.date,startTime:y.startTime||null,endTime:y.endTime||null,location:y.location?.trim()||"",description:y.description?.trim()||"",status:y.status??"draft"};await SM(v)};return f.jsxs("section",{className:"ucla-content",style:{maxWidth:1024,margin:"0 auto"},children:[f.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12},children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Manage Events"}),f.jsx("button",{className:"btn",onClick:()=>u(!0),children:"+ Create Event"})]}),t&&f.jsx("p",{children:"Loading events…"}),!t&&f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:16,marginTop:16},children:i.map(y=>f.jsx(qA,{event:y,canManage:!0,onEdit:h,onDelete:m},y.id))}),!t&&i.length===0&&f.jsx("p",{children:"No events found."}),f.jsx($M,{open:o,onClose:()=>u(!1),onCreate:p})]})};function Qp(i){const e=["admin","performer","member"];return i?(Array.isArray(i)?i:[i]).map(s=>typeof s=="string"?s.toLowerCase():s).filter(s=>e.includes(s)):[]}const WA="users";async function QM(){return(await ba(hn(We,WA))).docs.map(e=>{const t=e.data();return{uid:e.id,email:t.email??"",...t}})}async function XM(i,e){const t=An(We,WA,i);await ry(t,{roles:e,isAdmin:e.includes("admin"),updatedAt:Zt()},{merge:!0})}const Db={name:"",phoneNumber:"",year:"",major:"",instrument:"",instruments:[],section:"",bio:"",roles:["member"],returning:"",emergencyName:"",emergencyPhone:"",emergencyRelation:"",photoURL:""};async function WM(){const i=ln.currentUser;if(!i)return!1;try{if((await i.getIdTokenResult())?.claims?.admin)return!0}catch{}try{const e=await zd(An(We,"users",i.uid));return!!e.exists()&&!!e.data()?.isAdmin}catch{}return!1}function ZM(){const[i,e]=pe.useState([]),[t,s]=pe.useState(!0),[o,u]=pe.useState(null);return pe.useEffect(()=>{let h=!0;return(async()=>{s(!0),u(null);const m=ln.currentUser;if(!m){u("Not signed in"),s(!1);return}try{if(await WM()){const v=(await QM()).map(b=>({...Db,...b,uid:b.uid,email:b.email??"",roles:Qp(b.roles),instruments:Array.isArray(b.instruments)?b.instruments:[]}));h&&e(v)}else{const y=await zd(An(We,"users",m.uid)),v=y.exists()?y.data():{},b={...Db,...v,uid:m.uid,email:v?.email??m.email??"",roles:Qp(v?.roles),instruments:Array.isArray(v?.instruments)?v?.instruments:[]};h&&e([b])}}catch(p){console.error("[useUsersRoster] failed",p),h&&u(p?.message||"Failed to load users")}finally{h&&s(!1)}})(),()=>{h=!1}},[]),{profiles:i,loading:t,error:o}}const JM={member:"#e2e8f0",performer:"#cffafe",admin:"#fde68a"},ek={member:"Member",performer:"Performer",admin:"Admin"},tk=({role:i})=>f.jsx("span",{style:{background:JM[i],borderRadius:9999,padding:"2px 10px",fontSize:12,border:"1px solid rgba(0,0,0,0.06)"},children:ek[i]}),nk=({value:i,onChange:e,disabled:t})=>f.jsxs("select",{value:i,onChange:s=>e(s.target.value),disabled:t,style:{padding:"6px 8px"},children:[f.jsx("option",{value:"member",children:"Member"}),f.jsx("option",{value:"performer",children:"Performer"}),f.jsx("option",{value:"admin",children:"Admin"})]});function ik(i){return!i||i.length===0?"member":i.includes("admin")?"admin":i.includes("performer")?"performer":"member"}const rk=()=>{const{profiles:i,loading:e,error:t}=ZM(),[s,o]=pe.useState(""),u=pe.useMemo(()=>{const m=s.trim().toLowerCase();return m?i.filter(p=>{const y=(p.name??"").toLowerCase(),v=(p.email??"").toLowerCase(),b=(p.instruments??[]).join(", ").toLowerCase();return y.includes(m)||v.includes(m)||b.includes(m)}):i},[i,s]),h=async(m,p)=>{const y=p==="admin"?["admin"]:p==="performer"?["performer"]:["member"];await XM(m.uid,y)};return f.jsxs("section",{className:"ucla-content",style:{maxWidth:1100,margin:"0 auto"},children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Manage Members"}),f.jsx("p",{children:"Search, view, and assign roles."}),f.jsx("div",{style:{margin:"12px 0"},children:f.jsx("input",{value:s,onChange:m=>o(m.target.value),placeholder:"Search by name, email, instrument…",style:{width:"100%",maxWidth:420}})}),e&&f.jsx("p",{children:"Loading members…"}),t&&f.jsx("p",{style:{color:"salmon"},children:String(t)}),!e&&!t&&f.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[f.jsx("thead",{children:f.jsxs("tr",{style:{textAlign:"left"},children:[f.jsx("th",{children:"Name"}),f.jsx("th",{children:"Email"}),f.jsx("th",{children:"Instruments"}),f.jsx("th",{children:"Role"}),f.jsx("th",{children:"Change Role"})]})}),f.jsx("tbody",{children:u.map(m=>{const p=Qp(m.roles),y=ik(p);return f.jsxs("tr",{style:{borderTop:"1px solid #eee"},children:[f.jsx("td",{children:m.name??""}),f.jsx("td",{children:m.email??""}),f.jsx("td",{children:(m.instruments??[]).join(", ")}),f.jsx("td",{children:f.jsx(tk,{role:y})}),f.jsx("td",{children:f.jsx(nk,{value:y,onChange:v=>h(m,v)})})]},m.uid)})})]})]})};function iu(i){if(i){if(typeof i=="string")return i;if(i instanceof Xe)return i.toDate().toISOString()}}async function Ob(i,e){const t=li(hn(We,"calendar_feed"),ls("sourceId","==",i),IP(1)),o=(await ba(t)).docs[0];o&&await Mu(An(We,"calendar_feed",o.id),{status:e,updatedAt:Zt()})}const sk=()=>{const[i,e]=pe.useState([]),[t,s]=pe.useState(""),[o,u]=pe.useState("");pe.useEffect(()=>{const p=li(hn(We,"inquiries"),ty("createdAt","desc")),y=qd(p,v=>{const b=v.docs.map(A=>({id:A.id,...A.data()}));e(b)},v=>u(v?.message||"Failed to load inquiries"));return()=>y()},[]);const h=async p=>{try{s(p.id),u("");const y=p.event||{},v=iu(y.start)||(y.date?new Date(`${y.date}T12:00:00`).toISOString():void 0),b=iu(y.end),A={title:y.title||"Client Performance",date:y.date||void 0,start:v,end:b,location:y.location||"",status:"published",source:"inquiry",sourceId:p.id,createdAt:Zt(),updatedAt:Zt()},R=await ku(hn(We,"events"),A);await Mu(An(We,"inquiries",p.id),{status:"in_progress",eventId:R.id,updatedAt:Zt()}),await Ob(p.id,"in_progress")}catch(y){console.error("[accept inquiry]",y),u(y?.message||"Failed to accept request")}finally{s("")}},m=async p=>{try{s(p.id),u(""),await Mu(An(We,"inquiries",p.id),{status:"closed",updatedAt:Zt()}),await Ob(p.id,"closed")}catch(y){console.error("[decline inquiry]",y),u(y?.message||"Failed to decline request")}finally{s("")}};return f.jsxs("section",{className:"admin-inquiries ucla-content",children:[f.jsx("h1",{className:"ucla-heading-xl",children:"Performance Requests"}),f.jsx("p",{children:"Review client inquiries. Accept to create an Event; Decline to close."}),o&&f.jsx("p",{className:"err",role:"alert",children:o}),f.jsx("div",{className:"inq-list",children:i.map(p=>{const y=p.event||{};return f.jsxs("article",{className:`inq-card status-${p.status||"new"}`,children:[f.jsxs("header",{className:"inq-head",children:[f.jsxs("div",{children:[f.jsx("h3",{children:y.title||"Client Inquiry"}),f.jsxs("div",{className:"muted",children:["From: ",p.name," • ",p.email,p.org?` • ${p.org}`:""]})]}),f.jsx("span",{className:`chip ${p.status||"new"}`,children:p.status||"new"})]}),f.jsxs("dl",{className:"grid",children:[f.jsxs("div",{children:[f.jsx("dt",{children:"Date"}),f.jsx("dd",{children:y.date||(typeof y.start=="string"?y.start.slice(0,10):"")||"—"})]}),f.jsxs("div",{children:[f.jsx("dt",{children:"Time"}),f.jsx("dd",{children:(iu(y.start)?.slice(11,16)||"—")+(iu(y.end)?` – ${iu(y.end).slice(11,16)}`:"")})]}),f.jsxs("div",{children:[f.jsx("dt",{children:"Location"}),f.jsx("dd",{children:y.location||"—"})]}),f.jsxs("div",{className:"span-2",children:[f.jsx("dt",{children:"Notes"}),f.jsx("dd",{children:p.message||"—"})]})]}),f.jsxs("footer",{className:"actions",children:[f.jsx("button",{className:"btn",disabled:t===p.id,onClick:()=>h(p),children:"Accept"}),f.jsx("button",{className:"btn btn-light",disabled:t===p.id,onClick:()=>m(p),children:"Decline"})]})]},p.id)})}),i.length===0&&f.jsx("p",{children:"No requests yet."})]})},ru=(i,e=0)=>typeof i=="number"&&!Number.isNaN(i)?i:e,Eo=(i,e=null)=>typeof i=="string"?i:e,ak=(i,e)=>{if(!i||!e)return null;const[t,s]=i.split(":").map(Number),[o,u]=e.split(":").map(Number);if([t,s,o,u].some(y=>Number.isNaN(y)))return null;const h=t*60+s,p=o*60+u-h;return p>0?p/60:null},ok=async i=>(await ba(hn(We,`events/${i}/participation`))).docs.map(t=>{const s=t.data();return{uid:t.id,name:Eo(s.name??s.displayName??s.fullName??null)??void 0,status:s.status??"unknown",compensatedHours:typeof s.compensatedHours=="number"?s.compensatedHours:null,hourlyRateOverride:typeof s.hourlyRateOverride=="number"?s.hourlyRateOverride:null}}),lk=async i=>{const e=hn(We,"events"),t=li(e,ty("date","desc")),s=await ba(t),o=i?.statusIn&&i.statusIn.length?new Set(i.statusIn):null,u=[];for(const h of s.docs){const m=h.data(),p=m.status??"draft";if(o&&!o.has(p))continue;const y=await ok(h.id),v=ru(m.hourlyRate??m.rate??0,0),b=ru(m.eventDurationHours??m.durationHours??ak(m.startTime,m.endTime)??0,0);let A=0,R=0,O=0;for(const q of y){if(q.status!=="going")continue;A+=1;const V=typeof q.compensatedHours=="number"&&q.compensatedHours>=0?q.compensatedHours:b,ee=typeof q.hourlyRateOverride=="number"&&q.hourlyRateOverride>=0?q.hourlyRateOverride:v,K=ru(V,0)*ru(ee,0);R+=ru(V,0),O+=K}u.push({id:h.id,title:Eo(m.title,"Untitled Event"),date:m.date??null,startTime:Eo(m.startTime??null),endTime:Eo(m.endTime??null),eventDurationHours:b||null,hourlyRate:v||null,clientCharge:typeof m.clientCharge=="number"?m.clientCharge:null,status:p,venue:Eo(m.venue??null),notes:Eo(m.notes??null),participants:y,totals:{headcountGoing:A,totalCompHours:R,totalPayout:O}})}return u},hy=async(i,e)=>{await Mu(An(We,"events",i),{status:e})},uk=async i=>hy(i,"published"),ck=async i=>hy(i,"hidden"),hk=async i=>hy(i,"canceled"),dk=async i=>{const e=hn(We,`events/${i}/participation`),t=await ba(e);for(const s of t.docs)await vb(s.ref);await vb(An(We,"events",i))},fk=i=>i?i.toDate().toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"—",aa=i=>typeof i=="number"?`$${i.toFixed(2)}`:"—",mk=({status:i})=>f.jsx("span",{className:`status badge ${i}`,children:i}),Pb=()=>{const[i,e]=pe.useState(!0),[t,s]=pe.useState([]),[o,u]=pe.useState("all"),[h,m]=pe.useState(""),p=pe.useCallback(async()=>{e(!0);const b=await lk({statusIn:o==="all"?void 0:[o]});s(b),e(!1)},[o]);pe.useEffect(()=>{p()},[p]);const y=pe.useMemo(()=>{const v=h.trim().toLowerCase();return t.filter(b=>!v||b.title.toLowerCase().includes(v))},[t,h]);return f.jsxs("section",{className:"participation-page",children:[f.jsx("h1",{children:"Participation & Event Financials"}),f.jsxs("div",{className:"toolbar",children:[f.jsx("input",{placeholder:"Search events by title…",value:h,onChange:v=>m(v.target.value)}),f.jsxs("select",{value:o,onChange:v=>u(v.target.value),children:[f.jsx("option",{value:"all",children:"All statuses"}),f.jsx("option",{value:"published",children:"Published"}),f.jsx("option",{value:"draft",children:"Draft"}),f.jsx("option",{value:"hidden",children:"Hidden"}),f.jsx("option",{value:"canceled",children:"Canceled"})]}),f.jsx("button",{onClick:p,disabled:i,children:i?"Loading…":"Reload"})]}),y.map(v=>f.jsxs("details",{className:"event-card",children:[f.jsx("summary",{children:f.jsxs("div",{className:"ev-summary",children:[f.jsxs("div",{className:"ev-title",children:[f.jsx("h3",{children:v.title}),f.jsxs("div",{className:"meta",children:[f.jsx("span",{children:fk(v.date)}),f.jsxs("span",{children:["• ",v.startTime??"—","–",v.endTime??"—"]}),f.jsxs("span",{children:["• ",v.venue??"—"]})]})]}),f.jsxs("div",{className:"ev-stats",children:[f.jsx(mk,{status:v.status}),f.jsxs("div",{className:"kpis",children:[f.jsxs("div",{children:[f.jsx("small",{children:"Going"}),f.jsx("strong",{children:v.totals.headcountGoing})]}),f.jsxs("div",{children:[f.jsx("small",{children:"Comp Hours"}),f.jsx("strong",{children:v.totals.totalCompHours.toFixed(2)})]}),f.jsxs("div",{children:[f.jsx("small",{children:"Total Payout"}),f.jsx("strong",{children:aa(v.totals.totalPayout)})]}),f.jsxs("div",{children:[f.jsx("small",{children:"Client Charge"}),f.jsx("strong",{children:aa(v.clientCharge)})]})]})]})]})}),f.jsxs("div",{className:"ev-actions",children:[f.jsx("button",{onClick:()=>uk(v.id),children:"Publish"}),f.jsx("button",{onClick:()=>ck(v.id),children:"Hide"}),f.jsx("button",{onClick:()=>hk(v.id),children:"Cancel"}),f.jsx("button",{className:"danger",onClick:()=>{confirm("Delete event and all participation? This cannot be undone.")&&dk(v.id).then(p)},children:"Delete"})]}),f.jsxs("div",{className:"ev-financials",children:[f.jsx("h4",{children:"Financial Summary"}),f.jsxs("table",{children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Hourly Rate"}),f.jsx("th",{children:"Event Duration (hrs)"}),f.jsx("th",{children:"Headcount (Going)"}),f.jsx("th",{children:"Total Comp Hours"}),f.jsx("th",{children:"Total Payout"}),f.jsx("th",{children:"Client Charge"})]})}),f.jsx("tbody",{children:f.jsxs("tr",{children:[f.jsx("td",{children:aa(v.hourlyRate??null)}),f.jsx("td",{children:v.eventDurationHours??"—"}),f.jsx("td",{children:v.totals.headcountGoing}),f.jsx("td",{children:v.totals.totalCompHours.toFixed(2)}),f.jsx("td",{children:aa(v.totals.totalPayout)}),f.jsx("td",{children:aa(v.clientCharge)})]})})]})]}),f.jsxs("div",{className:"ev-participants",children:[f.jsx("h4",{children:"Who’s Going"}),f.jsxs("table",{children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Performer"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Compensated Time (hrs)"}),f.jsx("th",{children:"Rate ($/hr)"}),f.jsx("th",{children:"Performer Payout"})]})}),f.jsxs("tbody",{children:[v.participants.filter(b=>b.status==="going").map(b=>{const A=b.compensatedHours??v.eventDurationHours??0,R=b.hourlyRateOverride??v.hourlyRate??0,O=A*R;return f.jsxs("tr",{children:[f.jsx("td",{children:b.name??b.uid}),f.jsx("td",{children:b.status}),f.jsx("td",{children:typeof A=="number"?A.toFixed(2):"—"}),f.jsx("td",{children:aa(R)}),f.jsx("td",{children:aa(O)})]},b.uid)}),v.participants.filter(b=>b.status==="going").length===0&&f.jsx("tr",{children:f.jsx("td",{colSpan:5,style:{textAlign:"center",opacity:.65},children:"No confirmed performers yet."})})]})]}),f.jsxs("details",{className:"others",children:[f.jsx("summary",{children:"View others (maybe/declined/unknown)"}),f.jsxs("table",{children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Performer"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Notes"})]})}),f.jsx("tbody",{children:v.participants.filter(b=>b.status!=="going").map(b=>f.jsxs("tr",{children:[f.jsx("td",{children:b.name??b.uid}),f.jsx("td",{children:b.status??"unknown"}),f.jsx("td",{children:"—"})]},b.uid))})]})]})]})]},v.id)),!i&&y.length===0&&f.jsx("p",{style:{opacity:.7},children:"No events match your filter."})]})},pk=()=>{const[i,e]=pe.useState(""),[t,s]=pe.useState(""),[o,u]=pe.useState([]),[h,m]=pe.useState(!1),p=pe.useMemo(()=>{const O=o.filter(V=>V.type==="Availability").length,q=O>0?O/5:0;return{attendanceCount:O,avgPerformers:Math.round(q*10)/10}},[o]),y=pe.useMemo(()=>{const R={Submitted:0,Accepted:0,Booked:0,Completed:0};return o.filter(O=>O.type==="Inquiry").forEach(O=>{R[O.status]!==void 0&&R[O.status]++}),R},[o]),v=pe.useMemo(()=>{const R=o.filter(V=>V.type==="Inquiry"&&V.status==="Completed").length,O=p.attendanceCount*200;return{clientCharges:R*500,performerPayouts:O}},[o,p]),b=pe.useCallback(async()=>{m(!0);try{const R=i?new Date(i):null,O=t?new Date(t):null;let q;const V=hn(We,"activities");R&&O?q=li(V,ls("date",">=",R.toISOString()),ls("date","<=",O.toISOString())):R?q=li(V,ls("date",">=",R.toISOString())):O?q=li(V,ls("date","<=",O.toISOString())):q=li(V);const K=(await ba(q)).docs.map(Q=>{const ie=Q.data();return{id:Q.id,date:ie.date||"",type:ie.type||"Availability",title:ie.title||"",status:ie.status||"Unknown"}});u(K)}catch(R){console.error("Failed to fetch activities:",R),u([])}finally{m(!1)}},[i,t]);pe.useEffect(()=>{b()},[b]);const A=()=>{const R=`Date,Type,Title,Status
`,O=o.map(K=>`${K.date},${K.type},${K.title},${K.status}`).join(`
`),q=new Blob([R+O],{type:"text/csv"}),V=window.URL.createObjectURL(q),ee=document.createElement("a");ee.href=V,ee.download="report.csv",ee.click(),window.URL.revokeObjectURL(V)};return f.jsxs("section",{className:"reports stack",children:[f.jsxs("header",{className:"stack",children:[f.jsx("h1",{className:"title",children:"Reports"}),f.jsx("p",{className:"lede",children:"Overview of participation, inquiries, and revenue performance."})]}),f.jsxs("div",{className:"toolbar",children:[f.jsxs("div",{className:"left",children:[f.jsxs("label",{className:"field",children:[f.jsx("span",{children:"From"}),f.jsx("input",{type:"date",value:i,onChange:R=>e(R.target.value)})]}),f.jsxs("label",{className:"field",children:[f.jsx("span",{children:"To"}),f.jsx("input",{type:"date",value:t,onChange:R=>s(R.target.value)})]})]}),f.jsxs("div",{className:"right",children:[f.jsx("button",{className:"btn",onClick:A,disabled:h,children:"Export CSV"}),f.jsx("button",{className:"btn btn-secondary",onClick:b,disabled:h,children:"Refresh"})]})]}),f.jsxs("div",{className:"grid cols-3 stack-md",children:[f.jsxs("article",{className:"card stat",children:[f.jsx("h3",{children:"Participation Summary"}),f.jsxs("p",{className:"muted",children:["Attendance: ",p.attendanceCount,", average performers per event: ",p.avgPerformers]}),f.jsx("div",{className:"placeholder",children:h?"Loading…":p.attendanceCount})]}),f.jsxs("article",{className:"card stat",children:[f.jsx("h3",{children:"Inquiry Funnel"}),f.jsxs("p",{className:"muted",children:["Submitted: ",y.Submitted,", Accepted:"," ",y.Accepted,", Booked: ",y.Booked,", Completed:"," ",y.Completed]}),f.jsx("div",{className:"placeholder",children:h?"Loading…":Object.values(y).reduce((R,O)=>R+O,0)})]}),f.jsxs("article",{className:"card stat",children:[f.jsx("h3",{children:"Revenue (Est.)"}),f.jsxs("p",{className:"muted",children:["Client charges: $",v.clientCharges,", performer payouts: $",v.performerPayouts]}),f.jsx("div",{className:"placeholder",children:h?"Loading…":"$"+(v.clientCharges-v.performerPayouts)})]})]}),f.jsxs("section",{className:"card stack",children:[f.jsx("h3",{children:"Recent Activity"}),f.jsxs("div",{className:"table",children:[f.jsxs("div",{className:"row head",children:[f.jsx("div",{children:"Date"}),f.jsx("div",{children:"Type"}),f.jsx("div",{children:"Event / Inquiry"}),f.jsx("div",{children:"Status"})]}),h&&f.jsx("div",{className:"row",children:f.jsx("div",{colSpan:4,children:"Loading…"})}),!h&&o.length===0&&f.jsx("div",{className:"row",children:f.jsx("div",{colSpan:4,children:"No activity for selected range."})}),!h&&o.map(R=>f.jsxs("div",{className:"row",children:[f.jsx("div",{children:R.date?new Date(R.date).toLocaleDateString():"—"}),f.jsx("div",{children:R.type||"—"}),f.jsx("div",{children:R.title||"—"}),f.jsx("div",{children:f.jsx("span",{className:"badge",children:R.status||"—"})})]},R.id))]})]})]})},dy=({person:i})=>f.jsxs("article",{className:"person-card","aria-label":i.name,children:[f.jsx("div",{className:"person-card__image",children:f.jsx("img",{src:i.headshotUrl||"https://via.placeholder.com/512x640?text=Headshot",alt:`${i.name} headshot`,loading:"lazy"})}),f.jsxs("div",{className:"person-card__body",children:[f.jsx("h3",{className:"person-card__name",children:i.name}),i.role&&f.jsx("p",{className:"person-card__meta",children:i.role}),i.instrument&&f.jsxs("p",{className:"person-card__meta",children:[f.jsx("strong",{children:"Instrument:"})," ",i.instrument]}),i.section&&f.jsxs("p",{className:"person-card__meta",children:[f.jsx("strong",{children:"Section:"})," ",i.section]})]})]}),gk=[{id:"staff-1",name:"Jesús Guzmán",category:"staff",role:"Director",headshotUrl:"../../assets/headshots/Chuy.png"},{id:"staff-2",name:"Elias Rodriguez",category:"staff",role:"Program Coordinator",headshotUrl:"https://via.placeholder.com/512x640?text=Elias+Rodriguez"}],yk=()=>f.jsxs("section",{className:"people-page",children:[f.jsxs("header",{className:"people-header",children:[f.jsx("h1",{children:"Our Staff"}),f.jsx("p",{className:"people-subtitle",children:"Leaders and coordinators supporting Mariachi de Uclatlán."})]}),f.jsx("div",{className:"people-grid",children:gk.map(i=>f.jsx(dy,{person:i},i.id))})]}),_k=[{id:"mus-1",name:"Enrique Rodrigruez-Gonzales",category:"musician",instrument:"Vihuela",section:"Armonia",headshotUrl:"EnriqueImg"},{id:"mus-2",name:"Angel Ramirez",category:"musician",instrument:"Guitarron",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=José+Hernández"},{id:"mus-3",name:"Brandon",category:"musician",role:"Guitarra",section:"Armonia",headshotUrl:"src/assets/headshots/brandon.jpg"},{id:"mus-3",name:"Paulina Perez",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-4",name:"Gaby (guitar)",category:"musician",role:"Singer/Guitar",section:"Armonia",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"Mus-5",name:"Dayanara Bravo",role:"Violin-Guitarron",category:"musician",section:"String-Armonia",headshotUrl:"src/assets/headshots/daya.jpg"},{id:"Mus-6",name:"Jake Sherry",category:"musician",role:"Trumpet",section:"Trumpet",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-7",name:"april",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"},{id:"mus-8",name:"Andrew",category:"musician",role:"Violin",section:"string",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],vk=()=>f.jsxs("section",{className:"people-page",children:[f.jsxs("header",{className:"people-header",children:[f.jsx("h1",{children:"Our Musicians"}),f.jsx("p",{className:"people-subtitle",children:"Meet the student performers who bring the music to life."})]}),f.jsx("div",{className:"people-grid",children:_k.map(i=>f.jsx(dy,{person:i},i.id))})]}),Ek=[{id:"dan-1",name:"Sarah Ward",category:"musician",role:"Folklórico",section:"Danza",headshotUrl:"https://via.placeholder.com/512x640?text=Sofía+García"}],Tk=()=>f.jsxs("section",{className:"people-page",children:[f.jsxs("header",{className:"people-header",children:[f.jsx("h1",{children:"Our Dancers"}),f.jsx("p",{className:"people-subtitle",children:"Folklórico dancers who bring motion and storytelling to our performances."})]}),f.jsx("div",{className:"people-grid",children:Ek.map(i=>f.jsx(dy,{person:i},i.id))})]}),bk=({adminComponent:i,performerComponent:e,publicComponent:t})=>{const[s,o]=B.useState("public"),u=h=>{const m=h.target.value;o(m)};return f.jsxs(f.Fragment,{children:[f.jsxs("div",{style:{padding:"1rem",backgroundColor:"#f0f0f0"},children:[f.jsx("label",{style:{marginRight:"0.5rem"},children:"Select Role View:"}),f.jsxs("select",{value:s,onChange:u,children:[f.jsx("option",{value:"public",children:"Public"}),f.jsx("option",{value:"performer",children:"Performer"}),f.jsx("option",{value:"admin",children:"Admin"})]})]}),s==="admin"&&f.jsx(cy,{}),s==="performer"&&f.jsx(XA,{}),"  ",s==="public"&&f.jsx(QA,{}),f.jsxs("main",{children:[s==="admin"&&i,s==="performer"&&e,s==="public"&&t]})]})},wk=()=>f.jsx(Fb,{}),Ak=()=>{const[i,e]=pe.useState(null),[t,s]=pe.useState(null),o=Bi();pe.useEffect(()=>{const b=yd(ln,async A=>{if(e(A),A){const R=await g0(A);s(R.claims)}else s(null)});return()=>b()},[]);const u=pe.useMemo(()=>{if(!i)return!1;if(t?.admin||t?.role==="admin")return!0;const b=(i.email??"").toLowerCase();return YA(b)},[i,t]),h=o.pathname,m=h.startsWith("/members"),p=h.startsWith("/admin"),y=h.startsWith("/performer-dashboard"),v=h.startsWith("/dashboard")||y||p;return f.jsxs("div",{className:"app-shell",children:[!m&&!v&&f.jsx(QA,{}),m&&i&&f.jsx(XA,{}),y&&i&&f.jsx(KA,{}),p&&i&&u&&f.jsx(cy,{}),f.jsx("main",{className:"container main stack",role:"main",children:f.jsxs(A1,{children:[f.jsx(He,{path:"/",element:f.jsx(LE,{})}),f.jsx(He,{path:"/about",element:f.jsx(lC,{})}),f.jsx(He,{path:"/contact",element:f.jsx(uC,{})}),f.jsx(He,{path:"/login",element:f.jsx(uM,{})}),f.jsx(He,{path:"/register",element:f.jsx(dM,{})}),f.jsx(He,{path:"/book-us",element:f.jsx(pM,{})}),f.jsx(He,{path:"/hire-us",element:f.jsx(_M,{})}),f.jsx(He,{path:"/join",element:f.jsx(gM,{})}),f.jsx(He,{path:"/staff",element:f.jsx(yk,{})}),f.jsx(He,{path:"/musicians",element:f.jsx(vk,{})}),f.jsx(He,{path:"/dancers",element:f.jsx(Tk,{})}),f.jsxs(He,{path:"/members",element:f.jsx(gp,{user:i,children:f.jsx(wk,{})}),children:[f.jsx(He,{index:!0,element:f.jsx(vM,{})}),f.jsx(He,{path:"profile",element:f.jsx(TM,{})}),f.jsx(He,{path:"events",element:f.jsx(IM,{})}),f.jsx(He,{path:"resources",element:f.jsx(xM,{})}),f.jsx(He,{path:"settings",element:f.jsx(NM,{})}),f.jsx(He,{path:"performer-availability",element:f.jsx(VM,{})}),f.jsx(He,{path:"calendar",element:f.jsx(qM,{})})]}),f.jsx(He,{path:"/dashboard",element:f.jsx(bk,{adminComponent:f.jsx(xb,{}),performerComponent:f.jsx(Nb,{}),publicComponent:f.jsx(LE,{})})}),f.jsxs(He,{path:"/admin/*",element:f.jsx(gp,{user:i,children:u?f.jsx(GM,{}):f.jsx(_p,{to:"/dashboard",replace:!0})}),children:[f.jsx(He,{index:!0,element:f.jsx(xb,{})}),f.jsx(He,{path:"events",element:f.jsx(KM,{})}),f.jsx(He,{path:"managemembers",element:f.jsx(rk,{})}),f.jsx(He,{path:"reports",element:f.jsx(pk,{})}),f.jsx(He,{path:"inquiries",element:f.jsx(sk,{})}),f.jsx(He,{path:"participation",element:f.jsx(Pb,{})})]}),f.jsx(He,{path:"/admin/participation",element:f.jsx(Pb,{})}),f.jsx(He,{path:"/performer-dashboard",element:f.jsx(gp,{user:i,children:f.jsx(Nb,{})})}),f.jsx(He,{path:"*",element:f.jsx(_p,{to:"/",replace:!0})})]})}),!p&&f.jsx(HM,{}),f.jsx(FM,{user:i,isAdmin:u,claims:t})]})},Sk=()=>f.jsx(Y1,{children:f.jsx(Ak,{})});OR.createRoot(document.getElementById("root")).render(f.jsx(pe.StrictMode,{children:f.jsx(Sk,{})}));
